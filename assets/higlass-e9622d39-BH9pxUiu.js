import{aU as O,aW as Fn,aX as XP,G as WP,aY as bf,aZ as Bg,r as Gn}from"./index-BLSk2Pit.js";var DU={};(function(e){(function(t){var n=t.Promise,r=n&&"resolve"in n&&"reject"in n&&"all"in n&&"race"in n&&function(){var x;return new n(function(C){x=C}),typeof x=="function"}();e?(e.Promise=r?n:I,e.Polyfill=I):r||(t.Promise=I);var i="pending",o="sealed",a="fulfilled",s="rejected",u=function(){};function c(x){return Object.prototype.toString.call(x)==="[object Array]"}var l=typeof setImmediate<"u"?setImmediate:setTimeout,f=[],h;function p(){for(var x=0;x<f.length;x++)f[x][0](f[x][1]);f=[],h=!1}function d(x,C){f.push([x,C]),h||(h=!0,l(p,0))}function m(x,C){function w(L){b(C,L)}function B(L){_(C,L)}try{x(w,B)}catch(L){B(L)}}function g(x){var C=x.owner,w=C.state_,B=C.data_,L=x[w],k=x.then;if(typeof L=="function"){w=a;try{B=L(B)}catch(R){_(k,R)}}v(k,B)||(w===a&&b(k,B),w===s&&_(k,B))}function v(x,C){var w;try{if(x===C)throw new TypeError("A promises callback cannot return that same promise.");if(C&&(typeof C=="function"||typeof C=="object")){var B=C.then;if(typeof B=="function")return B.call(C,function(L){w||(w=!0,C!==L?b(x,L):y(x,L))},function(L){w||(w=!0,_(x,L))}),!0}}catch(L){return w||_(x,L),!0}return!1}function b(x,C){(x===C||!v(x,C))&&y(x,C)}function y(x,C){x.state_===i&&(x.state_=o,x.data_=C,d(S,x))}function _(x,C){x.state_===i&&(x.state_=o,x.data_=C,d(E,x))}function T(x){var C=x.then_;x.then_=void 0;for(var w=0;w<C.length;w++)g(C[w])}function S(x){x.state_=a,T(x)}function E(x){x.state_=s,T(x)}function I(x){if(typeof x!="function")throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof I))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],m(x,this)}I.prototype={constructor:I,state_:i,then_:null,data_:void 0,then:function(x,C){var w={owner:this,then:new this.constructor(u),fulfilled:x,rejected:C};return this.state_===a||this.state_===s?d(g,w):this.then_.push(w),w.then},catch:function(x){return this.then(null,x)}},I.all=function(x){var C=this;if(!c(x))throw new TypeError("You must pass an array to Promise.all().");return new C(function(w,B){var L=[],k=0;function R($){return k++,function(ie){L[$]=ie,--k||w(L)}}for(var F=0,U;F<x.length;F++)U=x[F],U&&typeof U.then=="function"?U.then(R(F),B):L[F]=U;k||w(L)})},I.race=function(x){var C=this;if(!c(x))throw new TypeError("You must pass an array to Promise.race().");return new C(function(w,B){for(var L=0,k;L<x.length;L++)k=x[L],k&&typeof k.then=="function"?k.then(w,B):w(k)})},I.resolve=function(x){var C=this;return x&&typeof x=="object"&&x.constructor===C?x:new C(function(w){w(x)})},I.reject=function(x){var C=this;return new C(function(w,B){B(x)})}})(typeof window<"u"?window:typeof bf<"u"?bf:typeof self<"u"?self:bf)})(DU);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var LM=Object.getOwnPropertySymbols,uJ=Object.prototype.hasOwnProperty,cJ=Object.prototype.propertyIsEnumerable;function hJ(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function fJ(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var pJ=fJ()?Object.assign:function(e,t){for(var n,r=hJ(e),i,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var a in n)uJ.call(n,a)&&(r[a]=n[a]);if(LM){i=LM(n);for(var s=0;s<i.length;s++)cJ.call(n,i[s])&&(r[i[s]]=n[i[s]])}}return r};const dJ=WP(pJ);/*!
 * @pixi/polyfill - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */window.Promise||(window.Promise=DU.Polyfill);Object.assign||(Object.assign=dJ);var mJ=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(window.performance&&window.performance.now)){var gJ=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-gJ}}var HS=Date.now(),jM=["ms","moz","webkit","o"];for(var US=0;US<jM.length&&!window.requestAnimationFrame;++US){var zS=jM[US];window.requestAnimationFrame=window[zS+"RequestAnimationFrame"],window.cancelAnimationFrame=window[zS+"CancelAnimationFrame"]||window[zS+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var t=Date.now(),n=mJ+HS-t;return n<0&&(n=0),HS=t,window.setTimeout(function(){HS=Date.now(),e(performance.now())},n)});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array);window.Uint8Array||(window.Uint8Array=Array);window.Int32Array||(window.Int32Array=Array);var VS=/iPhone/i,BM=/iPod/i,FM=/iPad/i,GM=/\biOS-universal(?:.+)Mac\b/i,YS=/\bAndroid(?:.+)Mobile\b/i,HM=/Android/i,mh=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Rv=/Silk/i,Ja=/Windows Phone/i,UM=/\bWindows(?:.+)ARM\b/i,zM=/BlackBerry/i,VM=/BB10/i,YM=/Opera Mini/i,XM=/\b(CriOS|Chrome)(?:.+)Mobile/i,WM=/Mobile(?:.+)Firefox\b/i,qM=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function yJ(e){return function(t){return t.test(e)}}function vJ(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var n=t.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),r=n.split("Twitter"),typeof r[1]<"u"&&(n=r[0]);var i=yJ(n),o={apple:{phone:i(VS)&&!i(Ja),ipod:i(BM),tablet:!i(VS)&&(i(FM)||qM(t))&&!i(Ja),universal:i(GM),device:(i(VS)||i(BM)||i(FM)||i(GM)||qM(t))&&!i(Ja)},amazon:{phone:i(mh),tablet:!i(mh)&&i(Rv),device:i(mh)||i(Rv)},android:{phone:!i(Ja)&&i(mh)||!i(Ja)&&i(YS),tablet:!i(Ja)&&!i(mh)&&!i(YS)&&(i(Rv)||i(HM)),device:!i(Ja)&&(i(mh)||i(Rv)||i(YS)||i(HM))||i(/\bokhttp\b/i)},windows:{phone:i(Ja),tablet:i(UM),device:i(Ja)||i(UM)},other:{blackberry:i(zM),blackberry10:i(VM),opera:i(YM),firefox:i(WM),chrome:i(XM),device:i(zM)||i(VM)||i(YM)||i(WM)||i(XM)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _o=vJ(window.navigator);function bJ(e){var t=!0;if(_o.tablet||_o.phone){if(_o.apple.device){var n=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(n){var r=parseInt(n[1],10);r<11&&(t=!1)}}if(_o.android.device){var n=navigator.userAgent.match(/Android\s([0-9.]*)/);if(n){var r=parseInt(n[1],10);r<7&&(t=!1)}}}return t?e:4}function _J(){return!_o.apple.device}var ft={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:bJ(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:_o.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:_J(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},RU={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,c,l){this.fn=u,this.context=c,this.once=l||!1}function o(u,c,l,f,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new i(l,f||u,h),d=n?n+c:c;return u._events[d]?u._events[d].fn?u._events[d]=[u._events[d],p]:u._events[d].push(p):(u._events[d]=p,u._eventsCount++),u}function a(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,l;if(this._eventsCount===0)return u;for(l in c=this._events)t.call(c,l)&&u.push(n?l.slice(1):l);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,l=this._events[c];if(!l)return[];if(l.fn)return[l.fn];for(var f=0,h=l.length,p=new Array(h);f<h;f++)p[f]=l[f].fn;return p},s.prototype.listenerCount=function(u){var c=n?n+u:u,l=this._events[c];return l?l.fn?1:l.length:0},s.prototype.emit=function(u,c,l,f,h,p){var d=n?n+u:u;if(!this._events[d])return!1;var m=this._events[d],g=arguments.length,v,b;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,l),!0;case 4:return m.fn.call(m.context,c,l,f),!0;case 5:return m.fn.call(m.context,c,l,f,h),!0;case 6:return m.fn.call(m.context,c,l,f,h,p),!0}for(b=1,v=new Array(g-1);b<g;b++)v[b-1]=arguments[b];m.fn.apply(m.context,v)}else{var y=m.length,_;for(b=0;b<y;b++)switch(m[b].once&&this.removeListener(u,m[b].fn,void 0,!0),g){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,c);break;case 3:m[b].fn.call(m[b].context,c,l);break;case 4:m[b].fn.call(m[b].context,c,l,f);break;default:if(!v)for(_=1,v=new Array(g-1);_<g;_++)v[_-1]=arguments[_];m[b].fn.apply(m[b].context,v)}}return!0},s.prototype.on=function(u,c,l){return o(this,u,c,l,!1)},s.prototype.once=function(u,c,l){return o(this,u,c,l,!0)},s.prototype.removeListener=function(u,c,l,f){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return a(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!f||p.once)&&(!l||p.context===l)&&a(this,h);else{for(var d=0,m=[],g=p.length;d<g;d++)(p[d].fn!==c||f&&!p[d].once||l&&p[d].context!==l)&&m.push(p[d]);m.length?this._events[h]=m.length===1?m[0]:m:a(this,h)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(RU);var TJ=RU.exports;const Wp=WP(TJ);var zc={},q0={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */q0.exports;(function(e,t){(function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,o=typeof bf=="object"&&bf;(o.global===o||o.window===o||o.self===o)&&(n=o);var a,s=2147483647,u=36,c=1,l=26,f=38,h=700,p=72,d=128,m="-",g=/^xn--/,v=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=u-c,T=Math.floor,S=String.fromCharCode,E;function I(oe){throw RangeError(y[oe])}function x(oe,me){for(var ae=oe.length,X=[];ae--;)X[ae]=me(oe[ae]);return X}function C(oe,me){var ae=oe.split("@"),X="";ae.length>1&&(X=ae[0]+"@",oe=ae[1]),oe=oe.replace(b,".");var ee=oe.split("."),se=x(ee,me).join(".");return X+se}function w(oe){for(var me=[],ae=0,X=oe.length,ee,se;ae<X;)ee=oe.charCodeAt(ae++),ee>=55296&&ee<=56319&&ae<X?(se=oe.charCodeAt(ae++),(se&64512)==56320?me.push(((ee&1023)<<10)+(se&1023)+65536):(me.push(ee),ae--)):me.push(ee);return me}function B(oe){return x(oe,function(me){var ae="";return me>65535&&(me-=65536,ae+=S(me>>>10&1023|55296),me=56320|me&1023),ae+=S(me),ae}).join("")}function L(oe){return oe-48<10?oe-22:oe-65<26?oe-65:oe-97<26?oe-97:u}function k(oe,me){return oe+22+75*(oe<26)-((me!=0)<<5)}function R(oe,me,ae){var X=0;for(oe=ae?T(oe/h):oe>>1,oe+=T(oe/me);oe>_*l>>1;X+=u)oe=T(oe/_);return T(X+(_+1)*oe/(oe+f))}function F(oe){var me=[],ae=oe.length,X,ee=0,se=d,_e=p,Oe,Re,ve,Ne,He,be,je,qe,ot;for(Oe=oe.lastIndexOf(m),Oe<0&&(Oe=0),Re=0;Re<Oe;++Re)oe.charCodeAt(Re)>=128&&I("not-basic"),me.push(oe.charCodeAt(Re));for(ve=Oe>0?Oe+1:0;ve<ae;){for(Ne=ee,He=1,be=u;ve>=ae&&I("invalid-input"),je=L(oe.charCodeAt(ve++)),(je>=u||je>T((s-ee)/He))&&I("overflow"),ee+=je*He,qe=be<=_e?c:be>=_e+l?l:be-_e,!(je<qe);be+=u)ot=u-qe,He>T(s/ot)&&I("overflow"),He*=ot;X=me.length+1,_e=R(ee-Ne,X,Ne==0),T(ee/X)>s-se&&I("overflow"),se+=T(ee/X),ee%=X,me.splice(ee++,0,se)}return B(me)}function U(oe){var me,ae,X,ee,se,_e,Oe,Re,ve,Ne,He,be=[],je,qe,ot,ut;for(oe=w(oe),je=oe.length,me=d,ae=0,se=p,_e=0;_e<je;++_e)He=oe[_e],He<128&&be.push(S(He));for(X=ee=be.length,ee&&be.push(m);X<je;){for(Oe=s,_e=0;_e<je;++_e)He=oe[_e],He>=me&&He<Oe&&(Oe=He);for(qe=X+1,Oe-me>T((s-ae)/qe)&&I("overflow"),ae+=(Oe-me)*qe,me=Oe,_e=0;_e<je;++_e)if(He=oe[_e],He<me&&++ae>s&&I("overflow"),He==me){for(Re=ae,ve=u;Ne=ve<=se?c:ve>=se+l?l:ve-se,!(Re<Ne);ve+=u)ut=Re-Ne,ot=u-Ne,be.push(S(k(Ne+ut%ot,0))),Re=T(ut/ot);be.push(S(k(Re,0))),se=R(ae,qe,X==ee),ae=0,++X}++ae,++me}return be.join("")}function $(oe){return C(oe,function(me){return g.test(me)?F(me.slice(4).toLowerCase()):me})}function ie(oe){return C(oe,function(me){return v.test(me)?"xn--"+U(me):me})}if(a={version:"1.3.2",ucs2:{decode:w,encode:B},decode:F,encode:U,toASCII:ie,toUnicode:$},r&&i)if(e.exports==r)i.exports=a;else for(E in a)a.hasOwnProperty(E)&&(r[E]=a[E]);else n.punycode=a})(bf)})(q0,q0.exports);var EJ=q0.exports,SJ={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Fg={};function wJ(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var AJ=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if(typeof e!="string"||e.length===0)return i;var o=/\+/g;e=e.split(t);var a=1e3;r&&typeof r.maxKeys=="number"&&(a=r.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var c=e[u].replace(o,"%20"),l=c.indexOf(n),f,h,p,d;l>=0?(f=c.substr(0,l),h=c.substr(l+1)):(f=c,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),wJ(i,p)?Array.isArray(i[p])?i[p].push(d):i[p]=[i[p],d]:i[p]=d}return i},Pd=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},OJ=function(e,t,n,r){return t=t||"&",n=n||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(i){var o=encodeURIComponent(Pd(i))+n;return Array.isArray(e[i])?e[i].map(function(a){return o+encodeURIComponent(Pd(a))}).join(t):o+encodeURIComponent(Pd(e[i]))}).join(t):r?encodeURIComponent(Pd(r))+n+encodeURIComponent(Pd(e)):""};Fg.decode=Fg.parse=AJ;Fg.encode=Fg.stringify=OJ;var kJ=EJ,ma=SJ,xJ=zc.parse=Ay;zc.resolve=BJ;zc.resolveObject=FJ;zc.format=jJ;zc.Url=Ao;function Ao(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var IJ=/^([a-z0-9.+-]+:)/i,CJ=/:[0-9]*$/,PJ=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,DJ=["<",">",'"',"`"," ","\r",`
`,"	"],RJ=["{","}","|","\\","^","`"].concat(DJ),VO=["'"].concat(RJ),$M=["%","/","?",";","#"].concat(VO),KM=["/","?","#"],NJ=255,QM=/^[+a-z0-9A-Z_-]{0,63}$/,MJ=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,LJ={javascript:!0,"javascript:":!0},YO={javascript:!0,"javascript:":!0},_f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},XO=Fg;function Ay(e,t,n){if(e&&ma.isObject(e)&&e instanceof Ao)return e;var r=new Ao;return r.parse(e,t,n),r}Ao.prototype.parse=function(e,t,n){if(!ma.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=r!==-1&&r<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!n&&e.split("#").length===1){var u=PJ.exec(s);if(u)return this.path=s,this.href=s,this.pathname=u[1],u[2]?(this.search=u[2],t?this.query=XO.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=IJ.exec(s);if(c){c=c[0];var l=c.toLowerCase();this.protocol=l,s=s.substr(c.length)}if(n||c||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=s.substr(0,2)==="//";f&&!(c&&YO[c])&&(s=s.substr(2),this.slashes=!0)}if(!YO[c]&&(f||c&&!_f[c])){for(var h=-1,p=0;p<KM.length;p++){var d=s.indexOf(KM[p]);d!==-1&&(h===-1||d<h)&&(h=d)}var m,g;h===-1?g=s.lastIndexOf("@"):g=s.lastIndexOf("@",h),g!==-1&&(m=s.slice(0,g),s=s.slice(g+1),this.auth=decodeURIComponent(m)),h=-1;for(var p=0;p<$M.length;p++){var d=s.indexOf($M[p]);d!==-1&&(h===-1||d<h)&&(h=d)}h===-1&&(h=s.length),this.host=s.slice(0,h),s=s.slice(h),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var b=this.hostname.split(/\./),p=0,y=b.length;p<y;p++){var _=b[p];if(_&&!_.match(QM)){for(var T="",S=0,E=_.length;S<E;S++)_.charCodeAt(S)>127?T+="x":T+=_[S];if(!T.match(QM)){var I=b.slice(0,p),x=b.slice(p+1),C=_.match(MJ);C&&(I.push(C[1]),x.unshift(C[2])),x.length&&(s="/"+x.join(".")+s),this.hostname=I.join(".");break}}}this.hostname.length>NJ?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=kJ.toASCII(this.hostname));var w=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+w,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!LJ[l])for(var p=0,y=VO.length;p<y;p++){var L=VO[p];if(s.indexOf(L)!==-1){var k=encodeURIComponent(L);k===L&&(k=escape(L)),s=s.split(L).join(k)}}var R=s.indexOf("#");R!==-1&&(this.hash=s.substr(R),s=s.slice(0,R));var F=s.indexOf("?");if(F!==-1?(this.search=s.substr(F),this.query=s.substr(F+1),t&&(this.query=XO.parse(this.query)),s=s.slice(0,F)):t&&(this.search="",this.query={}),s&&(this.pathname=s),_f[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var w=this.pathname||"",U=this.search||"";this.path=w+U}return this.href=this.format(),this};function jJ(e){return ma.isString(e)&&(e=Ay(e)),e instanceof Ao?e.format():Ao.prototype.format.call(e)}Ao.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&ma.isObject(this.query)&&Object.keys(this.query).length&&(o=XO.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||_f[t])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),a=a.replace("#","%23"),t+i+n+a+r};function BJ(e,t){return Ay(e,!1,!0).resolve(t)}Ao.prototype.resolve=function(e){return this.resolveObject(Ay(e,!1,!0)).format()};function FJ(e,t){return e?Ay(e,!1,!0).resolveObject(t):t}Ao.prototype.resolveObject=function(e){if(ma.isString(e)){var t=new Ao;t.parse(e,!1,!0),e=t}for(var n=new Ao,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=e.hash,e.href==="")return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var u=a[s];u!=="protocol"&&(n[u]=e[u])}return _f[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_f[e.protocol]){for(var c=Object.keys(e),l=0;l<c.length;l++){var f=c[l];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,!e.host&&!YO[e.protocol]){for(var y=(e.pathname||"").split("/");y.length&&!(e.host=y.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),n.pathname=y.join("/")}else n.pathname=e.pathname;if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var h=n.pathname||"",p=n.search||"";n.path=h+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var d=n.pathname&&n.pathname.charAt(0)==="/",m=e.host||e.pathname&&e.pathname.charAt(0)==="/",g=m||d||n.host&&e.pathname,v=g,b=n.pathname&&n.pathname.split("/")||[],y=e.pathname&&e.pathname.split("/")||[],_=n.protocol&&!_f[n.protocol];if(_&&(n.hostname="",n.port=null,n.host&&(b[0]===""?b[0]=n.host:b.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(y[0]===""?y[0]=e.host:y.unshift(e.host)),e.host=null),g=g&&(y[0]===""||b[0]==="")),m)n.host=e.host||e.host===""?e.host:n.host,n.hostname=e.hostname||e.hostname===""?e.hostname:n.hostname,n.search=e.search,n.query=e.query,b=y;else if(y.length)b||(b=[]),b.pop(),b=b.concat(y),n.search=e.search,n.query=e.query;else if(!ma.isNullOrUndefined(e.search)){if(_){n.hostname=n.host=b.shift();var T=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;T&&(n.auth=T.shift(),n.host=n.hostname=T.shift())}return n.search=e.search,n.query=e.query,(!ma.isNull(n.pathname)||!ma.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=b.slice(-1)[0],E=(n.host||e.host||b.length>1)&&(S==="."||S==="..")||S==="",I=0,x=b.length;x>=0;x--)S=b[x],S==="."?b.splice(x,1):S===".."?(b.splice(x,1),I++):I&&(b.splice(x,1),I--);if(!g&&!v)for(;I--;I)b.unshift("..");g&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),E&&b.join("/").substr(-1)!=="/"&&b.push("");var C=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(_){n.hostname=n.host=C?"":b.length?b.shift():"";var T=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;T&&(n.auth=T.shift(),n.host=n.hostname=T.shift())}return g=g||n.host&&b.length,g&&!C&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),(!ma.isNull(n.pathname)||!ma.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n};Ao.prototype.parseHost=function(){var e=this.host,t=CJ.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};/*!
 * @pixi/constants - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ba;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Ba||(Ba={}));var Wf;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Wf||(Wf={}));var Gg;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(Gg||(Gg={}));var gt;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(gt||(gt={}));var To;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(To||(To={}));var qf;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(qf||(qf={}));var Bl;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Bl||(Bl={}));var nn;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(nn||(nn={}));var Ia;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Ia||(Ia={}));var As;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(As||(As={}));var $f;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON"})($f||($f={}));var Cs;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Cs||(Cs={}));var Lo;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Lo||(Lo={}));var $0;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})($0||($0={}));var Vo;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(Vo||(Vo={}));var Di;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Di||(Di={}));var oc;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(oc||(oc={}));/*!
 * @pixi/utils - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ft.RETINA_PREFIX=/@([0-9\.]+)x/;ft.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var WO=!1,ZM="5.3.12";function GJ(){WO=!0}function NU(e){var t;if(!WO){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=[`
 %c %c %c PixiJS `+ZM+" - ✰ "+e+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=window.console).log.apply(t,n)}else window.console&&window.console.log("PixiJS "+ZM+" - "+e+" - http://www.pixijs.com/");WO=!0}}var XS;function MU(){return typeof XS>"u"&&(XS=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:ft.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),r=!!(n&&n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch{return!1}}()),XS}function ac(e,t){return t===void 0&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,t}function qP(e){var t=e.toString(16);return t="000000".substr(0,6-t.length)+t,"#"+t}function $P(e){return typeof e=="string"&&e[0]==="#"&&(e=e.substr(1)),parseInt(e,16)}function HJ(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function UJ(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[gt.NORMAL_NPM]=gt.NORMAL,e[gt.ADD_NPM]=gt.ADD,e[gt.SCREEN_NPM]=gt.SCREEN,t[gt.NORMAL]=gt.NORMAL_NPM,t[gt.ADD]=gt.ADD_NPM,t[gt.SCREEN]=gt.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r}var KP=UJ();function QP(e,t){return KP[t?1:0][e]}function LU(e,t,n,r){return n=n||new Float32Array(4),r||r===void 0?(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t):(n[0]=e[0],n[1]=e[1],n[2]=e[2]),n[3]=t,n}function PE(e,t){if(t===1)return(t*255<<24)+e;if(t===0)return 0;var n=e>>16&255,r=e>>8&255,i=e&255;return n=n*t+.5|0,r=r*t+.5|0,i=i*t+.5|0,(t*255<<24)+(n<<16)+(r<<8)+i}function ZP(e,t,n,r){return n=n||new Float32Array(4),n[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(e&255)/255,(r||r===void 0)&&(n[0]*=t,n[1]*=t,n[2]*=t),n[3]=t,n}function jU(e,t){t===void 0&&(t=null);var n=e*6;if(t=t||new Uint16Array(n),t.length!==n)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)t[r+0]=i+0,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+0,t[r+4]=i+2,t[r+5]=i+3;return t}function BU(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}var zJ={Float32Array,Uint32Array,Int32Array,Uint8Array};function VJ(e,t){for(var n=0,r=0,i={},o=0;o<e.length;o++)r+=t[o],n+=e[o].length;for(var a=new ArrayBuffer(n*4),s=null,u=0,o=0;o<e.length;o++){var c=t[o],l=e[o],f=BU(l);i[f]||(i[f]=new zJ[f](a)),s=i[f];for(var h=0;h<l.length;h++){var p=(h/c|0)*r+u,d=h%c;s[p+d]=l[h]}u+=c}return new Float32Array(a)}function Hg(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function qO(e){return!(e&e-1)&&!!e}function $O(e){var t=(e>65535?1:0)<<4;e>>>=t;var n=(e>255?1:0)<<3;return e>>>=n,t|=n,n=(e>15?1:0)<<2,e>>>=n,t|=n,n=(e>3?1:0)<<1,e>>>=n,t|=n,t|e>>1}function Ku(e,t,n){var r=e.length,i;if(!(t>=r||n===0)){n=t+n>r?r-t:n;var o=r-n;for(i=t;i<o;++i)e[i]=e[i+n];e.length=o}}function Fu(e){return e===0?0:e<0?-1:1}var YJ=0;function sc(){return++YJ}var JM={};function ze(e,t,n){if(n===void 0&&(n=3),!JM[t]){var r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e):(r=r.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+e),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e),console.warn(r))),JM[t]=!0}}var KO={},Ri=Object.create(null),mo=Object.create(null);function XJ(){var e;for(e in Ri)Ri[e].destroy();for(e in mo)mo[e].destroy()}function WJ(){var e;for(e in Ri)delete Ri[e];for(e in mo)delete mo[e]}var QO=function(){function e(t,n,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||ft.RESOLUTION,this.resize(t,n)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(t,n){this.canvas.width=t*this.resolution,this.canvas.height=n*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),e}();function FU(e){var t=e.width,n=e.height,r=e.getContext("2d"),i=r.getImageData(0,0,t,n),o=i.data,a=o.length,s={top:null,left:null,right:null,bottom:null},u=null,c,l,f;for(c=0;c<a;c+=4)o[c+3]!==0&&(l=c/4%t,f=~~(c/4/t),s.top===null&&(s.top=f),(s.left===null||l<s.left)&&(s.left=l),(s.right===null||s.right<l)&&(s.right=l+1),(s.bottom===null||s.bottom<f)&&(s.bottom=f));return s.top!==null&&(t=s.right-s.left,n=s.bottom-s.top+1,u=r.getImageData(s.left,s.top,t,n)),{height:n,width:t,data:u}}var GU=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function qJ(e){var t=GU.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var Nv;function HU(e,t){if(t===void 0&&(t=window.location),e.indexOf("data:")===0)return"";t=t||window.location,Nv||(Nv=document.createElement("a")),Nv.href=e;var n=xJ(Nv.href),r=!n.port&&t.port===""||n.port===t.port;return n.hostname!==t.hostname||!r||n.protocol!==t.protocol?"anonymous":""}function Ug(e,t){var n=ft.RETINA_PREFIX.exec(e);return n?parseFloat(n[1]):t!==void 0?t:1}const $J=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:mo,CanvasRenderTarget:QO,DATA_URI:GU,EventEmitter:Wp,ProgramCache:KO,TextureCache:Ri,clearTextureCache:WJ,correctBlendMode:QP,createIndicesForQuads:jU,decomposeDataUri:qJ,deprecation:ze,destroyTextureCache:XJ,determineCrossOrigin:HU,earcut:XP,getBufferType:BU,getResolutionOfUrl:Ug,hex2rgb:ac,hex2string:qP,interleaveTypedArrays:VJ,isMobile:_o,isPow2:qO,isWebGLSupported:MU,log2:$O,nextPow2:Hg,premultiplyBlendMode:KP,premultiplyRgba:LU,premultiplyTint:PE,premultiplyTintToRgba:ZP,removeItems:Ku,rgb2hex:HJ,sayHello:NU,sign:Fu,skipHello:GJ,string2hex:$P,trimCanvas:FU,uid:sc,url:zc},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Kf=Math.PI*2,UU=180/Math.PI,zU=Math.PI/180,Wr;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(Wr||(Wr={}));var hr=function(){function e(t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=Number(t),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=Wr.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,n){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height},e.prototype.pad=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=t),this.x-=t,this.y-=n,this.width+=t*2,this.height+=n*2,this},e.prototype.fit=function(t){var n=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(o-i,0),this},e.prototype.ceil=function(t,n){t===void 0&&(t=1),n===void 0&&(n=.001);var r=Math.ceil((this.x+this.width-n)*t)/t,i=Math.ceil((this.y+this.height-n)*t)/t;return this.x=Math.floor((this.x+n)*t)/t,this.y=Math.floor((this.y+n)*t)/t,this.width=r-this.x,this.height=i-this.y,this},e.prototype.enlarge=function(t){var n=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=n,this.width=r-n,this.y=i,this.height=o-i,this},e}(),VU=function(){function e(t,n,r){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=t,this.y=n,this.radius=r,this.type=Wr.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(t,n){if(this.radius<=0)return!1;var r=this.radius*this.radius,i=this.x-t,o=this.y-n;return i*=i,o*=o,i+o<=r},e.prototype.getBounds=function(){return new hr(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e}(),YU=function(){function e(t,n,r,i){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=t,this.y=n,this.width=r,this.height=i,this.type=Wr.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,n){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,i=(n-this.y)/this.height;return r*=r,i*=i,r+i<=1},e.prototype.getBounds=function(){return new hr(this.x-this.width,this.y-this.height,this.width,this.height)},e}(),Tf=function(){function e(){for(var t=arguments,n=[],r=0;r<arguments.length;r++)n[r]=t[r];var i=Array.isArray(n[0])?n[0]:n;if(typeof i[0]!="number"){for(var o=[],a=0,s=i.length;a<s;a++)o.push(i[a].x,i[a].y);i=o}this.points=i,this.type=Wr.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=this.points.slice(),n=new e(t);return n.closeStroke=this.closeStroke,n},e.prototype.contains=function(t,n){for(var r=!1,i=this.points.length/2,o=0,a=i-1;o<i;a=o++){var s=this.points[o*2],u=this.points[o*2+1],c=this.points[a*2],l=this.points[a*2+1],f=u>n!=l>n&&t<(c-s)*((n-u)/(l-u))+s;f&&(r=!r)}return r},e}(),XU=function(){function e(t,n,r,i,o){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=20),this.x=t,this.y=n,this.width=r,this.height=i,this.radius=o,this.type=Wr.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(t,n){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){if(n>=this.y+this.radius&&n<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=n-(this.y+this.radius),o=this.radius*this.radius;if(r*r+i*i<=o||(r=t-(this.x+this.width-this.radius),r*r+i*i<=o)||(i=n-(this.y+this.height-this.radius),r*r+i*i<=o)||(r=t-(this.x+this.radius),r*r+i*i<=o))return!0}return!1},e}(),An=function(){function e(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},e.prototype.copyTo=function(t){return t.set(this.x,this.y),t},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.set=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=t),this.x=t,this.y=n,this},e}(),Gu=function(){function e(t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),this._x=r,this._y=i,this.cb=t,this.scope=n}return e.prototype.clone=function(t,n){return t===void 0&&(t=this.cb),n===void 0&&(n=this.scope),new e(t,n,this._x,this._y)},e.prototype.set=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=t),(this._x!==t||this._y!==n)&&(this._x=t,this._y=n,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(t){return t.set(this._x,this._y),t},e.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),an=function(){function e(t,n,r,i,o,a){t===void 0&&(t=1),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=1),o===void 0&&(o=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=a}return e.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.prototype.set=function(t,n,r,i,o,a){return this.a=t,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=a,this},e.prototype.toArray=function(t,n){this.array||(this.array=new Float32Array(9));var r=n||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},e.prototype.apply=function(t,n){n=n||new An;var r=t.x,i=t.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n},e.prototype.applyInverse=function(t,n){n=n||new An;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,o=t.y;return n.x=this.d*r*i+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*o+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n},e.prototype.translate=function(t,n){return this.tx+=t,this.ty+=n,this},e.prototype.scale=function(t,n){return this.a*=t,this.d*=n,this.c*=t,this.b*=n,this.tx*=t,this.ty*=n,this},e.prototype.rotate=function(t){var n=Math.cos(t),r=Math.sin(t),i=this.a,o=this.c,a=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=o*n-this.d*r,this.d=o*r+this.d*n,this.tx=a*n-this.ty*r,this.ty=a*r+this.ty*n,this},e.prototype.append=function(t){var n=this.a,r=this.b,i=this.c,o=this.d;return this.a=t.a*n+t.b*i,this.b=t.a*r+t.b*o,this.c=t.c*n+t.d*i,this.d=t.c*r+t.d*o,this.tx=t.tx*n+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*o+this.ty,this},e.prototype.setTransform=function(t,n,r,i,o,a,s,u,c){return this.a=Math.cos(s+c)*o,this.b=Math.sin(s+c)*o,this.c=-Math.sin(s-u)*a,this.d=Math.cos(s-u)*a,this.tx=t-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this},e.prototype.prepend=function(t){var n=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var r=this.a,i=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},e.prototype.decompose=function(t){var n=this.a,r=this.b,i=this.c,o=this.d,a=-Math.atan2(-i,o),s=Math.atan2(r,n),u=Math.abs(a+s);return u<1e-5||Math.abs(Kf-u)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=s),t.scale.x=Math.sqrt(n*n+r*r),t.scale.y=Math.sqrt(i*i+o*o),t.position.x=this.tx,t.position.y=this.ty,t},e.prototype.invert=function(){var t=this.a,n=this.b,r=this.c,i=this.d,o=this.tx,a=t*i-n*r;return this.a=i/a,this.b=-n/a,this.c=-r/a,this.d=t/a,this.tx=(r*this.ty-i*o)/a,this.ty=-(t*this.ty-n*o)/a,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),Iu=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Cu=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Pu=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Du=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ZO=[],WU=[],Mv=Math.sign;function KJ(){for(var e=0;e<16;e++){var t=[];ZO.push(t);for(var n=0;n<16;n++)for(var r=Mv(Iu[e]*Iu[n]+Pu[e]*Cu[n]),i=Mv(Cu[e]*Iu[n]+Du[e]*Cu[n]),o=Mv(Iu[e]*Pu[n]+Pu[e]*Du[n]),a=Mv(Cu[e]*Pu[n]+Du[e]*Du[n]),s=0;s<16;s++)if(Iu[s]===r&&Cu[s]===i&&Pu[s]===o&&Du[s]===a){t.push(s);break}}for(var e=0;e<16;e++){var u=new an;u.set(Iu[e],Cu[e],Pu[e],Du[e],0,0),WU.push(u)}}KJ();var Mr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return Iu[e]},uY:function(e){return Cu[e]},vX:function(e){return Pu[e]},vY:function(e){return Du[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,t){return ZO[e][t]},sub:function(e,t){return ZO[e][Mr.inv(t)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,t){return Math.abs(e)*2<=Math.abs(t)?t>=0?Mr.S:Mr.N:Math.abs(t)*2<=Math.abs(e)?e>0?Mr.E:Mr.W:t>0?e>0?Mr.SE:Mr.SW:e>0?Mr.NE:Mr.NW},matrixAppendRotationInv:function(e,t,n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=WU[Mr.inv(t)];i.tx=n,i.ty=r,e.append(i)}},JP=function(){function e(){this.worldTransform=new an,this.localTransform=new an,this.position=new Gu(this.onChange,this,0,0),this.scale=new Gu(this.onChange,this,1,1),this.pivot=new Gu(this.onChange,this,0,0),this.skew=new Gu(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var n=this.localTransform;if(this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,i=this.worldTransform;i.a=n.a*r.a+n.b*r.c,i.b=n.a*r.b+n.b*r.d,i.c=n.c*r.a+n.d*r.c,i.d=n.c*r.b+n.d*r.d,i.tx=n.tx*r.a+n.ty*r.c+r.tx,i.ty=n.tx*r.b+n.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/display - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ft.SORTABLE_CHILDREN=!1;var zg=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?hr.EMPTY:(t=t||new hr(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addQuad=function(t){var n=this.minX,r=this.minY,i=this.maxX,o=this.maxY,a=t[0],s=t[1];n=a<n?a:n,r=s<r?s:r,i=a>i?a:i,o=s>o?s:o,a=t[2],s=t[3],n=a<n?a:n,r=s<r?s:r,i=a>i?a:i,o=s>o?s:o,a=t[4],s=t[5],n=a<n?a:n,r=s<r?s:r,i=a>i?a:i,o=s>o?s:o,a=t[6],s=t[7],n=a<n?a:n,r=s<r?s:r,i=a>i?a:i,o=s>o?s:o,this.minX=n,this.minY=r,this.maxX=i,this.maxY=o},e.prototype.addFrame=function(t,n,r,i,o){this.addFrameMatrix(t.worldTransform,n,r,i,o)},e.prototype.addFrameMatrix=function(t,n,r,i,o){var a=t.a,s=t.b,u=t.c,c=t.d,l=t.tx,f=t.ty,h=this.minX,p=this.minY,d=this.maxX,m=this.maxY,g=a*n+u*r+l,v=s*n+c*r+f;h=g<h?g:h,p=v<p?v:p,d=g>d?g:d,m=v>m?v:m,g=a*i+u*r+l,v=s*i+c*r+f,h=g<h?g:h,p=v<p?v:p,d=g>d?g:d,m=v>m?v:m,g=a*n+u*o+l,v=s*n+c*o+f,h=g<h?g:h,p=v<p?v:p,d=g>d?g:d,m=v>m?v:m,g=a*i+u*o+l,v=s*i+c*o+f,h=g<h?g:h,p=v<p?v:p,d=g>d?g:d,m=v>m?v:m,this.minX=h,this.minY=p,this.maxX=d,this.maxY=m},e.prototype.addVertexData=function(t,n,r){for(var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY,u=n;u<r;u+=2){var c=t[u],l=t[u+1];i=c<i?c:i,o=l<o?l:o,a=c>a?c:a,s=l>s?l:s}this.minX=i,this.minY=o,this.maxX=a,this.maxY=s},e.prototype.addVertices=function(t,n,r,i){this.addVerticesMatrix(t.worldTransform,n,r,i)},e.prototype.addVerticesMatrix=function(t,n,r,i,o,a){o===void 0&&(o=0),a===void 0&&(a=o);for(var s=t.a,u=t.b,c=t.c,l=t.d,f=t.tx,h=t.ty,p=this.minX,d=this.minY,m=this.maxX,g=this.maxY,v=r;v<i;v+=2){var b=n[v],y=n[v+1],_=s*b+c*y+f,T=l*y+u*b+h;p=Math.min(p,_-o),m=Math.max(m,_+o),d=Math.min(d,T-a),g=Math.max(g,T+a)}this.minX=p,this.minY=d,this.maxX=m,this.maxY=g},e.prototype.addBounds=function(t){var n=this.minX,r=this.minY,i=this.maxX,o=this.maxY;this.minX=t.minX<n?t.minX:n,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>o?t.maxY:o},e.prototype.addBoundsMask=function(t,n){var r=t.minX>n.minX?t.minX:n.minX,i=t.minY>n.minY?t.minY:n.minY,o=t.maxX<n.maxX?t.maxX:n.maxX,a=t.maxY<n.maxY?t.maxY:n.maxY;if(r<=o&&i<=a){var s=this.minX,u=this.minY,c=this.maxX,l=this.maxY;this.minX=r<s?r:s,this.minY=i<u?i:u,this.maxX=o>c?o:c,this.maxY=a>l?a:l}},e.prototype.addBoundsMatrix=function(t,n){this.addFrameMatrix(n,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,n){var r=t.minX>n.x?t.minX:n.x,i=t.minY>n.y?t.minY:n.y,o=t.maxX<n.x+n.width?t.maxX:n.x+n.width,a=t.maxY<n.y+n.height?t.maxY:n.y+n.height;if(r<=o&&i<=a){var s=this.minX,u=this.minY,c=this.maxX,l=this.maxY;this.minX=r<s?r:s,this.minY=i<u?i:u,this.maxX=o>c?o:c,this.maxY=a>l?a:l}},e.prototype.pad=function(t,n){t===void 0&&(t=0),n===void 0&&(n=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=n,this.maxY+=n)},e.prototype.addFramePad=function(t,n,r,i,o,a){t-=o,n-=a,r+=o,i+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>i?this.maxY:i},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var JO=function(e,t){return JO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},JO(e,t)};function eD(e,t){JO(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var sn=function(e){eD(t,e);function t(){var n=e.call(this)||this;return n.tempDisplayObjectParent=null,n.transform=new JP,n.alpha=1,n.visible=!0,n.renderable=!0,n.parent=null,n.worldAlpha=1,n._lastSortedIndex=0,n._zIndex=0,n.filterArea=null,n.filters=null,n._enabledFilters=null,n._bounds=new zg,n._localBounds=null,n._boundsID=0,n._boundsRect=null,n._localBoundsRect=null,n._mask=null,n._destroyed=!1,n.isSprite=!1,n.isMask=!1,n}return t.mixin=function(n){for(var r=Object.keys(n),i=0;i<r.length;++i){var o=r[i];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(n,o))}},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(n,r){return n||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new hr),r=this._boundsRect),this._bounds.getRectangle(r)},t.prototype.getLocalBounds=function(n){n||(this._localBoundsRect||(this._localBoundsRect=new hr),n=this._localBoundsRect),this._localBounds||(this._localBounds=new zg);var r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,n);return this.parent=i,this.transform=r,this._bounds=o,this._bounds.updateID+=this._boundsID-a,s},t.prototype.toGlobal=function(n,r,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(n,r)},t.prototype.toLocal=function(n,r,i,o){return r&&(n=r.toGlobal(n,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(n,i)},t.prototype.setParent=function(n){if(!n||!n.addChild)throw new Error("setParent: Argument must be a Container");return n.addChild(this),n},t.prototype.setTransform=function(n,r,i,o,a,s,u,c,l){return n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=1),o===void 0&&(o=1),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),c===void 0&&(c=0),l===void 0&&(l=0),this.position.x=n,this.position.y=r,this.scale.x=i||1,this.scale.y=o||1,this.rotation=a,this.skew.x=s,this.skew.y=u,this.pivot.x=c,this.pivot.y=l,this},t.prototype.destroy=function(n){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new tD),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var n=this.parent;return this.parent=this._tempDisplayObjectParent,n},t.prototype.disableTempParent=function(n){this.parent=n},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(n){this.transform.position.x=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(n){this.transform.position.y=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(n){this.transform.position.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(n){this.transform.scale.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(n){this.transform.pivot.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(n){this.transform.skew.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(n){this.transform.rotation=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*UU},set:function(n){this.transform.rotation=n*zU},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(n){this._zIndex=n,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var n=this;do{if(!n.visible)return!1;n=n.parent}while(n);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(n){if(this._mask){var r=this._mask.maskObject||this._mask;r.renderable=!0,r.isMask=!1}if(this._mask=n,this._mask){var r=this._mask.maskObject||this._mask;r.renderable=!1,r.isMask=!0}},enumerable:!1,configurable:!0}),t}(Wp),tD=function(e){eD(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.sortDirty=null,n}return t}(sn);sn.prototype.displayObjectUpdateTransform=sn.prototype.updateTransform;function QJ(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var Zo=function(e){eD(t,e);function t(){var n=e.call(this)||this;return n.children=[],n.sortableChildren=ft.SORTABLE_CHILDREN,n.sortDirty=!1,n}return t.prototype.onChildrenChange=function(n){},t.prototype.addChild=function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];if(r.length>1)for(var o=0;o<r.length;o++)this.addChild(r[o]);else{var a=r[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return r[0]},t.prototype.addChildAt=function(n,r){if(r<0||r>this.children.length)throw new Error(n+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.splice(r,0,n),this._boundsID++,this.onChildrenChange(r),n.emit("added",this),this.emit("childAdded",n,this,r),n},t.prototype.swapChildren=function(n,r){if(n!==r){var i=this.getChildIndex(n),o=this.getChildIndex(r);this.children[i]=r,this.children[o]=n,this.onChildrenChange(i<o?i:o)}},t.prototype.getChildIndex=function(n){var r=this.children.indexOf(n);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r},t.prototype.setChildIndex=function(n,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(n);Ku(this.children,i,1),this.children.splice(r,0,n),this.onChildrenChange(r)},t.prototype.getChildAt=function(n){if(n<0||n>=this.children.length)throw new Error("getChildAt: Index ("+n+") does not exist.");return this.children[n]},t.prototype.removeChild=function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];if(r.length>1)for(var o=0;o<r.length;o++)this.removeChild(r[o]);else{var a=r[0],s=this.children.indexOf(a);if(s===-1)return null;a.parent=null,a.transform._parentID=-1,Ku(this.children,s,1),this._boundsID++,this.onChildrenChange(s),a.emit("removed",this),this.emit("childRemoved",a,this,s)}return r[0]},t.prototype.removeChildAt=function(n){var r=this.getChildAt(n);return r.parent=null,r.transform._parentID=-1,Ku(this.children,n,1),this._boundsID++,this.onChildrenChange(n),r.emit("removed",this),this.emit("childRemoved",r,this,n),r},t.prototype.removeChildren=function(n,r){n===void 0&&(n=0),r===void 0&&(r=this.children.length);var i=n,o=r,a=o-i,s;if(a>0&&a<=o){s=this.children.splice(i,a);for(var u=0;u<s.length;++u)s[u].parent=null,s[u].transform&&(s[u].transform._parentID=-1);this._boundsID++,this.onChildrenChange(n);for(var u=0;u<s.length;++u)s[u].emit("removed",this),this.emit("childRemoved",s[u],this,u);return s}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var n=!1,r=0,i=this.children.length;r<i;++r){var o=this.children[r];o._lastSortedIndex=r,!n&&o.zIndex!==0&&(n=!0)}n&&this.children.length>1&&this.children.sort(QJ),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var n=0,r=this.children.length;n<r;++n){var i=this.children[n];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var n=0;n<this.children.length;n++){var r=this.children[n];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){var i=r._mask.maskObject||r._mask;i.calculateBounds(),this._bounds.addBoundsMask(r._bounds,i._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(n,r){r===void 0&&(r=!1);var i=e.prototype.getLocalBounds.call(this,n);if(!r)for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o];s.visible&&s.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype.render=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(n);else{this._render(n);for(var r=0,i=this.children.length;r<i;++r)this.children[r].render(n)}},t.prototype.renderAdvanced=function(n){n.batch.flush();var r=this.filters,i=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<r.length;o++)r[o].enabled&&this._enabledFilters.push(r[o]);this._enabledFilters.length&&n.filter.push(this,this._enabledFilters)}i&&n.mask.push(this,this._mask),this._render(n);for(var o=0,a=this.children.length;o<a;o++)this.children[o].render(n);n.batch.flush(),i&&n.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&n.filter.pop()},t.prototype._render=function(n){},t.prototype.destroy=function(n){e.prototype.destroy.call(this),this.sortDirty=!1;var r=typeof n=="boolean"?n:n&&n.children,i=this.removeChildren(0,this.children.length);if(r)for(var o=0;o<i.length;++o)i[o].destroy(n)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(n){var r=this.getLocalBounds().width;r!==0?this.scale.x=n/r:this.scale.x=1,this._width=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(n){var r=this.getLocalBounds().height;r!==0?this.scale.y=n/r:this.scale.y=1,this._height=n},enumerable:!1,configurable:!0}),t}(sn);Zo.prototype.containerUpdateTransform=Zo.prototype.updateTransform;/*!
 * @pixi/accessibility - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qU={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};sn.mixin(qU);var ZJ=9,Lv=100,JJ=0,eee=0,eL=2,tL=1,tee=-1e3,ree=-1e3,nee=2,$U=function(){function e(t){this._hookDiv=null,(_o.tablet||_o.phone)&&this.createTouchHook();var n=document.createElement("div");n.style.width=Lv+"px",n.style.height=Lv+"px",n.style.position="absolute",n.style.top=JJ+"px",n.style.left=eee+"px",n.style.zIndex=eL.toString(),this.div=n,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var t=this,n=document.createElement("button");n.style.width=tL+"px",n.style.height=tL+"px",n.style.position="absolute",n.style.top=tee+"px",n.style.left=ree+"px",n.style.zIndex=nee.toString(),n.style.backgroundColor="#FF0000",n.title="select to enable accessability for this content",n.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(n),this._hookDiv=n},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var n=t.children,r=0;r<n.length;r++)this.updateAccessibleObjects(n[r])}},e.prototype.update=function(){var t=performance.now();if(!(_o.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var n=this.renderer.view.getBoundingClientRect(),r=this.renderer.resolution,i=n.width/this.renderer.width*r,o=n.height/this.renderer.height*r,a=this.div;a.style.left=n.left+"px",a.style.top=n.top+"px",a.style.width=this.renderer.width+"px",a.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var u=this.children[s];if(u.renderId!==this.renderId)u._accessibleActive=!1,Ku(this.children,s,1),this.div.removeChild(u._accessibleDiv),this.pool.push(u._accessibleDiv),u._accessibleDiv=null,s--;else{a=u._accessibleDiv;var c=u.hitArea,l=u.worldTransform;u.hitArea?(a.style.left=(l.tx+c.x*l.a)*i+"px",a.style.top=(l.ty+c.y*l.d)*o+"px",a.style.width=c.width*l.a*i+"px",a.style.height=c.height*l.d*o+"px"):(c=u.getBounds(),this.capHitArea(c),a.style.left=c.x*i+"px",a.style.top=c.y*o+"px",a.style.width=c.width*i+"px",a.style.height=c.height*o+"px",a.title!==u.accessibleTitle&&u.accessibleTitle!==null&&(a.title=u.accessibleTitle),a.getAttribute("aria-label")!==u.accessibleHint&&u.accessibleHint!==null&&a.setAttribute("aria-label",u.accessibleHint)),(u.accessibleTitle!==a.title||u.tabIndex!==a.tabIndex)&&(a.title=u.accessibleTitle,a.tabIndex=u.tabIndex,this.debug&&this.updateDebugHTML(a))}}this.renderId++}},e.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},e.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},e.prototype.addChild=function(t){var n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=Lv+"px",n.style.height=Lv+"px",n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=eL.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=t.accessiblePointerEvents,n.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?n.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(n.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&n.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(n),t._accessibleActive=!0,t._accessibleDiv=n,n.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},e.prototype._onClick=function(t){var n=this.renderer.plugins.interaction;n.dispatchEvent(t.target.displayObject,"click",n.eventData),n.dispatchEvent(t.target.displayObject,"pointertap",n.eventData),n.dispatchEvent(t.target.displayObject,"tap",n.eventData)},e.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var n=this.renderer.plugins.interaction;n.dispatchEvent(t.target.displayObject,"mouseover",n.eventData)},e.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var n=this.renderer.plugins.interaction;n.dispatchEvent(t.target.displayObject,"mouseout",n.eventData)},e.prototype._onKeyDown=function(t){t.keyCode===ZJ&&this.activate()},e.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();/*!
 * @pixi/ticker - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ft.TARGET_FPMS=.06;var Fa;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(Fa||(Fa={}));var WS=function(){function e(t,n,r,i){n===void 0&&(n=null),r===void 0&&(r=0),i===void 0&&(i=!1),this.fn=t,this.context=n,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(t,n){return n===void 0&&(n=null),this.fn===t&&this.context===n},e.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n},e.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},e.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var n=this.next;return this.next=t?null:n,this.previous=null,n},e}(),wn=function(){function e(){var t=this;this._head=new WS(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/ft.TARGET_FPMS,this.elapsedMS=1/ft.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(n){t._requestId=null,t.started&&(t.update(n),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(t,n,r){return r===void 0&&(r=Fa.NORMAL),this._addListener(new WS(t,n,r))},e.prototype.addOnce=function(t,n,r){return r===void 0&&(r=Fa.NORMAL),this._addListener(new WS(t,n,r,!0))},e.prototype._addListener=function(t){var n=this._head.next,r=this._head;if(!n)t.connect(r);else{for(;n;){if(t.priority>n.priority){t.connect(r);break}r=n,n=n.next}t.previous||t.connect(r)}return this._startIfPossible(),this},e.prototype.remove=function(t,n){for(var r=this._head.next;r;)r.match(t,n)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,n=this._head;n=n.next;)t++;return t},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(t){t===void 0&&(t=performance.now());var n;if(t>this.lastTime){if(n=this.elapsedMS=t-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*ft.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var n=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,n)/1e3,ft.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var n=Math.max(this.minFPS,t);this._minElapsedMS=1/(n/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),KU=function(){function e(){}return e.init=function(t){var n=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Fa.LOW)},get:function(){return this._ticker}}),this.stop=function(){n._ticker.stop()},this.start=function(){n._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?wn.shared:new wn,t.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},e}();/*!
 * @pixi/interaction - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ek=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new An,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(t,n,r){return t.worldTransform.applyInverse(r||this.global,n)},e.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var n="buttons"in t&&t.buttons;this.buttons=Number.isInteger(n)?n:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var tk=function(e,t){return tk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},tk(e,t)};function iee(e,t){tk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var QU=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),Xb=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(t,n){n?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!==0},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),oee=function(){function e(){this._tempPoint=new An}return e.prototype.recursiveFindHit=function(t,n,r,i,o){if(!n||!n.visible)return!1;var a=t.data.global;o=n.interactive||o;var s=!1,u=o,c=!0;if(n.hitArea?(i&&(n.worldTransform.applyInverse(a,this._tempPoint),n.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(i=!1,c=!1)),u=!1):n._mask&&i&&(n._mask.containsPoint&&n._mask.containsPoint(a)||(i=!1)),c&&n.interactiveChildren&&n.children)for(var l=n.children,f=l.length-1;f>=0;f--){var h=l[f],p=this.recursiveFindHit(t,h,r,i,u);if(p){if(!h.parent)continue;u=!1,p&&(t.target&&(i=!1),s=!0)}}return o&&(i&&!t.target&&!n.hitArea&&n.containsPoint&&n.containsPoint(a)&&(s=!0),n.interactive&&(s&&!t.target&&(t.target=n),r&&r(t,n,!!s))),s},e.prototype.findHit=function(t,n,r,i){this.recursiveFindHit(t,n,r,i,!1)},e}(),ZU={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};sn.mixin(ZU);var jv=1,Bv={target:null,data:{global:null}},JU=function(e){iee(t,e);function t(n,r){var i=e.call(this)||this;return r=r||{},i.renderer=n,i.autoPreventDefault=r.autoPreventDefault!==void 0?r.autoPreventDefault:!0,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new ek,i.mouse.identifier=jv,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[jv]=i.mouse,i.interactionDataPool=[],i.eventData=new QU,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new oee,i._tempDisplayObject=new tD,i._useSystemTicker=r.useSystemTicker!==void 0?r.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(n){this._useSystemTicker=n,n?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(n,r){return Bv.target=null,Bv.data.global=n,r||(r=this.lastObjectRendered),this.processInteractive(Bv,r,null,!0),Bv.target},t.prototype.setTargetElement=function(n,r){r===void 0&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=n,this.resolution=r,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(wn.system.add(this.tickerUpdate,this,Fa.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(wn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var n=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(n.msContentZooming="none",n.msTouchAction="none"):this.supportsPointerEvents&&(n.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var n=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(n.msContentZooming="",n.msTouchAction=""):this.supportsPointerEvents&&(n.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(n){this._deltaTime+=n,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var n in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(n)){var r=this.activeInteractionData[n];if(r.originalEvent&&r.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(n){if(n=n||"default",this.currentCursorMode!==n){this.currentCursorMode=n;var r=this.cursorStyles[n];if(r)switch(typeof r){case"string":this.interactionDOMElement.style.cursor=r;break;case"function":r(n);break;case"object":Object.assign(this.interactionDOMElement.style,r);break}else typeof n=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,n)&&(this.interactionDOMElement.style.cursor=n)}},t.prototype.dispatchEvent=function(n,r,i){(!i.stopPropagationHint||n===i.stopsPropagatingAt)&&(i.currentTarget=n,i.type=r,n.emit(r,i),n[r]&&n[r](i))},t.prototype.delayDispatchEvent=function(n,r,i){this.delayedEvents.push({displayObject:n,eventString:r,eventData:i})},t.prototype.mapPositionToPoint=function(n,r,i){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:0,height:0};var a=1/this.resolution;n.x=(r-o.left)*(this.interactionDOMElement.width/o.width)*a,n.y=(i-o.top)*(this.interactionDOMElement.height/o.height)*a},t.prototype.processInteractive=function(n,r,i,o){var a=this.search.findHit(n,r,i,o),s=this.delayedEvents;if(!s.length)return a;n.stopPropagationHint=!1;var u=s.length;this.delayedEvents=[];for(var c=0;c<u;c++){var l=s[c],f=l.displayObject,h=l.eventString,p=l.eventData;p.stopsPropagatingAt===f&&(p.stopPropagationHint=!0),this.dispatchEvent(f,h,p)}return a},t.prototype.onPointerDown=function(n){if(!(this.supportsTouchEvents&&n.pointerType==="touch")){var r=this.normalizeToPointerData(n);if(this.autoPreventDefault&&r[0].isNormalized){var i=n.cancelable||!("cancelable"in n);i&&n.preventDefault()}for(var o=r.length,a=0;a<o;a++){var s=r[a],u=this.getInteractionDataForPointerId(s),c=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(c.data.originalEvent=n,this.processInteractive(c,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",c),s.pointerType==="touch")this.emit("touchstart",c);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;this.emit(l?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(n,r,i){var o=n.data,a=n.data.identifier;if(i){if(r.trackedPointers[a]||(r.trackedPointers[a]=new Xb(a)),this.dispatchEvent(r,"pointerdown",n),o.pointerType==="touch")this.dispatchEvent(r,"touchstart",n);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;s?r.trackedPointers[a].rightDown=!0:r.trackedPointers[a].leftDown=!0,this.dispatchEvent(r,s?"rightdown":"mousedown",n)}}},t.prototype.onPointerComplete=function(n,r,i){for(var o=this.normalizeToPointerData(n),a=o.length,s=n.target!==this.interactionDOMElement?"outside":"",u=0;u<a;u++){var c=o[u],l=this.getInteractionDataForPointerId(c),f=this.configureInteractionEventForDOMEvent(this.eventData,c,l);if(f.data.originalEvent=n,this.processInteractive(f,this.lastObjectRendered,i,r||!s),this.emit(r?"pointercancel":"pointerup"+s,f),c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;this.emit(h?"rightup"+s:"mouseup"+s,f)}else c.pointerType==="touch"&&(this.emit(r?"touchcancel":"touchend"+s,f),this.releaseInteractionDataForPointerId(c.pointerId))}},t.prototype.onPointerCancel=function(n){this.supportsTouchEvents&&n.pointerType==="touch"||this.onPointerComplete(n,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(n,r){var i=n.data,o=n.data.identifier;r.trackedPointers[o]!==void 0&&(delete r.trackedPointers[o],this.dispatchEvent(r,"pointercancel",n),i.pointerType==="touch"&&this.dispatchEvent(r,"touchcancel",n))},t.prototype.onPointerUp=function(n){this.supportsTouchEvents&&n.pointerType==="touch"||this.onPointerComplete(n,!1,this.processPointerUp)},t.prototype.processPointerUp=function(n,r,i){var o=n.data,a=n.data.identifier,s=r.trackedPointers[a],u=o.pointerType==="touch",c=o.pointerType==="mouse"||o.pointerType==="pen",l=!1;if(c){var f=o.button===2,h=Xb.FLAGS,p=f?h.RIGHT_DOWN:h.LEFT_DOWN,d=s!==void 0&&s.flags&p;i?(this.dispatchEvent(r,f?"rightup":"mouseup",n),d&&(this.dispatchEvent(r,f?"rightclick":"click",n),l=!0)):d&&this.dispatchEvent(r,f?"rightupoutside":"mouseupoutside",n),s&&(f?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(r,"pointerup",n),u&&this.dispatchEvent(r,"touchend",n),s&&((!c||l)&&this.dispatchEvent(r,"pointertap",n),u&&(this.dispatchEvent(r,"tap",n),s.over=!1))):s&&(this.dispatchEvent(r,"pointerupoutside",n),u&&this.dispatchEvent(r,"touchendoutside",n)),s&&s.none&&delete r.trackedPointers[a]},t.prototype.onPointerMove=function(n){if(!(this.supportsTouchEvents&&n.pointerType==="touch")){var r=this.normalizeToPointerData(n);(r[0].pointerType==="mouse"||r[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=r.length,o=0;o<i;o++){var a=r[o],s=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,s);u.data.originalEvent=n,this.processInteractive(u,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",u),a.pointerType==="touch"&&this.emit("touchmove",u),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mousemove",u)}r[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(n,r,i){var o=n.data,a=o.pointerType==="touch",s=o.pointerType==="mouse"||o.pointerType==="pen";s&&this.processPointerOverOut(n,r,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(r,"pointermove",n),a&&this.dispatchEvent(r,"touchmove",n),s&&this.dispatchEvent(r,"mousemove",n))},t.prototype.onPointerOut=function(n){if(!(this.supportsTouchEvents&&n.pointerType==="touch")){var r=this.normalizeToPointerData(n),i=r[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(n,r,i){var o=n.data,a=n.data.identifier,s=o.pointerType==="mouse"||o.pointerType==="pen",u=r.trackedPointers[a];i&&!u&&(u=r.trackedPointers[a]=new Xb(a)),u!==void 0&&(i&&this.mouseOverRenderer?(u.over||(u.over=!0,this.delayDispatchEvent(r,"pointerover",n),s&&this.delayDispatchEvent(r,"mouseover",n)),s&&this.cursor===null&&(this.cursor=r.cursor)):u.over&&(u.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),s&&this.dispatchEvent(r,"mouseout",n),u.none&&delete r.trackedPointers[a]))},t.prototype.onPointerOver=function(n){var r=this.normalizeToPointerData(n),i=r[0],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",a)},t.prototype.getInteractionDataForPointerId=function(n){var r=n.pointerId,i;return r===jv||n.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[r]?i=this.activeInteractionData[r]:(i=this.interactionDataPool.pop()||new ek,i.identifier=r,this.activeInteractionData[r]=i),i.copyEvent(n),i},t.prototype.releaseInteractionDataForPointerId=function(n){var r=this.activeInteractionData[n];r&&(delete this.activeInteractionData[n],r.reset(),this.interactionDataPool.push(r))},t.prototype.configureInteractionEventForDOMEvent=function(n,r,i){return n.data=i,this.mapPositionToPoint(i.global,r.clientX,r.clientY),r.pointerType==="touch"&&(r.globalX=i.global.x,r.globalY=i.global.y),i.originalEvent=r,n.reset(),n},t.prototype.normalizeToPointerData=function(n){var r=[];if(this.supportsTouchEvents&&n instanceof TouchEvent)for(var i=0,o=n.changedTouches.length;i<o;i++){var a=n.changedTouches[i];typeof a.button>"u"&&(a.button=n.touches.length?1:0),typeof a.buttons>"u"&&(a.buttons=n.touches.length?1:0),typeof a.isPrimary>"u"&&(a.isPrimary=n.touches.length===1&&n.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,r.push(a)}else if(n instanceof MouseEvent&&(!this.supportsPointerEvents||!(n instanceof window.PointerEvent))){var s=n;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=jv),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,r.push(s)}else r.push(n);return r},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(Wp);/*!
 * @pixi/runner - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Nn=function(){function e(t){this.items=[],this._name=t,this._aliasCount=0}return e.prototype.emit=function(t,n,r,i,o,a,s,u){if(arguments.length>8)throw new Error("max arguments reached");var c=this,l=c.name,f=c.items;this._aliasCount++;for(var h=0,p=f.length;h<p;h++)f[h][l](t,n,r,i,o,a,s,u);return f===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},e.prototype.remove=function(t){var n=this.items.indexOf(t);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this},e.prototype.contains=function(t){return this.items.indexOf(t)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Nn.prototype,{dispatch:{value:Nn.prototype.emit},run:{value:Nn.prototype.emit}});/*!
 * @pixi/core - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ft.PREFER_ENV=_o.any?Ba.WEBGL:Ba.WEBGL2;ft.STRICT_TEXTURE_CACHE=!1;var K0=[];function rD(e,t){if(!e)return null;var n="";if(typeof e=="string"){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(n=r[1].toLowerCase())}for(var i=K0.length-1;i>=0;--i){var o=K0[i];if(o.test&&o.test(e,n))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var rk=function(e,t){return rk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},rk(e,t)};function Gt(e,t){rk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Qf=function(){function e(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this._width=t,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new Nn("setRealSize"),this.onUpdate=new Nn("update"),this.onError=new Nn("onError")}return e.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},e.prototype.resize=function(t,n){(t!==this._width||n!==this._height)&&(this._width=t,this._height=n,this.onResize.emit(t,n))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(t,n,r){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(t,n){return!1},e}(),DE=function(e){Gt(t,e);function t(n,r){var i=this,o=r||{},a=o.width,s=o.height;if(!a||!s)throw new Error("BufferResource width or height invalid");return i=e.call(this,a,s)||this,i.data=n,i}return t.prototype.upload=function(n,r,i){var o=n.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Cs.UNPACK),i.width===r.width&&i.height===r.height?o.texSubImage2D(r.target,0,0,0,r.width,r.height,r.format,r.type,this.data):(i.width=r.width,i.height=r.height,o.texImage2D(r.target,0,i.internalFormat,r.width,r.height,0,r.format,i.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(n){return n instanceof Float32Array||n instanceof Uint8Array||n instanceof Uint32Array},t}(Qf),aee={scaleMode:Ia.NEAREST,format:qf.RGBA,alphaMode:Cs.NPM},Rr=function(e){Gt(t,e);function t(n,r){n===void 0&&(n=null),r===void 0&&(r=null);var i=e.call(this)||this;r=r||{};var o=r.alphaMode,a=r.mipmap,s=r.anisotropicLevel,u=r.scaleMode,c=r.width,l=r.height,f=r.wrapMode,h=r.format,p=r.type,d=r.target,m=r.resolution,g=r.resourceOptions;return n&&!(n instanceof Qf)&&(n=rD(n,g),n.internal=!0),i.width=c||0,i.height=l||0,i.resolution=m||ft.RESOLUTION,i.mipmap=a!==void 0?a:ft.MIPMAP_TEXTURES,i.anisotropicLevel=s!==void 0?s:ft.ANISOTROPIC_LEVEL,i.wrapMode=f||ft.WRAP_MODE,i.scaleMode=u!==void 0?u:ft.SCALE_MODE,i.format=h||qf.RGBA,i.type=p||nn.UNSIGNED_BYTE,i.target=d||Bl.TEXTURE_2D,i.alphaMode=o!==void 0?o:Cs.UNPACK,r.premultiplyAlpha!==void 0&&(i.premultiplyAlpha=r.premultiplyAlpha),i.uid=sc(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=c>0&&l>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(n),i}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(n,r){var i;return n!==void 0&&n!==this.scaleMode&&(this.scaleMode=n,i=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,i=!0),i&&this.dirtyStyleId++,this},t.prototype.setSize=function(n,r,i){return this.resolution=i||this.resolution,this.width=n,this.height=r,this._refreshPOT(),this.update(),this},t.prototype.setRealSize=function(n,r,i){return this.resolution=i||this.resolution,this.width=n/this.resolution,this.height=r/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=qO(this.realWidth)&&qO(this.realHeight)},t.prototype.setResolution=function(n){var r=this.resolution;return r===n?this:(this.resolution=n,this.valid&&(this.width=this.width*r/n,this.height=this.height*r/n,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(n){if(this.resource===n)return this;if(this.resource)throw new Error("Resource can be set only once");return n.bind(this),this.resource=n,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(n){this.emit("error",this,n)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete mo[this.cacheId],delete Ri[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(n,r,i){i===void 0&&(i=ft.STRICT_TEXTURE_CACHE);var o=typeof n=="string",a=null;o?a=n:(n._pixiId||(n._pixiId="pixiid_"+sc()),a=n._pixiId);var s=mo[a];if(o&&i&&!s)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return s||(s=new t(n,r),s.cacheId=a,t.addToCache(s,a)),s},t.fromBuffer=function(n,r,i,o){n=n||new Float32Array(r*i*4);var a=new DE(n,{width:r,height:i}),s=n instanceof Float32Array?nn.FLOAT:nn.UNSIGNED_BYTE;return new t(a,Object.assign(aee,o||{width:r,height:i,type:s}))},t.addToCache=function(n,r){r&&(n.textureCacheIds.indexOf(r)===-1&&n.textureCacheIds.push(r),mo[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),mo[r]=n)},t.removeFromCache=function(n){if(typeof n=="string"){var r=mo[n];if(r){var i=r.textureCacheIds.indexOf(n);return i>-1&&r.textureCacheIds.splice(i,1),delete mo[n],r}}else if(n&&n.textureCacheIds){for(var o=0;o<n.textureCacheIds.length;++o)delete mo[n.textureCacheIds[o]];return n.textureCacheIds.length=0,n}return null},t._globalBatch=0,t}(Wp),nD=function(e){Gt(t,e);function t(n,r){var i=this,o=r||{},a=o.width,s=o.height;i=e.call(this,a,s)||this,i.items=[],i.itemDirtyIds=[];for(var u=0;u<n;u++){var c=new Rr;i.items.push(c),i.itemDirtyIds.push(-2)}return i.length=n,i._load=null,i.baseTexture=null,i}return t.prototype.initFromArray=function(n,r){for(var i=0;i<this.length;i++)n[i]&&(n[i].castToBaseTexture?this.addBaseTextureAt(n[i].castToBaseTexture(),i):n[i]instanceof Qf?this.addResourceAt(n[i],i):this.addResourceAt(rD(n[i],r),i))},t.prototype.dispose=function(){for(var n=0,r=this.length;n<r;n++)this.items[n].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(n,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return n.valid&&!this.valid&&this.resize(n.width,n.height),this.items[r].setResource(n),this},t.prototype.bind=function(n){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,n);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=n,this.items[r].on("update",n.update,n)},t.prototype.unbind=function(n){e.prototype.unbind.call(this,n);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",n.update,n)},t.prototype.load=function(){var n=this;if(this._load)return this._load;var r=this.items.map(function(o){return o.resource}).filter(function(o){return o}),i=r.map(function(o){return o.load()});return this._load=Promise.all(i).then(function(){var o=n.items[0],a=o.realWidth,s=o.realHeight;return n.resize(a,s),Promise.resolve(n)}),this._load},t}(Qf),e4=function(e){Gt(t,e);function t(n,r){var i=this,o=r||{},a=o.width,s=o.height,u,c;return Array.isArray(n)?(u=n,c=n.length):c=n,i=e.call(this,c,{width:a,height:s})||this,u&&i.initFromArray(u,r),i}return t.prototype.addBaseTextureAt=function(n,r){if(n.resource)this.addResourceAt(n.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(n){e.prototype.bind.call(this,n),n.target=Bl.TEXTURE_2D_ARRAY},t.prototype.upload=function(n,r,i){var o=this,a=o.length,s=o.itemDirtyIds,u=o.items,c=n.gl;i.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,r.format,this._width,this._height,a,0,r.format,r.type,null);for(var l=0;l<a;l++){var f=u[l];s[l]<f.dirtyId&&(s[l]=f.dirtyId,f.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,r.format,r.type,f.resource.source))}return!0},t}(nD),Ps=function(e){Gt(t,e);function t(n){var r=this,i=n,o=i.naturalWidth||i.videoWidth||i.width,a=i.naturalHeight||i.videoHeight||i.height;return r=e.call(this,o,a)||this,r.source=n,r.noSubImage=!1,r}return t.crossOrigin=function(n,r,i){i===void 0&&r.indexOf("data:")!==0?n.crossOrigin=HU(r):i!==!1&&(n.crossOrigin=typeof i=="string"?i:"anonymous")},t.prototype.upload=function(n,r,i,o){var a=n.gl,s=r.realWidth,u=r.realHeight;return o=o||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Cs.UNPACK),!this.noSubImage&&r.target===a.TEXTURE_2D&&i.width===s&&i.height===u?a.texSubImage2D(a.TEXTURE_2D,0,0,0,r.format,r.type,o):(i.width=s,i.height=u,a.texImage2D(r.target,0,r.format,r.format,r.type,o)),!0},t.prototype.update=function(){if(!this.destroyed){var n=this.source,r=n.naturalWidth||n.videoWidth||n.width,i=n.naturalHeight||n.videoHeight||n.height;this.resize(r,i),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Qf),iD=function(e){Gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.test=function(n){var r=window.OffscreenCanvas;return r&&n instanceof r?!0:n instanceof HTMLCanvasElement},t}(Ps),t4=function(e){Gt(t,e);function t(n,r){var i=this,o=r||{},a=o.width,s=o.height,u=o.autoLoad,c=o.linkBaseTexture;if(n&&n.length!==t.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");i=e.call(this,6,{width:a,height:s})||this;for(var l=0;l<t.SIDES;l++)i.items[l].target=Bl.TEXTURE_CUBE_MAP_POSITIVE_X+l;return i.linkBaseTexture=c!==!1,n&&i.initFromArray(n,r),u!==!1&&i.load(),i}return t.prototype.bind=function(n){e.prototype.bind.call(this,n),n.target=Bl.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(n,r,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||n.parentTextureArray||Object.keys(n._glTextures).length>0)if(n.resource)this.addResourceAt(n.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else n.target=Bl.TEXTURE_CUBE_MAP_POSITIVE_X+r,n.parentTextureArray=this.baseTexture,this.items[r]=n;return n.valid&&!this.valid&&this.resize(n.realWidth,n.realHeight),this.items[r]=n,this},t.prototype.upload=function(n,r,i){for(var o=this.itemDirtyIds,a=0;a<t.SIDES;a++){var s=this.items[a];o[a]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(n,s,i),o[a]=s.dirtyId):o[a]<-1&&(n.gl.texImage2D(s.target,0,i.internalFormat,r.realWidth,r.realHeight,0,r.format,i.type,null),o[a]=-1))}return!0},t.test=function(n){return Array.isArray(n)&&n.length===t.SIDES},t.SIDES=6,t}(nD),oD=function(e){Gt(t,e);function t(n,r){var i=this;if(r=r||{},!(n instanceof HTMLImageElement)){var o=new Image;Ps.crossOrigin(o,n,r.crossorigin),o.src=n,n=o}return i=e.call(this,n)||this,!n.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=n.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(r.createBitmap!==void 0?r.createBitmap:ft.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,i.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,r.premultiplyAlpha!==void 0&&(i.premultiplyAlpha=r.premultiplyAlpha),i.bitmap=null,i._load=null,r.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(n){var r=this;return this._load?this._load:(n!==void 0&&(this.createBitmap=n),this._load=new Promise(function(i,o){var a=r.source;r.url=a.src;var s=function(){r.destroyed||(a.onload=null,a.onerror=null,r.resize(a.width,a.height),r._load=null,r.createBitmap?i(r.process()):i(r))};a.complete&&a.src?s():(a.onload=s,a.onerror=function(u){o(u),r.onError.emit(u)})}),this._load)},t.prototype.process=function(){var n=this,r=this.source;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(r,0,0,r.width,r.height,{premultiplyAlpha:this.alphaMode===Cs.UNPACK?"premultiply":"none"}).then(function(i){return n.destroyed?Promise.reject():(n.bitmap=i,n.update(),n._process=null,Promise.resolve(n))}),this._process)},t.prototype.upload=function(n,r,i){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,n,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,n,r,i,this.bitmap),!this.preserveBitmap){var o=!0,a=r._glTextures;for(var s in a){var u=a[s];if(u!==i&&u.dirtyId!==r.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(n){return typeof n=="string"||n instanceof HTMLImageElement},t}(Ps),r4=function(e){Gt(t,e);function t(n,r){var i=this;return r=r||{},i=e.call(this,document.createElement("canvas"))||this,i._width=0,i._height=0,i.svg=n,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,r.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(){var n=this;return this._load?this._load:(this._load=new Promise(function(r){if(n._resolve=function(){n.resize(n.source.width,n.source.height),r(n)},/^\<svg/.test(n.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");n.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n.svg)))}n._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var n=this,r=new Image;Ps.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(i){n._resolve&&(r.onerror=null,n.onError.emit(i))},r.onload=function(){if(n._resolve){var i=r.width,o=r.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=i*n.scale,s=o*n.scale;(n._overrideWidth||n._overrideHeight)&&(a=n._overrideWidth||n._overrideHeight/o*i,s=n._overrideHeight||n._overrideWidth/i*o),a=Math.round(a),s=Math.round(s);var u=n.source;u.width=a,u.height=s,u._pixiId="canvas_"+sc(),u.getContext("2d").drawImage(r,0,0,i,o,0,0,a,s),n._resolve(),n._resolve=null}}},t.getSize=function(n){var r=t.SVG_SIZE.exec(n),i={};return r&&(i[r[1]]=Math.round(parseFloat(r[3])),i[r[5]]=Math.round(parseFloat(r[7]))),i},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(n,r){return r==="svg"||typeof n=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(n)||typeof n=="string"&&n.indexOf("<svg")===0},t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Ps),n4=function(e){Gt(t,e);function t(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof n=="string"&&(n=[n]);var a=n[0].src||n[0];Ps.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),c=n[s],l=c.src,f=c.mime;l=l||n[s];var h=l.split("?").shift().toLowerCase(),p=h.substr(h.lastIndexOf(".")+1);f=f||t.MIME_TYPES[p]||"video/"+p,u.src=l,u.type=f,o.appendChild(u)}n=o}return i=e.call(this,n)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=r.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),r.autoLoad!==!1&&i.load(),i}return t.prototype.update=function(n){if(!this.destroyed){var r=wn.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var n=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){n.valid?i(n):(n._resolve=i,r.load())}),this._load},t.prototype._onError=function(n){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(n)},t.prototype._isSourcePlaying=function(){var n=this.source;return n.currentTime>0&&n.paused===!1&&n.ended===!1&&n.readyState>2},t.prototype._isSourceReady=function(){var n=this.source;return n.readyState===3||n.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(wn.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(wn.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var n=this.source;n.removeEventListener("canplay",this._onCanPlay),n.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(n.videoWidth,n.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&n.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&wn.shared.remove(this.update,this);var n=this.source;n&&(n.removeEventListener("error",this._onError,!0),n.pause(),n.src="",n.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(n){n!==this._autoUpdate&&(this._autoUpdate=n,!this._autoUpdate&&this._isConnectedToTicker?(wn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(wn.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(n){n!==this._updateFPS&&(this._updateFPS=n)},enumerable:!1,configurable:!0}),t.test=function(n,r){return n instanceof HTMLVideoElement||t.TYPES.indexOf(r)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Ps),i4=function(e){Gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.test=function(n){return!!window.createImageBitmap&&n instanceof ImageBitmap},t}(Ps);K0.push(oD,i4,iD,n4,r4,DE,t4,e4);var see={Resource:Qf,BaseImageResource:Ps,INSTALLED:K0,autoDetectResource:rD,AbstractMultiResource:nD,ArrayResource:e4,BufferResource:DE,CanvasResource:iD,CubeResource:t4,ImageResource:oD,SVGResource:r4,VideoResource:n4,ImageBitmapResource:i4},Fi=function(){function e(t){this.renderer=t}return e.prototype.destroy=function(){this.renderer=null},e}(),lee=function(e){Gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.upload=function(n,r,i){var o=n.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Cs.UNPACK),i.width===r.width&&i.height===r.height?o.texSubImage2D(r.target,0,0,0,r.width,r.height,r.format,r.type,this.data):(i.width=r.width,i.height=r.height,o.texImage2D(r.target,0,n.context.webGLVersion===1?o.DEPTH_COMPONENT:o.DEPTH_COMPONENT16,r.width,r.height,0,r.format,r.type,this.data)),!0},t}(DE),Q0=function(){function e(t,n){this.width=Math.ceil(t||100),this.height=Math.ceil(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Nn("disposeFramebuffer"),this.multisample=oc.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(t,n){return t===void 0&&(t=0),this.colorTextures[t]=n||new Rr(null,{scaleMode:Ia.NEAREST,resolution:1,mipmap:$f.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Rr(new lee(null,{width:this.width,height:this.height}),{scaleMode:Ia.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:$f.OFF,format:qf.DEPTH_COMPONENT,type:nn.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(t,n){if(t=Math.ceil(t),n=Math.ceil(n),!(t===this.width&&n===this.height)){this.width=t,this.height=n,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],o=i.resolution;i.setSize(t/o,n/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,n/o)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),Xm=function(e){Gt(t,e);function t(n){var r=this;if(typeof n=="number"){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];n={width:i,height:o,scaleMode:a,resolution:s}}r=e.call(this,null,n)||this;var u=n||{},c=u.width,l=u.height;return r.mipmap=0,r.width=Math.ceil(c)||100,r.height=Math.ceil(l)||100,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new Q0(r.width*r.resolution,r.height*r.resolution).addColorTexture(0,r),r.maskStack=[],r.filterStack=[{}],r}return t.prototype.resize=function(n,r){n=Math.ceil(n),r=Math.ceil(r),this.framebuffer.resize(n*this.resolution,r*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Rr),aD=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(t,n,r){var i=n.width,o=n.height;if(r){var a=t.width/2/i,s=t.height/2/o,u=t.x/i+a,c=t.y/o+s;r=Mr.add(r,Mr.NW),this.x0=u+a*Mr.uX(r),this.y0=c+s*Mr.uY(r),r=Mr.add(r,2),this.x1=u+a*Mr.uX(r),this.y1=c+s*Mr.uY(r),r=Mr.add(r,2),this.x2=u+a*Mr.uX(r),this.y2=c+s*Mr.uY(r),r=Mr.add(r,2),this.x3=u+a*Mr.uX(r),this.y3=c+s*Mr.uY(r)}else this.x0=t.x/i,this.y0=t.y/o,this.x1=(t.x+t.width)/i,this.y1=t.y/o,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/o,this.x3=t.x/i,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e}(),rL=new aD,xt=function(e){Gt(t,e);function t(n,r,i,o,a,s){var u=e.call(this)||this;if(u.noFrame=!1,r||(u.noFrame=!0,r=new hr(0,0,1,1)),n instanceof t&&(n=n.baseTexture),u.baseTexture=n,u._frame=r,u.trim=o,u.valid=!1,u._uvs=rL,u.uvMatrix=null,u.orig=i||r,u._rotate=Number(a||0),a===!0)u._rotate=2;else if(u._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=s?new An(s.x,s.y):new An(0,0),u._updateID=0,u.textureCacheIds=[],n.valid?u.noFrame?n.valid&&u.onBaseTextureUpdated(n):u.frame=r:n.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&n.on("update",u.onBaseTextureUpdated,u),u}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(n){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=n.width,this._frame.height=n.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(n){if(this.baseTexture){if(n){var r=this.baseTexture;r&&r.url&&Ri[r.url]&&t.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},t.prototype.updateUvs=function(){this._uvs===rL&&(this._uvs=new aD),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(n,r,i){r===void 0&&(r={}),i===void 0&&(i=ft.STRICT_TEXTURE_CACHE);var o=typeof n=="string",a=null;o?a=n:(n._pixiId||(n._pixiId="pixiid_"+sc()),a=n._pixiId);var s=Ri[a];if(o&&i&&!s)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return s||(r.resolution||(r.resolution=Ug(n)),s=new t(new Rr(n,r)),s.baseTexture.cacheId=a,Rr.addToCache(s.baseTexture,a),t.addToCache(s,a)),s},t.fromURL=function(n,r){var i=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),o=t.from(n,Object.assign({resourceOptions:i},r),!1),a=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):a.load().then(function(){return Promise.resolve(o)})},t.fromBuffer=function(n,r,i,o){return new t(Rr.fromBuffer(n,r,i,o))},t.fromLoader=function(n,r,i){var o=new oD(n);o.url=r;var a=new Rr(o,{scaleMode:ft.SCALE_MODE,resolution:Ug(r)}),s=new t(a);return i||(i=r),Rr.addToCache(s.baseTexture,i),t.addToCache(s,i),i!==r&&(Rr.addToCache(s.baseTexture,r),t.addToCache(s,r)),s},t.addToCache=function(n,r){r&&(n.textureCacheIds.indexOf(r)===-1&&n.textureCacheIds.push(r),Ri[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),Ri[r]=n)},t.removeFromCache=function(n){if(typeof n=="string"){var r=Ri[n];if(r){var i=r.textureCacheIds.indexOf(n);return i>-1&&r.textureCacheIds.splice(i,1),delete Ri[n],r}}else if(n&&n.textureCacheIds){for(var o=0;o<n.textureCacheIds.length;++o)Ri[n.textureCacheIds[o]]===n&&delete Ri[n.textureCacheIds[o]];return n.textureCacheIds.length=0,n}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(n){this._frame=n,this.noFrame=!1;var r=n.x,i=n.y,o=n.width,a=n.height,s=r+o>this.baseTexture.width,u=i+a>this.baseTexture.height;if(s||u){var c=s&&u?"and":"or",l="X: "+r+" + "+o+" = "+(r+o)+" > "+this.baseTexture.width,f="Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+c+" "+f))}this.valid=o&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=n),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(n){this._rotate=n,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(Wp);function uee(){var e=document.createElement("canvas");e.width=16,e.height=16;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new xt(new Rr(new iD(e)))}function RE(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}xt.EMPTY=new xt(new Rr);RE(xt.EMPTY);RE(xt.EMPTY.baseTexture);xt.WHITE=uee();RE(xt.WHITE);RE(xt.WHITE.baseTexture);var lc=function(e){Gt(t,e);function t(n,r){var i=this,o=null;if(!(n instanceof Xm)){var a=arguments[1],s=arguments[2],u=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+s+") instead of the ctor directly."),o=arguments[0],r=null,n=new Xm({width:a,height:s,scaleMode:u,resolution:c})}return i=e.call(this,n,r)||this,i.legacyRenderer=o,i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),t.prototype.resize=function(n,r,i){i===void 0&&(i=!0),n=Math.ceil(n),r=Math.ceil(r),this.valid=n>0&&r>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=r,i&&this.baseTexture.resize(n,r),this.updateUvs()},t.prototype.setResolution=function(n){var r=this.baseTexture;r.resolution!==n&&(r.setResolution(n),this.resize(r.width,r.height,!1))},t.create=function(n){return typeof n=="number"&&(n={width:n,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new t(new Xm(n))},t}(xt),o4=function(){function e(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(t,n){var r=new Xm(Object.assign({width:t,height:n,resolution:1},this.textureOptions));return new lc(r)},e.prototype.getOptimalTexture=function(t,n,r){r===void 0&&(r=1);var i=e.SCREEN_KEY;t*=r,n*=r,(!this.enableFullScreen||t!==this._pixelsWidth||n!==this._pixelsHeight)&&(t=Hg(t),n=Hg(n),i=(t&65535)<<16|n&65535),this.texturePool[i]||(this.texturePool[i]=[]);var o=this.texturePool[i].pop();return o||(o=this.createTexture(t,n)),o.filterPoolKey=i,o.setResolution(r),o},e.prototype.getFilterTexture=function(t,n){var r=this.getOptimalTexture(t.width,t.height,n||t.resolution);return r.filterFrame=t.filterFrame,r},e.prototype.returnTexture=function(t){var n=t.filterPoolKey;t.filterFrame=null,this.texturePool[n].push(t)},e.prototype.returnFilterTexture=function(t){this.returnTexture(t)},e.prototype.clear=function(t){if(t=t!==!1,t)for(var n in this.texturePool){var r=this.texturePool[n];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){var n=e.SCREEN_KEY,r=this.texturePool[n];if(this.enableFullScreen=t.width>0&&t.height>0,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY="screen",e}(),nk=function(){function e(t,n,r,i,o,a,s){n===void 0&&(n=0),r===void 0&&(r=!1),i===void 0&&(i=5126),this.buffer=t,this.size=n,this.normalized=r,this.type=i,this.stride=o,this.start=a,this.instance=s}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,n,r,i,o){return new e(t,n,r,i,o)},e}(),cee=0,Sn=function(){function e(t,n,r){n===void 0&&(n=!0),r===void 0&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=cee++,this.disposeRunner=new Nn("disposeBuffer")}return e.prototype.update=function(t){this.data=t||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}();function a4(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}var hee={Float32Array,Uint32Array,Int32Array,Uint8Array};function fee(e,t){for(var n=0,r=0,i={},o=0;o<e.length;o++)r+=t[o],n+=e[o].length;for(var a=new ArrayBuffer(n*4),s=null,u=0,o=0;o<e.length;o++){var c=t[o],l=e[o],f=a4(l);i[f]||(i[f]=new hee[f](a)),s=i[f];for(var h=0;h<l.length;h++){var p=(h/c|0)*r+u,d=h%c;s[p+d]=l[h]}u+=c}return new Float32Array(a)}var nL={5126:4,5123:2,5121:1},pee=0,dee={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},qp=function(){function e(t,n){t===void 0&&(t=[]),n===void 0&&(n={}),this.buffers=t,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=pee++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Nn("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(t,n,r,i,o,a,s,u){if(r===void 0&&(r=0),i===void 0&&(i=!1),u===void 0&&(u=!1),!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof Sn||(n instanceof Array&&(n=new Float32Array(n)),n=new Sn(n));var c=t.split("|");if(c.length>1){for(var l=0;l<c.length;l++)this.addAttribute(c[l],n,r,i,o);return this}var f=this.buffers.indexOf(n);return f===-1&&(this.buffers.push(n),f=this.buffers.length-1),this.attributes[t]=new nk(f,r,i,o,a,s,u),this.instanced=this.instanced||u,this},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},e.prototype.addIndex=function(t){return t instanceof Sn||(t instanceof Array&&(t=new Uint16Array(t)),t=new Sn(t)),t.index=!0,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],n=[],r=new Sn,i;for(i in this.attributes){var o=this.attributes[i],a=this.buffers[o.buffer];t.push(a.data),n.push(o.size*nL[o.type]/4),o.buffer=0}for(r.data=fee(t,n),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var t in this.attributes){var n=this.attributes[t],r=this.buffers[n.buffer];return r.data.length/(n.stride/4||n.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,n=0;n<this.buffers.length;n++)t.buffers[n]=new Sn(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];t.attributes[n]=new nk(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},e.merge=function(t){for(var n=new e,r=[],i=[],o=[],a,s=0;s<t.length;s++){a=t[s];for(var u=0;u<a.buffers.length;u++)i[u]=i[u]||0,i[u]+=a.buffers[u].data.length,o[u]=0}for(var s=0;s<a.buffers.length;s++)r[s]=new dee[a4(a.buffers[s].data)](i[s]),n.buffers[s]=new Sn(r[s]);for(var s=0;s<t.length;s++){a=t[s];for(var u=0;u<a.buffers.length;u++)r[u].set(a.buffers[u].data,o[u]),o[u]+=a.buffers[u].data.length}if(n.attributes=a.attributes,a.indexBuffer){n.indexBuffer=n.buffers[a.buffers.indexOf(a.indexBuffer)],n.indexBuffer.index=!0;for(var c=0,l=0,f=0,h=0,s=0;s<a.buffers.length;s++)if(a.buffers[s]!==a.indexBuffer){h=s;break}for(var s in a.attributes){var p=a.attributes[s];(p.buffer|0)===h&&(l+=p.size*nL[p.type]/4)}for(var s=0;s<t.length;s++){for(var d=t[s].indexBuffer.data,u=0;u<d.length;u++)n.indexBuffer.data[u+f]+=c;c+=a.buffers[h].data.length/l,f+=d.length}}return n},e}(),s4=function(e){Gt(t,e);function t(){var n=e.call(this)||this;return n.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),n}return t}(qp),sD=function(e){Gt(t,e);function t(){var n=e.call(this)||this;return n.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),n.uvs=new Float32Array([0,0,1,0,1,1,0,1]),n.vertexBuffer=new Sn(n.vertices),n.uvBuffer=new Sn(n.uvs),n.addAttribute("aVertexPosition",n.vertexBuffer).addAttribute("aTextureCoord",n.uvBuffer).addIndex([0,1,2,0,2,3]),n}return t.prototype.map=function(n,r){var i=0,o=0;return this.uvs[0]=i,this.uvs[1]=o,this.uvs[2]=i+r.width/n.width,this.uvs[3]=o,this.uvs[4]=i+r.width/n.width,this.uvs[5]=o+r.height/n.height,this.uvs[6]=i,this.uvs[7]=o+r.height/n.height,i=r.x,o=r.y,this.vertices[0]=i,this.vertices[1]=o,this.vertices[2]=i+r.width,this.vertices[3]=o,this.vertices[4]=i+r.width,this.vertices[5]=o+r.height,this.vertices[6]=i,this.vertices[7]=o+r.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(qp),mee=0,Fl=function(){function e(t,n){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=mee++,this.static=!!n}return e.prototype.update=function(){this.dirtyId++},e.prototype.add=function(t,n,r){this.uniforms[t]=new e(n,r)},e.from=function(t,n){return new e(t,n)},e}(),l4=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new hr,this.destinationFrame=new hr,this.filters=[]}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),u4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.defaultFilterStack=[{}],r.texturePool=new o4,r.texturePool.setScreenSize(n.view),r.statePool=[],r.quad=new s4,r.quadUv=new sD,r.tempRect=new hr,r.activeState={},r.globalUniforms=new Fl({outputFrame:r.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),r.forceClear=!1,r.useMaxPadding=!1,r}return t.prototype.push=function(n,r){for(var i=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new l4,s=r[0].resolution,u=r[0].padding,c=r[0].autoFit,l=r[0].legacy,f=1;f<r.length;f++){var h=r[f];s=Math.min(s,h.resolution),u=this.useMaxPadding?Math.max(u,h.padding):u+h.padding,c=c&&h.autoFit,l=l||h.legacy}o.length===1&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),o.push(a),a.resolution=s,a.legacy=l,a.target=n,a.sourceFrame.copyFrom(n.filterArea||n.getBounds(!0)),a.sourceFrame.pad(u),c&&a.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),a.sourceFrame.ceil(s),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,s),a.filters=r,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var p=this.tempRect;p.width=a.sourceFrame.width,p.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,i.renderTexture.bind(a.renderTexture,a.sourceFrame,p),i.renderTexture.clear()},t.prototype.pop=function(){var n=this.defaultFilterStack,r=n.pop(),i=r.filters;this.activeState=r;var o=this.globalUniforms.uniforms;o.outputFrame=r.sourceFrame,o.resolution=r.resolution;var a=o.inputSize,s=o.inputPixel,u=o.inputClamp;if(a[0]=r.destinationFrame.width,a[1]=r.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],s[0]=a[0]*r.resolution,s[1]=a[1]*r.resolution,s[2]=1/s[0],s[3]=1/s[1],u[0]=.5*s[2],u[1]=.5*s[3],u[2]=r.sourceFrame.width*a[2]-.5*s[2],u[3]=r.sourceFrame.height*a[3]-.5*s[3],r.legacy){var c=o.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();var l=n[n.length-1];if(r.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,l.renderTexture,Lo.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var f=r.renderTexture,h=this.getOptimalFilterTexture(f.width,f.height,r.resolution);h.filterFrame=f.filterFrame;var p=0;for(p=0;p<i.length-1;++p){i[p].apply(this,f,h,Lo.CLEAR,r);var d=f;f=h,h=d}i[p].apply(this,f,l.renderTexture,Lo.BLEND,r),this.returnFilterTexture(f),this.returnFilterTexture(h)}r.clear(),this.statePool.push(r)},t.prototype.bindAndClear=function(n,r){if(r===void 0&&(r=Lo.CLEAR),n&&n.filterFrame){var i=this.tempRect;i.width=n.filterFrame.width,i.height=n.filterFrame.height,this.renderer.renderTexture.bind(n,n.filterFrame,i)}else this.renderer.renderTexture.bind(n);typeof r=="boolean"&&(r=r?Lo.CLEAR:Lo.BLEND,ze("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(r===Lo.CLEAR||r===Lo.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},t.prototype.applyFilter=function(n,r,i,o){var a=this.renderer;this.bindAndClear(i,o),n.uniforms.uSampler=r,n.uniforms.filterGlobals=this.globalUniforms,a.state.set(n.state),a.shader.bind(n),n.legacy?(this.quadUv.map(r._frame,r.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(To.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(To.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(n,r){var i=this.activeState,o=i.sourceFrame,a=i.destinationFrame,s=r._texture.orig,u=n.set(a.width,0,0,a.height,o.x,o.y),c=r.worldTransform.copyTo(an.TEMP_MATRIX);return c.invert(),u.prepend(c),u.scale(1/s.width,1/s.height),u.translate(r.anchor.x,r.anchor.y),u},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(n,r,i){return i===void 0&&(i=1),this.texturePool.getOptimalTexture(n,r,i)},t.prototype.getFilterTexture=function(n,r){if(typeof n=="number"){var i=n;n=r,r=i}n=n||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(n.width,n.height,r||n.resolution);return o.filterFrame=n.filterFrame,o},t.prototype.returnFilterTexture=function(n){this.texturePool.returnTexture(n)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(Fi),Oy=function(){function e(t){this.renderer=t}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(t){},e}(),c4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.emptyRenderer=new Oy(n),r.currentRenderer=r.emptyRenderer,r}return t.prototype.setObjectRenderer=function(n){this.currentRenderer!==n&&(this.currentRenderer.stop(),this.currentRenderer=n,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(n,r){for(var i=this.renderer.texture.boundTextures,o=r-1;o>=0;--o)n[o]=i[o]||null,n[o]&&(n[o]._batchLocation=o)},t.prototype.boundArray=function(n,r,i,o){for(var a=n.elements,s=n.ids,u=n.count,c=0,l=0;l<u;l++){var f=a[l],h=f._batchLocation;if(h>=0&&h<o&&r[h]===f){s[l]=h;continue}for(;c<o;){var p=r[c];if(p&&p._batchEnabled===i&&p._batchLocation===c){c++;continue}s[l]=c,f._batchLocation=c,r[c]=f;break}}},t}(Fi),iL=0,h4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.webGLVersion=1,r.extensions={},r.supports={uint32Indices:!1},r.handleContextLost=r.handleContextLost.bind(r),r.handleContextRestored=r.handleContextRestored.bind(r),n.view.addEventListener("webglcontextlost",r.handleContextLost,!1),n.view.addEventListener("webglcontextrestored",r.handleContextRestored,!1),r}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(n){this.gl=n,this.renderer.gl=n,this.renderer.CONTEXT_UID=iL++,n.isContextLost()&&n.getExtension("WEBGL_lose_context")&&n.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(n){this.gl=n,this.validateContext(n),this.renderer.gl=n,this.renderer.CONTEXT_UID=iL++,this.renderer.runners.contextChange.emit(n)},t.prototype.initFromOptions=function(n){var r=this.createContext(this.renderer.view,n);this.initFromContext(r)},t.prototype.createContext=function(n,r){var i;if(ft.PREFER_ENV>=Ba.WEBGL2&&(i=n.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=n.getContext("webgl",r)||n.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var n=this.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:n.getExtension("WEBGL_draw_buffers"),depthTexture:n.getExtension("WEBGL_depth_texture"),loseContext:n.getExtension("WEBGL_lose_context"),vertexArrayObject:n.getExtension("OES_vertex_array_object")||n.getExtension("MOZ_OES_vertex_array_object")||n.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:n.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:n.getExtension("OES_element_index_uint"),floatTexture:n.getExtension("OES_texture_float"),floatTextureLinear:n.getExtension("OES_texture_float_linear"),textureHalfFloat:n.getExtension("OES_texture_half_float"),textureHalfFloatLinear:n.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:n.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:n.getExtension("EXT_color_buffer_float"),floatTextureLinear:n.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(n){n.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var n=this.renderer.view;n.removeEventListener("webglcontextlost",this.handleContextLost),n.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(n){var r=n.getContextAttributes(),i="WebGL2RenderingContext"in window&&n instanceof window.WebGL2RenderingContext;i&&(this.webGLVersion=2),r.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var o=i||!!n.getExtension("OES_element_index_uint");this.supports.uint32Indices=o,o||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(Fi),f4=function(){function e(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=oc.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return e}(),gee=new hr,p4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.managedFramebuffers=[],r.unknownFramebuffer=new Q0(10,10),r.msaaSamples=null,r}return t.prototype.contextChange=function(){var n=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new hr,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;ft.PREFER_ENV===Ba.WEBGL_LEGACY&&(r=null,i=null),r?n.drawBuffers=function(o){return r.drawBuffersWEBGL(o)}:(this.hasMRT=!1,n.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=n.getInternalformatParameter(n.RENDERBUFFER,n.RGBA8,n.SAMPLES)},t.prototype.bind=function(n,r){var i=this.gl;if(n){var o=n.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(n);this.current!==n&&(this.current=n,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.dirtyId!==n.dirtyId&&(o.dirtyId=n.dirtyId,o.dirtyFormat!==n.dirtyFormat?(o.dirtyFormat=n.dirtyFormat,this.updateFramebuffer(n)):o.dirtySize!==n.dirtySize&&(o.dirtySize=n.dirtySize,this.resizeFramebuffer(n)));for(var a=0;a<n.colorTextures.length;a++){var s=n.colorTextures[a];this.renderer.texture.unbind(s.parentTextureArray||s)}n.depthTexture&&this.renderer.texture.unbind(n.depthTexture),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,n.width,n.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(n,r,i,o){var a=this.viewport;(a.width!==i||a.height!==o||a.x!==n||a.y!==r)&&(a.x=n,a.y=r,a.width=i,a.height=o,this.gl.viewport(n,r,i,o))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(n,r,i,o,a){a===void 0&&(a=Gg.COLOR|Gg.DEPTH);var s=this.gl;s.clearColor(n,r,i,o),s.clear(a)},t.prototype.initFramebuffer=function(n){var r=this.gl,i=new f4(r.createFramebuffer());return i.multisample=this.detectSamples(n.multisample),n.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(n),n.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(n){var r=this.gl,i=n.glFramebuffers[this.CONTEXT_UID];i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,n.width,n.height));for(var o=n.colorTextures,a=0;a<o.length;a++)this.renderer.texture.bind(o[a],0);n.depthTexture&&this.renderer.texture.bind(n.depthTexture,0)},t.prototype.updateFramebuffer=function(n){var r=this.gl,i=n.glFramebuffers[this.CONTEXT_UID],o=n.colorTextures,a=o.length;r.drawBuffers||(a=Math.min(a,1)),i.multisample>1&&(i.msaaBuffer=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,n.width,n.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer));for(var s=[],u=0;u<a;u++)if(!(u===0&&i.multisample>1)){var c=n.colorTextures[u],l=c.parentTextureArray||c;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+u,c.target,l._glTextures[this.CONTEXT_UID].texture,0),s.push(r.COLOR_ATTACHMENT0+u)}if(s.length>1&&r.drawBuffers(s),n.depthTexture){var f=this.writeDepthTexture;if(f){var h=n.depthTexture;this.renderer.texture.bind(h,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,0)}}!i.stencil&&(n.stencil||n.depth)&&(i.stencil=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,n.width,n.height),n.depthTexture||r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil))},t.prototype.detectSamples=function(n){var r=this.msaaSamples,i=oc.NONE;if(n<=1||r===null)return i;for(var o=0;o<r.length;o++)if(r[o]<=n){i=r[o];break}return i===1&&(i=oc.NONE),i},t.prototype.blit=function(n,r,i){var o=this,a=o.current,s=o.renderer,u=o.gl,c=o.CONTEXT_UID;if(s.context.webGLVersion===2&&a){var l=a.glFramebuffers[c];if(l){if(!n){if(l.multisample<=1)return;l.blitFramebuffer||(l.blitFramebuffer=new Q0(a.width,a.height),l.blitFramebuffer.addColorTexture(0,a.colorTextures[0])),n=l.blitFramebuffer,n.width=a.width,n.height=a.height}r||(r=gee,r.width=a.width,r.height=a.height),i||(i=r);var f=r.width===i.width&&r.height===i.height;this.bind(n),u.bindFramebuffer(u.READ_FRAMEBUFFER,l.framebuffer),u.blitFramebuffer(r.x,r.y,r.width,r.height,i.x,i.y,i.width,i.height,u.COLOR_BUFFER_BIT,f?u.NEAREST:u.LINEAR)}}},t.prototype.disposeFramebuffer=function(n,r){var i=n.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(i){delete n.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(n);a>=0&&this.managedFramebuffers.splice(a,1),n.disposeRunner.remove(this),r||(o.deleteFramebuffer(i.framebuffer),i.stencil&&o.deleteRenderbuffer(i.stencil))}},t.prototype.disposeAll=function(n){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<r.length;i++)this.disposeFramebuffer(r[i],n)},t.prototype.forceStencil=function(){var n=this.current;if(n){var r=n.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){n.enableStencil();var i=n.width,o=n.height,a=this.gl,s=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,s),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,i,o),r.stencil=s,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,s)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new hr},t}(Fi),yee=function(){function e(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),qS={5126:4,5123:2,5121:1},d4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r._activeGeometry=null,r._activeVao=null,r.hasVao=!0,r.hasInstance=!0,r.canUseUInt32ElementIndex=!1,r.managedGeometries={},r.managedBuffers={},r}return t.prototype.contextChange=function(){this.disposeAll(!0);var n=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;ft.PREFER_ENV===Ba.WEBGL_LEGACY&&(i=null),i?(n.createVertexArray=function(){return i.createVertexArrayOES()},n.bindVertexArray=function(a){return i.bindVertexArrayOES(a)},n.deleteVertexArray=function(a){return i.deleteVertexArrayOES(a)}):(this.hasVao=!1,n.createVertexArray=function(){return null},n.bindVertexArray=function(){return null},n.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var o=n.getExtension("ANGLE_instanced_arrays");o?(n.vertexAttribDivisor=function(a,s){return o.vertexAttribDivisorANGLE(a,s)},n.drawElementsInstanced=function(a,s,u,c,l){return o.drawElementsInstancedANGLE(a,s,u,c,l)},n.drawArraysInstanced=function(a,s,u,c){return o.drawArraysInstancedANGLE(a,s,u,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(n,r){r=r||this.renderer.shader.shader;var i=this.gl,o=n.glVertexArrayObjects[this.CONTEXT_UID],a=!1;o||(this.managedGeometries[n.id]=n,n.disposeRunner.add(this),n.glVertexArrayObjects[this.CONTEXT_UID]=o={},a=!0);var s=o[r.program.id]||this.initGeometryVao(n,r.program,a);this._activeGeometry=n,this._activeVao!==s&&(this._activeVao=s,this.hasVao?i.bindVertexArray(s):this.activateVao(n,r.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var n=this._activeGeometry,r=this.gl,i=0;i<n.buffers.length;i++){var o=n.buffers[i],a=o._glBuffers[this.CONTEXT_UID];if(o._updateID!==a.updateID){a.updateID=o._updateID;var s=o.index?r.ELEMENT_ARRAY_BUFFER:r.ARRAY_BUFFER;if(r.bindBuffer(s,a.buffer),this._boundBuffer=a,a.byteLength>=o.data.byteLength)r.bufferSubData(s,0,o.data);else{var u=o.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;a.byteLength=o.data.byteLength,r.bufferData(s,o.data,u)}}}},t.prototype.checkCompatibility=function(n,r){var i=n.attributes,o=r.attributeData;for(var a in o)if(!i[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},t.prototype.getSignature=function(n,r){var i=n.attributes,o=r.attributeData,a=["g",n.id];for(var s in i)o[s]&&a.push(s);return a.join("-")},t.prototype.initGeometryVao=function(n,r,i){i===void 0&&(i=!0),this.checkCompatibility(n,r);var o=this.gl,a=this.CONTEXT_UID,s=this.getSignature(n,r),u=n.glVertexArrayObjects[this.CONTEXT_UID],c=u[s];if(c)return u[r.id]=c,c;var l=n.buffers,f=n.attributes,h={},p={};for(var d in l)h[d]=0,p[d]=0;for(var d in f)!f[d].size&&r.attributeData[d]?f[d].size=r.attributeData[d].size:f[d].size||console.warn("PIXI Geometry attribute '"+d+"' size cannot be determined (likely the bound shader does not have the attribute)"),h[f[d].buffer]+=f[d].size*qS[f[d].type];for(var d in f){var m=f[d],g=m.size;m.stride===void 0&&(h[m.buffer]===g*qS[m.type]?m.stride=0:m.stride=h[m.buffer]),m.start===void 0&&(m.start=p[m.buffer],p[m.buffer]+=g*qS[m.type])}c=o.createVertexArray(),o.bindVertexArray(c);for(var v=0;v<l.length;v++){var b=l[v];b._glBuffers[a]||(b._glBuffers[a]=new yee(o.createBuffer()),this.managedBuffers[b.id]=b,b.disposeRunner.add(this)),i&&b._glBuffers[a].refCount++}return this.activateVao(n,r),this._activeVao=c,u[r.id]=c,u[s]=c,c},t.prototype.disposeBuffer=function(n,r){if(this.managedBuffers[n.id]){delete this.managedBuffers[n.id];var i=n._glBuffers[this.CONTEXT_UID],o=this.gl;n.disposeRunner.remove(this),i&&(r||o.deleteBuffer(i.buffer),delete n._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeGeometry=function(n,r){if(this.managedGeometries[n.id]){delete this.managedGeometries[n.id];var i=n.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,a=n.buffers;if(n.disposeRunner.remove(this),!!i){for(var s=0;s<a.length;s++){var u=a[s]._glBuffers[this.CONTEXT_UID];u.refCount--,u.refCount===0&&!r&&this.disposeBuffer(a[s],r)}if(!r){for(var c in i)if(c[0]==="g"){var l=i[c];this._activeVao===l&&this.unbind(),o.deleteVertexArray(l)}}delete n.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(n){for(var r=Object.keys(this.managedGeometries),i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],n);r=Object.keys(this.managedBuffers);for(var i=0;i<r.length;i++)this.disposeBuffer(this.managedBuffers[r[i]],n)},t.prototype.activateVao=function(n,r){var i=this.gl,o=this.CONTEXT_UID,a=n.buffers,s=n.attributes;n.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n.indexBuffer._glBuffers[o].buffer);var u=null;for(var c in s){var l=s[c],f=a[l.buffer],h=f._glBuffers[o];if(r.attributeData[c]){u!==h&&(i.bindBuffer(i.ARRAY_BUFFER,h.buffer),u=h);var p=r.attributeData[c].location;if(i.enableVertexAttribArray(p),i.vertexAttribPointer(p,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(p,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(n,r,i,o){var a=this.gl,s=this._activeGeometry;if(s.indexBuffer){var u=s.indexBuffer.data.BYTES_PER_ELEMENT,c=u===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;u===2||u===4&&this.canUseUInt32ElementIndex?s.instanced?a.drawElementsInstanced(n,r||s.indexBuffer.data.length,c,(i||0)*u,o||1):a.drawElements(n,r||s.indexBuffer.data.length,c,(i||0)*u):console.warn("unsupported index buffer type: uint32")}else s.instanced?a.drawArraysInstanced(n,i,r||s.getSize(),o||1):a.drawArrays(n,i,r||s.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(Fi),m4=function(){function e(t){t===void 0&&(t=null),this.type=Di.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Di.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function oL(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function g4(e,t,n,r){var i=oL(e,e.VERTEX_SHADER,t),o=oL(e,e.FRAGMENT_SHADER,n),a=e.createProgram();if(e.attachShader(a,i),e.attachShader(a,o),r)for(var s in r)e.bindAttribLocation(a,r[s],s);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(e.getShaderParameter(i,e.COMPILE_STATUS)||(console.warn(t),console.error(e.getShaderInfoLog(i))),e.getShaderParameter(o,e.COMPILE_STATUS)||(console.warn(n),console.error(e.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(a,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),e.getProgramInfoLog(a)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(a)),e.deleteProgram(a),a=null),e.deleteShader(i),e.deleteShader(o),a}function $S(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t}function y4(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return $S(2*t);case"bvec3":return $S(3*t);case"bvec4":return $S(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var v4={},Dd=v4;function b4(){if(Dd===v4||Dd&&Dd.isContextLost()){var e=document.createElement("canvas"),t=void 0;ft.PREFER_ENV>=Ba.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Dd=t}return Dd}var Fv;function vee(){if(!Fv){Fv=Vo.MEDIUM;var e=b4();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Fv=t.precision?Vo.HIGH:Vo.MEDIUM}}return Fv}function aL(e,t,n){if(e.substring(0,9)!=="precision"){var r=t;return t===Vo.HIGH&&n!==Vo.HIGH&&(r=Vo.MEDIUM),"precision "+r+` float;
`+e}else if(n!==Vo.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var bee={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function _ee(e){return bee[e]}var Gv=null,sL={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function lL(e,t){if(!Gv){var n=Object.keys(sL);Gv={};for(var r=0;r<n.length;++r){var i=n[r];Gv[e[i]]=sL[i]}}return Gv[t]}var Wb=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,t){return e.type==="mat3"&&e.size===1&&t.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `}},{test:function(e,t){return e.type==="vec2"&&e.size===1&&t.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,t){return e.type==="vec4"&&e.size===1&&t.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Tee={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Eee={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function See(e,t){var n=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var r in e.uniforms){var i=t[r];if(!i){e.uniforms[r].group&&n.push(`
                    renderer.shader.syncUniformGroup(uv["`+r+`"], syncData);
                `);continue}for(var o=e.uniforms[r],a=!1,s=0;s<Wb.length;s++)if(Wb[s].test(i,o)){n.push(Wb[s].code(r,o)),a=!0;break}if(!a){var u=i.size===1?Tee:Eee,c=u[i.type].replace("location",'ud["'+r+'"].location');n.push(`
            cv = ud["`+r+`"].value;
            v = uv["`+r+`"];
            `+c+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var wee=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Aee(e){for(var t="",n=0;n<e;++n)n>0&&(t+=`
else `),n<e-1&&(t+="if(test == "+n+".0){}");return t}function _4(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=t.createShader(t.FRAGMENT_SHADER);;){var r=wee.replace(/%forloop%/gi,Aee(e));if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))e=e/2|0;else break}return e}var Rd;function Oee(){if(typeof Rd=="boolean")return Rd;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Rd=e({a:"b"},"a","b")===!0}catch{Rd=!1}return Rd}var kee=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,xee=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,Iee=0,Hv={},ky=function(){function e(t,n,r){r===void 0&&(r="pixi-shader"),this.id=Iee++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Hv[r]?(Hv[r]++,r+="-"+Hv[r]):Hv[r]=1,this.vertexSrc="#define SHADER_NAME "+r+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+`
`+this.fragmentSrc,this.vertexSrc=aL(this.vertexSrc,ft.PRECISION_VERTEX,Vo.HIGH),this.fragmentSrc=aL(this.fragmentSrc,ft.PRECISION_FRAGMENT,vee())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return e.prototype.extractData=function(t,n){var r=b4();if(r){var i=g4(r,t,n);this.attributeData=this.getAttributeData(i,r),this.uniformData=this.getUniformData(i,r),r.deleteProgram(i)}else this.uniformData={},this.attributeData={}},e.prototype.getAttributeData=function(t,n){for(var r={},i=[],o=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var s=n.getActiveAttrib(t,a),u=lL(n,s.type),c={type:u,name:s.name,size:_ee(u),location:0};r[s.name]=c,i.push(c)}i.sort(function(l,f){return l.name>f.name?1:-1});for(var a=0;a<i.length;a++)i[a].location=a;return r},e.prototype.getUniformData=function(t,n){for(var r={},i=n.getProgramParameter(t,n.ACTIVE_UNIFORMS),o=0;o<i;o++){var a=n.getActiveUniform(t,o),s=a.name.replace(/\[.*?\]$/,""),u=a.name.match(/\[.*?\]$/),c=lL(n,a.type);r[s]={type:c,size:a.size,isArray:u,value:y4(c,a.size)}}return r},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return xee},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return kee},enumerable:!1,configurable:!0}),e.from=function(t,n,r){var i=t+n,o=KO[i];return o||(KO[i]=o=new e(t,n,r)),o},e}(),ql=function(){function e(t,n){this.program=t,n?n instanceof Fl?this.uniformGroup=n:this.uniformGroup=new Fl(n):this.uniformGroup=new Fl({});for(var r in t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}return e.prototype.checkUniformExists=function(t,n){if(n.uniforms[t])return!0;for(var r in n.uniforms){var i=n.uniforms[r];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,n,r){var i=ky.from(t,n);return new e(i,r)},e}(),KS=0,QS=1,ZS=2,JS=3,ew=4,Ql=function(){function e(){this.data=0,this.blendMode=gt.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<KS)},set:function(t){!!(this.data&1<<KS)!==t&&(this.data^=1<<KS)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<QS)},set:function(t){!!(this.data&1<<QS)!==t&&(this.data^=1<<QS)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<ZS)},set:function(t){!!(this.data&1<<ZS)!==t&&(this.data^=1<<ZS)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<JS)},set:function(t){!!(this.data&1<<JS)!==t&&(this.data^=1<<JS)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<ew)},set:function(t){!!(this.data&1<<ew)!==t&&(this.data^=1<<ew)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==gt.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),Cee=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Pee=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Gs=function(e){Gt(t,e);function t(n,r,i){var o=this,a=ky.from(n||t.defaultVertexSrc,r||t.defaultFragmentSrc);return o=e.call(this,a,i)||this,o.padding=0,o.resolution=ft.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new Ql,o}return t.prototype.apply=function(n,r,i,o,a){n.applyFilter(this,r,i,o)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(n){this.state.blendMode=n},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Cee},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return Pee},enumerable:!1,configurable:!0}),t}(ql),Dee=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,Ree=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,uL=new an,NE=function(){function e(t,n){this._texture=t,this.mapCoord=new an,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(t,n){n===void 0&&(n=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var o=t[i],a=t[i+1];n[i]=o*r.a+a*r.c+r.tx,n[i+1]=o*r.b+a*r.d+r.ty}return n},e.prototype.update=function(t){var n=this._texture;if(!n||!n.valid||!t&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;var r=n._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=n.orig,o=n.trim;o&&(uL.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(uL));var a=n.baseTexture,s=this.uClampFrame,u=this.clampMargin/a.resolution,c=this.clampOffset;return s[0]=(n._frame.x+u+c)/a.width,s[1]=(n._frame.y+u+c)/a.height,s[2]=(n._frame.x+n._frame.width-u+c)/a.width,s[3]=(n._frame.y+n._frame.height-u+c)/a.height,this.uClampOffset[0]=c/a.realWidth,this.uClampOffset[1]=c/a.realHeight,this.isSimple=n._frame.width===a.width&&n._frame.height===a.height&&n.rotate===0,!0},e}(),T4=function(e){Gt(t,e);function t(n){var r=this,i=new an;return r=e.call(this,Dee,Ree)||this,n.renderable=!1,r.maskSprite=n,r.maskMatrix=i,r}return t.prototype.apply=function(n,r,i,o){var a=this.maskSprite,s=a._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new NE(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=n.calculateSpriteMatrix(this.maskMatrix,a).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,n.applyFilter(this,r,i,o))},t}(Gs),E4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.enableScissor=!1,r.alphaMaskPool=[],r.maskDataPool=[],r.maskStack=[],r.alphaMaskIndex=0,r}return t.prototype.setMaskStack=function(n){this.maskStack=n,this.renderer.scissor.setMaskStack(n),this.renderer.stencil.setMaskStack(n)},t.prototype.push=function(n,r){var i=r;if(!i.isMaskData){var o=this.maskDataPool.pop()||new m4;o.pooled=!0,o.maskObject=r,i=o}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=n,i.type){case Di.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case Di.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case Di.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},t.prototype.pop=function(n){var r=this.maskStack.pop();if(!(!r||r._target!==n)){switch(r.type){case Di.SCISSOR:this.renderer.scissor.pop();break;case Di.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Di.SPRITE:this.popSpriteMask();break}r.reset(),r.pooled&&this.maskDataPool.push(r)}},t.prototype.detect=function(n){var r=n.maskObject;if(r.isSprite){n.type=Di.SPRITE;return}if(n.type=Di.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()){var i=r.worldTransform,o=Math.atan2(i.b,i.a),a=Math.atan2(i.d,i.c);o=Math.round(o*(180/Math.PI)*100),a=Math.round(a*(180/Math.PI)*100)-o,o=(o%9e3+9e3)%9e3,a=(a%18e3+18e3)%18e3,o===0&&a===9e3&&(n.type=Di.SCISSOR)}},t.prototype.pushSpriteMask=function(n){var r=n.maskObject,i=n._target,o=this.alphaMaskPool[this.alphaMaskIndex];o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new T4(r)]),o[0].resolution=this.renderer.resolution,o[0].maskSprite=r;var a=i.filterArea;i.filterArea=r.getBounds(!0),this.renderer.filter.push(i,o),i.filterArea=a,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t}(Fi),S4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.maskStack=[],r.glConst=0,r}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(n){var r=this.renderer.gl,i=this.getStackLength();this.maskStack=n;var o=this.getStackLength();o!==i&&(o===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskStack=null},t}(Fi),w4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.glConst=WebGLRenderingContext.SCISSOR_TEST,r}return t.prototype.getStackLength=function(){var n=this.maskStack[this.maskStack.length-1];return n?n._scissorCounter:0},t.prototype.push=function(n){var r=n.maskObject;r.renderable=!0;var i=n._scissorRect,o=r.getBounds(!0),a=this.renderer.gl;r.renderable=!1,i?o.fit(i):a.enable(a.SCISSOR_TEST),n._scissorCounter++,n._scissorRect=o,this._useCurrent()},t.prototype.pop=function(){var n=this.renderer.gl;this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)},t.prototype._useCurrent=function(){var n=this.maskStack[this.maskStack.length-1]._scissorRect,r=this.renderer.renderTexture.current,i=this.renderer.projection,o=i.transform,a=i.sourceFrame,s=i.destinationFrame,u=r?r.resolution:this.renderer.resolution,c=(n.x-a.x)*u+s.x,l=(n.y-a.y)*u+s.y,f=n.width*u,h=n.height*u;o&&(c+=o.tx*u,l+=o.ty*u),r||(l=this.renderer.height-h-l),this.renderer.gl.scissor(c,l,f,h)},t}(S4),A4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.glConst=WebGLRenderingContext.STENCIL_TEST,r}return t.prototype.getStackLength=function(){var n=this.maskStack[this.maskStack.length-1];return n?n._stencilCounter:0},t.prototype.push=function(n){var r=n.maskObject,i=this.renderer.gl,o=n._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),n._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,o,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent()},t.prototype.pop=function(n){var r=this.renderer.gl;this.getStackLength()===0?(r.disable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),r.clearStencil(0)):(r.colorMask(!1,!1,!1,!1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var n=this.renderer.gl;n.colorMask(!0,!0,!0,!0),n.stencilFunc(n.EQUAL,this.getStackLength(),this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(S4),O4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.destinationFrame=null,r.sourceFrame=null,r.defaultFrame=null,r.projectionMatrix=new an,r.transform=null,r}return t.prototype.update=function(n,r,i,o){this.destinationFrame=n||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||n,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,o),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(n,r,i,o){var a=this.projectionMatrix,s=o?-1:1;a.identity(),a.a=1/r.width*2,a.d=s*(1/r.height*2),a.tx=-1-r.x*a.a,a.ty=-s-r.y*a.d},t.prototype.setTransform=function(n){},t}(Fi),gu=new hr,Nd=new hr,Md=new hr,k4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.clearColor=n._backgroundColorRgba,r.defaultMaskStack=[],r.current=null,r.sourceFrame=new hr,r.destinationFrame=new hr,r}return t.prototype.bind=function(n,r,i){n===void 0&&(n=null);var o=this.renderer;this.current=n;var a,s,u;n?(a=n.baseTexture,u=a.resolution,r||(gu.width=n.frame.width,gu.height=n.frame.height,r=gu),i||(Nd.x=n.frame.x,Nd.y=n.frame.y,Nd.width=r.width,Nd.height=r.height,i=Nd),s=a.framebuffer):(u=o.resolution,r||(gu.width=o.screen.width,gu.height=o.screen.height,r=gu),i||(i=gu,i.width=r.width,i.height=r.height)),Md.x=i.x*u,Md.y=i.y*u,Md.width=i.width*u,Md.height=i.height*u,this.renderer.framebuffer.bind(s,Md),this.renderer.projection.update(i,r,u,!s),n?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(n,r){this.current?n=n||this.current.baseTexture.clearColor:n=n||this.clearColor,this.renderer.framebuffer.clear(n[0],n[1],n[2],n[3],r)},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(Fi),Nee=function(){function e(){}return e}(),x4=function(){function e(t,n){this.program=t,this.uniformData=n,this.uniformGroups={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},e}(),Mee=0,cL={textureCount:0},I4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.destroyed=!1,r.systemCheck(),r.gl=null,r.shader=null,r.program=null,r.cache={},r.id=Mee++,r}return t.prototype.systemCheck=function(){if(!Oee())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(n){this.gl=n,this.reset()},t.prototype.bind=function(n,r){n.uniforms.globals=this.renderer.globalUniforms;var i=n.program,o=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(n);return this.shader=n,this.program!==i&&(this.program=i,this.gl.useProgram(o.program)),r||(cL.textureCount=0,this.syncUniformGroup(n.uniformGroup,cL)),o},t.prototype.setUniforms=function(n){var r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,n,this.renderer)},t.prototype.syncUniformGroup=function(n,r){var i=this.getglProgram();(!n.static||n.dirtyId!==i.uniformGroups[n.id])&&(i.uniformGroups[n.id]=n.dirtyId,this.syncUniforms(n,i,r))},t.prototype.syncUniforms=function(n,r,i){var o=n.syncUniforms[this.shader.program.id]||this.createSyncGroups(n);o(r.uniformData,n.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(n){var r=this.getSignature(n,this.shader.program.uniformData);return this.cache[r]||(this.cache[r]=See(n,this.shader.program.uniformData)),n.syncUniforms[this.shader.program.id]=this.cache[r],n.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(n,r){var i=n.uniforms,o=[];for(var a in i)o.push(a),r[a]&&o.push(r[a].type);return o.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(n){var r=this.gl,i=n.program,o={};for(var a in i.attributeData)o[a]=i.attributeData[a].location;var s=g4(r,i.vertexSrc,i.fragmentSrc,o),u={};for(var a in i.uniformData){var c=i.uniformData[a];u[a]={location:r.getUniformLocation(s,a),value:y4(c.type,c.size)}}var l=new x4(s,u);return i.glPrograms[this.renderer.CONTEXT_UID]=l,l},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(Fi);function Lee(e,t){return t===void 0&&(t=[]),t[gt.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.ADD]=[e.ONE,e.ONE],t[gt.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.NONE]=[0,0],t[gt.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[gt.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[gt.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[gt.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[gt.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[gt.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[gt.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[gt.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[gt.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[gt.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[gt.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}var jee=0,Bee=1,Fee=2,Gee=3,Hee=4,C4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.gl=null,r.stateId=0,r.polygonOffset=0,r.blendMode=gt.NONE,r._blendEq=!1,r.map=[],r.map[jee]=r.setBlend,r.map[Bee]=r.setOffset,r.map[Fee]=r.setCullFace,r.map[Gee]=r.setDepthTest,r.map[Hee]=r.setFrontFace,r.checks=[],r.defaultState=new Ql,r.defaultState.blend=!0,r}return t.prototype.contextChange=function(n){this.gl=n,this.blendModes=Lee(n),this.set(this.defaultState),this.reset()},t.prototype.set=function(n){if(n=n||this.defaultState,this.stateId!==n.data){for(var r=this.stateId^n.data,i=0;r;)r&1&&this.map[i].call(this,!!(n.data&1<<i)),r=r>>1,i++;this.stateId=n.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,n)},t.prototype.forceState=function(n){n=n||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(n.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,n);this.stateId=n.data},t.prototype.setBlend=function(n){this.updateCheck(t.checkBlendMode,n),this.gl[n?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(n){this.updateCheck(t.checkPolygonOffset,n),this.gl[n?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(n){this.gl[n?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setCullFace=function(n){this.gl[n?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(n){this.gl.frontFace(this.gl[n?"CW":"CCW"])},t.prototype.setBlendMode=function(n){if(n!==this.blendMode){this.blendMode=n;var r=this.blendModes[n],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(n,r){this.gl.polygonOffset(n,r)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(n,r){var i=this.checks.indexOf(n);r&&i===-1?this.checks.push(n):!r&&i!==-1&&this.checks.splice(i,1)},t.checkBlendMode=function(n,r){n.setBlendMode(r.blendMode)},t.checkPolygonOffset=function(n,r){n.setPolygonOffset(1,r.polygonOffset)},t}(Fi),P4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.count=0,r.checkCount=0,r.maxIdle=ft.GC_MAX_IDLE,r.checkCountMax=ft.GC_MAX_CHECK_COUNT,r.mode=ft.GC_MODE,r}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==$0.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var n=this.renderer.texture,r=n.managedTextures,i=!1,o=0;o<r.length;o++){var a=r[o];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(n.destroyTexture(a,!0),r[o]=null,i=!0)}if(i){for(var s=0,o=0;o<r.length;o++)r[o]!==null&&(r[s++]=r[o]);r.length=s}},t.prototype.unload=function(n){var r=this.renderer.texture,i=n._texture;i&&!i.framebuffer&&r.destroyTexture(i);for(var o=n.children.length-1;o>=0;o--)this.unload(n.children[o])},t}(Fi),qb=function(){function e(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}return e}(),D4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.boundTextures=[],r.currentLocation=-1,r.managedTextures=[],r._unknownBoundTextures=!1,r.unknownTexture=new Rr,r}return t.prototype.contextChange=function(){var n=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var r=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};var o=new qb(n.createTexture());n.bindTexture(n.TEXTURE_2D,o.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[n.TEXTURE_2D]=o,this.emptyTextures[n.TEXTURE_CUBE_MAP]=new qb(n.createTexture()),n.bindTexture(n.TEXTURE_CUBE_MAP,this.emptyTextures[n.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,n.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(n,r){r===void 0&&(r=0);var i=this.gl;if(n){if(n=n.castToBaseTexture(),n.parentTextureArray)return;if(n.valid){n.touched=this.renderer.textureGC.count;var o=n._glTextures[this.CONTEXT_UID]||this.initTexture(n);this.boundTextures[r]!==n&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(n.target,o.texture)),o.dirtyId!==n.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(n)),this.boundTextures[r]=n}}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]=this.unknownTexture},t.prototype.unbind=function(n){var r=this,i=r.gl,o=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<o.length;a++)o[a]===this.unknownTexture&&this.bind(null,a)}for(var a=0;a<o.length;a++)o[a]===n&&(this.currentLocation!==a&&(i.activeTexture(i.TEXTURE0+a),this.currentLocation=a),i.bindTexture(n.target,this.emptyTextures[n.target].texture),o[a]=null)},t.prototype.initTexture=function(n){var r=new qb(this.gl.createTexture());return r.dirtyId=-1,n._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(n),n.on("dispose",this.destroyTexture,this),r},t.prototype.initTextureType=function(n,r){if(r.internalFormat=n.format,r.type=n.type,this.webGLVersion===2){var i=this.renderer.gl;n.type===i.FLOAT&&n.format===i.RGBA&&(r.internalFormat=i.RGBA32F),n.type===nn.HALF_FLOAT&&(r.type=i.HALF_FLOAT),r.type===i.HALF_FLOAT&&n.format===i.RGBA&&(r.internalFormat=i.RGBA16F)}},t.prototype.updateTexture=function(n){var r=n._glTextures[this.CONTEXT_UID];if(r){var i=this.renderer;if(this.initTextureType(n,r),!(n.resource&&n.resource.upload(i,n,r))){var o=n.realWidth,a=n.realHeight,s=i.gl;(r.width!==o||r.height!==a||r.dirtyId<0)&&(r.width=o,r.height=a,s.texImage2D(n.target,0,r.internalFormat,o,a,0,n.format,r.type,null))}n.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(n),r.dirtyId=n.dirtyId}},t.prototype.destroyTexture=function(n,r){var i=this.gl;if(n=n.castToBaseTexture(),n._glTextures[this.CONTEXT_UID]&&(this.unbind(n),i.deleteTexture(n._glTextures[this.CONTEXT_UID].texture),n.off("dispose",this.destroyTexture,this),delete n._glTextures[this.CONTEXT_UID],!r)){var o=this.managedTextures.indexOf(n);o!==-1&&Ku(this.managedTextures,o,1)}},t.prototype.updateTextureStyle=function(n){var r=n._glTextures[this.CONTEXT_UID];r&&((n.mipmap===$f.POW2||this.webGLVersion!==2)&&!n.isPowerOfTwo?r.mipmap=!1:r.mipmap=n.mipmap>=1,this.webGLVersion!==2&&!n.isPowerOfTwo?r.wrapMode=As.CLAMP:r.wrapMode=n.wrapMode,n.resource&&n.resource.style(this.renderer,n,r)||this.setStyle(n,r),r.dirtyStyleId=n.dirtyStyleId)},t.prototype.setStyle=function(n,r){var i=this.gl;if(r.mipmap&&i.generateMipmap(n.target),i.texParameteri(n.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(n.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(n.target,i.TEXTURE_MIN_FILTER,n.scaleMode===Ia.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var o=this.renderer.context.extensions.anisotropicFiltering;if(o&&n.anisotropicLevel>0&&n.scaleMode===Ia.LINEAR){var a=Math.min(n.anisotropicLevel,i.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(n.target,o.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else i.texParameteri(n.target,i.TEXTURE_MIN_FILTER,n.scaleMode===Ia.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(n.target,i.TEXTURE_MAG_FILTER,n.scaleMode===Ia.LINEAR?i.LINEAR:i.NEAREST)},t}(Fi),Uee={FilterSystem:u4,BatchSystem:c4,ContextSystem:h4,FramebufferSystem:p4,GeometrySystem:d4,MaskSystem:E4,ScissorSystem:w4,StencilSystem:A4,ProjectionSystem:O4,RenderTextureSystem:k4,ShaderSystem:I4,StateSystem:C4,TextureGCSystem:P4,TextureSystem:D4},tw=new an,R4=function(e){Gt(t,e);function t(n,r){n===void 0&&(n=Wf.UNKNOWN);var i=e.call(this)||this;return r=Object.assign({},ft.RENDER_OPTIONS,r),r.roundPixels&&(ft.ROUND_PIXELS=r.roundPixels,ze("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),i.options=r,i.type=n,i.screen=new hr(0,0,r.width,r.height),i.view=r.view||document.createElement("canvas"),i.resolution=r.resolution||ft.RESOLUTION,i.transparent=r.transparent,i.autoDensity=r.autoDensity||r.autoResize||!1,i.preserveDrawingBuffer=r.preserveDrawingBuffer,i.clearBeforeRender=r.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=r.backgroundColor||i._backgroundColor,i._lastObjectRendered=null,i.plugins={},i}return t.prototype.initPlugins=function(n){for(var r in n)this.plugins[r]=new n[r](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(n,r){this.screen.width=n,this.screen.height=r,this.view.width=n*this.resolution,this.view.height=r*this.resolution,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},t.prototype.generateTexture=function(n,r,i,o){o=o||n.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var a=lc.create({width:o.width|0,height:o.height|0,scaleMode:r,resolution:i});return tw.tx=-o.x,tw.ty=-o.y,this.render(n,a,!1,tw,!!n.parent),a},t.prototype.destroy=function(n){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;n&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=Wf.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(n){this._backgroundColor=n,this._backgroundColorString=qP(n),ac(n,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),t}(Wp),Hs=function(e){Gt(t,e);function t(n){var r=e.call(this,Wf.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Nn("destroy"),contextChange:new Nn("contextChange"),reset:new Nn("reset"),update:new Nn("update"),postrender:new Nn("postrender"),prerender:new Nn("prerender"),resize:new Nn("resize")},r.globalUniforms=new Fl({projectionMatrix:new an},!0),r.addSystem(E4,"mask").addSystem(h4,"context").addSystem(C4,"state").addSystem(I4,"shader").addSystem(D4,"texture").addSystem(d4,"geometry").addSystem(p4,"framebuffer").addSystem(w4,"scissor").addSystem(A4,"stencil").addSystem(O4,"projection").addSystem(P4,"textureGC").addSystem(u4,"filter").addSystem(k4,"renderTexture").addSystem(c4,"batch"),r.initPlugins(t.__plugins),n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:n.antialias,premultipliedAlpha:r.transparent&&r.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,NU(r.context.webGLVersion===2?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return t.create=function(n){if(MU())return new t(n);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.addSystem=function(n,r){r||(r=n.name);var i=new n(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');this[r]=i;for(var o in this.runners)this.runners[o].add(i);return this},t.prototype.render=function(n,r,i,o,a){if(this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(r||(this._lastObjectRendered=n),!a){var s=n.enableTempParent();n.updateTransform(),n.disableTempParent(s)}this.renderTexture.bind(r),this.batch.currentRenderer.start(),(i!==void 0?i:this.clearBeforeRender)&&this.renderTexture.clear(),n.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.resize=function(n,r){e.prototype.resize.call(this,n,r),this.runners.resize.emit(n,r)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(n){this.runners.destroy.emit();for(var r in this.runners)this.runners[r].destroy();e.prototype.destroy.call(this,n),this.gl=null},t.registerPlugin=function(n,r){t.__plugins=t.__plugins||{},t.__plugins[n]=r},t}(R4);function N4(e){return Hs.create(e)}var M4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,lD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Z0=function(){function e(){this.texArray=null,this.blend=0,this.type=To.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),J0=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},e}(),L4=function(){function e(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(t){return this[t+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},e}(),j4=function(e){Gt(t,e);function t(n){var r=e.call(this,n)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Ql.for2d(),r.size=ft.SPRITE_BATCH_SIZE*4,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),n.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return t.prototype.contextChange=function(){var n=this.renderer.gl;ft.PREFER_ENV===Ba.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),ft.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=_4(this.MAX_TEXTURES,n)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var n=t._drawCallPool,r=t._textureArrayPool,i=this.size/4,o=Math.floor(i/this.MAX_TEXTURES)+1;n.length<i;)n.push(new Z0);for(;r.length<o;)r.push(new J0);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(n){n._texture.valid&&(this._vertexCount+n.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=n.vertexData.length/2,this._indexCount+=n.indices.length,this._bufferedTextures[this._bufferSize]=n._texture.baseTexture,this._bufferedElements[this._bufferSize++]=n)},t.prototype.buildTexturesAndDrawCalls=function(){var n=this,r=n._bufferedTextures,i=n.MAX_TEXTURES,o=t._textureArrayPool,a=this.renderer.batch,s=this._tempBoundTextures,u=this.renderer.textureGC.count,c=++Rr._globalBatch,l=0,f=o[0],h=0;a.copyBoundTextures(s,i);for(var p=0;p<this._bufferSize;++p){var d=r[p];r[p]=null,d._batchEnabled!==c&&(f.count>=i&&(a.boundArray(f,s,c,i),this.buildDrawCalls(f,h,p),h=p,f=o[++l],++c),d._batchEnabled=c,d.touched=u,f.elements[f.count++]=d)}f.count>0&&(a.boundArray(f,s,c,i),this.buildDrawCalls(f,h,this._bufferSize),++l,++c);for(var p=0;p<s.length;p++)s[p]=null;Rr._globalBatch=c},t.prototype.buildDrawCalls=function(n,r,i){var o=this,a=o._bufferedElements,s=o._attributeBuffer,u=o._indexBuffer,c=o.vertexSize,l=t._drawCallPool,f=this._dcIndex,h=this._aIndex,p=this._iIndex,d=l[f];d.start=this._iIndex,d.texArray=n;for(var m=r;m<i;++m){var g=a[m],v=g._texture.baseTexture,b=KP[v.alphaMode?1:0][g.blendMode];a[m]=null,r<m&&d.blend!==b&&(d.size=p-d.start,r=m,d=l[++f],d.texArray=n,d.start=p),this.packInterleavedGeometry(g,s,u,h,p),h+=g.vertexData.length/2*c,p+=g.indices.length,d.blend=b}r<i&&(d.size=p-d.start,++f),this._dcIndex=f,this._aIndex=h,this._iIndex=p},t.prototype.bindAndClearTexArray=function(n){for(var r=this.renderer.texture,i=0;i<n.count;i++)r.bind(n.elements[i],n.ids[i]),n.elements[i]=null;n.count=0},t.prototype.updateGeometry=function(){var n=this,r=n._packedGeometries,i=n._attributeBuffer,o=n._indexBuffer;ft.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var n=this._dcIndex,r=this.renderer,i=r.gl,o=r.state,a=t._drawCallPool,s=null,u=0;u<n;u++){var c=a[u],l=c.texArray,f=c.type,h=c.size,p=c.start,d=c.blend;s!==l&&(s=l,this.bindAndClearTexArray(l)),this.state.blendMode=d,o.set(this.state),i.drawElements(f,h,i.UNSIGNED_SHORT,p*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),ft.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]&&this._packedGeometries[n].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(n){var r=Hg(Math.ceil(n/8)),i=$O(r),o=r*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._aBuffers[o];return a||(this._aBuffers[o]=a=new L4(o*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(n){var r=Hg(Math.ceil(n/12)),i=$O(r),o=r*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._iBuffers[i];return a||(this._iBuffers[i]=a=new Uint16Array(o)),a},t.prototype.packInterleavedGeometry=function(n,r,i,o,a){for(var s=r.uint32View,u=r.float32View,c=o/this.vertexSize,l=n.uvs,f=n.indices,h=n.vertexData,p=n._texture.baseTexture._batchLocation,d=Math.min(n.worldAlpha,1),m=d<1&&n._texture.baseTexture.alphaMode?PE(n._tintRGB,d):n._tintRGB+(d*255<<24),g=0;g<h.length;g+=2)u[o++]=h[g],u[o++]=h[g+1],u[o++]=l[g],u[o++]=l[g+1],s[o++]=m,u[o++]=p;for(var g=0;g<f.length;g++)i[a++]=c+f[g]},t._drawCallPool=[],t._textureArrayPool=[],t}(Oy),B4=function(){function e(t,n){if(this.vertexSrc=t,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},n.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(n.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(t){if(!this.programCache[t]){for(var n=new Int32Array(t),r=0;r<t;r++)n[r]=r;this.defaultGroupCache[t]=Fl.from({uSamplers:n},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+t),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ky(this.vertexSrc,i)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new an,default:this.defaultGroupCache[t]};return new ql(this.programCache[t],o)},e.prototype.generateSampleSrc=function(t){var n="";n+=`
`,n+=`
`;for(var r=0;r<t;r++)r>0&&(n+=`
else `),r<t-1&&(n+="if(vTextureId < "+r+".5)"),n+=`
{`,n+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",n+=`
}`;return n+=`
`,n+=`
`,n},e}(),uD=function(e){Gt(t,e);function t(n){n===void 0&&(n=!1);var r=e.call(this)||this;return r._buffer=new Sn(null,n,!1),r._indexBuffer=new Sn(null,n,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,nn.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,nn.FLOAT).addAttribute("aColor",r._buffer,4,!0,nn.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,nn.FLOAT).addIndex(r._indexBuffer),r}return t}(qp),hL=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,fL=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,F4=function(){function e(){}return e.create=function(t){var n=Object.assign({vertex:hL,fragment:fL,geometryClass:uD,vertexSize:6},t),r=n.vertex,i=n.fragment,o=n.vertexSize,a=n.geometryClass;return function(s){Gt(u,s);function u(c){var l=s.call(this,c)||this;return l.shaderGenerator=new B4(r,i),l.geometryClass=a,l.vertexSize=o,l}return u}(j4)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return hL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return fL},enumerable:!1,configurable:!0}),e}(),G4=F4.create();/*!
 * @pixi/app - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xy=function(){function e(t){var n=this;t=Object.assign({forceCanvas:!1},t),this.renderer=N4(t),this.stage=new Zo,e._plugins.forEach(function(r){r.init.call(n,t)})}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,n){var r=this,i=e._plugins.slice(0);i.reverse(),i.forEach(function(o){o.destroy.call(r)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null},e}();xy._plugins=[];var zee=function(){function e(){}return e.init=function(t){var n=this;Object.defineProperty(this,"resizeTo",{set:function(r){window.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){n._resizeTo&&(n.cancelResize(),n._resizeId=requestAnimationFrame(function(){return n.resize()}))},this.cancelResize=function(){n._resizeId&&(cancelAnimationFrame(n._resizeId),n._resizeId=null)},this.resize=function(){if(n._resizeTo){n.cancelResize();var r,i;if(n._resizeTo===window)r=window.innerWidth,i=window.innerHeight;else{var o=n._resizeTo,a=o.clientWidth,s=o.clientHeight;r=a,i=s}n.renderer.resize(r,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},e.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();xy.registerPlugin(zee);/*!
 * @pixi/extract - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var pL=new hr,dL=4,H4=function(){function e(t){this.renderer=t,t.extract=this}return e.prototype.image=function(t,n,r){var i=new Image;return i.src=this.base64(t,n,r),i},e.prototype.base64=function(t,n,r){return this.canvas(t).toDataURL(n,r)},e.prototype.canvas=function(t){var n=this.renderer,r,i,o=!1,a,s=!1;t&&(t instanceof lc?a=t:(a=this.renderer.generateTexture(t),s=!0)),a?(r=a.baseTexture.resolution,i=a.frame,o=!1,n.renderTexture.bind(a)):(r=this.renderer.resolution,o=!0,i=pL,i.width=this.renderer.width,i.height=this.renderer.height,n.renderTexture.bind(null));var u=Math.floor(i.width*r+1e-4),c=Math.floor(i.height*r+1e-4),l=new QO(u,c,1),f=new Uint8Array(dL*u*c),h=n.gl;h.readPixels(i.x*r,i.y*r,u,c,h.RGBA,h.UNSIGNED_BYTE,f);var p=l.context.getImageData(0,0,u,c);if(e.arrayPostDivide(f,p.data),l.context.putImageData(p,0,0),o){var d=new QO(l.width,l.height,1);d.context.scale(1,-1),d.context.drawImage(l.canvas,0,-c),l.destroy(),l=d}return s&&a.destroy(!0),l.canvas},e.prototype.pixels=function(t){var n=this.renderer,r,i,o,a=!1;t&&(t instanceof lc?o=t:(o=this.renderer.generateTexture(t),a=!0)),o?(r=o.baseTexture.resolution,i=o.frame,n.renderTexture.bind(o)):(r=n.resolution,i=pL,i.width=n.width,i.height=n.height,n.renderTexture.bind(null));var s=i.width*r,u=i.height*r,c=new Uint8Array(dL*s*u),l=n.gl;return l.readPixels(i.x*r,i.y*r,s,u,l.RGBA,l.UNSIGNED_BYTE,c),a&&o.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.arrayPostDivide=function(t,n){for(var r=0;r<t.length;r+=4){var i=n[r+3]=t[r+3];i!==0?(n[r]=Math.round(Math.min(t[r]*255/i,255)),n[r+1]=Math.round(Math.min(t[r+1]*255/i,255)),n[r+2]=Math.round(Math.min(t[r+2]*255/i,255))):(n[r]=t[r],n[r+1]=t[r+1],n[r+2]=t[r+2])}},e}(),Vee=(e,t={})=>{if(!e)return;const n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[t.strictMode?"strict":"loose"].exec(e),i={};let o=14;for(;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(a,s,u){s&&(i[n.q.name][s]=u)}),i};const U4=WP(Vee);class Uv{constructor(t,n=!1,r){this._fn=t,this._once=n,this._thisArg=r,this._next=this._prev=this._owner=null}detach(){return this._owner===null?!1:(this._owner.detach(this),!0)}}function mL(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}class ps{constructor(){this._head=this._tail=void 0}handlers(t=!1){let n=this._head;if(t)return!!n;const r=[];for(;n;)r.push(n),n=n._next;return r}has(t){if(!(t instanceof Uv))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}dispatch(){let t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}add(t,n=null){if(typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return mL(this,new Uv(t,!1,n))}once(t,n=null){if(typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return mL(this,new Uv(t,!0,n))}detach(t){if(!(t instanceof Uv))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}detachAll(){let t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function yu(){}function gL(e,t,n,r){var i=0,o=e.length;(function a(s){if(s||i===o){n&&n(s);return}setTimeout(function(){t(e[i++],a)},1)})()}function Yee(e){return function(){if(e===null)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function Xee(e,t){if(t==null)t=1;else if(t===0)throw new Error("Concurrency must not be zero");var n=0,r={_tasks:[],concurrency:t,saturated:yu,unsaturated:yu,buffer:t/4,empty:yu,drain:yu,error:yu,started:!1,paused:!1,push:function(a,s){i(a,!1,s)},kill:function(){n=0,r.drain=yu,r.started=!1,r._tasks=[]},unshift:function(a,s){i(a,!0,s)},process:function(){for(;!r.paused&&n<r.concurrency&&r._tasks.length;){var a=r._tasks.shift();r._tasks.length===0&&r.empty(),n+=1,n===r.concurrency&&r.saturated(),e(a.data,Yee(o(a)))}},length:function(){return r._tasks.length},running:function(){return n},idle:function(){return r._tasks.length+n===0},pause:function(){r.paused!==!0&&(r.paused=!0)},resume:function(){if(r.paused!==!1){r.paused=!1;for(var a=1;a<=r.concurrency;a++)r.process()}}};function i(a,s,u){if(u!=null&&typeof u!="function")throw new Error("task callback must be a function");if(r.started=!0,a==null&&r.idle()){setTimeout(function(){return r.drain()},1);return}var c={data:a,callback:typeof u=="function"?u:yu};s?r._tasks.unshift(c):r._tasks.push(c),setTimeout(function(){return r.process()},1)}function o(a){return function(){n-=1,a.callback.apply(a,arguments),arguments[0]!=null&&r.error(arguments[0],a.data),n<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r}function Wee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z4(e,t,n){return t&&Wee(e.prototype,t),e}var qee=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),zv=null,$ee=0,yL=200,Kee=204,Qee=1223,Zee=2;function Jee(){}var yt=function(){e.setExtensionLoadType=function(n,r){vL(e._loadTypeMap,n,r)},e.setExtensionXhrType=function(n,r){vL(e._xhrTypeMap,n,r)};function e(n,r,i){if(typeof n!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=n,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Jee,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new ps,this.onProgress=new ps,this.onComplete=new ps,this.onAfterMiddleware=new ps}var t=e.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(n){if(!this.error){if(this.error=new Error(n),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(n){var r=this;if(!this.isLoading){if(this.isComplete){n&&setTimeout(function(){return n(r)},1);return}else n&&this.onComplete.once(n);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:qee&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t._hasFlag=function(n){return(this._flags&n)!==0},t._setFlag=function(n,r){this._flags=r?this._flags|n:this._flags&~n},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(n){this.metadata.loadElement?this.data=this.metadata.loadElement:n==="image"&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(n),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(n){if(this.metadata.loadElement?this.data=this.metadata.loadElement:n==="audio"&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(n),this.data===null){this.abort("Unsupported element: "+n);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(n,this.url[i],Array.isArray(r)?r[i]:r));else{var o=this.metadata.mimeType;this.data.appendChild(this._createSource(n,this.url,Array.isArray(o)?o[0]:o))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var n=this.xhr=new XMLHttpRequest;n.open("GET",this.url,!0),n.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?n.responseType=e.XHR_RESPONSE_TYPE.TEXT:n.responseType=this.xhrType,n.addEventListener("error",this._boundXhrOnError,!1),n.addEventListener("timeout",this._boundXhrOnTimeout,!1),n.addEventListener("abort",this._boundXhrOnAbort,!1),n.addEventListener("progress",this._boundOnProgress,!1),n.addEventListener("load",this._boundXhrOnLoad,!1),n.send()},t._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var n=this.xhr=new XDomainRequest;n.timeout=this.timeout||5e3,n.onerror=this._boundXhrOnError,n.ontimeout=this._boundXhrOnTimeout,n.onprogress=this._boundOnProgress,n.onload=this._boundXhrOnLoad,n.open("GET",this.url,!0),setTimeout(function(){return n.send()},1)},t._createSource=function(n,r,i){i||(i=n+"/"+this._getExtension(r));var o=document.createElement("source");return o.src=r,o.type=i,o},t._onError=function(n){this.abort("Failed to load element using: "+n.target.nodeName)},t._onProgress=function(n){n&&n.lengthComputable&&this.onProgress.dispatch(this,n.loaded/n.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var n=this.xhr;this.abort(rw(n)+" Request failed. Status: "+n.status+', text: "'+n.statusText+'"')},t._xhrOnTimeout=function(){var n=this.xhr;this.abort(rw(n)+" Request timed out.")},t._xhrOnAbort=function(){var n=this.xhr;this.abort(rw(n)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var n=this.xhr,r="",i=typeof n.status>"u"?yL:n.status;(n.responseType===""||n.responseType==="text"||typeof n.responseType>"u")&&(r=n.responseText),i===$ee&&(r.length>0||n.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?i=yL:i===Qee&&(i=Kee);var o=i/100|0;if(o===Zee)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(u){this.abort("Error trying to parse loaded json: "+u);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,"text/xml")}else{var s=document.createElement("div");s.innerHTML=r,this.data=s}this.type=e.TYPE.XML}catch(u){this.abort("Error trying to parse loaded xml: "+u);return}else this.data=n.response||r;else{this.abort("["+n.status+"] "+n.statusText+": "+n.responseURL);return}this.complete()},t._determineCrossOrigin=function(n,r){if(n.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";r=r||window.location,zv||(zv=document.createElement("a")),zv.href=n,n=U4(zv.href,{strictMode:!0});var i=!n.port&&r.port===""||n.port===r.port,o=n.protocol?n.protocol+":":"";return n.host!==r.hostname||!i||o!==r.protocol?"anonymous":""},t._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},t._getExtension=function(){var n=this.url,r="";if(this.isDataUrl){var i=n.indexOf("/");r=n.substring(i+1,n.indexOf(";",i))}else{var o=n.indexOf("?"),a=n.indexOf("#"),s=Math.min(o>-1?o:n.length,a>-1?a:n.length);n=n.substring(0,s),r=n.substring(n.lastIndexOf(".")+1)}return r.toLowerCase()},t._getMimeFromXhrType=function(n){switch(n){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},z4(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();yt.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};yt.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};yt.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};yt.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};yt._loadTypeMap={gif:yt.LOAD_TYPE.IMAGE,png:yt.LOAD_TYPE.IMAGE,bmp:yt.LOAD_TYPE.IMAGE,jpg:yt.LOAD_TYPE.IMAGE,jpeg:yt.LOAD_TYPE.IMAGE,tif:yt.LOAD_TYPE.IMAGE,tiff:yt.LOAD_TYPE.IMAGE,webp:yt.LOAD_TYPE.IMAGE,tga:yt.LOAD_TYPE.IMAGE,svg:yt.LOAD_TYPE.IMAGE,"svg+xml":yt.LOAD_TYPE.IMAGE,mp3:yt.LOAD_TYPE.AUDIO,ogg:yt.LOAD_TYPE.AUDIO,wav:yt.LOAD_TYPE.AUDIO,mp4:yt.LOAD_TYPE.VIDEO,webm:yt.LOAD_TYPE.VIDEO};yt._xhrTypeMap={xhtml:yt.XHR_RESPONSE_TYPE.DOCUMENT,html:yt.XHR_RESPONSE_TYPE.DOCUMENT,htm:yt.XHR_RESPONSE_TYPE.DOCUMENT,xml:yt.XHR_RESPONSE_TYPE.DOCUMENT,tmx:yt.XHR_RESPONSE_TYPE.DOCUMENT,svg:yt.XHR_RESPONSE_TYPE.DOCUMENT,tsx:yt.XHR_RESPONSE_TYPE.DOCUMENT,gif:yt.XHR_RESPONSE_TYPE.BLOB,png:yt.XHR_RESPONSE_TYPE.BLOB,bmp:yt.XHR_RESPONSE_TYPE.BLOB,jpg:yt.XHR_RESPONSE_TYPE.BLOB,jpeg:yt.XHR_RESPONSE_TYPE.BLOB,tif:yt.XHR_RESPONSE_TYPE.BLOB,tiff:yt.XHR_RESPONSE_TYPE.BLOB,webp:yt.XHR_RESPONSE_TYPE.BLOB,tga:yt.XHR_RESPONSE_TYPE.BLOB,json:yt.XHR_RESPONSE_TYPE.JSON,text:yt.XHR_RESPONSE_TYPE.TEXT,txt:yt.XHR_RESPONSE_TYPE.TEXT,ttf:yt.XHR_RESPONSE_TYPE.BUFFER,otf:yt.XHR_RESPONSE_TYPE.BUFFER};yt.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function vL(e,t,n){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(e[t]=n)}function rw(e){return e.toString().replace("object ","")}var ete="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function tte(e){for(var t="",n=0;n<e.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)n<e.length?r[o]=e.charCodeAt(n++)&255:r[o]=0;i[0]=r[0]>>2,i[1]=(r[0]&3)<<4|r[1]>>4,i[2]=(r[1]&15)<<2|r[2]>>6,i[3]=r[2]&63;var a=n-(e.length-1);switch(a){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var s=0;s<i.length;++s)t+=ete.charAt(i[s])}return t}var bL=window.URL||window.webkitURL;function rte(e,t){if(!e.data){t();return}if(e.xhr&&e.xhrType===yt.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof e.data=="string"){var n=e.xhr.getResponseHeader("content-type");if(n&&n.indexOf("image")===0){e.data=new Image,e.data.src="data:"+n+";base64,"+tte(e.xhr.responseText),e.type=yt.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,t()};return}}else if(e.data.type.indexOf("image")===0){var r=bL.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=r,e.type=yt.TYPE.IMAGE,e.data.onload=function(){bL.revokeObjectURL(r),e.data.onload=null,t()};return}}t()}var nte={parsing:rte},nw=100,ite=/(#[\w-]+)?$/,Os=function(){function e(n,r){var i=this;n===void 0&&(n=""),r===void 0&&(r=10),this.baseUrl=n,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(s,u){return i._loadResource(s,u)},this._queue=Xee(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new ps,this.onError=new ps,this.onLoad=new ps,this.onStart=new ps,this.onComplete=new ps;for(var o=0;o<e._defaultBeforeMiddleware.length;++o)this.pre(e._defaultBeforeMiddleware[o]);for(var a=0;a<e._defaultAfterMiddleware.length;++a)this.use(e._defaultAfterMiddleware[a])}var t=e.prototype;return t.add=function(n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;++a)this.add(n[a]);return this}if(typeof n=="object"&&(o=r||n.callback||n.onComplete,i=n,r=n.url,n=n.name||n.key||n.url),typeof r!="string"&&(o=i,i=r,r=n),typeof r!="string")throw new Error("No url passed to add resource to loader.");if(typeof i=="function"&&(o=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[n])throw new Error('Resource named "'+n+'" already exists.');if(r=this._prepareUrl(r),this.resources[n]=new yt(n,r,i),typeof o=="function"&&this.resources[n].onAfterMiddleware.once(o),this.loading){for(var s=i.parentResource,u=[],c=0;c<s.children.length;++c)s.children[c].isComplete||u.push(s.children[c]);var l=s.progressChunk*(u.length+1),f=l/(u.length+2);s.children.push(this.resources[n]),s.progressChunk=f;for(var h=0;h<u.length;++h)u[h].progressChunk=f;this.resources[n].progressChunk=f}return this._queue.push(this.resources[n]),this},t.pre=function(n){return this._beforeMiddleware.push(n),this},t.use=function(n){return this._afterMiddleware.push(n),this},t.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var n in this.resources){var r=this.resources[n];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort()}return this.resources={},this},t.load=function(n){if(typeof n=="function"&&this.onComplete.once(n),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,i=nw/r,o=0;o<this._queue._tasks.length;++o)this._queue._tasks[o].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(n){var r=U4(n,{strictMode:!0}),i;if(r.protocol||!r.path||n.indexOf("//")===0?i=n:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&n.charAt(0)!=="/"?i=this.baseUrl+"/"+n:i=this.baseUrl+n,this.defaultQueryString){var o=ite.exec(i)[0];i=i.substr(0,i.length-o.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=o}return i},t._loadResource=function(n,r){var i=this;n._dequeue=r,gL(this._beforeMiddleware,function(o,a){o.call(i,n,function(){a(n.isComplete?{}:null)})},function(){n.isComplete?i._onLoad(n):(n._onLoadBinding=n.onComplete.once(i._onLoad,i),n.load())})},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=nw,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(n){var r=this;n._onLoadBinding=null,this._resourcesParsing.push(n),n._dequeue(),gL(this._afterMiddleware,function(i,o){i.call(r,n,o)},function(){n.onAfterMiddleware.dispatch(n),r.progress=Math.min(nw,r.progress+n.progressChunk),r.onProgress.dispatch(r,n),n.error?r.onError.dispatch(n.error,r,n):r.onLoad.dispatch(r,n),r._resourcesParsing.splice(r._resourcesParsing.indexOf(n),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()})},z4(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(n){this._queue.concurrency=n}}]),e}();Os._defaultBeforeMiddleware=[];Os._defaultAfterMiddleware=[];Os.pre=function(e){return Os._defaultBeforeMiddleware.push(e),Os};Os.use=function(e){return Os._defaultAfterMiddleware.push(e),Os};/*!
 * @pixi/loaders - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Wm=yt;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ik=function(e,t){return ik=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ik(e,t)};function ote(e,t){ik(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var V4=function(){function e(){}return e.use=function(t,n){t.data&&t.type===yt.TYPE.IMAGE&&(t.texture=xt.fromLoader(t.data,t.url,t.name)),n()},e}(),uc=function(e){ote(t,e);function t(n,r){for(var i=e.call(this,n,r)||this,o=0;o<t._plugins.length;++o){var a=t._plugins[o],s=a.pre,u=a.use;s&&i.pre(s),u&&i.use(u)}return i._protected=!1,i}return t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var n=t._shared;return n||(n=new t,n._protected=!0,t._shared=n),n},enumerable:!1,configurable:!0}),t.registerPlugin=function(n){return t._plugins.push(n),n.add&&n.add(),t},t._plugins=[],t}(Os);uc.registerPlugin({use:nte.parsing});uc.registerPlugin(V4);var Y4=function(){function e(){}return e.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?uc.shared:new uc},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}();/*!
 * @pixi/particles - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ok=function(e,t){return ok=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ok(e,t)};function X4(e,t){ok(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ate=function(e){X4(t,e);function t(n,r,i,o){n===void 0&&(n=1500),i===void 0&&(i=16384),o===void 0&&(o=!1);var a=e.call(this)||this,s=16384;return i>s&&(i=s),a._properties=[!1,!0,!1,!1,!1],a._maxSize=n,a._batchSize=i,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=gt.NORMAL,a.autoResize=o,a.roundPixels=!0,a.baseTexture=null,a.setProperties(r),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return t.prototype.setProperties=function(n){n&&(this._properties[0]="vertices"in n||"scale"in n?!!n.vertices||!!n.scale:this._properties[0],this._properties[1]="position"in n?!!n.position:this._properties[1],this._properties[2]="rotation"in n?!!n.rotation:this._properties[2],this._properties[3]="uvs"in n?!!n.uvs:this._properties[3],this._properties[4]="tint"in n||"alpha"in n?!!n.tint||!!n.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(n){this._tint=n,ac(n,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(n){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),n.batch.setObjectRenderer(n.plugins.particle),n.plugins.particle.render(this))},t.prototype.onChildrenChange=function(n){for(var r=Math.floor(n/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var n=0;n<this._buffers.length;++n)this._buffers[n].destroy();this._buffers=null}},t.prototype.destroy=function(n){e.prototype.destroy.call(this,n),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(Zo),_L=function(){function e(t,n,r){this.geometry=new qp,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||nn.FLOAT,offset:o.offset},n[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var t=this.geometry,n=0;this.indexBuffer=new Sn(jU(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];i.offset=n,n+=i.size,this.dynamicStride+=i.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Sn(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var r=0;r<this.staticProperties.length;++r){var i=this.staticProperties[r];i.offset=a,a+=i.size,this.staticStride+=i.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Sn(this.staticData,!0,!1);for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];t.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===nn.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var r=0;r<this.staticProperties.length;++r){var i=this.staticProperties[r];t.addAttribute(i.attributeName,this.staticBuffer,0,i.type===nn.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},e.prototype.uploadDynamic=function(t,n,r){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,n,r,o.type===nn.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(t,n,r){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,n,r,o.type===nn.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),ste=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,lte=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,W4=function(e){X4(t,e);function t(n){var r=e.call(this,n)||this;return r.shader=null,r.properties=null,r.tempMatrix=new an,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:nn.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=ql.from(lte,ste,{}),r.state=Ql.for2d(),r}return t.prototype.render=function(n){var r=n.children,i=n._maxSize,o=n._batchSize,a=this.renderer,s=r.length;if(s!==0){s>i&&!n.autoResize&&(s=i);var u=n._buffers;u||(u=n._buffers=this.generateBuffers(n));var c=r[0]._texture.baseTexture;this.state.blendMode=QP(n.blendMode,c.alphaMode),a.state.set(this.state);var l=a.gl,f=n.worldTransform.copyTo(this.tempMatrix);f.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=LU(n.tintRgb,n.worldAlpha,this.shader.uniforms.uColor,c.alphaMode),this.shader.uniforms.uSampler=c,this.renderer.shader.bind(this.shader);for(var h=!1,p=0,d=0;p<s;p+=o,d+=1){var m=s-p;m>o&&(m=o),d>=u.length&&u.push(this._generateOneMoreBuffer(n));var g=u[d];g.uploadDynamic(r,p,m);var v=n._bufferUpdateIDs[d]||0;h=h||g._updateID<v,h&&(g._updateID=n._updateID,g.uploadStatic(r,p,m)),a.geometry.bind(g.geometry),l.drawElements(l.TRIANGLES,m*6,l.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(n){for(var r=[],i=n._maxSize,o=n._batchSize,a=n._properties,s=0;s<i;s+=o)r.push(new _L(this.properties,a,o));return r},t.prototype._generateOneMoreBuffer=function(n){var r=n._batchSize,i=n._properties;return new _L(this.properties,i,r)},t.prototype.uploadVertices=function(n,r,i,o,a,s){for(var u=0,c=0,l=0,f=0,h=0;h<i;++h){var p=n[r+h],d=p._texture,m=p.scale.x,g=p.scale.y,v=d.trim,b=d.orig;v?(c=v.x-p.anchor.x*b.width,u=c+v.width,f=v.y-p.anchor.y*b.height,l=f+v.height):(u=b.width*(1-p.anchor.x),c=b.width*-p.anchor.x,l=b.height*(1-p.anchor.y),f=b.height*-p.anchor.y),o[s]=c*m,o[s+1]=f*g,o[s+a]=u*m,o[s+a+1]=f*g,o[s+a*2]=u*m,o[s+a*2+1]=l*g,o[s+a*3]=c*m,o[s+a*3+1]=l*g,s+=a*4}},t.prototype.uploadPosition=function(n,r,i,o,a,s){for(var u=0;u<i;u++){var c=n[r+u].position;o[s]=c.x,o[s+1]=c.y,o[s+a]=c.x,o[s+a+1]=c.y,o[s+a*2]=c.x,o[s+a*2+1]=c.y,o[s+a*3]=c.x,o[s+a*3+1]=c.y,s+=a*4}},t.prototype.uploadRotation=function(n,r,i,o,a,s){for(var u=0;u<i;u++){var c=n[r+u].rotation;o[s]=c,o[s+a]=c,o[s+a*2]=c,o[s+a*3]=c,s+=a*4}},t.prototype.uploadUvs=function(n,r,i,o,a,s){for(var u=0;u<i;++u){var c=n[r+u]._texture._uvs;c?(o[s]=c.x0,o[s+1]=c.y0,o[s+a]=c.x1,o[s+a+1]=c.y1,o[s+a*2]=c.x2,o[s+a*2+1]=c.y2,o[s+a*3]=c.x3,o[s+a*3+1]=c.y3,s+=a*4):(o[s]=0,o[s+1]=0,o[s+a]=0,o[s+a+1]=0,o[s+a*2]=0,o[s+a*2+1]=0,o[s+a*3]=0,o[s+a*3+1]=0,s+=a*4)}},t.prototype.uploadTint=function(n,r,i,o,a,s){for(var u=0;u<i;++u){var c=n[r+u],l=c._texture.baseTexture.alphaMode>0,f=c.alpha,h=f<1&&l?PE(c._tintRGB,f):c._tintRGB+(f*255<<24);o[s]=h,o[s+a]=h,o[s+a*2]=h,o[s+a*3]=h,s+=a*4}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(Oy);/*!
 * @pixi/graphics - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ds;(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(ds||(ds={}));var ms;(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})(ms||(ms={}));var Zf={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(t===void 0&&(t=20),!this.adaptive||!e||isNaN(e))return t;var n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},cD=function(){function e(){this.color=16777215,this.alpha=1,this.texture=xt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=xt.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ak=function(e,t){return ak=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ak(e,t)};function ME(e,t){ak(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var hD={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var n=e.points,r=e.holes,i=t.points,o=t.indices;if(n.length>=6){for(var a=[],s=0;s<r.length;s++){var u=r[s];a.push(n.length/2),n=n.concat(u.points)}var c=XP(n,a,2);if(!c)return;for(var l=i.length/2,s=0;s<c.length;s+=3)o.push(c[s]+l),o.push(c[s+1]+l),o.push(c[s+2]+l);for(var s=0;s<n.length;s++)i.push(n[s])}}},sk={build:function(e){var t=e.shape,n=e.points,r=t.x,i=t.y,o,a;if(n.length=0,e.type===Wr.CIRC)o=t.radius,a=t.radius;else{var s=e.shape;o=s.width,a=s.height}if(!(o===0||a===0)){var u=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(o+a));u/=2.3;for(var c=Math.PI*2/u,l=0;l<u-.5;l++)n.push(r+Math.sin(-c*l)*o,i+Math.cos(-c*l)*a);n.push(n[0],n[1])}},triangulate:function(e,t){var n=e.points,r=t.points,i=t.indices,o=r.length/2,a=o,s=e.shape,u=e.matrix,c=s.x,l=s.y;r.push(e.matrix?u.a*c+u.c*l+u.tx:c,e.matrix?u.b*c+u.d*l+u.ty:l);for(var f=0;f<n.length;f+=2)r.push(n[f],n[f+1]),i.push(o++,a,o)}},q4={build:function(e){var t=e.shape,n=t.x,r=t.y,i=t.width,o=t.height,a=e.points;a.length=0,a.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(e,t){var n=e.points,r=t.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function gh(e,t,n){var r=t-e;return e+r*n}function Vv(e,t,n,r,i,o,a){a===void 0&&(a=[]);for(var s=20,u=a,c=0,l=0,f=0,h=0,p=0,d=0,m=0,g=0;m<=s;++m)g=m/s,c=gh(e,n,g),l=gh(t,r,g),f=gh(n,i,g),h=gh(r,o,g),p=gh(c,f,g),d=gh(l,h,g),u.push(p,d);return u}var $4={build:function(e){var t=e.shape,n=e.points,r=t.x,i=t.y,o=t.width,a=t.height,s=Math.max(0,Math.min(t.radius,Math.min(o,a)/2));n.length=0,s?(Vv(r,i+s,r,i,r+s,i,n),Vv(r+o-s,i,r+o,i,r+o,i+s,n),Vv(r+o,i+a-s,r+o,i+a,r+o-s,i+a,n),Vv(r+s,i+a,r,i+a,r,i+a-s,n)):n.push(r,i,r+o,i,r+o,i+a,r,i+a)},triangulate:function(e,t){for(var n=e.points,r=t.points,i=t.indices,o=r.length/2,a=XP(n,null,2),s=0,u=a.length;s<u;s+=3)i.push(a[s]+o),i.push(a[s+1]+o),i.push(a[s+2]+o);for(var s=0,u=n.length;s<u;s++)r.push(n[s],n[++s])}};function TL(e,t,n,r,i,o,a,s){var u=e-n*i,c=t-r*i,l=e+n*o,f=t+r*o,h,p;a?(h=r,p=-n):(h=-r,p=n);var d=u+h,m=c+p,g=l+h,v=f+p;return s.push(d,m),s.push(g,v),2}function yh(e,t,n,r,i,o,a,s){var u=n-e,c=r-t,l=Math.atan2(u,c),f=Math.atan2(i-e,o-t);s&&l<f?l+=Math.PI*2:!s&&l>f&&(f+=Math.PI*2);var h=l,p=f-l,d=Math.abs(p),m=Math.sqrt(u*u+c*c),g=(15*d*Math.sqrt(m)/Math.PI>>0)+1,v=p/g;if(h+=v,s){a.push(e,t),a.push(n,r);for(var b=1,y=h;b<g;b++,y+=v)a.push(e,t),a.push(e+Math.sin(y)*m,t+Math.cos(y)*m);a.push(e,t),a.push(i,o)}else{a.push(n,r),a.push(e,t);for(var b=1,y=h;b<g;b++,y+=v)a.push(e+Math.sin(y)*m,t+Math.cos(y)*m),a.push(e,t);a.push(i,o),a.push(e,t)}return g*2}function ute(e,t){var n=e.shape,r=e.points||n.points.slice(),i=t.closePointEps;if(r.length!==0){var o=e.lineStyle,a=new An(r[0],r[1]),s=new An(r[r.length-2],r[r.length-1]),u=n.type!==Wr.POLY||n.closeStroke,c=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(u){r=r.slice(),c&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var l=(a.x+s.x)*.5,f=(s.y+a.y)*.5;r.unshift(l,f),r.push(l,f)}var h=t.points,p=r.length/2,d=r.length,m=h.length/2,g=o.width/2,v=g*g,b=o.miterLimit*o.miterLimit,y=r[0],_=r[1],T=r[2],S=r[3],E=0,I=0,x=-(_-S),C=y-T,w=0,B=0,L=Math.sqrt(x*x+C*C);x/=L,C/=L,x*=g,C*=g;var k=o.alignment,R=(1-k)*2,F=k*2;u||(o.cap===ms.ROUND?d+=yh(y-x*(R-F)*.5,_-C*(R-F)*.5,y-x*R,_-C*R,y+x*F,_+C*F,h,!0)+2:o.cap===ms.SQUARE&&(d+=TL(y,_,x,C,R,F,!0,h))),h.push(y-x*R,_-C*R),h.push(y+x*F,_+C*F);for(var U=1;U<p-1;++U){y=r[(U-1)*2],_=r[(U-1)*2+1],T=r[U*2],S=r[U*2+1],E=r[(U+1)*2],I=r[(U+1)*2+1],x=-(_-S),C=y-T,L=Math.sqrt(x*x+C*C),x/=L,C/=L,x*=g,C*=g,w=-(S-I),B=T-E,L=Math.sqrt(w*w+B*B),w/=L,B/=L,w*=g,B*=g;var $=T-y,ie=_-S,oe=T-E,me=I-S,ae=ie*oe-me*$,X=ae<0;if(Math.abs(ae)<.1){h.push(T-x*R,S-C*R),h.push(T+x*F,S+C*F);continue}var ee=(-x+y)*(-C+S)-(-x+T)*(-C+_),se=(-w+E)*(-B+S)-(-w+T)*(-B+I),_e=($*se-oe*ee)/ae,Oe=(me*ee-ie*se)/ae,Re=(_e-T)*(_e-T)+(Oe-S)*(Oe-S),ve=T+(_e-T)*R,Ne=S+(Oe-S)*R,He=T-(_e-T)*F,be=S-(Oe-S)*F,je=Math.min($*$+ie*ie,oe*oe+me*me),qe=X?R:F,ot=je+qe*qe*v,ut=Re<=ot;ut?o.join===ds.BEVEL||Re/v>b?(X?(h.push(ve,Ne),h.push(T+x*F,S+C*F),h.push(ve,Ne),h.push(T+w*F,S+B*F)):(h.push(T-x*R,S-C*R),h.push(He,be),h.push(T-w*R,S-B*R),h.push(He,be)),d+=2):o.join===ds.ROUND?X?(h.push(ve,Ne),h.push(T+x*F,S+C*F),d+=yh(T,S,T+x*F,S+C*F,T+w*F,S+B*F,h,!0)+4,h.push(ve,Ne),h.push(T+w*F,S+B*F)):(h.push(T-x*R,S-C*R),h.push(He,be),d+=yh(T,S,T-x*R,S-C*R,T-w*R,S-B*R,h,!1)+4,h.push(T-w*R,S-B*R),h.push(He,be)):(h.push(ve,Ne),h.push(He,be)):(h.push(T-x*R,S-C*R),h.push(T+x*F,S+C*F),o.join===ds.BEVEL||Re/v>b||(o.join===ds.ROUND?X?d+=yh(T,S,T+x*F,S+C*F,T+w*F,S+B*F,h,!0)+2:d+=yh(T,S,T-x*R,S-C*R,T-w*R,S-B*R,h,!1)+2:(X?(h.push(He,be),h.push(He,be)):(h.push(ve,Ne),h.push(ve,Ne)),d+=2)),h.push(T-w*R,S-B*R),h.push(T+w*F,S+B*F),d+=2)}y=r[(p-2)*2],_=r[(p-2)*2+1],T=r[(p-1)*2],S=r[(p-1)*2+1],x=-(_-S),C=y-T,L=Math.sqrt(x*x+C*C),x/=L,C/=L,x*=g,C*=g,h.push(T-x*R,S-C*R),h.push(T+x*F,S+C*F),u||(o.cap===ms.ROUND?d+=yh(T-x*(R-F)*.5,S-C*(R-F)*.5,T-x*R,S-C*R,T+x*F,S+C*F,h,!1)+2:o.cap===ms.SQUARE&&(d+=TL(T,S,x,C,R,F,!1,h)));for(var Je=t.indices,at=Zf.epsilon*Zf.epsilon,U=m;U<d+m-2;++U)y=h[U*2],_=h[U*2+1],T=h[(U+1)*2],S=h[(U+1)*2+1],E=h[(U+2)*2],I=h[(U+2)*2+1],!(Math.abs(y*(S-I)+T*(I-_)+E*(_-S))<at)&&Je.push(U,U+1,U+2)}}function cte(e,t){var n=0,r=e.shape,i=e.points||r.points,o=r.type!==Wr.POLY||r.closeStroke;if(i.length!==0){var a=t.points,s=t.indices,u=i.length/2,c=a.length/2,l=c;for(a.push(i[0],i[1]),n=1;n<u;n++)a.push(i[n*2],i[n*2+1]),s.push(l,l+1),l++;o&&s.push(l,c)}}function lk(e,t){e.lineStyle.native?cte(e,t):ute(e,t)}var K4=function(e){ME(t,e);function t(n,r,i,o,a,s){s===void 0&&(s=0);var u=this;a=a||o/2;for(var c=-1*Math.PI/2+s,l=i*2,f=Kf/l,h=[],p=0;p<l;p++){var d=p%2?a:o,m=p*f+c;h.push(n+d*Math.cos(m),r+d*Math.sin(m))}return u=e.call(this,h)||this,u}return t}(Tf),uk=function(){function e(){}return e.curveTo=function(t,n,r,i,o,a){var s=a[a.length-2],u=a[a.length-1],c=u-n,l=s-t,f=i-n,h=r-t,p=Math.abs(c*h-l*f);if(p<1e-8||o===0)return(a[a.length-2]!==t||a[a.length-1]!==n)&&a.push(t,n),null;var d=c*c+l*l,m=f*f+h*h,g=c*f+l*h,v=o*Math.sqrt(d)/p,b=o*Math.sqrt(m)/p,y=v*g/d,_=b*g/m,T=v*h+b*l,S=v*f+b*c,E=l*(b+y),I=c*(b+y),x=h*(v+_),C=f*(v+_),w=Math.atan2(I-S,E-T),B=Math.atan2(C-S,x-T);return{cx:T+t,cy:S+n,radius:o,startAngle:w,endAngle:B,anticlockwise:l*f>h*c}},e.arc=function(t,n,r,i,o,a,s,u,c){for(var l=s-a,f=Zf._segmentsCount(Math.abs(l)*o,Math.ceil(Math.abs(l)/Kf)*40),h=l/(f*2),p=h*2,d=Math.cos(h),m=Math.sin(h),g=f-1,v=g%1/g,b=0;b<=g;++b){var y=b+v*b,_=h+a+p*y,T=Math.cos(_),S=-Math.sin(_);c.push((d*T+m*S)*o+r,(d*-S+m*T)*o+i)}},e}(),Q4=function(){function e(){}return e.curveLength=function(t,n,r,i,o,a,s,u){for(var c=10,l=0,f=0,h=0,p=0,d=0,m=0,g=0,v=0,b=0,y=0,_=0,T=t,S=n,E=1;E<=c;++E)f=E/c,h=f*f,p=h*f,d=1-f,m=d*d,g=m*d,v=g*t+3*m*f*r+3*d*h*o+p*s,b=g*n+3*m*f*i+3*d*h*a+p*u,y=T-v,_=S-b,T=v,S=b,l+=Math.sqrt(y*y+_*_);return l},e.curveTo=function(t,n,r,i,o,a,s){var u=s[s.length-2],c=s[s.length-1];s.length-=2;var l=Zf._segmentsCount(e.curveLength(u,c,t,n,r,i,o,a)),f=0,h=0,p=0,d=0,m=0;s.push(u,c);for(var g=1,v=0;g<=l;++g)v=g/l,f=1-v,h=f*f,p=h*f,d=v*v,m=d*v,s.push(p*u+3*h*v*t+3*f*d*r+m*o,p*c+3*h*v*n+3*f*d*i+m*a)},e}(),Z4=function(){function e(){}return e.curveLength=function(t,n,r,i,o,a){var s=t-2*r+o,u=n-2*i+a,c=2*r-2*t,l=2*i-2*n,f=4*(s*s+u*u),h=4*(s*c+u*l),p=c*c+l*l,d=2*Math.sqrt(f+h+p),m=Math.sqrt(f),g=2*f*m,v=2*Math.sqrt(p),b=h/m;return(g*d+m*h*(d-v)+(4*p*f-h*h)*Math.log((2*m+b+d)/(b+v)))/(4*g)},e.curveTo=function(t,n,r,i,o){for(var a=o[o.length-2],s=o[o.length-1],u=Zf._segmentsCount(e.curveLength(a,s,t,n,r,i)),c=0,l=0,f=1;f<=u;++f){var h=f/u;c=a+(t-a)*h,l=s+(n-s)*h,o.push(c+(t+(r-t)*h-c)*h,l+(n+(i-n)*h-l)*h)}},e}(),J4=function(){function e(){this.reset()}return e.prototype.begin=function(t,n,r){this.reset(),this.style=t,this.start=n,this.attribStart=r},e.prototype.end=function(t,n){this.attribSize=n-this.attribStart,this.size=t-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),vu,$b=(vu={},vu[Wr.POLY]=hD,vu[Wr.CIRC]=sk,vu[Wr.ELIP]=sk,vu[Wr.RECT]=q4,vu[Wr.RREC]=$4,vu),ck=[],gm=[],hte={buildPoly:hD,buildCircle:sk,buildRectangle:q4,buildRoundedRectangle:$4,FILL_COMMANDS:$b,BATCH_POOL:ck,DRAW_CALL_POOL:gm,buildLine:lk,Star:K4,ArcUtils:uk,BezierUtils:Q4,QuadraticUtils:Z4,BatchPart:J4},hk=function(){function e(t,n,r,i){n===void 0&&(n=null),r===void 0&&(r=null),i===void 0&&(i=null),this.shape=t,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=t.type,this.points=[],this.holes=[]}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),vh=new An,fte=new zg,e6=function(e){ME(t,e);function t(){var n=e.call(this)||this;return n.uvsFloat32=null,n.indicesUint16=null,n.points=[],n.colors=[],n.uvs=[],n.indices=[],n.textureIds=[],n.graphicsData=[],n.dirty=0,n.batchDirty=-1,n.cacheDirty=-1,n.clearDirty=0,n.drawCalls=[],n.batches=[],n.shapeIndex=0,n._bounds=new zg,n.boundsDirty=-1,n.boundsPadding=0,n.batchable=!1,n.indicesUint16=null,n.uvsFloat32=null,n.closePointEps=1e-4,n}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),gm.push(this.drawCalls[n]);this.drawCalls.length=0;for(var n=0;n<this.batches.length;n++){var r=this.batches[n];r.reset(),ck.push(r)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(n,r,i,o){r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=null);var a=new hk(n,r,i,o);return this.graphicsData.push(a),this.dirty++,this},t.prototype.drawHole=function(n,r){if(r===void 0&&(r=null),!this.graphicsData.length)return null;var i=new hk(n,null,null,r),o=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=o.lineStyle,o.holes.push(i),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(n){for(var r=this.graphicsData,i=0;i<r.length;++i){var o=r[i];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(n,vh):vh.copyFrom(n),o.shape.contains(vh.x,vh.y))){var a=!1;if(o.holes)for(var s=0;s<o.holes.length;s++){var u=o.holes[s];if(u.shape.contains(vh.x,vh.y)){a=!0;break}}if(!a)return!0}}return!1},t.prototype.updateBatches=function(n){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,i=this.graphicsData,o=null,a=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],a=o.style);for(var s=this.shapeIndex;s<i.length;s++){this.shapeIndex++;var u=i[s],c=u.fillStyle,l=u.lineStyle,f=$b[u.type];f.build(u),u.matrix&&this.transformPoints(u.points,u.matrix);for(var h=0;h<2;h++){var p=h===0?c:l;if(p.visible){var d=p.texture.baseTexture,m=this.indices.length,g=this.points.length/2;d.wrapMode=As.REPEAT,h===0?this.processFill(u):this.processLine(u);var v=this.points.length/2-g;v!==0&&(o&&!this._compareStyles(a,p)&&(o.end(m,g),o=null),o||(o=ck.pop()||new J4,o.begin(p,m,g),this.batches.push(o),a=p),this.addUvs(this.points,r,p.texture,g,v,p.matrix))}}}var b=this.indices.length,y=this.points.length/2;if(o&&o.end(b,y),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var _=y>65535&&n;this.indicesUint16=_?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(n,r){return!(!n||!r||n.texture.baseTexture!==r.texture.baseTexture||n.color+n.alpha!==r.color+r.alpha||!!n.native!=!!r.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var n=0,r=this.graphicsData.length;n<r;n++){var i=this.graphicsData[n],o=i.fillStyle,a=i.lineStyle;if(o&&!o.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var n=this.batches,r=0,i=n.length;r<i;r++)for(var o=n[r],a=0;a<o.size;a++){var s=o.start+a;this.indicesUint16[s]=this.indicesUint16[s]-o.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var n=this.batches,r=0;r<n.length;r++)if(n[r].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var n=++Rr._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),gm.push(this.drawCalls[r]);this.drawCalls.length=0;var i=this.colors,o=this.textureIds,a=gm.pop();a||(a=new Z0,a.texArray=new J0),a.texArray.count=0,a.start=0,a.size=0,a.type=To.TRIANGLES;var s=0,u=null,c=0,l=!1,f=To.TRIANGLES,h=0;this.drawCalls.push(a);for(var r=0;r<this.batches.length;r++){var p=this.batches[r],d=8,m=p.style,g=m.texture.baseTexture;l!==!!m.native&&(l=!!m.native,f=l?To.LINES:To.TRIANGLES,u=null,s=d,n++),u!==g&&(u=g,g._batchEnabled!==n&&(s===d&&(n++,s=0,a.size>0&&(a=gm.pop(),a||(a=new Z0,a.texArray=new J0),this.drawCalls.push(a)),a.start=h,a.size=0,a.texArray.count=0,a.type=f),g.touched=1,g._batchEnabled=n,g._batchLocation=s,g.wrapMode=10497,a.texArray.elements[a.texArray.count++]=g,s++)),a.size+=p.size,h+=p.size,c=g._batchLocation,this.addColors(i,m.color,m.alpha,p.attribSize,p.attribStart),this.addTextureIds(o,c,p.attribSize,p.attribStart)}Rr._globalBatch=n,this.packAttributes()},t.prototype.packAttributes=function(){for(var n=this.points,r=this.uvs,i=this.colors,o=this.textureIds,a=new ArrayBuffer(n.length*3*4),s=new Float32Array(a),u=new Uint32Array(a),c=0,l=0;l<n.length/2;l++)s[c++]=n[l*2],s[c++]=n[l*2+1],s[c++]=r[l*2],s[c++]=r[l*2+1],u[c++]=i[l],s[c++]=o[l];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(n){if(n.holes.length)this.processHoles(n.holes),hD.triangulate(n,this);else{var r=$b[n.type];r.triangulate(n,this)}},t.prototype.processLine=function(n){lk(n,this);for(var r=0;r<n.holes.length;r++)lk(n.holes[r],this)},t.prototype.processHoles=function(n){for(var r=0;r<n.length;r++){var i=n[r],o=$b[i.type];o.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},t.prototype.calculateBounds=function(){var n=this._bounds,r=fte,i=an.IDENTITY;this._bounds.clear(),r.clear();for(var o=0;o<this.graphicsData.length;o++){var a=this.graphicsData[o],s=a.shape,u=a.type,c=a.lineStyle,l=a.matrix||an.IDENTITY,f=0;if(c&&c.visible){var h=c.alignment;f=c.width,u===Wr.POLY?f=f*(.5+Math.abs(.5-h)):f=f*Math.max(0,h)}if(i!==l&&(r.isEmpty()||(n.addBoundsMatrix(r,i),r.clear()),i=l),u===Wr.RECT||u===Wr.RREC){var p=s;r.addFramePad(p.x,p.y,p.x+p.width,p.y+p.height,f,f)}else if(u===Wr.CIRC){var d=s;r.addFramePad(d.x,d.y,d.x,d.y,d.radius+f,d.radius+f)}else if(u===Wr.ELIP){var m=s;r.addFramePad(m.x,m.y,m.x,m.y,m.width+f,m.height+f)}else{var g=s;n.addVerticesMatrix(i,g.points,0,g.points.length,f,f)}}r.isEmpty()||n.addBoundsMatrix(r,i),n.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(n,r){for(var i=0;i<n.length/2;i++){var o=n[i*2],a=n[i*2+1];n[i*2]=r.a*o+r.c*a+r.tx,n[i*2+1]=r.b*o+r.d*a+r.ty}},t.prototype.addColors=function(n,r,i,o,a){a===void 0&&(a=0);var s=(r>>16)+(r&65280)+((r&255)<<16),u=PE(s,i);n.length=Math.max(n.length,a+o);for(var c=0;c<o;c++)n[a+c]=u},t.prototype.addTextureIds=function(n,r,i,o){o===void 0&&(o=0),n.length=Math.max(n.length,o+i);for(var a=0;a<i;a++)n[o+a]=r},t.prototype.addUvs=function(n,r,i,o,a,s){s===void 0&&(s=null);for(var u=0,c=r.length,l=i.frame;u<a;){var f=n[(o+u)*2],h=n[(o+u)*2+1];if(s){var p=s.a*f+s.c*h+s.tx;h=s.b*f+s.d*h+s.ty,f=p}u++,r.push(f/l.width,h/l.height)}var d=i.baseTexture;(l.width<d.width||l.height<d.height)&&this.adjustUvs(r,i,c,a)},t.prototype.adjustUvs=function(n,r,i,o){for(var a=r.baseTexture,s=1e-6,u=i+o*2,c=r.frame,l=c.width/a.width,f=c.height/a.height,h=c.x/c.width,p=c.y/c.height,d=Math.floor(n[i]+s),m=Math.floor(n[i+1]+s),g=i+2;g<u;g+=2)d=Math.min(d,Math.floor(n[g]+s)),m=Math.min(m,Math.floor(n[g+1]+s));h-=d,p-=m;for(var g=i;g<u;g+=2)n[g]=(n[g]+h)*l,n[g+1]=(n[g+1]+p)*f},t.BATCHABLE_SIZE=100,t}(uD),t6=function(e){ME(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.width=0,n.alignment=.5,n.native=!1,n.cap=ms.BUTT,n.join=ds.MITER,n.miterLimit=10,n}return t.prototype.clone=function(){var n=new t;return n.color=this.color,n.alpha=this.alpha,n.texture=this.texture,n.matrix=this.matrix,n.visible=this.visible,n.width=this.width,n.alignment=this.alignment,n.native=this.native,n.cap=this.cap,n.join=this.join,n.miterLimit=this.miterLimit,n},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(cD),pte=new Float32Array(3),iw={},fD=function(e){ME(t,e);function t(n){n===void 0&&(n=null);var r=e.call(this)||this;return r._geometry=n||new e6,r._geometry.refCount++,r.shader=null,r.state=Ql.for2d(),r._fillStyle=new cD,r._lineStyle=new t6,r._matrix=null,r._holeMode=!1,r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r.pluginName="batch",r._transformID=-1,r.tint=16777215,r.blendMode=gt.NORMAL,r}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(n){this.state.blendMode=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(n){this._tint=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(n){if(n===void 0&&(n=null),typeof n=="number"){var r=arguments;n={width:r[0]||0,color:r[1]||0,alpha:r[2]!==void 0?r[2]:1,alignment:r[3]!==void 0?r[3]:.5,native:!!r[4]}}return this.lineTextureStyle(n)},t.prototype.lineTextureStyle=function(n){if(typeof n=="number"){ze("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var r=arguments,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6];n={width:i,texture:o,color:a,alpha:s,matrix:u,alignment:c,native:l},Object.keys(n).forEach(function(h){return n[h]===void 0&&delete n[h]})}n=Object.assign({width:0,texture:xt.WHITE,color:n&&n.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ms.BUTT,join:ds.MITER,miterLimit:10},n),this.currentPath&&this.startPoly();var f=n.width>0&&n.alpha>0;return f?(n.matrix&&(n.matrix=n.matrix.clone(),n.matrix.invert()),Object.assign(this._lineStyle,{visible:f},n)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var n=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new Tf,this.currentPath.closeStroke=!1,this.currentPath.points.push(n[r-2],n[r-1]))}else this.currentPath=new Tf,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(n,r){return this.startPoly(),this.currentPath.points[0]=n,this.currentPath.points[1]=r,this},t.prototype.lineTo=function(n,r){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,o=i[i.length-2],a=i[i.length-1];return(o!==n||a!==r)&&i.push(n,r),this},t.prototype._initCurve=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[n,r]):this.moveTo(n,r)},t.prototype.quadraticCurveTo=function(n,r,i,o){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),Z4.curveTo(n,r,i,o,a),this},t.prototype.bezierCurveTo=function(n,r,i,o,a,s){return this._initCurve(),Q4.curveTo(n,r,i,o,a,s,this.currentPath.points),this},t.prototype.arcTo=function(n,r,i,o,a){this._initCurve(n,r);var s=this.currentPath.points,u=uk.curveTo(n,r,i,o,a,s);if(u){var c=u.cx,l=u.cy,f=u.radius,h=u.startAngle,p=u.endAngle,d=u.anticlockwise;this.arc(c,l,f,h,p,d)}return this},t.prototype.arc=function(n,r,i,o,a,s){if(s===void 0&&(s=!1),o===a)return this;!s&&a<=o?a+=Kf:s&&o<=a&&(o+=Kf);var u=a-o;if(u===0)return this;var c=n+Math.cos(o)*i,l=r+Math.sin(o)*i,f=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var p=Math.abs(h[h.length-2]-c),d=Math.abs(h[h.length-1]-l);p<f&&d<f||h.push(c,l)}else this.moveTo(c,l),h=this.currentPath.points;return uk.arc(c,l,n,r,i,o,a,s,h),this},t.prototype.beginFill=function(n,r){return n===void 0&&(n=0),r===void 0&&(r=1),this.beginTextureFill({texture:xt.WHITE,color:n,alpha:r})},t.prototype.beginTextureFill=function(n){if(n instanceof xt){ze("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var r=arguments,i=r[0],o=r[1],a=r[2],s=r[3];n={texture:i,color:o,alpha:a,matrix:s},Object.keys(n).forEach(function(c){return n[c]===void 0&&delete n[c]})}n=Object.assign({texture:xt.WHITE,color:16777215,alpha:1,matrix:null},n),this.currentPath&&this.startPoly();var u=n.alpha>0;return u?(n.matrix&&(n.matrix=n.matrix.clone(),n.matrix.invert()),Object.assign(this._fillStyle,{visible:u},n)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(n,r,i,o){return this.drawShape(new hr(n,r,i,o))},t.prototype.drawRoundedRect=function(n,r,i,o,a){return this.drawShape(new XU(n,r,i,o,a))},t.prototype.drawCircle=function(n,r,i){return this.drawShape(new VU(n,r,i))},t.prototype.drawEllipse=function(n,r,i,o){return this.drawShape(new YU(n,r,i,o))},t.prototype.drawPolygon=function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];var o,a=!0,s=r[0];s.points?(a=s.closeStroke,o=s.points):Array.isArray(r[0])?o=r[0]:o=r;var u=new Tf(o);return u.closeStroke=a,this.drawShape(u),this},t.prototype.drawShape=function(n){return this._holeMode?this._geometry.drawHole(n,this._matrix):this._geometry.drawShape(n,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.drawStar=function(n,r,i,o,a,s){return s===void 0&&(s=0),this.drawPolygon(new K4(n,r,i,o,a,s))},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var n=this._geometry.graphicsData;return n.length===1&&n[0].shape.type===Wr.RECT&&!(n[0].lineStyle.visible&&n[0].lineStyle.width)},t.prototype._render=function(n){this.finishPoly();var r=this._geometry,i=n.context.supports.uint32Indices;r.updateBatches(i),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(n)):(n.batch.flush(),this._renderDirect(n))},t.prototype._populateBatches=function(){var n=this._geometry,r=this.blendMode,i=n.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=n.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(n.points);for(var o=0;o<i;o++){var a=n.batches[o],s=a.style.color,u=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),c=new Float32Array(n.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),l=new Uint16Array(n.indicesUint16.buffer,a.start*2,a.size),f={vertexData:u,blendMode:r,indices:l,uvs:c,_batchRGB:ac(s),_tintRGB:s,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[o]=f}},t.prototype._renderBatched=function(n){if(this.batches.length){n.batch.setObjectRenderer(n.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,i=this.batches.length;r<i;r++){var o=this.batches[r];o.worldAlpha=this.worldAlpha*o.alpha,n.plugins[this.pluginName].render(o)}}},t.prototype._renderDirect=function(n){var r=this._resolveDirectShader(n),i=this._geometry,o=this.tint,a=this.worldAlpha,s=r.uniforms,u=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(o>>16&255)/255*a,s.tint[1]=(o>>8&255)/255*a,s.tint[2]=(o&255)/255*a,s.tint[3]=a,n.shader.bind(r),n.geometry.bind(i,r),n.state.set(this.state);for(var c=0,l=u.length;c<l;c++)this._renderDrawCallDirect(n,i.drawCalls[c])},t.prototype._renderDrawCallDirect=function(n,r){for(var i=r.texArray,o=r.type,a=r.size,s=r.start,u=i.count,c=0;c<u;c++)n.texture.bind(i.elements[c],c);n.geometry.draw(o,a,s)},t.prototype._resolveDirectShader=function(n){var r=this.shader,i=this.pluginName;if(!r){if(!iw[i]){for(var o=n.plugins.batch.MAX_TEXTURES,a=new Int32Array(o),s=0;s<o;s++)a[s]=s;var u={tint:new Float32Array([1,1,1,1]),translationMatrix:new an,default:Fl.from({uSamplers:a},!0)},c=n.plugins[i]._shader.program;iw[i]=new ql(c,u)}r=iw[i]}return r},t.prototype._calculateBounds=function(){this.finishPoly();var n=this._geometry;if(n.graphicsData.length){var r=n.bounds,i=r.minX,o=r.minY,a=r.maxX,s=r.maxY;this._bounds.addFrame(this.transform,i,o,a,s)}},t.prototype.containsPoint=function(n){return this.worldTransform.applyInverse(n,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var n=ac(this.tint,pte),r=0;r<this.batches.length;r++){var i=this.batches[r],o=i._batchRGB,a=n[0]*o[0]*255,s=n[1]*o[1]*255,u=n[2]*o[2]*255,c=(a<<16)+(s<<8)+(u|0);i._tintRGB=(c>>16)+(c&65280)+((c&255)<<16)}}},t.prototype.calculateVertices=function(){var n=this.transform._worldID;if(this._transformID!==n){this._transformID=n;for(var r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,s=r.d,u=r.tx,c=r.ty,l=this._geometry.points,f=this.vertexData,h=0,p=0;p<l.length;p+=2){var d=l[p],m=l[p+1];f[h++]=i*d+a*m+u,f[h++]=s*m+o*d+c}}},t.prototype.closePath=function(){var n=this.currentPath;return n&&(n.closeStroke=!0),this},t.prototype.setMatrix=function(n){return this._matrix=n,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(n){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,n)},t._TEMP_POINT=new An,t}(Zo);/*!
 * @pixi/sprite - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fk=function(e,t){return fk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},fk(e,t)};function dte(e,t){fk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ld=new An,mte=new Uint16Array([0,1,2,0,2,3]),$p=function(e){dte(t,e);function t(n){var r=e.call(this)||this;return r._anchor=new Gu(r._onAnchorUpdate,r,n?n.defaultAnchor.x:0,n?n.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=gt.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=n||xt.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=mte,r.pluginName="batch",r.isSprite=!0,r._roundPixels=ft.ROUND_PIXELS,r}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Fu(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Fu(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var n=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===n._updateID)){this._textureID!==n._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=n._updateID;var r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,s=r.d,u=r.tx,c=r.ty,l=this.vertexData,f=n.trim,h=n.orig,p=this._anchor,d=0,m=0,g=0,v=0;if(f?(m=f.x-p._x*h.width,d=m+f.width,v=f.y-p._y*h.height,g=v+f.height):(m=-p._x*h.width,d=m+h.width,v=-p._y*h.height,g=v+h.height),l[0]=i*m+a*v+u,l[1]=s*v+o*m+c,l[2]=i*d+a*v+u,l[3]=s*v+o*d+c,l[4]=i*d+a*g+u,l[5]=s*g+o*d+c,l[6]=i*m+a*g+u,l[7]=s*g+o*m+c,this._roundPixels)for(var b=ft.RESOLUTION,y=0;y<l.length;++y)l[y]=Math.round((l[y]*b|0)/b)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var n=this._texture,r=this.vertexTrimmedData,i=n.orig,o=this._anchor,a=this.transform.worldTransform,s=a.a,u=a.b,c=a.c,l=a.d,f=a.tx,h=a.ty,p=-o._x*i.width,d=p+i.width,m=-o._y*i.height,g=m+i.height;r[0]=s*p+c*m+f,r[1]=l*m+u*p+h,r[2]=s*d+c*m+f,r[3]=l*m+u*d+h,r[4]=s*d+c*g+f,r[5]=l*g+u*d+h,r[6]=s*p+c*g+f,r[7]=l*g+u*p+h},t.prototype._render=function(n){this.calculateVertices(),n.batch.setObjectRenderer(n.plugins[this.pluginName]),n.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var n=this._texture.trim,r=this._texture.orig;!n||n.width===r.width&&n.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(n){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),n||(this._localBoundsRect||(this._localBoundsRect=new hr),n=this._localBoundsRect),this._bounds.getRectangle(n)):e.prototype.getLocalBounds.call(this,n)},t.prototype.containsPoint=function(n){this.worldTransform.applyInverse(n,Ld);var r=this._texture.orig.width,i=this._texture.orig.height,o=-r*this.anchor.x,a=0;return Ld.x>=o&&Ld.x<o+r&&(a=-i*this.anchor.y,Ld.y>=a&&Ld.y<a+i)},t.prototype.destroy=function(n){e.prototype.destroy.call(this,n),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r=typeof n=="boolean"?n:n&&n.texture;if(r){var i=typeof n=="boolean"?n:n&&n.baseTexture;this._texture.destroy(!!i)}this._texture=null},t.from=function(n,r){var i=n instanceof xt?n:xt.from(n,r);return new t(i)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(n){this._roundPixels!==n&&(this._transformID=-1),this._roundPixels=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){var r=Fu(this.scale.x)||1;this.scale.x=r*n/this._texture.orig.width,this._width=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){var r=Fu(this.scale.y)||1;this.scale.y=r*n/this._texture.orig.height,this._height=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(n){this._anchor.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(n){this._tint=n,this._tintRGB=(n>>16)+(n&65280)+((n&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(n){this._texture!==n&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=n||xt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,n&&(n.baseTexture.valid?this._onTextureUpdate():n.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Zo);/*!
 * @pixi/text - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var pk=function(e,t){return pk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},pk(e,t)};function gte(e,t){pk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Jf;(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Jf||(Jf={}));var ow={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Jf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},yte=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],cc=function(){function e(t){this.styleID=0,this.reset(),sw(this,t,t)}return e.prototype.clone=function(){var t={};return sw(t,this,ow),new e(t)},e.prototype.reset=function(){sw(this,ow,ow)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var n=aw(t);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(t){var n=aw(t);this._fill!==n&&(this._fill=n,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){vte(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var n=aw(t);this._stroke!==n&&(this._stroke=n,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(var r=n.length-1;r>=0;r--){var i=n[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&yte.indexOf(i)<0&&(i='"'+i+'"'),n[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+n.join(",")},e}();function EL(e){return typeof e=="number"?qP(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function aw(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=EL(e[t]);return e}else return EL(e)}function vte(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function sw(e,t,n){for(var r in n)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}var xo=function(){function e(t,n,r,i,o,a,s,u,c){this.text=t,this.style=n,this.width=r,this.height=i,this.lines=o,this.lineWidths=a,this.lineHeight=s,this.maxLineWidth=u,this.fontProperties=c}return e.measureText=function(t,n,r,i){i===void 0&&(i=e._canvas),r=r??n.wordWrap;var o=n.toFontString(),a=e.measureFont(o);a.fontSize===0&&(a.fontSize=n.fontSize,a.ascent=n.fontSize);var s=i.getContext("2d");s.font=o;for(var u=r?e.wordWrap(t,n,i):t,c=u.split(/(?:\r\n|\r|\n)/),l=new Array(c.length),f=0,h=0;h<c.length;h++){var p=s.measureText(c[h]).width+(c[h].length-1)*n.letterSpacing;l[h]=p,f=Math.max(f,p)}var d=f+n.strokeThickness;n.dropShadow&&(d+=n.dropShadowDistance);var m=n.lineHeight||a.fontSize+n.strokeThickness,g=Math.max(m,a.fontSize+n.strokeThickness)+(c.length-1)*(m+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new e(t,n,d,g,c,l,m+n.leading,f,a)},e.wordWrap=function(t,n,r){r===void 0&&(r=e._canvas);for(var i=r.getContext("2d"),o=0,a="",s="",u=Object.create(null),c=n.letterSpacing,l=n.whiteSpace,f=e.collapseSpaces(l),h=e.collapseNewlines(l),p=!f,d=n.wordWrapWidth+c,m=e.tokenize(t),g=0;g<m.length;g++){var v=m[g];if(e.isNewline(v)){if(!h){s+=e.addLine(a),p=!f,a="",o=0;continue}v=" "}if(f){var b=e.isBreakingSpace(v),y=e.isBreakingSpace(a[a.length-1]);if(b&&y)continue}var _=e.getFromCache(v,c,u,i);if(_>d)if(a!==""&&(s+=e.addLine(a),a="",o=0),e.canBreakWords(v,n.breakWords))for(var T=e.wordWrapSplit(v),S=0;S<T.length;S++){for(var E=T[S],I=1;T[S+I];){var x=T[S+I],C=E[E.length-1];if(!e.canBreakChars(C,x,v,S,n.breakWords))E+=x;else break;I++}S+=E.length-1;var w=e.getFromCache(E,c,u,i);w+o>d&&(s+=e.addLine(a),p=!1,a="",o=0),a+=E,o+=w}else{a.length>0&&(s+=e.addLine(a),a="",o=0);var B=g===m.length-1;s+=e.addLine(v,!B),p=!1,a="",o=0}else _+o>d&&(p=!1,s+=e.addLine(a),a="",o=0),(a.length>0||!e.isBreakingSpace(v)||p)&&(a+=v,o+=_)}return s+=e.addLine(a,!1),s},e.addLine=function(t,n){return n===void 0&&(n=!0),t=e.trimRight(t),t=n?t+`
`:t,t},e.getFromCache=function(t,n,r,i){var o=r[t];if(typeof o!="number"){var a=t.length*n;o=i.measureText(t).width+a,r[t]=o}return o},e.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},e.collapseNewlines=function(t){return t==="normal"},e.trimRight=function(t){if(typeof t!="string")return"";for(var n=t.length-1;n>=0;n--){var r=t[n];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return typeof t!="string"?!1:e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t){return typeof t!="string"?!1:e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var n=[],r="";if(typeof t!="string")return n;for(var i=0;i<t.length;i++){var o=t[i];if(e.isBreakingSpace(o)||e.isNewline(o)){r!==""&&(n.push(r),r=""),n.push(o);continue}r+=o}return r!==""&&n.push(r),n},e.canBreakWords=function(t,n){return n},e.canBreakChars=function(t,n,r,i,o){return!0},e.wordWrapSplit=function(t){return t.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var n={ascent:0,descent:0,fontSize:0},r=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),u=2*s;s=s*e.BASELINE_MULTIPLIER|0,r.width=a,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var c=i.getImageData(0,0,a,u).data,l=c.length,f=a*4,h=0,p=0,d=!1;for(h=0;h<s;++h){for(var m=0;m<f;m+=4)if(c[p+m]!==255){d=!0;break}if(!d)p+=f;else break}for(n.ascent=s-h,p=l-f,d=!1,h=u;h>s;--h){for(var m=0;m<f;m+=4)if(c[p+m]!==255){d=!0;break}if(!d)p-=f;else break}return n.descent=h-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n},e.clearMetrics=function(t){t===void 0&&(t=""),t?delete e._fonts[t]:e._fonts={}},e}(),e_=function(){try{var e=new OffscreenCanvas(0,0),t=e.getContext("2d");return t&&t.measureText?e:document.createElement("canvas")}catch{return document.createElement("canvas")}}();e_.width=e_.height=10;xo._canvas=e_;xo._context=e_.getContext("2d");xo._fonts={};xo.METRICS_STRING="|ÉqÅ";xo.BASELINE_SYMBOL="M";xo.BASELINE_MULTIPLIER=1.4;xo._newlines=[10,13];xo._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var bte={texture:!0,children:!1,baseTexture:!0},pD=function(e){gte(t,e);function t(n,r,i){var o=this,a=!1;i||(i=document.createElement("canvas"),a=!0),i.width=3,i.height=3;var s=xt.from(i);return s.orig=new hr,s.trim=new hr,o=e.call(this,s)||this,o._ownCanvas=a,o.canvas=i,o.context=o.canvas.getContext("2d"),o._resolution=ft.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=n,o.style=r,o.localStyleID=-1,o}return t.prototype.updateText=function(n){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!(!this.dirty&&n)){this._font=this._style.toFontString();var i=this.context,o=xo.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,s=o.height,u=o.lines,c=o.lineHeight,l=o.lineWidths,f=o.maxLineWidth,h=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,a)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,s)+r.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=r.strokeThickness,i.textBaseline=r.textBaseline,i.lineJoin=r.lineJoin,i.miterLimit=r.miterLimit;for(var p,d,m=r.dropShadow?2:1,g=0;g<m;++g){var v=r.dropShadow&&g===0,b=v?Math.ceil(Math.max(1,s)+r.padding*2):0,y=b*this._resolution;if(v){i.fillStyle="black",i.strokeStyle="black";var _=r.dropShadowColor,T=ac(typeof _=="number"?_:$P(_)),S=r.dropShadowBlur*this._resolution,E=r.dropShadowDistance*this._resolution;i.shadowColor="rgba("+T[0]*255+","+T[1]*255+","+T[2]*255+","+r.dropShadowAlpha+")",i.shadowBlur=S,i.shadowOffsetX=Math.cos(r.dropShadowAngle)*E,i.shadowOffsetY=Math.sin(r.dropShadowAngle)*E+y}else i.fillStyle=this._generateFillStyle(r,u,o),i.strokeStyle=r.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;for(var I=0;I<u.length;I++)p=r.strokeThickness/2,d=r.strokeThickness/2+I*c+h.ascent,r.align==="right"?p+=f-l[I]:r.align==="center"&&(p+=(f-l[I])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(u[I],p+r.padding,d+r.padding-b,!0),r.fill&&this.drawLetterSpacing(u[I],p+r.padding,d+r.padding-b)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(n,r,i,o){o===void 0&&(o=!1);var a=this._style,s=a.letterSpacing;if(s===0){o?this.context.strokeText(n,r,i):this.context.fillText(n,r,i);return}for(var u=r,c=Array.from?Array.from(n):n.split(""),l=this.context.measureText(n).width,f=0,h=0;h<c.length;++h){var p=c[h];o?this.context.strokeText(p,u,i):this.context.fillText(p,u,i),f=this.context.measureText(n.substring(h+1)).width,u+=l-f+s,l=f}},t.prototype.updateTexture=function(){var n=this.canvas;if(this._style.trim){var r=FU(n);r.data&&(n.width=r.width,n.height=r.height,this.context.putImageData(r.data,0,0))}var i=this._texture,o=this._style,a=o.trim?0:o.padding,s=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(n.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(n.height/this._resolution),i.trim.x=-a,i.trim.y=-a,i.orig.width=i._frame.width-a*2,i.orig.height=i._frame.height-a*2,this._onTextureUpdate(),s.setRealSize(n.width,n.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(n){this._autoResolution&&this._resolution!==n.resolution&&(this._resolution=n.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,n)},t.prototype.getLocalBounds=function(n){return this.updateText(!0),e.prototype.getLocalBounds.call(this,n)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(n,r,i){var o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var a,s=n.dropShadow?n.dropShadowDistance:0,u=n.padding||0,c=Math.ceil(this.canvas.width/this._resolution)-s-u*2,l=Math.ceil(this.canvas.height/this._resolution)-s-u*2,f=o.slice(),h=n.fillGradientStops.slice();if(!h.length)for(var p=f.length+1,d=1;d<p;++d)h.push(d/p);if(f.unshift(o[0]),h.unshift(0),f.push(o[o.length-1]),h.push(1),n.fillGradientType===Jf.LINEAR_VERTICAL){a=this.context.createLinearGradient(c/2,u,c/2,l+u);for(var m=0,g=i.fontProperties.fontSize+n.strokeThickness,v=g/l,d=0;d<r.length;d++)for(var b=i.lineHeight*d,y=0;y<f.length;y++){var _=0;typeof h[y]=="number"?_=h[y]:_=y/f.length;var T=b/l+_*v,S=Math.max(m,T);S=Math.min(S,1),a.addColorStop(S,f[y]),m=S}}else{a=this.context.createLinearGradient(u,l/2,c+u,l/2);for(var E=f.length+1,I=1,d=0;d<f.length;d++){var x=void 0;typeof h[d]=="number"?x=h[d]:x=I/E,a.addColorStop(x,f[d]),I++}}return a},t.prototype.destroy=function(n){typeof n=="boolean"&&(n={children:n}),n=Object.assign({},bte,n),e.prototype.destroy.call(this,n),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){this.updateText(!0);var r=Fu(this.scale.x)||1;this.scale.x=r*n/this._texture.orig.width,this._width=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){this.updateText(!0);var r=Fu(this.scale.y)||1;this.scale.y=r*n/this._texture.orig.height,this._height=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(n){n=n||{},n instanceof cc?this._style=n:this._style=new cc(n),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(n){n=String(n??""),this._text!==n&&(this._text=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(n){this._autoResolution=!1,this._resolution!==n&&(this._resolution=n,this.dirty=!0)},enumerable:!1,configurable:!0}),t}($p);/*!
 * @pixi/prepare - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ft.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var dk=function(e,t){return dk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},dk(e,t)};function _te(e,t){dk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var r6=function(){function e(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function Tte(e,t){var n=!1;if(e&&e._textures&&e._textures.length){for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof xt){var i=e._textures[r].baseTexture;t.indexOf(i)===-1&&(t.push(i),n=!0)}}return n}function Ete(e,t){if(e.baseTexture instanceof Rr){var n=e.baseTexture;return t.indexOf(n)===-1&&t.push(n),!0}return!1}function Ste(e,t){if(e._texture&&e._texture instanceof xt){var n=e._texture.baseTexture;return t.indexOf(n)===-1&&t.push(n),!0}return!1}function wte(e,t){return t instanceof pD?(t.updateText(!0),!0):!1}function Ate(e,t){if(t instanceof cc){var n=t.toFontString();return xo.measureFont(n),!0}return!1}function Ote(e,t){if(e instanceof pD){t.indexOf(e.style)===-1&&t.push(e.style),t.indexOf(e)===-1&&t.push(e);var n=e._texture.baseTexture;return t.indexOf(n)===-1&&t.push(n),!0}return!1}function kte(e,t){return e instanceof cc?(t.indexOf(e)===-1&&t.push(e),!0):!1}var n6=function(){function e(t){var n=this;this.limiter=new r6(ft.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(Ote),this.registerFindHook(kte),this.registerFindHook(Tte),this.registerFindHook(Ete),this.registerFindHook(Ste),this.registerUploadHook(wte),this.registerUploadHook(Ate)}return e.prototype.upload=function(t,n){typeof t=="function"&&(n=t,t=null),t&&this.add(t),this.queue.length?(n&&this.completes.push(n),this.ticking||(this.ticking=!0,wn.system.addOnce(this.tick,this,Fa.UTILITY))):n&&n()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],n=!1;if(t&&!t._destroyed){for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),n=!0;break}}n||this.queue.shift()}if(this.queue.length)wn.system.addOnce(this.tick,this,Fa.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var r=0,i=o.length;r<i;r++)o[r]()}},e.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},e.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},e.prototype.add=function(t){for(var n=0,r=this.addHooks.length;n<r&&!this.addHooks[n](t,this.queue);n++);if(t instanceof Zo)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},e.prototype.destroy=function(){this.ticking&&wn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function i6(e,t){return t instanceof Rr?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function xte(e,t){if(!(t instanceof fD))return!1;var n=t.geometry;t.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&i6(e,o.baseTexture)}return n.batchable||e.geometry.bind(n,t._resolveDirectShader(e)),!0}function Ite(e,t){return e instanceof fD?(t.push(e),!0):!1}var o6=function(e){_te(t,e);function t(n){var r=e.call(this,n)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(Ite),r.registerUploadHook(i6),r.registerUploadHook(xte),r}return t}(n6),Cte=function(){function e(t){this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();/*!
 * @pixi/spritesheet - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var a6=function(){function e(t,n,r){r===void 0&&(r=null),this._texture=t instanceof xt?t:null,this.baseTexture=t instanceof Rr?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(t){t===void 0&&(t=null);var n=this.data.meta.scale,r=Ug(t,null);return r===null&&(r=n!==void 0?parseFloat(n):1),r!==1&&this.baseTexture.setResolution(r),r},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var n=t,r=e.BATCH_SIZE;n-t<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],o=this._frames[i],a=o.frame;if(a){var s=null,u=null,c=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,l=new hr(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);o.rotated?s=new hr(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):s=new hr(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(u=new hr(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new xt(this.baseTexture,s,l,u,o.rotated?2:0,o.anchor),xt.addToCache(this.textures[i],i)}n++}},e.prototype._processAnimations=function(){var t=this.data.animations||{};for(var n in t){this.animations[n]=[];for(var r=0;r<t[n].length;r++){var i=t[n][r];this.animations[n].push(this.textures[i])}}},e.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},e.prototype.destroy=function(t){var n;t===void 0&&(t=!1);for(var r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((n=this._texture)===null||n===void 0||n.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),s6=function(){function e(){}return e.use=function(t,n){var r=this,i=t.name+"_image";if(!t.data||t.type!==Wm.TYPE.JSON||!t.data.frames||r.resources[i]){n();return}var o={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},a=e.getResourcePath(t,r.baseUrl);r.add(i,a,o,function(s){if(s.error){n(s.error);return}var u=new a6(s.texture,t.data,t.url);u.parse(function(){t.spritesheet=u,t.textures=u.textures,n()})})},e.getResourcePath=function(t,n){return t.isDataUrl?t.data.meta.image:zc.resolve(t.url.replace(n,""),t.data.meta.image)},e}();/*!
 * @pixi/sprite-tiling - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var mk=function(e,t){return mk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},mk(e,t)};function l6(e,t){mk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var jd=new An,Pte=function(e){l6(t,e);function t(n,r,i){r===void 0&&(r=100),i===void 0&&(i=100);var o=e.call(this,n)||this;return o.tileTransform=new JP,o._width=r,o._height=i,o.uvMatrix=o.texture.uvMatrix||new NE(n),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(n){this.uvMatrix.clampMargin=n,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(n){this.tileTransform.scale.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(n){this.tileTransform.position.copyFrom(n)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(n){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),n.batch.setObjectRenderer(n.plugins[this.pluginName]),n.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var n=this._width*-this._anchor._x,r=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,n,r,i,o)},t.prototype.getLocalBounds=function(n){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),n||(this._localBoundsRect||(this._localBoundsRect=new hr),n=this._localBoundsRect),this._bounds.getRectangle(n)):e.prototype.getLocalBounds.call(this,n)},t.prototype.containsPoint=function(n){this.worldTransform.applyInverse(n,jd);var r=this._width,i=this._height,o=-r*this.anchor._x;if(jd.x>=o&&jd.x<o+r){var a=-i*this.anchor._y;if(jd.y>=a&&jd.y<a+i)return!0}return!1},t.prototype.destroy=function(n){e.prototype.destroy.call(this,n),this.tileTransform=null,this.uvMatrix=null},t.from=function(n,r){return typeof r=="number"&&(ze("5.3.0","TilingSprite.from use options instead of width and height args"),r={width:r,height:arguments[2]}),new t(xt.from(n,r),r.width,r.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(n){this._width=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(n){this._height=n},enumerable:!1,configurable:!0}),t}($p),SL=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Dte=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,Rte=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Yv=new an,u6=function(e){l6(t,e);function t(n){var r=e.call(this,n)||this,i={globals:r.renderer.globalUniforms};return r.shader=ql.from(SL,Dte,i),r.simpleShader=ql.from(SL,Rte,i),r.quad=new sD,r.state=Ql.for2d(),r}return t.prototype.render=function(n){var r=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=n._width*-n.anchor.x,o[1]=o[3]=n._height*-n.anchor.y,o[2]=o[4]=n._width*(1-n.anchor.x),o[5]=o[7]=n._height*(1-n.anchor.y),n.uvRespectAnchor&&(o=i.uvs,o[0]=o[6]=-n.anchor.x,o[1]=o[3]=-n.anchor.y,o[2]=o[4]=1-n.anchor.x,o[5]=o[7]=1-n.anchor.y),i.invalidate();var a=n._texture,s=a.baseTexture,u=n.tileTransform.localTransform,c=n.uvMatrix,l=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;l&&(s._glTextures[r.CONTEXT_UID]?l=s.wrapMode!==As.CLAMP:s.wrapMode===As.CLAMP&&(s.wrapMode=As.REPEAT));var f=l?this.simpleShader:this.shader,h=a.width,p=a.height,d=n._width,m=n._height;Yv.set(u.a*h/d,u.b*h/m,u.c*p/d,u.d*p/m,u.tx/d,u.ty/m),Yv.invert(),l?Yv.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=Yv.toArray(!0),f.uniforms.uColor=ZP(n.tint,n.worldAlpha,f.uniforms.uColor,s.alphaMode),f.uniforms.translationMatrix=n.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,r.shader.bind(f),r.geometry.bind(i),this.state.blendMode=QP(n.blendMode,s.alphaMode),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(Oy);/*!
 * @pixi/mesh - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var gk=function(e,t){return gk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},gk(e,t)};function dD(e,t){gk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var c6=function(){function e(t,n){this.uvBuffer=t,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}},e}(),lw=new An,wL=new Tf,ep=function(e){dD(t,e);function t(n,r,i,o){o===void 0&&(o=To.TRIANGLES);var a=e.call(this)||this;return a.geometry=n,n.refCount++,a.shader=r,a.state=i||Ql.for2d(),a.drawMode=o,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=0,a._transformID=-1,a._roundPixels=ft.ROUND_PIXELS,a.batchUvs=null,a}return Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(n){this.shader=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(n){this.state.blendMode=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(n){this._roundPixels!==n&&(this._transformID=-1),this._roundPixels=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this.shader.tint},set:function(n){this.shader.tint=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(n){this.shader.texture=n},enumerable:!1,configurable:!0}),t.prototype._render=function(n){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===To.TRIANGLES&&r.length<t.BATCHABLE_SIZE*2?this._renderToBatch(n):this._renderDefault(n)},t.prototype._renderDefault=function(n){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),n.batch.flush(),r.program.uniformData.translationMatrix&&(r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),n.shader.bind(r),n.state.set(this.state),n.geometry.bind(this.geometry,r),n.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(n){var r=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;n.batch.setObjectRenderer(n.plugins[i]),n.plugins[i].render(this)},t.prototype.calculateVertices=function(){var n=this.geometry,r=n.buffers[0].data;if(!(n.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));for(var i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,c=i.tx,l=i.ty,f=this.vertexData,h=0;h<f.length/2;h++){var p=r[h*2],d=r[h*2+1];f[h*2]=o*p+s*d+c,f[h*2+1]=a*p+u*d+l}if(this._roundPixels)for(var m=ft.RESOLUTION,h=0;h<f.length;++h)f[h]=Math.round((f[h]*m|0)/m);this.vertexDirty=n.vertexDirtyId}},t.prototype.calculateUvs=function(){var n=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=n.data:(this.batchUvs||(this.batchUvs=new c6(n,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(n){if(!this.getBounds().contains(n.x,n.y))return!1;this.worldTransform.applyInverse(n,lw);for(var r=this.geometry.getBuffer("aVertexPosition").data,i=wL.points,o=this.geometry.getIndex().data,a=o.length,s=this.drawMode===4?3:1,u=0;u+2<a;u+=s){var c=o[u]*2,l=o[u+1]*2,f=o[u+2]*2;if(i[0]=r[c],i[1]=r[c+1],i[2]=r[l],i[3]=r[l+1],i[4]=r[f],i[5]=r[f+1],wL.contains(lw.x,lw.y))return!0}return!1},t.prototype.destroy=function(n){e.prototype.destroy.call(this,n),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Zo),Nte=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Mte=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Iy=function(e){dD(t,e);function t(n,r){var i=this,o={uSampler:n,alpha:1,uTextureMatrix:an.IDENTITY,uColor:new Float32Array([1,1,1,1])};return r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(o,r.uniforms),i=e.call(this,r.program||ky.from(Mte,Nte),o)||this,i._colorDirty=!1,i.uvMatrix=new NE(n),i.batchable=r.program===void 0,i.pluginName=r.pluginName,i.tint=r.tint,i.alpha=r.alpha,i}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(n){this.uniforms.uSampler!==n&&(this.uniforms.uSampler=n,this.uvMatrix.texture=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(n){n!==this._alpha&&(this._alpha=n,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(n){n!==this._tint&&(this._tint=n,this._tintRGB=(n>>16)+(n&65280)+((n&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var n=this.texture.baseTexture;ZP(this._tint,this._alpha,this.uniforms.uColor,n.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(ql),Cy=function(e){dD(t,e);function t(n,r,i){var o=e.call(this)||this,a=new Sn(n),s=new Sn(r,!0),u=new Sn(i,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,nn.FLOAT).addAttribute("aTextureCoord",s,2,!1,nn.FLOAT).addIndex(u),o._updateId=-1,o}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(qp);/*!
 * @pixi/text-bitmap - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yk=function(e,t){return yk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},yk(e,t)};function Lte(e,t){yk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Vg=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return e}(),jte=function(){function e(){}return e.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},e.parse=function(t){var n=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var i in n){var o=n[i].match(/^[a-z]+/gm)[0],a=n[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var u in a){var c=a[u].split("="),l=c[0],f=c[1].replace(/"/gm,""),h=parseFloat(f),p=isNaN(h)?f:h;s[l]=p}r[o].push(s)}var d=new Vg;return r.info.forEach(function(m){return d.info.push({face:m.face,size:parseInt(m.size,10)})}),r.common.forEach(function(m){return d.common.push({lineHeight:parseInt(m.lineHeight,10)})}),r.page.forEach(function(m){return d.page.push({id:parseInt(m.id,10),file:m.file})}),r.char.forEach(function(m){return d.char.push({id:parseInt(m.id,10),page:parseInt(m.page,10),x:parseInt(m.x,10),y:parseInt(m.y,10),width:parseInt(m.width,10),height:parseInt(m.height,10),xoffset:parseInt(m.xoffset,10),yoffset:parseInt(m.yoffset,10),xadvance:parseInt(m.xadvance,10)})}),r.kerning.forEach(function(m){return d.kerning.push({first:parseInt(m.first,10),second:parseInt(m.second,10),amount:parseInt(m.amount,10)})}),d},e}(),vk=function(){function e(){}return e.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(t){for(var n=new Vg,r=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),u=0;u<r.length;u++)n.info.push({face:r[u].getAttribute("face"),size:parseInt(r[u].getAttribute("size"),10)});for(var u=0;u<i.length;u++)n.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(var u=0;u<o.length;u++)n.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(var u=0;u<a.length;u++){var c=a[u];n.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(var u=0;u<s.length;u++)n.kerning.push({first:parseInt(s[u].getAttribute("first"),10),second:parseInt(s[u].getAttribute("second"),10),amount:parseInt(s[u].getAttribute("amount"),10)});return n},e}(),Bte=function(){function e(){}return e.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var n=new self.DOMParser().parseFromString(t,"text/xml");return vk.test(n)}return!1},e.parse=function(t){var n=new window.DOMParser().parseFromString(t,"text/xml");return vk.parse(n)},e}(),uw=[jte,vk,Bte];function h6(e){for(var t=0;t<uw.length;t++)if(uw[t].test(e))return uw[t];return null}function Fte(e,t,n,r,i,o){var a=n.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var s,u=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,l=Math.ceil(e.width/r)-u-c*2,f=Math.ceil(e.height/r)-u-c*2,h=a.slice(),p=n.fillGradientStops.slice();if(!p.length)for(var d=h.length+1,m=1;m<d;++m)p.push(m/d);if(h.unshift(a[0]),p.unshift(0),h.push(a[a.length-1]),p.push(1),n.fillGradientType===Jf.LINEAR_VERTICAL){s=t.createLinearGradient(l/2,c,l/2,f+c);for(var g=0,v=o.fontProperties.fontSize+n.strokeThickness,b=v/f,m=0;m<i.length;m++)for(var y=o.lineHeight*m,_=0;_<h.length;_++){var T=0;typeof p[_]=="number"?T=p[_]:T=_/h.length;var S=y/f+T*b,E=Math.max(g,S);E=Math.min(E,1),s.addColorStop(E,h[_]),g=E}}else{s=t.createLinearGradient(c,f/2,l+c,f/2);for(var I=h.length+1,x=1,m=0;m<h.length;m++){var C=void 0;typeof p[m]=="number"?C=p[m]:C=x/I,s.addColorStop(C,h[m]),x++}}return s}function Gte(e,t,n,r,i,o,a){var s=n.text,u=n.fontProperties;t.translate(r,i),t.scale(o,o);var c=a.strokeThickness/2,l=-(a.strokeThickness/2);if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=Fte(e,t,a,o,[s],n),t.strokeStyle=a.stroke,a.dropShadow){var f=a.dropShadowColor,h=ac(typeof f=="number"?f:$P(f)),p=a.dropShadowBlur*o,d=a.dropShadowDistance*o;t.shadowColor="rgba("+h[0]*255+","+h[1]*255+","+h[2]*255+","+a.dropShadowAlpha+")",t.shadowBlur=p,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*d,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*d}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(s,c,l+n.lineHeight-u.descent),a.fill&&t.fillText(s,c,l+n.lineHeight-u.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Hte(e){typeof e=="string"&&(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,u=a;s<=u;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,i.split(""))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}var _l=function(){function e(t,n,r){var i=t.info[0],o=t.common[0],a=t.page[0],s=Ug(a.file),u={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=o.lineHeight/s,this.chars={},this.pageTextures=u;for(var c=0;c<t.page.length;c++){var l=t.page[c],f=l.id,h=l.file;u[f]=n instanceof Array?n[c]:n[h]}for(var c=0;c<t.char.length;c++){var p=t.char[c],f=p.id,d=p.page,m=t.char[c],g=m.x,v=m.y,b=m.width,y=m.height,_=m.xoffset,T=m.yoffset,S=m.xadvance;g/=s,v/=s,b/=s,y/=s,_/=s,T/=s,S/=s;var E=new hr(g+u[d].frame.x/s,v+u[d].frame.y/s,b,y);this.chars[f]={xOffset:_,yOffset:T,xAdvance:S,kerning:{},texture:new xt(u[d].baseTexture,E),page:d}}for(var c=0;c<t.kerning.length;c++){var I=t.kerning[c],x=I.first,C=I.second,w=I.amount;x/=s,C/=s,w/=s,this.chars[C]&&(this.chars[C].kerning[x]=w)}}return e.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},e.install=function(t,n,r){var i;if(t instanceof Vg)i=t;else{var o=h6(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}n instanceof xt&&(n=[n]);var a=new e(i,n,r);return e.available[a.font]=a,a},e.uninstall=function(t){var n=e.available[t];if(!n)throw new Error("No font found named '"+t+"'");n.destroy(),delete e.available[t]},e.from=function(t,n,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,r),o=i.chars,a=i.padding,s=i.resolution,u=i.textureWidth,c=i.textureHeight,l=Hte(o),f=n instanceof cc?n:new cc(n),h=u,p=new Vg;p.info[0]={face:f.fontFamily,size:f.fontSize},p.common[0]={lineHeight:f.fontSize};for(var d=0,m=0,g,v,b,y=0,_=[],T=0;T<l.length;T++){g||(g=document.createElement("canvas"),g.width=u,g.height=c,v=g.getContext("2d"),b=new Rr(g,{resolution:s}),_.push(new xt(b)),p.page.push({id:_.length-1,file:""}));var S=xo.measureText(l[T],f,!1,g),E=S.width,I=Math.ceil(S.height),x=Math.ceil((f.fontStyle==="italic"?2:1)*E);if(m>=c-I*s){if(m===0)throw new Error("[BitmapFont] textureHeight "+c+"px is "+("too small for "+f.fontSize+"px fonts"));--T,g=null,v=null,b=null,m=0,d=0,y=0;continue}if(y=Math.max(I+S.fontProperties.descent,y),x*s+d>=h){--T,m+=y*s,m=Math.ceil(m),d=0,y=0;continue}Gte(g,v,S,d,m,s,f);var C=S.text.charCodeAt(0);p.char.push({id:C,page:_.length-1,x:d/s,y:m/s,width:x,height:I,xoffset:0,yoffset:0,xadvance:Math.ceil(E-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),d+=(x+2*a)*s,d=Math.ceil(d)}var w=new e(p,_,!0);return e.available[t]!==void 0&&e.uninstall(t),e.available[t]=w,w},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),AL=[],OL=[],Ute=function(e){Lte(t,e);function t(n,r){r===void 0&&(r={});var i=e.call(this)||this;i._tint=16777215,r.font&&(ze("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),i._upgradeStyle(r));var o=Object.assign({},t.styleDefaults,r),a=o.align,s=o.tint,u=o.maxWidth,c=o.letterSpacing,l=o.fontName,f=o.fontSize;if(!_l.available[l])throw new Error('Missing BitmapFont "'+l+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._fontName=l,i._fontSize=f||_l.available[l].size,i._text=n,i._maxWidth=u,i._maxLineHeight=0,i._letterSpacing=c,i._anchor=new Gu(function(){i.dirty=!0},i,0,0),i._roundPixels=ft.ROUND_PIXELS,i.dirty=!0,i._textureCache={},i}return t.prototype.updateText=function(){for(var n,r=_l.available[this._fontName],i=this._fontSize/r.size,o=new An,a=[],s=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=u.length,l=this._maxWidth*r.size/this._fontSize,f=null,h=0,p=0,d=0,m=-1,g=0,v=0,b=0,y=0;y<c;y++){var _=u.charCodeAt(y),T=u.charAt(y);if(/(?:\s)/.test(T)&&(m=y,g=h),T==="\r"||T===`
`){s.push(h),p=Math.max(p,h),++d,++v,o.x=0,o.y+=r.lineHeight,f=null;continue}var S=r.chars[_];if(S){f&&S.kerning[f]&&(o.x+=S.kerning[f]);var E=OL.pop()||{texture:xt.EMPTY,line:0,charCode:0,position:new An};E.texture=S.texture,E.line=d,E.charCode=_,E.position.x=o.x+S.xOffset+this._letterSpacing/2,E.position.y=o.y+S.yOffset,a.push(E),o.x+=S.xAdvance+this._letterSpacing,h=o.x,b=Math.max(b,S.yOffset+S.texture.height),f=_,m!==-1&&l>0&&o.x>l&&(++v,Ku(a,1+m-v,1+y-m),y=m,m=-1,s.push(g),p=Math.max(p,g),d++,o.x=0,o.y+=r.lineHeight,f=null)}}var I=u.charAt(u.length-1);I!=="\r"&&I!==`
`&&(/(?:\s)/.test(I)&&(h=g),s.push(h),p=Math.max(p,h));for(var x=[],y=0;y<=d;y++){var C=0;this._align==="right"?C=p-s[y]:this._align==="center"&&(C=(p-s[y])/2),x.push(C)}for(var w=a.length,B={},L=[],k=this._activePagesMeshData,y=0;y<k.length;y++)AL.push(k[y]);for(var y=0;y<w;y++){var R=a[y].texture,F=R.baseTexture.uid;if(!B[F]){var U=AL.pop();if(!U){var $=new Cy,ie=new Iy(xt.EMPTY),oe=new ep($,ie);U={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:oe,vertices:null,uvs:null,indices:null}}U.index=0,U.indexCount=0,U.vertexCount=0,U.uvsCount=0,U.total=0;var me=this._textureCache;me[F]=me[F]||new xt(R.baseTexture),U.mesh.texture=me[F],U.mesh.tint=this._tint,L.push(U),B[F]=U}B[F].total++}for(var y=0;y<k.length;y++)L.indexOf(k[y])===-1&&this.removeChild(k[y].mesh);for(var y=0;y<L.length;y++)L[y].mesh.parent!==this&&this.addChild(L[y].mesh);this._activePagesMeshData=L;for(var y in B){var U=B[y],ae=U.total;if(!(((n=U.indices)===null||n===void 0?void 0:n.length)>6*ae)||U.vertices.length<ep.BATCHABLE_SIZE*2)U.vertices=new Float32Array(4*2*ae),U.uvs=new Float32Array(4*2*ae),U.indices=new Uint16Array(6*ae);else for(var X=U.total,ee=U.vertices,se=X*4*2;se<ee.length;se++)ee[se]=0;U.mesh.size=6*ae}for(var y=0;y<w;y++){var T=a[y],_e=T.position.x+x[T.line];this._roundPixels&&(_e=Math.round(_e));var Oe=_e*i,Re=T.position.y*i,R=T.texture,ve=B[R.baseTexture.uid],Ne=R.frame,He=R._uvs,be=ve.index++;ve.indices[be*6+0]=0+be*4,ve.indices[be*6+1]=1+be*4,ve.indices[be*6+2]=2+be*4,ve.indices[be*6+3]=0+be*4,ve.indices[be*6+4]=2+be*4,ve.indices[be*6+5]=3+be*4,ve.vertices[be*8+0]=Oe,ve.vertices[be*8+1]=Re,ve.vertices[be*8+2]=Oe+Ne.width*i,ve.vertices[be*8+3]=Re,ve.vertices[be*8+4]=Oe+Ne.width*i,ve.vertices[be*8+5]=Re+Ne.height*i,ve.vertices[be*8+6]=Oe,ve.vertices[be*8+7]=Re+Ne.height*i,ve.uvs[be*8+0]=He.x0,ve.uvs[be*8+1]=He.y0,ve.uvs[be*8+2]=He.x1,ve.uvs[be*8+3]=He.y1,ve.uvs[be*8+4]=He.x2,ve.uvs[be*8+5]=He.y2,ve.uvs[be*8+6]=He.x3,ve.uvs[be*8+7]=He.y3}this._textWidth=p*i,this._textHeight=(o.y+r.lineHeight)*i;for(var y in B){var U=B[y];if(this.anchor.x!==0||this.anchor.y!==0)for(var je=0,qe=this._textWidth*this.anchor.x,ot=this._textHeight*this.anchor.y,ut=0;ut<U.total;ut++)U.vertices[je++]-=qe,U.vertices[je++]-=ot,U.vertices[je++]-=qe,U.vertices[je++]-=ot,U.vertices[je++]-=qe,U.vertices[je++]-=ot,U.vertices[je++]-=qe,U.vertices[je++]-=ot;this._maxLineHeight=b*i;var Je=U.mesh.geometry.getBuffer("aVertexPosition"),at=U.mesh.geometry.getBuffer("aTextureCoord"),Ht=U.mesh.geometry.getIndex();Je.data=U.vertices,at.data=U.uvs,Ht.data=U.indices,Je.update(),at.update(),Ht.update()}for(var y=0;y<a.length;y++)OL.push(a[y])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(n){if(this._tint!==n){this._tint=n;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=n}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(n){this._align!==n&&(this._align=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(n){if(!_l.available[n])throw new Error('Missing BitmapFont "'+n+'"');this._fontName!==n&&(this._fontName=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(n){this._fontSize!==n&&(this._fontSize=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(n){typeof n=="number"?this._anchor.set(n):this._anchor.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(n){n=String(n??""),this._text!==n&&(this._text=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(n){this._maxWidth!==n&&(this._maxWidth=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(n){this._letterSpacing!==n&&(this._letterSpacing=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(n){n!==this._roundPixels&&(this._roundPixels=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),t.prototype._upgradeStyle=function(n){if(typeof n.font=="string"){var r=n.font.split(" ");n.fontName=r.length===1?r[0]:r.slice(1).join(" "),r.length>=2&&(n.fontSize=parseInt(r[0],10))}else n.fontName=n.font.name,n.fontSize=typeof n.font.size=="number"?n.font.size:parseInt(n.font.size,10)},t.prototype.destroy=function(n){var r=this._textureCache;for(var i in r){var o=r[i];o.destroy(),delete r[i]}this._textureCache=null,e.prototype.destroy.call(this,n)},t.registerFont=function(n,r){return ze("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),_l.install(n,r)},Object.defineProperty(t,"fonts",{get:function(){return ze("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),_l.available},enumerable:!1,configurable:!0}),t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(Zo),f6=function(){function e(){}return e.add=function(){Wm.setExtensionXhrType("fnt",Wm.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,n){var r=h6(t.data);if(!r){n();return}for(var i=e.getBaseUrl(this,t),o=r.parse(t.data),a={},s=function(m){a[m.metadata.pageFile]=m.texture,Object.keys(a).length===o.page.length&&(t.bitmapFont=_l.install(o,a,!0),n())},u=0;u<o.page.length;++u){var c=o.page[u].file,l=i+c,f=!1;for(var h in this.resources){var p=this.resources[h];if(p.url===l){p.metadata.pageFile=c,p.texture?s(p):p.onAfterMiddleware.add(s),f=!0;break}}if(!f){var d={crossOrigin:t.crossOrigin,loadType:Wm.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},t.metadata.imageMetadata),parentResource:t};this.add(l,d,s)}}},e.getBaseUrl=function(t,n){var r=n.isDataUrl?"":e.dirname(n.url);return n.isDataUrl&&(r==="."&&(r=""),t.baseUrl&&r&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(r+="/")),r=r.replace(t.baseUrl,""),r&&r.charAt(r.length-1)!=="/"&&(r+="/"),r},e.dirname=function(t){var n=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return n===t?".":n===""?"/":n},e}();/*!
 * @pixi/filter-alpha - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var bk=function(e,t){return bk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},bk(e,t)};function zte(e,t){bk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Vte=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,Yte=function(e){zte(t,e);function t(n){n===void 0&&(n=1);var r=e.call(this,M4,Vte,{uAlpha:1})||this;return r.alpha=n,r}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(n){this.uniforms.uAlpha=n},enumerable:!1,configurable:!0}),t}(Gs);/*!
 * @pixi/filter-blur - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _k=function(e,t){return _k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},_k(e,t)};function p6(e,t){_k(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Xte=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Wte(e,t){var n=Math.ceil(e/2),r=Xte,i="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var s=o.replace("%index%",a.toString());s=s.replace("%sampleIndex%",a-(n-1)+".0"),i+=s,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",e.toString()),r}var qte={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},$te=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function Kte(e){for(var t=qte[e],n=t.length,r=$te,i="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a,s=0;s<e;s++){var u=o.replace("%index%",s.toString());a=s,s>=n&&(a=e-s-1),u=u.replace("%value%",t[a].toString()),i+=u,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",e.toString()),r}var kL;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(kL||(kL={}));var xL;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(xL||(xL={}));var IL;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(IL||(IL={}));var CL;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(CL||(CL={}));var PL;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(PL||(PL={}));var DL;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(DL||(DL={}));var RL;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(RL||(RL={}));var NL;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(NL||(NL={}));var ML;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(ML||(ML={}));var LL;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(LL||(LL={}));var jL;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON"})(jL||(jL={}));var BL;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(BL||(BL={}));var Yg;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Yg||(Yg={}));var FL;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(FL||(FL={}));var GL;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(GL||(GL={}));var HL;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(HL||(HL={}));var UL;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(UL||(UL={}));var Tk=function(e){p6(t,e);function t(n,r,i,o,a){r===void 0&&(r=8),i===void 0&&(i=4),o===void 0&&(o=ft.FILTER_RESOLUTION),a===void 0&&(a=5);var s=this,u=Wte(a,n),c=Kte(a);return s=e.call(this,u,c)||this,s.horizontal=n,s.resolution=o,s._quality=0,s.quality=i,s.blur=r,s}return t.prototype.apply=function(n,r,i,o){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/r.width):this.uniforms.strength=1/i.height*(i.height/r.height):this.horizontal?this.uniforms.strength=1/n.renderer.width*(n.renderer.width/r.width):this.uniforms.strength=1/n.renderer.height*(n.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)n.applyFilter(this,r,i,o);else{var a=n.getFilterTexture(),s=n.renderer,u=r,c=a;this.state.blend=!1,n.applyFilter(this,u,c,Yg.CLEAR);for(var l=1;l<this.passes-1;l++){n.bindAndClear(u,Yg.BLIT),this.uniforms.uSampler=c;var f=c;c=u,u=f,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,n.applyFilter(this,c,i,o),n.returnFilterTexture(a)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(n){this.padding=1+Math.abs(n)*2,this.strength=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(n){this._quality=n,this.passes=n},enumerable:!1,configurable:!0}),t}(Gs),Qte=function(e){p6(t,e);function t(n,r,i,o){n===void 0&&(n=8),r===void 0&&(r=4),i===void 0&&(i=ft.FILTER_RESOLUTION),o===void 0&&(o=5);var a=e.call(this)||this;return a.blurXFilter=new Tk(!0,n,r,i,o),a.blurYFilter=new Tk(!1,n,r,i,o),a.resolution=i,a.quality=r,a.blur=n,a.repeatEdgePixels=!1,a}return t.prototype.apply=function(n,r,i,o){var a=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(a&&s){var u=n.getFilterTexture();this.blurXFilter.apply(n,r,u,Yg.CLEAR),this.blurYFilter.apply(n,u,i,o),n.returnFilterTexture(u)}else s?this.blurYFilter.apply(n,r,i,o):this.blurXFilter.apply(n,r,i,o)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(n){this.blurXFilter.blur=this.blurYFilter.blur=n,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(n){this.blurXFilter.quality=this.blurYFilter.quality=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(n){this.blurXFilter.blur=n,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(n){this.blurYFilter.blur=n,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(n){this.blurYFilter.blendMode=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(n){this._repeatEdgePixels=n,this.updatePadding()},enumerable:!1,configurable:!0}),t}(Gs);/*!
 * @pixi/filter-color-matrix - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ek=function(e,t){return Ek=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ek(e,t)};function Zte(e,t){Ek(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Jte=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Sk=function(e){Zte(t,e);function t(){var n=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return n=e.call(this,lD,Jte,r)||this,n.alpha=1,n}return t.prototype._loadMatrix=function(n,r){r===void 0&&(r=!1);var i=n;r&&(this._multiply(i,this.uniforms.m,n),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(n,r,i){return n[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],n[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],n[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],n[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],n[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],n[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],n[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],n[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],n[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],n[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],n[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],n[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],n[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],n[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],n[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],n[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],n[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],n[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],n[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],n[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],n},t.prototype._colorMatrix=function(n){var r=new Float32Array(n);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},t.prototype.brightness=function(n,r){var i=[n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.greyscale=function(n,r){var i=[n,n,n,0,0,n,n,n,0,0,n,n,n,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.blackAndWhite=function(n){var r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.hue=function(n,r){n=(n||0)/180*Math.PI;var i=Math.cos(n),o=Math.sin(n),a=Math.sqrt,s=1/3,u=a(s),c=i+(1-i)*s,l=s*(1-i)-u*o,f=s*(1-i)+u*o,h=s*(1-i)+u*o,p=i+s*(1-i),d=s*(1-i)-u*o,m=s*(1-i)-u*o,g=s*(1-i)+u*o,v=i+s*(1-i),b=[c,l,f,0,0,h,p,d,0,0,m,g,v,0,0,0,0,0,1,0];this._loadMatrix(b,r)},t.prototype.contrast=function(n,r){var i=(n||0)+1,o=-.5*(i-1),a=[i,0,0,0,o,0,i,0,0,o,0,0,i,0,o,0,0,0,1,0];this._loadMatrix(a,r)},t.prototype.saturate=function(n,r){n===void 0&&(n=0);var i=n*2/3+1,o=(i-1)*-.5,a=[i,o,o,0,0,o,i,o,0,0,o,o,i,0,0,0,0,0,1,0];this._loadMatrix(a,r)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(n){var r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.sepia=function(n){var r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.technicolor=function(n){var r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.polaroid=function(n){var r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.toBGR=function(n){var r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.kodachrome=function(n){var r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.browni=function(n){var r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.vintage=function(n){var r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.colorTone=function(n,r,i,o,a){n=n||.2,r=r||.15,i=i||16770432,o=o||3375104;var s=(i>>16&255)/255,u=(i>>8&255)/255,c=(i&255)/255,l=(o>>16&255)/255,f=(o>>8&255)/255,h=(o&255)/255,p=[.3,.59,.11,0,0,s,u,c,n,0,l,f,h,r,0,s-l,u-f,c-h,0,0];this._loadMatrix(p,a)},t.prototype.night=function(n,r){n=n||.1;var i=[n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.predator=function(n,r){var i=[11.224130630493164*n,-4.794486999511719*n,-2.8746118545532227*n,0*n,.40342438220977783*n,-3.6330697536468506*n,9.193157196044922*n,-2.951810836791992*n,0*n,-1.316135048866272*n,-3.2184197902679443*n,-4.2375030517578125*n,7.476448059082031*n,0*n,.8044459223747253*n,0,0,0,1,0];this._loadMatrix(i,r)},t.prototype.lsd=function(n){var r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,n)},t.prototype.reset=function(){var n=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(n,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(n){this.uniforms.m=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(n){this.uniforms.uAlpha=n},enumerable:!1,configurable:!0}),t}(Gs);Sk.prototype.grayscale=Sk.prototype.greyscale;/*!
 * @pixi/filter-displacement - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var wk=function(e,t){return wk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},wk(e,t)};function ere(e,t){wk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var tre=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,rre=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,nre=function(e){ere(t,e);function t(n,r){var i=this,o=new an;return n.renderable=!1,i=e.call(this,rre,tre,{mapSampler:n._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=n,i.maskMatrix=o,r==null&&(r=20),i.scale=new An(r,r),i}return t.prototype.apply=function(n,r,i,o){this.uniforms.filterMatrix=n.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,s=Math.sqrt(a.a*a.a+a.b*a.b),u=Math.sqrt(a.c*a.c+a.d*a.d);s!==0&&u!==0&&(this.uniforms.rotation[0]=a.a/s,this.uniforms.rotation[1]=a.b/s,this.uniforms.rotation[2]=a.c/u,this.uniforms.rotation[3]=a.d/u),n.applyFilter(this,r,i,o)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(n){this.uniforms.mapSampler=n},enumerable:!1,configurable:!0}),t}(Gs);/*!
 * @pixi/filter-fxaa - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ak=function(e,t){return Ak=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ak(e,t)};function ire(e,t){Ak(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ore=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,are=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,sre=function(e){ire(t,e);function t(){return e.call(this,ore,are)||this}return t}(Gs);/*!
 * @pixi/filter-noise - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ok=function(e,t){return Ok=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ok(e,t)};function lre(e,t){Ok(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ure=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,cre=function(e){lre(t,e);function t(n,r){n===void 0&&(n=.5),r===void 0&&(r=Math.random());var i=e.call(this,lD,ure,{uNoise:0,uSeed:0})||this;return i.noise=n,i.seed=r,i}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(n){this.uniforms.uNoise=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(n){this.uniforms.uSeed=n},enumerable:!1,configurable:!0}),t}(Gs);/*!
 * @pixi/mixin-cache-as-bitmap - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var d6=new an;sn.prototype._cacheAsBitmap=!1;sn.prototype._cacheData=null;var hre=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return e}();Object.defineProperties(sn.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t;e?(this._cacheData||(this._cacheData=new hre),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});sn.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};sn.prototype._initCachedDisplayObject=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.alpha;this.alpha=1,e.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters){var r=this.filters[0].padding;n.pad(r)}n.ceil(ft.RESOLUTION);var i=e.renderTexture.current,o=e.renderTexture.sourceFrame.clone(),a=e.renderTexture.destinationFrame.clone(),s=e.projection.transform,u=lc.create({width:n.width,height:n.height}),c="cacheAsBitmap_"+sc();this._cacheData.textureCacheId=c,Rr.addToCache(u.baseTexture,c),xt.addToCache(u,c);var l=this.transform.localTransform.copyTo(d6).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,u,!0,l,!1),e.projection.transform=s,e.renderTexture.bind(i,o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var f=new $p(u);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-(n.x/n.width),f.anchor.y=-(n.y/n.height),f.alpha=t,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)}};sn.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};sn.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=e.context,i=e._projTransform;t.ceil(ft.RESOLUTION);var o=lc.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+sc();this._cacheData.textureCacheId=a,Rr.addToCache(o.baseTexture,a),xt.addToCache(o,a);var s=d6;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,o,!0,s,!1),e.context=r,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new $p(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};sn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};sn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};sn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Rr.removeFromCache(this._cacheData.textureCacheId),xt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};sn.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */sn.prototype.name=null;Zo.prototype.getChildByName=function(e,t){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===e)return this.children[n];if(t)for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n];if(i.getChildByName){var o=this.children[n].getChildByName(e,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */sn.prototype.getGlobalPosition=function(e,t){return e===void 0&&(e=new An),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/mesh-extras - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var kk=function(e,t){return kk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},kk(e,t)};function Kp(e,t){kk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var m6=function(e){Kp(t,e);function t(n,r,i,o){n===void 0&&(n=100),r===void 0&&(r=100),i===void 0&&(i=10),o===void 0&&(o=10);var a=e.call(this)||this;return a.segWidth=i,a.segHeight=o,a.width=n,a.height=r,a.build(),a}return t.prototype.build=function(){for(var n=this.segWidth*this.segHeight,r=[],i=[],o=[],a=this.segWidth-1,s=this.segHeight-1,u=this.width/a,c=this.height/s,l=0;l<n;l++){var f=l%this.segWidth,h=l/this.segWidth|0;r.push(f*u,h*c),i.push(f/a,h/s)}for(var p=a*s,l=0;l<p;l++){var d=l%a,m=l/a|0,g=m*this.segWidth+d,v=m*this.segWidth+d+1,b=(m+1)*this.segWidth+d,y=(m+1)*this.segWidth+d+1;o.push(g,v,b,v,y,b)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(Cy),g6=function(e){Kp(t,e);function t(n,r,i){n===void 0&&(n=200),i===void 0&&(i=0);var o=e.call(this,new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6))||this;return o.points=r,o._width=n,o.textureScale=i,o.build(),o}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var n=this.points;if(n){var r=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(n.length<1)){r.data.length/4!==n.length&&(r.data=new Float32Array(n.length*4),i.data=new Float32Array(n.length*4),o.data=new Uint16Array((n.length-1)*6));var a=i.data,s=o.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var u=0,c=n[0],l=this._width*this.textureScale,f=n.length,h=0;h<f;h++){var p=h*4;if(this.textureScale>0){var d=c.x-n[h].x,m=c.y-n[h].y,g=Math.sqrt(d*d+m*m);c=n[h],u+=g/l}else u=h/(f-1);a[p]=u,a[p+1]=0,a[p+2]=u,a[p+3]=1}for(var v=0,h=0;h<f-1;h++){var p=h*2;s[v++]=p,s[v++]=p+1,s[v++]=p+2,s[v++]=p+2,s[v++]=p+1,s[v++]=p+3}i.update(),o.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var n=this.points;if(!(n.length<1)){for(var r=n[0],i,o=0,a=0,s=this.buffers[0].data,u=n.length,c=0;c<u;c++){var l=n[c],f=c*4;c<n.length-1?i=n[c+1]:i=l,a=-(i.x-r.x),o=i.y-r.y;var h=Math.sqrt(o*o+a*a),p=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=h,a/=h,o*=p,a*=p,s[f]=l.x+o,s[f+1]=l.y+a,s[f+2]=l.x-o,s[f+3]=l.y-a,r=l}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(Cy),fre=function(e){Kp(t,e);function t(n,r,i){i===void 0&&(i=0);var o=this,a=new g6(n.height,r,i),s=new Iy(n);return i>0&&(n.baseTexture.wrapMode=As.REPEAT),o=e.call(this,a,s)||this,o.autoUpdate=!0,o}return t.prototype._render=function(n){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),e.prototype._render.call(this,n)},t}(ep),y6=function(e){Kp(t,e);function t(n,r,i){var o=this,a=new m6(n.width,n.height,r,i),s=new Iy(xt.WHITE);return o=e.call(this,a,s)||this,o.texture=n,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var n=this.geometry;n.width=this.shader.texture.width,n.height=this.shader.texture.height,n.build()},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(n){this.shader.texture!==n&&(this.shader.texture=n,this._textureID=-1,n.baseTexture.valid?this.textureUpdated():n.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(n){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,n)},t.prototype.destroy=function(n){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,n)},t}(ep),pre=function(e){Kp(t,e);function t(n,r,i,o,a){n===void 0&&(n=xt.EMPTY);var s=this,u=new Cy(r,i,o);u.getBuffer("aVertexPosition").static=!1;var c=new Iy(n);return s=e.call(this,u,c,null,a)||this,s.autoUpdate=!0,s}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(n){this.geometry.getBuffer("aVertexPosition").data=n},enumerable:!1,configurable:!0}),t.prototype._render=function(n){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,n)},t}(ep),Xv=10,dre=function(e){Kp(t,e);function t(n,r,i,o,a){r===void 0&&(r=Xv),i===void 0&&(i=Xv),o===void 0&&(o=Xv),a===void 0&&(a=Xv);var s=e.call(this,xt.WHITE,4,4)||this;return s._origWidth=n.orig.width,s._origHeight=n.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=r,s._rightWidth=o,s._topHeight=i,s._bottomHeight=a,s.texture=n,s}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(n){this.geometry.getBuffer("aVertexPosition").data=n},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var n=this.vertices,r=this._getMinScale();n[9]=n[11]=n[13]=n[15]=this._topHeight*r,n[17]=n[19]=n[21]=n[23]=this._height-this._bottomHeight*r,n[25]=n[27]=n[29]=n[31]=this._height},t.prototype.updateVerticalVertices=function(){var n=this.vertices,r=this._getMinScale();n[2]=n[10]=n[18]=n[26]=this._leftWidth*r,n[4]=n[12]=n[20]=n[28]=this._width-this._rightWidth*r,n[6]=n[14]=n[22]=n[30]=this._width},t.prototype._getMinScale=function(){var n=this._leftWidth+this._rightWidth,r=this._width>n?1:this._width/n,i=this._topHeight+this._bottomHeight,o=this._height>i?1:this._height/i,a=Math.min(r,o);return a},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(n){this._width=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(n){this._height=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(n){this._leftWidth=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(n){this._rightWidth=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(n){this._topHeight=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(n){this._bottomHeight=n,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var n=this.texture,r=this.geometry.buffers[1].data;this._origWidth=n.orig.width,this._origHeight=n.orig.height;var i=1/this._origWidth,o=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=i*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-i*this._rightWidth,r[9]=r[11]=r[13]=r[15]=o*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(y6);/*!
 * @pixi/sprite-animated - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xk=function(e,t){return xk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},xk(e,t)};function mre(e,t){xk(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var gre=function(e){mre(t,e);function t(n,r){r===void 0&&(r=!0);var i=e.call(this,n[0]instanceof xt?n[0]:n[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=r,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=n,i}return t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(wn.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(wn.shared.add(this.update,this,Fa.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(n){this.stop();var r=this.currentFrame;this._currentTime=n,r!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(n){var r=this.currentFrame;this._currentTime=n,r!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(n){if(this._playing){var r=this.animationSpeed*n,i=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=r/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*n);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var n=this.currentFrame;this._previousFrame!==n&&(this._previousFrame=n,this._texture=this._textures[n],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(n){this.stop(),e.prototype.destroy.call(this,n),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(n){for(var r=[],i=0;i<n.length;++i)r.push(xt.from(n[i]));return new t(r)},t.fromImages=function(n){for(var r=[],i=0;i<n.length;++i)r.push(xt.from(n[i]));return new t(r)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(n){if(n[0]instanceof xt)this._textures=n,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<n.length;r++)this._textures.push(n[r].texture),this._durations.push(n[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var n=Math.floor(this._currentTime)%this._textures.length;return n<0&&(n+=this._textures.length),n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(n){n!==this._autoUpdate&&(this._autoUpdate=n,!this._autoUpdate&&this._isConnectedToTicker?(wn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(wn.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}($p);/*!
 * pixi.js - v5.3.12
 * Compiled Wed, 23 Mar 2022 18:34:28 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ik=function(e,t){return Ik=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ik(e,t)};function zL(e,t){Ik(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Qe="5.0.0";function yre(){var e=this;Object.defineProperties(e,{SVG_SIZE:{get:function(){return ze(Qe,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),e.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return ze(Qe,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),e.Transform}},TransformBase:{get:function(){return ze(Qe,"PIXI.TransformBase class has been removed, use PIXI.Transform"),e.Transform}},TRANSFORM_MODE:{get:function(){return ze(Qe,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return ze(Qe,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),e.Renderer}},CanvasRenderTarget:{get:function(){return ze(Qe,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),e.utils.CanvasRenderTarget}},loader:{get:function(){return ze(Qe,"PIXI.loader instance has moved to PIXI.Loader.shared"),e.Loader.shared}},FilterManager:{get:function(){return ze(Qe,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),e.systems.FilterSystem}},CanvasTinter:{get:function(){return ze("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),e.canvasUtils}},GroupD8:{get:function(){return ze("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),e.groupD8}}}),e.accessibility={},Object.defineProperties(e.accessibility,{AccessibilityManager:{get:function(){return ze("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),e.AccessibilityManager}}}),e.interaction={},Object.defineProperties(e.interaction,{InteractionManager:{get:function(){return ze("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),e.InteractionManager}},InteractionData:{get:function(){return ze("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),e.InteractionData}},InteractionEvent:{get:function(){return ze("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),e.InteractionEvent}}}),e.prepare={},Object.defineProperties(e.prepare,{BasePrepare:{get:function(){return ze("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),e.BasePrepare}},Prepare:{get:function(){return ze("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),e.Prepare}},CanvasPrepare:{get:function(){return ze("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),e.CanvasPrepare}}}),e.extract={},Object.defineProperties(e.extract,{Extract:{get:function(){return ze("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),e.Extract}},CanvasExtract:{get:function(){return ze("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),e.CanvasExtract}}}),e.extras={},Object.defineProperties(e.extras,{TilingSprite:{get:function(){return ze(Qe,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),e.TilingSprite}},TilingSpriteRenderer:{get:function(){return ze(Qe,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),e.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return ze(Qe,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),e.AnimatedSprite}},BitmapText:{get:function(){return ze(Qe,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),e.BitmapText}}}),e.TilingSprite.fromFrame=function(f,h,p){return ze("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),e.TilingSprite.from(f,{width:h,height:p})},e.TilingSprite.fromImage=function(f,h,p,d){return d===void 0&&(d={}),ze("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),d&&typeof d!="object"&&(d={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),d.width=h,d.height=p,e.TilingSprite.from(f,d)},Object.defineProperties(e.utils,{getSvgSize:{get:function(){return ze(Qe,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),e.resources.SVGResource.getSize}}}),e.mesh={},Object.defineProperties(e.mesh,{Mesh:{get:function(){return ze(Qe,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),e.SimpleMesh}},NineSlicePlane:{get:function(){return ze(Qe,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),e.NineSlicePlane}},Plane:{get:function(){return ze(Qe,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),e.SimplePlane}},Rope:{get:function(){return ze(Qe,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),e.SimpleRope}},RawMesh:{get:function(){return ze(Qe,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),e.Mesh}},CanvasMeshRenderer:{get:function(){return ze(Qe,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),e.CanvasMeshRenderer}},MeshRenderer:{get:function(){return ze(Qe,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),e.MeshRenderer}}}),e.particles={},Object.defineProperties(e.particles,{ParticleContainer:{get:function(){return ze(Qe,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),e.ParticleContainer}},ParticleRenderer:{get:function(){return ze(Qe,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),e.ParticleRenderer}}}),e.ticker={},Object.defineProperties(e.ticker,{Ticker:{get:function(){return ze(Qe,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),e.Ticker}},shared:{get:function(){return ze(Qe,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),e.Ticker.shared}}}),e.loaders={},Object.defineProperties(e.loaders,{Loader:{get:function(){return ze(Qe,"PIXI.loaders.Loader class has moved to PIXI.Loader"),e.Loader}},Resource:{get:function(){return ze(Qe,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),e.LoaderResource}},bitmapFontParser:{get:function(){return ze(Qe,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),e.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){ze(Qe,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return ze(Qe,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),e.SpritesheetLoader.use}},getResourcePath:{get:function(){return ze(Qe,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),e.SpritesheetLoader.getResourcePath}}}),e.Loader.addPixiMiddleware=function(f){return ze(Qe,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),e.loaders.Loader.registerPlugin({use:f()})};var t=function(f){return"on"+f.charAt(0).toUpperCase()+f.slice(1)};Object.assign(e.Loader.prototype,{on:function(f){var h=t(f);ze(Qe,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+h+".add")},once:function(f){var h=t(f);ze(Qe,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+h+".once")},off:function(f){var h=t(f);ze(Qe,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+h+".detach")}}),Object.defineProperty(e.extract,"WebGLExtract",{get:function(){return ze(Qe,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),e.Extract}}),Object.defineProperty(e.prepare,"WebGLPrepare",{get:function(){return ze(Qe,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),e.Prepare}}),e.Container.prototype._renderWebGL=function(f){ze(Qe,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(f)},e.Container.prototype.renderWebGL=function(f){ze(Qe,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(f)},e.DisplayObject.prototype.renderWebGL=function(f){ze(Qe,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(f)},e.Container.prototype.renderAdvancedWebGL=function(f){ze(Qe,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(f)},Object.defineProperties(e.settings,{TRANSFORM_MODE:{get:function(){return ze(Qe,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){ze(Qe,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var n=e.BaseTexture;n.prototype.loadSource=function(f){ze(Qe,"PIXI.BaseTexture.loadSource method has been deprecated");var h=e.resources.autoDetectResource(f);h.internal=!0,this.setResource(h),this.update()};var r=!1;Object.defineProperties(n.prototype,{hasLoaded:{get:function(){return ze(Qe,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var f;return ze(Qe,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),(f=this.resource)===null||f===void 0?void 0:f.url},set:function(f){ze(Qe,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=f)}},source:{get:function(){return ze(Qe,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(f){ze(Qe,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=f)}},premultiplyAlpha:{get:function(){return ze("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(f){ze("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(f)}},_id:{get:function(){return r||(ze("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),r=!0),this._batchLocation},set:function(f){this._batchLocation=f}}}),n.fromImage=function(f,h,p,d){ze(Qe,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var m={scale:d,crossorigin:h};return n.from(f,{scaleMode:p,resourceOptions:m})},n.fromCanvas=function(f,h){return ze(Qe,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),n.from(f,{scaleMode:h})},n.fromSVG=function(f,h,p,d){ze(Qe,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var m={scale:d,crossorigin:h};return n.from(f,{scaleMode:p,resourceOptions:m})},Object.defineProperties(e.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return ze("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(f){ze("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(f)}}}),e.Point.prototype.copy=function(f){return ze(Qe,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(f)},e.ObservablePoint.prototype.copy=function(f){return ze(Qe,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(f)},e.Rectangle.prototype.copy=function(f){return ze(Qe,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(f)},e.Matrix.prototype.copy=function(f){return ze(Qe,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(f)},e.systems.StateSystem.prototype.setState=function(f){return ze("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(f)},Object.assign(e.systems.FilterSystem.prototype,{getRenderTarget:function(f,h){return ze(Qe,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,h)},returnRenderTarget:function(f){ze(Qe,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(f)},calculateScreenSpaceMatrix:function(f){ze(Qe,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var h=f.identity(),p=this.activeState,d=p.sourceFrame,m=p.destinationFrame;return h.translate(d.x/m.width,d.y/m.height),h.scale(m.width,m.height),h},calculateNormalizedScreenSpaceMatrix:function(f){ze(Qe,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var h=this.activeState,p=h.sourceFrame,d=h.destinationFrame,m=f.identity();m.translate(p.x/d.width,p.y/d.height);var g=d.width/p.width,v=d.height/p.height;return m.scale(g,v),m}}),Object.defineProperties(e.RenderTexture.prototype,{sourceFrame:{get:function(){return ze(Qe,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return ze(Qe,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var i=function(f){zL(h,f);function h(p,d,m,g){var v=this;return ze(Qe,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),v=f.call(this,!0,p,d,m,g)||this,v}return h}(e.filters.BlurFilterPass),o=function(f){zL(h,f);function h(p,d,m,g){var v=this;return ze(Qe,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),v=f.call(this,!1,p,d,m,g)||this,v}return h}(e.filters.BlurFilterPass);Object.assign(e.filters,{BlurXFilter:i,BlurYFilter:o});var a=e.Sprite,s=e.Texture,u=e.Graphics;u.prototype.generateCanvasTexture||(u.prototype.generateCanvasTexture=function(){ze(Qe,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(u.prototype,"graphicsData",{get:function(){return ze(Qe,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}});function c(f,h,p,d){return ze(Qe,"PIXI.Sprite."+f+" method is deprecated, use PIXI.Sprite.from"),a.from(h,{resourceOptions:{scale:d,crossorigin:p}})}a.fromImage=c.bind(null,"fromImage"),a.fromSVG=c.bind(null,"fromSVG"),a.fromCanvas=c.bind(null,"fromCanvas"),a.fromVideo=c.bind(null,"fromVideo"),a.fromFrame=c.bind(null,"fromFrame");function l(f,h,p,d){return ze(Qe,"PIXI.Texture."+f+" method is deprecated, use PIXI.Texture.from"),s.from(h,{resourceOptions:{scale:d,crossorigin:p}})}s.fromImage=l.bind(null,"fromImage"),s.fromSVG=l.bind(null,"fromSVG"),s.fromCanvas=l.bind(null,"fromCanvas"),s.fromVideo=l.bind(null,"fromVideo"),s.fromFrame=l.bind(null,"fromFrame"),Object.defineProperty(e.AbstractRenderer.prototype,"autoResize",{get:function(){return ze(Qe,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(f){ze(Qe,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=f}}),Object.defineProperty(e.Renderer.prototype,"textureManager",{get:function(){return ze(Qe,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),e.utils.mixins={mixin:function(){ze(Qe,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){ze(Qe,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){ze(Qe,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(e.BitmapText.prototype,"font",{get:function(){return ze("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(f){if(ze("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),!!f){var h={font:f};this._upgradeStyle(h),h.fontSize=h.fontSize||e.BitmapFont.available[h.fontName].size,this._fontName=h.fontName,this._fontSize=h.fontSize,this.dirty=!0}}})}Hs.registerPlugin("accessibility",$U);Hs.registerPlugin("extract",H4);Hs.registerPlugin("interaction",JU);Hs.registerPlugin("particle",W4);Hs.registerPlugin("prepare",o6);Hs.registerPlugin("batch",G4);Hs.registerPlugin("tilingSprite",u6);uc.registerPlugin(f6);uc.registerPlugin(s6);xy.registerPlugin(KU);xy.registerPlugin(Y4);var v6="5.3.12",vre={AlphaFilter:Yte,BlurFilter:Qte,BlurFilterPass:Tk,ColorMatrixFilter:Sk,DisplacementFilter:nre,FXAAFilter:sre,NoiseFilter:cre};const b6=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return Cs},AbstractBatchRenderer:j4,AbstractRenderer:R4,AccessibilityManager:$U,AnimatedSprite:gre,AppLoaderPlugin:Y4,Application:xy,Attribute:nk,get BLEND_MODES(){return gt},get BUFFER_BITS(){return Gg},BasePrepare:n6,BaseRenderTexture:Xm,BaseTexture:Rr,BatchDrawCall:Z0,BatchGeometry:uD,BatchPluginFactory:F4,BatchRenderer:G4,BatchShaderGenerator:B4,BatchTextureArray:J0,BitmapFont:_l,BitmapFontData:Vg,BitmapFontLoader:f6,BitmapText:Ute,Bounds:zg,Buffer:Sn,get CLEAR_MODES(){return Lo},Circle:VU,Container:Zo,CountLimiter:r6,DEG_TO_RAD:zU,get DRAW_MODES(){return To},DisplayObject:sn,get ENV(){return Ba},Ellipse:YU,Extract:H4,get FORMATS(){return qf},FillStyle:cD,Filter:Gs,FilterState:l4,Framebuffer:Q0,get GC_MODES(){return $0},GLFramebuffer:f4,GLProgram:x4,GLTexture:qb,GRAPHICS_CURVES:Zf,Geometry:qp,Graphics:fD,GraphicsData:hk,GraphicsGeometry:e6,IGLUniformData:Nee,InteractionData:ek,InteractionEvent:QU,InteractionManager:JU,InteractionTrackingData:Xb,get LINE_CAP(){return ms},get LINE_JOIN(){return ds},LineStyle:t6,Loader:uc,LoaderResource:Wm,get MASK_TYPES(){return Di},get MIPMAP_MODES(){return $f},get MSAA_QUALITY(){return oc},MaskData:m4,Matrix:an,Mesh:ep,MeshBatchUvs:c6,MeshGeometry:Cy,MeshMaterial:Iy,NineSlicePlane:dre,ObjectRenderer:Oy,ObservablePoint:Gu,PI_2:Kf,get PRECISION(){return Vo},ParticleContainer:ate,ParticleRenderer:W4,PlaneGeometry:m6,Point:An,Polygon:Tf,Prepare:o6,Program:ky,Quad:s4,QuadUv:sD,RAD_TO_DEG:UU,get RENDERER_TYPE(){return Wf},Rectangle:hr,RenderTexture:lc,RenderTexturePool:o4,Renderer:Hs,RopeGeometry:g6,RoundedRectangle:XU,Runner:Nn,get SCALE_MODES(){return Ia},get SHAPES(){return Wr},Shader:ql,SimpleMesh:pre,SimplePlane:y6,SimpleRope:fre,Sprite:$p,SpriteMaskFilter:T4,Spritesheet:a6,SpritesheetLoader:s6,State:Ql,System:Fi,get TARGETS(){return Bl},get TEXT_GRADIENT(){return Jf},get TYPES(){return nn},TemporaryDisplayObject:tD,Text:pD,TextMetrics:xo,TextStyle:cc,Texture:xt,TextureLoader:V4,TextureMatrix:NE,TextureUvs:aD,Ticker:wn,TickerPlugin:KU,TilingSprite:Pte,TilingSpriteRenderer:u6,TimeLimiter:Cte,Transform:JP,get UPDATE_PRIORITY(){return Fa},UniformGroup:Fl,VERSION:v6,ViewableBuffer:L4,get WRAP_MODES(){return As},accessibleTarget:qU,autoDetectRenderer:N4,checkMaxIfStatementsInShader:_4,defaultFilterVertex:lD,defaultVertex:M4,filters:vre,graphicsUtils:hte,groupD8:Mr,interactiveTarget:ZU,isMobile:_o,resources:see,settings:ft,systems:Uee,uniformParsers:Wb,useDeprecated:yre,utils:$J},Symbol.toStringTag,{value:"Module"}));(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('._context-menu_18ock_1{position:fixed;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);border-radius:3px;font-size:12px;cursor:default;padding:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d}._context-menu-dark_18ock_12{color:#ccc;background-color:#444444f7}._context-menu-icon_18ock_17{display:inline-block;margin-right:3px;vertical-align:middle}._context-menu-icon_18ock_17>svg{width:30px;height:20px}._context-menu-item_18ock_27{padding:2px;white-space:nowrap;border-radius:2px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._context-menu-item_18ock_27:hover{background:#337ab7;color:#fff}._context-menu-hr_18ock_38{margin-top:5px;margin-bottom:5px;border:0;border-top:1px solid rgba(0,0,0,.1)}._play-icon_18ock_45{width:12px;height:12px;position:absolute;right:5px}._context-menu-span_18ock_52{margin-right:20px;vertical-align:middle;display:inline-block;line-height:normal;white-space:nowrap}._context-menu-thumbnail_18ock_60{margin-right:10px;border:1px solid #888888}._context-menu-thumbnail-inline_18ock_65{display:inline-block;margin-right:10px;vertical-align:middle}._multitrack-header_1yz7l_1,._multitrack-header-focus_1yz7l_2,._multitrack-header-squeazed_1yz7l_3{position:relative;display:flex;justify-content:space-between;height:24px;margin-top:4px;margin-bottom:4px;color:#999;font-size:12px;line-height:24px;vertical-align:middle;border:0;border-radius:3px;background:#e5e5e5;transition:height .15s cubic-bezier(.25,.1,.25,1),margin .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20{background:#222}._multitrack-header-focus_1yz7l_2{height:32px;margin-top:0;margin-bottom:0}._multitrack-header-id_1yz7l_30{padding-left:3px}._multitrack-header-id_1yz7l_30:before{content:"ID:";font-weight:700;padding-right:5px}._multitrack-header-left_1yz7l_39{display:flex;flex-grow:1}._multitrack-header-grabber_1yz7l_44,._multitrack-header-grabber-squeazed_1yz7l_45{display:flex;align-items:center;justify-content:center;width:24px;height:100%;cursor:move;border-radius:3px 0 0 3px;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-grabber_1yz7l_44:hover,._multitrack-header-grabber-squeazed_1yz7l_45:hover{background:#999}._multitrack-header-grabber_1yz7l_44:hover div,._multitrack-header-grabber-squeazed_1yz7l_45:hover div{background:#fff}._multitrack-header-grabber_1yz7l_44 div,._multitrack-header-grabber-squeazed_1yz7l_45 div{width:1px;height:50%;margin:1px;background:#999;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20 ._multitrack-header-grabber_1yz7l_44 div{background:#666}._multitrack-header-grabber-squeazed_1yz7l_45{width:19.2px}._multitrack-header-search_1yz7l_80{position:relative;flex-grow:1;height:100%;margin-right:12px}._multitrack-header-search_1yz7l_80:after{position:absolute;top:3px;bottom:3px;right:-12px;display:block;content:"";width:1px;margin:0 6px;background:#cccccc}._multitrack-header-dark_1yz7l_20 ._multitrack-header-search_1yz7l_80:after{background:#666}._multitrack-header-nav-list_1yz7l_102,._multitrack-header_1yz7l_1>nav{display:flex}._multitrack-header-icon_1yz7l_107,._multitrack-header-icon-squeazed_1yz7l_108{width:24px;height:100%;padding:6px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-icon_1yz7l_107 g,._multitrack-header-icon-squeazed_1yz7l_108 g{stroke:#999}._multitrack-header-icon_1yz7l_107:hover,._multitrack-header-icon_1yz7l_107:active,._multitrack-header-icon_1yz7l_107:focus,._multitrack-header-icon-squeazed_1yz7l_108:hover,._multitrack-header-icon-squeazed_1yz7l_108:active,._multitrack-header-icon-squeazed_1yz7l_108:focus{color:#fff;background:#337ab7}._multitrack-header-icon_1yz7l_107:hover g,._multitrack-header-icon_1yz7l_107:active g,._multitrack-header-icon_1yz7l_107:focus g,._multitrack-header-icon-squeazed_1yz7l_108:hover g,._multitrack-header-icon-squeazed_1yz7l_108:active g,._multitrack-header-icon-squeazed_1yz7l_108:focus g{stroke:#fff}._multitrack-header-icon_1yz7l_107:last-child,._multitrack-header-icon-squeazed_1yz7l_108:last-child{border-radius:0 3px 3px 0}._mouse-tool-selection_1yz7l_136{color:#fff;border-radius:3px 0 0 3px;background:#337ab7}._multitrack-header-icon-squeazed_1yz7l_108{width:20px 5;padding-left:3px;padding-right:3px}._track-control_w7hx2_1,._track-control-vertical_w7hx2_2{position:absolute;z-index:1;display:flex;background:rgba(255,255,255,.75);right:2px;top:2px;border-radius:2.5px;box-shadow:0 0 0 1px #0000000d,0 0 3px #0000001a;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1)}._track-control-dark_w7hx2_15,._track-control-dark_w7hx2_15 ._track-control-active_w7hx2_16{background:rgba(40,40,40,.85)}._track-control-vertical_w7hx2_2{flex-direction:column-reverse}._track-control-left_w7hx2_24{left:2px;right:auto}._track-control-active_w7hx2_16,._track-control-vertical-active_w7hx2_30{opacity:1;z-index:1}._track-control-active_w7hx2_16:hover,._track-control-vertical-active_w7hx2_30:hover{background:rgb(255,255,255);box-shadow:0 0 0 1px #0000001a,0 0 3px #0003}._track-control-dark_w7hx2_15._track-control-active_w7hx2_16:hover{background:rgba(34,34,34,.95)}._track-control-padding-right_w7hx2_48{right:80px}._track-control-button_w7hx2_52{width:20px;height:20px;padding:4px;cursor:pointer;opacity:.66;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button_w7hx2_52:first-child{border-radius:2.5px 0 0 2.5px}._track-control-button_w7hx2_52:last-child{border-radius:0 2.5px 2.5px 0}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52{color:#ccc}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button-vertical_w7hx2_81:first-child{border-radius:0 0 2.5px 2.5px}._track-control-button-vertical_w7hx2_81:last-child{border-radius:2.5px 2.5px 0 0}._center-track_fiu64_1{position:relative;background:transparent}._center-track-container_fiu64_6{position:absolute;z-index:1}._track-range-selection_5bcsr_1{position:absolute;z-index:-1;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1)}._track-range-selection-active_5bcsr_8{z-index:1;opacity:1}._track-range-selection-group-inactive_5bcsr_22{display:none}._track-range-selection-group-brush-selection_5bcsr_26{outline:2px solid rgba(0,0,0,.33);fill:#000;fill-opacity:.1}._drag-listening-div-active_19gkt_1{z-index:10;box-shadow:inset 0 0 3px red}._gallery-tracks_fbxxi_1{position:relative;top:0;left:0;width:100%;height:100%}._gallery-track_fbxxi_1{position:absolute;box-sizing:border-box;top:0;right:0;bottom:0;left:0}._gallery-sub-track_fbxxi_18,._gallery-invisible-track_fbxxi_19{position:absolute}._tiled-plot_1y7td_1{position:relative;flex:1;overflow:hidden}._horizontalList_1y7td_7{display:flex;width:600px;height:300px;white-space:nowrap}._list_1y7td_14{width:400px;height:600px;overflow:hidden;-webkit-overflow-scrolling:touch}._stylizedList_1y7td_21{position:relative;z-index:0;background-color:#f3f3f3;outline:none}._stylizedItem_1y7td_28{position:relative;display:flex;align-items:center;width:100%;background-color:transparent;-webkit-user-select:none;user-select:none;color:#333;font-weight:400}._stylizedHelper_1y7td_39{box-shadow:0 5px 5px -5px #0003,0 -5px 5px -5px #0003;background-color:#fffc;cursor:row-resize}._stylizedHelper_1y7td_39._horizontalItem_1y7td_44{cursor:col-resize}._horizontalItem_1y7td_44{display:flex;flex-shrink:0;align-items:center;justify-content:center}._resizable-track_1y7td_55{width:100%;height:100%}path._domain_1y7td_60{stroke-width:0px}._top-right-handle_cizw2_1,._bottom-right-handle_cizw2_2{border-right:black solid;border-top:black solid}._top-left-handle_cizw2_7,._bottom-left-handle_cizw2_8{border-left:black solid;border-top:black solid}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14,._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{position:absolute;opacity:0;transition:transform .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._draggable-div_cizw2_22{background-color:transparent;box-sizing:border-box}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{width:10px;height:4px;border-top:1px solid black;border-bottom:1px solid black}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{margin:4px 7px}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{width:4px;height:10px;border-left:1px solid black;border-right:1px solid black}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{margin:7px 4px}._draggable-div_cizw2_22:hover ._top-draggable-handle_cizw2_13,._draggable-div_cizw2_22:hover ._bottom-draggable-handle_cizw2_14,._draggable-div_cizw2_22:hover ._left-draggable-handle_cizw2_15,._draggable-div_cizw2_22:hover ._right-draggable-handle_cizw2_16{opacity:.5;background:rgba(255,255,255,.75);box-shadow:0 0 3px 1px #ffffffbf;border-radius:3px}._top-draggable-handle_cizw2_13:hover,._top-draggable-handle_cizw2_13:active,._bottom-draggable-handle_cizw2_14:hover,._bottom-draggable-handle_cizw2_14:active,._left-draggable-handle_cizw2_15:hover,._left-draggable-handle_cizw2_15:active,._right-draggable-handle_cizw2_16:hover,._right-draggable-handle_cizw2_16:active{opacity:1!important;transform:scale(2)}._top-draggable-handle_cizw2_13:hover ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:hover ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:hover ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:hover ._right-draggable-handle-grabber_cizw2_44,._top-draggable-handle_cizw2_13:active ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:active ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:active ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:active ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:hover ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:hover ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:hover ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:hover ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:active ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:active ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:active ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:active ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:hover ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:hover ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:hover ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:hover ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:active ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:active ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:active ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:active ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:hover ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:hover ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:hover ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:hover ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:active ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:active ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:active ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:active ._right-draggable-handle-grabber_cizw2_44{box-shadow:0 0 3px 1px #0089ff;background:#0089ff}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14{height:12px;cursor:row-resize}._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{width:12px;cursor:col-resize}._horizontal-tiled-plot_1bqkg_1{position:relative}._button_1wnjn_1{display:flex;align-items:center;box-sizing:border-box;padding:.5em;color:#000;font-size:1em;line-height:1em;border:0;border-radius:2.5px;background:#fff;box-shadow:0 0 0 1px #ccc;transition:transform .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1);-webkit-appearance:none}._button_1wnjn_1:hover{background:#f2f2f2;box-shadow:0 0 0 1px #ccc}._button_1wnjn_1:focus{box-shadow:0 0 0 2px #0089ff}._button_1wnjn_1:active{transform:scale(.9)}._button_1wnjn_1:hover,._button_1wnjn_1:focus,._button_1wnjn_1:active{cursor:pointer;outline:none}._button-shortcut_1wnjn_35{padding:.1em 5px;color:#999;font-size:.8em;transition:color .15s cubic-bezier(.25,.1,.25,1)}._cross_2ke8w_1{position:relative;width:1em;height:1em}._cross_2ke8w_1:before,._cross_2ke8w_1:after{content:"";display:block;position:absolute;top:50%;left:0;width:1em;height:1px;background:black;transform-origin:center}._cross_2ke8w_1:before{-webkit-transform:translate(0,-50%) rotate(45deg);-moz-transform:translate(0,-50%) rotate(45deg);transform:translateY(-50%) rotate(45deg)}._cross_2ke8w_1:after{-webkit-transform:translate(0,-50%) rotate(-45deg);-moz-transform:translate(0,-50%) rotate(-45deg);transform:translateY(-50%) rotate(-45deg)}._modal-background_zzhoe_1{position:absolute;z-index:1000;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.666);animation:_fade-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1;transition:opacity .2s cubic-bezier(.25,.1,.25,1)}._modal-hide_zzhoe_13{opacity:0}._modal-wrap_zzhoe_17{position:absolute;top:20px;right:20px;bottom:20px;left:20px}._modal-window_zzhoe_25{position:relative;width:100%;max-width:640px;max-height:100%;margin-left:auto;margin-right:auto;color:#000;border-radius:5px;background:#fff;animation:_fade-scale-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1}._modal-window-max-height_zzhoe_38{height:100%}._modal-content_zzhoe_42{padding:10px}@keyframes _fade-in_zzhoe_1{0%{opacity:0}to{opacity:1}}@keyframes _fade-scale-in_zzhoe_1{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}._dialog-header_wp50s_1{position:relative;z-index:2;display:flex;justify-content:space-between;margin:0 -10px 10px;padding:0 10px 10px;border-bottom:1px solid #cccccc}._dialog-header_wp50s_1 h3{margin:0;padding:0;font-size:20px;line-height:1em}._dialog-header_wp50s_1 button{font-size:10px}._dialog-main-max-height_wp50s_20{position:absolute;z-index:1;top:40px;right:0;bottom:50px;left:0;padding:10px;overflow:auto}._dialog-footer_wp50s_31,._dialog-footer-max-height_wp50s_31{display:flex;justify-content:space-between;margin:10px -10px 0;padding:10px 10px 0;border-top:1px solid #cccccc}._dialog-footer_wp50s_31 button,._dialog-footer-max-height_wp50s_31 button{font-size:14px}._dialog-footer-max-height_wp50s_31{position:absolute;z-index:2;left:10px;right:10px;bottom:10px}table.table-track-options{border-collapse:collapse;margin-left:auto;margin-right:auto}td.td-track-options{border:1px solid #fff;outline:none;padding:3px;position:relative;font-family:Roboto,sans-serif;font-size:14px;color:#666}.cell-label{position:absolute;left:0;top:0;margin-left:5px;color:#777}.modal-dialog{position:relative;display:table;overflow-y:auto;overflow-x:auto;width:auto;min-width:300px;margin:auto}._track-renderer_11dwb_1{position:relative}._track-renderer-element_11dwb_5,._track-renderer-events_11dwb_6{position:absolute;top:0;right:0;bottom:0;left:0;z-index:-1}._track-renderer-events_11dwb_6{z-index:1}.tileset-finder-label{font-weight:700}.tileset-finder-search-box{margin-left:10px}.tileset-finder-search-bar{display:flex;margin-left:5px;justify-content:space-between;align-items:center}.tileset-finder-checkbox-tree{margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px}.react-checkbox-tree{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;font-size:16px}.react-checkbox-tree>ol{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.react-checkbox-tree ol{margin:0;padding-left:0;list-style-type:none}.react-checkbox-tree ol ol{padding-left:24px}.react-checkbox-tree button{line-height:normal;color:inherit}.react-checkbox-tree button:disabled{cursor:not-allowed}.react-checkbox-tree .rct-bare-label{cursor:default}.react-checkbox-tree label{margin-bottom:0;cursor:pointer}.react-checkbox-tree label:hover{background:rgba(51,51,204,.1)}.react-checkbox-tree label:active,.react-checkbox-tree label:focus{background:rgba(51,51,204,.15)}.react-checkbox-tree:not(.rct-native-display) input{display:none}.react-checkbox-tree.rct-native-display input{margin:0 5px}.react-checkbox-tree .rct-icon{display:inline-block;text-align:center;text-rendering:auto;font-family:"Font Awesome 5 Free",FontAwesome,sans-serif;font-weight:400;font-variant:normal;font-style:normal}.rct-disabled>.rct-text>label{opacity:.75;cursor:not-allowed}.rct-disabled>.rct-text>label:hover{background:transparent}.rct-disabled>.rct-text>label:active{background:transparent}.rct-text{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.rct-options{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:.5rem;text-align:right}.rct-option{opacity:.75;border:0;background:none;cursor:pointer;padding:0 4px;font-size:18px}.rct-option:hover{opacity:1}.rct-option+.rct-option{margin-left:2px}.rct-collapse,.rct-checkbox,.rct-node-icon{padding:0 5px}.rct-collapse *,.rct-checkbox *,.rct-node-icon *{display:inline-block;margin:0;width:14px}.rct-collapse{-ms-flex-item-align:stretch;align-self:stretch;border:0;background:none;line-height:normal;color:inherit;font-size:12px}.rct-collapse.rct-collapse-btn{cursor:pointer}.rct-collapse>.rct-icon-expand-close{opacity:.5}.rct-collapse>.rct-icon-expand-close:hover{opacity:1}.rct-native-display .rct-checkbox{display:none}.rct-node-clickable{cursor:pointer}.rct-node-clickable:hover{background:rgba(51,51,204,.1)}.rct-node-clickable:focus{outline:0;background:rgba(51,51,204,.2)}.rct-node-icon{color:#33c}.rct-title{padding:0 5px}.rct-icons-fa4 .rct-icon-expand-close:before{content:""}.rct-icons-fa4 .rct-icon-expand-open:before{content:""}.rct-icons-fa4 .rct-icon-uncheck:before{content:""}.rct-icons-fa4 .rct-icon-check:before{content:""}.rct-icons-fa4 .rct-icon-half-check:before{opacity:.5;content:""}.rct-icons-fa4 .rct-icon-leaf:before{content:""}.rct-icons-fa4 .rct-icon-parent-open:before{content:""}.rct-icons-fa4 .rct-icon-parent-close:before{content:""}.rct-icons-fa4 .rct-icon-expand-all:before{content:""}.rct-icons-fa4 .rct-icon-collapse-all:before{content:""}.rct-icons-fa5 .rct-icon-expand-close:before{font-weight:900;content:""}.rct-icons-fa5 .rct-icon-expand-open:before{font-weight:900;content:""}.rct-icons-fa5 .rct-icon-uncheck:before{content:""}.rct-icons-fa5 .rct-icon-check:before{content:""}.rct-icons-fa5 .rct-icon-half-check:before{opacity:.5;content:""}.rct-icons-fa5 .rct-icon-leaf:before{content:""}.rct-icons-fa5 .rct-icon-parent-open:before{content:""}.rct-icons-fa5 .rct-icon-parent-close:before{content:""}.rct-icons-fa5 .rct-icon-expand-all:before{content:""}.rct-icons-fa5 .rct-icon-collapse-all:before{content:""}.rct-direction-rtl{direction:rtl}.rct-direction-rtl ol ol{padding-right:24px;padding-left:0}.rct-direction-rtl.rct-icons-fa4 .rct-icon-expand-close:before{content:""}.rct-direction-rtl.rct-icons-fa5 .rct-icon-expand-close:before{content:""}.plot-type-selected{background-color:#0000ff4d}.plot-type-container{overflow-y:scroll;margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px;max-height:15vh}.plot-type-container-empty{margin:5px;padding:3px 8px;border:1px solid #aaaaaa;background-color:#e8e8e8;border-radius:5px}.plot-type-item{cursor:pointer}.plot-type-item:not(.plot-type-selected):hover{background-color:#3333cc1a}.track-thumbnail{width:30px;height:20px;display:inline-block;margin-right:10;vertical-align:middle}.track-thumbnail>svg{width:20px;height:20px}._collapse-toggle-icon_ub7s6_1:before{font-family:Glyphicons Halflings;content:"";float:left;padding-right:3px}._collapse-toggle-icon_ub7s6_1._collapsed_ub7s6_9:before{content:""}._modal-title_ub7s6_14{font-family:Roboto;font-weight:700}._modal-container_ub7s6_19{position:relative}._modal-container_ub7s6_19 ._modal_ub7s6_14,._modal-container_ub7s6_19 ._modal-backdrop_ub7s6_23{position:absolute}._modal-dialog_ub7s6_27{position:relative;display:table;overflow-y:auto;overflow-x:auto;width:600px;min-width:300px;margin:auto}._vertical-tiled-plot_f3ho8_1{position:relative}._genome-position-search_1l2sx_1,._genome-position-search-focus_1l2sx_2{position:relative;display:flex;align-items:stretch;height:100%;margin-bottom:0;font-size:13.7142857143px;transition:box-shadow .15s cubic-bezier(.25,.1,.25,1),font-size .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-focus_1l2sx_2{box-shadow:0 0 0 1px #337ab7,0 0 3px 1px #337ab7}._genome-position-search-bar_1l2sx_16{position:relative;box-sizing:border-box;width:100%;height:100%;padding:3px;color:#666;font-size:inherit;line-height:24px;border:0;border-radius:3px 0 0 3px;background:transparent}._genome-position-search-bar_1l2sx_16:focus{outline:none;color:#000}._genome-position-search-dark_1l2sx_34 ._genome-position-search-bar_1l2sx_16:focus{color:#e5e5e5}._genome-position-search-bar-button_1l2sx_38,._genome-position-search-bar-button-focus_1l2sx_39{display:block;height:100%;padding:0 8px!important;color:#999;border:0!important;border-radius:0!important;background:transparent;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-button_1l2sx_38:active,._genome-position-search-bar-button_1l2sx_38:focus,._genome-position-search-bar-button_1l2sx_38:hover,._genome-position-search-bar-button-focus_1l2sx_39:active,._genome-position-search-bar-button-focus_1l2sx_39:focus,._genome-position-search-bar-button-focus_1l2sx_39:hover{color:#fff;background:#337ab7}._genome-position-search-bar-button-focus_1l2sx_39{color:#fff;background:#337ab7}._genome-position-search-bar-icon_1l2sx_62,._genome-position-search-bar-icon-focus_1l2sx_63{display:flex;align-items:center;transition:color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-icon_1l2sx_62:first-child,._genome-position-search-bar-icon-focus_1l2sx_63:first-child{margin-left:6px;margin-right:2px}._genome-position-search-bar-icon_1l2sx_62 span,._genome-position-search-bar-icon-focus_1l2sx_63 span{display:block;margin-top:-2px}._genome-position-search-bar-icon-focus_1l2sx_63{color:#337ab7}._genome-position-search-bar-suggestions_1l2sx_83{position:fixed;border-radius:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);padding:2px 0;font-size:90%;overflow:auto;max-height:50%}._btn_1l2sx_95{display:inline-block;margin-bottom:0;font-size:13.7142857143px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}._btn-sm_1l2sx_116{font-size:12px;line-height:1.5;border-radius:3px}._btn-default_1l2sx_122{color:#666;background-color:#fff;border-color:#ccc}._btn-default_1l2sx_122:hover{color:#000;background:#ccc}._btn-default_1l2sx_122:active,._btn-default_1l2sx_122:focus{color:#fff;border-color:#000;background:#000}._genome-position-search_1l2sx_1 ._btn_1l2sx_95{border-radius:0 3px 3px 0}._export-link-dialog-wrapper_p9gxw_1{display:flex}._export-link-dialog-wrapper_p9gxw_1 input{flex-grow:1}._add-track-position-table_wdy5w_1{border-collapse:collapse;margin:5px;color:#666}._add-track-position-table-dark_wdy5w_7{color:#ccc}._add-track-position-other_wdy5w_11{outline:none}._add-track-position-top-center_wdy5w_15{min-width:80px;min-height:20px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-right:1px solid #999;border-radius:2px 2px 0 0}._add-track-position-top-center_wdy5w_15:hover{color:#fff;background-color:#337ab7}._add-track-position-middle-left_wdy5w_30{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-bottom:1px solid #999;border-radius:2px 0 0 2px}._add-track-position-middle-left_wdy5w_30:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-right_wdy5w_45{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 2px 2px 0}._add-track-position-middle-right_wdy5w_45:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-middle_wdy5w_60{text-align:center;outline:none;border:1px solid #999}._add-track-position-middle-middle_wdy5w_60:hover{background-color:#337ab7;color:#fff}._add-track-position-bottom-middle_wdy5w_71{min-height:20px;text-align:center;outline:none;border-left:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 0 2px 2px}._add-track-position-bottom-middle_wdy5w_71:hover{background-color:#337ab7;color:#fff}._add-track-position-span_wdy5w_86{margin:5px}._view-config-editor-header_1hlm6_1{margin:-10px -10px 0;padding:10px;display:flex;justify-content:space-between;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button{display:flex;align-items:center;font-size:14px;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button:hover{background:#e5e5e5}._view-config-editor-header_1hlm6_1 button:hover span{color:#666}._view-config-editor_1hlm6_1{position:absolute;top:50px;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;overflow:auto;font-size:12.5px;height:calc(100% - 80px)}._view-config-log_1hlm6_34{position:absolute;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;min-height:30px;background:#f2f2f2;transition:height .15s cubic-bezier(.25,.1,.25,1)}._view-config-log-header_1hlm6_46{background:#f2f2f2;border-top:1px solid #cccccc;border-bottom:1px solid #cccccc;padding-left:10px;height:30px;display:flex;align-items:center;cursor:pointer;position:sticky;position:-webkit-sticky;top:0}._view-config-log-msg_1hlm6_60{background:#f2f2f2;overflow:auto;height:calc(100% - 30px)}._view-config-log-msg_1hlm6_60 tr,._view-config-log-msg_1hlm6_60 td{outline:none;vertical-align:top}._view-config-log-msg_1hlm6_60 ._title_1hlm6_70{font-weight:700;padding-left:8px;padding-top:8px;width:100px}._view-config-log-msg_1hlm6_60 ._Warning_1hlm6_76{color:orange}._view-config-log-msg_1hlm6_60 ._Success_1hlm6_79{color:green}._view-config-log-msg_1hlm6_60 ._Error_1hlm6_82{color:red}._view-config-log-msg_1hlm6_60 pre{background:white;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}._higlass_1uoq8_1{position:relative}._higlass-dark-theme_1uoq8_5{background:black}._higlass-container-overflow_1uoq8_9,._higlass-scroll-container-overflow_1uoq8_10,._higlass-scroll-container-scroll_1uoq8_11{position:absolute;top:0;right:0;bottom:0;left:0}._higlass-scroll-container-overflow_1uoq8_10{overflow:hidden}._higlass-scroll-container-scroll_1uoq8_11{overflow-x:hidden;overflow-y:auto}._higlass-canvas_1uoq8_28{position:absolute;width:100%;height:100%}._higlass-drawing-surface_1uoq8_34{position:relative}._higlass-svg_1uoq8_38{position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:none}._tiled-area_1uoq8_47{display:flex;flex-direction:column}._track-mouseover-menu_1uoq8_52{position:fixed;z-index:1;margin:17px 0 0 9px;padding:0 .25rem;max-width:50vw;word-wrap:break-word;font-size:.8em;pointer-events:none;background:white;border-radius:.25rem;box-shadow:0 0 0 1px #0000001a,0 0 3px #00000013,0 0 7px #0000000d}.react-grid-layout{position:relative;transition:height .2s ease}.react-grid-item{transition:all .2s ease;transition-property:left,top}.react-grid-item.cssTransforms{transition-property:transform}.react-grid-item.resizing{z-index:1;will-change:width,height}.react-grid-item.react-draggable-dragging{transition:none;z-index:3;will-change:transform}.react-grid-item.react-grid-placeholder{background:red;opacity:.2;transition-duration:.1s;z-index:2;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.react-grid-item>.react-resizable-handle{position:absolute;width:20px;height:20px;bottom:0;right:0;cursor:se-resize}.react-grid-item>.react-resizable-handle:after{content:"";position:absolute;right:3px;bottom:3px;width:5px;height:5px;border-right:2px solid rgba(0,0,0,.4);border-bottom:2px solid rgba(0,0,0,.4)}.react-resizable{position:relative}.react-resizable-handle{position:absolute;width:20px;height:20px;background-repeat:no-repeat;background-origin:content-box;box-sizing:border-box;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+);background-position:bottom right;padding:0 3px 3px 0}.react-resizable-handle-sw{bottom:0;left:0;cursor:sw-resize;transform:rotate(90deg)}.react-resizable-handle-se{bottom:0;right:0;cursor:se-resize}.react-resizable-handle-nw{top:0;left:0;cursor:nw-resize;transform:rotate(180deg)}.react-resizable-handle-ne{top:0;right:0;cursor:ne-resize;transform:rotate(270deg)}.react-resizable-handle-w,.react-resizable-handle-e{top:50%;margin-top:-10px;cursor:ew-resize}.react-resizable-handle-w{left:0;transform:rotate(135deg)}.react-resizable-handle-e{right:0;transform:rotate(315deg)}.react-resizable-handle-n,.react-resizable-handle-s{left:50%;margin-left:-10px;cursor:ns-resize}.react-resizable-handle-n{top:0;transform:rotate(225deg)}.react-resizable-handle-s{bottom:0;transform:rotate(45deg)}code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{background:#b3d4fc}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #dddddd;background-color:#fff}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f8f8f8;border:1px solid #dddddd}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#998;font-style:italic}.token.namespace{opacity:.7}.token.string,.token.attr-value{color:#e3116c}.token.punctuation,.token.operator{color:#393a34}.token.entity,.token.url,.token.symbol,.token.number,.token.boolean,.token.variable,.token.constant,.token.property,.token.regex,.token.inserted{color:#36acaa}.token.atrule,.token.keyword,.token.attr-name,.language-autohotkey .token.selector{color:#00a4db}.token.function,.token.deleted,.language-autohotkey .token.tag{color:#9a050f}.token.tag,.token.selector,.language-autohotkey .token.keyword{color:#00009f}.token.important,.token.function,.token.bold{font-weight:700}.token.italic{font-style:italic}.higlass *{box-sizing:border-box}.higlass .react-resizable-handle{z-index:1}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Gi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Us(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var _6={exports:{}},bre="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_re=bre,Tre=_re;function T6(){}function E6(){}E6.resetWarningCache=T6;var Ere=function(){function e(r,i,o,a,s,u){if(u!==Tre){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:E6,resetWarningCache:T6};return n.PropTypes=n,n};_6.exports=Ere();var zs=_6.exports;const N=Gi(zs);var Ck="http://www.w3.org/1999/xhtml";const Pk={svg:"http://www.w3.org/2000/svg",xhtml:Ck,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Pk.hasOwnProperty(t)?{space:Pk[t],local:e}:e}function Sre(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ck&&t.documentElement.namespaceURI===Ck?t.createElement(e):t.createElementNS(n,e)}}function wre(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function LE(e){var t=Vc(e);return(t.local?wre:Sre)(t)}function Are(){}function Py(e){return e==null?Are:function(){return this.querySelector(e)}}function Ore(e){typeof e!="function"&&(e=Py(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),u,c,l=0;l<a;++l)(u=o[l])&&(c=e.call(u,u.__data__,l,o))&&("__data__"in u&&(c.__data__=u.__data__),s[l]=c);return new Jn(r,this._parents)}function mD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kre(){return[]}function jE(e){return e==null?kre:function(){return this.querySelectorAll(e)}}function xre(e){return function(){var t=e.apply(this,arguments);return t==null?[]:mD(t)}}function Ire(e){typeof e=="function"?e=xre(e):e=jE(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,u,c=0;c<s;++c)(u=a[c])&&(r.push(e.call(u,u.__data__,c,a)),i.push(u));return new Jn(r,i)}function BE(e){return function(){return this.matches(e)}}function S6(e){return function(t){return t.matches(e)}}var Cre=Array.prototype.find;function Pre(e){return function(){return Cre.call(this.children,e)}}function Dre(){return this.firstElementChild}function Rre(e){return this.select(e==null?Dre:Pre(typeof e=="function"?e:S6(e)))}var Nre=Array.prototype.filter;function Mre(){return this.children}function Lre(e){return function(){return Nre.call(this.children,e)}}function jre(e){return this.selectAll(e==null?Mre:Lre(typeof e=="function"?e:S6(e)))}function Bre(e){typeof e!="function"&&(e=BE(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,c=0;c<a;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&s.push(u);return new Jn(r,this._parents)}function w6(e){return new Array(e.length)}function Fre(){return new Jn(this._enter||this._groups.map(w6),this._parents)}function t_(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}t_.prototype={constructor:t_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Gre(e){return function(){return e}}function Hre(e,t,n,r,i,o){for(var a=0,s,u=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new t_(e,o[a]);for(;a<u;++a)(s=t[a])&&(i[a]=s)}function Ure(e,t,n,r,i,o,a){var s,u,c=new Map,l=t.length,f=o.length,h=new Array(l),p;for(s=0;s<l;++s)(u=t[s])&&(h[s]=p=a.call(u,u.__data__,s,t)+"",c.has(p)?i[s]=u:c.set(p,u));for(s=0;s<f;++s)p=a.call(e,o[s],s,o)+"",(u=c.get(p))?(r[s]=u,u.__data__=o[s],c.delete(p)):n[s]=new t_(e,o[s]);for(s=0;s<l;++s)(u=t[s])&&c.get(h[s])===u&&(i[s]=u)}function zre(e){return e.__data__}function Vre(e,t){if(!arguments.length)return Array.from(this,zre);var n=t?Ure:Hre,r=this._parents,i=this._groups;typeof e!="function"&&(e=Gre(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],f=i[c],h=f.length,p=mD(e.call(l,l&&l.__data__,c,r)),d=p.length,m=s[c]=new Array(d),g=a[c]=new Array(d),v=u[c]=new Array(h);n(l,f,m,g,v,p,t);for(var b=0,y=0,_,T;b<d;++b)if(_=m[b]){for(b>=y&&(y=b+1);!(T=g[y])&&++y<d;);_._next=T||null}}return a=new Jn(a,r),a._enter=s,a._exit=u,a}function Yre(){return new Jn(this._exit||this._groups.map(w6),this._parents)}function Xre(e,t,n){var r=this.enter(),i=this,o=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Wre(e){if(!(e instanceof Jn))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=t[s],c=n[s],l=u.length,f=a[s]=new Array(l),h,p=0;p<l;++p)(h=u[p]||c[p])&&(f[p]=h);for(;s<r;++s)a[s]=t[s];return new Jn(a,this._parents)}function qre(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function $re(e){e||(e=Kre);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,u=i[o]=new Array(s),c,l=0;l<s;++l)(c=a[l])&&(u[l]=c);u.sort(t)}return new Jn(i,this._parents).order()}function Kre(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Qre(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zre(){return Array.from(this)}function Jre(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function ene(){let e=0;for(const t of this)++e;return e}function tne(){return!this.node()}function rne(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function nne(e){return function(){this.removeAttribute(e)}}function ine(e){return function(){this.removeAttributeNS(e.space,e.local)}}function one(e,t){return function(){this.setAttribute(e,t)}}function ane(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function sne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function une(e,t){var n=Vc(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ine:nne:typeof t=="function"?n.local?lne:sne:n.local?ane:one)(n,t))}function gD(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cne(e){return function(){this.style.removeProperty(e)}}function hne(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fne(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function pne(e,t,n){return arguments.length>1?this.each((t==null?cne:typeof t=="function"?fne:hne)(e,t,n??"")):ko(this.node(),e)}function ko(e,t){return e.style.getPropertyValue(t)||gD(e).getComputedStyle(e,null).getPropertyValue(t)}function dne(e){return function(){delete this[e]}}function mne(e,t){return function(){this[e]=t}}function gne(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yne(e,t){return arguments.length>1?this.each((t==null?dne:typeof t=="function"?gne:mne)(e,t)):this.node()[e]}function A6(e){return e.trim().split(/^|\s+/)}function yD(e){return e.classList||new O6(e)}function O6(e){this._node=e,this._names=A6(e.getAttribute("class")||"")}O6.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function k6(e,t){for(var n=yD(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function x6(e,t){for(var n=yD(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function vne(e){return function(){k6(this,e)}}function bne(e){return function(){x6(this,e)}}function _ne(e,t){return function(){(t.apply(this,arguments)?k6:x6)(this,e)}}function Tne(e,t){var n=A6(e+"");if(arguments.length<2){for(var r=yD(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?_ne:t?vne:bne)(n,t))}function Ene(){this.textContent=""}function Sne(e){return function(){this.textContent=e}}function wne(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ane(e){return arguments.length?this.each(e==null?Ene:(typeof e=="function"?wne:Sne)(e)):this.node().textContent}function One(){this.innerHTML=""}function kne(e){return function(){this.innerHTML=e}}function xne(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ine(e){return arguments.length?this.each(e==null?One:(typeof e=="function"?xne:kne)(e)):this.node().innerHTML}function Cne(){this.nextSibling&&this.parentNode.appendChild(this)}function Pne(){return this.each(Cne)}function Dne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rne(){return this.each(Dne)}function Nne(e){var t=typeof e=="function"?e:LE(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Mne(){return null}function Lne(e,t){var n=typeof e=="function"?e:LE(e),r=t==null?Mne:typeof t=="function"?t:Py(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function jne(){var e=this.parentNode;e&&e.removeChild(this)}function Bne(){return this.each(jne)}function Fne(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gne(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hne(e){return this.select(e?Gne:Fne)}function Une(e){return arguments.length?this.property("__data__",e):this.node().__data__}function zne(e){return function(t){e.call(this,t,this.__data__)}}function Vne(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Yne(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Xne(e,t,n){return function(){var r=this.__on,i,o=zne(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Wne(e,t,n){var r=Vne(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,l;u<c;++u)for(i=0,l=s[u];i<o;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(s=t?Xne:Yne,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function I6(e,t,n){var r=gD(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function qne(e,t){return function(){return I6(this,e,t)}}function $ne(e,t){return function(){return I6(this,e,t.apply(this,arguments))}}function Kne(e,t){return this.each((typeof t=="function"?$ne:qne)(e,t))}function*Qne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var vD=[null];function Jn(e,t){this._groups=e,this._parents=t}function ta(){return new Jn([[document.documentElement]],vD)}function Zne(){return this}Jn.prototype=ta.prototype={constructor:Jn,select:Ore,selectAll:Ire,selectChild:Rre,selectChildren:jre,filter:Bre,data:Vre,enter:Fre,exit:Yre,join:Xre,merge:Wre,selection:Zne,order:qre,sort:$re,call:Qre,nodes:Zre,node:Jre,size:ene,empty:tne,each:rne,attr:une,style:pne,property:yne,classed:Tne,text:Ane,html:Ine,raise:Pne,lower:Rne,append:Nne,insert:Lne,remove:Bne,clone:Hne,datum:Une,on:Wne,dispatch:Kne,[Symbol.iterator]:Qne};function Wt(e){return typeof e=="string"?new Jn([[document.querySelector(e)]],[document.documentElement]):new Jn([[e]],vD)}function Jne(e){return Wt(LE(e).call(document.documentElement))}var eie=0;function C6(){return new Dk}function Dk(){this._="@"+(++eie).toString(36)}Dk.prototype=C6.prototype={constructor:Dk,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function P6(e){let t;for(;t=e.sourceEvent;)e=t;return e}function yr(e,t){if(e=P6(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function tie(e,t){return e.target&&(e=P6(e),t===void 0&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,n=>yr(n,t))}function rie(e){return typeof e=="string"?new Jn([document.querySelectorAll(e)],[document.documentElement]):new Jn([e==null?[]:mD(e)],vD)}const nie=Object.freeze(Object.defineProperty({__proto__:null,create:Jne,creator:LE,local:C6,matcher:BE,namespace:Vc,namespaces:Pk,pointer:yr,pointers:tie,select:Wt,selectAll:rie,selection:ta,selector:Py,selectorAll:jE,style:ko,window:gD},Symbol.toStringTag,{value:"Module"}));function on(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Qp(e){let t=e,n=e;e.length===1&&(t=(a,s)=>e(a)-s,n=iie(e));function r(a,s,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){const l=u+c>>>1;n(a[l],s)<0?u=l+1:c=l}return u}function i(a,s,u,c){for(u==null&&(u=0),c==null&&(c=a.length);u<c;){const l=u+c>>>1;n(a[l],s)>0?c=l:u=l+1}return u}function o(a,s,u,c){u==null&&(u=0),c==null&&(c=a.length);const l=r(a,s,u,c-1);return l>u&&t(a[l-1],s)>-t(a[l],s)?l-1:l}return{left:r,center:o,right:i}}function iie(e){return(t,n)=>on(e(t),n)}function D6(e){return e===null?NaN:+e}function*oie(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const R6=Qp(on),N6=R6.right,aie=R6.left,sie=Qp(D6).center,Yc=N6;function FE(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function lie(e){return e.length|0}function uie(e){return!(e>0)}function cie(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function hie(e){return t=>e(...t)}function fie(...e){const t=typeof e[e.length-1]=="function"&&hie(e.pop());e=e.map(cie);const n=e.map(lie),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(uie))return o;for(;;){o.push(i.map((s,u)=>e[u][s]));let a=r;for(;++i[a]===n[a];){if(a===0)return t?o.map(t):o;i[a--]=0}}}function pie(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function die(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function bD(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function _D(e,t){const n=bD(e,t);return n&&Math.sqrt(n)}function Kb(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function mie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vie(r.key),r)}}function yie(e,t,n){return t&&gie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vie(e){var t=bie(e,"string");return typeof t=="symbol"?t:String(t)}function bie(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}let dn=function(){function e(){mie(this,e),this._partials=new Float64Array(32),this._n=0}return yie(e,[{key:"add",value:function(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}},{key:"valueOf",value:function(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}]),e}();function _ie(e,t){const n=new dn;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function Tie(e,t){const n=new dn;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}function M6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sie(r.key),r)}}function L6(e,t,n){return t&&Eie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sie(e){var t=wie(e,"string");return typeof t=="symbol"?t:String(t)}function wie(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ca(){return typeof Reflect<"u"&&Reflect.get?Ca=Reflect.get.bind():Ca=function(e,t,n){var r=Aie(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ca.apply(this,arguments)}function Aie(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=to(e),e!==null););return e}function j6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xg(e,t)}function B6(e){var t=F6();return function(){var n=to(e),r;if(t){var i=to(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Oie(this,r)}}function Oie(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TD(e)}function TD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r_(e){var t=typeof Map=="function"?new Map:void 0;return r_=function(n){if(n===null||!kie(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,r)}function r(){return Qb(n,arguments,to(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Xg(r,n)},r_(e)}function Qb(e,t,n){return F6()?Qb=Reflect.construct.bind():Qb=function(r,i,o){var a=[null];a.push.apply(a,i);var s=Function.bind.apply(r,a),u=new s;return o&&Xg(u,o.prototype),u},Qb.apply(null,arguments)}function F6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kie(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function Xg(e,t){return Xg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Xg(e,t)}function to(e){return to=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},to(e)}let n_=function(e){j6(n,e);var t=B6(n);function n(r,i=U6){var o;if(M6(this,n),o=t.call(this),Object.defineProperties(TD(o),{_intern:{value:new Map},_key:{value:i}}),r!=null)for(const[a,s]of r)o.set(a,s);return o}return L6(n,[{key:"get",value:function(r){return Ca(to(n.prototype),"get",this).call(this,Rk(this,r))}},{key:"has",value:function(r){return Ca(to(n.prototype),"has",this).call(this,Rk(this,r))}},{key:"set",value:function(r,i){return Ca(to(n.prototype),"set",this).call(this,G6(this,r),i)}},{key:"delete",value:function(r){return Ca(to(n.prototype),"delete",this).call(this,H6(this,r))}}]),n}(r_(Map)),xie=function(e){j6(n,e);var t=B6(n);function n(r,i=U6){var o;if(M6(this,n),o=t.call(this),Object.defineProperties(TD(o),{_intern:{value:new Map},_key:{value:i}}),r!=null)for(const a of r)o.add(a);return o}return L6(n,[{key:"has",value:function(r){return Ca(to(n.prototype),"has",this).call(this,Rk(this,r))}},{key:"add",value:function(r){return Ca(to(n.prototype),"add",this).call(this,G6(this,r))}},{key:"delete",value:function(r){return Ca(to(n.prototype),"delete",this).call(this,H6(this,r))}}]),n}(r_(Set));function Rk({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function G6({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function H6({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(n),e.delete(r)),n}function U6(e){return e!==null&&typeof e=="object"?e.valueOf():e}function tp(e){return e}function z6(e,...t){return Zp(e,tp,tp,t)}function Iie(e,...t){return Zp(e,Array.from,tp,t)}function V6(e,t,...n){return Zp(e,tp,t,n)}function Cie(e,t,...n){return Zp(e,Array.from,t,n)}function Pie(e,...t){return Zp(e,tp,Y6,t)}function Die(e,...t){return Zp(e,Array.from,Y6,t)}function Y6(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Zp(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);const s=new n_,u=r[a++];let c=-1;for(const l of o){const f=u(l,++c,o),h=s.get(f);h?h.push(l):s.set(f,[l])}for(const[l,f]of s)s.set(l,i(f,a));return t(s)}(e,0)}function X6(e,t){return Array.from(t,n=>e[n])}function Nk(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n=on]=t;if(n.length===1||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const a of t){const s=on(a[i],a[o]);if(s)return s}})):(n=e.map(n),r.sort((i,o)=>on(n[i],n[o]))),X6(e,r)}return e.sort(n)}function Rie(e,t,n){return(t.length===1?Nk(V6(e,t,n),([r,i],[o,a])=>on(i,a)||on(r,o)):Nk(z6(e,n),([r,i],[o,a])=>t(i,a)||on(r,o))).map(([r])=>r)}var Nie=Array.prototype,Mie=Nie.slice;function Wv(e){return function(){return e}}var Mk=Math.sqrt(50),Lk=Math.sqrt(10),jk=Math.sqrt(2);function hc(e,t,n){var r,i=-1,o,a,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),(s=Dy(e,t,n))===0||!isFinite(s))return[];if(s>0){let u=Math.round(e/s),c=Math.round(t/s);for(u*s<e&&++u,c*s>t&&--c,a=new Array(o=c-u+1);++i<o;)a[i]=(u+i)*s}else{s=-s;let u=Math.round(e*s),c=Math.round(t*s);for(u/s<e&&++u,c/s>t&&--c,a=new Array(o=c-u+1);++i<o;)a[i]=(u+i)/s}return r&&a.reverse(),a}function Dy(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Mk?10:o>=Lk?5:o>=jk?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Mk?10:o>=Lk?5:o>=jk?2:1)}function i_(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Mk?i*=10:o>=Lk?i*=5:o>=jk&&(i*=2),t<e?-i:i}function W6(e,t,n){let r;for(;;){const i=Dy(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function q6(e){return Math.ceil(Math.log(FE(e))/Math.LN2)+1}function VL(){var e=tp,t=Kb,n=q6;function r(i){Array.isArray(i)||(i=Array.from(i));var o,a=i.length,s,u=new Array(a);for(o=0;o<a;++o)u[o]=e(i[o],o,i);var c=t(u),l=c[0],f=c[1],h=n(u,l,f);if(!Array.isArray(h)){const g=f,v=+h;if(t===Kb&&([l,f]=W6(l,f,v)),h=hc(l,f,v),h[h.length-1]>=f)if(g>=f&&t===Kb){const b=Dy(l,f,v);isFinite(b)&&(b>0?f=(Math.floor(f/b)+1)*b:b<0&&(f=(Math.ceil(f*-b)+1)/-b))}else h.pop()}for(var p=h.length;h[0]<=l;)h.shift(),--p;for(;h[p-1]>f;)h.pop(),--p;var d=new Array(p+1),m;for(o=0;o<=p;++o)m=d[o]=[],m.x0=o>0?h[o-1]:l,m.x1=o<p?h[o]:f;for(o=0;o<a;++o)s=u[o],l<=s&&s<=f&&d[Yc(h,s,0,p)].push(i[o]);return d}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:Wv(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:Wv([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Array.isArray(i)?Wv(Mie.call(i)):Wv(i),r):n},r}function Bk(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function o_(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function ED(e,t,n=0,r=e.length-1,i=on){for(;r>n;){if(r-n>600){const u=r-n+1,c=t-n+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1),p=Math.max(n,Math.floor(t-c*f/u+h)),d=Math.min(r,Math.floor(t+(u-c)*f/u+h));ED(e,t,p,d,i)}const o=e[t];let a=n,s=r;for(Bd(e,n,t),i(e[r],o)>0&&Bd(e,n,r);a<s;){for(Bd(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?Bd(e,n,s):(++s,Bd(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Bd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Wg(e,t,n){if(e=Float64Array.from(oie(e,n)),!!(r=e.length)){if((t=+t)<=0||r<2)return o_(e);if(t>=1)return Bk(e);var r,i=(r-1)*t,o=Math.floor(i),a=Bk(ED(e,o).subarray(0,o+1)),s=o_(e.subarray(o+1));return a+(s-a)*(i-o)}}function $6(e,t,n=D6){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function Lie(e,t,n){return Math.ceil((n-t)/(2*(Wg(e,.75)-Wg(e,.25))*Math.pow(FE(e),-1/3)))}function jie(e,t,n){return Math.ceil((n-t)/(3.5*_D(e)*Math.pow(FE(e),-1/3)))}function K6(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Fk(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function SD(e,t){return Wg(e,.5,t)}function*Bie(e){for(const t of e)yield*t}function wD(e){return Array.from(Bie(e))}function Q6(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Fie(e,t=Gie){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function Gie(e,t){return[e,t]}function yi(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Hie(e,t=on){let n,r=!1;if(t.length===1){let i;for(const o of e){const a=t(o);(r?on(a,i)<0:on(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function Z6(e,t=on){if(t.length===1)return Q6(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?t(o,o)===0:t(o,n)<0)&&(n=o,r=i);return r}function Uie(e,t=on){let n,r=!1;if(t.length===1){let i;for(const o of e){const a=t(o);(r?on(a,i)>0:on(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function zie(e,t=on){if(t.length===1)return K6(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?t(o,o)===0:t(o,n)>0)&&(n=o,r=i);return r}function Vie(e,t){const n=Z6(e,t);return n<0?void 0:n}const Yie=J6(Math.random);function J6(e){return function(t,n=0,r=t.length){let i=r-(n=+n);for(;i;){const o=e()*i--|0,a=t[i+n];t[i+n]=t[o+n],t[o+n]=a}return t}}function ez(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function tz(e){if(!(o=e.length))return[];for(var t=-1,n=o_(e,Xie),r=new Array(n);++t<n;)for(var i=-1,o,a=r[t]=new Array(o);++i<o;)a[i]=e[i][t];return r}function Xie(e){return e.length}function Wie(){return tz(arguments)}function qie(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const r of e)if(!t(r,++n,e))return!1;return!0}function $ie(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const r of e)if(t(r,++n,e))return!0;return!1}function Kie(e,t){if(typeof t!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of e)t(i,++r,e)&&n.push(i);return n}function Qie(e,t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof t!="function")throw new TypeError("mapper is not a function");return Array.from(e,(n,r)=>t(n,r,e))}function Zie(e,t,n){if(typeof t!="function")throw new TypeError("reducer is not a function");const r=e[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++a}for(;{done:i,value:o}=r.next(),!i;)n=t(n,o,++a,e);return n}function Jie(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function eoe(e,...t){e=new Set(e);for(const n of t)for(const r of n)e.delete(r);return e}function toe(e,t){const n=t[Symbol.iterator](),r=new Set;for(const i of e){if(r.has(i))return!1;let o,a;for(;({value:o,done:a}=n.next())&&!a;){if(Object.is(i,o))return!1;r.add(o)}}return!0}function roe(e){return e instanceof Set?e:new Set(e)}function noe(e,...t){e=new Set(e),t=t.map(roe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function rz(e,t){const n=e[Symbol.iterator](),r=new Set;for(const i of t){if(r.has(i))continue;let o,a;for(;{value:o,done:a}=n.next();){if(a)return!1;if(r.add(o),Object.is(i,o))break}}return!0}function ioe(e,t){return rz(t,e)}function ooe(...e){const t=new Set;for(const n of e)for(const r of n)t.add(r);return t}const aoe=Object.freeze(Object.defineProperty({__proto__:null,Adder:dn,InternMap:n_,InternSet:xie,ascending:on,bin:VL,bisect:Yc,bisectCenter:sie,bisectLeft:aie,bisectRight:N6,bisector:Qp,count:FE,cross:fie,cumsum:pie,descending:die,deviation:_D,difference:eoe,disjoint:toe,every:qie,extent:Kb,fcumsum:Tie,filter:Kie,fsum:_ie,greatest:Uie,greatestIndex:zie,group:z6,groupSort:Rie,groups:Iie,histogram:VL,index:Pie,indexes:Die,intersection:noe,least:Hie,leastIndex:Z6,map:Qie,max:Bk,maxIndex:K6,mean:Fk,median:SD,merge:wD,min:o_,minIndex:Q6,nice:W6,pairs:Fie,permute:X6,quantile:Wg,quantileSorted:$6,quickselect:ED,range:yi,reduce:Zie,reverse:Jie,rollup:V6,rollups:Cie,scan:Vie,shuffle:Yie,shuffler:J6,some:$ie,sort:Nk,subset:ioe,sum:ez,superset:rz,thresholdFreedmanDiaconis:Lie,thresholdScott:jie,thresholdSturges:q6,tickIncrement:Dy,tickStep:i_,ticks:hc,transpose:tz,union:ooe,variance:bD,zip:Wie},Symbol.toStringTag,{value:"Module"}));function Io(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Gk=Symbol("implicit");function AD(){var e=new n_,t=[],n=[],r=Gk;function i(o){let a=e.get(o);if(a===void 0){if(r!==Gk)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new n_;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return AD(t,n).unknown(r)},Io.apply(i,arguments),i}function Ry(){var e=AD().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,s=!1,u=0,c=0,l=.5;delete e.unknown;function f(){var h=t().length,p=i<r,d=p?i:r,m=p?r:i;o=(m-d)/Math.max(1,h-u+c*2),s&&(o=Math.floor(o)),d+=(m-d-o*(h-u))*l,a=o*(1-u),s&&(d=Math.round(d),a=Math.round(a));var g=yi(h).map(function(v){return d+o*v});return n(p?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(h){return arguments.length?(s=!!h,f()):s},e.padding=function(h){return arguments.length?(u=Math.min(1,c=+h),f()):u},e.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),f()):u},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),f()):l},e.copy=function(){return Ry(t(),[r,i]).round(s).paddingInner(u).paddingOuter(c).align(l)},Io.apply(f(),arguments)}function nz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return nz(t())},e}function soe(){return nz(Ry.apply(null,arguments).paddingInner(1))}function Jp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ny(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zl(){}var fc=.7,rp=1/fc,Ef="\\s*([+-]?\\d+)\\s*",qg="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Na="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",loe=/^#([0-9a-f]{3,8})$/,uoe=new RegExp("^rgb\\("+[Ef,Ef,Ef]+"\\)$"),coe=new RegExp("^rgb\\("+[Na,Na,Na]+"\\)$"),hoe=new RegExp("^rgba\\("+[Ef,Ef,Ef,qg]+"\\)$"),foe=new RegExp("^rgba\\("+[Na,Na,Na,qg]+"\\)$"),poe=new RegExp("^hsl\\("+[qg,Na,Na]+"\\)$"),doe=new RegExp("^hsla\\("+[qg,Na,Na,qg]+"\\)$"),YL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jp(Zl,fn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:XL,formatHex:XL,formatHsl:moe,formatRgb:WL,toString:WL});function XL(){return this.rgb().formatHex()}function moe(){return iz(this).formatHsl()}function WL(){return this.rgb().formatRgb()}function fn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=loe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qL(t):n===3?new Ln(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uoe.exec(e))?new Ln(t[1],t[2],t[3],1):(t=coe.exec(e))?new Ln(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hoe.exec(e))?qv(t[1],t[2],t[3],t[4]):(t=foe.exec(e))?qv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=poe.exec(e))?QL(t[1],t[2]/100,t[3]/100,1):(t=doe.exec(e))?QL(t[1],t[2]/100,t[3]/100,t[4]):YL.hasOwnProperty(e)?qL(YL[e]):e==="transparent"?new Ln(NaN,NaN,NaN,0):null}function qL(e){return new Ln(e>>16&255,e>>8&255,e&255,1)}function qv(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ln(e,t,n,r)}function OD(e){return e instanceof Zl||(e=fn(e)),e?(e=e.rgb(),new Ln(e.r,e.g,e.b,e.opacity)):new Ln}function np(e,t,n,r){return arguments.length===1?OD(e):new Ln(e,t,n,r??1)}function Ln(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Jp(Ln,np,Ny(Zl,{brighter:function(e){return e=e==null?rp:Math.pow(rp,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?fc:Math.pow(fc,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$L,formatHex:$L,formatRgb:KL,toString:KL}));function $L(){return"#"+cw(this.r)+cw(this.g)+cw(this.b)}function KL(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function cw(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function QL(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ya(e,t,n,r)}function iz(e){if(e instanceof ya)return new ya(e.h,e.s,e.l,e.opacity);if(e instanceof Zl||(e=fn(e)),!e)return new ya;if(e instanceof ya)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ya(a,s,u,e.opacity)}function oz(e,t,n,r){return arguments.length===1?iz(e):new ya(e,t,n,r??1)}function ya(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Jp(ya,oz,Ny(Zl,{brighter:function(e){return e=e==null?rp:Math.pow(rp,e),new ya(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?fc:Math.pow(fc,e),new ya(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ln(hw(e>=240?e-240:e+120,i,r),hw(e,i,r),hw(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function hw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const az=Math.PI/180,sz=180/Math.PI,a_=18,lz=.96422,uz=1,cz=.82521,hz=4/29,Sf=6/29,fz=3*Sf*Sf,goe=Sf*Sf*Sf;function pz(e){if(e instanceof qo)return new qo(e.l,e.a,e.b,e.opacity);if(e instanceof Pa)return yz(e);e instanceof Ln||(e=OD(e));var t=mw(e.r),n=mw(e.g),r=mw(e.b),i=fw((.2225045*t+.7168786*n+.0606169*r)/uz),o,a;return t===n&&n===r?o=a=i:(o=fw((.4360747*t+.3850649*n+.1430804*r)/lz),a=fw((.0139322*t+.0971045*n+.7141733*r)/cz)),new qo(116*i-16,500*(o-i),200*(i-a),e.opacity)}function yoe(e,t){return new qo(e,0,0,t??1)}function dz(e,t,n,r){return arguments.length===1?pz(e):new qo(e,t,n,r??1)}function qo(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Jp(qo,dz,Ny(Zl,{brighter:function(e){return new qo(this.l+a_*(e??1),this.a,this.b,this.opacity)},darker:function(e){return new qo(this.l-a_*(e??1),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=lz*pw(t),e=uz*pw(e),n=cz*pw(n),new Ln(dw(3.1338561*t-1.6168667*e-.4906146*n),dw(-.9787684*t+1.9161415*e+.033454*n),dw(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function fw(e){return e>goe?Math.pow(e,1/3):e/fz+hz}function pw(e){return e>Sf?e*e*e:fz*(e-hz)}function dw(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function mw(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function mz(e){if(e instanceof Pa)return new Pa(e.h,e.c,e.l,e.opacity);if(e instanceof qo||(e=pz(e)),e.a===0&&e.b===0)return new Pa(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*sz;return new Pa(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function voe(e,t,n,r){return arguments.length===1?mz(e):new Pa(n,t,e,r??1)}function gz(e,t,n,r){return arguments.length===1?mz(e):new Pa(e,t,n,r??1)}function Pa(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function yz(e){if(isNaN(e.h))return new qo(e.l,0,0,e.opacity);var t=e.h*az;return new qo(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Jp(Pa,gz,Ny(Zl,{brighter:function(e){return new Pa(this.h,this.c,this.l+a_*(e??1),this.opacity)},darker:function(e){return new Pa(this.h,this.c,this.l-a_*(e??1),this.opacity)},rgb:function(){return yz(this).rgb()}}));var vz=-.14861,kD=1.78277,xD=-.29227,GE=-.90649,$g=1.97294,ZL=$g*GE,JL=$g*kD,e5=kD*xD-GE*vz;function boe(e){if(e instanceof Qu)return new Qu(e.h,e.s,e.l,e.opacity);e instanceof Ln||(e=OD(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(e5*r+ZL*t-JL*n)/(e5+ZL-JL),o=r-i,a=($g*(n-i)-xD*o)/GE,s=Math.sqrt(a*a+o*o)/($g*i*(1-i)),u=s?Math.atan2(a,o)*sz-120:NaN;return new Qu(u<0?u+360:u,s,i,e.opacity)}function bz(e,t,n,r){return arguments.length===1?boe(e):new Qu(e,t,n,r??1)}function Qu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Jp(Qu,bz,Ny(Zl,{brighter:function(e){return e=e==null?rp:Math.pow(rp,e),new Qu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?fc:Math.pow(fc,e),new Qu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*az,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ln(255*(t+n*(vz*r+kD*i)),255*(t+n*(xD*r+GE*i)),255*(t+n*($g*r)),this.opacity)}}));const _oe=Object.freeze(Object.defineProperty({__proto__:null,color:fn,cubehelix:bz,gray:yoe,hcl:gz,hsl:oz,lab:dz,lch:voe,rgb:np},Symbol.toStringTag,{value:"Module"})),ID=e=>()=>e;function Toe(e,t){return function(n){return e+n*t}}function Eoe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Soe(e){return(e=+e)==1?_z:function(t,n){return n-t?Eoe(t,n,e):ID(isNaN(t)?n:t)}}function _z(e,t){var n=t-e;return n?Toe(e,n):ID(isNaN(e)?t:e)}const ip=function e(t){var n=Soe(t);function r(i,o){var a=n((i=np(i)).r,(o=np(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),c=_z(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=s(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function woe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Aoe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ooe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Xc(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function koe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function yo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function xoe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Xc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Hk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gw=new RegExp(Hk.source,"g");function Ioe(e){return function(){return e}}function Coe(e){return function(t){return e(t)+""}}function CD(e,t){var n=Hk.lastIndex=gw.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=Hk.exec(e))&&(i=gw.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:yo(r,i)})),n=gw.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?Coe(u[0].x):Ioe(t):(t=u.length,function(c){for(var l=0,f;l<t;++l)s[(f=u[l]).i]=f.x(c);return s.join("")})}function Xc(e,t){var n=typeof t,r;return t==null||n==="boolean"?ID(t):(n==="number"?yo:n==="string"?(r=fn(t))?(t=r,ip):CD:t instanceof fn?ip:t instanceof Date?koe:Aoe(t)?woe:Array.isArray(t)?Ooe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xoe:yo)(e,t)}function PD(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var t5=180/Math.PI,Tz={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ez(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*t5,skewX:Math.atan(u)*t5,scaleX:a,scaleY:s}}var $v;function Poe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Tz:Ez(t.a,t.b,t.c,t.d,t.e,t.f)}function Doe(e){return e==null||($v||($v=document.createElementNS("http://www.w3.org/2000/svg","g")),$v.setAttribute("transform",e),!(e=$v.transform.baseVal.consolidate()))?Tz:(e=e.matrix,Ez(e.a,e.b,e.c,e.d,e.e,e.f))}function Sz(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,l,f,h,p,d){if(c!==f||l!==h){var m=p.push("translate(",null,t,null,n);d.push({i:m-4,x:yo(c,f)},{i:m-2,x:yo(l,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function a(c,l,f,h){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:yo(c,l)})):l&&f.push(i(f)+"rotate("+l+r)}function s(c,l,f,h){c!==l?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:yo(c,l)}):l&&f.push(i(f)+"skewX("+l+r)}function u(c,l,f,h,p,d){if(c!==f||l!==h){var m=p.push(i(p)+"scale(",null,",",null,")");d.push({i:m-4,x:yo(c,f)},{i:m-2,x:yo(l,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(c,l){var f=[],h=[];return c=e(c),l=e(l),o(c.translateX,c.translateY,l.translateX,l.translateY,f,h),a(c.rotate,l.rotate,f,h),s(c.skewX,l.skewX,f,h),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,f,h),c=l=null,function(p){for(var d=-1,m=h.length,g;++d<m;)f[(g=h[d]).i]=g.x(p);return f.join("")}}}var wz=Sz(Poe,"px, ","px)","deg)"),Az=Sz(Doe,", ",")",")"),Roe=1e-12;function r5(e){return((e=Math.exp(e))+1/e)/2}function Noe(e){return((e=Math.exp(e))-1/e)/2}function Moe(e){return((e=Math.exp(2*e))-1)/(e+1)}const Loe=function e(t,n,r){function i(o,a){var s=o[0],u=o[1],c=o[2],l=a[0],f=a[1],h=a[2],p=l-s,d=f-u,m=p*p+d*d,g,v;if(m<Roe)v=Math.log(h/c)/t,g=function(E){return[s+E*p,u+E*d,c*Math.exp(t*E*v)]};else{var b=Math.sqrt(m),y=(h*h-c*c+r*m)/(2*c*n*b),_=(h*h-c*c-r*m)/(2*h*n*b),T=Math.log(Math.sqrt(y*y+1)-y),S=Math.log(Math.sqrt(_*_+1)-_);v=(S-T)/t,g=function(E){var I=E*v,x=r5(T),C=c/(n*b)*(x*Moe(t*I+T)-Noe(T));return[s+C*p,u+C*d,c*x/r5(t*I+T)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,u=s*s;return e(a,s,u)},i}(Math.SQRT2,2,4);function joe(e,t){t===void 0&&(t=e,e=Xc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function Boe(e){return function(){return e}}function s_(e){return+e}var n5=[0,1];function vi(e){return e}function Uk(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Boe(isNaN(t)?NaN:.5)}function Foe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Goe(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Uk(i,r),o=n(a,o)):(r=Uk(r,i),o=n(o,a)),function(s){return o(r(s))}}function Hoe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Uk(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var u=Yc(e,s,1,r)-1;return o[u](i[u](s))}}function My(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function HE(){var e=n5,t=n5,n=Xc,r,i,o,a=vi,s,u,c;function l(){var h=Math.min(e.length,t.length);return a!==vi&&(a=Foe(e[0],e[h-1])),s=h>2?Hoe:Goe,u=c=null,f}function f(h){return h==null||isNaN(h=+h)?o:(u||(u=s(e.map(r),t,n)))(r(a(h)))}return f.invert=function(h){return a(i((c||(c=s(t,e.map(r),yo)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,s_),l()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),l()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=PD,l()},f.clamp=function(h){return arguments.length?(a=h?!0:vi,l()):a!==vi},f.interpolate=function(h){return arguments.length?(n=h,l()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,p){return r=h,i=p,l()}}function DD(){return HE()(vi,vi)}function Uoe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function l_(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function op(e){return e=l_(Math.abs(e)),e?e[1]:NaN}function zoe(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function Voe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Yoe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ap(e){if(!(t=Yoe.exec(e)))throw new Error("invalid format: "+e);var t;return new UE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ap.prototype=UE.prototype;function UE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}UE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xoe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Oz;function Woe(e,t){var n=l_(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Oz=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+l_(e,Math.max(0,t+o-1))[0]}function i5(e,t){var n=l_(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const o5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Uoe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>i5(e*100,t),r:i5,s:Woe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function a5(e){return e}var s5=Array.prototype.map,l5=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function kz(e){var t=e.grouping===void 0||e.thousands===void 0?a5:zoe(s5.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?a5:Voe(s5.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(f){f=ap(f);var h=f.fill,p=f.align,d=f.sign,m=f.symbol,g=f.zero,v=f.width,b=f.comma,y=f.precision,_=f.trim,T=f.type;T==="n"?(b=!0,T="g"):o5[T]||(y===void 0&&(y=12),_=!0,T="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",E=m==="$"?r:/[%p]/.test(T)?a:"",I=o5[T],x=/[defgprs%]/.test(T);y=y===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function C(w){var B=S,L=E,k,R,F;if(T==="c")L=I(w)+L,w="";else{w=+w;var U=w<0||1/w<0;if(w=isNaN(w)?u:I(Math.abs(w),y),_&&(w=Xoe(w)),U&&+w==0&&d!=="+"&&(U=!1),B=(U?d==="("?d:s:d==="-"||d==="("?"":d)+B,L=(T==="s"?l5[8+Oz/3]:"")+L+(U&&d==="("?")":""),x){for(k=-1,R=w.length;++k<R;)if(F=w.charCodeAt(k),48>F||F>57){L=(F===46?i+w.slice(k+1):w.slice(k))+L,w=w.slice(0,k);break}}}b&&!g&&(w=t(w,1/0));var $=B.length+w.length+L.length,ie=$<v?new Array(v-$+1).join(h):"";switch(b&&g&&(w=t(ie+w,ie.length?v-L.length:1/0),ie=""),p){case"<":w=B+w+L+ie;break;case"=":w=B+ie+w+L;break;case"^":w=ie.slice(0,$=ie.length>>1)+B+w+L+ie.slice($);break;default:w=ie+B+w+L;break}return o(w)}return C.toString=function(){return f+""},C}function l(f,h){var p=c((f=ap(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(op(h)/3)))*3,m=Math.pow(10,-d),g=l5[8+d/3];return function(v){return p(m*v)+g}}return{format:c,formatPrefix:l}}var Kv,no,Wc;xz({thousands:",",grouping:[3],currency:["$",""]});function xz(e){return Kv=kz(e),no=Kv.format,Wc=Kv.formatPrefix,Kv}function Iz(e){return Math.max(0,-op(Math.abs(e)))}function ed(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(op(t)/3)))*3-op(Math.abs(e)))}function Cz(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,op(t)-op(e))+1}const qoe=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:UE,get format(){return no},formatDefaultLocale:xz,formatLocale:kz,get formatPrefix(){return Wc},formatSpecifier:ap,precisionFixed:Iz,precisionPrefix:ed,precisionRound:Cz},Symbol.toStringTag,{value:"Module"}));function Pz(e,t,n,r){var i=i_(e,t,n),o;switch(r=ap(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=ed(i,a))&&(r.precision=o),Wc(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Cz(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Iz(i))&&(r.precision=o-(r.type==="%")*2);break}}return no(r)}function Jl(e){var t=e.domain;return e.ticks=function(n){var r=t();return hc(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Pz(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],u,c,l=10;for(s<a&&(c=a,a=s,s=c,c=i,i=o,o=c);l-- >0;){if(c=Dy(a,s,n),c===u)return r[i]=a,r[o]=s,t(r);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;u=c}return e},e}function kt(){var e=DD();return e.copy=function(){return My(e,kt())},Io.apply(e,arguments),Jl(e)}function Dz(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,s_),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Dz(e).unknown(t)},e=arguments.length?Array.from(e,s_):[0,1],Jl(n)}function Rz(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function u5(e){return Math.log(e)}function c5(e){return Math.exp(e)}function $oe(e){return-Math.log(-e)}function Koe(e){return-Math.exp(-e)}function Qoe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Zoe(e){return e===10?Qoe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Joe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function h5(e){return(t,n)=>-e(-t,n)}function RD(e){const t=e(u5,c5),n=t.domain;let r=10,i,o;function a(){return i=Joe(r),o=Zoe(r),n()[0]<0?(i=h5(i),o=h5(o),e($oe,Koe)):e(u5,c5),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const u=n();let c=u[0],l=u[u.length-1];const f=l<c;f&&([c,l]=[l,c]);let h=i(c),p=i(l),d,m;const g=s==null?10:+s;let v=[];if(!(r%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(d=1;d<r;++d)if(m=h<0?d/o(-h):d*o(h),!(m<c)){if(m>l)break;v.push(m)}}else for(;h<=p;++h)for(d=r-1;d>=1;--d)if(m=h>0?d/o(-h):d*o(h),!(m<c)){if(m>l)break;v.push(m)}v.length*2<g&&(v=hc(c,l,g))}else v=hc(h,p,Math.min(p-h,g)).map(o);return f?v.reverse():v},t.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=ap(u)).precision==null&&(u.trim=!0),u=no(u)),s===1/0)return u;const c=Math.max(1,r*s/t.ticks().length);return l=>{let f=l/o(Math.round(i(l)));return f*r<r-.5&&(f*=r),f<=c?u(l):""}},t.nice=()=>n(Rz(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function eu(){const e=RD(HE()).domain([1,10]);return e.copy=()=>My(e,eu()).base(e.base()),Io.apply(e,arguments),e}function f5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function p5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ND(e){var t=1,n=e(f5(t),p5(t));return n.constant=function(r){return arguments.length?e(f5(t=+r),p5(t)):t},Jl(n)}function Nz(){var e=ND(HE());return e.copy=function(){return My(e,Nz()).constant(e.constant())},Io.apply(e,arguments)}function d5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function eae(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tae(e){return e<0?-e*e:e*e}function MD(e){var t=e(vi,vi),n=1;function r(){return n===1?e(vi,vi):n===.5?e(eae,tae):e(d5(n),d5(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Jl(t)}function LD(){var e=MD(HE());return e.copy=function(){return My(e,LD()).exponent(e.exponent())},Io.apply(e,arguments),e}function rae(){return LD.apply(null,arguments).exponent(.5)}function m5(e){return Math.sign(e)*e*e}function nae(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Mz(){var e=DD(),t=[0,1],n=!1,r;function i(o){var a=nae(e(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return e.invert(m5(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,s_)).map(m5)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Mz(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Io.apply(i,arguments),Jl(i)}function u_(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=$6(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[Yc(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(on),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return u_().domain(e).range(t).unknown(r)},Io.apply(o,arguments)}function Lz(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(u){return u!=null&&u<=u?i[Yc(r,u,0,n)]:o}function s(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return a}return a.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,s()):[e,t]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,s()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},a.unknown=function(u){return arguments.length&&(o=u),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Lz().domain([e,t]).range(i).unknown(o)},Io.apply(Jl(a),arguments)}function jz(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Yc(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return jz().domain(e).range(t).unknown(n)},Io.apply(i,arguments)}const yw=new Date,vw=new Date;function gn(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const u=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return u;let c;do u.push(c=new Date(+o)),t(o,s),e(o);while(c<o&&o<a);return u},i.filter=o=>gn(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(yw.setTime(+o),vw.setTime(+a),e(yw),e(vw),Math.floor(n(yw,vw))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const c_=gn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);c_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):c_);c_.range;const gs=1e3,Eo=gs*60,ys=Eo*60,Ds=ys*24,jD=Ds*7,g5=Ds*30,bw=Ds*365,Hu=gn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*gs)},(e,t)=>(t-e)/gs,e=>e.getUTCSeconds());Hu.range;const BD=gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gs)},(e,t)=>{e.setTime(+e+t*Eo)},(e,t)=>(t-e)/Eo,e=>e.getMinutes());BD.range;const FD=gn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Eo)},(e,t)=>(t-e)/Eo,e=>e.getUTCMinutes());FD.range;const GD=gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gs-e.getMinutes()*Eo)},(e,t)=>{e.setTime(+e+t*ys)},(e,t)=>(t-e)/ys,e=>e.getHours());GD.range;const HD=gn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ys)},(e,t)=>(t-e)/ys,e=>e.getUTCHours());HD.range;const Ly=gn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Eo)/Ds,e=>e.getDate()-1);Ly.range;const zE=gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ds,e=>e.getUTCDate()-1);zE.range;const Bz=gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ds,e=>Math.floor(e/Ds));Bz.range;function qc(e){return gn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Eo)/jD)}const VE=qc(0),h_=qc(1),iae=qc(2),oae=qc(3),sp=qc(4),aae=qc(5),sae=qc(6);VE.range;h_.range;iae.range;oae.range;sp.range;aae.range;sae.range;function $c(e){return gn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/jD)}const YE=$c(0),f_=$c(1),lae=$c(2),uae=$c(3),lp=$c(4),cae=$c(5),hae=$c(6);YE.range;f_.range;lae.range;uae.range;lp.range;cae.range;hae.range;const UD=gn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());UD.range;const zD=gn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());zD.range;const Rs=gn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Rs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Rs.range;const Ns=gn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ns.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ns.range;function Fz(e,t,n,r,i,o){const a=[[Hu,1,gs],[Hu,5,5*gs],[Hu,15,15*gs],[Hu,30,30*gs],[o,1,Eo],[o,5,5*Eo],[o,15,15*Eo],[o,30,30*Eo],[i,1,ys],[i,3,3*ys],[i,6,6*ys],[i,12,12*ys],[r,1,Ds],[r,2,2*Ds],[n,1,jD],[t,1,g5],[t,3,3*g5],[e,1,bw]];function s(c,l,f){const h=l<c;h&&([c,l]=[l,c]);const p=f&&typeof f.range=="function"?f:u(c,l,f),d=p?p.range(c,+l+1):[];return h?d.reverse():d}function u(c,l,f){const h=Math.abs(l-c)/f,p=Qp(([,,g])=>g).right(a,h);if(p===a.length)return e.every(i_(c/bw,l/bw,f));if(p===0)return c_.every(Math.max(i_(c,l,f),1));const[d,m]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return d.every(m)}return[s,u]}const[fae,pae]=Fz(Ns,zD,YE,Bz,HD,FD),[dae,mae]=Fz(Rs,UD,VE,Ly,GD,BD);function _w(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Tw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function gae(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,c=Gd(i),l=Hd(i),f=Gd(o),h=Hd(o),p=Gd(a),d=Hd(a),m=Gd(s),g=Hd(s),v=Gd(u),b=Hd(u),y={a:U,A:$,b:ie,B:oe,c:null,d:E5,e:E5,f:Fae,g:$ae,G:Qae,H:Lae,I:jae,j:Bae,L:Gz,m:Gae,M:Hae,p:me,q:ae,Q:A5,s:O5,S:Uae,u:zae,U:Vae,V:Yae,w:Xae,W:Wae,x:null,X:null,y:qae,Y:Kae,Z:Zae,"%":w5},_={a:X,A:ee,b:se,B:_e,c:null,d:S5,e:S5,f:rse,g:fse,G:dse,H:Jae,I:ese,j:tse,L:Uz,m:nse,M:ise,p:Oe,q:Re,Q:A5,s:O5,S:ose,u:ase,U:sse,V:lse,w:use,W:cse,x:null,X:null,y:hse,Y:pse,Z:mse,"%":w5},T={a:C,A:w,b:B,B:L,c:k,d:_5,e:_5,f:Dae,g:b5,G:v5,H:T5,I:T5,j:xae,L:Pae,m:kae,M:Iae,p:x,q:Oae,Q:Nae,s:Mae,S:Cae,u:Tae,U:Eae,V:Sae,w:_ae,W:wae,x:R,X:F,y:b5,Y:v5,Z:Aae,"%":Rae};y.x=S(n,y),y.X=S(r,y),y.c=S(t,y),_.x=S(n,_),_.X=S(r,_),_.c=S(t,_);function S(ve,Ne){return function(He){var be=[],je=-1,qe=0,ot=ve.length,ut,Je,at;for(He instanceof Date||(He=new Date(+He));++je<ot;)ve.charCodeAt(je)===37&&(be.push(ve.slice(qe,je)),(Je=y5[ut=ve.charAt(++je)])!=null?ut=ve.charAt(++je):Je=ut==="e"?" ":"0",(at=Ne[ut])&&(ut=at(He,Je)),be.push(ut),qe=je+1);return be.push(ve.slice(qe,je)),be.join("")}}function E(ve,Ne){return function(He){var be=Fd(1900,void 0,1),je=I(be,ve,He+="",0),qe,ot;if(je!=He.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(Ne&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(qe=Tw(Fd(be.y,0,1)),ot=qe.getUTCDay(),qe=ot>4||ot===0?f_.ceil(qe):f_(qe),qe=zE.offset(qe,(be.V-1)*7),be.y=qe.getUTCFullYear(),be.m=qe.getUTCMonth(),be.d=qe.getUTCDate()+(be.w+6)%7):(qe=_w(Fd(be.y,0,1)),ot=qe.getDay(),qe=ot>4||ot===0?h_.ceil(qe):h_(qe),qe=Ly.offset(qe,(be.V-1)*7),be.y=qe.getFullYear(),be.m=qe.getMonth(),be.d=qe.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),ot="Z"in be?Tw(Fd(be.y,0,1)).getUTCDay():_w(Fd(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(ot+5)%7:be.w+be.U*7-(ot+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,Tw(be)):_w(be)}}function I(ve,Ne,He,be){for(var je=0,qe=Ne.length,ot=He.length,ut,Je;je<qe;){if(be>=ot)return-1;if(ut=Ne.charCodeAt(je++),ut===37){if(ut=Ne.charAt(je++),Je=T[ut in y5?Ne.charAt(je++):ut],!Je||(be=Je(ve,He,be))<0)return-1}else if(ut!=He.charCodeAt(be++))return-1}return be}function x(ve,Ne,He){var be=c.exec(Ne.slice(He));return be?(ve.p=l.get(be[0].toLowerCase()),He+be[0].length):-1}function C(ve,Ne,He){var be=p.exec(Ne.slice(He));return be?(ve.w=d.get(be[0].toLowerCase()),He+be[0].length):-1}function w(ve,Ne,He){var be=f.exec(Ne.slice(He));return be?(ve.w=h.get(be[0].toLowerCase()),He+be[0].length):-1}function B(ve,Ne,He){var be=v.exec(Ne.slice(He));return be?(ve.m=b.get(be[0].toLowerCase()),He+be[0].length):-1}function L(ve,Ne,He){var be=m.exec(Ne.slice(He));return be?(ve.m=g.get(be[0].toLowerCase()),He+be[0].length):-1}function k(ve,Ne,He){return I(ve,t,Ne,He)}function R(ve,Ne,He){return I(ve,n,Ne,He)}function F(ve,Ne,He){return I(ve,r,Ne,He)}function U(ve){return a[ve.getDay()]}function $(ve){return o[ve.getDay()]}function ie(ve){return u[ve.getMonth()]}function oe(ve){return s[ve.getMonth()]}function me(ve){return i[+(ve.getHours()>=12)]}function ae(ve){return 1+~~(ve.getMonth()/3)}function X(ve){return a[ve.getUTCDay()]}function ee(ve){return o[ve.getUTCDay()]}function se(ve){return u[ve.getUTCMonth()]}function _e(ve){return s[ve.getUTCMonth()]}function Oe(ve){return i[+(ve.getUTCHours()>=12)]}function Re(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var Ne=S(ve+="",y);return Ne.toString=function(){return ve},Ne},parse:function(ve){var Ne=E(ve+="",!1);return Ne.toString=function(){return ve},Ne},utcFormat:function(ve){var Ne=S(ve+="",_);return Ne.toString=function(){return ve},Ne},utcParse:function(ve){var Ne=E(ve+="",!0);return Ne.toString=function(){return ve},Ne}}}var y5={"-":"",_:" ",0:"0"},kn=/^\s*\d+/,yae=/^%/,vae=/[\\^$*+?|[\]().{}]/g;function lr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function bae(e){return e.replace(vae,"\\$&")}function Gd(e){return new RegExp("^(?:"+e.map(bae).join("|")+")","i")}function Hd(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function _ae(e,t,n){var r=kn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Tae(e,t,n){var r=kn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Eae(e,t,n){var r=kn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Sae(e,t,n){var r=kn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function wae(e,t,n){var r=kn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function v5(e,t,n){var r=kn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function b5(e,t,n){var r=kn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Aae(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Oae(e,t,n){var r=kn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function kae(e,t,n){var r=kn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function _5(e,t,n){var r=kn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xae(e,t,n){var r=kn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function T5(e,t,n){var r=kn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Iae(e,t,n){var r=kn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Cae(e,t,n){var r=kn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Pae(e,t,n){var r=kn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Dae(e,t,n){var r=kn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Rae(e,t,n){var r=yae.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Nae(e,t,n){var r=kn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Mae(e,t,n){var r=kn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function E5(e,t){return lr(e.getDate(),t,2)}function Lae(e,t){return lr(e.getHours(),t,2)}function jae(e,t){return lr(e.getHours()%12||12,t,2)}function Bae(e,t){return lr(1+Ly.count(Rs(e),e),t,3)}function Gz(e,t){return lr(e.getMilliseconds(),t,3)}function Fae(e,t){return Gz(e,t)+"000"}function Gae(e,t){return lr(e.getMonth()+1,t,2)}function Hae(e,t){return lr(e.getMinutes(),t,2)}function Uae(e,t){return lr(e.getSeconds(),t,2)}function zae(e){var t=e.getDay();return t===0?7:t}function Vae(e,t){return lr(VE.count(Rs(e)-1,e),t,2)}function Hz(e){var t=e.getDay();return t>=4||t===0?sp(e):sp.ceil(e)}function Yae(e,t){return e=Hz(e),lr(sp.count(Rs(e),e)+(Rs(e).getDay()===4),t,2)}function Xae(e){return e.getDay()}function Wae(e,t){return lr(h_.count(Rs(e)-1,e),t,2)}function qae(e,t){return lr(e.getFullYear()%100,t,2)}function $ae(e,t){return e=Hz(e),lr(e.getFullYear()%100,t,2)}function Kae(e,t){return lr(e.getFullYear()%1e4,t,4)}function Qae(e,t){var n=e.getDay();return e=n>=4||n===0?sp(e):sp.ceil(e),lr(e.getFullYear()%1e4,t,4)}function Zae(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+lr(t/60|0,"0",2)+lr(t%60,"0",2)}function S5(e,t){return lr(e.getUTCDate(),t,2)}function Jae(e,t){return lr(e.getUTCHours(),t,2)}function ese(e,t){return lr(e.getUTCHours()%12||12,t,2)}function tse(e,t){return lr(1+zE.count(Ns(e),e),t,3)}function Uz(e,t){return lr(e.getUTCMilliseconds(),t,3)}function rse(e,t){return Uz(e,t)+"000"}function nse(e,t){return lr(e.getUTCMonth()+1,t,2)}function ise(e,t){return lr(e.getUTCMinutes(),t,2)}function ose(e,t){return lr(e.getUTCSeconds(),t,2)}function ase(e){var t=e.getUTCDay();return t===0?7:t}function sse(e,t){return lr(YE.count(Ns(e)-1,e),t,2)}function zz(e){var t=e.getUTCDay();return t>=4||t===0?lp(e):lp.ceil(e)}function lse(e,t){return e=zz(e),lr(lp.count(Ns(e),e)+(Ns(e).getUTCDay()===4),t,2)}function use(e){return e.getUTCDay()}function cse(e,t){return lr(f_.count(Ns(e)-1,e),t,2)}function hse(e,t){return lr(e.getUTCFullYear()%100,t,2)}function fse(e,t){return e=zz(e),lr(e.getUTCFullYear()%100,t,2)}function pse(e,t){return lr(e.getUTCFullYear()%1e4,t,4)}function dse(e,t){var n=e.getUTCDay();return e=n>=4||n===0?lp(e):lp.ceil(e),lr(e.getUTCFullYear()%1e4,t,4)}function mse(){return"+0000"}function w5(){return"%"}function A5(e){return+e}function O5(e){return Math.floor(+e/1e3)}var bh,Vz,Yz;gse({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gse(e){return bh=gae(e),Vz=bh.format,bh.parse,Yz=bh.utcFormat,bh.utcParse,bh}function yse(e){return new Date(e)}function vse(e){return e instanceof Date?+e:+new Date(+e)}function VD(e,t,n,r,i,o,a,s,u,c){var l=DD(),f=l.invert,h=l.domain,p=c(".%L"),d=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),b=c("%b %d"),y=c("%B"),_=c("%Y");function T(S){return(u(S)<S?p:s(S)<S?d:a(S)<S?m:o(S)<S?g:r(S)<S?i(S)<S?v:b:n(S)<S?y:_)(S)}return l.invert=function(S){return new Date(f(S))},l.domain=function(S){return arguments.length?h(Array.from(S,vse)):h().map(yse)},l.ticks=function(S){var E=h();return e(E[0],E[E.length-1],S??10)},l.tickFormat=function(S,E){return E==null?T:c(E)},l.nice=function(S){var E=h();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?h(Rz(E,S)):l},l.copy=function(){return My(l,VD(e,t,n,r,i,o,a,s,u,c))},l}function bse(){return Io.apply(VD(dae,mae,Rs,UD,VE,Ly,GD,BD,Hu,Vz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _se(){return Io.apply(VD(fae,pae,Ns,zD,YE,zE,HD,FD,Hu,Yz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function XE(){var e=0,t=1,n,r,i,o,a=vi,s=!1,u;function c(f){return f==null||isNaN(f=+f)?u:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(f){return arguments.length?(s=!!f,c):s},c.interpolator=function(f){return arguments.length?(a=f,c):a};function l(f){return function(h){var p,d;return arguments.length?([p,d]=h,a=f(p,d),c):[a(0),a(1)]}}return c.range=l(Xc),c.rangeRound=l(PD),c.unknown=function(f){return arguments.length?(u=f,c):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),c}}function tu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Xz(){var e=Jl(XE()(vi));return e.copy=function(){return tu(e,Xz())},Vs.apply(e,arguments)}function Wz(){var e=RD(XE()).domain([1,10]);return e.copy=function(){return tu(e,Wz()).base(e.base())},Vs.apply(e,arguments)}function qz(){var e=ND(XE());return e.copy=function(){return tu(e,qz()).constant(e.constant())},Vs.apply(e,arguments)}function YD(){var e=MD(XE());return e.copy=function(){return tu(e,YD()).exponent(e.exponent())},Vs.apply(e,arguments)}function Tse(){return YD.apply(null,arguments).exponent(.5)}function $z(){var e=[],t=vi;function n(r){if(r!=null&&!isNaN(r=+r))return t((Yc(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(on),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>Wg(e,o/r))},n.copy=function(){return $z(t).domain(e)},Vs.apply(n,arguments)}function WE(){var e=0,t=.5,n=1,r=1,i,o,a,s,u,c=vi,l,f=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+l(m))-o)*(r*m<r*o?s:u),c(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,i=l(e=+e),o=l(t=+t),a=l(n=+n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(c=m,p):c};function d(m){return function(g){var v,b,y;return arguments.length?([v,b,y]=g,c=joe(m,[v,b,y]),p):[c(0),c(.5),c(1)]}}return p.range=d(Xc),p.rangeRound=d(PD),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return l=m,i=m(e),o=m(t),a=m(n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,p}}function Kz(){var e=Jl(WE()(vi));return e.copy=function(){return tu(e,Kz())},Vs.apply(e,arguments)}function Qz(){var e=RD(WE()).domain([.1,1,10]);return e.copy=function(){return tu(e,Qz()).base(e.base())},Vs.apply(e,arguments)}function Zz(){var e=ND(WE());return e.copy=function(){return tu(e,Zz()).constant(e.constant())},Vs.apply(e,arguments)}function XD(){var e=MD(WE());return e.copy=function(){return tu(e,XD()).exponent(e.exponent())},Vs.apply(e,arguments)}function Ese(){return XD.apply(null,arguments).exponent(.5)}const Sse=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ry,scaleDiverging:Kz,scaleDivergingLog:Qz,scaleDivergingPow:XD,scaleDivergingSqrt:Ese,scaleDivergingSymlog:Zz,scaleIdentity:Dz,scaleImplicit:Gk,scaleLinear:kt,scaleLog:eu,scaleOrdinal:AD,scalePoint:soe,scalePow:LD,scaleQuantile:u_,scaleQuantize:Lz,scaleRadial:Mz,scaleSequential:Xz,scaleSequentialLog:Wz,scaleSequentialPow:YD,scaleSequentialQuantile:$z,scaleSequentialSqrt:Tse,scaleSequentialSymlog:qz,scaleSqrt:rae,scaleSymlog:Nz,scaleThreshold:jz,scaleTime:bse,scaleUtc:_se,tickFormat:Pz},Symbol.toStringTag,{value:"Module"}));var jy={},Qv,wse=new Uint8Array(16);function Jz(){if(!Qv&&(Qv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Qv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qv(wse)}const Ase=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function qE(e){return typeof e=="string"&&Ase.test(e)}var In=[];for(var Ew=0;Ew<256;++Ew)In.push((Ew+256).toString(16).substr(1));function $E(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(In[e[t+0]]+In[e[t+1]]+In[e[t+2]]+In[e[t+3]]+"-"+In[e[t+4]]+In[e[t+5]]+"-"+In[e[t+6]]+In[e[t+7]]+"-"+In[e[t+8]]+In[e[t+9]]+"-"+In[e[t+10]]+In[e[t+11]]+In[e[t+12]]+In[e[t+13]]+In[e[t+14]]+In[e[t+15]]).toLowerCase();if(!qE(n))throw TypeError("Stringified UUID is invalid");return n}var k5,Sw,ww=0,Aw=0;function Ose(e,t,n){var r=t&&n||0,i=t||new Array(16);e=e||{};var o=e.node||k5,a=e.clockseq!==void 0?e.clockseq:Sw;if(o==null||a==null){var s=e.random||(e.rng||Jz)();o==null&&(o=k5=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),a==null&&(a=Sw=(s[6]<<8|s[7])&16383)}var u=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Aw+1,l=u-ww+(c-Aw)/1e4;if(l<0&&e.clockseq===void 0&&(a=a+1&16383),(l<0||u>ww)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ww=u,Aw=c,Sw=a,u+=122192928e5;var f=((u&268435455)*1e4+c)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var h=u/4294967296*1e4&268435455;i[r++]=h>>>8&255,i[r++]=h&255,i[r++]=h>>>24&15|16,i[r++]=h>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(var p=0;p<6;++p)i[r+p]=o[p];return t||$E(i)}function e8(e){if(!qE(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}function kse(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var xse="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ise="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function t8(e,t,n){function r(i,o,a,s){if(typeof i=="string"&&(i=kse(i)),typeof o=="string"&&(o=e8(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=n(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,a){s=s||0;for(var c=0;c<16;++c)a[s+c]=u[c];return a}return $E(u)}try{r.name=e}catch{}return r.DNS=xse,r.URL=Ise,r}function Cse(e){if(typeof e=="string"){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return Pse(Dse(Rse(e),e.length*8))}function Pse(e){for(var t=[],n=e.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);t.push(a)}return t}function r8(e){return(e+64>>>9<<4)+14+1}function Dse(e,t){e[t>>5]|=128<<t%32,e[r8(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=n,u=r,c=i,l=o;n=Yn(n,r,i,o,e[a],7,-680876936),o=Yn(o,n,r,i,e[a+1],12,-389564586),i=Yn(i,o,n,r,e[a+2],17,606105819),r=Yn(r,i,o,n,e[a+3],22,-1044525330),n=Yn(n,r,i,o,e[a+4],7,-176418897),o=Yn(o,n,r,i,e[a+5],12,1200080426),i=Yn(i,o,n,r,e[a+6],17,-1473231341),r=Yn(r,i,o,n,e[a+7],22,-45705983),n=Yn(n,r,i,o,e[a+8],7,1770035416),o=Yn(o,n,r,i,e[a+9],12,-1958414417),i=Yn(i,o,n,r,e[a+10],17,-42063),r=Yn(r,i,o,n,e[a+11],22,-1990404162),n=Yn(n,r,i,o,e[a+12],7,1804603682),o=Yn(o,n,r,i,e[a+13],12,-40341101),i=Yn(i,o,n,r,e[a+14],17,-1502002290),r=Yn(r,i,o,n,e[a+15],22,1236535329),n=Xn(n,r,i,o,e[a+1],5,-165796510),o=Xn(o,n,r,i,e[a+6],9,-1069501632),i=Xn(i,o,n,r,e[a+11],14,643717713),r=Xn(r,i,o,n,e[a],20,-373897302),n=Xn(n,r,i,o,e[a+5],5,-701558691),o=Xn(o,n,r,i,e[a+10],9,38016083),i=Xn(i,o,n,r,e[a+15],14,-660478335),r=Xn(r,i,o,n,e[a+4],20,-405537848),n=Xn(n,r,i,o,e[a+9],5,568446438),o=Xn(o,n,r,i,e[a+14],9,-1019803690),i=Xn(i,o,n,r,e[a+3],14,-187363961),r=Xn(r,i,o,n,e[a+8],20,1163531501),n=Xn(n,r,i,o,e[a+13],5,-1444681467),o=Xn(o,n,r,i,e[a+2],9,-51403784),i=Xn(i,o,n,r,e[a+7],14,1735328473),r=Xn(r,i,o,n,e[a+12],20,-1926607734),n=Wn(n,r,i,o,e[a+5],4,-378558),o=Wn(o,n,r,i,e[a+8],11,-2022574463),i=Wn(i,o,n,r,e[a+11],16,1839030562),r=Wn(r,i,o,n,e[a+14],23,-35309556),n=Wn(n,r,i,o,e[a+1],4,-1530992060),o=Wn(o,n,r,i,e[a+4],11,1272893353),i=Wn(i,o,n,r,e[a+7],16,-155497632),r=Wn(r,i,o,n,e[a+10],23,-1094730640),n=Wn(n,r,i,o,e[a+13],4,681279174),o=Wn(o,n,r,i,e[a],11,-358537222),i=Wn(i,o,n,r,e[a+3],16,-722521979),r=Wn(r,i,o,n,e[a+6],23,76029189),n=Wn(n,r,i,o,e[a+9],4,-640364487),o=Wn(o,n,r,i,e[a+12],11,-421815835),i=Wn(i,o,n,r,e[a+15],16,530742520),r=Wn(r,i,o,n,e[a+2],23,-995338651),n=qn(n,r,i,o,e[a],6,-198630844),o=qn(o,n,r,i,e[a+7],10,1126891415),i=qn(i,o,n,r,e[a+14],15,-1416354905),r=qn(r,i,o,n,e[a+5],21,-57434055),n=qn(n,r,i,o,e[a+12],6,1700485571),o=qn(o,n,r,i,e[a+3],10,-1894986606),i=qn(i,o,n,r,e[a+10],15,-1051523),r=qn(r,i,o,n,e[a+1],21,-2054922799),n=qn(n,r,i,o,e[a+8],6,1873313359),o=qn(o,n,r,i,e[a+15],10,-30611744),i=qn(i,o,n,r,e[a+6],15,-1560198380),r=qn(r,i,o,n,e[a+13],21,1309151649),n=qn(n,r,i,o,e[a+4],6,-145523070),o=qn(o,n,r,i,e[a+11],10,-1120210379),i=qn(i,o,n,r,e[a+2],15,718787259),r=qn(r,i,o,n,e[a+9],21,-343485551),n=Pl(n,s),r=Pl(r,u),i=Pl(i,c),o=Pl(o,l)}return[n,r,i,o]}function Rse(e){if(e.length===0)return[];for(var t=e.length*8,n=new Uint32Array(r8(t)),r=0;r<t;r+=8)n[r>>5]|=(e[r/8]&255)<<r%32;return n}function Pl(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function Nse(e,t){return e<<t|e>>>32-t}function KE(e,t,n,r,i,o){return Pl(Nse(Pl(Pl(t,e),Pl(r,o)),i),n)}function Yn(e,t,n,r,i,o,a){return KE(t&n|~t&r,e,t,i,o,a)}function Xn(e,t,n,r,i,o,a){return KE(t&r|n&~r,e,t,i,o,a)}function Wn(e,t,n,r,i,o,a){return KE(t^n^r,e,t,i,o,a)}function qn(e,t,n,r,i,o,a){return KE(n^(t|~r),e,t,i,o,a)}var Mse=t8("v3",48,Cse);const Lse=Mse;function jse(e,t,n){e=e||{};var r=e.random||(e.rng||Jz)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return $E(r)}function Bse(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function Ow(e,t){return e<<t|e>>>32-t}function Fse(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),u=0;u<a;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=e[u*64+l*4]<<24|e[u*64+l*4+1]<<16|e[u*64+l*4+2]<<8|e[u*64+l*4+3];s[u]=c}s[a-1][14]=(e.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(e.length-1)*8&4294967295;for(var f=0;f<a;++f){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=s[f][p];for(var d=16;d<80;++d)h[d]=Ow(h[d-3]^h[d-8]^h[d-14]^h[d-16],1);for(var m=n[0],g=n[1],v=n[2],b=n[3],y=n[4],_=0;_<80;++_){var T=Math.floor(_/20),S=Ow(m,5)+Bse(T,g,v,b)+y+t[T]+h[_]>>>0;y=b,b=v,v=Ow(g,30)>>>0,g=m,m=S}n[0]=n[0]+m>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+b>>>0,n[4]=n[4]+y>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var Gse=t8("v5",80,Fse);const Hse=Gse,Use="00000000-0000-0000-0000-000000000000";function zse(e){if(!qE(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}const Vse=Object.freeze(Object.defineProperty({__proto__:null,NIL:Use,parse:e8,stringify:$E,v1:Ose,v3:Lse,v4:jse,v5:Hse,validate:qE,version:zse},Symbol.toStringTag,{value:"Module"})),Yse=Us(Vse);var QE=Yse,WD=typeof Buffer<"u"?e=>Buffer.from(e).toString("base64"):e=>btoa(String.fromCharCode(...e)),Xse=typeof Buffer<"u"?e=>Buffer.from(e,"base64"):e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0));jy.encode=function(e){var t=QE.parse(e),n=WD(t),r=n.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return r};jy.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/")+"==";return QE.stringify(Xse(t))};jy.v4=function(){var e=QE.v4(null,new Uint8Array(16)),t=WD(e),n=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return n};jy.nice=function(){var e=QE.v4(null,new Uint8Array(16));e[0]=e[0]&127;var t=WD(e),n=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return n};var Wse=jy;const zt=Gi(Wse);var n8={exports:{}},ZE={},p_={exports:{}};p_.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",u="[object Array]",c="[object AsyncFunction]",l="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",d="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",b="[object Object]",y="[object Promise]",_="[object Proxy]",T="[object RegExp]",S="[object Set]",E="[object String]",I="[object Symbol]",x="[object Undefined]",C="[object WeakMap]",w="[object ArrayBuffer]",B="[object DataView]",L="[object Float32Array]",k="[object Float64Array]",R="[object Int8Array]",F="[object Int16Array]",U="[object Int32Array]",$="[object Uint8Array]",ie="[object Uint8ClampedArray]",oe="[object Uint16Array]",me="[object Uint32Array]",ae=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,se={};se[L]=se[k]=se[R]=se[F]=se[U]=se[$]=se[ie]=se[oe]=se[me]=!0,se[s]=se[u]=se[w]=se[l]=se[B]=se[f]=se[h]=se[p]=se[m]=se[g]=se[b]=se[T]=se[S]=se[E]=se[C]=!1;var _e=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Oe=typeof self=="object"&&self&&self.Object===Object&&self,Re=_e||Oe||Function("return this")(),ve=t&&!t.nodeType&&t,Ne=ve&&!0&&e&&!e.nodeType&&e,He=Ne&&Ne.exports===ve,be=He&&_e.process,je=function(){try{return be&&be.binding&&be.binding("util")}catch{}}(),qe=je&&je.isTypedArray;function ot(ne,Se){for(var Ge=-1,rt=ne==null?0:ne.length,Ir=0,Mt=[];++Ge<rt;){var Yr=ne[Ge];Se(Yr,Ge,ne)&&(Mt[Ir++]=Yr)}return Mt}function ut(ne,Se){for(var Ge=-1,rt=Se.length,Ir=ne.length;++Ge<rt;)ne[Ir+Ge]=Se[Ge];return ne}function Je(ne,Se){for(var Ge=-1,rt=ne==null?0:ne.length;++Ge<rt;)if(Se(ne[Ge],Ge,ne))return!0;return!1}function at(ne,Se){for(var Ge=-1,rt=Array(ne);++Ge<ne;)rt[Ge]=Se(Ge);return rt}function Ht(ne){return function(Se){return ne(Se)}}function qt(ne,Se){return ne.has(Se)}function dr(ne,Se){return ne==null?void 0:ne[Se]}function tr(ne){var Se=-1,Ge=Array(ne.size);return ne.forEach(function(rt,Ir){Ge[++Se]=[Ir,rt]}),Ge}function Ie(ne,Se){return function(Ge){return ne(Se(Ge))}}function te(ne){var Se=-1,Ge=Array(ne.size);return ne.forEach(function(rt){Ge[++Se]=rt}),Ge}var le=Array.prototype,ye=Function.prototype,Z=Object.prototype,fe=Re["__core-js_shared__"],we=ye.toString,Ce=Z.hasOwnProperty,Ve=function(){var ne=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),Ye=Z.toString,$e=RegExp("^"+we.call(Ce).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=He?Re.Buffer:void 0,ht=Re.Symbol,Dt=Re.Uint8Array,dt=Z.propertyIsEnumerable,pr=le.splice,A=ht?ht.toStringTag:void 0,M=Object.getOwnPropertySymbols,H=it?it.isBuffer:void 0,ue=Ie(Object.keys,Object),Te=dh(Re,"DataView"),J=dh(Re,"Map"),j=dh(Re,"Promise"),z=dh(Re,"Set"),W=dh(Re,"WeakMap"),de=dh(Object,"create"),ge=du(Te),De=du(J),ke=du(j),pe=du(z),Ee=du(W),G=ht?ht.prototype:void 0,q=G?G.valueOf:void 0;function re(ne){var Se=-1,Ge=ne==null?0:ne.length;for(this.clear();++Se<Ge;){var rt=ne[Se];this.set(rt[0],rt[1])}}function Ae(){this.__data__=de?de(null):{},this.size=0}function xe(ne){var Se=this.has(ne)&&delete this.__data__[ne];return this.size-=Se?1:0,Se}function We(ne){var Se=this.__data__;if(de){var Ge=Se[ne];return Ge===r?void 0:Ge}return Ce.call(Se,ne)?Se[ne]:void 0}function Ze(ne){var Se=this.__data__;return de?Se[ne]!==void 0:Ce.call(Se,ne)}function bt(ne,Se){var Ge=this.__data__;return this.size+=this.has(ne)?0:1,Ge[ne]=de&&Se===void 0?r:Se,this}re.prototype.clear=Ae,re.prototype.delete=xe,re.prototype.get=We,re.prototype.has=Ze,re.prototype.set=bt;function Rt(ne){var Se=-1,Ge=ne==null?0:ne.length;for(this.clear();++Se<Ge;){var rt=ne[Se];this.set(rt[0],rt[1])}}function jt(){this.__data__=[],this.size=0}function _t(ne){var Se=this.__data__,Ge=oi(Se,ne);if(Ge<0)return!1;var rt=Se.length-1;return Ge==rt?Se.pop():pr.call(Se,Ge,1),--this.size,!0}function rr(ne){var Se=this.__data__,Ge=oi(Se,ne);return Ge<0?void 0:Se[Ge][1]}function nr(ne){return oi(this.__data__,ne)>-1}function vt(ne,Se){var Ge=this.__data__,rt=oi(Ge,ne);return rt<0?(++this.size,Ge.push([ne,Se])):Ge[rt][1]=Se,this}Rt.prototype.clear=jt,Rt.prototype.delete=_t,Rt.prototype.get=rr,Rt.prototype.has=nr,Rt.prototype.set=vt;function Bt(ne){var Se=-1,Ge=ne==null?0:ne.length;for(this.clear();++Se<Ge;){var rt=ne[Se];this.set(rt[0],rt[1])}}function ar(){this.size=0,this.__data__={hash:new re,map:new(J||Rt),string:new re}}function vn(ne){var Se=Iv(this,ne).delete(ne);return this.size-=Se?1:0,Se}function Fr(ne){return Iv(this,ne).get(ne)}function Xe(ne){return Iv(this,ne).has(ne)}function Ke(ne,Se){var Ge=Iv(this,ne),rt=Ge.size;return Ge.set(ne,Se),this.size+=Ge.size==rt?0:1,this}Bt.prototype.clear=ar,Bt.prototype.delete=vn,Bt.prototype.get=Fr,Bt.prototype.has=Xe,Bt.prototype.set=Ke;function Ot(ne){var Se=-1,Ge=ne==null?0:ne.length;for(this.__data__=new Bt;++Se<Ge;)this.add(ne[Se])}function Ct(ne){return this.__data__.set(ne,r),this}function Et(ne){return this.__data__.has(ne)}Ot.prototype.add=Ot.prototype.push=Ct,Ot.prototype.has=Et;function wt(ne){var Se=this.__data__=new Rt(ne);this.size=Se.size}function Nt(){this.__data__=new Rt,this.size=0}function At(ne){var Se=this.__data__,Ge=Se.delete(ne);return this.size=Se.size,Ge}function Vt(ne){return this.__data__.get(ne)}function ur(ne){return this.__data__.has(ne)}function cr(ne,Se){var Ge=this.__data__;if(Ge instanceof Rt){var rt=Ge.__data__;if(!J||rt.length<n-1)return rt.push([ne,Se]),this.size=++Ge.size,this;Ge=this.__data__=new Bt(rt)}return Ge.set(ne,Se),this.size=Ge.size,this}wt.prototype.clear=Nt,wt.prototype.delete=At,wt.prototype.get=Vt,wt.prototype.has=ur,wt.prototype.set=cr;function Oi(ne,Se){var Ge=Cv(ne),rt=!Ge&&nJ(ne),Ir=!Ge&&!rt&&GS(ne),Mt=!Ge&&!rt&&!Ir&&NM(ne),Yr=Ge||rt||Ir||Mt,bn=Yr?at(ne.length,String):[],xn=bn.length;for(var Gr in ne)Ce.call(ne,Gr)&&!(Yr&&(Gr=="length"||Ir&&(Gr=="offset"||Gr=="parent")||Mt&&(Gr=="buffer"||Gr=="byteLength"||Gr=="byteOffset")||ZZ(Gr,xn)))&&bn.push(Gr);return bn}function oi(ne,Se){for(var Ge=ne.length;Ge--;)if(CM(ne[Ge][0],Se))return Ge;return-1}function xv(ne,Se,Ge){var rt=Se(ne);return Cv(ne)?rt:ut(rt,Ge(ne))}function el(ne){return ne==null?ne===void 0?x:v:A&&A in Object(ne)?KZ(ne):rJ(ne)}function tl(ne){return Cd(ne)&&el(ne)==s}function kM(ne,Se,Ge,rt,Ir){return ne===Se?!0:ne==null||Se==null||!Cd(ne)&&!Cd(Se)?ne!==ne&&Se!==Se:VZ(ne,Se,Ge,rt,kM,Ir)}function VZ(ne,Se,Ge,rt,Ir,Mt){var Yr=Cv(ne),bn=Cv(Se),xn=Yr?u:rl(ne),Gr=bn?u:rl(Se);xn=xn==s?b:xn,Gr=Gr==s?b:Gr;var Vi=xn==b,Co=Gr==b,Vn=xn==Gr;if(Vn&&GS(ne)){if(!GS(Se))return!1;Yr=!0,Vi=!1}if(Vn&&!Vi)return Mt||(Mt=new wt),Yr||NM(ne)?xM(ne,Se,Ge,rt,Ir,Mt):qZ(ne,Se,xn,Ge,rt,Ir,Mt);if(!(Ge&i)){var ao=Vi&&Ce.call(ne,"__wrapped__"),so=Co&&Ce.call(Se,"__wrapped__");if(ao||so){var nl=ao?ne.value():ne,Za=so?Se.value():Se;return Mt||(Mt=new wt),Ir(nl,Za,Ge,rt,Mt)}}return Vn?(Mt||(Mt=new wt),$Z(ne,Se,Ge,rt,Ir,Mt)):!1}function YZ(ne){if(!RM(ne)||eJ(ne))return!1;var Se=PM(ne)?$e:X;return Se.test(du(ne))}function XZ(ne){return Cd(ne)&&DM(ne.length)&&!!se[el(ne)]}function WZ(ne){if(!tJ(ne))return ue(ne);var Se=[];for(var Ge in Object(ne))Ce.call(ne,Ge)&&Ge!="constructor"&&Se.push(Ge);return Se}function xM(ne,Se,Ge,rt,Ir,Mt){var Yr=Ge&i,bn=ne.length,xn=Se.length;if(bn!=xn&&!(Yr&&xn>bn))return!1;var Gr=Mt.get(ne);if(Gr&&Mt.get(Se))return Gr==Se;var Vi=-1,Co=!0,Vn=Ge&o?new Ot:void 0;for(Mt.set(ne,Se),Mt.set(Se,ne);++Vi<bn;){var ao=ne[Vi],so=Se[Vi];if(rt)var nl=Yr?rt(so,ao,Vi,Se,ne,Mt):rt(ao,so,Vi,ne,Se,Mt);if(nl!==void 0){if(nl)continue;Co=!1;break}if(Vn){if(!Je(Se,function(Za,mu){if(!qt(Vn,mu)&&(ao===Za||Ir(ao,Za,Ge,rt,Mt)))return Vn.push(mu)})){Co=!1;break}}else if(!(ao===so||Ir(ao,so,Ge,rt,Mt))){Co=!1;break}}return Mt.delete(ne),Mt.delete(Se),Co}function qZ(ne,Se,Ge,rt,Ir,Mt,Yr){switch(Ge){case B:if(ne.byteLength!=Se.byteLength||ne.byteOffset!=Se.byteOffset)return!1;ne=ne.buffer,Se=Se.buffer;case w:return!(ne.byteLength!=Se.byteLength||!Mt(new Dt(ne),new Dt(Se)));case l:case f:case g:return CM(+ne,+Se);case h:return ne.name==Se.name&&ne.message==Se.message;case T:case E:return ne==Se+"";case m:var bn=tr;case S:var xn=rt&i;if(bn||(bn=te),ne.size!=Se.size&&!xn)return!1;var Gr=Yr.get(ne);if(Gr)return Gr==Se;rt|=o,Yr.set(ne,Se);var Vi=xM(bn(ne),bn(Se),rt,Ir,Mt,Yr);return Yr.delete(ne),Vi;case I:if(q)return q.call(ne)==q.call(Se)}return!1}function $Z(ne,Se,Ge,rt,Ir,Mt){var Yr=Ge&i,bn=IM(ne),xn=bn.length,Gr=IM(Se),Vi=Gr.length;if(xn!=Vi&&!Yr)return!1;for(var Co=xn;Co--;){var Vn=bn[Co];if(!(Yr?Vn in Se:Ce.call(Se,Vn)))return!1}var ao=Mt.get(ne);if(ao&&Mt.get(Se))return ao==Se;var so=!0;Mt.set(ne,Se),Mt.set(Se,ne);for(var nl=Yr;++Co<xn;){Vn=bn[Co];var Za=ne[Vn],mu=Se[Vn];if(rt)var MM=Yr?rt(mu,Za,Vn,Se,ne,Mt):rt(Za,mu,Vn,ne,Se,Mt);if(!(MM===void 0?Za===mu||Ir(Za,mu,Ge,rt,Mt):MM)){so=!1;break}nl||(nl=Vn=="constructor")}if(so&&!nl){var Pv=ne.constructor,Dv=Se.constructor;Pv!=Dv&&"constructor"in ne&&"constructor"in Se&&!(typeof Pv=="function"&&Pv instanceof Pv&&typeof Dv=="function"&&Dv instanceof Dv)&&(so=!1)}return Mt.delete(ne),Mt.delete(Se),so}function IM(ne){return xv(ne,aJ,QZ)}function Iv(ne,Se){var Ge=ne.__data__;return JZ(Se)?Ge[typeof Se=="string"?"string":"hash"]:Ge.map}function dh(ne,Se){var Ge=dr(ne,Se);return YZ(Ge)?Ge:void 0}function KZ(ne){var Se=Ce.call(ne,A),Ge=ne[A];try{ne[A]=void 0;var rt=!0}catch{}var Ir=Ye.call(ne);return rt&&(Se?ne[A]=Ge:delete ne[A]),Ir}var QZ=M?function(ne){return ne==null?[]:(ne=Object(ne),ot(M(ne),function(Se){return dt.call(ne,Se)}))}:sJ,rl=el;(Te&&rl(new Te(new ArrayBuffer(1)))!=B||J&&rl(new J)!=m||j&&rl(j.resolve())!=y||z&&rl(new z)!=S||W&&rl(new W)!=C)&&(rl=function(ne){var Se=el(ne),Ge=Se==b?ne.constructor:void 0,rt=Ge?du(Ge):"";if(rt)switch(rt){case ge:return B;case De:return m;case ke:return y;case pe:return S;case Ee:return C}return Se});function ZZ(ne,Se){return Se=Se??a,!!Se&&(typeof ne=="number"||ee.test(ne))&&ne>-1&&ne%1==0&&ne<Se}function JZ(ne){var Se=typeof ne;return Se=="string"||Se=="number"||Se=="symbol"||Se=="boolean"?ne!=="__proto__":ne===null}function eJ(ne){return!!Ve&&Ve in ne}function tJ(ne){var Se=ne&&ne.constructor,Ge=typeof Se=="function"&&Se.prototype||Z;return ne===Ge}function rJ(ne){return Ye.call(ne)}function du(ne){if(ne!=null){try{return we.call(ne)}catch{}try{return ne+""}catch{}}return""}function CM(ne,Se){return ne===Se||ne!==ne&&Se!==Se}var nJ=tl(function(){return arguments}())?tl:function(ne){return Cd(ne)&&Ce.call(ne,"callee")&&!dt.call(ne,"callee")},Cv=Array.isArray;function iJ(ne){return ne!=null&&DM(ne.length)&&!PM(ne)}var GS=H||lJ;function oJ(ne,Se){return kM(ne,Se)}function PM(ne){if(!RM(ne))return!1;var Se=el(ne);return Se==p||Se==d||Se==c||Se==_}function DM(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=a}function RM(ne){var Se=typeof ne;return ne!=null&&(Se=="object"||Se=="function")}function Cd(ne){return ne!=null&&typeof ne=="object"}var NM=qe?Ht(qe):XZ;function aJ(ne){return iJ(ne)?Oi(ne):WZ(ne)}function sJ(){return[]}function lJ(){return!1}e.exports=oJ})(p_,p_.exports);var JE=p_.exports,i8={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var a=typeof o;if(a==="string"||a==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var s=n.apply(null,o);s&&r.push(s)}}else if(a==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var u in o)t.call(o,u)&&o[u]&&r.push(u)}}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(i8);var o8=i8.exports,fr={};fr.__esModule=!0;fr.noop=void 0;var qse=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};fr.bottom=d_;fr.cloneLayout=Zse;fr.cloneLayoutItem=wf;fr.childrenEqual=Jse;fr.collides=e1;fr.compact=s8;fr.compactItem=l8;fr.correctBounds=u8;fr.getLayoutItem=c8;fr.getFirstCollision=Af;fr.getAllCollisions=h8;fr.getStatics=qD;fr.moveElement=Yk;fr.moveElementAwayFromCollision=Xk;fr.perc=tle;fr.setTransform=rle;fr.setTopLeft=nle;fr.sortLayoutItems=$D;fr.sortLayoutItemsByRowCol=f8;fr.sortLayoutItemsByColRow=p8;fr.synchronizeLayoutWithChildren=ile;fr.validateLayout=ole;fr.autoBindHandlers=ale;var $se=JE,Kse=a8($se),Qse=O,zk=a8(Qse);function a8(e){return e&&e.__esModule?e:{default:e}}function d_(e){for(var t=0,n=void 0,r=0,i=e.length;r<i;r++)n=e[r].y+e[r].h,n>t&&(t=n);return t}function Zse(e){for(var t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]=wf(e[n]);return t}function wf(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable}}function Jse(e,t){return(0,Kse.default)(zk.default.Children.map(e,function(n){return n.key}),zk.default.Children.map(t,function(n){return n.key}))}function e1(e,t){return!(e===t||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function s8(e,t,n){for(var r=qD(e),i=$D(e,t),o=Array(e.length),a=0,s=i.length;a<s;a++){var u=wf(i[a]);u.static||(u=l8(r,u,t,n,i),r.push(u)),o[e.indexOf(i[a])]=u,u.moved=!1}return o}var ele={x:"w",y:"h"};function Vk(e,t,n,r){var i=ele[r];t[r]+=1;for(var o=e.indexOf(t),a=o+1;a<e.length;a++){var s=e[a];if(!s.static){if(s.y>t.y+t.h)break;e1(t,s)&&Vk(e,s,n+t[i],r)}}t[r]=n}function l8(e,t,n,r,i){var o=n==="vertical",a=n==="horizontal";if(o)for(t.y=Math.min(d_(e),t.y);t.y>0&&!Af(e,t);)t.y--;else if(a)for(t.y=Math.min(d_(e),t.y);t.x>0&&!Af(e,t);)t.x--;for(var s=void 0;s=Af(e,t);)a?Vk(i,t,s.x+s.w,"x"):Vk(i,t,s.y+s.h,"y"),a&&t.x+t.w>r&&(t.x=r-t.w,t.y++);return t}function u8(e,t){for(var n=qD(e),r=0,i=e.length;r<i;r++){var o=e[r];if(o.x+o.w>t.cols&&(o.x=t.cols-o.w),o.x<0&&(o.x=0,o.w=t.cols),!o.static)n.push(o);else for(;Af(n,o);)o.y++}return e}function c8(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n].i===t)return e[n]}function Af(e,t){for(var n=0,r=e.length;n<r;n++)if(e1(e[n],t))return e[n]}function h8(e,t){return e.filter(function(n){return e1(n,t)})}function qD(e){return e.filter(function(t){return t.static})}function Yk(e,t,n,r,i,o,a,s){if(t.static||t.y===r&&t.x===n)return e;""+t.i+String(n)+String(r)+t.x+t.y;var u=t.x,c=t.y;typeof n=="number"&&(t.x=n),typeof r=="number"&&(t.y=r),t.moved=!0;var l=$D(e,a),f=a==="vertical"&&typeof r=="number"?c>=r:a==="horizontal"&&typeof n=="number"?u>=n:!1;f&&(l=l.reverse());var h=h8(l,t);if(o&&h.length)return""+t.i,t.x=u,t.y=c,t.moved=!1,e;for(var p=0,d=h.length;p<d;p++){var m=h[p];""+t.i+t.x+t.y+m.i+m.x+m.y,!m.moved&&(m.static?e=Xk(e,m,t,i,a):e=Xk(e,t,m,i,a))}return e}function Xk(e,t,n,r,i,o){var a=i==="horizontal",s=i==="vertical",u=!1;if(r){r=!1;var c={x:a?Math.max(t.x-n.w,0):n.x,y:s?Math.max(t.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"};if(!Af(e,c))return""+n.i+c.x+c.y,Yk(e,n,a?c.x:void 0,s?c.y:void 0,r,u,i)}return Yk(e,n,a?n.x+1:void 0,s?n.y+1:void 0,r,u,i)}function tle(e){return e*100+"%"}function rle(e){var t=e.top,n=e.left,r=e.width,i=e.height,o="translate("+n+"px,"+t+"px)";return{transform:o,WebkitTransform:o,MozTransform:o,msTransform:o,OTransform:o,width:r+"px",height:i+"px",position:"absolute"}}function nle(e){var t=e.top,n=e.left,r=e.width,i=e.height;return{top:t+"px",left:n+"px",width:r+"px",height:i+"px",position:"absolute"}}function $D(e,t){return t==="horizontal"?p8(e):f8(e)}function f8(e){return[].concat(e).sort(function(t,n){return t.y>n.y||t.y===n.y&&t.x>n.x?1:t.y===n.y&&t.x===n.x?0:-1})}function p8(e){return[].concat(e).sort(function(t,n){return t.x>n.x||t.x===n.x&&t.y>n.y?1:-1})}function ile(e,t,n,r){e=e||[];var i=[];return zk.default.Children.forEach(t,function(o,a){var s=c8(e,String(o.key));if(s)i[a]=wf(s);else{var u=o.props["data-grid"]||o.props._grid;u?i[a]=wf(qse({},u,{i:o.key})):i[a]=wf({w:1,h:1,x:0,y:d_(i),i:String(o.key)})}}),i=u8(i,{cols:n}),i=s8(i,r,n),i}function ole(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout",n=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var r=0,i=e.length;r<i;r++){for(var o=e[r],a=0;a<n.length;a++)if(typeof o[n[a]]!="number")throw new Error("ReactGridLayout: "+t+"["+r+"]."+n[a]+" must be a number!");if(o.i&&typeof o.i!="string")throw new Error("ReactGridLayout: "+t+"["+r+"].i must be a string!");if(o.static!==void 0&&typeof o.static!="boolean")throw new Error("ReactGridLayout: "+t+"["+r+"].static must be a boolean!")}}function ale(e,t){t.forEach(function(n){return e[n]=e[n].bind(e)})}fr.noop=function(){};var KD={},d8={exports:{}};(function(e,t){(function(n,r){e.exports=r(Fn,O)})(Pe,function(n,r){n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;function i(j,z){return z={exports:{}},j(z,z.exports),z.exports}function o(j){return function(){return j}}var a=function(){};a.thatReturns=o,a.thatReturnsFalse=o(!1),a.thatReturnsTrue=o(!0),a.thatReturnsNull=o(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(j){return j};var s=a,u=function(j){};u=function(j){if(j===void 0)throw new Error("invariant requires an error message argument")};function c(j,z,W,de,ge,De,ke,pe){if(u(z),!j){var Ee;if(z===void 0)Ee=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var G=[W,de,ge,De,ke,pe],q=0;Ee=new Error(z.replace(/%s/g,function(){return G[q++]})),Ee.name="Invariant Violation"}throw Ee.framesToPop=1,Ee}}var l=c,f=s;{var h=function(j){for(var z=arguments.length,W=Array(z>1?z-1:0),de=1;de<z;de++)W[de-1]=arguments[de];var ge=0,De="Warning: "+j.replace(/%s/g,function(){return W[ge++]});typeof console<"u"&&console.error(De);try{throw new Error(De)}catch{}};f=function(j,z){if(z===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(z.indexOf("Failed Composite propType: ")!==0&&!j){for(var W=arguments.length,de=Array(W>2?W-2:0),ge=2;ge<W;ge++)de[ge-2]=arguments[ge];h.apply(void 0,[z].concat(de))}}}var p=f;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var d=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function v(j){if(j==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(j)}function b(){try{if(!Object.assign)return!1;var j=new String("abc");if(j[5]="de",Object.getOwnPropertyNames(j)[0]==="5")return!1;for(var z={},W=0;W<10;W++)z["_"+String.fromCharCode(W)]=W;var de=Object.getOwnPropertyNames(z).map(function(De){return z[De]});if(de.join("")!=="0123456789")return!1;var ge={};return"abcdefghijklmnopqrst".split("").forEach(function(De){ge[De]=De}),Object.keys(Object.assign({},ge)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var y=b()?Object.assign:function(j,z){for(var W,de=v(j),ge,De=1;De<arguments.length;De++){W=Object(arguments[De]);for(var ke in W)m.call(W,ke)&&(de[ke]=W[ke]);if(d){ge=d(W);for(var pe=0;pe<ge.length;pe++)g.call(W,ge[pe])&&(de[ge[pe]]=W[ge[pe]])}}return de},_="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",T=_,S=l,E=p,I=T,x={};function C(j,z,W,de,ge){for(var De in j)if(j.hasOwnProperty(De)){var ke;try{S(typeof j[De]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",de||"React class",W,De,typeof j[De]),ke=j[De](z,De,de,W,null,I)}catch(Ee){ke=Ee}if(E(!ke||ke instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",de||"React class",W,De,typeof ke),ke instanceof Error&&!(ke.message in x)){x[ke.message]=!0;var pe=ge?ge():"";E(!1,"Failed %s type: %s%s",W,ke.message,pe??"")}}}var w=C,B=function(j,z){var W=typeof Symbol=="function"&&Symbol.iterator,de="@@iterator";function ge(Xe){var Ke=Xe&&(W&&Xe[W]||Xe[de]);if(typeof Ke=="function")return Ke}var De="<<anonymous>>",ke={array:q("array"),bool:q("boolean"),func:q("function"),number:q("number"),object:q("object"),string:q("string"),symbol:q("symbol"),any:re(),arrayOf:Ae,element:xe(),instanceOf:We,node:jt(),objectOf:bt,oneOf:Ze,oneOfType:Rt,shape:_t,exact:rr};function pe(Xe,Ke){return Xe===Ke?Xe!==0||1/Xe===1/Ke:Xe!==Xe&&Ke!==Ke}function Ee(Xe){this.message=Xe,this.stack=""}Ee.prototype=Error.prototype;function G(Xe){var Ke={},Ot=0;function Ct(wt,Nt,At,Vt,ur,cr,Oi){if(Vt=Vt||De,cr=cr||At,Oi!==T){if(z)l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(typeof console<"u"){var oi=Vt+":"+At;!Ke[oi]&&Ot<3&&(p(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",cr,Vt),Ke[oi]=!0,Ot++)}}return Nt[At]==null?wt?Nt[At]===null?new Ee("The "+ur+" `"+cr+"` is marked as required "+("in `"+Vt+"`, but its value is `null`.")):new Ee("The "+ur+" `"+cr+"` is marked as required in "+("`"+Vt+"`, but its value is `undefined`.")):null:Xe(Nt,At,Vt,ur,cr)}var Et=Ct.bind(null,!1);return Et.isRequired=Ct.bind(null,!0),Et}function q(Xe){function Ke(Ot,Ct,Et,wt,Nt,At){var Vt=Ot[Ct],ur=Bt(Vt);if(ur!==Xe){var cr=ar(Vt);return new Ee("Invalid "+wt+" `"+Nt+"` of type "+("`"+cr+"` supplied to `"+Et+"`, expected ")+("`"+Xe+"`."))}return null}return G(Ke)}function re(){return G(s.thatReturnsNull)}function Ae(Xe){function Ke(Ot,Ct,Et,wt,Nt){if(typeof Xe!="function")return new Ee("Property `"+Nt+"` of component `"+Et+"` has invalid PropType notation inside arrayOf.");var At=Ot[Ct];if(!Array.isArray(At)){var Vt=Bt(At);return new Ee("Invalid "+wt+" `"+Nt+"` of type "+("`"+Vt+"` supplied to `"+Et+"`, expected an array."))}for(var ur=0;ur<At.length;ur++){var cr=Xe(At,ur,Et,wt,Nt+"["+ur+"]",T);if(cr instanceof Error)return cr}return null}return G(Ke)}function xe(){function Xe(Ke,Ot,Ct,Et,wt){var Nt=Ke[Ot];if(!j(Nt)){var At=Bt(Nt);return new Ee("Invalid "+Et+" `"+wt+"` of type "+("`"+At+"` supplied to `"+Ct+"`, expected a single ReactElement."))}return null}return G(Xe)}function We(Xe){function Ke(Ot,Ct,Et,wt,Nt){if(!(Ot[Ct]instanceof Xe)){var At=Xe.name||De,Vt=Fr(Ot[Ct]);return new Ee("Invalid "+wt+" `"+Nt+"` of type "+("`"+Vt+"` supplied to `"+Et+"`, expected ")+("instance of `"+At+"`."))}return null}return G(Ke)}function Ze(Xe){if(!Array.isArray(Xe))return p(!1,"Invalid argument supplied to oneOf, expected an instance of array."),s.thatReturnsNull;function Ke(Ot,Ct,Et,wt,Nt){for(var At=Ot[Ct],Vt=0;Vt<Xe.length;Vt++)if(pe(At,Xe[Vt]))return null;var ur=JSON.stringify(Xe);return new Ee("Invalid "+wt+" `"+Nt+"` of value `"+At+"` "+("supplied to `"+Et+"`, expected one of "+ur+"."))}return G(Ke)}function bt(Xe){function Ke(Ot,Ct,Et,wt,Nt){if(typeof Xe!="function")return new Ee("Property `"+Nt+"` of component `"+Et+"` has invalid PropType notation inside objectOf.");var At=Ot[Ct],Vt=Bt(At);if(Vt!=="object")return new Ee("Invalid "+wt+" `"+Nt+"` of type "+("`"+Vt+"` supplied to `"+Et+"`, expected an object."));for(var ur in At)if(At.hasOwnProperty(ur)){var cr=Xe(At,ur,Et,wt,Nt+"."+ur,T);if(cr instanceof Error)return cr}return null}return G(Ke)}function Rt(Xe){if(!Array.isArray(Xe))return p(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),s.thatReturnsNull;for(var Ke=0;Ke<Xe.length;Ke++){var Ot=Xe[Ke];if(typeof Ot!="function")return p(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",vn(Ot),Ke),s.thatReturnsNull}function Ct(Et,wt,Nt,At,Vt){for(var ur=0;ur<Xe.length;ur++){var cr=Xe[ur];if(cr(Et,wt,Nt,At,Vt,T)==null)return null}return new Ee("Invalid "+At+" `"+Vt+"` supplied to "+("`"+Nt+"`."))}return G(Ct)}function jt(){function Xe(Ke,Ot,Ct,Et,wt){return nr(Ke[Ot])?null:new Ee("Invalid "+Et+" `"+wt+"` supplied to "+("`"+Ct+"`, expected a ReactNode."))}return G(Xe)}function _t(Xe){function Ke(Ot,Ct,Et,wt,Nt){var At=Ot[Ct],Vt=Bt(At);if(Vt!=="object")return new Ee("Invalid "+wt+" `"+Nt+"` of type `"+Vt+"` "+("supplied to `"+Et+"`, expected `object`."));for(var ur in Xe){var cr=Xe[ur];if(cr){var Oi=cr(At,ur,Et,wt,Nt+"."+ur,T);if(Oi)return Oi}}return null}return G(Ke)}function rr(Xe){function Ke(Ot,Ct,Et,wt,Nt){var At=Ot[Ct],Vt=Bt(At);if(Vt!=="object")return new Ee("Invalid "+wt+" `"+Nt+"` of type `"+Vt+"` "+("supplied to `"+Et+"`, expected `object`."));var ur=y({},Ot[Ct],Xe);for(var cr in ur){var Oi=Xe[cr];if(!Oi)return new Ee("Invalid "+wt+" `"+Nt+"` key `"+cr+"` supplied to `"+Et+"`.\nBad object: "+JSON.stringify(Ot[Ct],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(Xe),null,"  "));var oi=Oi(At,cr,Et,wt,Nt+"."+cr,T);if(oi)return oi}return null}return G(Ke)}function nr(Xe){switch(typeof Xe){case"number":case"string":case"undefined":return!0;case"boolean":return!Xe;case"object":if(Array.isArray(Xe))return Xe.every(nr);if(Xe===null||j(Xe))return!0;var Ke=ge(Xe);if(Ke){var Ot=Ke.call(Xe),Ct;if(Ke!==Xe.entries){for(;!(Ct=Ot.next()).done;)if(!nr(Ct.value))return!1}else for(;!(Ct=Ot.next()).done;){var Et=Ct.value;if(Et&&!nr(Et[1]))return!1}}else return!1;return!0;default:return!1}}function vt(Xe,Ke){return Xe==="symbol"||Ke["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&Ke instanceof Symbol}function Bt(Xe){var Ke=typeof Xe;return Array.isArray(Xe)?"array":Xe instanceof RegExp?"object":vt(Ke,Xe)?"symbol":Ke}function ar(Xe){if(typeof Xe>"u"||Xe===null)return""+Xe;var Ke=Bt(Xe);if(Ke==="object"){if(Xe instanceof Date)return"date";if(Xe instanceof RegExp)return"regexp"}return Ke}function vn(Xe){var Ke=ar(Xe);switch(Ke){case"array":case"object":return"an "+Ke;case"boolean":case"date":case"regexp":return"a "+Ke;default:return Ke}}function Fr(Xe){return!Xe.constructor||!Xe.constructor.name?De:Xe.constructor.name}return ke.checkPropTypes=w,ke.PropTypes=ke,ke},L=i(function(j){{var z=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,W=function(ge){return typeof ge=="object"&&ge!==null&&ge.$$typeof===z},de=!0;j.exports=B(W,de)}}),k=i(function(j){/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var z={}.hasOwnProperty;function W(){for(var de=[],ge=0;ge<arguments.length;ge++){var De=arguments[ge];if(De){var ke=typeof De;if(ke==="string"||ke==="number")de.push(De);else if(Array.isArray(De))de.push(W.apply(null,De));else if(ke==="object")for(var pe in De)z.call(De,pe)&&De[pe]&&de.push(pe)}}return de.join(" ")}j.exports?j.exports=W:window.classNames=W})()});function R(j,z){for(var W=0,de=j.length;W<de;W++)if(z.apply(z,[j[W],W,j]))return j[W]}function F(j){return typeof j=="function"||Object.prototype.toString.call(j)==="[object Function]"}function U(j){return typeof j=="number"&&!isNaN(j)}function $(j){return parseInt(j,10)}function ie(j,z,W){if(j[z])return new Error("Invalid prop "+z+" passed to "+W+" - do not set this, set it on the child.")}var oe=["Moz","Webkit","O","ms"];function me(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u"||typeof window.document>"u")return"";var z=window.document.documentElement.style;if(j in z)return"";for(var W=0;W<oe.length;W++)if(ae(j,oe[W])in z)return oe[W];return""}function ae(j,z){return z?""+z+X(j):j}function X(j){for(var z="",W=!0,de=0;de<j.length;de++)W?(z+=j[de].toUpperCase(),W=!1):j[de]==="-"?W=!0:z+=j[de];return z}var ee=me(),se=function(j,z){if(!(j instanceof z))throw new TypeError("Cannot call a class as a function")},_e=function(){function j(z,W){for(var de=0;de<W.length;de++){var ge=W[de];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(z,ge.key,ge)}}return function(z,W,de){return W&&j(z.prototype,W),de&&j(z,de),z}}(),Oe=function(j,z,W){return z in j?Object.defineProperty(j,z,{value:W,enumerable:!0,configurable:!0,writable:!0}):j[z]=W,j},Re=Object.assign||function(j){for(var z=1;z<arguments.length;z++){var W=arguments[z];for(var de in W)Object.prototype.hasOwnProperty.call(W,de)&&(j[de]=W[de])}return j},ve=function(j,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);j.prototype=Object.create(z&&z.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(j,z):j.__proto__=z)},Ne=function(j,z){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:j},He=function(){function j(z,W){var de=[],ge=!0,De=!1,ke=void 0;try{for(var pe=z[Symbol.iterator](),Ee;!(ge=(Ee=pe.next()).done)&&(de.push(Ee.value),!(W&&de.length===W));ge=!0);}catch(G){De=!0,ke=G}finally{try{!ge&&pe.return&&pe.return()}finally{if(De)throw ke}}return de}return function(z,W){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return j(z,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),be="";function je(j,z){return be||(be=R(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(W){return F(j[W])})),F(j[be])?j[be](z):!1}function qe(j,z,W){var de=j;do{if(je(de,z))return!0;if(de===W)return!1;de=de.parentNode}while(de);return!1}function ot(j,z,W){j&&(j.attachEvent?j.attachEvent("on"+z,W):j.addEventListener?j.addEventListener(z,W,!0):j["on"+z]=W)}function ut(j,z,W){j&&(j.detachEvent?j.detachEvent("on"+z,W):j.removeEventListener?j.removeEventListener(z,W,!0):j["on"+z]=null)}function Je(j){var z=j.clientHeight,W=j.ownerDocument.defaultView.getComputedStyle(j);return z+=$(W.borderTopWidth),z+=$(W.borderBottomWidth),z}function at(j){var z=j.clientWidth,W=j.ownerDocument.defaultView.getComputedStyle(j);return z+=$(W.borderLeftWidth),z+=$(W.borderRightWidth),z}function Ht(j){var z=j.clientHeight,W=j.ownerDocument.defaultView.getComputedStyle(j);return z-=$(W.paddingTop),z-=$(W.paddingBottom),z}function qt(j){var z=j.clientWidth,W=j.ownerDocument.defaultView.getComputedStyle(j);return z-=$(W.paddingLeft),z-=$(W.paddingRight),z}function dr(j,z){var W=z===z.ownerDocument.body,de=W?{left:0,top:0}:z.getBoundingClientRect(),ge=j.clientX+z.scrollLeft-de.left,De=j.clientY+z.scrollTop-de.top;return{x:ge,y:De}}function tr(j,z){var W=te(j,z,"px");return Oe({},ae("transform",ee),W)}function Ie(j,z){var W=te(j,z,"");return W}function te(j,z,W){var de=j.x,ge=j.y,De="translate("+de+W+","+ge+W+")";if(z){var ke=""+(typeof z.x=="string"?z.x:z.x+W),pe=""+(typeof z.y=="string"?z.y:z.y+W);De="translate("+ke+", "+pe+")"+De}return De}function le(j,z){return j.targetTouches&&R(j.targetTouches,function(W){return z===W.identifier})||j.changedTouches&&R(j.changedTouches,function(W){return z===W.identifier})}function ye(j){if(j.targetTouches&&j.targetTouches[0])return j.targetTouches[0].identifier;if(j.changedTouches&&j.changedTouches[0])return j.changedTouches[0].identifier}function Z(j){if(j){var z=j.getElementById("react-draggable-style-el");z||(z=j.createElement("style"),z.type="text/css",z.id="react-draggable-style-el",z.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,z.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,j.getElementsByTagName("head")[0].appendChild(z)),j.body&&Ce(j.body,"react-draggable-transparent-selection")}}function fe(j){try{j&&j.body&&Ve(j.body,"react-draggable-transparent-selection"),j.selection?j.selection.empty():window.getSelection().removeAllRanges()}catch{}}function we(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Re({touchAction:"none"},j)}function Ce(j,z){j.classList?j.classList.add(z):j.className.match(new RegExp("(?:^|\\s)"+z+"(?!\\S)"))||(j.className+=" "+z)}function Ve(j,z){j.classList?j.classList.remove(z):j.className=j.className.replace(new RegExp("(?:^|\\s)"+z+"(?!\\S)","g"),"")}function Ye(j,z,W){if(!j.props.bounds)return[z,W];var de=j.props.bounds;de=typeof de=="string"?de:A(de);var ge=M(j);if(typeof de=="string"){var De=ge.ownerDocument,ke=De.defaultView,pe=void 0;if(de==="parent"?pe=ge.parentNode:pe=De.querySelector(de),!(pe instanceof ke.HTMLElement))throw new Error('Bounds selector "'+de+'" could not find an element.');var Ee=ke.getComputedStyle(ge),G=ke.getComputedStyle(pe);de={left:-ge.offsetLeft+$(G.paddingLeft)+$(Ee.marginLeft),top:-ge.offsetTop+$(G.paddingTop)+$(Ee.marginTop),right:qt(pe)-at(ge)-ge.offsetLeft+$(G.paddingRight)-$(Ee.marginRight),bottom:Ht(pe)-Je(ge)-ge.offsetTop+$(G.paddingBottom)-$(Ee.marginBottom)}}return U(de.right)&&(z=Math.min(z,de.right)),U(de.bottom)&&(W=Math.min(W,de.bottom)),U(de.left)&&(z=Math.max(z,de.left)),U(de.top)&&(W=Math.max(W,de.top)),[z,W]}function $e(j,z,W){var de=Math.round(z/j[0])*j[0],ge=Math.round(W/j[1])*j[1];return[de,ge]}function it(j){return j.props.axis==="both"||j.props.axis==="x"}function ht(j){return j.props.axis==="both"||j.props.axis==="y"}function Dt(j,z,W){var de=typeof z=="number"?le(j,z):null;if(typeof z=="number"&&!de)return null;var ge=M(W),De=W.props.offsetParent||ge.offsetParent||ge.ownerDocument.body;return dr(de||j,De)}function dt(j,z,W){var de=j.state,ge=!U(de.lastX),De=M(j);return ge?{node:De,deltaX:0,deltaY:0,lastX:z,lastY:W,x:z,y:W}:{node:De,deltaX:z-de.lastX,deltaY:W-de.lastY,lastX:de.lastX,lastY:de.lastY,x:z,y:W}}function pr(j,z){var W=j.props.scale;return{node:z.node,x:j.state.x+z.deltaX/W,y:j.state.y+z.deltaY/W,deltaX:z.deltaX/W,deltaY:z.deltaY/W,lastX:j.state.x,lastY:j.state.y}}function A(j){return{left:j.left,top:j.top,right:j.right,bottom:j.bottom}}function M(j){var z=n.findDOMNode(j);if(!z)throw new Error("<DraggableCore>: Unmounted during event!");return z}var H={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},ue=H.mouse,Te=function(j){ve(z,j);function z(){var W,de,ge,De;se(this,z);for(var ke=arguments.length,pe=Array(ke),Ee=0;Ee<ke;Ee++)pe[Ee]=arguments[Ee];return De=(de=(ge=Ne(this,(W=z.__proto__||Object.getPrototypeOf(z)).call.apply(W,[this].concat(pe))),ge),ge.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},ge.handleDragStart=function(G){if(ge.props.onMouseDown(G),!ge.props.allowAnyClick&&typeof G.button=="number"&&G.button!==0)return!1;var q=n.findDOMNode(ge);if(!q||!q.ownerDocument||!q.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var re=q.ownerDocument;if(!(ge.props.disabled||!(G.target instanceof re.defaultView.Node)||ge.props.handle&&!qe(G.target,ge.props.handle,q)||ge.props.cancel&&qe(G.target,ge.props.cancel,q))){var Ae=ye(G);ge.setState({touchIdentifier:Ae});var xe=Dt(G,Ae,ge);if(xe!=null){var We=xe.x,Ze=xe.y,bt=dt(ge,We,Ze);ge.props.onStart;var Rt=ge.props.onStart(G,bt);Rt!==!1&&(ge.props.enableUserSelectHack&&Z(re),ge.setState({dragging:!0,lastX:We,lastY:Ze}),ot(re,ue.move,ge.handleDrag),ot(re,ue.stop,ge.handleDragStop))}}},ge.handleDrag=function(G){G.type==="touchmove"&&G.preventDefault();var q=Dt(G,ge.state.touchIdentifier,ge);if(q!=null){var re=q.x,Ae=q.y;if(Array.isArray(ge.props.grid)){var xe=re-ge.state.lastX,We=Ae-ge.state.lastY,Ze=$e(ge.props.grid,xe,We),bt=He(Ze,2);if(xe=bt[0],We=bt[1],!xe&&!We)return;re=ge.state.lastX+xe,Ae=ge.state.lastY+We}var Rt=dt(ge,re,Ae),jt=ge.props.onDrag(G,Rt);if(jt===!1){try{ge.handleDragStop(new MouseEvent("mouseup"))}catch{var _t=document.createEvent("MouseEvents");_t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),ge.handleDragStop(_t)}return}ge.setState({lastX:re,lastY:Ae})}},ge.handleDragStop=function(G){if(ge.state.dragging){var q=Dt(G,ge.state.touchIdentifier,ge);if(q!=null){var re=q.x,Ae=q.y,xe=dt(ge,re,Ae),We=n.findDOMNode(ge);We&&ge.props.enableUserSelectHack&&fe(We.ownerDocument),ge.setState({dragging:!1,lastX:NaN,lastY:NaN}),ge.props.onStop(G,xe),We&&(ut(We.ownerDocument,ue.move,ge.handleDrag),ut(We.ownerDocument,ue.stop,ge.handleDragStop))}}},ge.onMouseDown=function(G){return ue=H.mouse,ge.handleDragStart(G)},ge.onMouseUp=function(G){return ue=H.mouse,ge.handleDragStop(G)},ge.onTouchStart=function(G){return ue=H.touch,ge.handleDragStart(G)},ge.onTouchEnd=function(G){return ue=H.touch,ge.handleDragStop(G)},de),Ne(ge,De)}return _e(z,[{key:"componentWillUnmount",value:function(){var W=n.findDOMNode(this);if(W){var de=W.ownerDocument;ut(de,H.mouse.move,this.handleDrag),ut(de,H.touch.move,this.handleDrag),ut(de,H.mouse.stop,this.handleDragStop),ut(de,H.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&fe(de)}}},{key:"render",value:function(){return r.cloneElement(r.Children.only(this.props.children),{style:we(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),z}(r.Component);Te.displayName="DraggableCore",Te.propTypes={allowAnyClick:L.bool,disabled:L.bool,enableUserSelectHack:L.bool,offsetParent:function(j,z){if(j[z]&&j[z].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:L.arrayOf(L.number),scale:L.number,handle:L.string,cancel:L.string,onStart:L.func,onDrag:L.func,onStop:L.func,onMouseDown:L.func,className:ie,style:ie,transform:ie},Te.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}};var J=function(j){ve(z,j);function z(W){se(this,z);var de=Ne(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,W));return de.onDragStart=function(ge,De){var ke=de.props.onStart(ge,pr(de,De));if(ke===!1)return!1;de.setState({dragging:!0,dragged:!0})},de.onDrag=function(ge,De){if(!de.state.dragging)return!1;var ke=pr(de,De),pe={x:ke.x,y:ke.y};if(de.props.bounds){var Ee=pe.x,G=pe.y;pe.x+=de.state.slackX,pe.y+=de.state.slackY;var q=Ye(de,pe.x,pe.y),re=He(q,2),Ae=re[0],xe=re[1];pe.x=Ae,pe.y=xe,pe.slackX=de.state.slackX+(Ee-pe.x),pe.slackY=de.state.slackY+(G-pe.y),ke.x=pe.x,ke.y=pe.y,ke.deltaX=pe.x-de.state.x,ke.deltaY=pe.y-de.state.y}var We=de.props.onDrag(ge,ke);if(We===!1)return!1;de.setState(pe)},de.onDragStop=function(ge,De){if(!de.state.dragging)return!1;var ke=de.props.onStop(ge,pr(de,De));if(ke===!1)return!1;var pe={dragging:!1,slackX:0,slackY:0},Ee=!!de.props.position;if(Ee){var G=de.props.position,q=G.x,re=G.y;pe.x=q,pe.y=re}de.setState(pe)},de.state={dragging:!1,dragged:!1,x:W.position?W.position.x:W.defaultPosition.x,y:W.position?W.position.y:W.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},W.position&&!(W.onDrag||W.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),de}return _e(z,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&n.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(W){W.position&&(!this.props.position||W.position.x!==this.props.position.x||W.position.y!==this.props.position.y)&&this.setState({x:W.position.x,y:W.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var W,de={},ge=null,De=!!this.props.position,ke=!De||this.state.dragging,pe=this.props.position||this.props.defaultPosition,Ee={x:it(this)&&ke?this.state.x:pe.x,y:ht(this)&&ke?this.state.y:pe.y};this.state.isElementSVG?ge=Ie(Ee,this.props.positionOffset):de=tr(Ee,this.props.positionOffset);var G=this.props,q=G.defaultClassName,re=G.defaultClassNameDragging,Ae=G.defaultClassNameDragged,xe=r.Children.only(this.props.children),We=k(xe.props.className||"",q,(W={},Oe(W,re,this.state.dragging),Oe(W,Ae,this.state.dragged),W));return r.createElement(Te,Re({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(xe,{className:We,style:Re({},xe.props.style,de),transform:ge}))}}]),z}(r.Component);return J.displayName="Draggable",J.propTypes=Re({},Te.propTypes,{axis:L.oneOf(["both","x","y","none"]),bounds:L.oneOfType([L.shape({left:L.number,right:L.number,top:L.number,bottom:L.number}),L.string,L.oneOf([!1])]),defaultClassName:L.string,defaultClassNameDragging:L.string,defaultClassNameDragged:L.string,defaultPosition:L.shape({x:L.number,y:L.number}),positionOffset:L.shape({x:L.oneOfType([L.number,L.string]),y:L.oneOfType([L.number,L.string])}),position:L.shape({x:L.number,y:L.number}),className:ie,style:ie,transform:ie}),J.defaultProps=Re({},Te.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}),J.default=J,J.DraggableCore=Te,J})})(d8);var sle=d8.exports,t1={exports:{}},By={},r1={exports:{}},m8={};function g8(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=g8(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function ir(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=g8(e))&&(r&&(r+=" "),r+=t);return r}const lle=Object.freeze(Object.defineProperty({__proto__:null,clsx:ir,default:ir},Symbol.toStringTag,{value:"Module"})),ule=Us(lle);var Kr={},Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.dontSetMe=dle;Xa.findInArray=cle;Xa.int=ple;Xa.isFunction=hle;Xa.isNum=fle;function cle(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function hle(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function fle(e){return typeof e=="number"&&!isNaN(e)}function ple(e){return parseInt(e,10)}function dle(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.browserPrefixToKey=v8;Kc.browserPrefixToStyle=mle;Kc.default=void 0;Kc.getPrefix=y8;const kw=["Moz","Webkit","O","ms"];function y8(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!n||t in n)return"";for(let r=0;r<kw.length;r++)if(v8(t,kw[r])in n)return kw[r];return""}function v8(e,t){return t?"".concat(t).concat(gle(e)):e}function mle(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function gle(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}Kc.default=y8();Object.defineProperty(Kr,"__esModule",{value:!0});Kr.addClassName=T8;Kr.addEvent=ble;Kr.addUserSelectStyles=Cle;Kr.createCSSTransform=Ole;Kr.createSVGTransform=kle;Kr.getTouch=xle;Kr.getTouchIdentifier=Ile;Kr.getTranslation=QD;Kr.innerHeight=Sle;Kr.innerWidth=wle;Kr.matchesSelector=_8;Kr.matchesSelectorAndParentsTo=vle;Kr.offsetXYFromParent=Ale;Kr.outerHeight=Tle;Kr.outerWidth=Ele;Kr.removeClassName=E8;Kr.removeEvent=_le;Kr.removeUserSelectStyles=Ple;var io=Xa,x5=yle(Kc);function b8(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(b8=function(r){return r?n:t})(e)}function yle(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=b8(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}let Zv="";function _8(e,t){return Zv||(Zv=(0,io.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,io.isFunction)(e[n])})),(0,io.isFunction)(e[Zv])?e[Zv](t):!1}function vle(e,t,n){let r=e;do{if(_8(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function ble(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function _le(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function Tle(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,io.int)(n.borderTopWidth),t+=(0,io.int)(n.borderBottomWidth),t}function Ele(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,io.int)(n.borderLeftWidth),t+=(0,io.int)(n.borderRightWidth),t}function Sle(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,io.int)(n.paddingTop),t-=(0,io.int)(n.paddingBottom),t}function wle(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,io.int)(n.paddingLeft),t-=(0,io.int)(n.paddingRight),t}function Ale(e,t,n){const r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-r.left)/n,o=(e.clientY+t.scrollTop-r.top)/n;return{x:i,y:o}}function Ole(e,t){const n=QD(e,t,"px");return{[(0,x5.browserPrefixToKey)("transform",x5.default)]:n}}function kle(e,t){return QD(e,t,"")}function QD(e,t,n){let{x:r,y:i}=e,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){const a="".concat(typeof t.x=="string"?t.x:t.x+n),s="".concat(typeof t.y=="string"?t.y:t.y+n);o="translate(".concat(a,", ").concat(s,")")+o}return o}function xle(e,t){return e.targetTouches&&(0,io.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,io.findInArray)(e.changedTouches,n=>t===n.identifier)}function Ile(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function Cle(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&T8(e.body,"react-draggable-transparent-selection")}function Ple(e){if(e)try{if(e.body&&E8(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function T8(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function E8(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.canDragX=Nle;Wa.canDragY=Mle;Wa.createCoreData=jle;Wa.createDraggableData=Ble;Wa.getBoundPosition=Dle;Wa.getControlPosition=Lle;Wa.snapToGrid=Rle;var Xi=Xa,cf=Kr;function Dle(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r=typeof r=="string"?r:Fle(r);const i=ZD(e);if(typeof r=="string"){const{ownerDocument:o}=i,a=o.defaultView;let s;if(r==="parent"?s=i.parentNode:s=o.querySelector(r),!(s instanceof a.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const u=s,c=a.getComputedStyle(i),l=a.getComputedStyle(u);r={left:-i.offsetLeft+(0,Xi.int)(l.paddingLeft)+(0,Xi.int)(c.marginLeft),top:-i.offsetTop+(0,Xi.int)(l.paddingTop)+(0,Xi.int)(c.marginTop),right:(0,cf.innerWidth)(u)-(0,cf.outerWidth)(i)-i.offsetLeft+(0,Xi.int)(l.paddingRight)-(0,Xi.int)(c.marginRight),bottom:(0,cf.innerHeight)(u)-(0,cf.outerHeight)(i)-i.offsetTop+(0,Xi.int)(l.paddingBottom)-(0,Xi.int)(c.marginBottom)}}return(0,Xi.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,Xi.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Xi.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,Xi.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function Rle(e,t,n){const r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]}function Nle(e){return e.props.axis==="both"||e.props.axis==="x"}function Mle(e){return e.props.axis==="both"||e.props.axis==="y"}function Lle(e,t,n){const r=typeof t=="number"?(0,cf.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;const i=ZD(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,cf.offsetXYFromParent)(r||e,o,n.props.scale)}function jle(e,t,n){const r=!(0,Xi.isNum)(e.lastX),i=ZD(e);return r?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:i,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function Ble(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function Fle(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function ZD(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var n1={},i1={};Object.defineProperty(i1,"__esModule",{value:!0});i1.default=Gle;function Gle(){}function Hle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ule(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vle(r.key),r)}}function zle(e,t,n){return t&&Ule(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vle(e){var t=Yle(e,"string");return typeof t=="symbol"?t:String(t)}function Yle(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Xle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wk(e,t)}function Wk(e,t){return Wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Wk(e,t)}function Wle(e){var t=$le();return function(){var n=m_(e),r;if(t){var i=m_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qle(this,r)}}function qle(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ln(e)}function ln(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $le(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m_(e){return m_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m_(e)}Object.defineProperty(n1,"__esModule",{value:!0});n1.default=void 0;var xw=Qle(O),ki=JD(zs),Kle=JD(Fn),$n=Kr,il=Wa,Iw=Xa,Ud=JD(i1);function JD(e){return e&&e.__esModule?e:{default:e}}function S8(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(S8=function(r){return r?n:t})(e)}function Qle(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=S8(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function li(e,t,n){return t=Zle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zle(e){var t=Jle(e,"string");return typeof t=="symbol"?t:String(t)}function Jle(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Ro={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ol=Ro.mouse,o1=function(e){Xle(n,e);var t=Wle(n);function n(){var r;return Hle(this,n),r=t.apply(this,arguments),li(ln(r),"dragging",!1),li(ln(r),"lastX",NaN),li(ln(r),"lastY",NaN),li(ln(r),"touchIdentifier",null),li(ln(r),"mounted",!1),li(ln(r),"handleDragStart",i=>{if(r.props.onMouseDown(i),!r.props.allowAnyClick&&typeof i.button=="number"&&i.button!==0)return!1;const o=r.findDOMNode();if(!o||!o.ownerDocument||!o.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:a}=o;if(r.props.disabled||!(i.target instanceof a.defaultView.Node)||r.props.handle&&!(0,$n.matchesSelectorAndParentsTo)(i.target,r.props.handle,o)||r.props.cancel&&(0,$n.matchesSelectorAndParentsTo)(i.target,r.props.cancel,o))return;i.type==="touchstart"&&i.preventDefault();const s=(0,$n.getTouchIdentifier)(i);r.touchIdentifier=s;const u=(0,il.getControlPosition)(i,s,ln(r));if(u==null)return;const{x:c,y:l}=u,f=(0,il.createCoreData)(ln(r),c,l);(0,Ud.default)("DraggableCore: handleDragStart: %j",f),(0,Ud.default)("calling",r.props.onStart),!(r.props.onStart(i,f)===!1||r.mounted===!1)&&(r.props.enableUserSelectHack&&(0,$n.addUserSelectStyles)(a),r.dragging=!0,r.lastX=c,r.lastY=l,(0,$n.addEvent)(a,ol.move,r.handleDrag),(0,$n.addEvent)(a,ol.stop,r.handleDragStop))}),li(ln(r),"handleDrag",i=>{const o=(0,il.getControlPosition)(i,r.touchIdentifier,ln(r));if(o==null)return;let{x:a,y:s}=o;if(Array.isArray(r.props.grid)){let c=a-r.lastX,l=s-r.lastY;if([c,l]=(0,il.snapToGrid)(r.props.grid,c,l),!c&&!l)return;a=r.lastX+c,s=r.lastY+l}const u=(0,il.createCoreData)(ln(r),a,s);if((0,Ud.default)("DraggableCore: handleDrag: %j",u),r.props.onDrag(i,u)===!1||r.mounted===!1){try{r.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(c)}return}r.lastX=a,r.lastY=s}),li(ln(r),"handleDragStop",i=>{if(!r.dragging)return;const o=(0,il.getControlPosition)(i,r.touchIdentifier,ln(r));if(o==null)return;let{x:a,y:s}=o;if(Array.isArray(r.props.grid)){let l=a-r.lastX||0,f=s-r.lastY||0;[l,f]=(0,il.snapToGrid)(r.props.grid,l,f),a=r.lastX+l,s=r.lastY+f}const u=(0,il.createCoreData)(ln(r),a,s);if(r.props.onStop(i,u)===!1||r.mounted===!1)return!1;const c=r.findDOMNode();c&&r.props.enableUserSelectHack&&(0,$n.removeUserSelectStyles)(c.ownerDocument),(0,Ud.default)("DraggableCore: handleDragStop: %j",u),r.dragging=!1,r.lastX=NaN,r.lastY=NaN,c&&((0,Ud.default)("DraggableCore: Removing handlers"),(0,$n.removeEvent)(c.ownerDocument,ol.move,r.handleDrag),(0,$n.removeEvent)(c.ownerDocument,ol.stop,r.handleDragStop))}),li(ln(r),"onMouseDown",i=>(ol=Ro.mouse,r.handleDragStart(i))),li(ln(r),"onMouseUp",i=>(ol=Ro.mouse,r.handleDragStop(i))),li(ln(r),"onTouchStart",i=>(ol=Ro.touch,r.handleDragStart(i))),li(ln(r),"onTouchEnd",i=>(ol=Ro.touch,r.handleDragStop(i))),r}return zle(n,[{key:"componentDidMount",value:function(){this.mounted=!0;const r=this.findDOMNode();r&&(0,$n.addEvent)(r,Ro.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;const r=this.findDOMNode();if(r){const{ownerDocument:i}=r;(0,$n.removeEvent)(i,Ro.mouse.move,this.handleDrag),(0,$n.removeEvent)(i,Ro.touch.move,this.handleDrag),(0,$n.removeEvent)(i,Ro.mouse.stop,this.handleDragStop),(0,$n.removeEvent)(i,Ro.touch.stop,this.handleDragStop),(0,$n.removeEvent)(r,Ro.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,$n.removeUserSelectStyles)(i)}}},{key:"findDOMNode",value:function(){var r,i;return(r=this.props)!==null&&r!==void 0&&r.nodeRef?(i=this.props)===null||i===void 0||(i=i.nodeRef)===null||i===void 0?void 0:i.current:Kle.default.findDOMNode(this)}},{key:"render",value:function(){return xw.cloneElement(xw.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(xw.Component);n1.default=o1;li(o1,"displayName","DraggableCore");li(o1,"propTypes",{allowAnyClick:ki.default.bool,children:ki.default.node.isRequired,disabled:ki.default.bool,enableUserSelectHack:ki.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:ki.default.arrayOf(ki.default.number),handle:ki.default.string,cancel:ki.default.string,nodeRef:ki.default.object,onStart:ki.default.func,onDrag:ki.default.func,onStop:ki.default.func,onMouseDown:ki.default.func,scale:ki.default.number,className:Iw.dontSetMe,style:Iw.dontSetMe,transform:Iw.dontSetMe});li(o1,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){function t(k,R){if(!(k instanceof R))throw new TypeError("Cannot call a class as a function")}function n(k,R){for(var F=0;F<R.length;F++){var U=R[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(k,i(U.key),U)}}function r(k,R,F){return R&&n(k.prototype,R),F&&n(k,F),Object.defineProperty(k,"prototype",{writable:!1}),k}function i(k){var R=o(k,"string");return typeof R=="symbol"?R:String(R)}function o(k,R){if(typeof k!="object"||k===null)return k;var F=k[Symbol.toPrimitive];if(F!==void 0){var U=F.call(k,R);if(typeof U!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)}function a(k,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(R&&R.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),R&&s(k,R)}function s(k,R){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,U){return F.__proto__=U,F},s(k,R)}function u(k){var R=f();return function(){var F=h(k),U;if(R){var $=h(this).constructor;U=Reflect.construct(F,arguments,$)}else U=F.apply(this,arguments);return c(this,U)}}function c(k,R){if(R&&(typeof R=="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(k)}function l(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(k){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(R){return R.__proto__||Object.getPrototypeOf(R)},h(k)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return _.default}}),e.default=void 0;var p=I(O),d=S(zs),m=S(Fn),g=S(ule),v=Kr,b=Wa,y=Xa,_=S(n1),T=S(i1);function S(k){return k&&k.__esModule?k:{default:k}}function E(k){if(typeof WeakMap!="function")return null;var R=new WeakMap,F=new WeakMap;return(E=function(U){return U?F:R})(k)}function I(k,R){if(k&&k.__esModule)return k;if(k===null||typeof k!="object"&&typeof k!="function")return{default:k};var F=E(R);if(F&&F.has(k))return F.get(k);var U={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in k)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(k,ie)){var oe=$?Object.getOwnPropertyDescriptor(k,ie):null;oe&&(oe.get||oe.set)?Object.defineProperty(U,ie,oe):U[ie]=k[ie]}return U.default=k,F&&F.set(k,U),U}function x(){return x=Object.assign?Object.assign.bind():function(k){for(var R=1;R<arguments.length;R++){var F=arguments[R];for(var U in F)Object.prototype.hasOwnProperty.call(F,U)&&(k[U]=F[U])}return k},x.apply(this,arguments)}function C(k,R,F){return R=w(R),R in k?Object.defineProperty(k,R,{value:F,enumerable:!0,configurable:!0,writable:!0}):k[R]=F,k}function w(k){var R=B(k,"string");return typeof R=="symbol"?R:String(R)}function B(k,R){if(typeof k!="object"||k===null)return k;var F=k[Symbol.toPrimitive];if(F!==void 0){var U=F.call(k,R);if(typeof U!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(k)}let L=function(k){a(F,k);var R=u(F);function F(U){var $;return t(this,F),$=R.call(this,U),C(l($),"onDragStart",(ie,oe)=>{if((0,T.default)("Draggable: onDragStart: %j",oe),$.props.onStart(ie,(0,b.createDraggableData)(l($),oe))===!1)return!1;$.setState({dragging:!0,dragged:!0})}),C(l($),"onDrag",(ie,oe)=>{if(!$.state.dragging)return!1;(0,T.default)("Draggable: onDrag: %j",oe);const me=(0,b.createDraggableData)(l($),oe),ae={x:me.x,y:me.y,slackX:0,slackY:0};if($.props.bounds){const{x:X,y:ee}=ae;ae.x+=$.state.slackX,ae.y+=$.state.slackY;const[se,_e]=(0,b.getBoundPosition)(l($),ae.x,ae.y);ae.x=se,ae.y=_e,ae.slackX=$.state.slackX+(X-ae.x),ae.slackY=$.state.slackY+(ee-ae.y),me.x=ae.x,me.y=ae.y,me.deltaX=ae.x-$.state.x,me.deltaY=ae.y-$.state.y}if($.props.onDrag(ie,me)===!1)return!1;$.setState(ae)}),C(l($),"onDragStop",(ie,oe)=>{if(!$.state.dragging||$.props.onStop(ie,(0,b.createDraggableData)(l($),oe))===!1)return!1;(0,T.default)("Draggable: onDragStop: %j",oe);const me={dragging:!1,slackX:0,slackY:0};if($.props.position){const{x:ae,y:X}=$.props.position;me.x=ae,me.y=X}$.setState(me)}),$.state={dragging:!1,dragged:!1,x:U.position?U.position.x:U.defaultPosition.x,y:U.position?U.position.y:U.defaultPosition.y,prevPropsPosition:{...U.position},slackX:0,slackY:0,isElementSVG:!1},U.position&&!(U.onDrag||U.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),$}return r(F,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var U,$;return(U=($=this.props)===null||$===void 0||($=$.nodeRef)===null||$===void 0?void 0:$.current)!==null&&U!==void 0?U:m.default.findDOMNode(this)}},{key:"render",value:function(){const{axis:U,bounds:$,children:ie,defaultPosition:oe,defaultClassName:me,defaultClassNameDragging:ae,defaultClassNameDragged:X,position:ee,positionOffset:se,scale:_e,...Oe}=this.props;let Re={},ve=null;const Ne=!ee||this.state.dragging,He=ee||oe,be={x:(0,b.canDragX)(this)&&Ne?this.state.x:He.x,y:(0,b.canDragY)(this)&&Ne?this.state.y:He.y};this.state.isElementSVG?ve=(0,v.createSVGTransform)(be,se):Re=(0,v.createCSSTransform)(be,se);const je=(0,g.default)(ie.props.className||"",me,{[ae]:this.state.dragging,[X]:this.state.dragged});return p.createElement(_.default,x({},Oe,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),p.cloneElement(p.Children.only(ie),{className:je,style:{...ie.props.style,...Re},transform:ve}))}}],[{key:"getDerivedStateFromProps",value:function(U,$){let{position:ie}=U,{prevPropsPosition:oe}=$;return ie&&(!oe||ie.x!==oe.x||ie.y!==oe.y)?((0,T.default)("Draggable: getDerivedStateFromProps %j",{position:ie,prevPropsPosition:oe}),{x:ie.x,y:ie.y,prevPropsPosition:{...ie}}):null}}]),F}(p.Component);e.default=L,C(L,"displayName","Draggable"),C(L,"propTypes",{..._.default.propTypes,axis:d.default.oneOf(["both","x","y","none"]),bounds:d.default.oneOfType([d.default.shape({left:d.default.number,right:d.default.number,top:d.default.number,bottom:d.default.number}),d.default.string,d.default.oneOf([!1])]),defaultClassName:d.default.string,defaultClassNameDragging:d.default.string,defaultClassNameDragged:d.default.string,defaultPosition:d.default.shape({x:d.default.number,y:d.default.number}),positionOffset:d.default.shape({x:d.default.oneOfType([d.default.number,d.default.string]),y:d.default.oneOfType([d.default.number,d.default.string])}),position:d.default.shape({x:d.default.number,y:d.default.number}),className:y.dontSetMe,style:y.dontSetMe,transform:y.dontSetMe}),C(L,"defaultProps",{..._.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(m8);const{default:w8,DraggableCore:eue}=m8;r1.exports=w8;r1.exports.default=w8;r1.exports.DraggableCore=eue;var tue=r1.exports,eR={};eR.__esModule=!0;eR.cloneElement=oue;var rue=nue(O);function nue(e){return e&&e.__esModule?e:{default:e}}function I5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function C5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(n),!0).forEach(function(r){iue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oue(e,t){return t.style&&e.props.style&&(t.style=C5(C5({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),rue.default.cloneElement(e,t)}var Fy={};Fy.__esModule=!0;Fy.resizableProps=void 0;var Yt=aue(zs);function aue(e){return e&&e.__esModule?e:{default:e}}var sue={axis:Yt.default.oneOf(["both","x","y","none"]),className:Yt.default.string,children:Yt.default.element.isRequired,draggableOpts:Yt.default.shape({allowAnyClick:Yt.default.bool,cancel:Yt.default.string,children:Yt.default.node,disabled:Yt.default.bool,enableUserSelectHack:Yt.default.bool,offsetParent:Yt.default.node,grid:Yt.default.arrayOf(Yt.default.number),handle:Yt.default.string,nodeRef:Yt.default.object,onStart:Yt.default.func,onDrag:Yt.default.func,onStop:Yt.default.func,onMouseDown:Yt.default.func,scale:Yt.default.number}),height:Yt.default.number.isRequired,handle:Yt.default.oneOfType([Yt.default.node,Yt.default.func]),handleSize:Yt.default.arrayOf(Yt.default.number),lockAspectRatio:Yt.default.bool,maxConstraints:Yt.default.arrayOf(Yt.default.number),minConstraints:Yt.default.arrayOf(Yt.default.number),onResizeStop:Yt.default.func,onResizeStart:Yt.default.func,onResize:Yt.default.func,resizeHandles:Yt.default.arrayOf(Yt.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Yt.default.number,width:Yt.default.number.isRequired};Fy.resizableProps=sue;By.__esModule=!0;By.default=void 0;var Cw=hue(O),lue=tue,uue=eR,cue=Fy;function hue(e){return e&&e.__esModule?e:{default:e}}function qk(){return qk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qk.apply(this,arguments)}function P5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function D5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P5(Object(n),!0).forEach(function(r){Of(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fue(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Pw(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pue(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Of(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tR=function(e){pue(t,e);function t(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,Of(Pw(r),"state",void 0),Of(Pw(r),"lastHandleRect",null),Of(Pw(r),"slack",null),r}var n=t.prototype;return n.componentWillUnmount=function(){this.resetData()},n.lockAspectRatio=function(r,i,o){return i=r/o,r=i*o,[r,i]},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(r,i){var o=[this.props.minConstraints,this.props.maxConstraints],a=o[0],s=o[1];if(!a&&!s)return[r,i];if(this.props.lockAspectRatio){var u=i===this.props.height;if(u){var c=this.props.width/this.props.height;i=r/c,r=i*c}else{var l=this.props.height/this.props.width;r=i/l,i=r*l}}var f=r,h=i,p=this.slack||[0,0],d=p[0],m=p[1];return r+=d,i+=m,a&&(r=Math.max(a[0],r),i=Math.max(a[1],i)),s&&(r=Math.min(s[0],r),i=Math.min(s[1],i)),this.slack=[d+(f-r),m+(h-i)],[r,i]},n.resizeHandler=function(r,i){var o=this;return function(a,s){var u=s.node,c=s.deltaX,l=s.deltaY;r==="onResizeStart"&&o.resetData();var f=(o.props.axis==="both"||o.props.axis==="x")&&i!=="n"&&i!=="s",h=(o.props.axis==="both"||o.props.axis==="y")&&i!=="e"&&i!=="w";if(!(!f&&!h)){var p=i[0],d=i[i.length-1],m=u.getBoundingClientRect();if(o.lastHandleRect!=null){if(d==="w"){var g=m.left-o.lastHandleRect.left;c+=g}if(p==="n"){var v=m.top-o.lastHandleRect.top;l+=v}}o.lastHandleRect=m,d==="w"&&(c=-c),p==="n"&&(l=-l);var b=o.props.width+(f?c/o.props.transformScale:0),y=o.props.height+(h?l/o.props.transformScale:0),_=o.runConstraints(b,y);b=_[0],y=_[1];var T=b!==o.props.width||y!==o.props.height,S=typeof o.props[r]=="function"?o.props[r]:null,E=r==="onResize"&&!T;S&&!E&&(typeof a.persist=="function"&&a.persist(),S(a,{node:u,size:{width:b,height:y},handle:i})),r==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(r){var i=this.props.handle;return i?typeof i=="function"?i(r):i:Cw.default.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+r})},n.render=function(){var r=this,i=this.props,o=i.children,a=i.className,s=i.draggableOpts;i.width,i.height,i.handle,i.handleSize,i.lockAspectRatio,i.axis,i.minConstraints,i.maxConstraints,i.onResize,i.onResizeStop,i.onResizeStart;var u=i.resizeHandles;i.transformScale;var c=fue(i,["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"]);return(0,uue.cloneElement)(o,D5(D5({},c),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,u.map(function(l){return Cw.default.createElement(lue.DraggableCore,qk({},s,{key:"resizableHandle-"+l,onStop:r.resizeHandler("onResizeStop",l),onStart:r.resizeHandler("onResizeStart",l),onDrag:r.resizeHandler("onResize",l)}),r.renderResizeHandle(l))}))}))},t}(Cw.default.Component);By.default=tR;Of(tR,"propTypes",cue.resizableProps);Of(tR,"defaultProps",{handleSize:[20,20],lockAspectRatio:!1,axis:"both",minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1});var a1={};a1.__esModule=!0;a1.default=void 0;var Dw=yue(O),due=A8(zs),mue=A8(By),gue=Fy;function A8(e){return e&&e.__esModule?e:{default:e}}function O8(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return O8=function(){return e},e}function yue(e){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var t=O8();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function $k(){return $k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$k.apply(this,arguments)}function R5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function g_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R5(Object(n),!0).forEach(function(r){y_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vue(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function N5(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bue(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function y_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k8=function(e){bue(t,e);function t(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,y_(N5(r),"state",{width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height}),y_(N5(r),"onResize",function(s,u){var c=u.size;r.props.onResize?(s.persist&&s.persist(),r.setState(c,function(){return r.props.onResize&&r.props.onResize(s,u)})):r.setState(c)}),r}t.getDerivedStateFromProps=function(r,i){return i.propsWidth!==r.width||i.propsHeight!==r.height?{width:r.width,height:r.height,propsWidth:r.width,propsHeight:r.height}:null};var n=t.prototype;return n.render=function(){var r=this.props,i=r.handle,o=r.handleSize;r.onResize;var a=r.onResizeStart,s=r.onResizeStop,u=r.draggableOpts,c=r.minConstraints,l=r.maxConstraints,f=r.lockAspectRatio,h=r.axis;r.width,r.height;var p=r.resizeHandles,d=r.style,m=r.transformScale,g=vue(r,["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"]);return Dw.createElement(mue.default,{axis:h,draggableOpts:u,handle:i,handleSize:o,height:this.state.height,lockAspectRatio:f,maxConstraints:l,minConstraints:c,onResizeStart:a,onResize:this.onResize,onResizeStop:s,resizeHandles:p,transformScale:m,width:this.state.width},Dw.createElement("div",$k({},g,{style:g_(g_({},d),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(Dw.Component);a1.default=k8;y_(k8,"propTypes",g_(g_({},gue.resizableProps),{},{children:due.default.element}));t1.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};t1.exports.Resizable=By.default;t1.exports.ResizableBox=a1.default;var _ue=t1.exports;KD.__esModule=!0;var Tue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eue=O,zd=rR(Eue),Sue=zs,Cr=rR(Sue),wue=sle,Aue=_ue,Jv=fr,Oue=o8,kue=rR(Oue);function rR(e){return e&&e.__esModule?e:{default:e}}function xue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Iue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var nR=function(e){Iue(t,e);function t(){var n,r,i;xue(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=(n=(r=M5(this,e.call.apply(e,[this].concat(a))),r),r.state={resizing:null,dragging:null,className:""},n),M5(r,i)}return t.prototype.calcColWidth=function(){var n=this.props,r=n.margin,i=n.containerPadding,o=n.containerWidth,a=n.cols;return(o-r[0]*(a-1)-i[0]*2)/a},t.prototype.calcPosition=function(n,r,i,o,a){var s=this.props,u=s.margin,c=s.containerPadding,l=s.rowHeight,f=this.calcColWidth(),h={left:Math.round((f+u[0])*n+c[0]),top:Math.round((l+u[1])*r+c[1]),width:i===1/0?i:Math.round(f*i+Math.max(0,i-1)*u[0]),height:o===1/0?o:Math.round(l*o+Math.max(0,o-1)*u[1])};return a&&a.resizing&&(h.width=Math.round(a.resizing.width),h.height=Math.round(a.resizing.height)),a&&a.dragging&&(h.top=Math.round(a.dragging.top),h.left=Math.round(a.dragging.left)),h},t.prototype.calcXY=function(n,r){var i=this.props,o=i.margin,a=i.cols,s=i.rowHeight,u=i.w,c=i.h,l=i.maxRows,f=this.calcColWidth(),h=Math.round((r-o[0])/(f+o[0])),p=Math.round((n-o[1])/(s+o[1]));return h=Math.max(Math.min(h,a-u),0),p=Math.max(Math.min(p,l-c),0),{x:h,y:p}},t.prototype.calcWH=function(n){var r=n.height,i=n.width,o=this.props,a=o.margin,s=o.maxRows,u=o.cols,c=o.rowHeight,l=o.x,f=o.y,h=this.calcColWidth(),p=Math.round((i+a[0])/(h+a[0])),d=Math.round((r+a[1])/(c+a[1]));return p=Math.max(Math.min(p,u-l),0),d=Math.max(Math.min(d,s-f),0),{w:p,h:d}},t.prototype.createStyle=function(n){var r=this.props,i=r.usePercentages,o=r.containerWidth,a=r.useCSSTransforms,s=void 0;return a?s=(0,Jv.setTransform)(n):(s=(0,Jv.setTopLeft)(n),i&&(s.left=(0,Jv.perc)(n.left/o),s.width=(0,Jv.perc)(n.width/o))),s},t.prototype.mixinDraggable=function(n){return zd.default.createElement(wue.DraggableCore,{onStart:this.onDragHandler("onDragStart"),onDrag:this.onDragHandler("onDrag"),onStop:this.onDragHandler("onDragStop"),handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:"")},n)},t.prototype.mixinResizable=function(n,r){var i=this.props,o=i.cols,a=i.x,s=i.minW,u=i.minH,c=i.maxW,l=i.maxH,f=this.calcPosition(0,0,o-a,0).width,h=this.calcPosition(0,0,s,u),p=this.calcPosition(0,0,c,l),d=[h.width,h.height],m=[Math.min(p.width,f),Math.min(p.height,1/0)];return zd.default.createElement(Aue.Resizable,{width:r.width,height:r.height,minConstraints:d,maxConstraints:m,onResizeStop:this.onResizeHandler("onResizeStop"),onResizeStart:this.onResizeHandler("onResizeStart"),onResize:this.onResizeHandler("onResize")},n)},t.prototype.onDragHandler=function(n){var r=this;return function(i,o){var a=o.node,s=o.deltaX,u=o.deltaY,c=r.props[n];if(c){var l={top:0,left:0};switch(n){case"onDragStart":{var f=a.offsetParent;if(!f)return;var h=f.getBoundingClientRect(),p=a.getBoundingClientRect();l.left=p.left-h.left+f.scrollLeft,l.top=p.top-h.top+f.scrollTop,r.setState({dragging:l});break}case"onDrag":if(!r.state.dragging)throw new Error("onDrag called before onDragStart.");l.left=r.state.dragging.left+s,l.top=r.state.dragging.top+u,r.setState({dragging:l});break;case"onDragStop":if(!r.state.dragging)throw new Error("onDragEnd called before onDragStart.");l.left=r.state.dragging.left,l.top=r.state.dragging.top,r.setState({dragging:null});break;default:throw new Error("onDragHandler called with unrecognized handlerName: "+n)}var d=r.calcXY(l.top,l.left),m=d.x,g=d.y;return c.call(r,r.props.i,m,g,{e:i,node:a,newPosition:l})}}},t.prototype.onResizeHandler=function(n){var r=this;return function(i,o){var a=o.node,s=o.size,u=r.props[n];if(u){var c=r.props,l=c.cols,f=c.x,h=c.i,p=c.maxW,d=c.minW,m=c.maxH,g=c.minH,v=r.calcWH(s),b=v.w,y=v.h;b=Math.min(b,l-f),b=Math.max(b,1),b=Math.max(Math.min(b,p),d),y=Math.max(Math.min(y,m),g),r.setState({resizing:n==="onResizeStop"?null:s}),u.call(r,h,b,y,{e:i,node:a,size:s})}}},t.prototype.render=function(){var n=this.props,r=n.x,i=n.y,o=n.w,a=n.h,s=n.isDraggable,u=n.isResizable,c=n.useCSSTransforms,l=this.calcPosition(r,i,o,a,this.state),f=zd.default.Children.only(this.props.children),h=zd.default.cloneElement(f,{className:(0,kue.default)("react-grid-item",f.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":s,"react-draggable-dragging":!!this.state.dragging,cssTransforms:c}),style:Tue({},this.props.style,f.props.style,this.createStyle(l))});return u&&(h=this.mixinResizable(h,l)),s&&(h=this.mixinDraggable(h)),h},t}(zd.default.Component);nR.propTypes={children:Cr.default.element,cols:Cr.default.number.isRequired,containerWidth:Cr.default.number.isRequired,rowHeight:Cr.default.number.isRequired,margin:Cr.default.array.isRequired,maxRows:Cr.default.number.isRequired,containerPadding:Cr.default.array.isRequired,x:Cr.default.number.isRequired,y:Cr.default.number.isRequired,w:Cr.default.number.isRequired,h:Cr.default.number.isRequired,minW:function(e,t){var n=e[t];if(typeof n!="number")return new Error("minWidth not Number");if(n>e.w||n>e.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(e,t){var n=e[t];if(typeof n!="number")return new Error("maxWidth not Number");if(n<e.w||n<e.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(e,t){var n=e[t];if(typeof n!="number")return new Error("minHeight not Number");if(n>e.h||n>e.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(e,t){var n=e[t];if(typeof n!="number")return new Error("maxHeight not Number");if(n<e.h||n<e.minH)return new Error("maxHeight smaller than item height/minHeight")},i:Cr.default.string.isRequired,onDragStop:Cr.default.func,onDragStart:Cr.default.func,onDrag:Cr.default.func,onResizeStop:Cr.default.func,onResizeStart:Cr.default.func,onResize:Cr.default.func,isDraggable:Cr.default.bool.isRequired,isResizable:Cr.default.bool.isRequired,static:Cr.default.bool,useCSSTransforms:Cr.default.bool.isRequired,className:Cr.default.string,handle:Cr.default.string,cancel:Cr.default.string};nR.defaultProps={className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0};KD.default=nR;ZE.__esModule=!0;var L5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cue=O,Ru=Gy(Cue),Pue=zs,Pr=Gy(Pue),Due=JE,j5=Gy(Due),Rue=o8,Nue=Gy(Rue),gr=fr,Mue=KD,B5=Gy(Mue);function Gy(e){return e&&e.__esModule?e:{default:e}}function Lue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Bue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s1=function(e){Bue(t,e);function t(n,r){Lue(this,t);var i=jue(this,e.call(this,n,r));return Fue.call(i),(0,gr.autoBindHandlers)(i,["onDragStart","onDrag","onDragStop","onResizeStart","onResize","onResizeStop"]),i}return t.prototype.componentDidMount=function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)},t.prototype.componentWillReceiveProps=function(n){var r=void 0;if(!(0,j5.default)(n.layout,this.props.layout)||n.compactType!==this.props.compactType?r=n.layout:(0,gr.childrenEqual)(this.props.children,n.children)||(r=this.state.layout),r){var i=(0,gr.synchronizeLayoutWithChildren)(r,n.children,n.cols,this.compactType(n)),o=this.state.layout;this.setState({layout:i}),this.onLayoutMaybeChanged(i,o)}},t.prototype.containerHeight=function(){if(this.props.autoSize){var n=(0,gr.bottom)(this.state.layout),r=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return n*this.props.rowHeight+(n-1)*this.props.margin[1]+r*2+"px"}},t.prototype.compactType=function(n){return n||(n=this.props),n.verticalCompact===!1?null:n.compactType},t.prototype.onDragStart=function(n,r,i,o){var a=o.e,s=o.node,u=this.state.layout,c=(0,gr.getLayoutItem)(u,n);if(c)return this.setState({oldDragItem:(0,gr.cloneLayoutItem)(c),oldLayout:this.state.layout}),this.props.onDragStart(u,c,c,null,a,s)},t.prototype.onDrag=function(n,r,i,o){var a=o.e,s=o.node,u=this.state.oldDragItem,c=this.state.layout,l=this.props.cols,f=(0,gr.getLayoutItem)(c,n);if(f){var h={w:f.w,h:f.h,x:f.x,y:f.y,placeholder:!0,i:n},p=!0;c=(0,gr.moveElement)(c,f,r,i,p,this.props.preventCollision,this.compactType(),l),this.props.onDrag(c,u,f,h,a,s),this.setState({layout:(0,gr.compact)(c,this.compactType(),l),activeDrag:h})}},t.prototype.onDragStop=function(n,r,i,o){var a=o.e,s=o.node,u=this.state.oldDragItem,c=this.state.layout,l=this.props,f=l.cols,h=l.preventCollision,p=(0,gr.getLayoutItem)(c,n);if(p){var d=!0;c=(0,gr.moveElement)(c,p,r,i,d,h,this.compactType(),f),this.props.onDragStop(c,u,p,null,a,s);var m=(0,gr.compact)(c,this.compactType(),f),g=this.state.oldLayout;this.setState({activeDrag:null,layout:m,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(m,g)}},t.prototype.onLayoutMaybeChanged=function(n,r){r||(r=this.state.layout),(0,j5.default)(r,n)||this.props.onLayoutChange(n)},t.prototype.onResizeStart=function(n,r,i,o){var a=o.e,s=o.node,u=this.state.layout,c=(0,gr.getLayoutItem)(u,n);c&&(this.setState({oldResizeItem:(0,gr.cloneLayoutItem)(c),oldLayout:this.state.layout}),this.props.onResizeStart(u,c,c,null,a,s))},t.prototype.onResize=function(n,r,i,o){var a=o.e,s=o.node,u=this.state,c=u.layout,l=u.oldResizeItem,f=this.props,h=f.cols,p=f.preventCollision,d=(0,gr.getLayoutItem)(c,n);if(d){var m=void 0;if(p){var g=(0,gr.getAllCollisions)(c,L5({},d,{w:r,h:i})).filter(function(_){return _.i!==d.i});if(m=g.length>0,m){var v=1/0,b=1/0;g.forEach(function(_){_.x>d.x&&(v=Math.min(v,_.x)),_.y>d.y&&(b=Math.min(b,_.y))}),Number.isFinite(v)&&(d.w=v-d.x),Number.isFinite(b)&&(d.h=b-d.y)}}m||(d.w=r,d.h=i);var y={w:d.w,h:d.h,x:d.x,y:d.y,static:!0,i:n};this.props.onResize(c,l,d,y,a,s),this.setState({layout:(0,gr.compact)(c,this.compactType(),h),activeDrag:y})}},t.prototype.onResizeStop=function(n,r,i,o){var a=o.e,s=o.node,u=this.state,c=u.layout,l=u.oldResizeItem,f=this.props.cols,h=(0,gr.getLayoutItem)(c,n);this.props.onResizeStop(c,l,h,null,a,s);var p=(0,gr.compact)(c,this.compactType(),f),d=this.state.oldLayout;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null}),this.onLayoutMaybeChanged(p,d)},t.prototype.placeholder=function(){var n=this.state.activeDrag;if(!n)return null;var r=this.props,i=r.width,o=r.cols,a=r.margin,s=r.containerPadding,u=r.rowHeight,c=r.maxRows,l=r.useCSSTransforms;return Ru.default.createElement(B5.default,{w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,className:"react-grid-placeholder",containerWidth:i,cols:o,margin:a,containerPadding:s||a,maxRows:c,rowHeight:u,isDraggable:!1,isResizable:!1,useCSSTransforms:l},Ru.default.createElement("div",null))},t.prototype.processGridItem=function(n){if(!(!n||!n.key)){var r=(0,gr.getLayoutItem)(this.state.layout,String(n.key));if(!r)return null;var i=this.props,o=i.width,a=i.cols,s=i.margin,u=i.containerPadding,c=i.rowHeight,l=i.maxRows,f=i.isDraggable,h=i.isResizable,p=i.useCSSTransforms,d=i.draggableCancel,m=i.draggableHandle,g=this.state.mounted,v=!!(!r.static&&f&&(r.isDraggable||r.isDraggable==null)),b=!!(!r.static&&h&&(r.isResizable||r.isResizable==null));return Ru.default.createElement(B5.default,{containerWidth:o,cols:a,margin:s,containerPadding:u||s,maxRows:l,rowHeight:c,cancel:d,handle:m,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:v,isResizable:b,useCSSTransforms:p&&g,usePercentages:!g,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static},n)}},t.prototype.render=function(){var n=this,r=this.props,i=r.className,o=r.style,a=(0,Nue.default)("react-grid-layout",i),s=L5({height:this.containerHeight()},o);return Ru.default.createElement("div",{className:a,style:s},Ru.default.Children.map(this.props.children,function(u){return n.processGridItem(u)}),this.placeholder())},t}(Ru.default.Component);s1.displayName="ReactGridLayout";s1.propTypes={className:Pr.default.string,style:Pr.default.object,width:Pr.default.number,autoSize:Pr.default.bool,cols:Pr.default.number,draggableCancel:Pr.default.string,draggableHandle:Pr.default.string,verticalCompact:function(e){e.verticalCompact},compactType:Pr.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;t!==void 0&&(0,gr.validateLayout)(t,"layout")},margin:Pr.default.arrayOf(Pr.default.number),containerPadding:Pr.default.arrayOf(Pr.default.number),rowHeight:Pr.default.number,maxRows:Pr.default.number,isDraggable:Pr.default.bool,isResizable:Pr.default.bool,preventCollision:Pr.default.bool,useCSSTransforms:Pr.default.bool,onLayoutChange:Pr.default.func,onDragStart:Pr.default.func,onDrag:Pr.default.func,onDragStop:Pr.default.func,onResizeStart:Pr.default.func,onResize:Pr.default.func,onResizeStop:Pr.default.func,children:function(e,t){var n=e[t],r={};Ru.default.Children.forEach(n,function(i){if(r[i.key])throw new Error('Duplicate child key "'+i.key+'" found! This will cause problems in ReactGridLayout.');r[i.key]=!0})}};s1.defaultProps={autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isDraggable:!0,isResizable:!0,useCSSTransforms:!0,verticalCompact:!0,compactType:"vertical",preventCollision:!1,onLayoutChange:gr.noop,onDragStart:gr.noop,onDrag:gr.noop,onDragStop:gr.noop,onResizeStart:gr.noop,onResize:gr.noop,onResizeStop:gr.noop};var Fue=function(){this.state={activeDrag:null,layout:(0,gr.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,this.compactType()),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null}};ZE.default=s1;var iR={},Qc={};Qc.__esModule=!0;Qc.getBreakpointFromWidth=Gue;Qc.getColsFromBreakpoint=Hue;Qc.findOrGenerateResponsiveLayout=Uue;Qc.sortBreakpoints=oR;var eb=fr;function Gue(e,t){for(var n=oR(e),r=n[0],i=1,o=n.length;i<o;i++){var a=n[i];t>e[a]&&(r=a)}return r}function Hue(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function Uue(e,t,n,r,i,o){if(e[n])return(0,eb.cloneLayout)(e[n]);for(var a=e[r],s=oR(t),u=s.slice(s.indexOf(n)),c=0,l=u.length;c<l;c++){var f=u[c];if(e[f]){a=e[f];break}}return a=(0,eb.cloneLayout)(a||[]),(0,eb.compact)((0,eb.correctBounds)(a,{cols:i}),o,i)}function oR(e){var t=Object.keys(e);return t.sort(function(n,r){return e[n]-e[r]})}iR.__esModule=!0;var F5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zue=O,G5=l1(zue),Vue=zs,bu=l1(Vue),Yue=JE,Rw=l1(Yue),kf=fr,_u=Qc,Xue=ZE,Wue=l1(Xue);function l1(e){return e&&e.__esModule?e:{default:e}}function que(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function $ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Kue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U5=function(e){return Object.prototype.toString.call(e)},aR=function(e){Kue(t,e);function t(){var n,r,i;$ue(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=(n=(r=H5(this,e.call.apply(e,[this].concat(a))),r),r.state=r.generateInitialState(),r.onLayoutChange=function(u){var c;r.props.onLayoutChange(u,F5({},r.props.layouts,(c={},c[r.state.breakpoint]=u,c)))},n),H5(r,i)}return t.prototype.generateInitialState=function(){var n=this.props,r=n.width,i=n.breakpoints,o=n.layouts,a=n.cols,s=(0,_u.getBreakpointFromWidth)(i,r),u=(0,_u.getColsFromBreakpoint)(s,a),c=this.props.verticalCompact===!1?null:this.props.compactType,l=(0,_u.findOrGenerateResponsiveLayout)(o,i,s,s,u,c);return{layout:l,breakpoint:s,cols:u}},t.prototype.componentWillReceiveProps=function(n){if(n.width!=this.props.width||n.breakpoint!==this.props.breakpoint||!(0,Rw.default)(n.breakpoints,this.props.breakpoints)||!(0,Rw.default)(n.cols,this.props.cols))this.onWidthChange(n);else if(!(0,Rw.default)(n.layouts,this.props.layouts)){var r=this.state,i=r.breakpoint,o=r.cols,a=(0,_u.findOrGenerateResponsiveLayout)(n.layouts,n.breakpoints,i,i,o,n.compactType);this.setState({layout:a})}},t.prototype.onWidthChange=function(n){var r=n.breakpoints,i=n.cols,o=n.layouts,a=n.compactType,s=n.breakpoint||(0,_u.getBreakpointFromWidth)(n.breakpoints,n.width),u=this.state.breakpoint;if(u!==s||this.props.breakpoints!==r||this.props.cols!==i){u in o||(o[u]=(0,kf.cloneLayout)(this.state.layout));var c=(0,_u.getColsFromBreakpoint)(s,i),l=(0,_u.findOrGenerateResponsiveLayout)(o,r,s,u,c,a);l=(0,kf.synchronizeLayoutWithChildren)(l,n.children,c,a),o[s]=l,this.props.onLayoutChange(l,o),this.props.onBreakpointChange(s,c),this.props.onWidthChange(n.width,n.margin,c,n.containerPadding),this.setState({breakpoint:s,layout:l,cols:c})}},t.prototype.render=function(){var n=this.props;n.breakpoint,n.breakpoints,n.cols,n.layouts,n.onBreakpointChange,n.onLayoutChange,n.onWidthChange;var r=que(n,["breakpoint","breakpoints","cols","layouts","onBreakpointChange","onLayoutChange","onWidthChange"]);return G5.default.createElement(Wue.default,F5({},r,{onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))},t}(G5.default.Component);aR.propTypes={breakpoint:bu.default.string,breakpoints:bu.default.object,cols:bu.default.object,layouts:function(e,t){if(U5(e[t])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+U5(e[t]));Object.keys(e[t]).forEach(function(n){if(!(n in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,kf.validateLayout)(e.layouts[n],"layouts."+n)})},width:bu.default.number.isRequired,onBreakpointChange:bu.default.func,onLayoutChange:bu.default.func,onWidthChange:bu.default.func};aR.defaultProps={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},layouts:{},onBreakpointChange:kf.noop,onLayoutChange:kf.noop,onWidthChange:kf.noop};iR.default=aR;var sR={};sR.__esModule=!0;var Que=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};sR.default=ace;var Zue=O,Nw=lR(Zue),Jue=zs,ece=lR(Jue),tce=Fn,rce=lR(tce);function lR(e){return e&&e.__esModule?e:{default:e}}function nce(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function ice(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function oce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ace(e){var t,n;return n=t=function(r){oce(i,r);function i(){var o,a,s;ice(this,i);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return s=(o=(a=z5(this,r.call.apply(r,[this].concat(c))),a),a.state={width:1280},a.mounted=!1,a.onWindowResize=function(){if(a.mounted){var f=rce.default.findDOMNode(a);f instanceof HTMLElement&&a.setState({width:f.offsetWidth})}},o),z5(a,s)}return i.prototype.componentDidMount=function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()},i.prototype.componentWillUnmount=function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)},i.prototype.render=function(){var o=this.props,a=o.measureBeforeMount,s=nce(o,["measureBeforeMount"]);return a&&!this.mounted?Nw.default.createElement("div",{className:this.props.className,style:this.props.style}):Nw.default.createElement(e,Que({},s,this.state))},i}(Nw.default.Component),t.defaultProps={measureBeforeMount:!1},t.propTypes={measureBeforeMount:ece.default.bool},n}(function(e){e.exports=ZE.default,e.exports.utils=fr,e.exports.Responsive=iR.default,e.exports.Responsive.utils=Qc,e.exports.WidthProvider=sR.default})(n8);var sce=n8.exports;const lce=Gi(sce);var x8={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof window<"u"?window:Pe,function(){if(typeof window>"u")return null;var n=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),r=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(l){return n.setTimeout(l,20)},i=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||function(l){n.clearTimeout(l)};function o(l,f){var h=Object.prototype.toString.call(l),p=h==="[object Array]"||h==="[object NodeList]"||h==="[object HTMLCollection]"||h==="[object Object]"||typeof jQuery<"u"&&l instanceof jQuery||typeof Elements<"u"&&l instanceof Elements,d=0,m=l.length;if(p)for(;d<m;d++)f(l[d]);else f(l)}function a(l){if(!l.getBoundingClientRect)return{width:l.offsetWidth,height:l.offsetHeight};var f=l.getBoundingClientRect();return{width:Math.round(f.width),height:Math.round(f.height)}}function s(l,f){Object.keys(f).forEach(function(h){l.style[h]=f[h]})}var u=function(l,f){var h=0;function p(){var m=[];this.add=function(b){m.push(b)};var g,v;this.call=function(b){for(g=0,v=m.length;g<v;g++)m[g].call(this,b)},this.remove=function(b){var y=[];for(g=0,v=m.length;g<v;g++)m[g]!==b&&y.push(m[g]);m=y},this.length=function(){return m.length}}function d(m,g){if(m){if(m.resizedAttached){m.resizedAttached.add(g);return}m.resizedAttached=new p,m.resizedAttached.add(g),m.resizeSensor=document.createElement("div"),m.resizeSensor.dir="ltr",m.resizeSensor.className="resize-sensor";var v={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},b={position:"absolute",left:"0px",top:"0px",transition:"0s"};s(m.resizeSensor,v);var y=document.createElement("div");y.className="resize-sensor-expand",s(y,v);var _=document.createElement("div");s(_,b),y.appendChild(_);var T=document.createElement("div");T.className="resize-sensor-shrink",s(T,v);var S=document.createElement("div");s(S,b),s(S,{width:"200%",height:"200%"}),T.appendChild(S),m.resizeSensor.appendChild(y),m.resizeSensor.appendChild(T),m.appendChild(m.resizeSensor);var E=window.getComputedStyle(m),I=E?E.getPropertyValue("position"):null;I!=="absolute"&&I!=="relative"&&I!=="fixed"&&I!=="sticky"&&(m.style.position="relative");var x=!1,C=0,w=a(m),B=0,L=0,k=!0;h=0;var R=function(){var oe=m.offsetWidth,me=m.offsetHeight;_.style.width=oe+10+"px",_.style.height=me+10+"px",y.scrollLeft=oe+10,y.scrollTop=me+10,T.scrollLeft=oe+10,T.scrollTop=me+10},F=function(){if(k){var oe=m.offsetWidth===0&&m.offsetHeight===0;if(oe){h||(h=r(function(){h=0,F()}));return}else k=!1}R()};m.resizeSensor.resetSensor=F;var U=function(){C=0,x&&(B=w.width,L=w.height,m.resizedAttached&&m.resizedAttached.call(w))},$=function(){w=a(m),x=w.width!==B||w.height!==L,x&&!C&&(C=r(U)),F()},ie=function(oe,me,ae){oe.attachEvent?oe.attachEvent("on"+me,ae):oe.addEventListener(me,ae)};ie(y,"scroll",$),ie(T,"scroll",$),h=r(function(){h=0,F()})}}o(l,function(m){d(m,f)}),this.detach=function(m){h||(i(h),h=0),u.detach(l,m)},this.reset=function(){l.resizeSensor.resetSensor()}};if(u.reset=function(l){o(l,function(f){f.resizeSensor.resetSensor()})},u.detach=function(l,f){o(l,function(h){h&&(h.resizedAttached&&typeof f=="function"&&(h.resizedAttached.remove(f),h.resizedAttached.length())||h.resizeSensor&&(h.contains(h.resizeSensor)&&h.removeChild(h.resizeSensor),delete h.resizeSensor,delete h.resizedAttached))})},typeof MutationObserver<"u"){var c=new MutationObserver(function(l){for(var f in l)if(l.hasOwnProperty(f))for(var h=l[f].addedNodes,p=0;p<h.length;p++)h[p].resizeSensor&&u.reset(h[p])});document.addEventListener("DOMContentLoaded",function(l){c.observe(document.body,{childList:!0,subtree:!0})})}return u})})(x8);var I8=x8.exports,C8={exports:{}};(function(e,t){(function(n,r){e.exports=r(I8)})(typeof window<"u"?window:Pe,function(n){var r=function(){var o,a={},s=[];function u(E){E||(E=document.documentElement);var I=window.getComputedStyle(E,null).fontSize;return parseFloat(I)||16}function c(E){if(!E.getBoundingClientRect)return{width:E.offsetWidth,height:E.offsetHeight};var I=E.getBoundingClientRect();return{width:Math.round(I.width),height:Math.round(I.height)}}function l(E,I){var x=I.split(/\d/),C=x[x.length-1];switch(I=parseFloat(I),C){case"px":return I;case"em":return I*u(E);case"rem":return I*u();case"vw":return I*document.documentElement.clientWidth/100;case"vh":return I*document.documentElement.clientHeight/100;case"vmin":case"vmax":var w=document.documentElement.clientWidth/100,B=document.documentElement.clientHeight/100,L=Math[C==="vmin"?"min":"max"];return I*L(w,B);default:return I}}function f(E,I){this.element=E;var x,C,w,B,L,k,R,F,U=["min-width","min-height","max-width","max-height"];this.call=function(){w=c(this.element),k={};for(x in a[I])a[I].hasOwnProperty(x)&&(C=a[I][x],B=l(this.element,C.value),L=C.property==="width"?w.width:w.height,F=C.mode+"-"+C.property,R="",C.mode==="min"&&L>=B&&(R+=C.value),C.mode==="max"&&L<=B&&(R+=C.value),k[F]||(k[F]=""),R&&(" "+k[F]+" ").indexOf(" "+R+" ")===-1&&(k[F]+=" "+R));for(var $ in U)U.hasOwnProperty($)&&(k[U[$]]?this.element.setAttribute(U[$],k[U[$]].substr(1)):this.element.removeAttribute(U[$]))}}function h(E,I){E.elementQueriesSetupInformation||(E.elementQueriesSetupInformation=new f(E,I)),E.elementQueriesSensor||(E.elementQueriesSensor=new n(E,function(){E.elementQueriesSetupInformation.call()}))}function p(E,I,x,C){if(typeof a[E]>"u"){a[E]=[];var w=s.length;o.innerHTML+=`
`+E+" {animation: 0.1s element-queries;}",o.innerHTML+=`
`+E+" > .resize-sensor {min-width: "+w+"px;}",s.push(E)}a[E].push({mode:I,property:x,value:C})}function d(E){var I;if(document.querySelectorAll&&(I=E?E.querySelectorAll.bind(E):document.querySelectorAll.bind(document)),!I&&typeof $$<"u"&&(I=$$),!I&&typeof jQuery<"u"&&(I=jQuery),!I)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return I}function m(E){var I=d(E);for(var x in a)if(a.hasOwnProperty(x))for(var C=I(x,E),w=0,B=C.length;w<B;w++)h(C[w],x)}function g(E){var I=[],x=[],C=[],w=0,B=-1,L=[];for(var k in E.children)if(E.children.hasOwnProperty(k)&&E.children[k].tagName&&E.children[k].tagName.toLowerCase()==="img"){I.push(E.children[k]);var R=E.children[k].getAttribute("min-width")||E.children[k].getAttribute("data-min-width"),F=E.children[k].getAttribute("data-src")||E.children[k].getAttribute("url");C.push(F);var U={minWidth:R};x.push(U),R?E.children[k].style.display="none":(w=I.length-1,E.children[k].style.display="block")}B=w;function $(){var ie=!1,oe;for(oe in I)I.hasOwnProperty(oe)&&x[oe].minWidth&&E.offsetWidth>x[oe].minWidth&&(ie=oe);if(ie||(ie=w),B!==ie)if(L[ie])I[B].style.display="none",I[ie].style.display="block",B=ie;else{var me=new Image;me.onload=function(){I[ie].src=C[ie],I[B].style.display="none",I[ie].style.display="block",L[ie]=!0,B=ie},me.src=C[ie]}else I[ie].src=C[ie]}E.resizeSensorInstance=new n(E,$),$()}function v(){for(var E=d(),I=E("[data-responsive-image],[responsive-image]"),x=0,C=I.length;x<C;x++)g(I[x])}var b=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/mgi,y=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/mgi;function _(E){var I,x,C,w;for(E=E.replace(/'/g,'"');(I=b.exec(E))!==null;)for(x=I[1]+I[3],C=I[2];(w=y.exec(C))!==null;)p(x,w[1],w[2],w[3])}function T(E){var I="";if(E)if(typeof E=="string")E=E.toLowerCase(),(E.indexOf("min-width")!==-1||E.indexOf("max-width")!==-1)&&_(E);else for(var x=0,C=E.length;x<C;x++)E[x].type===1?(I=E[x].selectorText||E[x].cssText,(I.indexOf("min-height")!==-1||I.indexOf("max-height")!==-1||I.indexOf("min-width")!==-1||I.indexOf("max-width")!==-1)&&_(I)):E[x].type===4?T(E[x].cssRules||E[x].rules):E[x].type===3&&E[x].styleSheet.hasOwnProperty("cssRules")&&T(E[x].styleSheet.cssRules)}var S=!1;this.init=function(){var E="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?E="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?E="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(E="oanimationstart"),document.body.addEventListener(E,function(C){var w=C.target,B=w&&window.getComputedStyle(w,null),L=B&&B.getPropertyValue("animation-name"),k=L&&L.indexOf("element-queries")!==-1;if(k){w.elementQueriesSensor=new n(w,function(){w.elementQueriesSetupInformation&&w.elementQueriesSetupInformation.call()});var R=window.getComputedStyle(w.resizeSensor,null),F=R.getPropertyValue("min-width");F=parseInt(F.replace("px","")),h(C.target,s[F])}}),S||(o=document.createElement("style"),o.type="text/css",o.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",o.innerHTML+=`
@keyframes element-queries { 0% { visibility: inherit; } }`,document.getElementsByTagName("head")[0].appendChild(o),S=!0);for(var I=0,x=document.styleSheets.length;I<x;I++)try{document.styleSheets[I].href&&document.styleSheets[I].href.indexOf("file://")===0&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[I].href),T(document.styleSheets[I].cssRules||document.styleSheets[I].rules||document.styleSheets[I].cssText)}catch{}v()},this.findElementQueriesElements=function(E){m(E)},this.update=function(){this.init()}};r.update=function(){r.instance.update()},r.detach=function(o){o.elementQueriesSetupInformation?(o.elementQueriesSensor.detach(),delete o.elementQueriesSetupInformation,delete o.elementQueriesSensor):o.resizeSensorInstance&&(o.resizeSensorInstance.detach(),delete o.resizeSensorInstance)},r.init=function(){r.instance||(r.instance=new r),r.instance.init()};var i=function(o){if(document.addEventListener)document.addEventListener("DOMContentLoaded",o,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var a=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(o(),clearInterval(a))},10);else window.onload=o};return r.findElementQueriesElements=function(o){r.instance.findElementQueriesElements(o)},r.listen=function(){i(r.init)},r})})(C8);var uce=C8.exports,v_={ResizeSensor:I8,ElementQueries:uce};function u1(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            ";break}for(var n=[`
`],r=0;r<100;r++)n.push(n[r]+t);return n}function Ys(){this.step="    ",this.shift=u1(this.step)}Ys.prototype.xml=function(e,t){var n=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=n.length,i=!1,o=0,a="",s=0,u=t?u1(t):this.shift;for(s=0;s<r;s++)n[s].search(/<!/)>-1?(a+=u[o]+n[s],i=!0,(n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1||n[s].search(/!DOCTYPE/)>-1)&&(i=!1)):n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1?(a+=n[s],i=!1):/^<\w/.exec(n[s-1])&&/^<\/\w/.exec(n[s])&&/^<[\w:\-\.\,]+/.exec(n[s-1])==/^<\/[\w:\-\.\,]+/.exec(n[s])[0].replace("/","")?(a+=n[s],i||o--):n[s].search(/<\w/)>-1&&n[s].search(/<\//)==-1&&n[s].search(/\/>/)==-1?a=i?a+=n[s]:a+=u[o++]+n[s]:n[s].search(/<\w/)>-1&&n[s].search(/<\//)>-1?a=i?a+=n[s]:a+=u[o]+n[s]:n[s].search(/<\//)>-1?a=i?a+=n[s]:a+=u[--o]+n[s]:n[s].search(/\/>/)>-1?a=i?a+=n[s]:a+=u[o]+n[s]:n[s].search(/<\?/)>-1||n[s].search(/xmlns\:/)>-1||n[s].search(/xmlns\=/)>-1?a+=u[o]+n[s]:a+=n[s];return a[0]==`
`?a.slice(1):a};Ys.prototype.json=function(e,n){var n=n||this.step;return typeof JSON>"u"?e:typeof e=="string"?JSON.stringify(JSON.parse(e),null,n):typeof e=="object"?JSON.stringify(e,null,n):e};Ys.prototype.css=function(e,t){var n=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),r=n.length,i=0,o="",a=0,s=t?u1(t):this.shift;for(a=0;a<r;a++)/\{/.exec(n[a])?o+=s[i++]+n[a]:/\}/.exec(n[a])?o+=s[--i]+n[a]:(/\*\\/.exec(n[a]),o+=s[i]+n[a]);return o.replace(/^\n{1,}/,"")};function cce(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function hce(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /ig,"~::~"+t+t+"AND ").replace(/ BETWEEN /ig,"~::~"+t+"BETWEEN ").replace(/ CASE /ig,"~::~"+t+"CASE ").replace(/ ELSE /ig,"~::~"+t+"ELSE ").replace(/ END /ig,"~::~"+t+"END ").replace(/ FROM /ig,"~::~FROM ").replace(/ GROUP\s{1,}BY/ig,"~::~GROUP BY ").replace(/ HAVING /ig,"~::~HAVING ").replace(/ IN /ig," IN ").replace(/ JOIN /ig,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /ig,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /ig,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /ig,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /ig,"~::~RIGHT JOIN ").replace(/ ON /ig,"~::~"+t+"ON ").replace(/ OR /ig,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/ig,"~::~ORDER BY ").replace(/ OVER /ig,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /ig,"~::~(SELECT ").replace(/\)\s{0,}SELECT /ig,")~::~SELECT ").replace(/ THEN /ig," THEN~::~"+t).replace(/ UNION /ig,"~::~UNION~::~").replace(/ USING /ig,"~::~USING ").replace(/ WHEN /ig,"~::~"+t+"WHEN ").replace(/ WHERE /ig,"~::~WHERE ").replace(/ WITH /ig,"~::~WITH ").replace(/ ALL /ig," ALL ").replace(/ AS /ig," AS ").replace(/ ASC /ig," ASC ").replace(/ DESC /ig," DESC ").replace(/ DISTINCT /ig," DISTINCT ").replace(/ EXISTS /ig," EXISTS ").replace(/ NOT /ig," NOT ").replace(/ NULL /ig," NULL ").replace(/ LIKE /ig," LIKE ").replace(/\s{0,}SELECT /ig,"SELECT ").replace(/\s{0,}UPDATE /ig,"UPDATE ").replace(/ SET /ig," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}Ys.prototype.sql=function(e,t){var n=e.replace(/\s{1,}/g," ").replace(/\'/ig,"~::~'").split("~::~"),r=n.length,i=[],o=0,a=this.step,s=0,u="",c=0,l=t?u1(t):this.shift;for(c=0;c<r;c++)c%2?i=i.concat(n[c]):i=i.concat(hce(n[c],a));for(r=i.length,c=0;c<r;c++)s=cce(i[c],s),/\s{0,}\s{0,}SELECT\s{0,}/.exec(i[c])&&(i[c]=i[c].replace(/\,/g,`,
`+a+a)),/\s{0,}\s{0,}SET\s{0,}/.exec(i[c])&&(i[c]=i[c].replace(/\,/g,`,
`+a+a)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(i[c])?(o++,u+=l[o]+i[c]):/\'/.exec(i[c])?(s<1&&o&&o--,u+=i[c]):(u+=l[o]+i[c],s<1&&o&&o--);return u=u.replace(/^\n{1,}/,"").replace(/\n{1,}/g,`
`),u};Ys.prototype.xmlmin=function(e,t){var n=t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns");return n.replace(/>\s{0,}</g,"><")};Ys.prototype.jsonmin=function(e){return typeof JSON>"u"?e:JSON.stringify(JSON.parse(e),null,0)};Ys.prototype.cssmin=function(e,t){var n=t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"");return n.replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")};Ys.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")};var fce=new Ys;const pce=Gi(fce);var dce=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0},uR={},mce=Object.prototype.hasOwnProperty,gce;function V5(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function Y5(e){try{return encodeURIComponent(e)}catch{return null}}function yce(e){for(var t=/([^=?#&]+)=?([^&]*)/g,n={},r;r=t.exec(e);){var i=V5(r[1]),o=V5(r[2]);i===null||o===null||i in n||(n[i]=o)}return n}function vce(e,t){t=t||"";var n=[],r,i;typeof t!="string"&&(t="?");for(i in e)if(mce.call(e,i)){if(r=e[i],!r&&(r===null||r===gce||isNaN(r))&&(r=""),i=Y5(i),r=Y5(r),i===null||r===null)continue;n.push(i+"="+r)}return n.length?t+n.join("&"):""}uR.stringify=vce;uR.parse=yce;var P8=dce,c1=uR,bce=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,D8=/[\n\r\t]/g,_ce=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,R8=/:\d+$/,Tce=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Ece=/^[a-zA-Z]:/;function cR(e){return(e||"").toString().replace(bce,"")}var Kk=[["#","hash"],["?","query"],function(e,t){return Ma(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],X5={hash:1,query:1};function N8(e){var t;typeof window<"u"?t=window:typeof globalThis<"u"?t=globalThis:typeof self<"u"?t=self:t={};var n=t.location||{};e=e||n;var r={},i=typeof e,o;if(e.protocol==="blob:")r=new Ga(unescape(e.pathname),{});else if(i==="string"){r=new Ga(e,{});for(o in X5)delete r[o]}else if(i==="object"){for(o in e)o in X5||(r[o]=e[o]);r.slashes===void 0&&(r.slashes=_ce.test(e.href))}return r}function Ma(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function M8(e,t){e=cR(e),e=e.replace(D8,""),t=t||{};var n=Tce.exec(e),r=n[1]?n[1].toLowerCase():"",i=!!n[2],o=!!n[3],a=0,s;return i?o?(s=n[2]+n[3]+n[4],a=n[2].length+n[3].length):(s=n[2]+n[4],a=n[2].length):o?(s=n[3]+n[4],a=n[3].length):s=n[4],r==="file:"?a>=2&&(s=s.slice(2)):Ma(r)?s=n[4]:r?i&&(s=s.slice(2)):a>=2&&Ma(t.protocol)&&(s=n[4]),{protocol:r,slashes:i||Ma(r),slashesCount:a,rest:s}}function Sce(e,t){if(e==="")return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)n[r]==="."?n.splice(r,1):n[r]===".."?(n.splice(r,1),a++):a&&(r===0&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),(i==="."||i==="..")&&n.push(""),n.join("/")}function Ga(e,t,n){if(e=cR(e),e=e.replace(D8,""),!(this instanceof Ga))return new Ga(e,t,n);var r,i,o,a,s,u,c=Kk.slice(),l=typeof t,f=this,h=0;for(l!=="object"&&l!=="string"&&(n=t,t=null),n&&typeof n!="function"&&(n=c1.parse),t=N8(t),i=M8(e||"",t),r=!i.protocol&&!i.slashes,f.slashes=i.slashes||r&&t.slashes,f.protocol=i.protocol||t.protocol||"",e=i.rest,(i.protocol==="file:"&&(i.slashesCount!==2||Ece.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!Ma(f.protocol)))&&(c[3]=[/(.*)/,"pathname"]);h<c.length;h++){if(a=c[h],typeof a=="function"){e=a(e,f);continue}o=a[0],u=a[1],o!==o?f[u]=e:typeof o=="string"?(s=o==="@"?e.lastIndexOf(o):e.indexOf(o),~s&&(typeof a[2]=="number"?(f[u]=e.slice(0,s),e=e.slice(s+a[2])):(f[u]=e.slice(s),e=e.slice(0,s)))):(s=o.exec(e))&&(f[u]=s[1],e=e.slice(0,s.index)),f[u]=f[u]||r&&a[3]&&t[u]||"",a[4]&&(f[u]=f[u].toLowerCase())}n&&(f.query=n(f.query)),r&&t.slashes&&f.pathname.charAt(0)!=="/"&&(f.pathname!==""||t.pathname!=="")&&(f.pathname=Sce(f.pathname,t.pathname)),f.pathname.charAt(0)!=="/"&&Ma(f.protocol)&&(f.pathname="/"+f.pathname),P8(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(s=f.auth.indexOf(":"),~s?(f.username=f.auth.slice(0,s),f.username=encodeURIComponent(decodeURIComponent(f.username)),f.password=f.auth.slice(s+1),f.password=encodeURIComponent(decodeURIComponent(f.password))):f.username=encodeURIComponent(decodeURIComponent(f.auth)),f.auth=f.password?f.username+":"+f.password:f.username),f.origin=f.protocol!=="file:"&&Ma(f.protocol)&&f.host?f.protocol+"//"+f.host:"null",f.href=f.toString()}function wce(e,t,n){var r=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(n||c1.parse)(t)),r[e]=t;break;case"port":r[e]=t,P8(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,R8.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var i=e==="pathname"?"/":"#";r[e]=t.charAt(0)!==i?i+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var o=t.indexOf(":");~o?(r.username=t.slice(0,o),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(o+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<Kk.length;a++){var s=Kk[a];s[4]&&(r[s[1]]=r[s[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&Ma(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function Ace(e){(!e||typeof e!="function")&&(e=c1.stringify);var t,n=this,r=n.host,i=n.protocol;i&&i.charAt(i.length-1)!==":"&&(i+=":");var o=i+(n.protocol&&n.slashes||Ma(n.protocol)?"//":"");return n.username?(o+=n.username,n.password&&(o+=":"+n.password),o+="@"):n.password?(o+=":"+n.password,o+="@"):n.protocol!=="file:"&&Ma(n.protocol)&&!r&&n.pathname!=="/"&&(o+="@"),(r[r.length-1]===":"||R8.test(n.hostname)&&!n.port)&&(r+=":"),o+=r+n.pathname,t=typeof n.query=="object"?e(n.query):n.query,t&&(o+=t.charAt(0)!=="?"?"?"+t:t),n.hash&&(o+=n.hash),o}Ga.prototype={set:wce,toString:Ace};Ga.extractProtocol=M8;Ga.location=N8;Ga.trimLeft=cR;Ga.qs=c1;var Oce=Ga;const kce=Gi(Oce),L8=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),hR=(e,t)=>t?e.toLowerCase():e,j8=(e,{caseInsensitive:t}={})=>(n,r,i=1/0)=>{const o=hR(n,t);return e[o]||(e[o]=[],e.__times__[o]=[]),e[o].push(r),e.__times__[o].push(+i||1/0),{event:o,handler:r}},fR=(e,{caseInsensitive:t}={})=>(n,r)=>{typeof n=="object"&&(r=n.handler,n=n.event);const i=hR(n,t);if(!e[i])return;const o=e[i].indexOf(r);o===-1||o>=e[i].length||(e[i].splice(o,1),e.__times__[i].splice(o,1))},W5=(e,t)=>()=>{e.forEach(n=>n(t))},B8=(e,{isGlobal:t,caseInsensitive:n,async:r}={})=>{const i=fR(e);return(o,a,s={})=>{const u=hR(o,n);if(!e[u])return;const c=[...e[u]];if(c.forEach((l,f)=>{--e.__times__[u][f]<1&&i(u,l)}),r||s.async?setTimeout(W5(c,a),0):W5(c,a)(),t&&!s.isNoGlobalBroadcast)try{L8.postMessage({event:u,news:a})}catch(l){if(l instanceof DOMException)console.warn(`Could not broadcast '${u}' globally. Payload is not clonable.`);else throw l}}},F8=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},G8=()=>({__times__:{}}),h1=(e={})=>{const t=e.async||!1,n=e.caseInsensitive||!1,r=e.stack||G8();return r.__times__||(r.__times__={}),{publish:B8(r,{async:t,caseInsensitive:n}),subscribe:j8(r,{caseInsensitive:n}),unsubscribe:fR(r,{caseInsensitive:n}),clear:F8(r),stack:r}},Vd=G8(),qm={publish:B8(Vd,{isGlobal:!0}),subscribe:j8(Vd),unsubscribe:fR(Vd),clear:F8(Vd),stack:Vd};L8.onmessage=({data:{event:e,news:t}})=>qm.publish(e,t,{isNoGlobalBroadcast:!0});const Tt={"context-menu":"_context-menu_18ock_1","context-menu-dark":"_context-menu-dark_18ock_12","context-menu-icon":"_context-menu-icon_18ock_17","context-menu-item":"_context-menu-item_18ock_27","context-menu-hr":"_context-menu-hr_18ock_38","play-icon":"_play-icon_18ock_45","context-menu-span":"_context-menu-span_18ock_52"};function It(e){return O.createElement("div",{"data-menu-item-for":typeof e.children=="string"?e.children:null,className:Tt["context-menu-item"],onClick:t=>e.onClick(t),onMouseEnter:t=>e.onMouseEnter(t),onMouseLeave:t=>e.onMouseLeave(t),role:"button",tabIndex:0},O.createElement("span",{className:Tt["context-menu-span"]},e.children))}It.defaultProps={onMouseEnter:()=>{},onMouseLeave:()=>{}};It.propTypes={children:N.node.isRequired,onClick:N.func.isRequired,onMouseEnter:N.func,onMouseLeave:N.func};var xce={value:()=>{}};function td(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Zb(n)}function Zb(e){this._=e}function Ice(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zb.prototype=td.prototype={constructor:Zb,on:function(e,t){var n=this._,r=Ice(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=Cce(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=q5(n[i],e.name,t);else if(t==null)for(i in n)n[i]=q5(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zb(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Cce(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function q5(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=xce,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}function Mw(e){e.stopImmediatePropagation()}function xf(e){e.preventDefault(),e.stopImmediatePropagation()}function f1(e){var t=e.document.documentElement,n=Wt(e).on("dragstart.drag",xf,!0);"onselectstart"in t?n.on("selectstart.drag",xf,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function p1(e,t){var n=e.document.documentElement,r=Wt(e).on("dragstart.drag",null);t&&(r.on("click.drag",xf,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const tb=e=>()=>e;function Qk(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}Qk.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Pce(e){return!e.ctrlKey&&!e.button}function Dce(){return this.parentNode}function Rce(e,t){return t??{x:e.x,y:e.y}}function Nce(){return navigator.maxTouchPoints||"ontouchstart"in this}function as(){var e=Pce,t=Dce,n=Rce,r=Nce,i={},o=td("start","drag","end"),a=0,s,u,c,l,f=0;function h(_){_.on("mousedown.drag",p).filter(r).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(_,T){if(!(l||!e.call(this,_,T))){var S=y(this,t.call(this,_,T),_,T,"mouse");S&&(Wt(_.view).on("mousemove.drag",d,!0).on("mouseup.drag",m,!0),f1(_.view),Mw(_),c=!1,s=_.clientX,u=_.clientY,S("start",_))}}function d(_){if(xf(_),!c){var T=_.clientX-s,S=_.clientY-u;c=T*T+S*S>f}i.mouse("drag",_)}function m(_){Wt(_.view).on("mousemove.drag mouseup.drag",null),p1(_.view,c),xf(_),i.mouse("end",_)}function g(_,T){if(e.call(this,_,T)){var S=_.changedTouches,E=t.call(this,_,T),I=S.length,x,C;for(x=0;x<I;++x)(C=y(this,E,_,T,S[x].identifier,S[x]))&&(Mw(_),C("start",_,S[x]))}}function v(_){var T=_.changedTouches,S=T.length,E,I;for(E=0;E<S;++E)(I=i[T[E].identifier])&&(xf(_),I("drag",_,T[E]))}function b(_){var T=_.changedTouches,S=T.length,E,I;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),E=0;E<S;++E)(I=i[T[E].identifier])&&(Mw(_),I("end",_,T[E]))}function y(_,T,S,E,I,x){var C=o.copy(),w=yr(x||S,T),B,L,k;if((k=n.call(_,new Qk("beforestart",{sourceEvent:S,target:h,identifier:I,active:a,x:w[0],y:w[1],dx:0,dy:0,dispatch:C}),E))!=null)return B=k.x-w[0]||0,L=k.y-w[1]||0,function R(F,U,$){var ie=w,oe;switch(F){case"start":i[I]=R,oe=a++;break;case"end":delete i[I],--a;case"drag":w=yr($||U,T),oe=a;break}C.call(F,_,new Qk(F,{sourceEvent:U,subject:k,target:h,identifier:I,active:oe,x:w[0]+B,y:w[1]+L,dx:w[0]-ie[0],dy:w[1]-ie[1],dispatch:C}),E)}}return h.filter=function(_){return arguments.length?(e=typeof _=="function"?_:tb(!!_),h):e},h.container=function(_){return arguments.length?(t=typeof _=="function"?_:tb(_),h):t},h.subject=function(_){return arguments.length?(n=typeof _=="function"?_:tb(_),h):n},h.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:tb(!!_),h):r},h.on=function(){var _=o.on.apply(o,arguments);return _===o?h:_},h.clickDistance=function(_){return arguments.length?(f=(_=+_)*_,h):Math.sqrt(f)},h}const Mce=Object.freeze(Object.defineProperty({__proto__:null,drag:as,dragDisable:f1,dragEnable:p1},Symbol.toStringTag,{value:"Module"}));var up=0,ym=0,Yd=0,H8=1e3,b_,vm,__=0,pc=0,d1=0,Kg=typeof performance=="object"&&performance.now?performance:Date,U8=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pR(){return pc||(U8(Lce),pc=Kg.now()+d1)}function Lce(){pc=0}function T_(){this._call=this._time=this._next=null}T_.prototype=z8.prototype={constructor:T_,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pR():+n)+(t==null?0:+t),!this._next&&vm!==this&&(vm?vm._next=this:b_=this,vm=this),this._call=e,this._time=n,Zk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zk())}};function z8(e,t,n){var r=new T_;return r.restart(e,t,n),r}function jce(){pR(),++up;for(var e=b_,t;e;)(t=pc-e._time)>=0&&e._call.call(null,t),e=e._next;--up}function $5(){pc=(__=Kg.now())+d1,up=ym=0;try{jce()}finally{up=0,Fce(),pc=0}}function Bce(){var e=Kg.now(),t=e-__;t>H8&&(d1-=t,__=e)}function Fce(){for(var e,t=b_,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:b_=n);vm=e,Zk(r)}function Zk(e){if(!up){ym&&(ym=clearTimeout(ym));var t=e-pc;t>24?(e<1/0&&(ym=setTimeout($5,e-Kg.now()-d1)),Yd&&(Yd=clearInterval(Yd))):(Yd||(__=Kg.now(),Yd=setInterval(Bce,H8)),up=1,U8($5))}}function K5(e,t,n){var r=new T_;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Gce=td("start","end","cancel","interrupt"),Hce=[],V8=0,Q5=1,Jk=2,Jb=3,Z5=4,ex=5,e0=6;function m1(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Uce(e,n,{name:t,index:r,group:i,on:Gce,tween:Hce,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:V8})}function dR(e,t){var n=ra(e,t);if(n.state>V8)throw new Error("too late; already scheduled");return n}function qa(e,t){var n=ra(e,t);if(n.state>Jb)throw new Error("too late; already running");return n}function ra(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Uce(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=z8(o,0,n.time);function o(c){n.state=Q5,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var l,f,h,p;if(n.state!==Q5)return u();for(l in r)if(p=r[l],p.name===n.name){if(p.state===Jb)return K5(a);p.state===Z5?(p.state=e0,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[l]):+l<t&&(p.state=e0,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[l])}if(K5(function(){n.state===Jb&&(n.state=Z5,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Jk,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jk){for(n.state=Jb,i=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(p=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function s(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=ex,1),f=-1,h=i.length;++f<h;)i[f].call(e,l);n.state===ex&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=e0,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function tx(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Jk&&r.state<ex,r.state=e0,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function zce(e){return this.each(function(){tx(this,e)})}function Vce(e,t){var n,r;return function(){var i=qa(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Yce(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=qa(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function Xce(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ra(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?Vce:Yce)(n,e,t))}function mR(e,t,n){var r=e._id;return e.each(function(){var i=qa(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ra(i,r).value[t]}}function Y8(e,t){var n;return(typeof t=="number"?yo:t instanceof fn?ip:(n=fn(t))?(t=n,ip):CD)(e,t)}function Wce(e){return function(){this.removeAttribute(e)}}function qce(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $ce(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function Kce(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function Qce(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function Zce(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function Jce(e,t){var n=Vc(e),r=n==="transform"?Az:Y8;return this.attrTween(e,typeof t=="function"?(n.local?Zce:Qce)(n,r,mR(this,"attr."+e,t)):t==null?(n.local?qce:Wce)(n):(n.local?Kce:$ce)(n,r,t))}function ehe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function the(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rhe(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&the(e,o)),n}return i._value=t,i}function nhe(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ehe(e,o)),n}return i._value=t,i}function ihe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Vc(e);return this.tween(n,(r.local?rhe:nhe)(r,t))}function ohe(e,t){return function(){dR(this,e).delay=+t.apply(this,arguments)}}function ahe(e,t){return t=+t,function(){dR(this,e).delay=t}}function she(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ohe:ahe)(t,e)):ra(this.node(),t).delay}function lhe(e,t){return function(){qa(this,e).duration=+t.apply(this,arguments)}}function uhe(e,t){return t=+t,function(){qa(this,e).duration=t}}function che(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lhe:uhe)(t,e)):ra(this.node(),t).duration}function hhe(e,t){if(typeof t!="function")throw new Error;return function(){qa(this,e).ease=t}}function fhe(e){var t=this._id;return arguments.length?this.each(hhe(t,e)):ra(this.node(),t).ease}function phe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;qa(this,e).ease=n}}function dhe(e){if(typeof e!="function")throw new Error;return this.each(phe(this._id,e))}function mhe(e){typeof e!="function"&&(e=BE(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,c=0;c<a;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&s.push(u);return new Ms(r,this._parents,this._name,this._id)}function ghe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=t[s],c=n[s],l=u.length,f=a[s]=new Array(l),h,p=0;p<l;++p)(h=u[p]||c[p])&&(f[p]=h);for(;s<r;++s)a[s]=t[s];return new Ms(a,this._parents,this._name,this._id)}function yhe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function vhe(e,t,n){var r,i,o=yhe(t)?dR:qa;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function bhe(e,t){var n=this._id;return arguments.length<2?ra(this.node(),n).on.on(e):this.each(vhe(n,e,t))}function _he(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function The(){return this.on("end.remove",_he(this._id))}function Ehe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Py(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,c=o[a]=new Array(u),l,f,h=0;h<u;++h)(l=s[h])&&(f=e.call(l,l.__data__,h,s))&&("__data__"in l&&(f.__data__=l.__data__),c[h]=f,m1(c[h],t,n,h,c,ra(l,n)));return new Ms(o,this._parents,t,n)}function She(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jE(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],c=u.length,l,f=0;f<c;++f)if(l=u[f]){for(var h=e.call(l,l.__data__,f,u),p,d=ra(l,n),m=0,g=h.length;m<g;++m)(p=h[m])&&m1(p,t,n,m,h,d);o.push(h),a.push(l)}return new Ms(o,a,t,n)}var whe=ta.prototype.constructor;function Ahe(){return new whe(this._groups,this._parents)}function Ohe(e,t){var n,r,i;return function(){var o=ko(this,e),a=(this.style.removeProperty(e),ko(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function X8(e){return function(){this.style.removeProperty(e)}}function khe(e,t,n){var r,i=n+"",o;return function(){var a=ko(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function xhe(e,t,n){var r,i,o;return function(){var a=ko(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),ko(this,e))),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}function Ihe(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var u=qa(this,e),c=u.on,l=u.value[o]==null?s||(s=X8(t)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(a,i=l),u.on=r}}function Che(e,t,n){var r=(e+="")=="transform"?wz:Y8;return t==null?this.styleTween(e,Ohe(e,r)).on("end.style."+e,X8(e)):typeof t=="function"?this.styleTween(e,xhe(e,r,mR(this,"style."+e,t))).each(Ihe(this._id,e)):this.styleTween(e,khe(e,r,t),n).on("end.style."+e,null)}function Phe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Dhe(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Phe(e,a,n)),r}return o._value=t,o}function Rhe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Dhe(e,t,n??""))}function Nhe(e){return function(){this.textContent=e}}function Mhe(e){return function(){var t=e(this);this.textContent=t??""}}function Lhe(e){return this.tween("text",typeof e=="function"?Mhe(mR(this,"text",e)):Nhe(e==null?"":e+""))}function jhe(e){return function(t){this.textContent=e.call(this,t)}}function Bhe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&jhe(i)),t}return r._value=e,r}function Fhe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Bhe(e))}function Ghe(){for(var e=this._name,t=this._id,n=W8(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,c=0;c<s;++c)if(u=a[c]){var l=ra(u,t);m1(u,e,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ms(r,this._parents,e,n)}function Hhe(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var c=qa(this,r),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),i===0&&o()})}var Uhe=0;function Ms(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function W8(){return++Uhe}var Tu=ta.prototype;Ms.prototype={constructor:Ms,select:Ehe,selectAll:She,filter:mhe,merge:ghe,selection:Ahe,transition:Ghe,call:Tu.call,nodes:Tu.nodes,node:Tu.node,size:Tu.size,empty:Tu.empty,each:Tu.each,on:bhe,attr:Jce,attrTween:ihe,style:Che,styleTween:Rhe,text:Lhe,textTween:Fhe,remove:The,tween:Xce,delay:she,duration:che,ease:fhe,easeVarying:dhe,end:Hhe,[Symbol.iterator]:Tu[Symbol.iterator]};function zhe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Vhe={time:null,delay:0,duration:250,ease:zhe};function Yhe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Xhe(e){var t,n;e instanceof Ms?(t=e._id,e=e._name):(t=W8(),(n=Vhe).time=pR(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,c=0;c<s;++c)(u=a[c])&&m1(u,e,t,c,a,n||Yhe(u,t));return new Ms(r,this._parents,e,t)}ta.prototype.interrupt=zce;ta.prototype.transition=Xhe;const Lw=e=>()=>e;function Whe(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function qhe(e){e.stopImmediatePropagation()}function jw(e){e.preventDefault(),e.stopImmediatePropagation()}var J5={name:"drag"},Bw={name:"space"},_h={name:"handle"},Th={name:"center"};const{abs:ej,max:Kn,min:Qn}=Math;function tj(e){return[+e[0],+e[1]]}function rx(e){return[tj(e[0]),tj(e[1])]}var t0={name:"x",handles:["w","e"].map(Qg),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},r0={name:"y",handles:["n","s"].map(Qg),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},$he={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Qg),input:function(e){return e==null?null:rx(e)},output:function(e){return e}},es={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},rj={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},nj={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Khe={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Qhe={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Qg(e){return{type:e}}function Zhe(e){return!e.ctrlKey&&!e.button}function Jhe(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function efe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fw(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function tfe(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function rfe(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function g1(){return yR(t0)}function Hy(){return yR(r0)}function gR(){return yR($he)}function yR(e){var t=Jhe,n=Zhe,r=efe,i=!0,o=td("start","brush","end"),a=6,s;function u(g){var v=g.property("__brush",m).selectAll(".overlay").data([Qg("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",es.overlay).merge(v).each(function(){var y=Fw(this).extent;Wt(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),g.selectAll(".selection").data([Qg("selection")]).enter().append("rect").attr("class","selection").attr("cursor",es.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=g.selectAll(".handle").data(e.handles,function(y){return y.type});b.exit().remove(),b.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return es[y.type]}),g.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,v){g.tween?g.on("start.brush",function(b){l(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){l(this,arguments).end(b)}).tween("brush",function(){var b=this,y=b.__brush,_=l(b,arguments),T=y.selection,S=e.input(typeof v=="function"?v.apply(this,arguments):v,y.extent),E=Xc(T,S);function I(x){y.selection=x===1&&S===null?null:E(x),c.call(b),_.brush()}return T!==null&&S!==null?I:I(1)}):g.each(function(){var b=this,y=arguments,_=b.__brush,T=e.input(typeof v=="function"?v.apply(b,y):v,_.extent),S=l(b,y).beforestart();tx(b),_.selection=T===null?null:T,c.call(b),S.start().brush().end()})},u.clear=function(g){u.move(g,null)};function c(){var g=Wt(this),v=Fw(this).selection;v?(g.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?v[1][0]-a/2:v[0][0]-a/2}).attr("y",function(b){return b.type[0]==="s"?v[1][1]-a/2:v[0][1]-a/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?v[1][0]-v[0][0]+a:a}).attr("height",function(b){return b.type==="e"||b.type==="w"?v[1][1]-v[0][1]+a:a})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(g,v,b){var y=g.__brush.emitter;return y&&(!b||!y.clean)?y:new f(g,v,b)}function f(g,v,b){this.that=g,this.args=v,this.state=g.__brush,this.active=0,this.clean=b}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,v){return this.starting?(this.starting=!1,this.emit("start",g,v)):this.emit("brush",g),this},brush:function(g,v){return this.emit("brush",g,v),this},end:function(g,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,v)),this},emit:function(g,v,b){var y=Wt(this.that).datum();o.call(g,this.that,new Whe(g,{sourceEvent:v,target:u,selection:e.output(this.state.selection),mode:b,dispatch:o}),y)}};function h(g){if(s&&!g.touches||!n.apply(this,arguments))return;var v=this,b=g.target.__data__.type,y=(i&&g.metaKey?b="overlay":b)==="selection"?J5:i&&g.altKey?Th:_h,_=e===r0?null:Khe[b],T=e===t0?null:Qhe[b],S=Fw(v),E=S.extent,I=S.selection,x=E[0][0],C,w,B=E[0][1],L,k,R=E[1][0],F,U,$=E[1][1],ie,oe,me=0,ae=0,X,ee=_&&T&&i&&g.shiftKey,se,_e,Oe=Array.from(g.touches||[g],Je=>{const at=Je.identifier;return Je=yr(Je,v),Je.point0=Je.slice(),Je.identifier=at,Je});if(b==="overlay"){I&&(X=!0);const Je=[Oe[0],Oe[1]||Oe[0]];S.selection=I=[[C=e===r0?x:Qn(Je[0][0],Je[1][0]),L=e===t0?B:Qn(Je[0][1],Je[1][1])],[F=e===r0?R:Kn(Je[0][0],Je[1][0]),ie=e===t0?$:Kn(Je[0][1],Je[1][1])]],Oe.length>1&&je()}else C=I[0][0],L=I[0][1],F=I[1][0],ie=I[1][1];w=C,k=L,U=F,oe=ie;var Re=Wt(v).attr("pointer-events","none"),ve=Re.selectAll(".overlay").attr("cursor",es[b]);tx(v);var Ne=l(v,arguments,!0).beforestart();if(g.touches)Ne.moved=be,Ne.ended=qe;else{var He=Wt(g.view).on("mousemove.brush",be,!0).on("mouseup.brush",qe,!0);i&&He.on("keydown.brush",ot,!0).on("keyup.brush",ut,!0),f1(g.view)}c.call(v),Ne.start(g,y.name);function be(Je){for(const at of Je.changedTouches||[Je])for(const Ht of Oe)Ht.identifier===at.identifier&&(Ht.cur=yr(at,v));if(ee&&!se&&!_e&&Oe.length===1){const at=Oe[0];ej(at.cur[0]-at[0])>ej(at.cur[1]-at[1])?_e=!0:se=!0}for(const at of Oe)at.cur&&(at[0]=at.cur[0],at[1]=at.cur[1]);X=!0,jw(Je),je(Je)}function je(Je){const at=Oe[0],Ht=at.point0;var qt;switch(me=at[0]-Ht[0],ae=at[1]-Ht[1],y){case Bw:case J5:{_&&(me=Kn(x-C,Qn(R-F,me)),w=C+me,U=F+me),T&&(ae=Kn(B-L,Qn($-ie,ae)),k=L+ae,oe=ie+ae);break}case _h:{Oe[1]?(_&&(w=Kn(x,Qn(R,Oe[0][0])),U=Kn(x,Qn(R,Oe[1][0])),_=1),T&&(k=Kn(B,Qn($,Oe[0][1])),oe=Kn(B,Qn($,Oe[1][1])),T=1)):(_<0?(me=Kn(x-C,Qn(R-C,me)),w=C+me,U=F):_>0&&(me=Kn(x-F,Qn(R-F,me)),w=C,U=F+me),T<0?(ae=Kn(B-L,Qn($-L,ae)),k=L+ae,oe=ie):T>0&&(ae=Kn(B-ie,Qn($-ie,ae)),k=L,oe=ie+ae));break}case Th:{_&&(w=Kn(x,Qn(R,C-me*_)),U=Kn(x,Qn(R,F+me*_))),T&&(k=Kn(B,Qn($,L-ae*T)),oe=Kn(B,Qn($,ie+ae*T)));break}}U<w&&(_*=-1,qt=C,C=F,F=qt,qt=w,w=U,U=qt,b in rj&&ve.attr("cursor",es[b=rj[b]])),oe<k&&(T*=-1,qt=L,L=ie,ie=qt,qt=k,k=oe,oe=qt,b in nj&&ve.attr("cursor",es[b=nj[b]])),S.selection&&(I=S.selection),se&&(w=I[0][0],U=I[1][0]),_e&&(k=I[0][1],oe=I[1][1]),(I[0][0]!==w||I[0][1]!==k||I[1][0]!==U||I[1][1]!==oe)&&(S.selection=[[w,k],[U,oe]],c.call(v),Ne.brush(Je,y.name))}function qe(Je){if(qhe(Je),Je.touches){if(Je.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else p1(Je.view,X),He.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Re.attr("pointer-events","all"),ve.attr("cursor",es.overlay),S.selection&&(I=S.selection),tfe(I)&&(S.selection=null,c.call(v)),Ne.end(Je,y.name)}function ot(Je){switch(Je.keyCode){case 16:{ee=_&&T;break}case 18:{y===_h&&(_&&(F=U-me*_,C=w+me*_),T&&(ie=oe-ae*T,L=k+ae*T),y=Th,je());break}case 32:{(y===_h||y===Th)&&(_<0?F=U-me:_>0&&(C=w-me),T<0?ie=oe-ae:T>0&&(L=k-ae),y=Bw,ve.attr("cursor",es.selection),je());break}default:return}jw(Je)}function ut(Je){switch(Je.keyCode){case 16:{ee&&(se=_e=ee=!1,je());break}case 18:{y===Th&&(_<0?F=U:_>0&&(C=w),T<0?ie=oe:T>0&&(L=k),y=_h,je());break}case 32:{y===Bw&&(Je.altKey?(_&&(F=U-me*_,C=w+me*_),T&&(ie=oe-ae*T,L=k+ae*T),y=Th):(_<0?F=U:_>0&&(C=w),T<0?ie=oe:T>0&&(L=k),y=_h),ve.attr("cursor",es[b]),je());break}default:return}jw(Je)}}function p(g){l(this,arguments).moved(g)}function d(g){l(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=rx(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Lw(rx(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Lw(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Lw(!!g),u):r},u.handleSize=function(g){return arguments.length?(a=+g,u):a},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=o.on.apply(o,arguments);return g===o?u:g},u}const nfe=Object.freeze(Object.defineProperty({__proto__:null,brush:gR,brushSelection:rfe,brushX:g1,brushY:Hy},Symbol.toStringTag,{value:"Module"}));function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zg.apply(this,arguments)}function ife(e){if(Array.isArray(e))return e}function ofe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function nx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q8(e,t){if(e){if(typeof e=="string")return nx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nx(e,t)}}function afe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $8(e,t){return ife(e)||ofe(e,t)||q8(e,t)||afe()}function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function sfe(e,t){if(cp(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K8(e){var t=sfe(e,"string");return cp(t)==="symbol"?t:String(t)}function _r(e,t,n){return t=K8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),r.forEach(function(i){_r(e,i,n[i])})}return e}function Uy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K8(r.key),r)}}function zy(e,t,n){return t&&lfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $t(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vR(e,t){if(t&&(cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $t(e)}function Jg(e){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jg(e)}function ix(e,t){return ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ix(e,t)}function bR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ix(e,t)}var ufe=function(e,t,n,r,i,o,a,s){if(!e){var u;if(t===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;u=new Error(t.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}},cfe=ufe;const dc=Gi(cfe);function hfe(e){if(Array.isArray(e))return nx(e)}function ffe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dfe(e){return hfe(e)||ffe(e)||q8(e)||pfe()}var mfe=function(){function e(){Uy(this,e),_r(this,"refs",{})}return zy(e,[{key:"add",value:function(t,n){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(n)}},{key:"remove",value:function(t,n){var r=this.getIndex(t,n);r!==-1&&this.refs[t].splice(r,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(n){var r=n.node;return r.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,n){return this.refs[t].indexOf(n)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(gfe)}}]),e}();function gfe(e,t){var n=e.node.sortableInfo.index,r=t.node.sortableInfo.index;return n-r}function yfe(e,t,n){return e=e.slice(),e.splice(n<0?e.length+n:n,0,e.splice(t,1)[0]),e}function Q8(e,t){return Object.keys(e).reduce(function(n,r){return t.indexOf(r)===-1&&(n[r]=e[r]),n},{})}var Eh={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},Z8=function(){if(typeof window>"u"||typeof document>"u")return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function rb(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function nb(e,t){e.style["".concat(Z8,"Transform")]=t==null?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function Hw(e,t){e.style["".concat(Z8,"TransitionDuration")]=t==null?"":"".concat(t,"ms")}function bm(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function ij(e,t,n){return Math.max(e,Math.min(n,t))}function hf(e){return e.substr(-2)==="px"?parseFloat(e):0}function vfe(e){var t=window.getComputedStyle(e);return{bottom:hf(t.marginBottom),left:hf(t.marginLeft),right:hf(t.marginRight),top:hf(t.marginTop)}}function _R(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function Uw(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function Xd(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function bfe(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function n0(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:n0(e.parentNode,t,r)}}function _fe(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}function oj(e){var t=e.lockOffset,n=e.width,r=e.height,i=t,o=t,a="px";if(typeof t=="string"){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);dc(s!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),i=parseFloat(t),o=parseFloat(t),a=s[1]}return dc(isFinite(i)&&isFinite(o),"lockOffset value should be a finite. Given %s",t),a==="%"&&(i=i*n/100,o=o*r/100),{x:i,y:o}}function Tfe(e){var t=e.height,n=e.width,r=e.lockOffset,i=Array.isArray(r)?r:[r,r];dc(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var o=$8(i,2),a=o[0],s=o[1];return[oj({height:t,lockOffset:a,width:n}),oj({height:t,lockOffset:s,width:n})]}function Efe(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return n.test(t[i])})}function J8(e){return e instanceof HTMLElement?Efe(e)?e:J8(e.parentNode):null}function Sfe(e){var t=window.getComputedStyle(e);return t.display==="grid"?{x:hf(t.gridColumnGap),y:hf(t.gridRowGap)}:{x:0,y:0}}var Eu={ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},ju={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function wfe(e){var t="input, textarea, select, canvas, [contenteditable]",n=e.querySelectorAll(t),r=e.cloneNode(!0),i=dfe(r.querySelectorAll(t));return i.forEach(function(o,a){if(o.type!=="file"&&(o.value=n[a].value),o.type==="radio"&&o.name&&(o.name="__sortableClone__".concat(o.name)),o.tagName===ju.Canvas&&n[a].width>0&&n[a].height>0){var s=o.getContext("2d");s.drawImage(n[a],0,0)}}),r}function ox(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return n=t=function(i){bR(o,i);function o(){return Uy(this,o),vR(this,Jg(o).apply(this,arguments))}return zy(o,[{key:"componentDidMount",value:function(){var a=Bg.findDOMNode(this);a.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return dc(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var a=r.withRef?"wrappedInstance":null;return Gn.createElement(e,Zg({ref:a},this.props))}}]),o}(Gn.Component),_r(t,"displayName",_R("sortableHandle",e)),n}function aj(e){return e.sortableHandle!=null}var Afe=function(){function e(t,n){Uy(this,e),this.container=t,this.onScrollCallback=n}return zy(e,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var n=this,r=t.translate,i=t.minTranslate,o=t.maxTranslate,a=t.width,s=t.height,u={x:0,y:0},c={x:1,y:1},l={x:10,y:10},f=this.container,h=f.scrollTop,p=f.scrollLeft,d=f.scrollHeight,m=f.scrollWidth,g=f.clientHeight,v=f.clientWidth,b=h===0,y=d-h-g===0,_=p===0,T=m-p-v===0;r.y>=o.y-s/2&&!y?(u.y=1,c.y=l.y*Math.abs((o.y-s/2-r.y)/s)):r.x>=o.x-a/2&&!T?(u.x=1,c.x=l.x*Math.abs((o.x-a/2-r.x)/a)):r.y<=i.y+s/2&&!b?(u.y=-1,c.y=l.y*Math.abs((r.y-s/2-i.y)/s)):r.x<=i.x+a/2&&!_&&(u.x=-1,c.x=l.x*Math.abs((r.x-a/2-i.x)/a)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(u.x!==0||u.y!==0)&&(this.interval=setInterval(function(){n.isAutoScrolling=!0;var S={left:c.x*u.x,top:c.y*u.y};n.container.scrollTop+=S.top,n.container.scrollLeft+=S.left,n.onScrollCallback(S)},5))}}]),e}();function Ofe(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}}function kfe(e){var t=[ju.Input,ju.Textarea,ju.Select,ju.Option,ju.Button];return!!(t.indexOf(e.target.tagName)!==-1||bm(e.target,function(n){return n.contentEditable==="true"}))}var e9={axis:N.oneOf(["x","y","xy"]),contentWindow:N.any,disableAutoscroll:N.bool,distance:N.number,getContainer:N.func,getHelperDimensions:N.func,helperClass:N.string,helperContainer:N.oneOfType([N.func,typeof HTMLElement>"u"?N.any:N.instanceOf(HTMLElement)]),hideSortableGhost:N.bool,keyboardSortingTransitionDuration:N.number,lockAxis:N.string,lockOffset:N.oneOfType([N.number,N.string,N.arrayOf(N.oneOfType([N.number,N.string]))]),lockToContainerEdges:N.bool,onSortEnd:N.func,onSortMove:N.func,onSortOver:N.func,onSortStart:N.func,pressDelay:N.number,pressThreshold:N.number,keyCodes:N.shape({lift:N.arrayOf(N.number),drop:N.arrayOf(N.number),cancel:N.arrayOf(N.number),up:N.arrayOf(N.number),down:N.arrayOf(N.number)}),shouldCancelStart:N.func,transitionDuration:N.number,updateBeforeSortStart:N.func,useDragHandle:N.bool,useWindowAsScrollContainer:N.bool},t9={lift:[Eu.SPACE],drop:[Eu.SPACE],cancel:[Eu.ESC],up:[Eu.UP,Eu.LEFT],down:[Eu.DOWN,Eu.RIGHT]},xfe={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:Ofe,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:t9,shouldCancelStart:kfe,transitionDuration:300,useWindowAsScrollContainer:!1},Ife=Object.keys(e9);function Cfe(e){dc(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Pfe(e,t){try{var n=e()}catch(r){return t(!0,r)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}function Dfe(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return n=t=function(i){bR(o,i);function o(a){var s;return Uy(this,o),s=vR(this,Jg(o).call(this,a)),_r($t($t(s)),"state",{}),_r($t($t(s)),"handleStart",function(u){var c=s.props,l=c.distance,f=c.shouldCancelStart;if(!(u.button===2||f(u))){s.touched=!0,s.position=Xd(u);var h=bm(u.target,function(b){return b.sortableInfo!=null});if(h&&h.sortableInfo&&s.nodeIsChild(h)&&!s.state.sorting){var p=s.props.useDragHandle,d=h.sortableInfo,m=d.index,g=d.collection,v=d.disabled;if(v||p&&!bm(u.target,aj))return;s.manager.active={collection:g,index:m},!bfe(u)&&u.target.tagName===ju.Anchor&&u.preventDefault(),l||(s.props.pressDelay===0?s.handlePress(u):s.pressTimer=setTimeout(function(){return s.handlePress(u)},s.props.pressDelay))}}}),_r($t($t(s)),"nodeIsChild",function(u){return u.sortableInfo.manager===s.manager}),_r($t($t(s)),"handleMove",function(u){var c=s.props,l=c.distance,f=c.pressThreshold;if(!s.state.sorting&&s.touched&&!s._awaitingUpdateBeforeSortStart){var h=Xd(u),p={x:s.position.x-h.x,y:s.position.y-h.y},d=Math.abs(p.x)+Math.abs(p.y);s.delta=p,!l&&(!f||d>=f)?(clearTimeout(s.cancelTimer),s.cancelTimer=setTimeout(s.cancel,0)):l&&d>=l&&s.manager.isActive()&&s.handlePress(u)}}),_r($t($t(s)),"handleEnd",function(){s.touched=!1,s.cancel()}),_r($t($t(s)),"cancel",function(){var u=s.props.distance,c=s.state.sorting;c||(u||clearTimeout(s.pressTimer),s.manager.active=null)}),_r($t($t(s)),"handlePress",function(u){try{var c=s.manager.getActive(),l=function(){if(c){var f=function(){var I=_.sortableInfo.index,x=vfe(_),C=Sfe(s.container),w=s.scrollContainer.getBoundingClientRect(),B=d({index:I,node:_,collection:T});if(s.node=_,s.margin=x,s.gridGap=C,s.width=B.width,s.height=B.height,s.marginOffset={x:s.margin.left+s.margin.right+s.gridGap.x,y:Math.max(s.margin.top,s.margin.bottom,s.gridGap.y)},s.boundingClientRect=_.getBoundingClientRect(),s.containerBoundingRect=w,s.index=I,s.newIndex=I,s.axis={x:p.indexOf("x")>=0,y:p.indexOf("y")>=0},s.offsetEdge=n0(_,s.container),S?s.initialOffset=Xd(Gw({},u,{pageX:s.boundingClientRect.left,pageY:s.boundingClientRect.top})):s.initialOffset=Xd(u),s.initialScroll={left:s.scrollContainer.scrollLeft,top:s.scrollContainer.scrollTop},s.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},s.helper=s.helperContainer.appendChild(wfe(_)),rb(s.helper,{boxSizing:"border-box",height:"".concat(s.height,"px"),left:"".concat(s.boundingClientRect.left-x.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(s.boundingClientRect.top-x.top,"px"),width:"".concat(s.width,"px")}),S&&s.helper.focus(),g&&(s.sortableGhost=_,rb(_,{opacity:0,visibility:"hidden"})),s.minTranslate={},s.maxTranslate={},S){var L=y?{top:0,left:0,width:s.contentWindow.innerWidth,height:s.contentWindow.innerHeight}:s.containerBoundingRect,k=L.top,R=L.left,F=L.width,U=L.height,$=k+U,ie=R+F;s.axis.x&&(s.minTranslate.x=R-s.boundingClientRect.left,s.maxTranslate.x=ie-(s.boundingClientRect.left+s.width)),s.axis.y&&(s.minTranslate.y=k-s.boundingClientRect.top,s.maxTranslate.y=$-(s.boundingClientRect.top+s.height))}else s.axis.x&&(s.minTranslate.x=(y?0:w.left)-s.boundingClientRect.left-s.width/2,s.maxTranslate.x=(y?s.contentWindow.innerWidth:w.left+w.width)-s.boundingClientRect.left-s.width/2),s.axis.y&&(s.minTranslate.y=(y?0:w.top)-s.boundingClientRect.top-s.height/2,s.maxTranslate.y=(y?s.contentWindow.innerHeight:w.top+w.height)-s.boundingClientRect.top-s.height/2);m&&m.split(" ").forEach(function(oe){return s.helper.classList.add(oe)}),s.listenerNode=u.touches?_:s.contentWindow,S?(s.listenerNode.addEventListener("wheel",s.handleKeyEnd,!0),s.listenerNode.addEventListener("mousedown",s.handleKeyEnd,!0),s.listenerNode.addEventListener("keydown",s.handleKeyDown)):(Eh.move.forEach(function(oe){return s.listenerNode.addEventListener(oe,s.handleSortMove,!1)}),Eh.end.forEach(function(oe){return s.listenerNode.addEventListener(oe,s.handleSortEnd,!1)})),s.setState({sorting:!0,sortingIndex:I}),b&&b({node:_,index:I,collection:T,isKeySorting:S,nodes:s.manager.getOrderedRefs(),helper:s.helper},u),S&&s.keyMove(0)},h=s.props,p=h.axis,d=h.getHelperDimensions,m=h.helperClass,g=h.hideSortableGhost,v=h.updateBeforeSortStart,b=h.onSortStart,y=h.useWindowAsScrollContainer,_=c.node,T=c.collection,S=s.manager.isKeySorting,E=function(){if(typeof v=="function"){s._awaitingUpdateBeforeSortStart=!0;var I=Pfe(function(){var x=_.sortableInfo.index;return Promise.resolve(v({collection:T,index:x,node:_,isKeySorting:S},u)).then(function(){})},function(x,C){if(s._awaitingUpdateBeforeSortStart=!1,x)throw C;return C});if(I&&I.then)return I.then(function(){})}}();return E&&E.then?E.then(f):f(E)}}();return Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(f){return Promise.reject(f)}}),_r($t($t(s)),"handleSortMove",function(u){var c=s.props.onSortMove;typeof u.preventDefault=="function"&&u.preventDefault(),s.updateHelperPosition(u),s.animateNodes(),s.autoscroll(),c&&c(u)}),_r($t($t(s)),"handleSortEnd",function(u){var c=s.props,l=c.hideSortableGhost,f=c.onSortEnd,h=s.manager,p=h.active.collection,d=h.isKeySorting,m=s.manager.getOrderedRefs();s.listenerNode&&(d?(s.listenerNode.removeEventListener("wheel",s.handleKeyEnd,!0),s.listenerNode.removeEventListener("mousedown",s.handleKeyEnd,!0),s.listenerNode.removeEventListener("keydown",s.handleKeyDown)):(Eh.move.forEach(function(_){return s.listenerNode.removeEventListener(_,s.handleSortMove)}),Eh.end.forEach(function(_){return s.listenerNode.removeEventListener(_,s.handleSortEnd)}))),s.helper.parentNode.removeChild(s.helper),l&&s.sortableGhost&&rb(s.sortableGhost,{opacity:"",visibility:""});for(var g=0,v=m.length;g<v;g++){var b=m[g],y=b.node;b.edgeOffset=null,b.boundingClientRect=null,nb(y,null),Hw(y,null),b.translate=null}s.autoScroller.clear(),s.manager.active=null,s.manager.isKeySorting=!1,s.setState({sorting:!1,sortingIndex:null}),typeof f=="function"&&f({collection:p,newIndex:s.newIndex,oldIndex:s.index,isKeySorting:d,nodes:m},u),s.touched=!1}),_r($t($t(s)),"autoscroll",function(){var u=s.props.disableAutoscroll,c=s.manager.isKeySorting;if(u){s.autoScroller.clear();return}if(c){var l=Gw({},s.translate),f=0,h=0;s.axis.x&&(l.x=Math.min(s.maxTranslate.x,Math.max(s.minTranslate.x,s.translate.x)),f=s.translate.x-l.x),s.axis.y&&(l.y=Math.min(s.maxTranslate.y,Math.max(s.minTranslate.y,s.translate.y)),h=s.translate.y-l.y),s.translate=l,nb(s.helper,s.translate),s.scrollContainer.scrollLeft+=f,s.scrollContainer.scrollTop+=h;return}s.autoScroller.update({height:s.height,maxTranslate:s.maxTranslate,minTranslate:s.minTranslate,translate:s.translate,width:s.width})}),_r($t($t(s)),"onAutoScroll",function(u){s.translate.x+=u.left,s.translate.y+=u.top,s.animateNodes()}),_r($t($t(s)),"handleKeyDown",function(u){var c=u.keyCode,l=s.props,f=l.shouldCancelStart,h=l.keyCodes,p=h===void 0?{}:h,d=Gw({},t9,p);s.manager.active&&!s.manager.isKeySorting||!s.manager.active&&(!d.lift.includes(c)||f(u)||!s.isValidSortingTarget(u))||(u.stopPropagation(),u.preventDefault(),d.lift.includes(c)&&!s.manager.active?s.keyLift(u):d.drop.includes(c)&&s.manager.active?s.keyDrop(u):d.cancel.includes(c)?(s.newIndex=s.manager.active.index,s.keyDrop(u)):d.up.includes(c)?s.keyMove(-1):d.down.includes(c)&&s.keyMove(1))}),_r($t($t(s)),"keyLift",function(u){var c=u.target,l=bm(c,function(d){return d.sortableInfo!=null}),f=l.sortableInfo,h=f.index,p=f.collection;s.initialFocusedNode=c,s.manager.isKeySorting=!0,s.manager.active={index:h,collection:p},s.handlePress(u)}),_r($t($t(s)),"keyMove",function(u){var c=s.manager.getOrderedRefs(),l=c[c.length-1].node.sortableInfo.index,f=s.newIndex+u,h=s.newIndex;if(!(f<0||f>l)){s.prevIndex=h,s.newIndex=f;var p=_fe(s.newIndex,s.prevIndex,s.index),d=c.find(function(S){var E=S.node;return E.sortableInfo.index===p}),m=d.node,g=s.containerScrollDelta,v=d.boundingClientRect||Uw(m,g),b=d.translate||{x:0,y:0},y={top:v.top+b.y-g.top,left:v.left+b.x-g.left},_=h<f,T={x:_&&s.axis.x?m.offsetWidth-s.width:0,y:_&&s.axis.y?m.offsetHeight-s.height:0};s.handleSortMove({pageX:y.left+T.x,pageY:y.top+T.y,ignoreTransition:u===0})}}),_r($t($t(s)),"keyDrop",function(u){s.handleSortEnd(u),s.initialFocusedNode&&s.initialFocusedNode.focus()}),_r($t($t(s)),"handleKeyEnd",function(u){s.manager.active&&s.keyDrop(u)}),_r($t($t(s)),"isValidSortingTarget",function(u){var c=s.props.useDragHandle,l=u.target,f=bm(l,function(h){return h.sortableInfo!=null});return f&&f.sortableInfo&&!f.sortableInfo.disabled&&(c?aj(l):l.sortableInfo)}),Cfe(a),s.manager=new mfe,s.events={end:s.handleEnd,move:s.handleMove,start:s.handleStart},s}return zy(o,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var a=this,s=this.props.useWindowAsScrollContainer,u=this.getContainer();Promise.resolve(u).then(function(c){a.container=c,a.document=a.container.ownerDocument||document;var l=a.props.contentWindow||a.document.defaultView||window;a.contentWindow=typeof l=="function"?l():l,a.scrollContainer=s?a.document.scrollingElement||a.document.documentElement:J8(a.container)||a.container,a.autoScroller=new Afe(a.scrollContainer,a.onAutoScroll),Object.keys(a.events).forEach(function(f){return Eh[f].forEach(function(h){return a.container.addEventListener(h,a.events[f],!1)})}),a.container.addEventListener("keydown",a.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var a=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(s){return Eh[s].forEach(function(u){return a.container.removeEventListener(u,a.events[s])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(a){var s=this.props,u=s.lockAxis,c=s.lockOffset,l=s.lockToContainerEdges,f=s.transitionDuration,h=s.keyboardSortingTransitionDuration,p=h===void 0?f:h,d=this.manager.isKeySorting,m=a.ignoreTransition,g=Xd(a),v={x:g.x-this.initialOffset.x,y:g.y-this.initialOffset.y};if(v.y-=window.pageYOffset-this.initialWindowScroll.top,v.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=v,l){var b=Tfe({height:this.height,lockOffset:c,width:this.width}),y=$8(b,2),_=y[0],T=y[1],S={x:this.width/2-_.x,y:this.height/2-_.y},E={x:this.width/2-T.x,y:this.height/2-T.y};v.x=ij(this.minTranslate.x+S.x,this.maxTranslate.x-E.x,v.x),v.y=ij(this.minTranslate.y+S.y,this.maxTranslate.y-E.y,v.y)}u==="x"?v.y=0:u==="y"&&(v.x=0),d&&p&&!m&&Hw(this.helper,p),nb(this.helper,v)}},{key:"animateNodes",value:function(){var a=this.props,s=a.transitionDuration,u=a.hideSortableGhost,c=a.onSortOver,l=this.containerScrollDelta,f=this.windowScrollDelta,h=this.manager.getOrderedRefs(),p={left:this.offsetEdge.left+this.translate.x+l.left,top:this.offsetEdge.top+this.translate.y+l.top},d=this.manager.isKeySorting,m=this.newIndex;this.newIndex=null;for(var g=0,v=h.length;g<v;g++){var b=h[g].node,y=b.sortableInfo.index,_=b.offsetWidth,T=b.offsetHeight,S={height:this.height>T?T/2:this.height/2,width:this.width>_?_/2:this.width/2},E=d&&y>this.index&&y<=m,I=d&&y<this.index&&y>=m,x={x:0,y:0},C=h[g].edgeOffset;C||(C=n0(b,this.container),h[g].edgeOffset=C,d&&(h[g].boundingClientRect=Uw(b,l)));var w=g<h.length-1&&h[g+1],B=g>0&&h[g-1];if(w&&!w.edgeOffset&&(w.edgeOffset=n0(w.node,this.container),d&&(w.boundingClientRect=Uw(w.node,l))),y===this.index){u&&(this.sortableGhost=b,rb(b,{opacity:0,visibility:"hidden"}));continue}s&&Hw(b,s),this.axis.x?this.axis.y?I||y<this.index&&(p.left+f.left-S.width<=C.left&&p.top+f.top<=C.top+S.height||p.top+f.top+S.height<=C.top)?(x.x=this.width+this.marginOffset.x,C.left+x.x>this.containerBoundingRect.width-S.width&&w&&(x.x=w.edgeOffset.left-C.left,x.y=w.edgeOffset.top-C.top),this.newIndex===null&&(this.newIndex=y)):(E||y>this.index&&(p.left+f.left+S.width>=C.left&&p.top+f.top+S.height>=C.top||p.top+f.top+S.height>=C.top+T))&&(x.x=-(this.width+this.marginOffset.x),C.left+x.x<this.containerBoundingRect.left+S.width&&B&&(x.x=B.edgeOffset.left-C.left,x.y=B.edgeOffset.top-C.top),this.newIndex=y):E||y>this.index&&p.left+f.left+S.width>=C.left?(x.x=-(this.width+this.marginOffset.x),this.newIndex=y):(I||y<this.index&&p.left+f.left<=C.left+S.width)&&(x.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=y)):this.axis.y&&(E||y>this.index&&p.top+f.top+S.height>=C.top?(x.y=-(this.height+this.marginOffset.y),this.newIndex=y):(I||y<this.index&&p.top+f.top<=C.top+S.height)&&(x.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=y))),nb(b,x),h[g].translate=x}this.newIndex==null&&(this.newIndex=this.index),d&&(this.newIndex=m);var L=d?this.prevIndex:m;c&&this.newIndex!==L&&c({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:L,isKeySorting:d,nodes:h,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return dc(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var a=this.props.getContainer;return typeof a!="function"?Bg.findDOMNode(this):a(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var a=r.withRef?"wrappedInstance":null;return Gn.createElement(e,Zg({ref:a},Q8(this.props,Ife)))}},{key:"helperContainer",get:function(){var a=this.props.helperContainer;return typeof a=="function"?a():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var a=this.props.useWindowAsScrollContainer;return a?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),o}(Gn.Component),_r(t,"displayName",_R("sortableList",e)),_r(t,"defaultProps",xfe),_r(t,"propTypes",e9),_r(t,"childContextTypes",{manager:N.object.isRequired}),n}var r9={index:N.number.isRequired,collection:N.oneOfType([N.number,N.string]),disabled:N.bool},Rfe=Object.keys(r9);function n9(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return n=t=function(i){bR(o,i);function o(){return Uy(this,o),vR(this,Jg(o).apply(this,arguments))}return zy(o,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(a){this.node&&(a.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),a.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),a.collection!==this.props.collection&&(this.unregister(a.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var a=this.props,s=a.collection,u=a.disabled,c=a.index,l=Bg.findDOMNode(this);l.sortableInfo={collection:s,disabled:u,index:c,manager:this.context.manager},this.node=l,this.ref={node:l},this.context.manager.add(s,this.ref)}},{key:"unregister",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(a,this.ref)}},{key:"getWrappedInstance",value:function(){return dc(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var a=r.withRef?"wrappedInstance":null;return Gn.createElement(e,Zg({ref:a},Q8(this.props,Rfe)))}}]),o}(Gn.Component),_r(t,"displayName",_R("sortableElement",e)),_r(t,"contextTypes",{manager:N.object.isRequired}),_r(t,"propTypes",r9),_r(t,"defaultProps",{collection:0}),n}const i9=Qp(e=>e.pos).left,pn=(e,t)=>{if(!t||!t.cumPositions||!t.cumPositions.length)return null;let n=i9(t.cumPositions,e);const r=t.cumPositions[t.cumPositions.length-1].chr,i=t.chromLengths[r];n>0&&(n-=1);let o=Math.floor(e-t.cumPositions[n].pos),a=0;return o<0&&(a=o-1,o=1),n===t.cumPositions.length-1&&o>i&&(a=o-i,o=i),[t.cumPositions[n].chr,o,a,n]},o9=(e,t)=>n=>n%e*t+Math.floor(n/e),Nfe=e=>e,a9=(e,t,n=Nfe)=>e.map((r,i)=>r+t[n(i)]),Mfe="http://www.w3.org/2000/svg",E_=(e,t)=>{if(e.namespaceURI===Mfe){const n=e.getAttribute("class");return!!n&&!!n.match(new RegExp(`(\\s|^)${t}(\\s|$)`))}return e.classList?e.classList.contains(t):!!e.className.match(new RegExp(`(\\s|^)${t}(\\s|$)`))},Lfe="http://www.w3.org/2000/svg",jfe=(e,t)=>{if(e.namespaceURI===Lfe){if(!E_(e,t)){const n=e.getAttribute("class")||"";e.setAttribute("class",`${n} ${t}`)}}else e.classList?e.classList.add(t):E_(e,t)||(e.className+=` ${t}`)},Bfe=(e,t,n)=>{const r=document.createElement("canvas");return new Promise((i,o)=>{const a=new window.Image;a.onload=()=>{r.width=t||a.width,r.height=n||a.height;const s=r.getContext("2d");if(!s){o(new Error("Could not get canvas context"));return}s.drawImage(a,0,0),i(r)},a.onerror=()=>{o(new Error("Could not convert base64 to canvas"))},a.src=`data:image/png;base64,${e}`})},S_=(e,t,n)=>n.chrPositions[e].pos+t,s9=e=>{if(!(e instanceof Event))throw new Error("Event must be an instance of Event");const t=new e.constructor(e.type,e);return t.sourceUid=e.sourceUid,t.forwarded=e.forwarded,t},$l=(e,t=!1)=>{const n=e.map((o,a)=>a*(255/(e.length-1))),r=kt().domain(n).range(e),i=yi(t?255:254,-1,-1).map(r).map(o=>{const a=np(o);return[a.r,a.g,a.b,a.opacity*255]});return i.length<256&&i.push([255,255,255,0]),i},_m=0,Tm=5,l9=10,u9=10,c9=300,w_="move",vo="select",ax=100,A_=10,h9=110,Em=3e3,Sm="locationListenerPrefix",f9=1e3,sx="http://higlass.io/api/v1",p9=400,d9=300,lx=["top","left","right","bottom","center","whole","gallery"],m9=20,g9=20,O_=Symbol("Light theme"),wr=Symbol("Dark theme"),Ffe=O_,Ue={PIXI:b6},co={"multitrack-header":"_multitrack-header_1yz7l_1","multitrack-header-focus":"_multitrack-header-focus_1yz7l_2","multitrack-header-squeazed":"_multitrack-header-squeazed_1yz7l_3","multitrack-header-dark":"_multitrack-header-dark_1yz7l_20","multitrack-header-id":"_multitrack-header-id_1yz7l_30","multitrack-header-left":"_multitrack-header-left_1yz7l_39","multitrack-header-grabber":"_multitrack-header-grabber_1yz7l_44","multitrack-header-grabber-squeazed":"_multitrack-header-grabber-squeazed_1yz7l_45","multitrack-header-search":"_multitrack-header-search_1yz7l_80","multitrack-header-nav-list":"_multitrack-header-nav-list_1yz7l_102","multitrack-header-icon":"_multitrack-header-icon_1yz7l_107","multitrack-header-icon-squeazed":"_multitrack-header-icon-squeazed_1yz7l_108","mouse-tool-selection":"_mouse-tool-selection_1yz7l_136"},Gfe={id:"cog",paths:["M466.895 305.125c-26.863-46.527-10.708-106.152 36.076-133.244l-50.313-87.146c-14.375 8.427-31.088 13.259-48.923 13.259-53.768 0-97.354-43.873-97.354-97.995h-100.629c0.133 16.705-4.037 33.641-12.979 49.126-26.862 46.528-86.578 62.351-133.431 35.379l-50.312 87.146c14.485 8.236 27.025 20.294 35.943 35.739 26.819 46.454 10.756 105.96-35.854 133.112l50.313 87.146c14.325-8.348 30.958-13.127 48.7-13.127 53.598 0 97.072 43.596 97.35 97.479h100.627c-0.043-16.537 4.136-33.285 12.983-48.609 26.818-46.453 86.388-62.297 133.207-35.506l50.313-87.145c-14.39-8.233-26.846-20.249-35.717-35.614zM256 359.666c-57.254 0-103.668-46.412-103.668-103.667 0-57.254 46.413-103.667 103.668-103.667s103.666 46.413 103.666 103.667c-0.001 57.255-46.412 103.667-103.666 103.667z"],viewBox:"0 0 512 512"},Hfe={id:"cross",paths:["M507.331 411.33c-0.002-0.002-0.004-0.004-0.006-0.005l-155.322-155.325 155.322-155.325c0.002-0.002 0.004-0.003 0.006-0.005 1.672-1.673 2.881-3.627 3.656-5.708 2.123-5.688 0.912-12.341-3.662-16.915l-73.373-73.373c-4.574-4.573-11.225-5.783-16.914-3.66-2.080 0.775-4.035 1.984-5.709 3.655 0 0.002-0.002 0.003-0.004 0.005l-155.324 155.326-155.324-155.325c-0.002-0.002-0.003-0.003-0.005-0.005-1.673-1.671-3.627-2.88-5.707-3.655-5.69-2.124-12.341-0.913-16.915 3.66l-73.374 73.374c-4.574 4.574-5.784 11.226-3.661 16.914 0.776 2.080 1.985 4.036 3.656 5.708 0.002 0.001 0.003 0.003 0.005 0.005l155.325 155.324-155.325 155.326c-0.001 0.002-0.003 0.003-0.004 0.005-1.671 1.673-2.88 3.627-3.657 5.707-2.124 5.688-0.913 12.341 3.661 16.915l73.374 73.373c4.575 4.574 11.226 5.784 16.915 3.661 2.080-0.776 4.035-1.985 5.708-3.656 0.001-0.002 0.003-0.003 0.005-0.005l155.324-155.325 155.324 155.325c0.002 0.001 0.004 0.003 0.006 0.004 1.674 1.672 3.627 2.881 5.707 3.657 5.689 2.123 12.342 0.913 16.914-3.661l73.373-73.374c4.574-4.574 5.785-11.227 3.662-16.915-0.776-2.080-1.985-4.034-3.657-5.707z"],viewBox:"0 0 512 512"},Ufe={id:"enlarge",paths:["M512 0h-208l80 80-96 96 48 48 96-96 80 80z","M512 512v-208l-80 80-96-96-48 48 96 96-80 80z","M0 512h208l-80-80 96-96-48-48-96 96-80-80z","M0 0v208l80-80 96 96 48-48-96-96 80-80z"],viewBox:"0 0 512 512"},zfe={id:"minus",paths:["M0 208v96c0 8.836 7.164 16 16 16h480c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16h-480c-8.836 0-16 7.164-16 16z"],viewBox:"0 0 512 512"},Vfe={id:"move",paths:["M512,260.096L405.5,161.79v49.155H301.061v-104.45h49.149L251.904,0L160.77,106.495h49.15v104.45H106.495V161.79L0,260.096l106.495,91.135v-49.149h104.45v104.45H161.79L251.904,512l98.306-106.5h-49.149V301.061H405.5v49.149L512,260.096z"],viewBox:"0 0 512 512"},Yfe={id:"play",paths:["M96 64l320 192-320 192z"],viewBox:"0 0 512 512"},Xfe={id:"plus",paths:["M496 192h-176v-176c0-8.836-7.164-16-16-16h-96c-8.836 0-16 7.164-16 16v176h-176c-8.836 0-16 7.164-16 16v96c0 8.836 7.164 16 16 16h176v176c0 8.836 7.164 16 16 16h96c8.836 0 16-7.164 16-16v-176h176c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16z"],viewBox:"0 0 512 512"},Wfe={id:"copy",paths:["M607.5 672v-448.5h-351v448.5h351zM607.5 160.5c34.5 0 64.5 28.5 64.5 63v448.5c0 34.5-30 64.5-64.5 64.5h-351c-34.5 0-64.5-30-64.5-64.5v-448.5c0-34.5 30-63 64.5-63h351zM511.5 31.5v64.5h-384v448.5h-63v-448.5c0-34.5 28.5-64.5 63-64.5h384z"],viewBox:"0 0 712 712"},qfe={id:"select",viewBox:"0 0 16 16",paths:["M2 14h2v1H1v-3h1v2zm8 1H6v-1h4v1zm5 0h-3v-1h2v-2h1v3zm0-5h-1V6h1v4zM2 10H1V6h1v4zm13-6h-1V2h-2V1h3v3zM4 2H2v2H1V1h3v1zm6 0H6V1h4.03L10 2z"]},$fe={id:"check_square_o",viewBox:"0 0 1792 1792",paths:["M1472 930v318q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-10 10-23 10-3 0-9-2-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-254q0-13 9-22l64-64q10-10 23-10 6 0 12 3 20 8 20 29zm231-489l-814 814q-24 24-57 24t-57-24l-430-430q-24-24-24-57t24-57l110-110q24-24 57-24t57 24l263 263 647-647q24-24 57-24t57 24l110 110q24 24 24 57t-24 57z"]},Kfe={id:"square_o",viewBox:"0 0 1792 1792",paths:["M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"]},Qfe={id:"file_o",viewBox:"0 0 1792 1792",paths:["M1596 380q28 28 48 76t20 88v1152q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h896q40 0 88 20t76 48zm-444-244v376h376q-10-29-22-41l-313-313q-12-12-41-22zm384 1528v-1024h-416q-40 0-68-28t-28-68v-416h-768v1536h1280z"]},Zfe={id:"chevron_right",viewBox:"0 0 1792 1792",paths:["M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"]},Jfe={id:"chevron_down",viewBox:"0 0 1792 1792",paths:["M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"]},epe={id:"folder_o",viewBox:"0 0 1792 1792",paths:["M1600 1312v-704q0-40-28-68t-68-28h-704q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v960q0 40 28 68t68 28h1216q40 0 68-28t28-68zm128-704v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"]},tpe={id:"folder_open_o",viewBox:"0 0 1792 1792",paths:["M1845 931q0-35-53-35h-1088q-40 0-85.5 21.5t-71.5 52.5l-294 363q-18 24-18 40 0 35 53 35h1088q40 0 86-22t71-53l294-363q18-22 18-39zm-1141-163h768v-160q0-40-28-68t-68-28h-576q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v853l256-315q44-53 116-87.5t140-34.5zm1269 163q0 62-46 120l-295 363q-43 53-116 87.5t-140 34.5h-1088q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h544q92 0 158 66t66 158v160h192q54 0 99 24.5t67 70.5q15 32 15 68z"]},rpe=[Gfe,Hfe,Ufe,zfe,Vfe,Yfe,Xfe,Wfe,qfe,$fe,Kfe,Qfe,epe,tpe,Zfe,Jfe],na=new DOMParser,npe='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268M10.5 3.5v12" fill="none" stroke="currentColor"/><path d="M5.5 13.5v-7" fill="none" stroke="currentColor" stroke-width=".9969299999999999"/><path d="M5.494 0c-1.803 0-3.26 1.496-3.26 3.35 0 .427.124.97.264 1.343L5.5 11l3.003-6.306c.142-.375.263-.916.263-1.342C8.766 1.496 7.3 0 5.494 0zM5.5 4.64c-.76 0-1.375-.616-1.375-1.374 0-.76.616-1.376 1.375-1.376.76 0 1.374.616 1.374 1.376 0 .758-.614 1.375-1.374 1.375z" fill="currentColor"/></svg>',TR=na.parseFromString(npe,"text/xml").documentElement,ipe=`
<svg width="20px" height="20px" viewBox="0 0 20 20">
  <rect x="0" y="3" width="4" height="14" fill="#637993"/>
  <rect x="4" y="3" width="2" height="14" fill="#c7d1de"/>
  <rect x="6" y="3" width="5" height="14" fill="#3c5068"/>
  <rect x="11" y="3" width="3" height="14" fill="#92a3ba"/>
  <rect x="14" y="3" width="2" height="14" fill="#000000"/>
  <rect x="16" y="3" width="4" height="14" fill="#637993"/>
</svg>
`,ope=na.parseFromString(ipe,"text/xml").documentElement,ape=`
<svg width="20px" height="20px" viewBox="0 0 135 85" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>line</title>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polyline id="Path" stroke="#4990E2" stroke-width="8" points="2 45.5625 20.7460938 6.3359375 36.828125 86.6484375 59.8945312 17.5742188 79.0390625 70.703125 99.9335938 27 112.769531 81.1601562 132.078125 3"></polyline>
    </g>
</svg>
`,spe=na.parseFromString(ape,"text/xml").documentElement,lpe=`
<svg width="20px" height="20px" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>2d-tiles-icon</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="tiles2DIconStr-path-1" x="0" y="0" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-1"></use>
        </mask>
        <rect id="tiles2DIconStr-path-3" x="0" y="30" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-3"></use>
        </mask>
        <rect id="tiles2DIconStr-path-5" x="30" y="0" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-5"></use>
        </mask>
        <rect id="tiles2DIconStr-path-7" x="30" y="30" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-8" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-7"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-2)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-4)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-3"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-6)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-5"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-8)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-7"></use>
    </g>
</svg>
`,sj=na.parseFromString(lpe,"text/xml").documentElement,upe=`
<svg width="20px" height="20px" viewBox="0 0 90 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>2d-heatmap</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="heatmap2DStr-path-1" x="0" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-2" x="30" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-3" x="60" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-4" x="0" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-5" x="30" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-6" x="60" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-7" x="0" y="60" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-8" x="30" y="60" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-9" x="60" y="60" width="30" height="30"></rect>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" fill="#858372" xlink:href="#heatmap2DStr-path-1"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-2"></use>
        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-3"></use>
        <use id="Rectangle" fill="#BCBD9E" xlink:href="#heatmap2DStr-path-4"></use>
        <use id="Rectangle" fill="#817C7C" xlink:href="#heatmap2DStr-path-5"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-6"></use>
        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-7"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-8"></use>
        <use id="Rectangle" fill="#7B7777" xlink:href="#heatmap2DStr-path-9"></use>
    </g>
</svg>
`,lj=na.parseFromString(upe,"text/xml").documentElement,y9=`
<svg width="20px" height="20px" viewBox="0 0 77 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>axis-1d</title>
    <desc>Created with Sketch.</desc>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polyline id="Path" stroke="#979797" stroke-width="8" transform="translate(38.258485, 27.557860) scale(1, -1) translate(-38.258485, -27.557860) " points="4 27.05786 36.7512307 27.05786 72.5169695 27.05786"></polyline>
        <path d="M38,24.484375 L38,3" id="Path-2" stroke="#979797" stroke-width="4"></path>
    </g>
</svg>
`,cpe=na.parseFromString(y9,"text/xml").documentElement,hpe=Wt(na.parseFromString(y9,"text/xml").documentElement).style("transform","rotate(90deg)").node(),fpe=`
<svg width="20px" height="20px" viewBox="0 0 171 116" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>gene-annotations</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="geneAnnotations-path-1" x="34" y="0" width="24" height="116"></rect>
        <mask id="geneAnnotations-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="116" fill="white">
            <use xlink:href="#geneAnnotations-path-1"></use>
        </mask>
        <rect id="geneAnnotations-path-3" x="80" y="0" width="56" height="116"></rect>
        <mask id="geneAnnotations-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="56" height="116" fill="white">
            <use xlink:href="#geneAnnotations-path-3"></use>
        </mask>
        <rect id="geneAnnotations-path-5" x="147" y="40" width="24" height="35"></rect>
        <mask id="geneAnnotations-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="35" fill="white">
            <use xlink:href="#geneAnnotations-path-5"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M12.71875,58 L147.10172,58" id="Path" stroke="#979797" stroke-width="8"></path>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-2)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-4)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-3"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-6)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-5"></use>
        <polygon id="Triangle" stroke="#979797" fill="#D8D8D8" points="25 57.5 1 75 1 40"></polygon>
    </g>
</svg>
`,ppe=na.parseFromString(fpe,"text/xml").documentElement,v9=`
<svg width="20px" height="20px" viewBox="0 0 180 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch -->
    <title>1d-tiles-icon</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="tiles1DIconStr-path-1" x="0" y="0" width="90" height="90"></rect>
        <mask id="tiles1DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#tiles1DIconStr-path-1"></use>
        </mask>
        <rect id="tiles1DIconStr-path-3" x="90" y="0" width="90" height="90"></rect>
        <mask id="tiles1DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#tiles1DIconStr-path-3"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-2)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-4)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-3"></use>
    </g>
</svg>
`,dpe=na.parseFromString(v9,"text/xml").documentElement,mpe=Wt(na.parseFromString(v9,"text/xml").documentElement).style("transform","rotate(90deg)").node(),gpe=`
<svg width="20px" height="20px" viewBox="0 0 111 111" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch -->
    <title>arrowhead-domains</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="arrowHeadDomainsStr-path-1" x="0" y="0" width="90" height="90"></rect>
        <mask id="arrowHeadDomainsStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#arrowHeadDomainsStr-path-1"></use>
        </mask>
        <rect id="arrowHeadDomainsStr-path-3" x="52" y="52" width="59" height="59"></rect>
        <mask id="arrowHeadDomainsStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="59" height="59" fill="white">
            <use xlink:href="#arrowHeadDomainsStr-path-3"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0">
        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-2)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-4)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-3"></use>
    </g>
</svg>
`,Wd=na.parseFromString(gpe,"text/xml").documentElement;function b9({theStyle:e,onClick:t}){return O.createElement("svg",{className:co[e],viewBox:"0 0 12 13",onClick:t,xmlns:"http://www.w3.org/2000/svg"},O.createElement("g",{fill:"none",stroke:"#6c6c6c",strokeWidth:"2"},O.createElement("path",{d:"M11.29 11.71l-4-4"}),O.createElement("circle",{cx:"5",cy:"5",r:"4"})))}b9.propTypes={theStyle:N.string,onClick:N.func};const uj={type:"osm-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"OSM Tiles",thumbnail:TR,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},cj={type:"mapbox-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Mapbox Tiles",thumbnail:TR,availableOptions:["style","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{style:"mapbox.streets",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},mc=[uj,{...uj,type:"osm"},cj,{...cj,type:"mapbox"},{type:"left-axis",datatype:["axis"],local:!0,orientation:"1d-vertical",name:"Left Axis",thumbnail:hpe,availableOptions:["minWidth"],defaultOptions:{minWidth:100}},{type:"top-axis",datatype:["axis"],local:!0,orientation:"1d-horizontal",name:"Top Axis",thumbnail:cpe,defaultOptions:{}},{type:"horizontal-rule",datatype:["x-coord"],local:!0,orientation:"whole",name:"Horizontal Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"vertical-rule",datatype:["y-coord"],local:!0,orientation:"whole",name:"Vertical Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"cross-rule",datatype:["xy-coord"],local:!0,orientation:"whole",name:"Cross Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"simple-svg",datatype:[],local:!1,orientation:"2d",exportable:!0,availableOptions:["minWidth","minHeight"],defaultOptions:{minWidth:100,minHeight:100}},{type:"heatmap",datatype:["matrix"],local:!1,orientation:"2d",thumbnail:lj,exportable:!0,availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","colorbarBackgroundColor","maxZoom","minWidth","minHeight","dataTransform","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling","showMousePosition","mousePositionColor","showTooltip","extent","zeroValueColor"],defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],colorbarBackgroundColor:"#ffffff",maxZoom:null,minWidth:100,minHeight:100,colorbarPosition:"topRight",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!1,extent:"full",zeroValueColor:null},defaultOptionsByTheme:{[wr]:{backgroundColor:"#000000",colorRange:["black","rgba(208,2,27,1.0)","rgba(245,166,35,1.0)","white"],colorbarBackgroundColor:"#000000",labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"linear-heatmap",aliases:["horizontal-heatmap","vertical-heatmap"],datatype:["matrix"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:lj,defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],maxZoom:null,minWidth:100,minHeight:40,trackBorderWidth:0,trackBorderColor:"black"},availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","maxZoom","minWidth","minHeight","dataTransform","oneDHeatmapFlipped","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling"]},{type:"line",aliases:["horizontal-line","vertical-line"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:spe,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","lineStrokeWidth","lineStrokeColor","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode","minHeight"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelBackgroundColor:"white",labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",lineStrokeColor:"blue",lineStrokeWidth:1,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,minHeight:20,mousePositionColor:"#000000",showTooltip:!1},defaultOptionsByTheme:{[wr]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"1d-heatmap",aliases:["horizontal-1d-heatmap","vertical-1d-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:ope,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin","colorRange","valueScaling","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!1}},{type:"vector-heatmap",aliases:["horizontal-vector-heatmap","vertical-vector-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,minHeight:1,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log"}},{type:"multivec",aliases:["horizontal-multivec","vertical-multivec"],datatype:["multivec"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","minHeight","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling","selectRows","selectRowsAggregationMode","selectRowsAggregationWithRelativeHeight","selectRowsAggregationMethod","colorbarBackgroundColor","colorbarPosition","zeroValueColor"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,minHeight:100,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",selectRows:null,selectRowsAggregationMode:"mean",selectRowsAggregationWithRelativeHeight:!0,selectRowsAggregationMethod:"client",colorbarBackgroundColor:"#ffffff",colorbarPosition:"topRight",zeroValueColor:null},defaultOptionsByTheme:{[wr]:{colorbarBackgroundColor:"#000000"}}},{type:"point",aliases:["horizontal-point","vertical-point"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","pointColor","pointSize","valueScaling","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",pointColor:"red",pointSize:3,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4}},{type:"divergent-bar",aliases:["horizontal-divergent-bar","vertical-divergent-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColorTop","barFillColorBottom","valueScaling","trackBorderWidth","trackBorderColor","barOpacity"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",axisLabelFormatting:"scientific",barFillColorBottom:"red",barFillColorTop:"green",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"bar",aliases:["horizontal-bar","vertical-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["align","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColor","colorRange","colorRangeGradient","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","barOpacity","showMousePosition","showTooltip","aggregationMode","zeroLineVisible","zeroLineColor","zeroLineOpacity"],defaultOptions:{align:"bottom",labelColor:"[glyph-color]",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",barFillColor:"darkgreen",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"2d-tiles",datatype:["matrix"],local:!1,orientation:"2d",name:"2D Tile Outlines",thumbnail:sj},{type:"1d-value-interval",aliases:["horizontal-1d-value-interval","vertical-1d-value-interval"],datatype:["bed-value"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"1D Rectangles",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,axisPositionHorizontal:"left",lineStrokeColor:"blue",valueScaling:"linear"}},{type:"stacked-interval",aliases:["top-stacked-interval","left-stacked-interval"],datatype:["stacked-interval"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:"horizontal-stacked-interval.png",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity"]},{type:"viewport-projection-vertical",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-vertical",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-horizontal",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-horizontal",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-center",datatype:["2d-projection"],local:!0,hidden:!0,projection:!0,orientation:"2d",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"gene-annotations",aliases:["horizontal-gene-annotations","vertical-gene-annotations"],datatype:["gene-annotation"],local:!1,defaultHeight:90,defaultWidth:90,rotatable:!0,orientation:"1d-horizontal",name:"Gene Annotations",thumbnail:ppe,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","minHeight","plusStrandColor","minusStrandColor","trackBorderWidth","trackBorderColor","showMousePosition","mousePositionColor","fontSize","geneAnnotationHeight","geneLabelPosition","geneStrandSpacing"],defaultOptions:{fontSize:10,labelColor:"black",labelBackgroundColor:"#ffffff",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:24,plusStrandColor:"blue",minusStrandColor:"red",trackBorderWidth:0,trackBorderColor:"black",showMousePosition:!1,mousePositionColor:"#000000",geneAnnotationHeight:16,geneLabelPosition:"outside",geneStrandSpacing:4},defaultOptionsByTheme:{[wr]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff",plusStrandColor:"#40a0ff"}}},{type:"arrowhead-domains",datatype:["arrowhead-domains"],local:!1,orientation:"2d",name:"Arrowhead Domains",thumbnail:Wd,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"linear-2d-rectangle-domains",aliases:["horizontal-2d-rectangle-domains","vertical-2d-rectangle-domains"],datatype:["2d-rectangle-domains"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"Horizontal 2D Rectangle Domains",thumbnail:Wd,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"2d-rectangle-domains",datatype:["2d-rectangle-domains"],local:!1,orientation:"2d",name:"2D Rectangle Domains",thumbnail:Wd,availableOptions:["flipDiagonal","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainFillOpacity","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{flipDiagonal:"none",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainFillOpacity:.4,rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"horizontal-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokePos","regions"],defaultOptions:{fill:"red",fillOpacity:.2,stroke:"red",strokeOpacity:0,strokeWidth:1,regions:[],strokePos:[]}},{type:"vertical-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","regions"],defaultOptions:{fill:"red",fillOpacity:"0.2",stroke:"red",strokeOpacity:"0",regions:[]}},{type:"2d-annotations",datatype:["2d-annotations"],local:!1,orientation:"2d",name:"2D Annotations",thumbnail:Wd,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize","isClickable","hoverColor","selectColor","exclude","trackBorderBgWidth","trackBorderBgColor","trackBorderBgAlpha"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none",isClickable:!1,hoverColor:"orange",selectColor:"fuchsia",exclude:[],trackBorderBgWidth:0,trackBorderBgColor:"black",trackBorderBgAlpha:.33}},{type:"square-markers",datatype:["bedpe"],local:!1,orientation:"2d",name:"Square Markers",thumbnail:Wd,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"combined",datatype:"any",local:!0,orientation:"any"},{type:"horizontal-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-horizontal",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"vertical-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-vertical",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"2d-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"2d",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey"}},{type:"2d-chromosome-annotations",datatype:["chromsizes"],local:!0,orientation:"2d",name:"2D Chromosome Annotations",thumbnail:null,hidden:!0},{type:"2d-chromosome-labels",datatype:["chromsizes"],local:!0,orientation:"2d",name:"Pairwise Chromosome Labels",thumbnail:null},{type:"chromosome-labels",aliases:["horizontal-chromosome-labels","vertical-chromosome-labels"],datatype:["chromsizes"],orientation:"1d-horizontal",rotatable:!0,minHeight:35,defaultHeight:30,name:"Chromosome Axis",thumbnail:null,availableOptions:["color","stroke","fontSize","fontIsLeftAligned","showMousePosition","mousePositionColor","tickPositions","tickFormat","reverseOrientation"],defaultOptions:{color:"#808080",stroke:"#ffffff",fontSize:12,fontIsLeftAligned:!1,showMousePosition:!1,mousePositionColor:"#000000",reverseOrientation:!1},defaultOptionsByTheme:{[wr]:{color:"#808080",stroke:"#000000",mousePositionColor:"#ffffff"}}},{type:"vertical-1d-tiles",datatype:["1d-tiles"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Tile Outlines",thumbnail:mpe},{type:"horizontal-1d-tiles",datatype:["vector","stacked-interval","gene-annotation"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Tile Outlines",thumbnail:dpe},{type:"osm-2d-tile-ids",datatype:["map-tiles"],local:!1,orientation:"2d",name:"OSM Tile Outlines",thumbnail:sj,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"raster-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Raster Tiles",thumbnail:TR,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"image-tiles",datatype:["image-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Image Tiles",thumbnail:null},{type:"bedlike",datatype:["bedlike"],aliases:["vertical-bedlike"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"BED-like track",thumbnail:null,availableOptions:["alternating","annotationHeight","annotationStyle","fillColor","fillOpacity","fontColor","fontSize","minusStrandColor","plusStrandColor","labelBottomMargin","labelColor","labelLeftMargin","labelPosition","labelRightMargin","labelTopMargin","labelTextOpacity","labelBackgroundOpacity","maxAnnotationHeight","minHeight","trackBorderWidth","trackBorderColor","valueColumn","colorEncoding","colorRange","colorEncodingRange","separatePlusMinusStrands","showTexts","axisPositionHorizontal","axisMargin"],defaultOptions:{alternating:!1,annotationStyle:"box",fillColor:"blue",fillOpacity:.3,fontSize:"10",axisPositionHorizontal:"right",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:20,maxAnnotationHeight:null,trackBorderWidth:0,trackBorderColor:"black",valueColumn:null,colorEncoding:"itemRgb",showTexts:!1,colorRange:["#000000","#652537","#bf5458","#fba273","#ffffe0"],colorEncodingRange:!1,separatePlusMinusStrands:!0,annotationHeight:16}},{type:"empty",datatype:[],orientation:"1d-horizontal",name:"Empty track",thumbnail:null,availableOptions:[],defaultOptions:{}}],ER=e=>{const t={},n=r=>!!(r.orientation===e||e==="1d-vertical"&&r.orientation==="1d-horizontal"&&r.rotatable);return mc.filter(n).forEach(r=>{let i=r.datatype;Array.isArray(r.datatype)||(i=[i]),i.forEach(o=>{o in t||(t[o]=[]),t[o].push(r)})}),t.none=[],t},hp=[[0,0,0,255],[35,0,0,255],[52,0,0,255],[60,0,0,255],[63,1,0,255],[64,2,0,255],[68,5,0,255],[69,6,0,255],[72,8,0,255],[74,10,0,255],[77,12,0,255],[78,14,0,255],[81,16,0,255],[83,17,0,255],[85,19,0,255],[86,20,0,255],[89,22,0,255],[91,24,0,255],[92,25,0,255],[94,26,0,255],[95,28,0,255],[98,30,0,255],[100,31,0,255],[102,33,0,255],[103,34,0,255],[105,35,0,255],[106,36,0,255],[108,38,0,255],[109,39,0,255],[111,40,0,255],[112,42,0,255],[114,43,0,255],[115,44,0,255],[117,45,0,255],[119,47,0,255],[119,47,0,255],[120,48,0,255],[122,49,0,255],[123,51,0,255],[125,52,0,255],[125,52,0,255],[126,53,0,255],[128,54,0,255],[129,56,0,255],[129,56,0,255],[131,57,0,255],[132,58,0,255],[134,59,0,255],[134,59,0,255],[136,61,0,255],[137,62,0,255],[137,62,0,255],[139,63,0,255],[139,63,0,255],[140,65,0,255],[142,66,0,255],[142,66,0,255],[143,67,0,255],[143,67,0,255],[145,68,0,255],[145,68,0,255],[146,70,0,255],[146,70,0,255],[148,71,0,255],[148,71,0,255],[149,72,0,255],[149,72,0,255],[151,73,0,255],[151,73,0,255],[153,75,0,255],[153,75,0,255],[154,76,0,255],[154,76,0,255],[154,76,0,255],[156,77,0,255],[156,77,0,255],[157,79,0,255],[157,79,0,255],[159,80,0,255],[159,80,0,255],[159,80,0,255],[160,81,0,255],[160,81,0,255],[162,82,0,255],[162,82,0,255],[163,84,0,255],[163,84,0,255],[165,85,0,255],[165,85,0,255],[166,86,0,255],[166,86,0,255],[166,86,0,255],[168,87,0,255],[168,87,0,255],[170,89,0,255],[170,89,0,255],[171,90,0,255],[171,90,0,255],[173,91,0,255],[173,91,0,255],[174,93,0,255],[174,93,0,255],[176,94,0,255],[176,94,0,255],[177,95,0,255],[177,95,0,255],[179,96,0,255],[179,96,0,255],[180,98,0,255],[182,99,0,255],[182,99,0,255],[183,100,0,255],[183,100,0,255],[185,102,0,255],[185,102,0,255],[187,103,0,255],[187,103,0,255],[188,104,0,255],[188,104,0,255],[190,105,0,255],[191,107,0,255],[191,107,0,255],[193,108,0,255],[193,108,0,255],[194,109,0,255],[196,110,0,255],[196,110,0,255],[197,112,0,255],[197,112,0,255],[199,113,0,255],[200,114,0,255],[200,114,0,255],[202,116,0,255],[202,116,0,255],[204,117,0,255],[205,118,0,255],[205,118,0,255],[207,119,0,255],[208,121,0,255],[208,121,0,255],[210,122,0,255],[211,123,0,255],[211,123,0,255],[213,124,0,255],[214,126,0,255],[214,126,0,255],[216,127,0,255],[217,128,0,255],[217,128,0,255],[219,130,0,255],[221,131,0,255],[221,131,0,255],[222,132,0,255],[224,133,0,255],[224,133,0,255],[225,135,0,255],[227,136,0,255],[227,136,0,255],[228,137,0,255],[230,138,0,255],[230,138,0,255],[231,140,0,255],[233,141,0,255],[233,141,0,255],[234,142,0,255],[236,144,0,255],[236,144,0,255],[238,145,0,255],[239,146,0,255],[241,147,0,255],[241,147,0,255],[242,149,0,255],[244,150,0,255],[244,150,0,255],[245,151,0,255],[247,153,0,255],[247,153,0,255],[248,154,0,255],[250,155,0,255],[251,156,0,255],[251,156,0,255],[253,158,0,255],[255,159,0,255],[255,159,0,255],[255,160,0,255],[255,161,0,255],[255,163,0,255],[255,163,0,255],[255,164,0,255],[255,165,0,255],[255,167,0,255],[255,167,0,255],[255,168,0,255],[255,169,0,255],[255,169,0,255],[255,170,0,255],[255,172,0,255],[255,173,0,255],[255,173,0,255],[255,174,0,255],[255,175,0,255],[255,177,0,255],[255,178,0,255],[255,179,0,255],[255,181,0,255],[255,181,0,255],[255,182,0,255],[255,183,0,255],[255,184,0,255],[255,187,7,255],[255,188,10,255],[255,189,14,255],[255,191,18,255],[255,192,21,255],[255,193,25,255],[255,195,29,255],[255,197,36,255],[255,198,40,255],[255,200,43,255],[255,202,51,255],[255,204,54,255],[255,206,61,255],[255,207,65,255],[255,210,72,255],[255,211,76,255],[255,214,83,255],[255,216,91,255],[255,219,98,255],[255,221,105,255],[255,223,109,255],[255,225,116,255],[255,228,123,255],[255,232,134,255],[255,234,142,255],[255,237,149,255],[255,239,156,255],[255,240,160,255],[255,243,167,255],[255,246,174,255],[255,248,182,255],[255,249,185,255],[255,252,193,255],[255,253,196,255],[255,255,204,255],[255,255,207,255],[255,255,211,255],[255,255,218,255],[255,255,222,255],[255,255,225,255],[255,255,229,255],[255,255,233,255],[255,255,236,255],[255,255,240,255],[255,255,244,255],[255,255,247,255],[255,255,255,0]],Tr=mc.reduce((e,t)=>{if(e[t.type]=t,t.aliases)for(const n of t.aliases)e[n]=t;return e},{}),ype=mc.reduce((e,t)=>{for(let n=0;n<t.datatype.length;n++){const r=t.datatype[n];return e[r]?e[r].add(t.orientation):e[r]=new Set,e}return{}},{}),ey={chromsizes:{center:"2d-chromosome-grid",top:"chromosome-labels",left:"chromosome-labels",bottom:"chromosome-labels",right:"chromosome-labels"},matrix:{center:"heatmap",top:"linear-heatmap",left:"linear-heatmap",right:"linear-heatmap",bottom:"linear-heatmap"},vector:{top:"bar",bottom:"bar",left:"bar",right:"bar"},"geo-json":{center:"geo-json"},"gene-annotation":{top:"gene-annotations",bottom:"gene-annotations",left:"gene-annotations",right:"gene-annotations"},bedlike:{top:"bedlike",bottom:"bedlike",left:"vertical-bedlike",right:"vertical-bedlike"}},k_=(e,t)=>{const n=ER(t);let r=new Set(Object.values(n).flatMap(i=>i));for(const i of e){const o=new Set(i);r=new Set([...r].filter(a=>a.datatype.filter(s=>o.has(s)).length>0))}return[...r]},_9=8,SR=8,vpe=Object.freeze(Object.defineProperty({__proto__:null,AVAILABLE_TRACK_TYPES:k_,DATATYPE_TO_TRACK_TYPE:ER,DEFAULT_CONTAINER_PADDING_X:l9,DEFAULT_CONTAINER_PADDING_Y:u9,DEFAULT_SERVER:sx,DEFAULT_TRACKS_FOR_DATATYPE:ey,DEFAULT_VIEW_MARGIN:_m,DEFAULT_VIEW_PADDING:Tm,GLOBALS:Ue,HEATED_OBJECT_MAP:hp,LOCATION_LISTENER_PREFIX:Sm,LONG_DRAG_TIMEOUT:Em,MAX_CLICK_DELAY:c9,MIN_HORIZONTAL_HEIGHT:m9,MIN_VERTICAL_WIDTH:g9,MOUSE_TOOL_MOVE:w_,MOUSE_TOOL_SELECT:vo,NUM_PRECOMP_SUBSETS_PER_1D_TTILE:_9,NUM_PRECOMP_SUBSETS_PER_2D_TTILE:SR,POSITIONS_BY_DATATYPE:ype,SHORT_DRAG_TIMEOUT:h9,THEME_DARK:wr,THEME_DEFAULT:Ffe,THEME_LIGHT:O_,TILE_FETCH_DEBOUNCE:ax,TRACKS_INFO:mc,TRACKS_INFO_BY_TYPE:Tr,TRACK_LOCATIONS:lx,VIEW_HEADER_MED_WIDTH_SEARCH_BAR:p9,VIEW_HEADER_MIN_WIDTH_SEARCH_BAR:d9,ZOOM_DEBOUNCE:A_,ZOOM_TRANSITION_DURATION:f9},Symbol.toStringTag,{value:"Module"})),ct=e=>{const t=fn(e);return Ue.PIXI.utils.rgb2hex([t.r/255,t.g/255,t.b/255])},T9=e=>{if(e==="transparent")return[255,255,255,0];const t=fn(e);return[t.r,t.g,t.b,255]},x_=(e,t,n)=>{const r=pn(e,n),i=pn(t,n);if(!r||!i)throw new Error("Couldn't convert data to genomic coordinates");return[r[0],Math.round(r[1]),i[0],Math.round(i[1])]},wR=(e,t,n)=>{let r;const i=(...o)=>{const a=()=>{r=void 0,n||e(...o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e(...o)};return i.cancel=()=>{clearTimeout(r),r=void 0},i},ux=e=>(e+16**6).toString(16).substr(-6),E9=e=>{const t={};return e.forEach(n=>{t[n[0]]=n[1]}),t},po=e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t};function ho(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(n);return t}function mr(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function $m(e,t){const n=typeof t=="string"?new Blob([t],{type:"application/octet-stream"}):t,r=window.document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href)}const S9=e=>{const t=["top","bottom","gallery"],n=["left","right","gallery"];return e.center=e.center||[],e.left=e.left||[],e.right=e.right||[],e.top=e.top||[],e.bottom=e.bottom||[],e.whole=e.whole||[],e.gallery=e.gallery||[],t.map(r=>e[r]).forEach(r=>r.forEach(i=>{const o=Tr[i.type],a=o&&o.defaultOptions||{},s=i.options?{...a,...i.options}:a;s.minHeight!==void 0&&i.height===void 0&&(i.height=s.minHeight),i.height===void 0&&(i.height=o&&o.defaultHeight||m9)})),n.map(r=>e[r]).forEach(r=>r.forEach(i=>{const o=Tr[i.type],a=o&&o.defaultOptions||{},s=i.options?{...a,...i.options}:a;s.minWidth!==void 0&&i.width===void 0&&(i.width=s.minWidth),i.width===void 0&&(i.width=o&&o.defaultWidth||g9)})),e},w9=e=>t=>Array.prototype.reduce.call(t,e),bpe=w9((e,t)=>e.concat(t)),_pe=e=>t=>Array.prototype.forEach.call(t,e),I_=(e,t)=>{t.dispatchEvent(s9(e))},Tpe=(e,t)=>[S_(e[0],e[1],t),S_(e[2],e[3],t)];function Epe(e,t,n,r,i){const{chr:o,pos:a}=t,{chr:s,pos:u}=n,c=[];if(o===s){const l=o,f=Math.floor(a/r),h=Math.min(f+i,Math.ceil(u/r));c.push([l,f,h])}else{let l=i;const f=e.findIndex(([p])=>p===o),h=e.findIndex(([p])=>p===s);for(let p=f;p<=h;p++){let d,m;const[g,v]=e[p];p<h?(p===f?d=a:d=0,m=v):(d=0,m=u);const b=Math.floor(d/r),y=Math.min(b+l,Math.ceil(m/r));c.push([g,b,y]),l-=y-b}}return c}const AR=(e,t,n)=>{if(n.length===0)return;if(n.length===1)return n[0];let r=n[0];const i=ey[e]!==void 0?ey[e][t]:void 0;return i!==void 0&&(r=n.find(o=>o.type===i)||r),r};var hj={},zw={},Vw=34,qd=10,Yw=13;function A9(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Spe(e,t){var n=A9(e);return function(r,i){return t(n(r),i,e)}}function fj(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Ci(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function wpe(e){return e<0?"-"+Ci(-e,6):e>9999?"+"+Ci(e,6):Ci(e,4)}function Ape(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":wpe(e.getUTCFullYear())+"-"+Ci(e.getUTCMonth()+1,2)+"-"+Ci(e.getUTCDate(),2)+(i?"T"+Ci(t,2)+":"+Ci(n,2)+":"+Ci(r,2)+"."+Ci(i,3)+"Z":r?"T"+Ci(t,2)+":"+Ci(n,2)+":"+Ci(r,2)+"Z":n||t?"T"+Ci(t,2)+":"+Ci(n,2)+"Z":"")}function OR(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var p,d,m=i(f,function(g,v){if(p)return p(g,v-1);d=g,p=h?Spe(g,h):A9(g)});return m.columns=d||[],m}function i(f,h){var p=[],d=f.length,m=0,g=0,v,b=d<=0,y=!1;f.charCodeAt(d-1)===qd&&--d,f.charCodeAt(d-1)===Yw&&--d;function _(){if(b)return zw;if(y)return y=!1,hj;var S,E=m,I;if(f.charCodeAt(E)===Vw){for(;m++<d&&f.charCodeAt(m)!==Vw||f.charCodeAt(++m)===Vw;);return(S=m)>=d?b=!0:(I=f.charCodeAt(m++))===qd?y=!0:I===Yw&&(y=!0,f.charCodeAt(m)===qd&&++m),f.slice(E+1,S-1).replace(/""/g,'"')}for(;m<d;){if((I=f.charCodeAt(S=m++))===qd)y=!0;else if(I===Yw)y=!0,f.charCodeAt(m)===qd&&++m;else if(I!==n)continue;return f.slice(E,S)}return b=!0,f.slice(E,d)}for(;(v=_())!==zw;){for(var T=[];v!==hj&&v!==zw;)T.push(v),v=_();h&&(T=h(T,g++))==null||p.push(T)}return p}function o(f,h){return f.map(function(p){return h.map(function(d){return l(p[d])}).join(e)})}function a(f,h){return h==null&&(h=fj(f)),[h.map(l).join(e)].concat(o(f,h)).join(`
`)}function s(f,h){return h==null&&(h=fj(f)),o(f,h).join(`
`)}function u(f){return f.map(c).join(`
`)}function c(f){return f.map(l).join(e)}function l(f){return f==null?"":f instanceof Date?Ape(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:c,formatValue:l}}var Zc=OR(","),Ope=Zc.parse,kpe=Zc.parseRows,xpe=Zc.format,Ipe=Zc.formatBody,Cpe=Zc.formatRows,Ppe=Zc.formatRow,Dpe=Zc.formatValue,Jc=OR("	"),Rpe=Jc.parse,kR=Jc.parseRows,Npe=Jc.format,Mpe=Jc.formatBody,Lpe=Jc.formatRows,jpe=Jc.formatRow,Bpe=Jc.formatValue;function Fpe(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Gpe&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const Gpe=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),Hpe=Object.freeze(Object.defineProperty({__proto__:null,autoType:Fpe,csvFormat:xpe,csvFormatBody:Ipe,csvFormatRow:Ppe,csvFormatRows:Cpe,csvFormatValue:Dpe,csvParse:Ope,csvParseRows:kpe,dsvFormat:OR,tsvFormat:Npe,tsvFormatBody:Mpe,tsvFormatRow:jpe,tsvFormatRows:Lpe,tsvFormatValue:Bpe,tsvParse:Rpe,tsvParseRows:kR},Symbol.toStringTag,{value:"Module"})),C_={},Upe=(e,t)=>C_[e]?Promise.resolve(C_[e]):t(e),zpe=e=>{if(e.length===0)return null;const t=kR(e);return v1(t)},Vpe=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.text()).then(t=>zpe(t)).catch(t=>{console.error("Could not retrieve or parse chrom info.",t)}),Ype=(e,t,n)=>t(e,n).then(r=>(C_[e]=r,C_[e])),Xpe=e=>Ype(e,Upe,Vpe),xR={get:Xpe};function Wpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qpe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kpe(r.key),r)}}function $pe(e,t,n){return t&&qpe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kpe(e){var t=Qpe(e,"string");return typeof t=="symbol"?t:String(t)}function Qpe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}let Zpe=function(){function e(t){Wpe(this,e),this.customEventHandlers={},this.registeredEls={},this.pubSub=t}return $pe(e,[{key:"getEventHandler",value:function(t){return this.customEventHandlers[t]?this.customEventHandlers[t]:n=>this.pubSub.publish(t,n)}},{key:"unregister",value:function(t,n){!this.registeredEls[t]&&this.registeredEls[t]!==n||(this.registeredEls[t].removeEventListener(t,this.registeredEls[t].__handler__),this.registeredEls[t]=void 0,delete this.registeredEls[t])}},{key:"register",value:function(t,n,r=!1){!n||this.registeredEls[t]===n||(this.registeredEls[t]&&this.unregister(this.registeredEls[t]),this.registeredEls[t]=n,this.registeredEls[t].__handler__=this.getEventHandler(t),this.registeredEls[t].addEventListener(t,this.registeredEls[t].__handler__,{capture:r,passive:!1}))}}]),e}();const O9=e=>new Zpe(e);let pj=!1;const Jpe=()=>{if(pj)return;const[e,t]=D9(),n="102117110099116105111110040041123115101108102046099111110115111108101046108111103040039",r="072",i="105",o="071",a="108097115115",s="032118",u="058032104116116112058047047104105103108097115115046105111039041125",c=[String.fromCharCode(...n.match(/.{1,3}/g).map(E=>+E)).toLowerCase(),String.fromCharCode(...r.match(/.{1,3}/g).map(E=>+E)),String.fromCharCode(...i.match(/.{1,3}/g).map(E=>+E)).toLowerCase(),String.fromCharCode(...o.match(/.{1,3}/g).map(E=>+E)),String.fromCharCode(...a.match(/.{1,3}/g).map(E=>+E)).toLowerCase(),String.fromCharCode(...s.match(/.{1,3}/g).map(E=>+E)).toLowerCase(),String.fromCharCode(...t.match(/.{1,3}/g).map(E=>+E)).toLowerCase(),String.fromCharCode(...u.match(/.{1,3}/g).map(E=>+E)).toLowerCase()].join(""),l="085082076",f="066076079066",h="087111114107101114",p="099114101097116101079098106101099116085082076",d="114101118111107101079098106101099116085082076",m=E=>E.charAt(0).toUpperCase()+E.slice(1),g=E=>E.slice(0,6)+E.charAt(6).toUpperCase()+E.slice(7,12)+E.slice(12).toUpperCase(),v=e[String.fromCharCode(...l.match(/.{1,3}/g).map(E=>+E))],b=e[m(String.fromCharCode(...f.match(/.{1,3}/g).map(E=>+E)).toLowerCase())],y=e[m(String.fromCharCode(...h.match(/.{1,3}/g).map(E=>+E)).toLowerCase())],_=g(String.fromCharCode(...p.match(/.{1,3}/g).map(E=>+E)).toLowerCase()),T=g(String.fromCharCode(...d.match(/.{1,3}/g).map(E=>+E)).toLowerCase()),S=v[_](new b([`(${c})()`],{type:"application/javascript"}));new y(S),v[T](S),pj=!0},k9={listen:Jpe};function ede(e,t,n,r,i,o,a){let s,u;if(i){const m=jR(i);s=m,u=(g,v)=>m(v.map(b=>e[b*t[1]+g]))??0}let c,l,f,h,p,d;for(f=0;f<t[1];f++)for(l=0,h=0;h<r.length;h++){if(d=r[h],s&&a==="server")c=e[h*t[1]+f];else if(Array.isArray(d)){if(!u)throw new Error("row aggregation requires 'aggFromDataFunc'");c=u(f,d)}else c=e[d*t[1]+f];if(o&&Array.isArray(d))for(p=0;p<d.length;p++)n(l*t[1]+f,c),l++;else n(l*t[1]+f,c),l++}}function tde(e,t,n,r,i,o,a=!1,s=!1,u=null,c=null,l=null){let f;n==="log"?f=eu().range([254,0]).domain(r):(n!=="linear"&&console.warn("Unknown value scale type:",n," Defaulting to linear"),f=kt().range([254,0]).domain(r));const{selectedRows:h,selectedRowsAggregationMode:p="mean",selectedRowsAggregationWithRelativeHeight:d=!1,selectedRowsAggregationMethod:m="client"}=l??{};let g=e;u&&h&&(g=ny(h,d)*u[1]);let v,b=0;const y=u?u[1]:Math.sqrt(e),_=new Uint8ClampedArray(g*4),T=I=>{const x=f(I);return Number.isNaN(x)?254:Math.max(0,Math.min(254,Math.floor(x)))},S=(I,x)=>{b=255,!(a&&Math.floor(I/y)<I%y)&&!(s&&Math.floor(I/y)>I%y)&&!Number.isNaN(+x)&&(b=T(x+i)),(b<0||b>255)&&console.warn("out of bounds rgbIdx:",b," (should be 0 <= rgbIdx <= 255)"),c&&!Number.isNaN(+x)&&+x==0?v=c:v=o[b],_[I*4]=v[0],_[I*4+1]=v[1],_[I*4+2]=v[2],_[I*4+3]=v[3]};let E;try{if(h&&u)ede(t,u,S,h,p,d,m);else for(let I=0;I<t.length;I++)E=t[I],S(I,E)}catch(I){return console.warn("Odd datapoint"),console.warn("d:",E),E=E??0,console.warn("valueScale.domain():",f.domain()),console.warn("valueScale.range():",f.range()),console.warn("value:",f(E+i)),console.warn("pseudocount:",i),console.warn("rgbIdx:",b,"d:",E,"ct:",f(E)),console.error("ERROR:",I),_}return _}function rde(e){let t=e&31744,n,r,i;const o=(e&32768)<<16;switch(t){case 0:if(n=e&1023,n===0)return o;for(n<<=1;!(n&1024);)n<<=1,t++;return r=112-t<<23,i=(n&1023)<<13,o+r+i;case 31744:return o+2139095040+((e&1023)<<13);default:return o+((e&32767)+114688<<13)}}function nde(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function ide(e){const t=new Uint32Array(e.length);for(let n=0;n<e.length;n++)t[n]=rde(e[n]);return new Float32Array(t.buffer)}function IR(e,t,n){const r=e??{};for(const i of n){i in r||(r[i]={});const o=i,a=o.split(".");r[o].server=t,r[o].tileId=o,r[o].zoomLevel=+a[1];const s=a.slice(2,a.length).map(u=>+u).filter(u=>!Number.isNaN(u));if(r[o].tilePos=s,r[o].tilesetUid=a[0],"dense"in r[o]){const u=r[o].dense,c=nde(u);let l;if(r[o].dtype==="float16"){const h=new Uint16Array(c);l=ide(h)}else l=new Float32Array(c);const f=s.length===2?new LR(l):new N_(l);r[o].dense=l,r[o].denseDataExtrema=f,r[o].minNonZero=f.minNonZeroInTile,r[o].maxNonZero=f.maxNonZeroInTile}}return r}function ode(e,t,n,r,i,o){const a={"content-type":"application/json"};r&&(a.Authorization=r),fetch(e,{credentials:"same-origin",headers:a,...o&&Object.keys(o).length>0?{method:"POST",body:JSON.stringify(o)}:{}}).then(s=>s.json()).then(s=>{i(IR(s,t,n))}).catch(s=>console.warn("err:",s))}const dj=15,P_=zt.nice();let ty=0,fp=null;const ade=(e,t,n)=>{let r,i=[],o={},a=0;const s=h=>{const p=o[h.id];p&&i[p]?i[p].ids=i[p].ids.concat(h.ids):(o[h.id]=i.length,i.push(h))},u=()=>{r=null,i=[],o={}},c=(h,...p)=>{e({sessionId:P_,requests:i},...p),u()},l=(h,...p)=>{const d=()=>{a>0&&(c(h,...p),a=0)};clearTimeout(r),r=setTimeout(d,n)};l.cancel=()=>{clearTimeout(r),u()},l.immediate=()=>{e({sessionId:P_,requests:i})};let f=!1;return(h,...p)=>{s(h),f?a++:(c(h,...p),l(h,...p),f=!0,a=0,setTimeout(()=>{f=!1},t))}},ry=e=>{fp=e},sde=()=>fp;function lde(e,t){const n=e.requests,r=[],i={},o={};for(const s of n){i[s.server]||(i[s.server]={},o[s.server]=[]);for(const u of s.ids)if(i[s.server][u]=!0,s.options){const c=u.indexOf("."),l=u.substring(0,c),f=u.substring(c+1),h=o[s.server].find(p=>p.tilesetUid===l);h?h.tileIds.push(f):o[s.server].push({tilesetUid:l,tileIds:[f],options:s.options})}}const a=Object.keys(i);for(const s of a){const u=Object.keys(i[s]),c=o[s];for(let l=0;l<u.length;l+=dj){const f=u.slice(l,l+Math.min(u.length-l,dj)),h=f.map(m=>`d=${m}`).join("&"),p=`${s}/tiles/?${h}&s=${P_}`,d=new Promise((m,g)=>{t.publish("requestSent",p);const v={};v.outUrl=p,v.server=s,v.theseTileIds=f,v.authHeader=fp,ode(v.outUrl,v.server,v.theseTileIds,v.authHeader,m,c),t.publish("requestReceived",p)});r.push(d)}}Promise.all(r).then(s=>{const u={};for(const c of s){const l=Object.keys(c);for(const f of l)u[`${c[f].server}/${f}`]=c[f]}for(const c of n){const l={},{server:f}=c;for(const h of c.ids)l[h]=u[`${f}/${h}`];c.done(l)}})}const ude=ade(lde,ax,ax),cde=(e,t)=>{const n=e.map(a=>+a).sort((a,s)=>s-a),r=t.range()[1]-t.range()[0],i=n.map(a=>(t.domain()[1]-t.domain()[0])/a).map(a=>a/r),o=i.filter(a=>a<1);return o.length===0?0:i.indexOf(o[o.length-1])},hde=(e,t)=>{if(e.resolutions)return e.resolutions.map(i=>+i).sort((i,o)=>o-i)[t];const n=e.max_width,r=+e.bins_per_dimension;return n/(2**t*r)},fde=(e,t,n,r)=>{const i=e.range()[1]-e.range()[0],o=Math.max((n-t)/(e.domain()[1]-e.domain()[0]),1),a=Math.max(0,Math.ceil(Math.log(i/384)/Math.LN2));let s=Math.round(Math.log(o)/Math.LN2)+a,u=0;return r&&(u=Math.floor(Math.log(256)/Math.log(2)-Math.log(r)/Math.log(2))),s+=u,s};function pde(e,t,n,r,i){let o=null;const a=e.bins_per_dimension||256;e.resolutions?o=e.resolutions[r]*a:o=t/2**r;const s=Math.floor((i-n)/o),u=Math.floor(a*(i-s*o)/o);return[s,u]}const dde=(e,t,n,r,i,o)=>{const a=Math.min(e,i),s=o/2**a;return yi(Math.max(0,Math.floor((t.domain()[0]-n)/s)),Math.min(2**a,Math.ceil((t.domain()[1]-n-1e-7)/s)))},mde=(e,t,n)=>e.resolutions?e.resolutions.map(r=>+r).sort((r,i)=>i-r)[t]*n:e.max_width/2**t,gde=(e,t,n,r,i)=>{const o=e*(i||256),a=20;r||(r=Number.MAX_VALUE);const s=Math.max(0,Math.floor((t.domain()[0]-n)/o)),u=Math.ceil(Math.min(r,t.domain()[1]-n-1e-7)/o);let c=yi(s,u);return c.length>a&&(console.warn(`Too many visible tiles: ${c.length} truncating to ${a}`),c=c.slice(0,a)),c},yde=(e,t,n,r,i,o,a,s,u,c)=>{const{tileData:l}=e;if(!l.dense){o(null);return}if(e.mirrored&&!e.isMirrored&&e.tileData.tilePos.length>0&&e.tileData.tilePos[0]===e.tileData.tilePos[1]){e.tileData.dense=e.tileData.dense.slice();const h=Math.floor(Math.sqrt(e.tileData.dense.length));for(let p=0;p<h;p++)for(let d=p+1;d<h;d++)e.tileData.dense[p*h+d]=e.tileData.dense[d*h+p];if(s)for(let p=0;p<h;p++)for(let d=0;d<p;d++)e.tileData.dense[p*h+d]=NaN;e.isMirrored=!0}const f=tde(l.dense.length,l.dense,t,n,r,i,a,s,e.tileData.shape,u,c);o({pixData:f})};function x9(e,t,n,r){ty+=1,r.publish("requestSent",e);let i=null;if(n==="text")i=null;else if(n==="json")i="application/json";else throw new Error(`fetch either "text" or "json", not "${n}"`);const o={};return i&&(o["Content-Type"]=i),fp&&(o.Authorization=fp),fetch(e,{credentials:"same-origin",headers:o}).then(a=>{if(!a.ok)throw Error(a.statusText);return a[n]()}).then(a=>(t(void 0,a),a)).catch(a=>(console.error(`Could not fetch ${e}`,a),t(a,void 0),a)).finally(()=>{r.publish("requestReceived",e),ty-=1})}function vde(e,t,n){return x9(e,t,"text",n)}async function I9(e,t,n){return e.indexOf("hg19")>=0&&await NR(1),x9(e,t,"json",n)}const bde=(e,t,n,r,i)=>{const o=`${b1(e)}/tileset_info/?d=${t}&s=${P_}`;i.publish("requestSent",o),I9(o,(a,s)=>{i.publish("requestReceived",o),a?r?r(`Error retrieving tilesetInfo from: ${e}`):console.warn("Error retrieving: ",o):n(s)},i)},et={calculateResolution:hde,calculateTileAndPosInTile:pde,calculateTiles:dde,calculateTilesFromResolution:gde,calculateTileWidth:mde,calculateZoomLevel:fde,calculateZoomLevelFromResolutions:cde,fetchTilesDebounced:ude,json:I9,text:vde,tileDataToPixData:yde,trackInfo:bde},_de=Object.freeze(Object.defineProperty({__proto__:null,ElementResizeListener:k9,get authHeader(){return fp},chromInfo:xR,createDomEvent:O9,getTileProxyAuthHeader:sde,get requestsInFlight(){return ty},setTileProxyAuthHeader:ry,tileProxy:et,tileResponseToData:IR},Symbol.toStringTag,{value:"Module"})),C9=e=>(k9.listen(),[e.clientWidth,e.clientHeight]),Ki=(e,t)=>{let n=null;const r=i=>(i.uid===t&&(n=i),i.type.substr(0,8)==="combined"&&i.contents.forEach(r),null);return Object.keys(e).map(i=>e[i]).filter(i=>i.filter).reduce((i,o)=>i.concat(o),[]).forEach(r),n},Tde=(e,t,n)=>{const r=e.state.views[t];if(!r)return null;let i=null;const o=s=>(s.uid===n&&(i=s),s.type.substr(0,8)==="combined"&&s.contents.forEach(o),null),a=r.tracks;return Object.keys(a).map(s=>a[s]).filter(s=>s.filter).reduce((s,u)=>s.concat(u),[]).forEach(o),i},wm=(e,t,n)=>{const r=t?e[t]:Object.values(e)[0];if(!r){console.warn(t?`Could't find view with id "${t}"`:"No views available.");return}let i=r.trackRenderer.trackDefObjects[n];return i?i=i.trackObject:Object.values(r.trackRenderer.trackDefObjects).map(o=>o.trackObject).filter(o=>o.childTracks).forEach(o=>{o.createdTracks[n]&&(i=o.createdTracks[n])}),i};function i0(e){return e.type==="combined"}function Ede(e){return"deltaY"in e&&"deltaMode"in e}function P9(e){return e!==null&&typeof e=="object"}function Sde(e){return P9(e)&&"max_width"in e}function wde(e){return P9(e)&&"resolutions"in e}const CR=(e,t,n=!0,r=null)=>e.forEach(i=>{n&&i0(i)&&CR(i.contents,t,n,r),t(i,r)}),ls=(e,t,n=!0)=>{const r=[];for(const[i,o]of Object.entries(e))CR(o,t,n,i),r.push(...o);return r},Km=(e,t)=>{let n=null;return ls(e,(r,i)=>{r.uid===t&&(n=i)}),n},PR=e=>t=>Array.prototype.map.call(t,e),D9=()=>[window,PR(e=>e.charCodeAt(0))("1.13.4").map(e=>e<=999?`00${e}`.slice(-3):e).join("")],R9=(e,t=1,n=100,r=0,i=0,o=0,a=100)=>{const s=document.createElement("canvas");s.width=t,s.height=n;const u=s.getContext("2d");if(!u)throw new Error("Could not get canvas context");const c=u.createLinearGradient(r,i,o,a);return e.forEach(l=>{c.addColorStop(l.from,l.color)}),u.fillStyle=c,u.fillRect(0,0,t,n),s},N9=(e,t)=>{let n=e;for(;n&&n!==t&&n.tagName!=="HTML";)n=n.parentNode;return n===t},M9=e=>parseInt(e.replace(/^#/,""),16),L9=()=>{};function Ade(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ode(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xde(r.key),r)}}function kde(e,t,n){return t&&Ode(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xde(e){var t=Ide(e,"string");return typeof t=="symbol"?t:String(t)}function Ide(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}let DR=function(){function e(t){Ade(this,e),this.context=t;const{tracks:n,createTrackObject:r}=t;this.childTracks=n.map(r),this.createdTracks={},this.uid=zt.nice(),this.childTracks.forEach((i,o)=>{this.createdTracks[n[o].uid]=i});for(let i=0;i<this.childTracks.length;i++)this.childTracks[i]||console.error("Empty child track in CombinedTrack:",this)}return kde(e,[{key:"updateContents",value:function(t,n){const r=[],i=new Set;t.forEach(a=>{if(i.add(a.uid),a.uid in this.createdTracks)r.push(this.createdTracks[a.uid]);else{const s=n(a);s.setPosition(this.position),s.setDimensions(this.dimensions),r.push(s),s.zoomed(this._xScale,this._yScale),this.createdTracks[a.uid]=s}}),this.childTracks=r;const o=new Set(Object.keys(this.createdTracks));return[...new Set([...o].filter(a=>!i.has(a)))].forEach(a=>{this.createdTracks[a].remove(),delete this.createdTracks[a]}),this}},{key:"setPosition",value:function(t){this.position=t;for(let n=0;n<this.childTracks.length;n++)this.childTracks[n].setPosition(t)}},{key:"setDimensions",value:function(t){this.dimensions=t;for(let n=0;n<this.childTracks.length;n++)this.childTracks[n].setDimensions(t)}},{key:"zoomed",value:function(t,n,r,i,o,a,s){this._xScale=t,this._yScale=n;for(let u=0;u<this.childTracks.length;u++)this.childTracks[u].zoomed(t,n,r,i,o,a,s)}},{key:"clickOutside",value:function(){for(let t=0;t<this.childTracks.length;t++)this.childTracks[t].clickOutside()}},{key:"click",value:function(...t){for(let n=0;n<this.childTracks.length;n++)this.childTracks[n].click(...t)}},{key:"draw",value:function(){}},{key:"refScalesChanged",value:function(t,n){for(let r=0;r<this.childTracks.length;r++)this.childTracks[r].refScalesChanged(t,n)}},{key:"remove",value:function(){for(let t=0;t<this.childTracks.length;t++)this.childTracks[t].remove()}},{key:"exportSVG",value:function(){const t=document.createElement("g");for(const n of this.childTracks)n.exportSVG&&t.appendChild(n.exportSVG()[0]);return[t,t]}},{key:"rerender",value:function(t){}},{key:"minValue",value:function(t){if(arguments.length===0){const n=this.childTracks.filter(r=>r.minValue).map(r=>r.minValue()).filter(r=>r);return Math.min(...n)}for(const n of this.childTracks)n.minValue&&n.minValue(t)}},{key:"maxValue",value:function(t){if(arguments.length===0){const n=this.childTracks.filter(r=>r.maxValue).map(r=>r.maxValue()).filter(r=>r);return Math.max(...n)}for(const n of this.childTracks)n.maxValue&&n.maxValue(t)}},{key:"respondsToPosition",value:function(t,n){return t>=this.position[0]&&t<=this.dimensions[0]+this.position[0]&&n>=this.position[1]&&n<=this.dimensions[1]+this.position[1]}},{key:"stopHover",value:function(){for(const t of this.childTracks)t.stopHover&&t.stopHover()}},{key:"getMouseOverHtml",value:function(t,n){let r="";for(const i of this.childTracks)if(i.getMouseOverHtml){const o=i.getMouseOverHtml(t,n);o&&o.length&&(r+=o,r+="<br/>")}return r}}]),e}();const j9=(e,t)=>t===e?!0:t instanceof DR?Object.keys(t.createdTracks).map(n=>t.createdTracks[n]).some(n=>j9(e,n)):!1,RR=(e,t,n,r,i,o,a=!1)=>a?e>=n&&e<=r||t>=i&&t<=o:e>=n&&e<=r&&t>=i&&t<=o,Cde=e=>Math.log(Math.tan((e+Math.PI/2)/2)),Pde=(e,t)=>{let n=e*Math.PI/180;return n=Cde(n),2**t*(Math.PI-n)/(2*Math.PI)},y1=e=>PR(t=>e[t])(Object.keys(e)),Dde=e=>y1(e).map(t=>t.chromInfoPath).forEach(t=>xR.get(t)),Rde=(e,t)=>2**t*(e+180)/360,cx=(e,t)=>e>t?e:t,Nde=1e-7;function hx(e){let t=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++){const r=e[n];r<Nde&&r>-1e-7||r>t&&(t=r)}return t}const B9=(e,t)=>e<t?e:t,Mde=1e-7;function fx(e){let t=Number.MAX_SAFE_INTEGER;for(let n=0;n<e.length;n++){const r=e[n];r<Mde&&r>-1e-7||r<t&&(t=r)}return t}const Lde=(e,t)=>(e%t+t)%t,F9=(e,t)=>{const n=+t;if(Number.isNaN(n)){const r=e.shape[0],i=e.shape[1],o=t.shape[0],a=t.shape[1];if(r!==o||i!==a){console.warn("Cannot assign source to target ndarray as the dimensions do not match",r,o,i,a);return}if(e.dimension===1)for(let s=0;s<e.shape[0];++s)e.set(s,t.get(s));else for(let s=0;s<e.shape[0];++s)for(let u=0;u<e.shape[1];++u)e.set(s,u,t.get(s,u))}else if(e.dimension===1)for(let r=0;r<e.shape[0];++r)e.set(r,n);else for(let r=0;r<e.shape[0];++r)for(let i=0;i<e.shape[1];++i)e.set(r,i,n)};function jde(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}var Bde=jde;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Fde=function(e){return e!=null&&(G9(e)||Gde(e)||!!e._isBuffer)};function G9(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Gde(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&G9(e.slice(0,0))}var Hde=Bde,Ude=Fde,zde=typeof Float64Array<"u";function Vde(e,t){return e[0]-t[0]}function Yde(){var e=this.stride,t=new Array(e.length),n;for(n=0;n<t.length;++n)t[n]=[Math.abs(e[n]),n];t.sort(Vde);var r=new Array(t.length);for(n=0;n<r.length;++n)r[n]=t[n][1];return r}function Xde(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var r=e==="generic";if(t===-1){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",m=new Function(i);return m()}else if(t===0){var i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",m=new Function("TrivialArray",i);return m(D_[e][0])}var i=["'use strict'"],o=Hde(t),a=o.map(function(g){return"i"+g}),s="this.offset+"+o.map(function(g){return"this.stride["+g+"]*i"+g}).join("+"),u=o.map(function(g){return"b"+g}).join(","),c=o.map(function(g){return"c"+g}).join(",");i.push("function "+n+"(a,"+u+","+c+",d){this.data=a","this.shape=["+u+"]","this.stride=["+c+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map(function(g){return"this.shape["+g+"]"}).join("*"),"}})"),t===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+n+"_order(){"),t===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+a.join(",")+",v){"),r?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+n+"_get("+a.join(",")+"){"),r?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+n+"_index(",a.join(),"){return "+s+"}"),i.push("proto.hi=function "+n+"_hi("+a.join(",")+"){return new "+n+"(this.data,"+o.map(function(g){return["(typeof i",g,"!=='number'||i",g,"<0)?this.shape[",g,"]:i",g,"|0"].join("")}).join(",")+","+o.map(function(g){return"this.stride["+g+"]"}).join(",")+",this.offset)}");var l=o.map(function(g){return"a"+g+"=this.shape["+g+"]"}),f=o.map(function(g){return"c"+g+"=this.stride["+g+"]"});i.push("proto.lo=function "+n+"_lo("+a.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+f.join(","));for(var h=0;h<t;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");i.push("return new "+n+"(this.data,"+o.map(function(g){return"a"+g}).join(",")+","+o.map(function(g){return"c"+g}).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+a.join(",")+"){var "+o.map(function(g){return"a"+g+"=this.shape["+g+"]"}).join(",")+","+o.map(function(g){return"b"+g+"=this.stride["+g+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var h=0;h<t;++h)i.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");i.push("return new "+n+"(this.data,"+o.map(function(g){return"a"+g}).join(",")+","+o.map(function(g){return"b"+g}).join(",")+",c)}");for(var p=new Array(t),d=new Array(t),h=0;h<t;++h)p[h]="a[i"+h+"]",d[h]="b[i"+h+"]";i.push("proto.transpose=function "+n+"_transpose("+a+"){"+a.map(function(g,v){return g+"=("+g+"===undefined?"+v+":"+g+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+p.join(",")+","+d.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+a+"){var a=[],b=[],c=this.offset");for(var h=0;h<t;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map(function(g){return"shape["+g+"]"}).join(",")+","+o.map(function(g){return"stride["+g+"]"}).join(",")+",offset)}");var m=new Function("CTOR_LIST","ORDER",i.join(`
`));return m(D_[e],Yde)}function Wde(e){if(Ude(e))return"buffer";if(zde)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var D_={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function qde(e,t,n,r){if(e===void 0){var c=D_.array[0];return c([])}else typeof e=="number"&&(e=[e]);t===void 0&&(t=[e.length]);var i=t.length;if(n===void 0){n=new Array(i);for(var o=i-1,a=1;o>=0;--o)n[o]=a,a*=t[o]}if(r===void 0){r=0;for(var o=0;o<i;++o)n[o]<0&&(r-=(t[o]-1)*n[o])}for(var s=Wde(e),u=D_[s];u.length<=i+1;)u.push(Xde(s,u.length-1));var c=u[i+1];return c(e,t,n,r)}var $de=qde;const If=Gi($de),H9=e=>{const t=e.shape.reduce((r,i)=>r*i,1),n=new Array(t);if(e.dimension===1){let r=0;for(let i=0;i<e.shape[0];++i)n[r]=e.get(i),r++}else{let r=0;for(let i=0;i<e.shape[0];++i)for(let o=0;o<e.shape[1];++o)n[r]=e.get(i,o),r++}return n},U9=e=>e.shape.length===1?e:If(H9(e)),z9=e=>{const t=e.split("."),n=t.slice(1).join("").length;return+t.join("")/10**n},Vy=(e,t)=>e||t;function v1(e){const t=[],n={},r={};let i=0;for(let o=0;o<e.length;o++){const a=Number(e[o][1]);i+=a;const s={id:o,chr:e[o][0],pos:i-a};t.push(s),r[s.chr]=s,n[e[o][0]]=a}return{cumPositions:t,chrPositions:r,totalLength:i,chromLengths:n}}const px=e=>{const t=document.createElement("g"),n=document.createElement("text");return e.anchor.x===0?n.setAttribute("text-anchor","start"):e.anchor.x===1?n.setAttribute("text-anchor","end"):n.setAttribute("text-anchor","middle"),n.setAttribute("font-family",e.style.fontFamily),n.setAttribute("font-size",e.style.fontSize),t.setAttribute("transform",`scale(${e.scale.x},1)`),n.setAttribute("fill",e.style.fill),n.innerHTML=e.text,t.appendChild(n),t.setAttribute("transform",`translate(${e.x},${e.y})scale(${e.scale.x},1)`),t},Kde=e=>{try{const t=e.split(".");return n=>{let r=n;return t.forEach(i=>{r=r[i]}),r}}catch{return}},Qde=(e,t,n,r,i,o,a=0,s=0,u)=>{const c=o?i:r,l=o?r:i,f=o?s:a,h=o?a:s,p=Math.max(0,+c[0]||0),d=Math.max(0,+c[1]||0),m=Math.max(0,+l[0]||0),g=Math.max(0,+l[1]||0);let v=[];ArrayBuffer.isView(u)||console.warn("Not supported yet");try{const b=new u.constructor(u.length);let y=0+h;for(let T=m;T<g;T++)b.set(e.slice(T*t+p,T*t+d),f+y*n),y+=1;const _=o?o9(n,n):void 0;v=a9(u,b,_)}catch{}return v},Zde=(e,t,n,r)=>[r.chrPositions[e].pos+ +t,r.chrPositions[e].pos+ +n],Jde="http://www.w3.org/2000/svg",eme=(e,t)=>{const n=new RegExp(`(\\s|^)${t}(\\s|$)`);if(e.namespaceURI===Jde){const r=e.getAttribute("class")||"";e.setAttribute("class",r.replace(n," "))}else e.classList?e.classList.remove(t):E_(e,t)&&(e.className=e.className.replace(n," "))},Cf=(e,t)=>{e.select(".selection").attr("fill",null).attr("fill-opacity",null).attr("stroke",null).classed(t,!0)},Xw=e=>{const t=e.toString(16);return t.length===1?`0${t}`:t},tme=(e,t,n)=>`#${Xw(e)}${Xw(t)}${Xw(n)}`,un=(e,t)=>{const n=e.invert((e.range()[0]+e.range()[1])/2),r=t.invert((t.range()[0]+t.range()[1])/2),i=e.invert(1)-e.invert(0);return[n,r,i]},V9=(e,t,n)=>{if(n===null||!e||!t)return;const r=e.domain()[0],i=e.domain()[1],o=t.domain()[0],a=t.domain()[1];return[...x_(r,i,n),...x_(o,a,n)]},rme=11184810,nme=1,ime=(e,t,n,r,i,o,a,s,u)=>{e.publish("app.animateOnMouseMove",!0);const c=n.mousePositionColor?M9(n.mousePositionColor):rme,l=n.mousePositionAlpha||nme,f=new Ue.PIXI.Graphics,h=()=>{f.clear()},p=(m,g,v)=>{if(v||h(),f.lineStyle(1,c,l),g){const b=s?i()[0]:0;f.moveTo(0,m),f.lineTo(o()[0]+b,m)}else{const b=s?i()[1]:0;f.moveTo(m,0),f.lineTo(m,o()[1]+b)}},d=m=>{if(m.noHoveredTracks)return h(),f;let g,v;m.isFromVerticalTrack?(g=m.dataY,v=m.dataY):(g=m.dataX,v=m.isFrom2dTrack?m.dataY:m.dataX);const b=s?i():[0,0],y=a()?r()[0](v)+b[1]:r()[0](g)+b[0];return p(y),s&&p(r()[1](v)+b[1],!0,!0),f};return t.push(e.subscribe("app.mouseMove",d)),t.push(e.subscribe("app.mouseLeave",h)),t.push(e.subscribe("blur",h)),u&&t.push(qm.subscribe("higlass.mouseMove",d)),f},gc=(e,t=!1,n=!1)=>{const r=t?e.pMasked:e.pForeground||e.pMain;if(!r)throw new Error("setupShowMousePosition: No scene found. Please make sure to call this method after the scene has been initialized.");const i=()=>[e.xScale(),e.yScale()],o=ime(e.pubSub,e.pubSubs,e.options,i,e.getPosition.bind(e),e.getDimensions.bind(e),e.getProp("flipText"),t,n);return r.addChild(o),()=>{r.removeChild(o)}},ome=e=>t=>Array.prototype.some.call(t,e),wl=(e,t)=>e+t,Y9=(e,t,n,r,i,o)=>{const a=document.createElement("line");return a.setAttribute("x1",e),a.setAttribute("x2",n),a.setAttribute("y1",t),a.setAttribute("y2",r),i&&a.setAttribute("stroke-width",i),o&&a.setAttribute("stroke",o),a},X9=(e,t,n)=>{let r,i=0;const o=()=>{r=void 0},a=(...u)=>{const c=()=>{i>0&&(e(...u),i=0)};clearTimeout(r),r=setTimeout(c,n)};a.cancel=()=>{clearTimeout(r),o()},a.immediate=(...u)=>{e(...u)};let s=!1;return(u,...c)=>{s?i++:(e(...c),a(...c),s=!0,i=0,setTimeout(()=>{s=!1},t))}},ame=(e,t=256,n=256)=>{const r=document.createElement("canvas");r.width=t,r.height=n;const i=r.getContext("2d");if(!i)throw new Error("Could not get canvas context");i.fillStyle="transparent",i.fillRect(0,0,r.width,r.height);const o=new ImageData(e,r.width,r.height);return i.putImageData(o,0,0),r},NR=e=>new Promise(t=>{setTimeout(t,e)}),sme=e=>{if(!e.tracks)return 0;let t=0;return e.tracks.top&&(t+=e.tracks.top.map(n=>n.height).reduce((n,r)=>n+r,0)),e.tracks.center&&(t+=e.tracks.center.map(n=>n.height).reduce((n,r)=>n+r,0)),e.tracks.bottom&&(t+=e.tracks.bottom.map(n=>n.height).reduce((n,r)=>n+r,0)),t},Yo=()=>{},b1=e=>(e||"").replace(/\/$/,""),MR=(e,t,n=0,r=1e-6)=>i=>{let o=255;return i>r&&(o=Math.max(0,Math.min(255,Math.floor(e(i+n))))),t[o]},o0=e=>{let t=[];for(let n=0;n<e.length;n++)e[n].contents?t=t.concat(e[n].contents):t.push(e[n]);return t};function W9(e,t,n,r){this.interval=[e,t],this.max=-1/0,this.parentNode=null,this.left=n,this.right=r}function Ls(){this.root=null}function mj(e,t,n){let r=new W9(n[0],n[1]);if(r.max=n[1],r.parentNode=e,e[t]=r,e.max<n[1])for(;r;)r.max<n[1]&&(r.max=n[1]),r=r.parentNode}function dx(e,t){e.interval[0]>t[0]?e.left?dx(e.left,t):mj(e,"left",t):e.right?dx(e.right,t):mj(e,"right",t)}Ls.prototype.add=function(e){if(!this.root){this.root=new W9(e[0],e[1]),this.root.max=e[1];return}dx(this.root,e)};function q9(e,t){if(!t)return!1;if(t.interval[0]<=e&&t.interval[1]>=e)return!0;let n=!1,r;return["left","right"].forEach(i=>{r=t[i],r&&r.max>e&&(n=n||q9(e,r))}),n}Ls.prototype.contains=function(e){return q9(e,this.root)};function lme(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]<t[0]&&e[1]>t[0]||e[0]<t[1]&&e[1]>t[1]||t[0]<e[0]&&t[1]>e[0]||t[0]<e[1]&&t[1]>e[1]}function $9(e,t){if(!t)return!1;if(lme(t.interval,e))return!0;let n=!1,r;return["left","right"].forEach(i=>{r=t[i],r&&r.max>=e[0]&&(n=n||$9(e,r))}),n}Ls.prototype.intersects=function(e){return $9(e,this.root)};function mx(e){return e?1+Math.max(mx(e.left),mx(e.right)):0}Ls.prototype.height=function(){return mx(this.root)};Ls.prototype.findMax=function(e){const t=[e];let n,r=-1/0,i;for(;t.length;)n=t.pop(),n.left&&t.push(n.left),n.right&&t.push(n.right),n.interval[1]>r&&(r=n.interval[1],i=n);return i};Ls.prototype._removeHelper=function(e,t){if(t)if(t.interval[0]===e[0]&&t.interval[1]===e[1]){if(t.left&&t.right){let r=t.left;for(;r.left;)r=r.left;const i=r.interval;r.interval=t.interval,t.interval=i,this._removeHelper(r.interval,t)}else{let r="left";t.right&&(r="right");const i=t.parentNode;i?(i.left===t?i.left=t[r]:i.right=t[r],t[r]&&(t[r].parentNode=i)):(this.root=t[r],this.root&&(this.root.parentNode=null))}const n=t.parentNode;if(n){let r=this.findMax(n);const i=r.interval[1];for(;r;)r.max===t.interval[1]?(r.max=i,r=r.parentNode):r=!1}}else this._removeHelper(e,t.left),this._removeHelper(e,t.right)};Ls.prototype.remove=function(e){return this._removeHelper(e,this.root)};function R_(e){e.sort((r,i)=>i.to-i.from-(r.to-r.from));const t=[[]],n=[new Ls];for(let r=0;r<e.length;r++){let i=!1;for(let o=0;o<t.length;o++){const a=n[o],s=[+e[r].from,+e[r].to];if(!a.intersects(s)){a.add(s),t[o].push(e[r]),i=!0;break}}if(!i){const o=new Ls;o.add([e[r].from,e[r].to]),t.push([e[r]]),n.push(o)}}return t}function ume(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fme(r.key),r)}}function hme(e,t,n){return t&&cme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fme(e){var t=pme(e,"string");return typeof t=="symbol"?t:String(t)}function pme(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}let N_=function(){function e(t){ume(this,e),this.epsilon=1e-6,this.data=t,this.tileSize=this.data.length,this.paddedTileSize=2**Math.ceil(Math.log2(this.tileSize)),this.numSubsets=Math.min(_9,this.paddedTileSize),this.subsetSize=this.paddedTileSize/this.numSubsets,this.subsetMinimums=this.computeSubsetNonZeroMinimums(),this.subsetMaximums=this.computeSubsetNonZeroMaximums(),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()}return hme(e,[{key:"getMinNonZeroInSubset",value:function(t){const n=t[0],r=t[1];let i=Number.MAX_SAFE_INTEGER;if(n===0&&r===this.tileSize)return this.minNonZeroInTile;const o=Math.ceil(n/this.subsetSize),a=Math.floor((r-1)/this.subsetSize);return o>=a?this.minNonZero(this.data,n,r):(n<o*this.subsetSize&&(i=Math.min(i,this.minNonZero(this.data,n,o*this.subsetSize))),i=Math.min(i,this.minNonZero(this.subsetMinimums,o,a)),r>a*this.subsetSize&&(i=Math.min(i,this.minNonZero(this.data,a*this.subsetSize,r))),i)}},{key:"getMaxNonZeroInSubset",value:function(t){const n=t[0],r=t[1];let i=Number.MIN_SAFE_INTEGER;if(n===0&&r===this.tileSize)return this.maxNonZeroInTile;const o=Math.ceil(n/this.subsetSize),a=Math.floor((r-1)/this.subsetSize);return o>=a?this.maxNonZero(this.data,n,r):(n<o*this.subsetSize&&(i=Math.max(i,this.maxNonZero(this.data,n,o*this.subsetSize))),i=Math.max(i,this.maxNonZero(this.subsetMaximums,o,a)),r>a*this.subsetSize&&(i=Math.max(i,this.maxNonZero(this.data,a*this.subsetSize,r))),i)}},{key:"computeSubsetNonZeroMinimums",value:function(){const t=[];for(let n=0;n<this.numSubsets;n++){let r=Number.MAX_SAFE_INTEGER;for(let i=0;i<this.subsetSize;i++){const o=this.data[n*this.subsetSize+i];o!==void 0&&(o<this.epsilon&&o>-this.epsilon||o<r&&(r=o))}t.push(r)}return t}},{key:"computeSubsetNonZeroMaximums",value:function(){const t=[];for(let n=0;n<this.numSubsets;n++){let r=Number.MIN_SAFE_INTEGER;for(let i=0;i<this.subsetSize;i++){const o=this.data[n*this.subsetSize+i];o!==void 0&&(o<this.epsilon&&o>-this.epsilon||o>r&&(r=o))}t.push(r)}return t}},{key:"getMinNonZeroInTile",value:function(){return Math.min(...this.subsetMinimums)}},{key:"getMaxNonZeroInTile",value:function(){return Math.max(...this.subsetMaximums)}},{key:"minNonZero",value:function(t,n,r){let i=Number.MAX_SAFE_INTEGER;for(let o=n;o<r;o++){const a=t[o];a<this.epsilon&&a>-this.epsilon||a<i&&(i=a)}return i}},{key:"maxNonZero",value:function(t,n,r){let i=Number.MIN_SAFE_INTEGER;for(let o=n;o<r;o++){const a=t[o];a<this.epsilon&&a>-this.epsilon||a>i&&(i=a)}return i}}]),e}();function dme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yme(r.key),r)}}function gme(e,t,n){return t&&mme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yme(e){var t=vme(e,"string");return typeof t=="symbol"?t:String(t)}function vme(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}let LR=function(){function e(t){dme(this,e),this.epsilon=1e-6,this.tileSize=Math.sqrt(t.length),Number.isSafeInteger(this.tileSize)||console.error("The DenseDataExtrema2D module only works for data of quadratic length."),this.numSubsets=Math.min(SR,this.tileSize),this.subsetSize=this.tileSize/this.numSubsets;const n=If(Array.from(t),[this.tileSize,this.tileSize]);this.subsetMinimums=this.computeSubsetNonZeroMinimums(n),this.subsetMaximums=this.computeSubsetNonZeroMaximums(n),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()}return gme(e,[{key:"getMinNonZeroInSubset",value:function(t){const n=t[0],r=t[1],i=t[2],o=t[3],a=Math.floor(r/this.subsetSize),s=Math.floor(n/this.subsetSize),u=Math.ceil((o+1)/this.subsetSize)-a,c=Math.ceil((i+1)/this.subsetSize)-s;return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,a,s,c,u)}},{key:"getMaxNonZeroInSubset",value:function(t){const n=t[0],r=t[1],i=t[2],o=t[3],a=Math.floor(r/this.subsetSize),s=Math.floor(n/this.subsetSize),u=Math.ceil((o+1)/this.subsetSize)-a,c=Math.ceil((i+1)/this.subsetSize)-s;return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,a,s,c,u)}},{key:"computeSubsetNonZeroMinimums",value:function(t){const n=If(new Array(this.numSubsets**2),[this.numSubsets,this.numSubsets]);for(let r=0;r<this.numSubsets;r++)for(let i=0;i<this.numSubsets;i++){const o=this.getMinNonZeroInNdarraySubset(t,r*this.subsetSize,i*this.subsetSize,this.subsetSize,this.subsetSize);n.set(r,i,o)}return n}},{key:"computeSubsetNonZeroMaximums",value:function(t){const n=If(new Array(this.numSubsets**2),[this.numSubsets,this.numSubsets]);for(let r=0;r<this.numSubsets;r++)for(let i=0;i<this.numSubsets;i++){const o=this.getMaxNonZeroInNdarraySubset(t,r*this.subsetSize,i*this.subsetSize,this.subsetSize,this.subsetSize);n.set(r,i,o)}return n}},{key:"getMinNonZeroInNdarraySubset",value:function(t,n,r,i,o){let a=Number.MAX_SAFE_INTEGER;for(let s=0;s<i;s++)for(let u=0;u<o;u++){const c=t.get(n+u,r+s);c<this.epsilon&&c>-this.epsilon||c<a&&(a=c)}return a}},{key:"getMaxNonZeroInNdarraySubset",value:function(t,n,r,i,o){let a=Number.MIN_SAFE_INTEGER;for(let s=0;s<i;s++)for(let u=0;u<o;u++){const c=t.get(n+u,r+s);c<this.epsilon&&c>-this.epsilon||c>a&&(a=c)}return a}},{key:"mirrorPrecomputedExtrema",value:function(){for(let t=1;t<this.numSubsets;t++)for(let n=0;n<t;n++)this.subsetMinimums.set(n,t,this.subsetMinimums.get(t,n)),this.subsetMaximums.set(n,t,this.subsetMaximums.get(t,n))}},{key:"getMinNonZeroInTile",value:function(){return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,0,0,this.numSubsets,this.numSubsets)}},{key:"getMaxNonZeroInTile",value:function(){return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,0,0,this.numSubsets,this.numSubsets)}}]),e}();const jR=e=>{let t;switch(e&&e.toLowerCase()){case"mean":t=Fk;break;case"sum":t=ez;break;case"variance":t=bD;break;case"deviation":t=_D;break;default:t=Fk,console.warn("Encountered an unsupported selectedRowsAggregationMode option.")}return t},ny=(e,t)=>e.reduce((n,r)=>n+(Array.isArray(r)&&t?r.length:1),0),rd=e=>{switch(e.type){case"heatmap":case"horizontal-1d-heatmap":case"horizontal-bar":case"horizontal-line":case"horizontal-point":case"vertical-1d-heatmap":case"vertical-bar":case"vertical-line":case"vertical-point":case"horizontal-1d-tiles":case"vertical-1d-tiles":case"2d-tiles":case"horizontal-gene-annotations":case"vertical-gene-annotations":case"horizontal-heatmap":case"vertical-heatmap":case"osm-tiles":case"mapbox-tiles":case"horizontal-multivec":return!0;case"combined":return e.contents.map(t=>rd(t)).reduce(Vy,!1);default:return!1}},BR=(e,t,n)=>{let r=t,i=n;return n||(i=t,r=Object.values(e.state.views)[0].uid),e.tiledPlots[r].trackRenderer.getTrackObject(i)},K9=(e,t)=>e.tiledPlots[t].trackRenderer,bme=(e,t)=>e.tiledPlots[t];var FR={},gj=Object.prototype.toString,Q9=function(e){var t=gj.call(e),n=t==="[object Arguments]";return n||(n=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&gj.call(e.callee)==="[object Function]"),n},Ww,yj;function _me(){if(yj)return Ww;yj=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Q9,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(h){var p=h.constructor;return p&&p.prototype===h},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!c["$"+h]&&t.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{u(window[h])}catch{return!0}}catch{return!0}return!1}(),f=function(h){if(typeof window>"u"||!l)return u(h);try{return u(h)}catch{return!1}};e=function(h){var p=h!==null&&typeof h=="object",d=n.call(h)==="[object Function]",m=r(h),g=p&&n.call(h)==="[object String]",v=[];if(!p&&!d&&!m)throw new TypeError("Object.keys called on a non-object");var b=a&&d;if(g&&h.length>0&&!t.call(h,0))for(var y=0;y<h.length;++y)v.push(String(y));if(m&&h.length>0)for(var _=0;_<h.length;++_)v.push(String(_));else for(var T in h)!(b&&T==="prototype")&&t.call(h,T)&&v.push(String(T));if(o)for(var S=f(h),E=0;E<s.length;++E)!(S&&s[E]==="constructor")&&t.call(h,s[E])&&v.push(s[E]);return v}}return Ww=e,Ww}var Tme=Array.prototype.slice,Eme=Q9,vj=Object.keys,a0=vj?function(e){return vj(e)}:_me(),bj=Object.keys;a0.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(t){return Eme(t)?bj(Tme.call(t)):bj(t)})}else Object.keys=a0;return Object.keys||a0};var Z9=a0,GR=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||o.enumerable!==!0)return!1}return!0},_j=typeof Symbol<"u"&&Symbol,Sme=GR,J9=function(){return typeof _j!="function"||typeof Symbol!="function"||typeof _j("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Sme()},Tj={foo:{}},wme=Object,e7=function(){return{__proto__:Tj}.foo===Tj.foo&&!({__proto__:null}instanceof wme)},Ame="Function.prototype.bind called on incompatible ",Ome=Object.prototype.toString,kme=Math.max,xme="[object Function]",Ej=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n},Ime=function(e,t){for(var n=[],r=t,i=0;r<e.length;r+=1,i+=1)n[i]=e[r];return n},Cme=function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n},Pme=function(e){var t=this;if(typeof t!="function"||Ome.apply(t)!==xme)throw new TypeError(Ame+t);for(var n=Ime(arguments,1),r,i=function(){if(this instanceof r){var c=t.apply(this,Ej(n,arguments));return Object(c)===c?c:this}return t.apply(e,Ej(n,arguments))},o=kme(0,t.length-n.length),a=[],s=0;s<o;s++)a[s]="$"+s;if(r=Function("binder","return function ("+Cme(a,",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var u=function(){};u.prototype=t.prototype,r.prototype=new u,u.prototype=null}return r},Dme=Pme,HR=Function.prototype.bind||Dme,Rme=Function.prototype.call,Nme=Object.prototype.hasOwnProperty,Mme=HR,Xs=Mme.call(Rme,Nme),Kt,pp=SyntaxError,t7=Function,Pf=TypeError,qw=function(e){try{return t7('"use strict"; return ('+e+").constructor;")()}catch{}},Zu=Object.getOwnPropertyDescriptor;if(Zu)try{Zu({},"")}catch{Zu=null}var $w=function(){throw new Pf},Lme=Zu?function(){try{return arguments.callee,$w}catch{try{return Zu(arguments,"callee").get}catch{return $w}}}():$w,Sh=J9(),jme=e7(),_n=Object.getPrototypeOf||(jme?function(e){return e.__proto__}:null),Uh={},Bme=typeof Uint8Array>"u"||!_n?Kt:_n(Uint8Array),Ju={"%AggregateError%":typeof AggregateError>"u"?Kt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Kt:ArrayBuffer,"%ArrayIteratorPrototype%":Sh&&_n?_n([][Symbol.iterator]()):Kt,"%AsyncFromSyncIteratorPrototype%":Kt,"%AsyncFunction%":Uh,"%AsyncGenerator%":Uh,"%AsyncGeneratorFunction%":Uh,"%AsyncIteratorPrototype%":Uh,"%Atomics%":typeof Atomics>"u"?Kt:Atomics,"%BigInt%":typeof BigInt>"u"?Kt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Kt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Kt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Kt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Kt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Kt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Kt:FinalizationRegistry,"%Function%":t7,"%GeneratorFunction%":Uh,"%Int8Array%":typeof Int8Array>"u"?Kt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Kt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Kt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Sh&&_n?_n(_n([][Symbol.iterator]())):Kt,"%JSON%":typeof JSON=="object"?JSON:Kt,"%Map%":typeof Map>"u"?Kt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Sh||!_n?Kt:_n(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Kt:Promise,"%Proxy%":typeof Proxy>"u"?Kt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Kt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Kt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Sh||!_n?Kt:_n(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Kt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Sh&&_n?_n(""[Symbol.iterator]()):Kt,"%Symbol%":Sh?Symbol:Kt,"%SyntaxError%":pp,"%ThrowTypeError%":Lme,"%TypedArray%":Bme,"%TypeError%":Pf,"%Uint8Array%":typeof Uint8Array>"u"?Kt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Kt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Kt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Kt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Kt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Kt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Kt:WeakSet};if(_n)try{null.error}catch(e){var Fme=_n(_n(e));Ju["%Error.prototype%"]=Fme}var Gme=function e(t){var n;if(t==="%AsyncFunction%")n=qw("async function () {}");else if(t==="%GeneratorFunction%")n=qw("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=qw("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&_n&&(n=_n(i.prototype))}return Ju[t]=n,n},Sj={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Yy=HR,M_=Xs,Hme=Yy.call(Function.call,Array.prototype.concat),Ume=Yy.call(Function.apply,Array.prototype.splice),wj=Yy.call(Function.call,String.prototype.replace),L_=Yy.call(Function.call,String.prototype.slice),zme=Yy.call(Function.call,RegExp.prototype.exec),Vme=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Yme=/\\(\\)?/g,Xme=function(e){var t=L_(e,0,1),n=L_(e,-1);if(t==="%"&&n!=="%")throw new pp("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new pp("invalid intrinsic syntax, expected opening `%`");var r=[];return wj(e,Vme,function(i,o,a,s){r[r.length]=a?wj(s,Yme,"$1"):o||i}),r},Wme=function(e,t){var n=e,r;if(M_(Sj,n)&&(r=Sj[n],n="%"+r[0]+"%"),M_(Ju,n)){var i=Ju[n];if(i===Uh&&(i=Gme(n)),typeof i>"u"&&!t)throw new Pf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new pp("intrinsic "+e+" does not exist!")},or=function(e,t){if(typeof e!="string"||e.length===0)throw new Pf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Pf('"allowMissing" argument must be a boolean');if(zme(/^%?[^%]*%?$/,e)===null)throw new pp("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Xme(e),r=n.length>0?n[0]:"",i=Wme("%"+r+"%",t),o=i.name,a=i.value,s=!1,u=i.alias;u&&(r=u[0],Ume(n,Hme([0,1],u)));for(var c=1,l=!0;c<n.length;c+=1){var f=n[c],h=L_(f,0,1),p=L_(f,-1);if((h==='"'||h==="'"||h==="`"||p==='"'||p==="'"||p==="`")&&h!==p)throw new pp("property names with quotes must have matching quotes");if((f==="constructor"||!l)&&(s=!0),r+="."+f,o="%"+r+"%",M_(Ju,o))a=Ju[o];else if(a!=null){if(!(f in a)){if(!t)throw new Pf("base intrinsic for "+e+" exists, but the property is not available.");return}if(Zu&&c+1>=n.length){var d=Zu(a,f);l=!!d,l&&"get"in d&&!("originalValue"in d.get)?a=d.get:a=a[f]}else l=M_(a,f),a=a[f];l&&!s&&(Ju[o]=a)}}return a},qme=or,gx=qme("%Object.defineProperty%",!0),yx=function(){if(gx)try{return gx({},"a",{value:1}),!0}catch{return!1}return!1};yx.hasArrayLengthDefineBug=function(){if(!yx())return null;try{return gx([],"length",{value:1}).length!==1}catch{return!0}};var _1=yx,$me=or,s0=$me("%Object.getOwnPropertyDescriptor%",!0);if(s0)try{s0([],"length")}catch{s0=null}var UR=s0,Kme=_1(),zR=or,Qm=Kme&&zR("%Object.defineProperty%",!0);if(Qm)try{Qm({},"a",{value:1})}catch{Qm=!1}var Qme=zR("%SyntaxError%"),wh=zR("%TypeError%"),Aj=UR,r7=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new wh("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new wh("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new wh("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new wh("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new wh("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new wh("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,s=!!Aj&&Aj(e,t);if(Qm)Qm(e,t,{configurable:o===null&&s?s.configurable:!o,enumerable:r===null&&s?s.enumerable:!r,value:n,writable:i===null&&s?s.writable:!i});else if(a||!r&&!i&&!o)e[t]=n;else throw new Qme("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Zme=Z9,Jme=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",ege=Object.prototype.toString,tge=Array.prototype.concat,Oj=r7,rge=function(e){return typeof e=="function"&&ege.call(e)==="[object Function]"},n7=_1(),nge=function(e,t,n,r){if(t in e){if(r===!0){if(e[t]===n)return}else if(!rge(r)||!r())return}n7?Oj(e,t,n,!0):Oj(e,t,n)},i7=function(e,t){var n=arguments.length>2?arguments[2]:{},r=Zme(t);Jme&&(r=tge.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)nge(e,r[i],t[r[i]],n[r[i]])};i7.supportsDescriptors=!!n7;var ri=i7,o7={exports:{}},a7=or,kj=r7,ige=_1(),xj=UR,Ij=a7("%TypeError%"),oge=a7("%Math.floor%"),age=function(e,t){if(typeof e!="function")throw new Ij("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||oge(t)!==t)throw new Ij("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,i=!0;if("length"in e&&xj){var o=xj(e,"length");o&&!o.configurable&&(r=!1),o&&!o.writable&&(i=!1)}return(r||i||!n)&&(ige?kj(e,"length",t,!0,!0):kj(e,"length",t)),e};(function(e){var t=HR,n=or,r=age,i=n("%TypeError%"),o=n("%Function.prototype.apply%"),a=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||t.call(a,o),u=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(u)try{u({},"a",{value:1})}catch{u=null}e.exports=function(f){if(typeof f!="function")throw new i("a function is required");var h=s(t,a,arguments);return r(h,1+c(0,f.length-(arguments.length-1)),!0)};var l=function(){return s(t,o,arguments)};u?u(e.exports,"apply",{value:l}):e.exports.apply=l})(o7);var Ws=o7.exports,s7=or,l7=Ws,sge=l7(s7("String.prototype.indexOf")),wi=function(e,t){var n=s7(e,!!t);return typeof n=="function"&&sge(e,".prototype.")>-1?l7(n):n},lge=Z9,u7=GR(),c7=wi,Cj=Object,uge=c7("Array.prototype.push"),Pj=c7("Object.prototype.propertyIsEnumerable"),cge=u7?Object.getOwnPropertySymbols:null,h7=function(e,t){if(e==null)throw new TypeError("target must be an object");var n=Cj(e);if(arguments.length===1)return n;for(var r=1;r<arguments.length;++r){var i=Cj(arguments[r]),o=lge(i),a=u7&&(Object.getOwnPropertySymbols||cge);if(a)for(var s=a(i),u=0;u<s.length;++u){var c=s[u];Pj(i,c)&&uge(o,c)}for(var l=0;l<o.length;++l){var f=o[l];if(Pj(i,f)){var h=i[f];n[f]=h}}}return n},hge=h7,fge=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var a in i)o+=a;return e!==o},pge=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},f7=function(){return!Object.assign||fge()||pge()?hge:Object.assign},dge=ri,mge=f7,gge=function(){var e=mge();return dge(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},yge=ri,vge=Ws,bge=h7,p7=f7,_ge=gge,Tge=vge.apply(p7()),d7=function(e,t){return Tge(Object,arguments)};yge(d7,{getPolyfill:p7,implementation:bge,shim:_ge});var nd=d7,T1=Number.isNaN||function(e){return e!==e},Ege=T1,m7=function(e){return(typeof e=="number"||typeof e=="bigint")&&!Ege(e)&&e!==1/0&&e!==-1/0},Kw,Dj;function VR(){if(Dj)return Kw;Dj=1;var e=or,t=e("%Math.abs%"),n=e("%Math.floor%"),r=T1,i=m7;return Kw=function(o){if(typeof o!="number"||r(o)||!i(o))return!1;var a=t(o);return n(a)===a},Kw}var Qw,Rj;function Sge(){if(Rj)return Qw;Rj=1;var e=or,t=e("%Array.prototype%"),n=e("%RangeError%"),r=e("%SyntaxError%"),i=e("%TypeError%"),o=VR(),a=Math.pow(2,32)-1,s=e7(),u=e("%Object.setPrototypeOf%",!0)||(s?function(c,l){return c.__proto__=l,c}:null);return Qw=function(c){if(!o(c)||c<0)throw new i("Assertion failed: `length` must be an integer Number >= 0");if(c>a)throw new n("length is greater than (2**32 - 1)");var l=arguments.length>1?arguments[1]:t,f=[];if(l!==t){if(!u)throw new r("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");u(f,l)}return c!==0&&(f.length=c),f},Qw}const wge={},Age=Object.freeze(Object.defineProperty({__proto__:null,default:wge},Symbol.toStringTag,{value:"Module"})),Oge=Us(Age);var YR=typeof Map=="function"&&Map.prototype,Zw=Object.getOwnPropertyDescriptor&&YR?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,j_=YR&&Zw&&typeof Zw.get=="function"?Zw.get:null,Nj=YR&&Map.prototype.forEach,XR=typeof Set=="function"&&Set.prototype,Jw=Object.getOwnPropertyDescriptor&&XR?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,B_=XR&&Jw&&typeof Jw.get=="function"?Jw.get:null,Mj=XR&&Set.prototype.forEach,kge=typeof WeakMap=="function"&&WeakMap.prototype,Zm=kge?WeakMap.prototype.has:null,xge=typeof WeakSet=="function"&&WeakSet.prototype,Jm=xge?WeakSet.prototype.has:null,Ige=typeof WeakRef=="function"&&WeakRef.prototype,Lj=Ige?WeakRef.prototype.deref:null,Cge=Boolean.prototype.valueOf,Pge=Object.prototype.toString,Dge=Function.prototype.toString,Rge=String.prototype.match,WR=String.prototype.slice,Dl=String.prototype.replace,Nge=String.prototype.toUpperCase,jj=String.prototype.toLowerCase,g7=RegExp.prototype.test,Bj=Array.prototype.concat,ga=Array.prototype.join,Mge=Array.prototype.slice,Fj=Math.floor,vx=typeof BigInt=="function"?BigInt.prototype.valueOf:null,eA=Object.getOwnPropertySymbols,bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,dp=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ei=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===dp||!0)?Symbol.toStringTag:null,y7=Object.prototype.propertyIsEnumerable,Gj=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Hj(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||g7.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-Fj(-e):Fj(e);if(r!==e){var i=String(r),o=WR.call(t,i.length+1);return Dl.call(i,n,"$&_")+"."+Dl.call(Dl.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Dl.call(t,n,"$&_")}var _x=Oge,Uj=_x.custom,zj=_7(Uj)?Uj:null,v7=function e(t,n,r,i){var o=n||{};if(Tl(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Tl(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Tl(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Tl(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Tl(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return E7(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return s?Hj(t,u):u}if(typeof t=="bigint"){var c=String(t)+"n";return s?Hj(t,c):c}var l=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=l&&l>0&&typeof t=="object")return Tx(t)?"[Array]":"[Object]";var f=Jge(o,r);if(typeof i>"u")i=[];else if(T7(i,t)>=0)return"[Circular]";function h(L,k,R){if(k&&(i=Mge.call(i),i.push(k)),R){var F={depth:o.depth};return Tl(o,"quoteStyle")&&(F.quoteStyle=o.quoteStyle),e(L,F,r+1,i)}return e(L,o,r+1,i)}if(typeof t=="function"&&!Vj(t)){var p=Vge(t),d=ib(t,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(d.length>0?" { "+ga.call(d,", ")+" }":"")}if(_7(t)){var m=dp?Dl.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):bx.call(t);return typeof t=="object"&&!dp?$d(m):m}if(Kge(t)){for(var g="<"+jj.call(String(t.nodeName)),v=t.attributes||[],b=0;b<v.length;b++)g+=" "+v[b].name+"="+b7(Lge(v[b].value),"double",o);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+jj.call(String(t.nodeName))+">",g}if(Tx(t)){if(t.length===0)return"[]";var y=ib(t,h);return f&&!Zge(y)?"["+Ex(y,f)+"]":"[ "+ga.call(y,", ")+" ]"}if(Bge(t)){var _=ib(t,h);return!("cause"in Error.prototype)&&"cause"in t&&!y7.call(t,"cause")?"{ ["+String(t)+"] "+ga.call(Bj.call("[cause]: "+h(t.cause),_),", ")+" }":_.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+ga.call(_,", ")+" }"}if(typeof t=="object"&&a){if(zj&&typeof t[zj]=="function"&&_x)return _x(t,{depth:l-r});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Yge(t)){var T=[];return Nj&&Nj.call(t,function(L,k){T.push(h(k,t,!0)+" => "+h(L,t))}),Yj("Map",j_.call(t),T,f)}if(qge(t)){var S=[];return Mj&&Mj.call(t,function(L){S.push(h(L,t))}),Yj("Set",B_.call(t),S,f)}if(Xge(t))return tA("WeakMap");if($ge(t))return tA("WeakSet");if(Wge(t))return tA("WeakRef");if(Gge(t))return $d(h(Number(t)));if(Uge(t))return $d(h(vx.call(t)));if(Hge(t))return $d(Cge.call(t));if(Fge(t))return $d(h(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===globalThis)return"{ [object globalThis] }";if(!jge(t)&&!Vj(t)){var E=ib(t,h),I=Gj?Gj(t)===Object.prototype:t instanceof Object||t.constructor===Object,x=t instanceof Object?"":"null prototype",C=!I&&ei&&Object(t)===t&&ei in t?WR.call(ru(t),8,-1):x?"Object":"",w=I||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",B=w+(C||x?"["+ga.call(Bj.call([],C||[],x||[]),": ")+"] ":"");return E.length===0?B+"{}":f?B+"{"+Ex(E,f)+"}":B+"{ "+ga.call(E,", ")+" }"}return String(t)};function b7(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function Lge(e){return Dl.call(String(e),/"/g,"&quot;")}function Tx(e){return ru(e)==="[object Array]"&&(!ei||!(typeof e=="object"&&ei in e))}function jge(e){return ru(e)==="[object Date]"&&(!ei||!(typeof e=="object"&&ei in e))}function Vj(e){return ru(e)==="[object RegExp]"&&(!ei||!(typeof e=="object"&&ei in e))}function Bge(e){return ru(e)==="[object Error]"&&(!ei||!(typeof e=="object"&&ei in e))}function Fge(e){return ru(e)==="[object String]"&&(!ei||!(typeof e=="object"&&ei in e))}function Gge(e){return ru(e)==="[object Number]"&&(!ei||!(typeof e=="object"&&ei in e))}function Hge(e){return ru(e)==="[object Boolean]"&&(!ei||!(typeof e=="object"&&ei in e))}function _7(e){if(dp)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!bx)return!1;try{return bx.call(e),!0}catch{}return!1}function Uge(e){if(!e||typeof e!="object"||!vx)return!1;try{return vx.call(e),!0}catch{}return!1}var zge=Object.prototype.hasOwnProperty||function(e){return e in this};function Tl(e,t){return zge.call(e,t)}function ru(e){return Pge.call(e)}function Vge(e){if(e.name)return e.name;var t=Rge.call(Dge.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function T7(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function Yge(e){if(!j_||!e||typeof e!="object")return!1;try{j_.call(e);try{B_.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function Xge(e){if(!Zm||!e||typeof e!="object")return!1;try{Zm.call(e,Zm);try{Jm.call(e,Jm)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function Wge(e){if(!Lj||!e||typeof e!="object")return!1;try{return Lj.call(e),!0}catch{}return!1}function qge(e){if(!B_||!e||typeof e!="object")return!1;try{B_.call(e);try{j_.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function $ge(e){if(!Jm||!e||typeof e!="object")return!1;try{Jm.call(e,Jm);try{Zm.call(e,Zm)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function Kge(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function E7(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return E7(WR.call(e,0,t.maxStringLength),t)+r}var i=Dl.call(Dl.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Qge);return b7(i,"single",t)}function Qge(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+Nge.call(t.toString(16))}function $d(e){return"Object("+e+")"}function tA(e){return e+" { ? }"}function Yj(e,t,n,r){var i=r?Ex(n,r):ga.call(n,", ");return e+" ("+t+") {"+i+"}"}function Zge(e){for(var t=0;t<e.length;t++)if(T7(e[t],`
`)>=0)return!1;return!0}function Jge(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=ga.call(Array(e.indent+1)," ");else return null;return{base:n,prev:ga.call(Array(t+1),n)}}function Ex(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+ga.call(e,","+n)+`
`+t.prev}function ib(e,t){var n=Tx(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=Tl(e,i)?t(e[i],e):""}var o=typeof eA=="function"?eA(e):[],a;if(dp){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var u in e)Tl(e,u)&&(n&&String(Number(u))===u&&u<e.length||dp&&a["$"+u]instanceof Symbol||(g7.call(/[^\w$]/,u)?r.push(t(u,e)+": "+t(e[u],e)):r.push(u+": "+t(e[u],e))));if(typeof eA=="function")for(var c=0;c<o.length;c++)y7.call(e,o[c])&&r.push("["+t(o[c])+"]: "+t(e[o[c]],e));return r}var Xj,Wj;function nu(){return Wj||(Wj=1,Xj=function(e){return typeof e=="string"||typeof e=="symbol"}),Xj}var qj,$j;function eye(){return $j||($j=1,qj=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}),qj}var rA,Kj;function zn(){if(Kj)return rA;Kj=1;var e=eye();return rA=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":e(t)},rA}var tye=or,Qj=tye("%TypeError%"),rye=v7,nye=nu(),iye=zn(),Xy=function(e,t){if(iye(e)!=="Object")throw new Qj("Assertion failed: Type(O) is not Object");if(!nye(t))throw new Qj("Assertion failed: IsPropertyKey(P) is not true, got "+rye(t));return e[t]},nA,Zj;function S7(){if(Zj)return nA;Zj=1;var e=or,t=e("%Array%"),n=!t.isArray&&wi("Object.prototype.toString");return nA=t.isArray||function(r){return n(r)==="[object Array]"},nA}var Jj,eB;function qR(){return eB||(eB=1,Jj=S7()),Jj}var ob={exports:{}},tB,rB;function oye(){return rB||(rB=1,tB=or),tB}var iA,nB;function $R(){if(nB)return iA;nB=1;var e=or,t=Xs,n=e("%TypeError%");return iA=function(r,i){if(r.Type(i)!=="Object")return!1;var o={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var a in i)if(t(i,a)&&!o[a])return!1;if(r.IsDataDescriptor(i)&&r.IsAccessorDescriptor(i))throw new n("Property Descriptors may not be both accessor and data descriptors");return!0},iA}var oA,iB;function w7(){if(iB)return oA;iB=1;var e=_1,t=or,n=e()&&t("%Object.defineProperty%",!0),r=e.hasArrayLengthDefineBug(),i=r&&S7(),o=wi,a=o("Object.prototype.propertyIsEnumerable");return oA=function(s,u,c,l,f,h){if(!n){if(!s(h)||!h["[[Configurable]]"]||!h["[[Writable]]"]||f in l&&a(l,f)!==!!h["[[Enumerable]]"])return!1;var p=h["[[Value]]"];return l[f]=p,u(l[f],p)}return r&&f==="length"&&"[[Value]]"in h&&i(l)&&l.length!==h["[[Value]]"]?(l.length=h["[[Value]]"],l.length===h["[[Value]]"]):(n(l,f,c(h)),!0)},oA}var aA,oB;function aye(){if(oB)return aA;oB=1;var e=Xs;return aA=function(t){return e(t,"[[StartIndex]]")&&e(t,"[[EndIndex]]")&&t["[[StartIndex]]"]>=0&&t["[[EndIndex]]"]>=t["[[StartIndex]]"]&&String(parseInt(t["[[StartIndex]]"],10))===String(t["[[StartIndex]]"])&&String(parseInt(t["[[EndIndex]]"],10))===String(t["[[EndIndex]]"])},aA}var sA,aB;function E1(){if(aB)return sA;aB=1;var e=or,t=e("%TypeError%"),n=e("%SyntaxError%"),r=Xs,i=VR(),o=aye(),a={"Property Descriptor":function(s){var u={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};if(!s)return!1;for(var c in s)if(r(s,c)&&!u[c])return!1;var l=r(s,"[[Value]]"),f=r(s,"[[Get]]")||r(s,"[[Set]]");if(l&&f)throw new t("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":o,"Iterator Record":function(s){return r(s,"[[Iterator]]")&&r(s,"[[NextMethod]]")&&r(s,"[[Done]]")},"PromiseCapability Record":function(s){return!!s&&r(s,"[[Resolve]]")&&typeof s["[[Resolve]]"]=="function"&&r(s,"[[Reject]]")&&typeof s["[[Reject]]"]=="function"&&r(s,"[[Promise]]")&&s["[[Promise]]"]&&typeof s["[[Promise]]"].then=="function"},"AsyncGeneratorRequest Record":function(s){return!!s&&r(s,"[[Completion]]")&&r(s,"[[Capability]]")&&a["PromiseCapability Record"](s["[[Capability]]"])},"RegExp Record":function(s){return s&&r(s,"[[IgnoreCase]]")&&typeof s["[[IgnoreCase]]"]=="boolean"&&r(s,"[[Multiline]]")&&typeof s["[[Multiline]]"]=="boolean"&&r(s,"[[DotAll]]")&&typeof s["[[DotAll]]"]=="boolean"&&r(s,"[[Unicode]]")&&typeof s["[[Unicode]]"]=="boolean"&&r(s,"[[CapturingGroupsCount]]")&&typeof s["[[CapturingGroupsCount]]"]=="number"&&i(s["[[CapturingGroupsCount]]"])&&s["[[CapturingGroupsCount]]"]>=0}};return sA=function(s,u,c,l){var f=a[u];if(typeof f!="function")throw new n("unknown record type: "+u);if(s(l)!=="Object"||!f(l))throw new t(c+" must be a "+u)},sA}var sB,lB;function sye(){return lB||(lB=1,sB=function(e){if(typeof e>"u")return e;var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=!!e["[[Configurable]]"]),t}),sB}var lA,uB;function A7(){if(uB)return lA;uB=1;var e=E1(),t=sye(),n=zn();return lA=function(r){return typeof r<"u"&&e(n,"Property Descriptor","Desc",r),t(r)},lA}var uA,cB;function S1(){if(cB)return uA;cB=1;var e=Xs,t=zn(),n=E1();return uA=function(r){return!(typeof r>"u"||(n(t,"Property Descriptor","Desc",r),!e(r,"[[Get]]")&&!e(r,"[[Set]]")))},uA}var cA,hB;function w1(){if(hB)return cA;hB=1;var e=Xs,t=zn(),n=E1();return cA=function(r){return!(typeof r>"u"||(n(t,"Property Descriptor","Desc",r),!e(r,"[[Value]]")&&!e(r,"[[Writable]]")))},cA}var hA,fB;function KR(){if(fB)return hA;fB=1;var e=T1;return hA=function(t,n){return t===n?t===0?1/t===1/n:!0:e(t)&&e(n)},hA}var O7=function(e){return!!e},k7=Function.prototype.toString,ff=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Sx,l0;if(typeof ff=="function"&&typeof Object.defineProperty=="function")try{Sx=Object.defineProperty({},"length",{get:function(){throw l0}}),l0={},ff(function(){throw 42},null,Sx)}catch(e){e!==l0&&(ff=null)}else ff=null;var lye=/^\s*class\b/,wx=function(e){try{var t=k7.call(e);return lye.test(t)}catch{return!1}},fA=function(e){try{return wx(e)?!1:(k7.call(e),!0)}catch{return!1}},u0=Object.prototype.toString,uye="[object Object]",cye="[object Function]",hye="[object GeneratorFunction]",fye="[object HTMLAllCollection]",pye="[object HTML document.all class]",dye="[object HTMLCollection]",mye=typeof Symbol=="function"&&!!Symbol.toStringTag,gye=!(0 in[,]),Ax=function(){return!1};if(typeof document=="object"){var yye=document.all;u0.call(yye)===u0.call(document.all)&&(Ax=function(e){if((gye||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=u0.call(e);return(t===fye||t===pye||t===dye||t===uye)&&e("")==null}catch{}return!1})}var QR=ff?function(e){if(Ax(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{ff(e,null,Sx)}catch(t){if(t!==l0)return!1}return!wx(e)&&fA(e)}:function(e){if(Ax(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(mye)return fA(e);if(wx(e))return!1;var t=u0.call(e);return t!==cye&&t!==hye&&!/^\[object HTML/.test(t)?!1:fA(e)},ZR=QR,pA,pB;function x7(){if(pB)return pA;pB=1;var e=Xs,t=or,n=t("%TypeError%"),r=zn(),i=O7,o=ZR;return pA=function(a){if(r(a)!=="Object")throw new n("ToPropertyDescriptor requires an object");var s={};if(e(a,"enumerable")&&(s["[[Enumerable]]"]=i(a.enumerable)),e(a,"configurable")&&(s["[[Configurable]]"]=i(a.configurable)),e(a,"value")&&(s["[[Value]]"]=a.value),e(a,"writable")&&(s["[[Writable]]"]=i(a.writable)),e(a,"get")){var u=a.get;if(typeof u<"u"&&!o(u))throw new n("getter must be a function");s["[[Get]]"]=u}if(e(a,"set")){var c=a.set;if(typeof c<"u"&&!o(c))throw new n("setter must be a function");s["[[Set]]"]=c}if((e(s,"[[Get]]")||e(s,"[[Set]]"))&&(e(s,"[[Value]]")||e(s,"[[Writable]]")))throw new n("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return s},pA}var dA,dB;function vye(){if(dB)return dA;dB=1;var e=or,t=e("%TypeError%"),n=$R(),r=w7(),i=A7(),o=S1(),a=w1(),s=nu(),u=KR(),c=x7(),l=zn();return dA=function(f,h,p){if(l(f)!=="Object")throw new t("Assertion failed: Type(O) is not Object");if(!s(h))throw new t("Assertion failed: IsPropertyKey(P) is not true");var d=n({Type:l,IsDataDescriptor:a,IsAccessorDescriptor:o},p)?p:c(p);if(!n({Type:l,IsDataDescriptor:a,IsAccessorDescriptor:o},d))throw new t("Assertion failed: Desc is not a valid Property Descriptor");return r(a,u,i,f,h,d)},dA}var mB;function bye(){if(mB)return ob.exports;mB=1;var e=oye(),t=e("%Reflect.construct%",!0),n=vye();try{n({},"",{"[[Get]]":function(){}})}catch{n=null}if(n&&t){var r={},i={};n(i,"length",{"[[Get]]":function(){throw r},"[[Enumerable]]":!0}),ob.exports=function(o){try{t(o,i)}catch(a){return a===r}}}else ob.exports=function(o){return typeof o=="function"&&!!o.prototype};return ob.exports}var I7=or,gB=I7("%Symbol.species%",!0),yB=I7("%TypeError%"),vB=Sge(),bB=Xy,_ye=qR(),Tye=bye(),Eye=zn(),Sye=VR(),C7=function(e,t){if(!Sye(t)||t<0)throw new yB("Assertion failed: length must be an integer >= 0");var n=_ye(e);if(!n)return vB(t);var r=bB(e,"constructor");if(gB&&Eye(r)==="Object"&&(r=bB(r,gB),r===null&&(r=void 0)),typeof r>"u")return vB(t);if(!Tye(r))throw new yB("C must be a constructor");return new r(t)},P7=Number.MAX_SAFE_INTEGER||9007199254740991,mA,_B;function D7(){if(_B)return mA;_B=1;var e=or,t=wi,n=e("%TypeError%"),r=qR(),i=e("%Reflect.apply%",!0)||t("Function.prototype.apply");return mA=function(o,a){var s=arguments.length>2?arguments[2]:[];if(!r(s))throw new n("Assertion failed: optional `argumentsList`, if provided, must be a List");return i(o,a,s)},mA}var TB,EB;function R7(){return EB||(EB=1,TB=function(e){return e===null||typeof e!="function"&&typeof e!="object"}),TB}var gA,SB;function wye(){if(SB)return gA;SB=1;var e=or,t=e("%Object.preventExtensions%",!0),n=e("%Object.isExtensible%",!0),r=R7();return gA=t?function(i){return!r(i)&&n(i)}:function(i){return!r(i)},gA}var wB,AB;function Aye(){return AB||(AB=1,wB=function(e,t){return!!t&&typeof t=="object"&&"[[Enumerable]]"in t&&"[[Configurable]]"in t&&(e.IsAccessorDescriptor(t)||e.IsDataDescriptor(t))}),wB}var yA,OB;function Oye(){if(OB)return yA;OB=1;var e=E1(),t=S1(),n=w1(),r=zn();return yA=function(i){return typeof i>"u"?!1:(e(r,"Property Descriptor","Desc",i),!t(i)&&!n(i))},yA}var vA,kB;function kye(){if(kB)return vA;kB=1;var e=or,t=e("%TypeError%"),n=w7(),r=Aye(),i=$R(),o=A7(),a=S1(),s=w1(),u=Oye(),c=nu(),l=KR(),f=zn();return vA=function(h,p,d,m,g){var v=f(h);if(v!=="Undefined"&&v!=="Object")throw new t("Assertion failed: O must be undefined or an Object");if(!c(p))throw new t("Assertion failed: P must be a Property Key");if(f(d)!=="Boolean")throw new t("Assertion failed: extensible must be a Boolean");if(!i({Type:f,IsDataDescriptor:s,IsAccessorDescriptor:a},m))throw new t("Assertion failed: Desc must be a Property Descriptor");if(f(g)!=="Undefined"&&!i({Type:f,IsDataDescriptor:s,IsAccessorDescriptor:a},g))throw new t("Assertion failed: current must be a Property Descriptor, or undefined");if(f(g)==="Undefined")return d?v==="Undefined"?!0:a(m)?n(s,l,o,h,p,m):n(s,l,o,h,p,{"[[Configurable]]":!!m["[[Configurable]]"],"[[Enumerable]]":!!m["[[Enumerable]]"],"[[Value]]":m["[[Value]]"],"[[Writable]]":!!m["[[Writable]]"]}):!1;if(!r({IsAccessorDescriptor:a,IsDataDescriptor:s},g))throw new t("`current`, when present, must be a fully populated and valid Property Descriptor");if(!g["[[Configurable]]"]){if("[[Configurable]]"in m&&m["[[Configurable]]"]||"[[Enumerable]]"in m&&!l(m["[[Enumerable]]"],g["[[Enumerable]]"])||!u(m)&&!l(a(m),a(g)))return!1;if(a(g)){if("[[Get]]"in m&&!l(m["[[Get]]"],g["[[Get]]"])||"[[Set]]"in m&&!l(m["[[Set]]"],g["[[Set]]"]))return!1}else if(!g["[[Writable]]"]&&("[[Writable]]"in m&&m["[[Writable]]"]||"[[Value]]"in m&&!l(m["[[Value]]"],g["[[Value]]"])))return!1}if(v!=="Undefined"){var b,y;return s(g)&&a(m)?(b=("[[Configurable]]"in m?m:g)["[[Configurable]]"],y=("[[Enumerable]]"in m?m:g)["[[Enumerable]]"],n(s,l,o,h,p,{"[[Configurable]]":!!b,"[[Enumerable]]":!!y,"[[Get]]":("[[Get]]"in m?m:g)["[[Get]]"],"[[Set]]":("[[Set]]"in m?m:g)["[[Set]]"]})):a(g)&&s(m)?(b=("[[Configurable]]"in m?m:g)["[[Configurable]]"],y=("[[Enumerable]]"in m?m:g)["[[Enumerable]]"],n(s,l,o,h,p,{"[[Configurable]]":!!b,"[[Enumerable]]":!!y,"[[Value]]":("[[Value]]"in m?m:g)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in m?m:g)["[[Writable]]"]})):n(s,l,o,h,p,m)}return!0},vA}var bA,xB;function xye(){if(xB)return bA;xB=1;var e=or,t=UR,n=e("%SyntaxError%"),r=e("%TypeError%"),i=$R(),o=S1(),a=w1(),s=wye(),u=nu(),c=x7(),l=KR(),f=zn(),h=kye();return bA=function(p,d,m){if(f(p)!=="Object")throw new r("Assertion failed: O must be an Object");if(!u(d))throw new r("Assertion failed: P must be a Property Key");if(!i({Type:f,IsDataDescriptor:a,IsAccessorDescriptor:o},m))throw new r("Assertion failed: Desc must be a Property Descriptor");if(!t){if(o(m))throw new n("This environment does not support accessor property descriptors.");var g=!(d in p)&&m["[[Writable]]"]&&m["[[Enumerable]]"]&&m["[[Configurable]]"]&&"[[Value]]"in m,v=d in p&&(!("[[Configurable]]"in m)||m["[[Configurable]]"])&&(!("[[Enumerable]]"in m)||m["[[Enumerable]]"])&&(!("[[Writable]]"in m)||m["[[Writable]]"])&&"[[Value]]"in m;if(g||v)return p[d]=m["[[Value]]"],l(p[d],m["[[Value]]"]);throw new n("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var b=t(p,d),y=b&&c(b),_=s(p);return h(p,d,_,m,y)},bA}var _A,IB;function Iye(){if(IB)return _A;IB=1;var e=or,t=e("%TypeError%"),n=nu(),r=xye(),i=zn();return _A=function(o,a,s){if(i(o)!=="Object")throw new t("Assertion failed: Type(O) is not Object");if(!n(a))throw new t("Assertion failed: IsPropertyKey(P) is not true");var u={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":s,"[[Writable]]":!0};return r(o,a,u)},_A}var TA,CB;function N7(){if(CB)return TA;CB=1;var e=or,t=e("%TypeError%"),n=Iye(),r=nu(),i=zn();return TA=function(o,a,s){if(i(o)!=="Object")throw new t("Assertion failed: Type(O) is not Object");if(!r(a))throw new t("Assertion failed: IsPropertyKey(P) is not true");var u=n(o,a,s);if(!u)throw new t("unable to create data property")},TA}var EA,PB;function M7(){if(PB)return EA;PB=1;var e=or,t=e("%TypeError%"),n=nu(),r=zn();return EA=function(i,o){if(r(i)!=="Object")throw new t("Assertion failed: `O` must be an Object");if(!n(o))throw new t("Assertion failed: `P` must be a Property Key");return o in i},EA}var DB,RB;function Cye(){return RB||(RB=1,DB=function(e){return e===null||typeof e!="function"&&typeof e!="object"}),DB}var Pye=GR,Wy=function(){return Pye()&&!!Symbol.toStringTag},SA,NB;function Dye(){if(NB)return SA;NB=1;var e=Date.prototype.getDay,t=function(o){try{return e.call(o),!0}catch{return!1}},n=Object.prototype.toString,r="[object Date]",i=Wy();return SA=function(o){return typeof o!="object"||o===null?!1:i?t(o):n.call(o)===r},SA}var ab={exports:{}},MB;function Rye(){if(MB)return ab.exports;MB=1;var e=Object.prototype.toString,t=J9();if(t){var n=Symbol.prototype.toString,r=/^Symbol\(.*\)$/,i=function(o){return typeof o.valueOf()!="symbol"?!1:r.test(n.call(o))};ab.exports=function(o){if(typeof o=="symbol")return!0;if(e.call(o)!=="[object Symbol]")return!1;try{return i(o)}catch{return!1}}}else ab.exports=function(o){return!1};return ab.exports}var wA,LB;function Nye(){if(LB)return wA;LB=1;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",t=Cye(),n=QR,r=Dye(),i=Rye(),o=function(s,u){if(typeof s>"u"||s===null)throw new TypeError("Cannot call method on "+s);if(typeof u!="string"||u!=="number"&&u!=="string")throw new TypeError('hint must be "string" or "number"');var c=u==="string"?["toString","valueOf"]:["valueOf","toString"],l,f,h;for(h=0;h<c.length;++h)if(l=s[c[h]],n(l)&&(f=l.call(s),t(f)))return f;throw new TypeError("No default value")},a=function(s,u){var c=s[u];if(c!==null&&typeof c<"u"){if(!n(c))throw new TypeError(c+" returned for property "+u+" of object "+s+" is not a function");return c}};return wA=function(s){if(t(s))return s;var u="default";arguments.length>1&&(arguments[1]===String?u="string":arguments[1]===Number&&(u="number"));var c;if(e&&(Symbol.toPrimitive?c=a(s,Symbol.toPrimitive):i(s)&&(c=Symbol.prototype.valueOf)),typeof c<"u"){var l=c.call(s,u);if(t(l))return l;throw new TypeError("unable to convert exotic object to primitive")}return u==="default"&&(r(s)||i(s))&&(u="string"),o(s,u==="default"?"number":u)},wA}var AA,jB;function Mye(){if(jB)return AA;jB=1;var e=Nye();return AA=function(t){return arguments.length>1?e(t,arguments[1]):e(t)},AA}var Ox=wi,L7=Wy(),j7,B7,kx,xx;if(L7){j7=Ox("Object.prototype.hasOwnProperty"),B7=Ox("RegExp.prototype.exec"),kx={};var OA=function(){throw kx};xx={toString:OA,valueOf:OA},typeof Symbol.toPrimitive=="symbol"&&(xx[Symbol.toPrimitive]=OA)}var Lye=Ox("Object.prototype.toString"),jye=Object.getOwnPropertyDescriptor,Bye="[object RegExp]",F7=L7?function(e){if(!e||typeof e!="object")return!1;var t=jye(e,"lastIndex"),n=t&&j7(t,"value");if(!n)return!1;try{B7(e,xx)}catch(r){return r===kx}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:Lye(e)===Bye},kA,BB;function Fye(){if(BB)return kA;BB=1;var e=wi,t=or,n=F7,r=e("RegExp.prototype.exec"),i=t("%TypeError%");return kA=function(o){if(!n(o))throw new i("`regex` must be a RegExp");return function(a){return r(o,a)!==null}},kA}var Gye=or,Hye=Gye("%TypeError%"),Uye=function(e,t){if(e==null)throw new Hye(t||"Cannot call method on "+e);return e},id=Uye,G7=or,zye=G7("%String%"),Vye=G7("%TypeError%"),JR=function(e){if(typeof e=="symbol")throw new Vye("Cannot convert a Symbol value to a string");return zye(e)},Yye=id,Xye=JR,Wye=wi,FB=Wye("String.prototype.replace"),H7=/^\s$/.test("᠎"),qye=H7?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,$ye=H7?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,U7=function(){var e=Xye(Yye(this));return FB(FB(e,qye,""),$ye,"")},Kye=U7,GB="​",Ah="᠎",z7=function(){return String.prototype.trim&&GB.trim()===GB&&Ah.trim()===Ah&&("_"+Ah).trim()==="_"+Ah&&(Ah+"_").trim()===Ah+"_"?String.prototype.trim:Kye},Qye=ri,Zye=z7,Jye=function(){var e=Zye();return Qye(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e},eve=Ws,tve=ri,rve=id,nve=U7,V7=z7,ive=Jye,ove=eve(V7()),Y7=function(e){return rve(e),ove(e)};tve(Y7,{getPolyfill:V7,implementation:nve,shim:ive});var X7=Y7,xA,HB;function ave(){if(HB)return xA;HB=1;var e=or,t=e("%Number%"),n=e("%RegExp%"),r=e("%TypeError%"),i=e("%parseInt%"),o=wi,a=Fye(),s=o("String.prototype.slice"),u=a(/^0b[01]+$/i),c=a(/^0o[0-7]+$/i),l=a(/^[-+]0x[0-9a-f]+$/i),f=["","​","￾"].join(""),h=new n("["+f+"]","g"),p=a(h),d=X7,m=zn();return xA=function g(v){if(m(v)!=="String")throw new r("Assertion failed: `argument` is not a String");if(u(v))return t(i(s(v,2),2));if(c(v))return t(i(s(v,2),8));if(p(v)||l(v))return NaN;var b=d(v);return b!==v?g(b):t(v)},xA}var W7=or,UB=W7("%TypeError%"),zB=W7("%Number%"),sve=R7(),lve=Mye(),uve=ave(),cve=function(e){var t=sve(e)?e:lve(e,zB);if(typeof t=="symbol")throw new UB("Cannot convert a Symbol value to a number");if(typeof t=="bigint")throw new UB("Conversion from 'BigInt' to 'number' is not allowed.");return typeof t=="string"?uve(t):zB(t)},hve=zn(),fve=Math.floor,pve=function(e){return hve(e)==="BigInt"?e:fve(e)},dve=or,VB=pve,mve=dve("%TypeError%"),gve=function(e){if(typeof e!="number"&&typeof e!="bigint")throw new mve("argument must be a Number or a BigInt");var t=e<0?-VB(-e):VB(e);return t===0?0:t},yve=cve,vve=gve,bve=T1,_ve=m7,q7=function(e){var t=yve(e);return bve(t)||t===0?0:_ve(t)?vve(t):t},YB=P7,Tve=q7,$7=function(e){var t=Tve(e);return t<=0?0:t>YB?YB:t},IA,XB;function K7(){if(XB)return IA;XB=1;var e=or,t=e("%TypeError%"),n=Xy,r=$7,i=zn();return IA=function(o){if(i(o)!=="Object")throw new t("Assertion failed: `obj` must be an Object");return r(n(o,"length"))},IA}var Eve=or,WB=Eve("%TypeError%"),Sve=P7,wve=D7(),Ave=N7(),Ove=Xy,kve=M7(),xve=qR(),Ive=K7(),qB=JR,Cve=function e(t,n,r,i,o){var a;arguments.length>5&&(a=arguments[5]);for(var s=i,u=0;u<r;){var c=qB(u),l=kve(n,c);if(l===!0){var f=Ove(n,c);if(typeof a<"u"){if(arguments.length<=6)throw new WB("Assertion failed: thisArg is required when mapperFunction is provided");f=wve(a,arguments[6],[f,u,n])}var h=!1;if(o>0&&(h=xve(f)),h){var p=Ive(f);s=e(t,f,p,s,o-1)}else{if(s>=Sve)throw new WB("index too large");Ave(t,qB(s),f),s+=1}}u+=1}return s},Pve=or,Dve=Pve("%Object%"),Rve=id,Q7=function(e){return Rve(e),Dve(e)},Nve=C7,Mve=Cve,Lve=Xy,jve=q7,Bve=$7,Fve=Q7,Z7=function(){var e=Fve(this),t=Bve(Lve(e,"length")),n=1;arguments.length>0&&typeof arguments[0]<"u"&&(n=jve(arguments[0]));var r=Nve(e,0);return Mve(r,e,t,0,n),r},Gve=Z7,J7=function(){return Array.prototype.flat||Gve},CA,$B;function Hve(){if($B)return CA;$B=1;var e=Xs,t=typeof Symbol=="function"&&typeof Symbol.unscopables=="symbol",n=t&&Array.prototype[Symbol.unscopables],r=TypeError;return CA=function(i){if(typeof i!="string"||!i)throw new r("method must be a non-empty string");if(!e(Array.prototype,i))throw new r("method must be on Array.prototype");t&&(n[i]=!0)},CA}var PA,KB;function Uve(){if(KB)return PA;KB=1;var e=ri,t=Hve(),n=J7;return PA=function(){var r=n();return e(Array.prototype,{flat:r},{flat:function(){return Array.prototype.flat!==r}}),t("flat"),r},PA}var zve=ri,Vve=Ws,Yve=Z7,eV=J7,Xve=eV(),Wve=Uve(),tV=Vve(Xve);zve(tV,{getPolyfill:eV,implementation:Yve,shim:Wve});var qy=tV,QB={}.hasOwnProperty,DA=Function.prototype.call,od=DA.bind?DA.bind(QB):function(e,t){return DA.call(QB,e,t)},$y={},Ix={exports:{}},ZB=function(e){return e!==e},rV=function(e,t){return e===0&&t===0?1/e===1/t:!!(e===t||ZB(e)&&ZB(t))},qve=rV,nV=function(){return typeof Object.is=="function"?Object.is:qve},$ve=nV,Kve=ri,Qve=function(){var e=$ve();return Kve(Object,{is:e},{is:function(){return Object.is!==e}}),e},Zve=ri,Jve=Ws,ebe=rV,iV=nV,tbe=Qve,oV=Jve(iV(),Object);Zve(oV,{getPolyfill:iV,implementation:ebe,shim:tbe});var eN=oV;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=i(eN),r=i(od);function i(s){return s&&s.__esModule?s:{default:s}}function o(s){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},o(s)}function a(s,u){if((0,n.default)(s,u))return!0;if(!s||!u||o(s)!=="object"||o(u)!=="object")return!1;var c=Object.keys(s),l=Object.keys(u);if(c.length!==l.length)return!1;c.sort(),l.sort();for(var f=0;f<c.length;f+=1)if(!(0,r.default)(u,c[f])||!(0,n.default)(s[c[f]],u[c[f]]))return!1;return!0}e.exports=t.default})(Ix,Ix.exports);var aV=Ix.exports,rbe=id,sV=wi,nbe=sV("Object.prototype.propertyIsEnumerable"),ibe=sV("Array.prototype.push"),lV=function(e){var t=rbe(e),n=[];for(var r in t)nbe(t,r)&&ibe(n,[r,t[r]]);return n},obe=lV,uV=function(){return typeof Object.entries=="function"?Object.entries:obe},abe=uV,sbe=ri,lbe=function(){var e=abe();return sbe(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e},ube=ri,cbe=Ws,hbe=lV,cV=uV,fbe=lbe,hV=cbe(cV(),Object);ube(hV,{getPolyfill:cV,implementation:hbe,shim:fbe});var fV=hV,pbe=or,JB=pbe("%TypeError%"),dbe=Xs,mbe=nu(),gbe=zn(),ybe=function(e,t){if(gbe(e)!=="Object")throw new JB("Assertion failed: `O` must be an Object");if(!mbe(t))throw new JB("Assertion failed: `P` must be a Property Key");return dbe(e,t)},iy=function(){return typeof(function(){}).name=="string"},eg=Object.getOwnPropertyDescriptor;if(eg)try{eg([],"length")}catch{eg=null}iy.functionsHaveConfigurableNames=function(){if(!iy()||!eg)return!1;var e=eg(function(){},"name");return!!e&&!!e.configurable};var vbe=Function.prototype.bind;iy.boundFunctionsHaveNames=function(){return iy()&&typeof vbe=="function"&&(function(){}).bind().name!==""};var pV=iy,dV=ZR,bbe=ybe,_be=pV(),tN=wi,mV=tN("Function.prototype.toString"),gV=tN("String.prototype.match"),RA=tN("Object.prototype.toString"),Tbe=/^class /,Ebe=function(e){if(dV(e)||typeof e!="function")return!1;try{var t=gV(mV(e),Tbe);return!!t}catch{}return!1},Sbe=/\s*function\s+([^(\s]*)\s*/,wbe=!(0 in[,]),Abe="[object Object]",Obe="[object HTMLAllCollection]",kbe=Function.prototype,yV=function(){return!1};if(typeof document=="object"){var xbe=document.all;RA(xbe)===RA(document.all)&&(yV=function(e){if((wbe||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=RA(e);return(t===Obe||t===Abe)&&e("")==null}catch{}return!1})}var vV=function(){if(yV(this)||!Ebe(this)&&!dV(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(_be&&bbe(this,"name"))return this.name;if(this===kbe)return"";var e=mV(this),t=gV(e,Sbe),n=t&&t[1];return n},Ibe=vV,bV=function(){return Ibe},Cbe=ri.supportsDescriptors,Pbe=pV(),Dbe=bV,e3=Object.defineProperty,Rbe=TypeError,Nbe=function(){var e=Dbe();if(Pbe)return e;if(!Cbe)throw new Rbe("Shimming Function.prototype.name support requires ES5 property descriptor support.");var t=Function.prototype;return e3(t,"name",{configurable:!0,enumerable:!1,get:function(){var n=e.call(this);return this!==t&&e3(this,"name",{configurable:!0,enumerable:!1,value:n,writable:!1}),n}}),e},Mbe=ri,Lbe=Ws,_V=vV,jbe=bV,Bbe=Nbe,TV=Lbe(_V);Mbe(TV,{getPolyfill:jbe,implementation:_V,shim:Bbe});var rN=TV,EV={},SV={};Object.defineProperty(SV,"__esModule",{value:!0});var A1={},ad={},F_=Pe&&Pe.__assign||function(){return F_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},F_.apply(this,arguments)};Object.defineProperty(ad,"__esModule",{value:!0});ad.flatten=void 0;var Fbe={xml:!1,decodeEntities:!0};ad.default=Fbe;var t3={_useHtmlParser2:!0,xmlMode:!0};function Gbe(e){return e!=null&&e.xml?typeof e.xml=="boolean"?t3:F_(F_({},t3),e.xml):e??void 0}ad.flatten=Gbe;var tn={},$o={},Ji={},ti={},sd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(r){return r.type===t.Tag||r.type===t.Script||r.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(sd);var Xt={},iu=Pe&&Pe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tg=Pe&&Pe.__assign||function(){return tg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tg.apply(this,arguments)};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.cloneNode=Xt.hasChildren=Xt.isDocument=Xt.isDirective=Xt.isComment=Xt.isText=Xt.isCDATA=Xt.isTag=Xt.Element=Xt.Document=Xt.CDATA=Xt.NodeWithChildren=Xt.ProcessingInstruction=Xt.Comment=Xt.Text=Xt.DataNode=Xt.Node=void 0;var Bi=sd,nN=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),iN(this,t)},e}();Xt.Node=nN;var O1=function(e){iu(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(nN);Xt.DataNode=O1;var wV=function(e){iu(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Bi.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(O1);Xt.Text=wV;var AV=function(e){iu(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Bi.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(O1);Xt.Comment=AV;var OV=function(e){iu(t,e);function t(n,r){var i=e.call(this,r)||this;return i.name=n,i.type=Bi.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(O1);Xt.ProcessingInstruction=OV;var k1=function(e){iu(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(nN);Xt.NodeWithChildren=k1;var kV=function(e){iu(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Bi.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(k1);Xt.CDATA=kV;var xV=function(e){iu(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Bi.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(k1);Xt.Document=xV;var IV=function(e){iu(t,e);function t(n,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?Bi.ElementType.Script:n==="style"?Bi.ElementType.Style:Bi.ElementType.Tag);var a=e.call(this,i)||this;return a.name=n,a.attribs=r,a.type=o,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var i,o;return{name:r,value:n.attribs[r],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[r]}})},enumerable:!1,configurable:!0}),t}(k1);Xt.Element=IV;function CV(e){return(0,Bi.isTag)(e)}Xt.isTag=CV;function PV(e){return e.type===Bi.ElementType.CDATA}Xt.isCDATA=PV;function DV(e){return e.type===Bi.ElementType.Text}Xt.isText=DV;function RV(e){return e.type===Bi.ElementType.Comment}Xt.isComment=RV;function NV(e){return e.type===Bi.ElementType.Directive}Xt.isDirective=NV;function MV(e){return e.type===Bi.ElementType.Root}Xt.isDocument=MV;function Hbe(e){return Object.prototype.hasOwnProperty.call(e,"children")}Xt.hasChildren=Hbe;function iN(e,t){t===void 0&&(t=!1);var n;if(DV(e))n=new wV(e.data);else if(RV(e))n=new AV(e.data);else if(CV(e)){var r=t?NA(e.children):[],i=new IV(e.name,tg({},e.attribs),r);r.forEach(function(u){return u.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=tg({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=tg({},e["x-attribsPrefix"])),n=i}else if(PV(e)){var r=t?NA(e.children):[],o=new kV(r);r.forEach(function(c){return c.parent=o}),n=o}else if(MV(e)){var r=t?NA(e.children):[],a=new xV(r);r.forEach(function(c){return c.parent=a}),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),n=a}else if(NV(e)){var s=new OV(e.name,e.data);e["x-name"]!=null&&(s["x-name"]=e["x-name"],s["x-publicId"]=e["x-publicId"],s["x-systemId"]=e["x-systemId"]),n=s}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}Xt.cloneNode=iN;function NA(e){for(var t=e.map(function(r){return iN(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(s,u,c,l){l===void 0&&(l=c);var f=Object.getOwnPropertyDescriptor(u,c);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(s,l,f)}:function(s,u,c,l){l===void 0&&(l=c),s[l]=u[c]}),n=Pe&&Pe.__exportStar||function(s,u){for(var c in s)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&t(u,s,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=sd,i=Xt;n(Xt,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function s(u,c,l){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof c=="function"&&(l=c,c=o),typeof u=="object"&&(c=u,u=void 0),this.callback=u??null,this.options=c??o,this.elementCB=l??null}return s.prototype.onparserinit=function(u){this.parser=u},s.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},s.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},s.prototype.onerror=function(u){this.handleCallback(u)},s.prototype.onclosetag=function(){this.lastNode=null;var u=this.tagStack.pop();this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(u)},s.prototype.onopentag=function(u,c){var l=this.options.xmlMode?r.ElementType.Tag:void 0,f=new i.Element(u,c,void 0,l);this.addNode(f),this.tagStack.push(f)},s.prototype.ontext=function(u){var c=this.lastNode;if(c&&c.type===r.ElementType.Text)c.data+=u,this.options.withEndIndices&&(c.endIndex=this.parser.endIndex);else{var l=new i.Text(u);this.addNode(l),this.lastNode=l}},s.prototype.oncomment=function(u){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=u;return}var c=new i.Comment(u);this.addNode(c),this.lastNode=c},s.prototype.oncommentend=function(){this.lastNode=null},s.prototype.oncdatastart=function(){var u=new i.Text(""),c=new i.CDATA([u]);this.addNode(c),u.parent=c,this.lastNode=u},s.prototype.oncdataend=function(){this.lastNode=null},s.prototype.onprocessinginstruction=function(u,c){var l=new i.ProcessingInstruction(u,c);this.addNode(l)},s.prototype.handleCallback=function(u){if(typeof this.callback=="function")this.callback(u,this.dom);else if(u)throw u},s.prototype.addNode=function(u){var c=this.tagStack[this.tagStack.length-1],l=c.children[c.children.length-1];this.options.withStartIndices&&(u.startIndex=this.parser.startIndex),this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),c.children.push(u),l&&(u.prev=l,l.next=u),u.parent=c,this.lastNode=null},s}();e.DomHandler=a,e.default=a})(ti);var ld={},LV={},yc={},oN={};Object.defineProperty(oN,"__esModule",{value:!0});oN.default=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(function(e){return e.charCodeAt(0)}));var aN={};Object.defineProperty(aN,"__esModule",{value:!0});aN.default=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(function(e){return e.charCodeAt(0)}));var Cx={};(function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var n=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);e.fromCodePoint=(t=String.fromCodePoint)!==null&&t!==void 0?t:function(o){var a="";return o>65535&&(o-=65536,a+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),a+=String.fromCharCode(o),a};function r(o){var a;return o>=55296&&o<=57343||o>1114111?65533:(a=n.get(o))!==null&&a!==void 0?a:o}e.replaceCodePoint=r;function i(o){return(0,e.fromCodePoint)(r(o))}e.default=i})(Cx);(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(w,B,L,k){k===void 0&&(k=L);var R=Object.getOwnPropertyDescriptor(B,L);(!R||("get"in R?!B.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return B[L]}}),Object.defineProperty(w,k,R)}:function(w,B,L,k){k===void 0&&(k=L),w[k]=B[L]}),n=Pe&&Pe.__setModuleDefault||(Object.create?function(w,B){Object.defineProperty(w,"default",{enumerable:!0,value:B})}:function(w,B){w.default=B}),r=Pe&&Pe.__importStar||function(w){if(w&&w.__esModule)return w;var B={};if(w!=null)for(var L in w)L!=="default"&&Object.prototype.hasOwnProperty.call(w,L)&&t(B,w,L);return n(B,w),B},i=Pe&&Pe.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var o=i(oN);e.htmlDecodeTree=o.default;var a=i(aN);e.xmlDecodeTree=a.default;var s=r(Cx);e.decodeCodePoint=s.default;var u=Cx;Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return u.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return u.fromCodePoint}});var c;(function(w){w[w.NUM=35]="NUM",w[w.SEMI=59]="SEMI",w[w.EQUALS=61]="EQUALS",w[w.ZERO=48]="ZERO",w[w.NINE=57]="NINE",w[w.LOWER_A=97]="LOWER_A",w[w.LOWER_F=102]="LOWER_F",w[w.LOWER_X=120]="LOWER_X",w[w.LOWER_Z=122]="LOWER_Z",w[w.UPPER_A=65]="UPPER_A",w[w.UPPER_F=70]="UPPER_F",w[w.UPPER_Z=90]="UPPER_Z"})(c||(c={}));var l=32,f;(function(w){w[w.VALUE_LENGTH=49152]="VALUE_LENGTH",w[w.BRANCH_LENGTH=16256]="BRANCH_LENGTH",w[w.JUMP_TABLE=127]="JUMP_TABLE"})(f=e.BinTrieFlags||(e.BinTrieFlags={}));function h(w){return w>=c.ZERO&&w<=c.NINE}function p(w){return w>=c.UPPER_A&&w<=c.UPPER_F||w>=c.LOWER_A&&w<=c.LOWER_F}function d(w){return w>=c.UPPER_A&&w<=c.UPPER_Z||w>=c.LOWER_A&&w<=c.LOWER_Z||h(w)}function m(w){return w===c.EQUALS||d(w)}var g;(function(w){w[w.EntityStart=0]="EntityStart",w[w.NumericStart=1]="NumericStart",w[w.NumericDecimal=2]="NumericDecimal",w[w.NumericHex=3]="NumericHex",w[w.NamedEntity=4]="NamedEntity"})(g||(g={}));var v;(function(w){w[w.Legacy=0]="Legacy",w[w.Strict=1]="Strict",w[w.Attribute=2]="Attribute"})(v=e.DecodingMode||(e.DecodingMode={}));var b=function(){function w(B,L,k){this.decodeTree=B,this.emitCodePoint=L,this.errors=k,this.state=g.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=v.Strict}return w.prototype.startEntity=function(B){this.decodeMode=B,this.state=g.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},w.prototype.write=function(B,L){switch(this.state){case g.EntityStart:return B.charCodeAt(L)===c.NUM?(this.state=g.NumericStart,this.consumed+=1,this.stateNumericStart(B,L+1)):(this.state=g.NamedEntity,this.stateNamedEntity(B,L));case g.NumericStart:return this.stateNumericStart(B,L);case g.NumericDecimal:return this.stateNumericDecimal(B,L);case g.NumericHex:return this.stateNumericHex(B,L);case g.NamedEntity:return this.stateNamedEntity(B,L)}},w.prototype.stateNumericStart=function(B,L){return L>=B.length?-1:(B.charCodeAt(L)|l)===c.LOWER_X?(this.state=g.NumericHex,this.consumed+=1,this.stateNumericHex(B,L+1)):(this.state=g.NumericDecimal,this.stateNumericDecimal(B,L))},w.prototype.addToNumericResult=function(B,L,k,R){if(L!==k){var F=k-L;this.result=this.result*Math.pow(R,F)+parseInt(B.substr(L,F),R),this.consumed+=F}},w.prototype.stateNumericHex=function(B,L){for(var k=L;L<B.length;){var R=B.charCodeAt(L);if(h(R)||p(R))L+=1;else return this.addToNumericResult(B,k,L,16),this.emitNumericEntity(R,3)}return this.addToNumericResult(B,k,L,16),-1},w.prototype.stateNumericDecimal=function(B,L){for(var k=L;L<B.length;){var R=B.charCodeAt(L);if(h(R))L+=1;else return this.addToNumericResult(B,k,L,10),this.emitNumericEntity(R,2)}return this.addToNumericResult(B,k,L,10),-1},w.prototype.emitNumericEntity=function(B,L){var k;if(this.consumed<=L)return(k=this.errors)===null||k===void 0||k.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(B===c.SEMI)this.consumed+=1;else if(this.decodeMode===v.Strict)return 0;return this.emitCodePoint((0,s.replaceCodePoint)(this.result),this.consumed),this.errors&&(B!==c.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},w.prototype.stateNamedEntity=function(B,L){for(var k=this.decodeTree,R=k[this.treeIndex],F=(R&f.VALUE_LENGTH)>>14;L<B.length;L++,this.excess++){var U=B.charCodeAt(L);if(this.treeIndex=_(k,R,this.treeIndex+Math.max(1,F),U),this.treeIndex<0)return this.result===0||this.decodeMode===v.Attribute&&(F===0||m(U))?0:this.emitNotTerminatedNamedEntity();if(R=k[this.treeIndex],F=(R&f.VALUE_LENGTH)>>14,F!==0){if(U===c.SEMI)return this.emitNamedEntityData(this.treeIndex,F,this.consumed+this.excess);this.decodeMode!==v.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},w.prototype.emitNotTerminatedNamedEntity=function(){var B,L=this,k=L.result,R=L.decodeTree,F=(R[k]&f.VALUE_LENGTH)>>14;return this.emitNamedEntityData(k,F,this.consumed),(B=this.errors)===null||B===void 0||B.missingSemicolonAfterCharacterReference(),this.consumed},w.prototype.emitNamedEntityData=function(B,L,k){var R=this.decodeTree;return this.emitCodePoint(L===1?R[B]&~f.VALUE_LENGTH:R[B+1],k),L===3&&this.emitCodePoint(R[B+2],k),k},w.prototype.end=function(){var B;switch(this.state){case g.NamedEntity:return this.result!==0&&(this.decodeMode!==v.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case g.NumericDecimal:return this.emitNumericEntity(0,2);case g.NumericHex:return this.emitNumericEntity(0,3);case g.NumericStart:return(B=this.errors)===null||B===void 0||B.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case g.EntityStart:return 0}},w}();e.EntityDecoder=b;function y(w){var B="",L=new b(w,function(k){return B+=(0,s.fromCodePoint)(k)});return function(k,R){for(var F=0,U=0;(U=k.indexOf("&",U))>=0;){B+=k.slice(F,U),L.startEntity(R);var $=L.write(k,U+1);if($<0){F=U+L.end();break}F=U+$,U=$===0?F+1:F}var ie=B+k.slice(F);return B="",ie}}function _(w,B,L,k){var R=(B&f.BRANCH_LENGTH)>>7,F=B&f.JUMP_TABLE;if(R===0)return F!==0&&k===F?L:-1;if(F){var U=k-F;return U<0||U>=R?-1:w[L+U]-1}for(var $=L,ie=$+R-1;$<=ie;){var oe=$+ie>>>1,me=w[oe];if(me<k)$=oe+1;else if(me>k)ie=oe-1;else return w[oe+R]}return-1}e.determineBranch=_;var T=y(o.default),S=y(a.default);function E(w,B){return B===void 0&&(B=v.Legacy),T(w,B)}e.decodeHTML=E;function I(w){return T(w,v.Attribute)}e.decodeHTMLAttribute=I;function x(w){return T(w,v.Strict)}e.decodeHTMLStrict=x;function C(w){return S(w,v.Strict)}e.decodeXML=C})(yc);var vc={},sN={};Object.defineProperty(sN,"__esModule",{value:!0});function sb(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}sN.default=new Map(sb([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(sb([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(sb([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(sb([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var mp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);e.getCodePoint=String.prototype.codePointAt!=null?function(i,o){return i.codePointAt(o)}:function(i,o){return(i.charCodeAt(o)&64512)===55296?(i.charCodeAt(o)-55296)*1024+i.charCodeAt(o+1)-56320+65536:i.charCodeAt(o)};function n(i){for(var o="",a=0,s;(s=e.xmlReplacer.exec(i))!==null;){var u=s.index,c=i.charCodeAt(u),l=t.get(c);l!==void 0?(o+=i.substring(a,u)+l,a=u+1):(o+="".concat(i.substring(a,u),"&#x").concat((0,e.getCodePoint)(i,u).toString(16),";"),a=e.xmlReplacer.lastIndex+=+((c&64512)===55296))}return o+i.substr(a)}e.encodeXML=n,e.escape=n;function r(i,o){return function(a){for(var s,u=0,c="";s=i.exec(a);)u!==s.index&&(c+=a.substring(u,s.index)),c+=o.get(s[0].charCodeAt(0)),u=s.index+1;return c+a.substring(u)}}e.escapeUTF8=r(/[&<>'"]/g,t),e.escapeAttribute=r(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=r(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(mp);var Ube=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vc,"__esModule",{value:!0});vc.encodeNonAsciiHTML=vc.encodeHTML=void 0;var zbe=Ube(sN),jV=mp,Vbe=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function Ybe(e){return BV(Vbe,e)}vc.encodeHTML=Ybe;function Xbe(e){return BV(jV.xmlReplacer,e)}vc.encodeNonAsciiHTML=Xbe;function BV(e,t){for(var n="",r=0,i;(i=e.exec(t))!==null;){var o=i.index;n+=t.substring(r,o);var a=t.charCodeAt(o),s=zbe.default.get(a);if(typeof s=="object"){if(o+1<t.length){var u=t.charCodeAt(o+1),c=typeof s.n=="number"?s.n===u?s.o:void 0:s.n.get(u);if(c!==void 0){n+=c,r=e.lastIndex+=1;continue}}s=s.v}if(s!==void 0)n+=s,r=o+1;else{var l=(0,jV.getCodePoint)(t,o);n+="&#x".concat(l.toString(16),";"),r=e.lastIndex+=+(l!==a)}}return n+t.substr(r)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0;var t=yc,n=vc,r=mp,i;(function(h){h[h.XML=0]="XML",h[h.HTML=1]="HTML"})(i=e.EntityLevel||(e.EntityLevel={}));var o;(function(h){h[h.UTF8=0]="UTF8",h[h.ASCII=1]="ASCII",h[h.Extensive=2]="Extensive",h[h.Attribute=3]="Attribute",h[h.Text=4]="Text"})(o=e.EncodingMode||(e.EncodingMode={}));function a(h,p){p===void 0&&(p=i.XML);var d=typeof p=="number"?p:p.level;if(d===i.HTML){var m=typeof p=="object"?p.mode:void 0;return(0,t.decodeHTML)(h,m)}return(0,t.decodeXML)(h)}e.decode=a;function s(h,p){var d;p===void 0&&(p=i.XML);var m=typeof p=="number"?{level:p}:p;return(d=m.mode)!==null&&d!==void 0||(m.mode=t.DecodingMode.Strict),a(h,m)}e.decodeStrict=s;function u(h,p){p===void 0&&(p=i.XML);var d=typeof p=="number"?{level:p}:p;return d.mode===o.UTF8?(0,r.escapeUTF8)(h):d.mode===o.Attribute?(0,r.escapeAttribute)(h):d.mode===o.Text?(0,r.escapeText)(h):d.level===i.HTML?d.mode===o.ASCII?(0,n.encodeNonAsciiHTML)(h):(0,n.encodeHTML)(h):(0,r.encodeXML)(h)}e.encode=u;var c=mp;Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var l=vc;Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return l.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return l.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return l.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return l.encodeHTML}});var f=yc;Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return f.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return f.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return f.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return f.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return f.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return f.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return f.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return f.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return f.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return f.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return f.decodeXML}})})(LV);var gp={};Object.defineProperty(gp,"__esModule",{value:!0});gp.attributeNames=gp.elementNames=void 0;gp.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]}));gp.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}));var pf=Pe&&Pe.__assign||function(){return pf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pf.apply(this,arguments)},Wbe=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),qbe=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),$be=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Wbe(t,e,n);return qbe(t,e),t};Object.defineProperty(ld,"__esModule",{value:!0});ld.render=void 0;var ts=$be(sd),G_=LV,FV=gp,Kbe=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Qbe(e){return e.replace(/"/g,"&quot;")}function Zbe(e,t){var n;if(e){var r=((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)===!1?Qbe:t.xmlMode||t.encodeEntities!=="utf8"?G_.encodeXML:G_.escapeAttribute;return Object.keys(e).map(function(i){var o,a,s=(o=e[i])!==null&&o!==void 0?o:"";return t.xmlMode==="foreign"&&(i=(a=FV.attributeNames.get(i))!==null&&a!==void 0?a:i),!t.emptyAttrs&&!t.xmlMode&&s===""?i:"".concat(i,'="').concat(r(s),'"')}).join(" ")}}var r3=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function x1(e,t){t===void 0&&(t={});for(var n=("length"in e)?e:[e],r="",i=0;i<n.length;i++)r+=Jbe(n[i],t);return r}ld.render=x1;ld.default=x1;function Jbe(e,t){switch(e.type){case ts.Root:return x1(e.children,t);case ts.Doctype:case ts.Directive:return n0e(e);case ts.Comment:return a0e(e);case ts.CDATA:return o0e(e);case ts.Script:case ts.Style:case ts.Tag:return r0e(e,t);case ts.Text:return i0e(e,t)}}var e0e=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),t0e=new Set(["svg","math"]);function r0e(e,t){var n;t.xmlMode==="foreign"&&(e.name=(n=FV.elementNames.get(e.name))!==null&&n!==void 0?n:e.name,e.parent&&e0e.has(e.parent.name)&&(t=pf(pf({},t),{xmlMode:!1}))),!t.xmlMode&&t0e.has(e.name)&&(t=pf(pf({},t),{xmlMode:"foreign"}));var r="<".concat(e.name),i=Zbe(e.attribs,t);return i&&(r+=" ".concat(i)),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&r3.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=x1(e.children,t)),(t.xmlMode||!r3.has(e.name))&&(r+="</".concat(e.name,">"))),r}function n0e(e){return"<".concat(e.data,">")}function i0e(e,t){var n,r=e.data||"";return((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&Kbe.has(e.parent.name))&&(r=t.xmlMode||t.encodeEntities!=="utf8"?(0,G_.encodeXML)(r):(0,G_.escapeText)(r)),r}function o0e(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}function a0e(e){return"<!--".concat(e.data,"-->")}var s0e=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.innerText=Ji.textContent=Ji.getText=Ji.getInnerHTML=Ji.getOuterHTML=void 0;var La=ti,l0e=s0e(ld),u0e=sd;function GV(e,t){return(0,l0e.default)(e,t)}Ji.getOuterHTML=GV;function c0e(e,t){return(0,La.hasChildren)(e)?e.children.map(function(n){return GV(n,t)}).join(""):""}Ji.getInnerHTML=c0e;function c0(e){return Array.isArray(e)?e.map(c0).join(""):(0,La.isTag)(e)?e.name==="br"?`
`:c0(e.children):(0,La.isCDATA)(e)?c0(e.children):(0,La.isText)(e)?e.data:""}Ji.getText=c0;function Px(e){return Array.isArray(e)?e.map(Px).join(""):(0,La.hasChildren)(e)&&!(0,La.isComment)(e)?Px(e.children):(0,La.isText)(e)?e.data:""}Ji.textContent=Px;function Dx(e){return Array.isArray(e)?e.map(Dx).join(""):(0,La.hasChildren)(e)&&(e.type===u0e.ElementType.Tag||(0,La.isCDATA)(e))?Dx(e.children):(0,La.isText)(e)?e.data:""}Ji.innerText=Dx;var En={};Object.defineProperty(En,"__esModule",{value:!0});En.prevElementSibling=En.nextElementSibling=En.getName=En.hasAttrib=En.getAttributeValue=En.getSiblings=En.getParent=En.getChildren=void 0;var lN=ti;function HV(e){return(0,lN.hasChildren)(e)?e.children:[]}En.getChildren=HV;function UV(e){return e.parent||null}En.getParent=UV;function h0e(e){var t,n,r=UV(e);if(r!=null)return HV(r);for(var i=[e],o=e.prev,a=e.next;o!=null;)i.unshift(o),t=o,o=t.prev;for(;a!=null;)i.push(a),n=a,a=n.next;return i}En.getSiblings=h0e;function f0e(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}En.getAttributeValue=f0e;function p0e(e,t){return e.attribs!=null&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&e.attribs[t]!=null}En.hasAttrib=p0e;function d0e(e){return e.name}En.getName=d0e;function m0e(e){for(var t,n=e.next;n!==null&&!(0,lN.isTag)(n);)t=n,n=t.next;return n}En.nextElementSibling=m0e;function g0e(e){for(var t,n=e.prev;n!==null&&!(0,lN.isTag)(n);)t=n,n=t.prev;return n}En.prevElementSibling=g0e;var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.prepend=Mi.prependChild=Mi.append=Mi.appendChild=Mi.replaceElement=Mi.removeElement=void 0;function Ky(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}Mi.removeElement=Ky;function y0e(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var i=t.parent=e.parent;if(i){var o=i.children;o[o.lastIndexOf(e)]=t,e.parent=null}}Mi.replaceElement=y0e;function v0e(e,t){if(Ky(t),t.next=null,t.parent=e,e.children.push(t)>1){var n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null}Mi.appendChild=v0e;function b0e(e,t){Ky(t);var n=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){var i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)}Mi.append=b0e;function _0e(e,t){if(Ky(t),t.parent=e,t.prev=null,e.children.unshift(t)!==1){var n=e.children[1];n.prev=t,t.next=n}else t.next=null}Mi.prependChild=_0e;function T0e(e,t){Ky(t);var n=e.parent;if(n){var r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}Mi.prepend=T0e;var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.findAll=ui.existsOne=ui.findOne=ui.findOneChild=ui.find=ui.filter=void 0;var I1=ti;function E0e(e,t,n,r){return n===void 0&&(n=!0),r===void 0&&(r=1/0),zV(e,Array.isArray(t)?t:[t],n,r)}ui.filter=E0e;function zV(e,t,n,r){for(var i=[],o=[t],a=[0];;){if(a[0]>=o[0].length){if(a.length===1)return i;o.shift(),a.shift();continue}var s=o[0][a[0]++];if(e(s)&&(i.push(s),--r<=0))return i;n&&(0,I1.hasChildren)(s)&&s.children.length>0&&(a.unshift(0),o.unshift(s.children))}}ui.find=zV;function S0e(e,t){return t.find(e)}ui.findOneChild=S0e;function VV(e,t,n){n===void 0&&(n=!0);for(var r=null,i=0;i<t.length&&!r;i++){var o=t[i];if((0,I1.isTag)(o))e(o)?r=o:n&&o.children.length>0&&(r=VV(e,o.children,!0));else continue}return r}ui.findOne=VV;function YV(e,t){return t.some(function(n){return(0,I1.isTag)(n)&&(e(n)||YV(e,n.children))})}ui.existsOne=YV;function w0e(e,t){for(var n=[],r=[t],i=[0];;){if(i[0]>=r[0].length){if(r.length===1)return n;r.shift(),i.shift();continue}var o=r[0][i[0]++];(0,I1.isTag)(o)&&(e(o)&&n.push(o),o.children.length>0&&(i.unshift(0),r.unshift(o.children)))}}ui.findAll=w0e;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.getElementsByTagType=eo.getElementsByTagName=eo.getElementById=eo.getElements=eo.testElement=void 0;var Bu=ti,C1=ui,H_={tag_name:function(e){return typeof e=="function"?function(t){return(0,Bu.isTag)(t)&&e(t.name)}:e==="*"?Bu.isTag:function(t){return(0,Bu.isTag)(t)&&t.name===e}},tag_type:function(e){return typeof e=="function"?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return typeof e=="function"?function(t){return(0,Bu.isText)(t)&&e(t.data)}:function(t){return(0,Bu.isText)(t)&&t.data===e}}};function XV(e,t){return typeof t=="function"?function(n){return(0,Bu.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,Bu.isTag)(n)&&n.attribs[e]===t}}function A0e(e,t){return function(n){return e(n)||t(n)}}function WV(e){var t=Object.keys(e).map(function(n){var r=e[n];return Object.prototype.hasOwnProperty.call(H_,n)?H_[n](r):XV(n,r)});return t.length===0?null:t.reduce(A0e)}function O0e(e,t){var n=WV(e);return n?n(t):!0}eo.testElement=O0e;function k0e(e,t,n,r){r===void 0&&(r=1/0);var i=WV(e);return i?(0,C1.filter)(i,t,n,r):[]}eo.getElements=k0e;function x0e(e,t,n){return n===void 0&&(n=!0),Array.isArray(t)||(t=[t]),(0,C1.findOne)(XV("id",e),t,n)}eo.getElementById=x0e;function I0e(e,t,n,r){return n===void 0&&(n=!0),r===void 0&&(r=1/0),(0,C1.filter)(H_.tag_name(e),t,n,r)}eo.getElementsByTagName=I0e;function C0e(e,t,n,r){return n===void 0&&(n=!0),r===void 0&&(r=1/0),(0,C1.filter)(H_.tag_type(e),t,n,r)}eo.getElementsByTagType=C0e;var qV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueSort=e.compareDocumentPosition=e.DocumentPosition=e.removeSubsets=void 0;var t=ti;function n(a){for(var s=a.length;--s>=0;){var u=a[s];if(s>0&&a.lastIndexOf(u,s-1)>=0){a.splice(s,1);continue}for(var c=u.parent;c;c=c.parent)if(a.includes(c)){a.splice(s,1);break}}return a}e.removeSubsets=n;var r;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(r=e.DocumentPosition||(e.DocumentPosition={}));function i(a,s){var u=[],c=[];if(a===s)return 0;for(var l=(0,t.hasChildren)(a)?a:a.parent;l;)u.unshift(l),l=l.parent;for(l=(0,t.hasChildren)(s)?s:s.parent;l;)c.unshift(l),l=l.parent;for(var f=Math.min(u.length,c.length),h=0;h<f&&u[h]===c[h];)h++;if(h===0)return r.DISCONNECTED;var p=u[h-1],d=p.children,m=u[h],g=c[h];return d.indexOf(m)>d.indexOf(g)?p===s?r.FOLLOWING|r.CONTAINED_BY:r.FOLLOWING:p===a?r.PRECEDING|r.CONTAINS:r.PRECEDING}e.compareDocumentPosition=i;function o(a){return a=a.filter(function(s,u,c){return!c.includes(s,u+1)}),a.sort(function(s,u){var c=i(s,u);return c&r.PRECEDING?-1:c&r.FOLLOWING?1:0}),a}e.uniqueSort=o})(qV);var P1={};Object.defineProperty(P1,"__esModule",{value:!0});P1.getFeed=void 0;var P0e=Ji,Qy=eo;function D0e(e){var t=U_(j0e,e);return t?t.name==="feed"?R0e(t):N0e(t):null}P1.getFeed=D0e;function R0e(e){var t,n=e.children,r={type:"atom",items:(0,Qy.getElementsByTagName)("entry",n).map(function(a){var s,u=a.children,c={media:$V(u)};Ni(c,"id","id",u),Ni(c,"title","title",u);var l=(s=U_("link",u))===null||s===void 0?void 0:s.attribs.href;l&&(c.link=l);var f=Rl("summary",u)||Rl("content",u);f&&(c.description=f);var h=Rl("updated",u);return h&&(c.pubDate=new Date(h)),c})};Ni(r,"id","id",n),Ni(r,"title","title",n);var i=(t=U_("link",n))===null||t===void 0?void 0:t.attribs.href;i&&(r.link=i),Ni(r,"description","subtitle",n);var o=Rl("updated",n);return o&&(r.updated=new Date(o)),Ni(r,"author","email",n,!0),r}function N0e(e){var t,n,r=(n=(t=U_("channel",e.children))===null||t===void 0?void 0:t.children)!==null&&n!==void 0?n:[],i={type:e.name.substr(0,3),id:"",items:(0,Qy.getElementsByTagName)("item",e.children).map(function(a){var s=a.children,u={media:$V(s)};Ni(u,"id","guid",s),Ni(u,"title","title",s),Ni(u,"link","link",s),Ni(u,"description","description",s);var c=Rl("pubDate",s)||Rl("dc:date",s);return c&&(u.pubDate=new Date(c)),u})};Ni(i,"title","title",r),Ni(i,"link","link",r),Ni(i,"description","description",r);var o=Rl("lastBuildDate",r);return o&&(i.updated=new Date(o)),Ni(i,"author","managingEditor",r,!0),i}var M0e=["url","type","lang"],L0e=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function $V(e){return(0,Qy.getElementsByTagName)("media:content",e).map(function(t){for(var n=t.attribs,r={medium:n.medium,isDefault:!!n.isDefault},i=0,o=M0e;i<o.length;i++){var a=o[i];n[a]&&(r[a]=n[a])}for(var s=0,u=L0e;s<u.length;s++){var a=u[s];n[a]&&(r[a]=parseInt(n[a],10))}return n.expression&&(r.expression=n.expression),r})}function U_(e,t){return(0,Qy.getElementsByTagName)(e,t,!0,1)[0]}function Rl(e,t,n){return n===void 0&&(n=!1),(0,P0e.textContent)((0,Qy.getElementsByTagName)(e,t,n,1)).trim()}function Ni(e,t,n,r,i){i===void 0&&(i=!1);var o=Rl(n,r,i);o&&(e[t]=o)}function j0e(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a);var u=Object.getOwnPropertyDescriptor(o,a);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,s,u)}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=Pe&&Pe.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,n(Ji,e),n(En,e),n(Mi,e),n(ui,e),n(eo,e),n(qV,e),n(P1,e);var r=ti;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return r.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return r.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return r.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return r.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return r.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return r.hasChildren}})})($o);var ec=Pe&&Pe.__assign||function(){return ec=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ec.apply(this,arguments)},B0e=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),F0e=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),G0e=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&B0e(t,e,n);return F0e(t,e),t};Object.defineProperty(tn,"__esModule",{value:!0});tn.merge=tn.contains=tn.root=tn.parseHTML=tn.text=tn.xml=tn.html=void 0;var H0e=$o,Rx=G0e(ad);function KV(e,t,n){return e?e(t??e._root.children,null,void 0,n).toString():""}function U0e(e,t){return typeof e=="object"&&e!=null&&!("length"in e)&&!("type"in e)}function z0e(e,t){var n=U0e(e)?(t=e,void 0):e,r=ec(ec(ec({},Rx.default),this===null||this===void 0?void 0:this._options),(0,Rx.flatten)(t??{}));return KV(this,n,r)}tn.html=z0e;function V0e(e){var t=ec(ec({},this._options),{xmlMode:!0});return KV(this,e,t)}tn.xml=V0e;function Y0e(e){for(var t=e||(this?this.root():[]),n="",r=0;r<t.length;r++)n+=(0,H0e.textContent)(t[r]);return n}tn.text=Y0e;function X0e(e,t,n){if(n===void 0&&(n=typeof t=="boolean"?t:!1),!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t);var r=this.load(e,Rx.default,!1);return n||r("script").remove(),r.root()[0].children.slice()}tn.parseHTML=X0e;function W0e(){return this(this._root)}tn.root=W0e;function q0e(e,t){if(t===e)return!1;for(var n=t;n&&n!==n.parent;)if(n=n.parent,n===e)return!0;return!1}tn.contains=q0e;function $0e(e,t){if(!(!n3(e)||!n3(t))){for(var n=e.length,r=+t.length,i=0;i<r;i++)e[n++]=t[i];return e.length=n,e}}tn.merge=$0e;function n3(e){if(Array.isArray(e))return!0;if(typeof e!="object"||!Object.prototype.hasOwnProperty.call(e,"length")||typeof e.length!="number"||e.length<0)return!1;for(var t=0;t<e.length;t++)if(!(t in e))return!1;return!0}var D1={},rn={},ou={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isHtml=e.cloneDom=e.domEach=e.cssCase=e.camelCase=e.isCheerio=e.isTag=void 0;var t=ti,n=ti;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return n.isTag}});function r(l){return l.cheerio!=null}e.isCheerio=r;function i(l){return l.replace(/[_.-](\w|$)/g,function(f,h){return h.toUpperCase()})}e.camelCase=i;function o(l){return l.replace(/[A-Z]/g,"-$&").toLowerCase()}e.cssCase=o;function a(l,f){for(var h=l.length,p=0;p<h;p++)f(l[p],p);return l}e.domEach=a;function s(l){var f="length"in l?Array.prototype.map.call(l,function(p){return(0,t.cloneNode)(p,!0)}):[(0,t.cloneNode)(l,!0)],h=new t.Document(f);return f.forEach(function(p){p.parent=h}),f}e.cloneDom=s;var u;(function(l){l[l.LowerA=97]="LowerA",l[l.LowerZ=122]="LowerZ",l[l.UpperA=65]="UpperA",l[l.UpperZ=90]="UpperZ",l[l.Exclamation=33]="Exclamation"})(u||(u={}));function c(l){var f=l.indexOf("<");if(f<0||f>l.length-3)return!1;var h=l.charCodeAt(f+1);return(h>=u.LowerA&&h<=u.LowerZ||h>=u.UpperA&&h<=u.UpperZ||h===u.Exclamation)&&l.includes(">",f+2)}e.isHtml=c})(ou);Object.defineProperty(rn,"__esModule",{value:!0});rn.toggleClass=rn.removeClass=rn.addClass=rn.hasClass=rn.removeAttr=rn.val=rn.data=rn.prop=rn.attr=void 0;var QV=tn,vr=ou,i3=$o,Df=Object.prototype.hasOwnProperty,oy=/\s+/,MA="data-",o3={null:null,true:!0,false:!1},uN=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,K0e=/^{[^]*}$|^\[[^]*]$/;function z_(e,t,n){var r;if(!(!e||!(0,vr.isTag)(e))){if((r=e.attribs)!==null&&r!==void 0||(e.attribs={}),!t)return e.attribs;if(Df.call(e.attribs,t))return!n&&uN.test(t)?t:e.attribs[t];if(e.name==="option"&&t==="value")return(0,QV.text)(e.children);if(e.name==="input"&&(e.attribs.type==="radio"||e.attribs.type==="checkbox")&&t==="value")return"on"}}function Rf(e,t,n){n===null?ZV(e,t):e.attribs[t]="".concat(n)}function Q0e(e,t){if(typeof e=="object"||t!==void 0){if(typeof t=="function"){if(typeof e!="string")throw new Error("Bad combination of arguments.");return(0,vr.domEach)(this,function(n,r){(0,vr.isTag)(n)&&Rf(n,e,t.call(n,r,n.attribs[e]))})}return(0,vr.domEach)(this,function(n){(0,vr.isTag)(n)&&(typeof e=="object"?Object.keys(e).forEach(function(r){var i=e[r];Rf(n,r,i)}):Rf(n,e,t))})}return arguments.length>1?this:z_(this[0],e,this.options.xmlMode)}rn.attr=Q0e;function a3(e,t,n){return t in e?e[t]:!n&&uN.test(t)?z_(e,t,!1)!==void 0:z_(e,t,n)}function LA(e,t,n,r){t in e?e[t]=n:Rf(e,t,!r&&uN.test(t)?n?"":null:"".concat(n))}function Z0e(e,t){var n=this,r;if(typeof e=="string"&&t===void 0){var i=this[0];if(!i||!(0,vr.isTag)(i))return;switch(e){case"style":{var o=this.css(),a=Object.keys(o);return a.forEach(function(u,c){o[c]=u}),o.length=a.length,o}case"tagName":case"nodeName":return i.name.toUpperCase();case"href":case"src":{var s=(r=i.attribs)===null||r===void 0?void 0:r[e];return typeof URL<"u"&&(e==="href"&&(i.tagName==="a"||i.name==="link")||e==="src"&&(i.tagName==="img"||i.tagName==="iframe"||i.tagName==="audio"||i.tagName==="video"||i.tagName==="source"))&&s!==void 0&&this.options.baseURI?new URL(s,this.options.baseURI).href:s}case"innerText":return(0,i3.innerText)(i);case"textContent":return(0,i3.textContent)(i);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return a3(i,e,this.options.xmlMode)}}if(typeof e=="object"||t!==void 0){if(typeof t=="function"){if(typeof e=="object")throw new Error("Bad combination of arguments.");return(0,vr.domEach)(this,function(u,c){(0,vr.isTag)(u)&&LA(u,e,t.call(u,c,a3(u,e,n.options.xmlMode)),n.options.xmlMode)})}return(0,vr.domEach)(this,function(u){(0,vr.isTag)(u)&&(typeof e=="object"?Object.keys(e).forEach(function(c){var l=e[c];LA(u,c,l,n.options.xmlMode)}):LA(u,e,t,n.options.xmlMode))})}}rn.prop=Z0e;function s3(e,t,n){var r,i=e;(r=i.data)!==null&&r!==void 0||(i.data={}),typeof t=="object"?Object.assign(i.data,t):typeof t=="string"&&n!==void 0&&(i.data[t]=n)}function l3(e,t){var n,r,i;t==null?(n=Object.keys(e.attribs).filter(function(u){return u.startsWith(MA)}),r=n.map(function(u){return(0,vr.camelCase)(u.slice(MA.length))})):(n=[MA+(0,vr.cssCase)(t)],r=[t]);for(var o=0;o<n.length;++o){var a=n[o],s=r[o];if(Df.call(e.attribs,a)&&!Df.call(e.data,s)){if(i=e.attribs[a],Df.call(o3,i))i=o3[i];else if(i===String(Number(i)))i=Number(i);else if(K0e.test(i))try{i=JSON.parse(i)}catch{}e.data[s]=i}}return t==null?e.data:i}function J0e(e,t){var n,r=this[0];if(!(!r||!(0,vr.isTag)(r))){var i=r;return(n=i.data)!==null&&n!==void 0||(i.data={}),e?typeof e=="object"||t!==void 0?((0,vr.domEach)(this,function(o){(0,vr.isTag)(o)&&(typeof e=="object"?s3(o,e):s3(o,e,t))}),this):Df.call(i.data,e)?i.data[e]:l3(i,e):l3(i)}}rn.data=J0e;function e_e(e){var t=arguments.length===0,n=this[0];if(!n||!(0,vr.isTag)(n))return t?void 0:this;switch(n.name){case"textarea":return this.text(e);case"select":{var r=this.find("option:selected");if(!t){if(this.attr("multiple")==null&&typeof e=="object")return this;this.find("option").removeAttr("selected");for(var i=typeof e!="object"?[e]:e,o=0;o<i.length;o++)this.find('option[value="'.concat(i[o],'"]')).attr("selected","");return this}return this.attr("multiple")?r.toArray().map(function(a){return(0,QV.text)(a.children)}):r.attr("value")}case"input":case"option":return t?this.attr("value"):this.attr("value",e)}}rn.val=e_e;function ZV(e,t){!e.attribs||!Df.call(e.attribs,t)||delete e.attribs[t]}function V_(e){return e?e.trim().split(oy):[]}function t_e(e){for(var t=V_(e),n=function(o){(0,vr.domEach)(r,function(a){(0,vr.isTag)(a)&&ZV(a,t[o])})},r=this,i=0;i<t.length;i++)n(i);return this}rn.removeAttr=t_e;function r_e(e){return this.toArray().some(function(t){var n=(0,vr.isTag)(t)&&t.attribs.class,r=-1;if(n&&e.length)for(;(r=n.indexOf(e,r+1))>-1;){var i=r+e.length;if((r===0||oy.test(n[r-1]))&&(i===n.length||oy.test(n[i])))return!0}return!1})}rn.hasClass=r_e;function JV(e){if(typeof e=="function")return(0,vr.domEach)(this,function(c,l){if((0,vr.isTag)(c)){var f=c.attribs.class||"";JV.call([c],e.call(c,l,f))}});if(!e||typeof e!="string")return this;for(var t=e.split(oy),n=this.length,r=0;r<n;r++){var i=this[r];if((0,vr.isTag)(i)){var o=z_(i,"class",!1);if(!o)Rf(i,"class",t.join(" ").trim());else{for(var a=" ".concat(o," "),s=0;s<t.length;s++){var u="".concat(t[s]," ");a.includes(" ".concat(u))||(a+=u)}Rf(i,"class",a.trim())}}}return this}rn.addClass=JV;function eY(e){if(typeof e=="function")return(0,vr.domEach)(this,function(i,o){(0,vr.isTag)(i)&&eY.call([i],e.call(i,o,i.attribs.class||""))});var t=V_(e),n=t.length,r=arguments.length===0;return(0,vr.domEach)(this,function(i){if((0,vr.isTag)(i))if(r)i.attribs.class="";else{for(var o=V_(i.attribs.class),a=!1,s=0;s<n;s++){var u=o.indexOf(t[s]);u>=0&&(o.splice(u,1),a=!0,s--)}a&&(i.attribs.class=o.join(" "))}})}rn.removeClass=eY;function tY(e,t){if(typeof e=="function")return(0,vr.domEach)(this,function(f,h){(0,vr.isTag)(f)&&tY.call([f],e.call(f,h,f.attribs.class||"",t),t)});if(!e||typeof e!="string")return this;for(var n=e.split(oy),r=n.length,i=typeof t=="boolean"?t?1:-1:0,o=this.length,a=0;a<o;a++){var s=this[a];if((0,vr.isTag)(s)){for(var u=V_(s.attribs.class),c=0;c<r;c++){var l=u.indexOf(n[c]);i>=0&&l<0?u.push(n[c]):i<=0&&l>=0&&u.splice(l,1)}s.attribs.class=u.join(" ")}}return this}rn.toggleClass=tY;var nt={},rY={},Qt;(function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"})(Qt||(Qt={}));const n_e={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var jr;(function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"})(jr||(jr={}));const u3=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,i_e=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,o_e=new Map([[126,jr.Element],[94,jr.Start],[36,jr.End],[42,jr.Any],[33,jr.Not],[124,jr.Hyphen]]),a_e=new Set(["has","not","matches","is","where","host","host-context"]);function nY(e){switch(e.type){case Qt.Adjacent:case Qt.Child:case Qt.Descendant:case Qt.Parent:case Qt.Sibling:case Qt.ColumnCombinator:return!0;default:return!1}}const s_e=new Set(["contains","icontains"]);function l_e(e,t,n){const r=parseInt(t,16)-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)}function Kd(e){return e.replace(i_e,l_e)}function jA(e){return e===39||e===34}function c3(e){return e===32||e===9||e===10||e===12||e===13}function u_e(e){const t=[],n=iY(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t}function iY(e,t,n){let r=[];function i(h){const p=t.slice(n+h).match(u3);if(!p)throw new Error(`Expected name, found ${t.slice(n)}`);const[d]=p;return n+=h+d.length,Kd(d)}function o(h){for(n+=h;n<t.length&&c3(t.charCodeAt(n));)n++}function a(){n+=1;const h=n;let p=1;for(;p>0&&n<t.length;n++)t.charCodeAt(n)===40&&!s(n)?p++:t.charCodeAt(n)===41&&!s(n)&&p--;if(p)throw new Error("Parenthesis not matched");return Kd(t.slice(h,n-1))}function s(h){let p=0;for(;t.charCodeAt(--h)===92;)p++;return(p&1)===1}function u(){if(r.length>0&&nY(r[r.length-1]))throw new Error("Did not expect successive traversals.")}function c(h){if(r.length>0&&r[r.length-1].type===Qt.Descendant){r[r.length-1].type=h;return}u(),r.push({type:h})}function l(h,p){r.push({type:Qt.Attribute,name:h,action:p,value:i(1),namespace:null,ignoreCase:"quirks"})}function f(){if(r.length&&r[r.length-1].type===Qt.Descendant&&r.pop(),r.length===0)throw new Error("Empty sub-selector");e.push(r)}if(o(0),t.length===n)return n;e:for(;n<t.length;){const h=t.charCodeAt(n);switch(h){case 32:case 9:case 10:case 12:case 13:{(r.length===0||r[0].type!==Qt.Descendant)&&(u(),r.push({type:Qt.Descendant})),o(1);break}case 62:{c(Qt.Child),o(1);break}case 60:{c(Qt.Parent),o(1);break}case 126:{c(Qt.Sibling),o(1);break}case 43:{c(Qt.Adjacent),o(1);break}case 46:{l("class",jr.Element);break}case 35:{l("id",jr.Equals);break}case 91:{o(1);let p,d=null;t.charCodeAt(n)===124?p=i(1):t.startsWith("*|",n)?(d="*",p=i(2)):(p=i(0),t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==61&&(d=p,p=i(1))),o(0);let m=jr.Exists;const g=o_e.get(t.charCodeAt(n));if(g){if(m=g,t.charCodeAt(n+1)!==61)throw new Error("Expected `=`");o(2)}else t.charCodeAt(n)===61&&(m=jr.Equals,o(1));let v="",b=null;if(m!=="exists"){if(jA(t.charCodeAt(n))){const T=t.charCodeAt(n);let S=n+1;for(;S<t.length&&(t.charCodeAt(S)!==T||s(S));)S+=1;if(t.charCodeAt(S)!==T)throw new Error("Attribute value didn't end");v=Kd(t.slice(n+1,S)),n=S+1}else{const T=n;for(;n<t.length&&(!c3(t.charCodeAt(n))&&t.charCodeAt(n)!==93||s(n));)n+=1;v=Kd(t.slice(T,n))}o(0);const _=t.charCodeAt(n)|32;_===115?(b=!1,o(1)):_===105&&(b=!0,o(1))}if(t.charCodeAt(n)!==93)throw new Error("Attribute selector didn't terminate");n+=1;const y={type:Qt.Attribute,name:p,action:m,value:v,namespace:d,ignoreCase:b};r.push(y);break}case 58:{if(t.charCodeAt(n+1)===58){r.push({type:Qt.PseudoElement,name:i(2).toLowerCase(),data:t.charCodeAt(n)===40?a():null});continue}const p=i(1).toLowerCase();let d=null;if(t.charCodeAt(n)===40)if(a_e.has(p)){if(jA(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${p} cannot be quoted`);if(d=[],n=iY(d,t,n+1),t.charCodeAt(n)!==41)throw new Error(`Missing closing parenthesis in :${p} (${t})`);n+=1}else{if(d=a(),s_e.has(p)){const m=d.charCodeAt(0);m===d.charCodeAt(d.length-1)&&jA(m)&&(d=d.slice(1,-1))}d=Kd(d)}r.push({type:Qt.Pseudo,name:p,data:d});break}case 44:{f(),r=[],o(1);break}default:{if(t.startsWith("/*",n)){const m=t.indexOf("*/",n+2);if(m<0)throw new Error("Comment was not terminated");n=m+2,r.length===0&&o(0);break}let p=null,d;if(h===42)n+=1,d="*";else if(h===124){if(d="",t.charCodeAt(n+1)===124){c(Qt.ColumnCombinator),o(2);break}}else if(u3.test(t.slice(n)))d=i(0);else break e;t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==124&&(p=d,t.charCodeAt(n+1)===42?(d="*",n+=2):d=i(1)),r.push(d==="*"?{type:Qt.Universal,namespace:p}:{type:Qt.Tag,name:d,namespace:p})}}}return f(),n}const oY=["\\",'"'],aY=[...oY,"(",")"],c_e=new Set(oY.map(e=>e.charCodeAt(0))),h3=new Set(aY.map(e=>e.charCodeAt(0))),df=new Set([...aY,"~","^","$","*","+","!","|",":","[","]"," ","."].map(e=>e.charCodeAt(0)));function sY(e){return e.map(t=>t.map(h_e).join("")).join(", ")}function h_e(e,t,n){switch(e.type){case Qt.Child:return t===0?"> ":" > ";case Qt.Parent:return t===0?"< ":" < ";case Qt.Sibling:return t===0?"~ ":" ~ ";case Qt.Adjacent:return t===0?"+ ":" + ";case Qt.Descendant:return" ";case Qt.ColumnCombinator:return t===0?"|| ":" || ";case Qt.Universal:return e.namespace==="*"&&t+1<n.length&&"name"in n[t+1]?"":`${lY(e.namespace)}*`;case Qt.Tag:return f3(e);case Qt.PseudoElement:return`::${ss(e.name,df)}${e.data===null?"":`(${ss(e.data,h3)})`}`;case Qt.Pseudo:return`:${ss(e.name,df)}${e.data===null?"":`(${typeof e.data=="string"?ss(e.data,h3):sY(e.data)})`}`;case Qt.Attribute:{if(e.name==="id"&&e.action===jr.Equals&&e.ignoreCase==="quirks"&&!e.namespace)return`#${ss(e.value,df)}`;if(e.name==="class"&&e.action===jr.Element&&e.ignoreCase==="quirks"&&!e.namespace)return`.${ss(e.value,df)}`;const r=f3(e);return e.action===jr.Exists?`[${r}]`:`[${r}${f_e(e.action)}="${ss(e.value,c_e)}"${e.ignoreCase===null?"":e.ignoreCase?" i":" s"}]`}}}function f_e(e){switch(e){case jr.Equals:return"";case jr.Element:return"~";case jr.Start:return"^";case jr.End:return"$";case jr.Any:return"*";case jr.Not:return"!";case jr.Hyphen:return"|";case jr.Exists:throw new Error("Shouldn't be here")}}function f3(e){return`${lY(e.namespace)}${ss(e.name,df)}`}function lY(e){return e!==null?`${e==="*"?"*":ss(e,df)}|`:""}function ss(e,t){let n=0,r="";for(let i=0;i<e.length;i++)t.has(e.charCodeAt(i))&&(r+=`${e.slice(n,i)}\\${e.charAt(i)}`,n=i+1);return r.length>0?r+e.slice(n):e}const p_e=Object.freeze(Object.defineProperty({__proto__:null,get AttributeAction(){return jr},IgnoreCaseMode:n_e,get SelectorType(){return Qt},isTraversal:nY,parse:u_e,stringify:sY},Symbol.toStringTag,{value:"Module"})),Zy=Us(p_e);var Nx={},eh={trueFunc:function(){return!0},falseFunc:function(){return!1}},Gl={},ud={};Object.defineProperty(ud,"__esModule",{value:!0});ud.isTraversal=void 0;var Qi=Zy,uY=new Map([[Qi.SelectorType.Universal,50],[Qi.SelectorType.Tag,30],[Qi.SelectorType.Attribute,1],[Qi.SelectorType.Pseudo,0]]);function d_e(e){return!uY.has(e.type)}ud.isTraversal=d_e;var m_e=new Map([[Qi.AttributeAction.Exists,10],[Qi.AttributeAction.Equals,8],[Qi.AttributeAction.Not,7],[Qi.AttributeAction.Start,6],[Qi.AttributeAction.End,6],[Qi.AttributeAction.Any,5]]);function g_e(e){for(var t=e.map(cY),n=1;n<e.length;n++){var r=t[n];if(!(r<0))for(var i=n-1;i>=0&&r<t[i];i--){var o=e[i+1];e[i+1]=e[i],e[i]=o,t[i+1]=t[i],t[i]=r}}}ud.default=g_e;function cY(e){var t,n,r=(t=uY.get(e.type))!==null&&t!==void 0?t:-1;return e.type===Qi.SelectorType.Attribute?(r=(n=m_e.get(e.action))!==null&&n!==void 0?n:4,e.action===Qi.AttributeAction.Equals&&e.name==="id"&&(r=9),e.ignoreCase&&(r>>=1)):e.type===Qi.SelectorType.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?r=0:Array.isArray(e.data)?(r=Math.min.apply(Math,e.data.map(function(i){return Math.min.apply(Math,i.map(cY))})),r<0&&(r=0)):r=2:r=3),r}var R1={},N1={},y_e=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(N1,"__esModule",{value:!0});N1.attributeRules=void 0;var lb=y_e(eh),v_e=/[-[\]{}()*+?.,\\^$|#\s]/g;function p3(e){return e.replace(v_e,"\\$&")}var b_e=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function Su(e,t){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&b_e.has(e.name)}N1.attributeRules={equals:function(e,t,n){var r=n.adapter,i=t.name,o=t.value;return Su(t,n)?(o=o.toLowerCase(),function(a){var s=r.getAttributeValue(a,i);return s!=null&&s.length===o.length&&s.toLowerCase()===o&&e(a)}):function(a){return r.getAttributeValue(a,i)===o&&e(a)}},hyphen:function(e,t,n){var r=n.adapter,i=t.name,o=t.value,a=o.length;return Su(t,n)?(o=o.toLowerCase(),function(s){var u=r.getAttributeValue(s,i);return u!=null&&(u.length===a||u.charAt(a)==="-")&&u.substr(0,a).toLowerCase()===o&&e(s)}):function(s){var u=r.getAttributeValue(s,i);return u!=null&&(u.length===a||u.charAt(a)==="-")&&u.substr(0,a)===o&&e(s)}},element:function(e,t,n){var r=n.adapter,i=t.name,o=t.value;if(/\s/.test(o))return lb.default.falseFunc;var a=new RegExp("(?:^|\\s)".concat(p3(o),"(?:$|\\s)"),Su(t,n)?"i":"");return function(s){var u=r.getAttributeValue(s,i);return u!=null&&u.length>=o.length&&a.test(u)&&e(s)}},exists:function(e,t,n){var r=t.name,i=n.adapter;return function(o){return i.hasAttrib(o,r)&&e(o)}},start:function(e,t,n){var r=n.adapter,i=t.name,o=t.value,a=o.length;return a===0?lb.default.falseFunc:Su(t,n)?(o=o.toLowerCase(),function(s){var u=r.getAttributeValue(s,i);return u!=null&&u.length>=a&&u.substr(0,a).toLowerCase()===o&&e(s)}):function(s){var u;return!!(!((u=r.getAttributeValue(s,i))===null||u===void 0)&&u.startsWith(o))&&e(s)}},end:function(e,t,n){var r=n.adapter,i=t.name,o=t.value,a=-o.length;return a===0?lb.default.falseFunc:Su(t,n)?(o=o.toLowerCase(),function(s){var u;return((u=r.getAttributeValue(s,i))===null||u===void 0?void 0:u.substr(a).toLowerCase())===o&&e(s)}):function(s){var u;return!!(!((u=r.getAttributeValue(s,i))===null||u===void 0)&&u.endsWith(o))&&e(s)}},any:function(e,t,n){var r=n.adapter,i=t.name,o=t.value;if(o==="")return lb.default.falseFunc;if(Su(t,n)){var a=new RegExp(p3(o),"i");return function(s){var u=r.getAttributeValue(s,i);return u!=null&&u.length>=o.length&&a.test(u)&&e(s)}}return function(s){var u;return!!(!((u=r.getAttributeValue(s,i))===null||u===void 0)&&u.includes(o))&&e(s)}},not:function(e,t,n){var r=n.adapter,i=t.name,o=t.value;return o===""?function(a){return!!r.getAttributeValue(a,i)&&e(a)}:Su(t,n)?(o=o.toLowerCase(),function(a){var s=r.getAttributeValue(a,i);return(s==null||s.length!==o.length||s.toLowerCase()!==o)&&e(a)}):function(a){return r.getAttributeValue(a,i)!==o&&e(a)}}};var cN={},hY={},fY={},M1={};Object.defineProperty(M1,"__esModule",{value:!0});M1.parse=void 0;var __e=new Set([9,10,12,13,32]),d3=48,T_e=57;function E_e(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];var t=0,n=0,r=o(),i=a();if(t<e.length&&e.charAt(t)==="n"&&(t++,n=r*(i??1),s(),t<e.length?(r=o(),s(),i=a()):r=i=0),i===null||t<e.length)throw new Error("n-th rule couldn't be parsed ('".concat(e,"')"));return[n,r*i];function o(){return e.charAt(t)==="-"?(t++,-1):(e.charAt(t)==="+"&&t++,1)}function a(){for(var u=t,c=0;t<e.length&&e.charCodeAt(t)>=d3&&e.charCodeAt(t)<=T_e;)c=c*10+(e.charCodeAt(t)-d3),t++;return t===u?null:c}function s(){for(;t<e.length&&__e.has(e.charCodeAt(t));)t++}}M1.parse=E_e;var yp={},S_e=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yp,"__esModule",{value:!0});yp.generate=yp.compile=void 0;var m3=S_e(eh);function w_e(e){var t=e[0],n=e[1]-1;if(n<0&&t<=0)return m3.default.falseFunc;if(t===-1)return function(o){return o<=n};if(t===0)return function(o){return o===n};if(t===1)return n<0?m3.default.trueFunc:function(o){return o>=n};var r=Math.abs(t),i=(n%r+r)%r;return t>1?function(o){return o>=n&&o%r===i}:function(o){return o<=n&&o%r===i}}yp.compile=w_e;function A_e(e){var t=e[0],n=e[1]-1,r=0;if(t<0){var i=-t,o=(n%i+i)%i;return function(){var a=o+i*r++;return a>n?null:a}}return t===0?n<0?function(){return null}:function(){return r++===0?n:null}:(n<0&&(n+=t*Math.ceil(-n/t)),function(){return t*r+++n})}yp.generate=A_e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sequence=e.generate=e.compile=e.parse=void 0;var t=M1;Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}});var n=yp;Object.defineProperty(e,"compile",{enumerable:!0,get:function(){return n.compile}}),Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return n.generate}});function r(o){return(0,n.compile)((0,t.parse)(o))}e.default=r;function i(o){return(0,n.generate)((0,t.parse)(o))}e.sequence=i})(fY);(function(e){var t=Pe&&Pe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.filters=void 0;var n=t(fY),r=t(eh);function i(a,s){return function(u){var c=s.getParent(u);return c!=null&&s.isTag(c)&&a(u)}}e.filters={contains:function(a,s,u){var c=u.adapter;return function(l){return a(l)&&c.getText(l).includes(s)}},icontains:function(a,s,u){var c=u.adapter,l=s.toLowerCase();return function(f){return a(f)&&c.getText(f).toLowerCase().includes(l)}},"nth-child":function(a,s,u){var c=u.adapter,l=u.equals,f=(0,n.default)(s);return f===r.default.falseFunc?r.default.falseFunc:f===r.default.trueFunc?i(a,c):function(h){for(var p=c.getSiblings(h),d=0,m=0;m<p.length&&!l(h,p[m]);m++)c.isTag(p[m])&&d++;return f(d)&&a(h)}},"nth-last-child":function(a,s,u){var c=u.adapter,l=u.equals,f=(0,n.default)(s);return f===r.default.falseFunc?r.default.falseFunc:f===r.default.trueFunc?i(a,c):function(h){for(var p=c.getSiblings(h),d=0,m=p.length-1;m>=0&&!l(h,p[m]);m--)c.isTag(p[m])&&d++;return f(d)&&a(h)}},"nth-of-type":function(a,s,u){var c=u.adapter,l=u.equals,f=(0,n.default)(s);return f===r.default.falseFunc?r.default.falseFunc:f===r.default.trueFunc?i(a,c):function(h){for(var p=c.getSiblings(h),d=0,m=0;m<p.length;m++){var g=p[m];if(l(h,g))break;c.isTag(g)&&c.getName(g)===c.getName(h)&&d++}return f(d)&&a(h)}},"nth-last-of-type":function(a,s,u){var c=u.adapter,l=u.equals,f=(0,n.default)(s);return f===r.default.falseFunc?r.default.falseFunc:f===r.default.trueFunc?i(a,c):function(h){for(var p=c.getSiblings(h),d=0,m=p.length-1;m>=0;m--){var g=p[m];if(l(h,g))break;c.isTag(g)&&c.getName(g)===c.getName(h)&&d++}return f(d)&&a(h)}},root:function(a,s,u){var c=u.adapter;return function(l){var f=c.getParent(l);return(f==null||!c.isTag(f))&&a(l)}},scope:function(a,s,u,c){var l=u.equals;return!c||c.length===0?e.filters.root(a,s,u):c.length===1?function(f){return l(c[0],f)&&a(f)}:function(f){return c.includes(f)&&a(f)}},hover:o("isHovered"),visited:o("isVisited"),active:o("isActive")};function o(a){return function(s,u,c){var l=c.adapter,f=l[a];return typeof f!="function"?r.default.falseFunc:function(h){return f(h)&&s(h)}}}})(hY);var vp={};Object.defineProperty(vp,"__esModule",{value:!0});vp.verifyPseudoArgs=vp.pseudos=void 0;vp.pseudos={empty:function(e,t){var n=t.adapter;return!n.getChildren(e).some(function(r){return n.isTag(r)||n.getText(r)!==""})},"first-child":function(e,t){var n=t.adapter,r=t.equals;if(n.prevElementSibling)return n.prevElementSibling(e)==null;var i=n.getSiblings(e).find(function(o){return n.isTag(o)});return i!=null&&r(e,i)},"last-child":function(e,t){for(var n=t.adapter,r=t.equals,i=n.getSiblings(e),o=i.length-1;o>=0;o--){if(r(e,i[o]))return!0;if(n.isTag(i[o]))break}return!1},"first-of-type":function(e,t){for(var n=t.adapter,r=t.equals,i=n.getSiblings(e),o=n.getName(e),a=0;a<i.length;a++){var s=i[a];if(r(e,s))return!0;if(n.isTag(s)&&n.getName(s)===o)break}return!1},"last-of-type":function(e,t){for(var n=t.adapter,r=t.equals,i=n.getSiblings(e),o=n.getName(e),a=i.length-1;a>=0;a--){var s=i[a];if(r(e,s))return!0;if(n.isTag(s)&&n.getName(s)===o)break}return!1},"only-of-type":function(e,t){var n=t.adapter,r=t.equals,i=n.getName(e);return n.getSiblings(e).every(function(o){return r(e,o)||!n.isTag(o)||n.getName(o)!==i})},"only-child":function(e,t){var n=t.adapter,r=t.equals;return n.getSiblings(e).every(function(i){return r(e,i)||!n.isTag(i)})}};function O_e(e,t,n,r){if(n===null){if(e.length>r)throw new Error("Pseudo-class :".concat(t," requires an argument"))}else if(e.length===r)throw new Error("Pseudo-class :".concat(t," doesn't have any arguments"))}vp.verifyPseudoArgs=O_e;var L1={};Object.defineProperty(L1,"__esModule",{value:!0});L1.aliases=void 0;L1.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var j1={};(function(e){var t=Pe&&Pe.__spreadArray||function(c,l,f){if(f||arguments.length===2)for(var h=0,p=l.length,d;h<p;h++)(d||!(h in l))&&(d||(d=Array.prototype.slice.call(l,0,h)),d[h]=l[h]);return c.concat(d||Array.prototype.slice.call(l))},n=Pe&&Pe.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.subselects=e.getNextSiblings=e.ensureIsTag=e.PLACEHOLDER_ELEMENT=void 0;var r=n(eh),i=ud;e.PLACEHOLDER_ELEMENT={};function o(c,l){return c===r.default.falseFunc?r.default.falseFunc:function(f){return l.isTag(f)&&c(f)}}e.ensureIsTag=o;function a(c,l){var f=l.getSiblings(c);if(f.length<=1)return[];var h=f.indexOf(c);return h<0||h===f.length-1?[]:f.slice(h+1).filter(l.isTag)}e.getNextSiblings=a;function s(c){return{xmlMode:!!c.xmlMode,lowerCaseAttributeNames:!!c.lowerCaseAttributeNames,lowerCaseTags:!!c.lowerCaseTags,quirksMode:!!c.quirksMode,cacheResults:!!c.cacheResults,pseudos:c.pseudos,adapter:c.adapter,equals:c.equals}}var u=function(c,l,f,h,p){var d=p(l,s(f),h);return d===r.default.trueFunc?c:d===r.default.falseFunc?r.default.falseFunc:function(m){return d(m)&&c(m)}};e.subselects={is:u,matches:u,where:u,not:function(c,l,f,h,p){var d=p(l,s(f),h);return d===r.default.falseFunc?c:d===r.default.trueFunc?r.default.falseFunc:function(m){return!d(m)&&c(m)}},has:function(c,l,f,h,p){var d=f.adapter,m=s(f);m.relativeSelector=!0;var g=l.some(function(T){return T.some(i.isTraversal)})?[e.PLACEHOLDER_ELEMENT]:void 0,v=p(l,m,g);if(v===r.default.falseFunc)return r.default.falseFunc;var b=o(v,d);if(g&&v!==r.default.trueFunc){var y=v.shouldTestNextSiblings,_=y===void 0?!1:y;return function(T){if(!c(T))return!1;g[0]=T;var S=d.getChildren(T),E=_?t(t([],S,!0),a(T,d),!0):S;return d.existsOne(b,E)}}return function(T){return c(T)&&d.existsOne(b,d.getChildren(T))}}}})(j1);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compilePseudoSelector=e.aliases=e.pseudos=e.filters=void 0;var t=Zy,n=hY;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return n.filters}});var r=vp;Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return r.pseudos}});var i=L1;Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return i.aliases}});var o=j1;function a(s,u,c,l,f){var h,p=u.name,d=u.data;if(Array.isArray(d)){if(!(p in o.subselects))throw new Error("Unknown pseudo-class :".concat(p,"(").concat(d,")"));return o.subselects[p](s,d,c,l,f)}var m=(h=c.pseudos)===null||h===void 0?void 0:h[p],g=typeof m=="string"?m:i.aliases[p];if(typeof g=="string"){if(d!=null)throw new Error("Pseudo ".concat(p," doesn't have any arguments"));var v=(0,t.parse)(g);return o.subselects.is(s,v,c,l,f)}if(typeof m=="function")return(0,r.verifyPseudoArgs)(m,p,d,1),function(y){return m(y,d)&&s(y)};if(p in n.filters)return n.filters[p](s,d,c,l);if(p in r.pseudos){var b=r.pseudos[p];return(0,r.verifyPseudoArgs)(b,p,d,2),function(y){return b(y,c,d)&&s(y)}}throw new Error("Unknown pseudo-class :".concat(p))}e.compilePseudoSelector=a})(cN);Object.defineProperty(R1,"__esModule",{value:!0});R1.compileGeneralSelector=void 0;var k_e=N1,x_e=cN,Po=Zy;function BA(e,t){var n=t.getParent(e);return n&&t.isTag(n)?n:null}function I_e(e,t,n,r,i){var o=n.adapter,a=n.equals;switch(t.type){case Po.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case Po.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case Po.SelectorType.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),k_e.attributeRules[t.action](e,t,n)}case Po.SelectorType.Pseudo:return(0,x_e.compilePseudoSelector)(e,t,n,r,i);case Po.SelectorType.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");var s=t.name;return(!n.xmlMode||n.lowerCaseTags)&&(s=s.toLowerCase()),function(c){return o.getName(c)===s&&e(c)}}case Po.SelectorType.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(c){for(var l=c;l=BA(l,o);)if(e(l))return!0;return!1};var u=new WeakSet;return function(c){for(var l=c;l=BA(l,o);)if(!u.has(l)){if(o.isTag(l)&&e(l))return!0;u.add(l)}return!1}}case"_flexibleDescendant":return function(c){var l=c;do if(e(l))return!0;while(l=BA(l,o));return!1};case Po.SelectorType.Parent:return function(c){return o.getChildren(c).some(function(l){return o.isTag(l)&&e(l)})};case Po.SelectorType.Child:return function(c){var l=o.getParent(c);return l!=null&&o.isTag(l)&&e(l)};case Po.SelectorType.Sibling:return function(c){for(var l=o.getSiblings(c),f=0;f<l.length;f++){var h=l[f];if(a(c,h))break;if(o.isTag(h)&&e(h))return!0}return!1};case Po.SelectorType.Adjacent:return o.prevElementSibling?function(c){var l=o.prevElementSibling(c);return l!=null&&e(l)}:function(c){for(var l=o.getSiblings(c),f,h=0;h<l.length;h++){var p=l[h];if(a(c,p))break;o.isTag(p)&&(f=p)}return!!f&&e(f)};case Po.SelectorType.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}R1.compileGeneralSelector=I_e;var C_e=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),P_e=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),D_e=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&C_e(t,e,n);return P_e(t,e),t},R_e=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.compileToken=Gl.compileUnsafe=Gl.compile=void 0;var vs=Zy,Nl=R_e(eh),Mx=D_e(ud),N_e=R1,pY=j1;function M_e(e,t,n){var r=dY(e,t,n);return(0,pY.ensureIsTag)(r,t.adapter)}Gl.compile=M_e;function dY(e,t,n){var r=typeof e=="string"?(0,vs.parse)(e):e;return hN(r,t,n)}Gl.compileUnsafe=dY;function mY(e){return e.type===vs.SelectorType.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(function(t){return t.some(mY)}))}var L_e={type:vs.SelectorType.Descendant},j_e={type:"_flexibleDescendant"},B_e={type:vs.SelectorType.Pseudo,name:"scope",data:null};function F_e(e,t,n){for(var r=t.adapter,i=!!(n!=null&&n.every(function(u){var c=r.isTag(u)&&r.getParent(u);return u===pY.PLACEHOLDER_ELEMENT||c&&r.isTag(c)})),o=0,a=e;o<a.length;o++){var s=a[o];if(!(s.length>0&&(0,Mx.isTraversal)(s[0])&&s[0].type!==vs.SelectorType.Descendant))if(i&&!s.some(mY))s.unshift(L_e);else continue;s.unshift(B_e)}}function hN(e,t,n){var r;e.forEach(Mx.default),n=(r=t.context)!==null&&r!==void 0?r:n;var i=Array.isArray(n),o=n&&(Array.isArray(n)?n:[n]);if(t.relativeSelector!==!1)F_e(e,t,o);else if(e.some(function(u){return u.length>0&&(0,Mx.isTraversal)(u[0])}))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");var a=!1,s=e.map(function(u){if(u.length>=2){var c=u[0],l=u[1];c.type!==vs.SelectorType.Pseudo||c.name!=="scope"||(i&&l.type===vs.SelectorType.Descendant?u[1]=j_e:(l.type===vs.SelectorType.Adjacent||l.type===vs.SelectorType.Sibling)&&(a=!0))}return G_e(u,t,o)}).reduce(H_e,Nl.default.falseFunc);return s.shouldTestNextSiblings=a,s}Gl.compileToken=hN;function G_e(e,t,n){var r;return e.reduce(function(i,o){return i===Nl.default.falseFunc?Nl.default.falseFunc:(0,N_e.compileGeneralSelector)(i,o,t,n,hN)},(r=t.rootFunc)!==null&&r!==void 0?r:Nl.default.trueFunc)}function H_e(e,t){return t===Nl.default.falseFunc||e===Nl.default.trueFunc?e:e===Nl.default.falseFunc||t===Nl.default.trueFunc?t:function(n){return e(n)||t(n)}}(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(b,y,_,T){T===void 0&&(T=_);var S=Object.getOwnPropertyDescriptor(y,_);(!S||("get"in S?!y.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return y[_]}}),Object.defineProperty(b,T,S)}:function(b,y,_,T){T===void 0&&(T=_),b[T]=y[_]}),n=Pe&&Pe.__setModuleDefault||(Object.create?function(b,y){Object.defineProperty(b,"default",{enumerable:!0,value:y})}:function(b,y){b.default=y}),r=Pe&&Pe.__importStar||function(b){if(b&&b.__esModule)return b;var y={};if(b!=null)for(var _ in b)_!=="default"&&Object.prototype.hasOwnProperty.call(b,_)&&t(y,b,_);return n(y,b),y},i=Pe&&Pe.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.aliases=e.pseudos=e.filters=e.is=e.selectOne=e.selectAll=e.prepareContext=e._compileToken=e._compileUnsafe=e.compile=void 0;var o=r($o),a=i(eh),s=Gl,u=j1,c=function(b,y){return b===y},l={adapter:o,equals:c};function f(b){var y,_,T,S,E=b??l;return(y=E.adapter)!==null&&y!==void 0||(E.adapter=o),(_=E.equals)!==null&&_!==void 0||(E.equals=(S=(T=E.adapter)===null||T===void 0?void 0:T.equals)!==null&&S!==void 0?S:c),E}function h(b){return function(y,_,T){var S=f(_);return b(y,S,T)}}e.compile=h(s.compile),e._compileUnsafe=h(s.compileUnsafe),e._compileToken=h(s.compileToken);function p(b){return function(y,_,T){var S=f(T);typeof y!="function"&&(y=(0,s.compileUnsafe)(y,S,_));var E=d(_,S.adapter,y.shouldTestNextSiblings);return b(y,E,S)}}function d(b,y,_){return _===void 0&&(_=!1),_&&(b=m(b,y)),Array.isArray(b)?y.removeSubsets(b):y.getChildren(b)}e.prepareContext=d;function m(b,y){for(var _=Array.isArray(b)?b.slice(0):[b],T=_.length,S=0;S<T;S++){var E=(0,u.getNextSiblings)(_[S],y);_.push.apply(_,E)}return _}e.selectAll=p(function(b,y,_){return b===a.default.falseFunc||!y||y.length===0?[]:_.adapter.findAll(b,y)}),e.selectOne=p(function(b,y,_){return b===a.default.falseFunc||!y||y.length===0?null:_.adapter.findOne(b,y)});function g(b,y,_){var T=f(_);return(typeof y=="function"?y:(0,s.compile)(y,T))(b)}e.is=g,e.default=e.selectAll;var v=cN;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return v.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return v.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return v.aliases}})})(Nx);var bp={},fN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLimit=e.isFilter=e.filterNames=void 0,e.filterNames=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function t(r){return r.type!=="pseudo"?!1:e.filterNames.has(r.name)?!0:r.name==="not"&&Array.isArray(r.data)?r.data.some(function(i){return i.some(t)}):!1}e.isFilter=t;function n(r,i,o){var a=i!=null?parseInt(i,10):NaN;switch(r){case"first":return 1;case"nth":case"eq":return isFinite(a)?a>=0?a+1:1/0:0;case"lt":return isFinite(a)?a>=0?Math.min(a,o):1/0:0;case"gt":return isFinite(a)?1/0:0;case"odd":return 2*o;case"even":return 2*o-1;case"last":case"not":return 1/0}}e.getLimit=n})(fN);Object.defineProperty(bp,"__esModule",{value:!0});bp.groupSelectors=bp.getDocumentRoot=void 0;var U_e=fN;function z_e(e){for(;e.parent;)e=e.parent;return e}bp.getDocumentRoot=z_e;function V_e(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var o=i[r];o.some(U_e.isFilter)?t.push(o):n.push(o)}return[n,t]}bp.groupSelectors=V_e;(function(e){var t=Pe&&Pe.__assign||function(){return t=Object.assign||function(C){for(var w,B=1,L=arguments.length;B<L;B++){w=arguments[B];for(var k in w)Object.prototype.hasOwnProperty.call(w,k)&&(C[k]=w[k])}return C},t.apply(this,arguments)},n=Pe&&Pe.__createBinding||(Object.create?function(C,w,B,L){L===void 0&&(L=B);var k=Object.getOwnPropertyDescriptor(w,B);(!k||("get"in k?!w.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return w[B]}}),Object.defineProperty(C,L,k)}:function(C,w,B,L){L===void 0&&(L=B),C[L]=w[B]}),r=Pe&&Pe.__setModuleDefault||(Object.create?function(C,w){Object.defineProperty(C,"default",{enumerable:!0,value:w})}:function(C,w){C.default=w}),i=Pe&&Pe.__importStar||function(C){if(C&&C.__esModule)return C;var w={};if(C!=null)for(var B in C)B!=="default"&&Object.prototype.hasOwnProperty.call(C,B)&&n(w,C,B);return r(w,C),w},o=Pe&&Pe.__spreadArray||function(C,w,B){if(B||arguments.length===2)for(var L=0,k=w.length,R;L<k;L++)(R||!(L in w))&&(R||(R=Array.prototype.slice.call(w,0,L)),R[L]=w[L]);return C.concat(R||Array.prototype.slice.call(w))};Object.defineProperty(e,"__esModule",{value:!0}),e.select=e.filter=e.some=e.is=e.aliases=e.pseudos=e.filters=void 0;var a=Zy,s=Nx,u=i($o),c=i(eh),l=bp,f=fN,h=Nx;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return h.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return h.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return h.aliases}});var p={type:a.SelectorType.Universal,namespace:null},d={type:a.SelectorType.Pseudo,name:"scope",data:null};function m(C,w,B){return B===void 0&&(B={}),g([C],w,B)}e.is=m;function g(C,w,B){if(B===void 0&&(B={}),typeof w=="function")return C.some(w);var L=(0,l.groupSelectors)((0,a.parse)(w)),k=L[0],R=L[1];return k.length>0&&C.some((0,s._compileToken)(k,B))||R.some(function(F){return _(F,C,B).length>0})}e.some=g;function v(C,w,B,L){var k=typeof B=="string"?parseInt(B,10):NaN;switch(C){case"first":case"lt":return w;case"last":return w.length>0?[w[w.length-1]]:w;case"nth":case"eq":return isFinite(k)&&Math.abs(k)<w.length?[k<0?w[w.length+k]:w[k]]:[];case"gt":return isFinite(k)?w.slice(k+1):[];case"even":return w.filter(function(F,U){return U%2===0});case"odd":return w.filter(function(F,U){return U%2===1});case"not":{var R=new Set(y(B,w,L));return w.filter(function(F){return!R.has(F)})}}}function b(C,w,B){return B===void 0&&(B={}),y((0,a.parse)(C),w,B)}e.filter=b;function y(C,w,B){if(w.length===0)return[];var L=(0,l.groupSelectors)(C),k=L[0],R=L[1],F;if(k.length){var U=x(w,k,B);if(R.length===0)return U;U.length&&(F=new Set(U))}for(var $=0;$<R.length&&(F==null?void 0:F.size)!==w.length;$++){var ie=R[$],oe=F?w.filter(function(ae){return u.isTag(ae)&&!F.has(ae)}):w;if(oe.length===0)break;var U=_(ie,w,B);if(U.length)if(F)U.forEach(function(ae){return F.add(ae)});else{if($===R.length-1)return U;F=new Set(U)}}return typeof F<"u"?F.size===w.length?w:w.filter(function(me){return F.has(me)}):[]}function _(C,w,B){var L;if(C.some(a.isTraversal)){var k=(L=B.root)!==null&&L!==void 0?L:(0,l.getDocumentRoot)(w[0]),R=t(t({},B),{context:w,relativeSelector:!1});return C.push(d),S(k,C,R,!0,w.length)}return S(w,C,B,!1,w.length)}function T(C,w,B,L){if(B===void 0&&(B={}),L===void 0&&(L=1/0),typeof C=="function")return I(w,C);var k=(0,l.groupSelectors)((0,a.parse)(C)),R=k[0],F=k[1],U=F.map(function($){return S(w,$,B,!0,L)});return R.length&&U.push(E(w,R,B,L)),U.length===0?[]:U.length===1?U[0]:u.uniqueSort(U.reduce(function($,ie){return o(o([],$,!0),ie,!0)}))}e.select=T;function S(C,w,B,L,k){var R=w.findIndex(f.isFilter),F=w.slice(0,R),U=w[R],$=w.length-1===R?k:1/0,ie=(0,f.getLimit)(U.name,U.data,$);if(ie===0)return[];var oe=F.length===0&&!Array.isArray(C)?u.getChildren(C).filter(u.isTag):F.length===0?(Array.isArray(C)?C:[C]).filter(u.isTag):L||F.some(a.isTraversal)?E(C,[F],B,ie):x(C,[F],B),me=oe.slice(0,ie),ae=v(U.name,me,U.data,B);if(ae.length===0||w.length===R+1)return ae;var X=w.slice(R+1),ee=X.some(a.isTraversal);if(ee){if((0,a.isTraversal)(X[0])){var se=X[0].type;(se===a.SelectorType.Sibling||se===a.SelectorType.Adjacent)&&(ae=(0,s.prepareContext)(ae,u,!0)),X.unshift(p)}B=t(t({},B),{relativeSelector:!1,rootFunc:function(_e){return ae.includes(_e)}})}else B.rootFunc&&B.rootFunc!==c.trueFunc&&(B=t(t({},B),{rootFunc:c.trueFunc}));return X.some(f.isFilter)?S(ae,X,B,!1,k):ee?E(ae,[X],B,k):x(ae,[X],B)}function E(C,w,B,L){var k=(0,s._compileToken)(w,B,C);return I(C,k,L)}function I(C,w,B){B===void 0&&(B=1/0);var L=(0,s.prepareContext)(C,u,w.shouldTestNextSiblings);return u.find(function(k){return u.isTag(k)&&w(k)},L,!0,B)}function x(C,w,B){var L=(Array.isArray(C)?C:[C]).filter(u.isTag);if(L.length===0)return L;var k=(0,s._compileToken)(w,B);return k===c.trueFunc?L:L.filter(k)}})(rY);var Y_e=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),X_e=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),W_e=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Y_e(t,e,n);return X_e(t,e),t},Lx=Pe&&Pe.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(nt,"__esModule",{value:!0});nt.addBack=nt.add=nt.end=nt.slice=nt.index=nt.toArray=nt.get=nt.eq=nt.last=nt.first=nt.has=nt.not=nt.is=nt.filterArray=nt.filter=nt.map=nt.each=nt.contents=nt.children=nt.siblings=nt.prevUntil=nt.prevAll=nt.prev=nt.nextUntil=nt.nextAll=nt.next=nt.closest=nt.parentsUntil=nt.parents=nt.parent=nt.find=void 0;var B1=ti,cd=W_e(rY),Jo=ou,q_e=tn,Ha=$o,$_e=/^\s*[~+]/;function K_e(e){var t;if(!e)return this._make([]);var n=this.toArray();if(typeof e!="string"){var r=(0,Jo.isCheerio)(e)?e.toArray():[e];return this._make(r.filter(function(a){return n.some(function(s){return(0,q_e.contains)(s,a)})}))}var i=$_e.test(e)?n:this.children().toArray(),o={context:n,root:(t=this._root)===null||t===void 0?void 0:t[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(cd.select(e,i,o))}nt.find=K_e;function pN(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(i){var o,a=e(t,this);return i&&(a=gN(a,i,this.options.xmlMode,(o=this._root)===null||o===void 0?void 0:o[0])),this._make(this.length>1&&a.length>1?n.reduce(function(s,u){return u(s)},a):a)}}}var Jy=pN(function(e,t){for(var n,r=[],i=0;i<t.length;i++){var o=e(t[i]);r.push(o)}return(n=new Array).concat.apply(n,r)}),dN=pN(function(e,t){for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i!==null&&n.push(i)}return n});function mN(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=null,i=pN(function(o,a){var s=[];return(0,Jo.domEach)(a,function(u){for(var c;(c=o(u))&&!(r!=null&&r(c,s.length));u=c)s.push(c)}),s}).apply(void 0,Lx([e],t,!1));return function(o,a){var s=this;r=typeof o=="string"?function(c){return cd.is(c,o,s.options)}:o?ev(o):null;var u=i.call(this,a);return r=null,u}}function hd(e){return Array.from(new Set(e))}nt.parent=dN(function(e){var t=e.parent;return t&&!(0,B1.isDocument)(t)?t:null},hd);nt.parents=Jy(function(e){for(var t=[];e.parent&&!(0,B1.isDocument)(e.parent);)t.push(e.parent),e=e.parent;return t},Ha.uniqueSort,function(e){return e.reverse()});nt.parentsUntil=mN(function(e){var t=e.parent;return t&&!(0,B1.isDocument)(t)?t:null},Ha.uniqueSort,function(e){return e.reverse()});function Q_e(e){var t,n=[];if(!e)return this._make(n);var r={xmlMode:this.options.xmlMode,root:(t=this._root)===null||t===void 0?void 0:t[0]},i=typeof e=="string"?function(o){return cd.is(o,e,r)}:ev(e);return(0,Jo.domEach)(this,function(o){for(;o&&(0,Jo.isTag)(o);){if(i(o,0)){n.includes(o)||n.push(o);break}o=o.parent}}),this._make(n)}nt.closest=Q_e;nt.next=dN(function(e){return(0,Ha.nextElementSibling)(e)});nt.nextAll=Jy(function(e){for(var t=[];e.next;)e=e.next,(0,Jo.isTag)(e)&&t.push(e);return t},hd);nt.nextUntil=mN(function(e){return(0,Ha.nextElementSibling)(e)},hd);nt.prev=dN(function(e){return(0,Ha.prevElementSibling)(e)});nt.prevAll=Jy(function(e){for(var t=[];e.prev;)e=e.prev,(0,Jo.isTag)(e)&&t.push(e);return t},hd);nt.prevUntil=mN(function(e){return(0,Ha.prevElementSibling)(e)},hd);nt.siblings=Jy(function(e){return(0,Ha.getSiblings)(e).filter(function(t){return(0,Jo.isTag)(t)&&t!==e})},Ha.uniqueSort);nt.children=Jy(function(e){return(0,Ha.getChildren)(e).filter(Jo.isTag)},hd);function Z_e(){var e=this.toArray().reduce(function(t,n){return(0,B1.hasChildren)(n)?t.concat(n.children):t},[]);return this._make(e)}nt.contents=Z_e;function J_e(e){for(var t=0,n=this.length;t<n&&e.call(this[t],t,this[t])!==!1;)++t;return this}nt.each=J_e;function eTe(e){for(var t=[],n=0;n<this.length;n++){var r=this[n],i=e.call(r,n,r);i!=null&&(t=t.concat(i))}return this._make(t)}nt.map=eTe;function ev(e){return typeof e=="function"?function(t,n){return e.call(t,n,t)}:(0,Jo.isCheerio)(e)?function(t){return Array.prototype.includes.call(e,t)}:function(t){return e===t}}function tTe(e){var t;return this._make(gN(this.toArray(),e,this.options.xmlMode,(t=this._root)===null||t===void 0?void 0:t[0]))}nt.filter=tTe;function gN(e,t,n,r){return typeof t=="string"?cd.filter(t,e,{xmlMode:n,root:r}):e.filter(ev(t))}nt.filterArray=gN;function rTe(e){var t=this.toArray();return typeof e=="string"?cd.some(t.filter(Jo.isTag),e,this.options):e?t.some(ev(e)):!1}nt.is=rTe;function nTe(e){var t=this.toArray();if(typeof e=="string"){var n=new Set(cd.filter(e,t,this.options));t=t.filter(function(i){return!n.has(i)})}else{var r=ev(e);t=t.filter(function(i,o){return!r(i,o)})}return this._make(t)}nt.not=nTe;function iTe(e){var t=this;return this.filter(typeof e=="string"?":has(".concat(e,")"):function(n,r){return t._make(r).find(e).length>0})}nt.has=iTe;function oTe(){return this.length>1?this._make(this[0]):this}nt.first=oTe;function aTe(){return this.length>0?this._make(this[this.length-1]):this}nt.last=aTe;function sTe(e){var t;return e=+e,e===0&&this.length<=1?this:(e<0&&(e=this.length+e),this._make((t=this[e])!==null&&t!==void 0?t:[]))}nt.eq=sTe;function lTe(e){return e==null?this.toArray():this[e<0?this.length+e:e]}nt.get=lTe;function uTe(){return Array.prototype.slice.call(this)}nt.toArray=uTe;function cTe(e){var t,n;return e==null?(t=this.parent().children(),n=this[0]):typeof e=="string"?(t=this._make(e),n=this[0]):(t=this,n=(0,Jo.isCheerio)(e)?e[0]:e),Array.prototype.indexOf.call(t,n)}nt.index=cTe;function hTe(e,t){return this._make(Array.prototype.slice.call(this,e,t))}nt.slice=hTe;function fTe(){var e;return(e=this.prevObject)!==null&&e!==void 0?e:this._make([])}nt.end=fTe;function pTe(e,t){var n=this._make(e,t),r=(0,Ha.uniqueSort)(Lx(Lx([],this.get(),!0),n.get(),!0));return this._make(r)}nt.add=pTe;function dTe(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this}nt.addBack=dTe;var Pt={},bc={};Object.defineProperty(bc,"__esModule",{value:!0});bc.update=bc.getParse=void 0;var mTe=$o,g3=ti;function gTe(e){return function(t,n,r,i){if(typeof Buffer<"u"&&Buffer.isBuffer(t)&&(t=t.toString()),typeof t=="string")return e(t,n,r,i);var o=t;if(!Array.isArray(o)&&(0,g3.isDocument)(o))return o;var a=new g3.Document([]);return gY(o,a),a}}bc.getParse=gTe;function gY(e,t){var n=Array.isArray(e)?e:[e];t?t.children=n:t=null;for(var r=0;r<n.length;r++){var i=n[r];i.parent&&i.parent.children!==n&&(0,mTe.removeElement)(i),t?(i.prev=n[r-1]||null,i.next=n[r+1]||null):i.prev=i.next=null,i.parent=t}return t}bc.update=gY;var yTe=Pe&&Pe.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.clone=Pt.text=Pt.toString=Pt.html=Pt.empty=Pt.replaceWith=Pt.remove=Pt.insertBefore=Pt.before=Pt.insertAfter=Pt.after=Pt.wrapAll=Pt.unwrap=Pt.wrapInner=Pt.wrap=Pt.prepend=Pt.append=Pt.prependTo=Pt.appendTo=Pt._makeDomArray=void 0;var Ua=ti,_p=bc,y3=tn,mn=ou,vTe=$o;function bTe(e,t){var n=this;return e==null?[]:(0,mn.isCheerio)(e)?t?(0,mn.cloneDom)(e.get()):e.get():Array.isArray(e)?e.reduce(function(r,i){return r.concat(n._makeDomArray(i,t))},[]):typeof e=="string"?this._parse(e,this.options,!1,null).children:t?(0,mn.cloneDom)([e]):[e]}Pt._makeDomArray=bTe;function yY(e){return function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=this.length-1;return(0,mn.domEach)(this,function(o,a){if((0,Ua.hasChildren)(o)){var s=typeof n[0]=="function"?n[0].call(o,a,t._render(o.children)):n,u=t._makeDomArray(s,a<i);e(u,o.children,o)}})}}function au(e,t,n,r,i){for(var o,a,s=yTe([t,n],r,!0),u=t===0?null:e[t-1],c=t+n>=e.length?null:e[t+n],l=0;l<r.length;++l){var f=r[l],h=f.parent;if(h){var p=h.children,d=p.indexOf(f);d>-1&&(h.children.splice(d,1),i===h&&t>d&&s[0]--)}f.parent=i,f.prev&&(f.prev.next=(o=f.next)!==null&&o!==void 0?o:null),f.next&&(f.next.prev=(a=f.prev)!==null&&a!==void 0?a:null),f.prev=l===0?u:r[l-1],f.next=l===r.length-1?c:r[l+1]}return u&&(u.next=r[0]),c&&(c.prev=r[r.length-1]),e.splice.apply(e,s)}function _Te(e){var t=(0,mn.isCheerio)(e)?e:this._make(e);return t.append(this),this}Pt.appendTo=_Te;function TTe(e){var t=(0,mn.isCheerio)(e)?e:this._make(e);return t.prepend(this),this}Pt.prependTo=TTe;Pt.append=yY(function(e,t,n){au(t,t.length,0,e,n)});Pt.prepend=yY(function(e,t,n){au(t,0,0,e,n)});function vY(e){return function(t){for(var n=this.length-1,r=this.parents().last(),i=0;i<this.length;i++){var o=this[i],a=typeof t=="function"?t.call(o,i,o):typeof t=="string"&&!(0,mn.isHtml)(t)?r.find(t).clone():t,s=this._makeDomArray(a,i<n)[0];if(!(!s||!(0,Ua.hasChildren)(s))){for(var u=s,c=0;c<u.children.length;){var l=u.children[c];(0,mn.isTag)(l)?(u=l,c=0):c++}e(o,u,[s])}}return this}}Pt.wrap=vY(function(e,t,n){var r=e.parent;if(r){var i=r.children,o=i.indexOf(e);(0,_p.update)([e],t),au(i,o,0,n,r)}});Pt.wrapInner=vY(function(e,t,n){(0,Ua.hasChildren)(e)&&((0,_p.update)(e.children,t),(0,_p.update)(n,e))});function ETe(e){var t=this;return this.parent(e).not("body").each(function(n,r){t._make(r).replaceWith(r.children)}),this}Pt.unwrap=ETe;function STe(e){var t=this[0];if(t){for(var n=this._make(typeof e=="function"?e.call(t,0,t):e).insertBefore(t),r=void 0,i=0;i<n.length;i++)n[i].type==="tag"&&(r=n[i]);for(var o=0;r&&o<r.children.length;){var a=r.children[o];a.type==="tag"?(r=a,o=0):o++}r&&this._make(r).append(this)}return this}Pt.wrapAll=STe;function wTe(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.length-1;return(0,mn.domEach)(this,function(i,o){var a=i.parent;if(!(!(0,Ua.hasChildren)(i)||!a)){var s=a.children,u=s.indexOf(i);if(!(u<0)){var c=typeof t[0]=="function"?t[0].call(i,o,e._render(i.children)):t,l=e._makeDomArray(c,o<r);au(s,u+1,0,l,a)}}})}Pt.after=wTe;function ATe(e){var t=this;typeof e=="string"&&(e=this._make(e)),this.remove();var n=[];return this._makeDomArray(e).forEach(function(r){var i=t.clone().toArray(),o=r.parent;if(o){var a=o.children,s=a.indexOf(r);s<0||(au(a,s+1,0,i,o),n.push.apply(n,i))}}),this._make(n)}Pt.insertAfter=ATe;function OTe(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.length-1;return(0,mn.domEach)(this,function(i,o){var a=i.parent;if(!(!(0,Ua.hasChildren)(i)||!a)){var s=a.children,u=s.indexOf(i);if(!(u<0)){var c=typeof t[0]=="function"?t[0].call(i,o,e._render(i.children)):t,l=e._makeDomArray(c,o<r);au(s,u,0,l,a)}}})}Pt.before=OTe;function kTe(e){var t=this,n=this._make(e);this.remove();var r=[];return(0,mn.domEach)(n,function(i){var o=t.clone().toArray(),a=i.parent;if(a){var s=a.children,u=s.indexOf(i);u<0||(au(s,u,0,o,a),r.push.apply(r,o))}}),this._make(r)}Pt.insertBefore=kTe;function xTe(e){var t=e?this.filter(e):this;return(0,mn.domEach)(t,function(n){(0,vTe.removeElement)(n),n.prev=n.next=n.parent=null}),this}Pt.remove=xTe;function ITe(e){var t=this;return(0,mn.domEach)(this,function(n,r){var i=n.parent;if(i){var o=i.children,a=typeof e=="function"?e.call(n,r,n):e,s=t._makeDomArray(a);(0,_p.update)(s,null);var u=o.indexOf(n);au(o,u,1,s,i),s.includes(n)||(n.parent=n.prev=n.next=null)}})}Pt.replaceWith=ITe;function CTe(){return(0,mn.domEach)(this,function(e){(0,Ua.hasChildren)(e)&&(e.children.forEach(function(t){t.next=t.prev=t.parent=null}),e.children.length=0)})}Pt.empty=CTe;function PTe(e){var t=this;if(e===void 0){var n=this[0];return!n||!(0,Ua.hasChildren)(n)?null:this._render(n.children)}return(0,mn.domEach)(this,function(r){if((0,Ua.hasChildren)(r)){r.children.forEach(function(o){o.next=o.prev=o.parent=null});var i=(0,mn.isCheerio)(e)?e.toArray():t._parse("".concat(e),t.options,!1,r).children;(0,_p.update)(i,r)}})}Pt.html=PTe;function DTe(){return this._render(this)}Pt.toString=DTe;function RTe(e){var t=this;return e===void 0?(0,y3.text)(this):typeof e=="function"?(0,mn.domEach)(this,function(n,r){return t._make(n).text(e.call(n,r,(0,y3.text)([n])))}):(0,mn.domEach)(this,function(n){if((0,Ua.hasChildren)(n)){n.children.forEach(function(i){i.next=i.prev=i.parent=null});var r=new Ua.Text("".concat(e));(0,_p.update)(r,n)}})}Pt.text=RTe;function NTe(){return this._make((0,mn.cloneDom)(this.get()))}Pt.clone=NTe;var F1={};Object.defineProperty(F1,"__esModule",{value:!0});F1.css=void 0;var jx=ou;function MTe(e,t){if(e!=null&&t!=null||typeof e=="object"&&!Array.isArray(e))return(0,jx.domEach)(this,function(n,r){(0,jx.isTag)(n)&&bY(n,e,t,r)});if(this.length!==0)return _Y(this[0],e)}F1.css=MTe;function bY(e,t,n,r){if(typeof t=="string"){var i=_Y(e),o=typeof n=="function"?n.call(e,r,i[t]):n;o===""?delete i[t]:o!=null&&(i[t]=o),e.attribs.style=LTe(i)}else typeof t=="object"&&Object.keys(t).forEach(function(a,s){bY(e,a,t[a],s)})}function _Y(e,t){if(!(!e||!(0,jx.isTag)(e))){var n=jTe(e.attribs.style);if(typeof t=="string")return n[t];if(Array.isArray(t)){var r={};return t.forEach(function(i){n[i]!=null&&(r[i]=n[i])}),r}return n}}function LTe(e){return Object.keys(e).reduce(function(t,n){return"".concat(t).concat(t?" ":"").concat(n,": ").concat(e[n],";")},"")}function jTe(e){if(e=(e||"").trim(),!e)return{};for(var t={},n,r=0,i=e.split(";");r<i.length;r++){var o=i[r],a=o.indexOf(":");if(a<1||a===o.length-1){var s=o.trimEnd();s.length>0&&n!==void 0&&(t[n]+=";".concat(s))}else n=o.slice(0,a).trim(),t[n]=o.slice(a+1).trim()}return t}var Tp={};Object.defineProperty(Tp,"__esModule",{value:!0});Tp.serializeArray=Tp.serialize=void 0;var BTe=ou,v3="input,select,textarea,keygen",FTe=/%20/g,b3=/\r?\n/g;function GTe(){var e=this.serializeArray(),t=e.map(function(n){return"".concat(encodeURIComponent(n.name),"=").concat(encodeURIComponent(n.value))});return t.join("&").replace(FTe,"+")}Tp.serialize=GTe;function HTe(){var e=this;return this.map(function(t,n){var r=e._make(n);return(0,BTe.isTag)(n)&&n.name==="form"?r.find(v3).toArray():r.filter(v3).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map(function(t,n){var r,i=e._make(n),o=i.attr("name"),a=(r=i.val())!==null&&r!==void 0?r:"";return Array.isArray(a)?a.map(function(s){return{name:o,value:s.replace(b3,`\r
`)}}):{name:o,value:a.replace(b3,`\r
`)}}).toArray()}Tp.serializeArray=HTe;var UTe=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),zTe=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),tv=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&UTe(t,e,n);return zTe(t,e),t};Object.defineProperty(D1,"__esModule",{value:!0});D1.Cheerio=void 0;var VTe=tv(rn),YTe=tv(nt),XTe=tv(Pt),WTe=tv(F1),qTe=tv(Tp),rv=function(){function e(t,n,r){if(this.length=0,this.options=r,this._root=n,t){for(var i=0;i<t.length;i++)this[i]=t[i];this.length=t.length}}return e}();D1.Cheerio=rv;rv.prototype.cheerio="[cheerio object]";rv.prototype.splice=Array.prototype.splice;rv.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];Object.assign(rv.prototype,VTe,YTe,XTe,WTe,qTe);var $Te=Pe&&Pe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mf=Pe&&Pe.__assign||function(){return mf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},mf.apply(this,arguments)},KTe=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),QTe=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),TY=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&KTe(t,e,n);return QTe(t,e),t};Object.defineProperty(A1,"__esModule",{value:!0});A1.getLoad=void 0;var FA=TY(ad),ZTe=TY(tn),JTe=D1,Qd=ou;function eEe(e,t){return function n(r,i,o){if(o===void 0&&(o=!0),r==null)throw new Error("cheerio.load() expects a string");var a=mf(mf({},FA.default),(0,FA.flatten)(i)),s=e(r,a,o,null),u=function(l){$Te(f,l);function f(){return l!==null&&l.apply(this,arguments)||this}return f.prototype._make=function(h,p){var d=c(h,p);return d.prevObject=this,d},f.prototype._parse=function(h,p,d,m){return e(h,p,d,m)},f.prototype._render=function(h){return t(h,this.options)},f}(JTe.Cheerio);function c(l,f,h,p){if(h===void 0&&(h=s),l&&(0,Qd.isCheerio)(l))return l;var d=mf(mf({},a),(0,FA.flatten)(p)),m=typeof h=="string"?[e(h,d,!1,null)]:"length"in h?h:[h],g=(0,Qd.isCheerio)(m)?m:new u(m,null,d);if(g._root=g,!l)return new u(void 0,g,d);var v=typeof l=="string"&&(0,Qd.isHtml)(l)?e(l,d,!1,null).children:tEe(l)?[l]:Array.isArray(l)?l:void 0,b=new u(v,g,d);if(v)return b;if(typeof l!="string")throw new Error("Unexpected type of selector");var y=l,_=f?typeof f=="string"?(0,Qd.isHtml)(f)?new u([e(f,d,!1,null)],g,d):(y="".concat(f," ").concat(y),g):(0,Qd.isCheerio)(f)?f:new u(Array.isArray(f)?f:[f],g,d):g;return _?_.find(y):b}return Object.assign(c,ZTe,{load:n,_root:s,_options:a,fn:u.prototype,prototype:u.prototype}),c}}A1.getLoad=eEe;function tEe(e){return!!e.name||e.type==="root"||e.type==="text"||e.type==="comment"}var Ep={},EY={},ay={},_c={},G1={},H1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefinedCodePoint=e.isControlCodePoint=e.getSurrogatePairCodePoint=e.isSurrogatePair=e.isSurrogate=e.SEQUENCES=e.CODE_POINTS=e.REPLACEMENT_CHARACTER=void 0;const t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);e.REPLACEMENT_CHARACTER="�",function(s){s[s.EOF=-1]="EOF",s[s.NULL=0]="NULL",s[s.TABULATION=9]="TABULATION",s[s.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",s[s.LINE_FEED=10]="LINE_FEED",s[s.FORM_FEED=12]="FORM_FEED",s[s.SPACE=32]="SPACE",s[s.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",s[s.QUOTATION_MARK=34]="QUOTATION_MARK",s[s.NUMBER_SIGN=35]="NUMBER_SIGN",s[s.AMPERSAND=38]="AMPERSAND",s[s.APOSTROPHE=39]="APOSTROPHE",s[s.HYPHEN_MINUS=45]="HYPHEN_MINUS",s[s.SOLIDUS=47]="SOLIDUS",s[s.DIGIT_0=48]="DIGIT_0",s[s.DIGIT_9=57]="DIGIT_9",s[s.SEMICOLON=59]="SEMICOLON",s[s.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",s[s.EQUALS_SIGN=61]="EQUALS_SIGN",s[s.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",s[s.QUESTION_MARK=63]="QUESTION_MARK",s[s.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",s[s.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",s[s.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",s[s.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",s[s.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",s[s.GRAVE_ACCENT=96]="GRAVE_ACCENT",s[s.LATIN_SMALL_A=97]="LATIN_SMALL_A",s[s.LATIN_SMALL_F=102]="LATIN_SMALL_F",s[s.LATIN_SMALL_X=120]="LATIN_SMALL_X",s[s.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",s[s.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"}(e.CODE_POINTS||(e.CODE_POINTS={})),e.SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function n(s){return s>=55296&&s<=57343}e.isSurrogate=n;function r(s){return s>=56320&&s<=57343}e.isSurrogatePair=r;function i(s,u){return(s-55296)*1024+9216+u}e.getSurrogatePairCodePoint=i;function o(s){return s!==32&&s!==10&&s!==13&&s!==9&&s!==12&&s>=1&&s<=31||s>=127&&s<=159}e.isControlCodePoint=o;function a(s){return s>=64976&&s<=65007||t.has(s)}e.isUndefinedCodePoint=a})(H1);var nv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERR=void 0,function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(e.ERR||(e.ERR={}))})(nv);function rEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nEe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oEe(r.key),r)}}function iEe(e,t,n){return t&&nEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oEe(e){var t=aEe(e,"string");return typeof t=="symbol"?t:String(t)}function aEe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}Object.defineProperty(G1,"__esModule",{value:!0});G1.Preprocessor=void 0;const ai=H1,GA=nv,sEe=65536;let lEe=function(){function e(t){rEe(this,e),this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=sEe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}return iEe(e,[{key:"col",get:function(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}},{key:"offset",get:function(){return this.droppedBufferSize+this.pos}},{key:"getError",value:function(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}},{key:"_err",value:function(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}},{key:"_addGap",value:function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}},{key:"_processSurrogate",value:function(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if((0,ai.isSurrogatePair)(n))return this.pos++,this._addGap(),(0,ai.getSurrogatePairCodePoint)(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ai.CODE_POINTS.EOF;return this._err(GA.ERR.surrogateInInputStream),t}},{key:"willDropParsedChunk",value:function(){return this.pos>this.bufferWaterline}},{key:"dropParsedChunk",value:function(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}},{key:"write",value:function(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}},{key:"insertHtmlAtCurrentPos",value:function(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}},{key:"startsWith",value:function(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}},{key:"peek",value:function(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ai.CODE_POINTS.EOF;const r=this.html.charCodeAt(n);return r===ai.CODE_POINTS.CARRIAGE_RETURN?ai.CODE_POINTS.LINE_FEED:r}},{key:"advance",value:function(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ai.CODE_POINTS.EOF;let t=this.html.charCodeAt(this.pos);return t===ai.CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ai.CODE_POINTS.LINE_FEED):t===ai.CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,(0,ai.isSurrogate)(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ai.CODE_POINTS.LINE_FEED||t===ai.CODE_POINTS.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}},{key:"_checkForProblematicCharacters",value:function(t){(0,ai.isControlCodePoint)(t)?this._err(GA.ERR.controlCharacterInInputStream):(0,ai.isUndefinedCodePoint)(t)&&this._err(GA.ERR.noncharacterInInputStream)}},{key:"retreat",value:function(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}]),e}();G1.Preprocessor=lEe;var U1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTokenAttr=e.TokenType=void 0,function(n){n[n.CHARACTER=0]="CHARACTER",n[n.NULL_CHARACTER=1]="NULL_CHARACTER",n[n.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",n[n.START_TAG=3]="START_TAG",n[n.END_TAG=4]="END_TAG",n[n.COMMENT=5]="COMMENT",n[n.DOCTYPE=6]="DOCTYPE",n[n.EOF=7]="EOF",n[n.HIBERNATION=8]="HIBERNATION"}(e.TokenType||(e.TokenType={}));function t(n,r){for(let i=n.attrs.length-1;i>=0;i--)if(n.attrs[i].name===r)return n.attrs[i].value;return null}e.getTokenAttr=t})(U1);var qs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUnescapedText=e.isNumberedHeader=e.SPECIAL_ELEMENTS=e.getTagID=e.TAG_ID=e.TAG_NAMES=e.DOCUMENT_MODE=e.ATTRS=e.NS=void 0;var t;(function(l){l.HTML="http://www.w3.org/1999/xhtml",l.MATHML="http://www.w3.org/1998/Math/MathML",l.SVG="http://www.w3.org/2000/svg",l.XLINK="http://www.w3.org/1999/xlink",l.XML="http://www.w3.org/XML/1998/namespace",l.XMLNS="http://www.w3.org/2000/xmlns/"})(t=e.NS||(e.NS={})),function(l){l.TYPE="type",l.ACTION="action",l.ENCODING="encoding",l.PROMPT="prompt",l.NAME="name",l.COLOR="color",l.FACE="face",l.SIZE="size"}(e.ATTRS||(e.ATTRS={})),function(l){l.NO_QUIRKS="no-quirks",l.QUIRKS="quirks",l.LIMITED_QUIRKS="limited-quirks"}(e.DOCUMENT_MODE||(e.DOCUMENT_MODE={}));var n;(function(l){l.A="a",l.ADDRESS="address",l.ANNOTATION_XML="annotation-xml",l.APPLET="applet",l.AREA="area",l.ARTICLE="article",l.ASIDE="aside",l.B="b",l.BASE="base",l.BASEFONT="basefont",l.BGSOUND="bgsound",l.BIG="big",l.BLOCKQUOTE="blockquote",l.BODY="body",l.BR="br",l.BUTTON="button",l.CAPTION="caption",l.CENTER="center",l.CODE="code",l.COL="col",l.COLGROUP="colgroup",l.DD="dd",l.DESC="desc",l.DETAILS="details",l.DIALOG="dialog",l.DIR="dir",l.DIV="div",l.DL="dl",l.DT="dt",l.EM="em",l.EMBED="embed",l.FIELDSET="fieldset",l.FIGCAPTION="figcaption",l.FIGURE="figure",l.FONT="font",l.FOOTER="footer",l.FOREIGN_OBJECT="foreignObject",l.FORM="form",l.FRAME="frame",l.FRAMESET="frameset",l.H1="h1",l.H2="h2",l.H3="h3",l.H4="h4",l.H5="h5",l.H6="h6",l.HEAD="head",l.HEADER="header",l.HGROUP="hgroup",l.HR="hr",l.HTML="html",l.I="i",l.IMG="img",l.IMAGE="image",l.INPUT="input",l.IFRAME="iframe",l.KEYGEN="keygen",l.LABEL="label",l.LI="li",l.LINK="link",l.LISTING="listing",l.MAIN="main",l.MALIGNMARK="malignmark",l.MARQUEE="marquee",l.MATH="math",l.MENU="menu",l.META="meta",l.MGLYPH="mglyph",l.MI="mi",l.MO="mo",l.MN="mn",l.MS="ms",l.MTEXT="mtext",l.NAV="nav",l.NOBR="nobr",l.NOFRAMES="noframes",l.NOEMBED="noembed",l.NOSCRIPT="noscript",l.OBJECT="object",l.OL="ol",l.OPTGROUP="optgroup",l.OPTION="option",l.P="p",l.PARAM="param",l.PLAINTEXT="plaintext",l.PRE="pre",l.RB="rb",l.RP="rp",l.RT="rt",l.RTC="rtc",l.RUBY="ruby",l.S="s",l.SCRIPT="script",l.SECTION="section",l.SELECT="select",l.SOURCE="source",l.SMALL="small",l.SPAN="span",l.STRIKE="strike",l.STRONG="strong",l.STYLE="style",l.SUB="sub",l.SUMMARY="summary",l.SUP="sup",l.TABLE="table",l.TBODY="tbody",l.TEMPLATE="template",l.TEXTAREA="textarea",l.TFOOT="tfoot",l.TD="td",l.TH="th",l.THEAD="thead",l.TITLE="title",l.TR="tr",l.TRACK="track",l.TT="tt",l.U="u",l.UL="ul",l.SVG="svg",l.VAR="var",l.WBR="wbr",l.XMP="xmp"})(n=e.TAG_NAMES||(e.TAG_NAMES={}));var r;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.A=1]="A",l[l.ADDRESS=2]="ADDRESS",l[l.ANNOTATION_XML=3]="ANNOTATION_XML",l[l.APPLET=4]="APPLET",l[l.AREA=5]="AREA",l[l.ARTICLE=6]="ARTICLE",l[l.ASIDE=7]="ASIDE",l[l.B=8]="B",l[l.BASE=9]="BASE",l[l.BASEFONT=10]="BASEFONT",l[l.BGSOUND=11]="BGSOUND",l[l.BIG=12]="BIG",l[l.BLOCKQUOTE=13]="BLOCKQUOTE",l[l.BODY=14]="BODY",l[l.BR=15]="BR",l[l.BUTTON=16]="BUTTON",l[l.CAPTION=17]="CAPTION",l[l.CENTER=18]="CENTER",l[l.CODE=19]="CODE",l[l.COL=20]="COL",l[l.COLGROUP=21]="COLGROUP",l[l.DD=22]="DD",l[l.DESC=23]="DESC",l[l.DETAILS=24]="DETAILS",l[l.DIALOG=25]="DIALOG",l[l.DIR=26]="DIR",l[l.DIV=27]="DIV",l[l.DL=28]="DL",l[l.DT=29]="DT",l[l.EM=30]="EM",l[l.EMBED=31]="EMBED",l[l.FIELDSET=32]="FIELDSET",l[l.FIGCAPTION=33]="FIGCAPTION",l[l.FIGURE=34]="FIGURE",l[l.FONT=35]="FONT",l[l.FOOTER=36]="FOOTER",l[l.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",l[l.FORM=38]="FORM",l[l.FRAME=39]="FRAME",l[l.FRAMESET=40]="FRAMESET",l[l.H1=41]="H1",l[l.H2=42]="H2",l[l.H3=43]="H3",l[l.H4=44]="H4",l[l.H5=45]="H5",l[l.H6=46]="H6",l[l.HEAD=47]="HEAD",l[l.HEADER=48]="HEADER",l[l.HGROUP=49]="HGROUP",l[l.HR=50]="HR",l[l.HTML=51]="HTML",l[l.I=52]="I",l[l.IMG=53]="IMG",l[l.IMAGE=54]="IMAGE",l[l.INPUT=55]="INPUT",l[l.IFRAME=56]="IFRAME",l[l.KEYGEN=57]="KEYGEN",l[l.LABEL=58]="LABEL",l[l.LI=59]="LI",l[l.LINK=60]="LINK",l[l.LISTING=61]="LISTING",l[l.MAIN=62]="MAIN",l[l.MALIGNMARK=63]="MALIGNMARK",l[l.MARQUEE=64]="MARQUEE",l[l.MATH=65]="MATH",l[l.MENU=66]="MENU",l[l.META=67]="META",l[l.MGLYPH=68]="MGLYPH",l[l.MI=69]="MI",l[l.MO=70]="MO",l[l.MN=71]="MN",l[l.MS=72]="MS",l[l.MTEXT=73]="MTEXT",l[l.NAV=74]="NAV",l[l.NOBR=75]="NOBR",l[l.NOFRAMES=76]="NOFRAMES",l[l.NOEMBED=77]="NOEMBED",l[l.NOSCRIPT=78]="NOSCRIPT",l[l.OBJECT=79]="OBJECT",l[l.OL=80]="OL",l[l.OPTGROUP=81]="OPTGROUP",l[l.OPTION=82]="OPTION",l[l.P=83]="P",l[l.PARAM=84]="PARAM",l[l.PLAINTEXT=85]="PLAINTEXT",l[l.PRE=86]="PRE",l[l.RB=87]="RB",l[l.RP=88]="RP",l[l.RT=89]="RT",l[l.RTC=90]="RTC",l[l.RUBY=91]="RUBY",l[l.S=92]="S",l[l.SCRIPT=93]="SCRIPT",l[l.SECTION=94]="SECTION",l[l.SELECT=95]="SELECT",l[l.SOURCE=96]="SOURCE",l[l.SMALL=97]="SMALL",l[l.SPAN=98]="SPAN",l[l.STRIKE=99]="STRIKE",l[l.STRONG=100]="STRONG",l[l.STYLE=101]="STYLE",l[l.SUB=102]="SUB",l[l.SUMMARY=103]="SUMMARY",l[l.SUP=104]="SUP",l[l.TABLE=105]="TABLE",l[l.TBODY=106]="TBODY",l[l.TEMPLATE=107]="TEMPLATE",l[l.TEXTAREA=108]="TEXTAREA",l[l.TFOOT=109]="TFOOT",l[l.TD=110]="TD",l[l.TH=111]="TH",l[l.THEAD=112]="THEAD",l[l.TITLE=113]="TITLE",l[l.TR=114]="TR",l[l.TRACK=115]="TRACK",l[l.TT=116]="TT",l[l.U=117]="U",l[l.UL=118]="UL",l[l.SVG=119]="SVG",l[l.VAR=120]="VAR",l[l.WBR=121]="WBR",l[l.XMP=122]="XMP"})(r=e.TAG_ID||(e.TAG_ID={}));const i=new Map([[n.A,r.A],[n.ADDRESS,r.ADDRESS],[n.ANNOTATION_XML,r.ANNOTATION_XML],[n.APPLET,r.APPLET],[n.AREA,r.AREA],[n.ARTICLE,r.ARTICLE],[n.ASIDE,r.ASIDE],[n.B,r.B],[n.BASE,r.BASE],[n.BASEFONT,r.BASEFONT],[n.BGSOUND,r.BGSOUND],[n.BIG,r.BIG],[n.BLOCKQUOTE,r.BLOCKQUOTE],[n.BODY,r.BODY],[n.BR,r.BR],[n.BUTTON,r.BUTTON],[n.CAPTION,r.CAPTION],[n.CENTER,r.CENTER],[n.CODE,r.CODE],[n.COL,r.COL],[n.COLGROUP,r.COLGROUP],[n.DD,r.DD],[n.DESC,r.DESC],[n.DETAILS,r.DETAILS],[n.DIALOG,r.DIALOG],[n.DIR,r.DIR],[n.DIV,r.DIV],[n.DL,r.DL],[n.DT,r.DT],[n.EM,r.EM],[n.EMBED,r.EMBED],[n.FIELDSET,r.FIELDSET],[n.FIGCAPTION,r.FIGCAPTION],[n.FIGURE,r.FIGURE],[n.FONT,r.FONT],[n.FOOTER,r.FOOTER],[n.FOREIGN_OBJECT,r.FOREIGN_OBJECT],[n.FORM,r.FORM],[n.FRAME,r.FRAME],[n.FRAMESET,r.FRAMESET],[n.H1,r.H1],[n.H2,r.H2],[n.H3,r.H3],[n.H4,r.H4],[n.H5,r.H5],[n.H6,r.H6],[n.HEAD,r.HEAD],[n.HEADER,r.HEADER],[n.HGROUP,r.HGROUP],[n.HR,r.HR],[n.HTML,r.HTML],[n.I,r.I],[n.IMG,r.IMG],[n.IMAGE,r.IMAGE],[n.INPUT,r.INPUT],[n.IFRAME,r.IFRAME],[n.KEYGEN,r.KEYGEN],[n.LABEL,r.LABEL],[n.LI,r.LI],[n.LINK,r.LINK],[n.LISTING,r.LISTING],[n.MAIN,r.MAIN],[n.MALIGNMARK,r.MALIGNMARK],[n.MARQUEE,r.MARQUEE],[n.MATH,r.MATH],[n.MENU,r.MENU],[n.META,r.META],[n.MGLYPH,r.MGLYPH],[n.MI,r.MI],[n.MO,r.MO],[n.MN,r.MN],[n.MS,r.MS],[n.MTEXT,r.MTEXT],[n.NAV,r.NAV],[n.NOBR,r.NOBR],[n.NOFRAMES,r.NOFRAMES],[n.NOEMBED,r.NOEMBED],[n.NOSCRIPT,r.NOSCRIPT],[n.OBJECT,r.OBJECT],[n.OL,r.OL],[n.OPTGROUP,r.OPTGROUP],[n.OPTION,r.OPTION],[n.P,r.P],[n.PARAM,r.PARAM],[n.PLAINTEXT,r.PLAINTEXT],[n.PRE,r.PRE],[n.RB,r.RB],[n.RP,r.RP],[n.RT,r.RT],[n.RTC,r.RTC],[n.RUBY,r.RUBY],[n.S,r.S],[n.SCRIPT,r.SCRIPT],[n.SECTION,r.SECTION],[n.SELECT,r.SELECT],[n.SOURCE,r.SOURCE],[n.SMALL,r.SMALL],[n.SPAN,r.SPAN],[n.STRIKE,r.STRIKE],[n.STRONG,r.STRONG],[n.STYLE,r.STYLE],[n.SUB,r.SUB],[n.SUMMARY,r.SUMMARY],[n.SUP,r.SUP],[n.TABLE,r.TABLE],[n.TBODY,r.TBODY],[n.TEMPLATE,r.TEMPLATE],[n.TEXTAREA,r.TEXTAREA],[n.TFOOT,r.TFOOT],[n.TD,r.TD],[n.TH,r.TH],[n.THEAD,r.THEAD],[n.TITLE,r.TITLE],[n.TR,r.TR],[n.TRACK,r.TRACK],[n.TT,r.TT],[n.U,r.U],[n.UL,r.UL],[n.SVG,r.SVG],[n.VAR,r.VAR],[n.WBR,r.WBR],[n.XMP,r.XMP]]);function o(l){var f;return(f=i.get(l))!==null&&f!==void 0?f:r.UNKNOWN}e.getTagID=o;const a=r;e.SPECIAL_ELEMENTS={[t.HTML]:new Set([a.ADDRESS,a.APPLET,a.AREA,a.ARTICLE,a.ASIDE,a.BASE,a.BASEFONT,a.BGSOUND,a.BLOCKQUOTE,a.BODY,a.BR,a.BUTTON,a.CAPTION,a.CENTER,a.COL,a.COLGROUP,a.DD,a.DETAILS,a.DIR,a.DIV,a.DL,a.DT,a.EMBED,a.FIELDSET,a.FIGCAPTION,a.FIGURE,a.FOOTER,a.FORM,a.FRAME,a.FRAMESET,a.H1,a.H2,a.H3,a.H4,a.H5,a.H6,a.HEAD,a.HEADER,a.HGROUP,a.HR,a.HTML,a.IFRAME,a.IMG,a.INPUT,a.LI,a.LINK,a.LISTING,a.MAIN,a.MARQUEE,a.MENU,a.META,a.NAV,a.NOEMBED,a.NOFRAMES,a.NOSCRIPT,a.OBJECT,a.OL,a.P,a.PARAM,a.PLAINTEXT,a.PRE,a.SCRIPT,a.SECTION,a.SELECT,a.SOURCE,a.STYLE,a.SUMMARY,a.TABLE,a.TBODY,a.TD,a.TEMPLATE,a.TEXTAREA,a.TFOOT,a.TH,a.THEAD,a.TITLE,a.TR,a.TRACK,a.UL,a.WBR,a.XMP]),[t.MATHML]:new Set([a.MI,a.MO,a.MN,a.MS,a.MTEXT,a.ANNOTATION_XML]),[t.SVG]:new Set([a.TITLE,a.FOREIGN_OBJECT,a.DESC]),[t.XLINK]:new Set,[t.XML]:new Set,[t.XMLNS]:new Set};function s(l){return l===a.H1||l===a.H2||l===a.H3||l===a.H4||l===a.H5||l===a.H6}e.isNumberedHeader=s;const u=new Set([n.STYLE,n.SCRIPT,n.XMP,n.IFRAME,n.NOEMBED,n.NOFRAMES,n.PLAINTEXT]);function c(l,f){return u.has(l)||f&&l===n.NOSCRIPT}e.hasUnescapedText=c})(qs);function uEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cEe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fEe(r.key),r)}}function hEe(e,t,n){return t&&cEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fEe(e){var t=pEe(e,"string");return typeof t=="symbol"?t:String(t)}function pEe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}Object.defineProperty(_c,"__esModule",{value:!0});_c.Tokenizer=_c.TokenizerMode=void 0;const dEe=G1,V=H1,xi=U1,ua=yc,Me=nv,HA=qs,mEe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var K;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(K||(K={}));_c.TokenizerMode={DATA:K.DATA,RCDATA:K.RCDATA,RAWTEXT:K.RAWTEXT,SCRIPT_DATA:K.SCRIPT_DATA,PLAINTEXT:K.PLAINTEXT,CDATA_SECTION:K.CDATA_SECTION};function rg(e){return e>=V.CODE_POINTS.DIGIT_0&&e<=V.CODE_POINTS.DIGIT_9}function Am(e){return e>=V.CODE_POINTS.LATIN_CAPITAL_A&&e<=V.CODE_POINTS.LATIN_CAPITAL_Z}function gEe(e){return e>=V.CODE_POINTS.LATIN_SMALL_A&&e<=V.CODE_POINTS.LATIN_SMALL_Z}function hl(e){return gEe(e)||Am(e)}function Bx(e){return hl(e)||rg(e)}function SY(e){return e>=V.CODE_POINTS.LATIN_CAPITAL_A&&e<=V.CODE_POINTS.LATIN_CAPITAL_F}function wY(e){return e>=V.CODE_POINTS.LATIN_SMALL_A&&e<=V.CODE_POINTS.LATIN_SMALL_F}function yEe(e){return rg(e)||SY(e)||wY(e)}function ub(e){return e+32}function AY(e){return e===V.CODE_POINTS.SPACE||e===V.CODE_POINTS.LINE_FEED||e===V.CODE_POINTS.TABULATION||e===V.CODE_POINTS.FORM_FEED}function vEe(e){return e===V.CODE_POINTS.EQUALS_SIGN||Bx(e)}function _3(e){return AY(e)||e===V.CODE_POINTS.SOLIDUS||e===V.CODE_POINTS.GREATER_THAN_SIGN}let bEe=function(){function e(t,n){uEe(this,e),this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=K.DATA,this.returnState=K.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new dEe.Preprocessor(n),this.currentLocation=this.getCurrentLocation(-1)}return hEe(e,[{key:"_err",value:function(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}},{key:"getCurrentLocation",value:function(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}},{key:"_runParsingLoop",value:function(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||(t==null||t()))}},{key:"write",value:function(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||(r==null||r())}},{key:"insertHtmlAtCurrentPos",value:function(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}},{key:"_ensureHibernation",value:function(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}},{key:"_consume",value:function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}},{key:"_unconsume",value:function(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}},{key:"_reconsumeInState",value:function(t,n){this.state=t,this._callState(n)}},{key:"_advanceBy",value:function(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}},{key:"_consumeSequenceIfMatch",value:function(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}},{key:"_createStartTagToken",value:function(){this.currentToken={type:xi.TokenType.START_TAG,tagName:"",tagID:HA.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}},{key:"_createEndTagToken",value:function(){this.currentToken={type:xi.TokenType.END_TAG,tagName:"",tagID:HA.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}},{key:"_createCommentToken",value:function(t){this.currentToken={type:xi.TokenType.COMMENT,data:"",location:this.getCurrentLocation(t)}}},{key:"_createDoctypeToken",value:function(t){this.currentToken={type:xi.TokenType.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}},{key:"_createCharacterToken",value:function(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}},{key:"_createAttr",value:function(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}},{key:"_leaveAttrName",value:function(){var t,n;const r=this.currentToken;if((0,xi.getTokenAttr)(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Me.ERR.duplicateAttribute)}},{key:"_leaveAttrValue",value:function(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}},{key:"prepareToken",value:function(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}},{key:"emitCurrentTagToken",value:function(){const t=this.currentToken;this.prepareToken(t),t.tagID=(0,HA.getTagID)(t.tagName),t.type===xi.TokenType.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Me.ERR.endTagWithAttributes),t.selfClosing&&this._err(Me.ERR.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentComment",value:function(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentDoctype",value:function(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}},{key:"_emitCurrentCharacterToken",value:function(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case xi.TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case xi.TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case xi.TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}},{key:"_emitEOFToken",value:function(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:xi.TokenType.EOF,location:t}),this.active=!1}},{key:"_appendCharToCurrentCharacterToken",value:function(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}},{key:"_emitCodePoint",value:function(t){const n=AY(t)?xi.TokenType.WHITESPACE_CHARACTER:t===V.CODE_POINTS.NULL?xi.TokenType.NULL_CHARACTER:xi.TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}},{key:"_emitChars",value:function(t){this._appendCharToCurrentCharacterToken(xi.TokenType.CHARACTER,t)}},{key:"_matchNamedCharacterReference",value:function(t){let n=null,r=0,i=!1;for(let o=0,a=ua.htmlDecodeTree[0];o>=0&&(o=(0,ua.determineBranch)(ua.htmlDecodeTree,a,o+1,t),!(o<0));t=this._consume()){r+=1,a=ua.htmlDecodeTree[o];const s=a&ua.BinTrieFlags.VALUE_LENGTH;if(s){const u=(s>>14)-1;if(t!==V.CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&vEe(this.preprocessor.peek(1))?(n=[V.CODE_POINTS.AMPERSAND],o+=u):(n=u===0?[ua.htmlDecodeTree[o]&~ua.BinTrieFlags.VALUE_LENGTH]:u===1?[ua.htmlDecodeTree[++o]]:[ua.htmlDecodeTree[++o],ua.htmlDecodeTree[++o]],r=0,i=t!==V.CODE_POINTS.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Me.ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),n}},{key:"_isCharacterReferenceInAttribute",value:function(){return this.returnState===K.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===K.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===K.ATTRIBUTE_VALUE_UNQUOTED}},{key:"_flushCodePointConsumedAsCharacterReference",value:function(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}},{key:"_callState",value:function(t){switch(this.state){case K.DATA:{this._stateData(t);break}case K.RCDATA:{this._stateRcdata(t);break}case K.RAWTEXT:{this._stateRawtext(t);break}case K.SCRIPT_DATA:{this._stateScriptData(t);break}case K.PLAINTEXT:{this._statePlaintext(t);break}case K.TAG_OPEN:{this._stateTagOpen(t);break}case K.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case K.TAG_NAME:{this._stateTagName(t);break}case K.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case K.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case K.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case K.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case K.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case K.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case K.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case K.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case K.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case K.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case K.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case K.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case K.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case K.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case K.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case K.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case K.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case K.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case K.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case K.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case K.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case K.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case K.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case K.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case K.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case K.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case K.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case K.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case K.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case K.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case K.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case K.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case K.BOGUS_COMMENT:{this._stateBogusComment(t);break}case K.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case K.COMMENT_START:{this._stateCommentStart(t);break}case K.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case K.COMMENT:{this._stateComment(t);break}case K.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case K.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case K.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case K.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case K.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case K.COMMENT_END:{this._stateCommentEnd(t);break}case K.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case K.DOCTYPE:{this._stateDoctype(t);break}case K.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case K.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case K.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case K.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case K.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case K.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case K.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case K.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case K.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case K.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case K.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case K.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case K.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case K.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case K.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case K.CDATA_SECTION:{this._stateCdataSection(t);break}case K.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case K.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case K.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case K.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case K.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case K.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case K.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case K.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case K.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case K.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}},{key:"_stateData",value:function(t){switch(t){case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.TAG_OPEN;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=K.DATA,this.state=K.CHARACTER_REFERENCE;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this._emitCodePoint(t);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateRcdata",value:function(t){switch(t){case V.CODE_POINTS.AMPERSAND:{this.returnState=K.RCDATA,this.state=K.CHARACTER_REFERENCE;break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.RCDATA_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateRawtext",value:function(t){switch(t){case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.RAWTEXT_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateScriptData",value:function(t){switch(t){case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.SCRIPT_DATA_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_statePlaintext",value:function(t){switch(t){case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateTagOpen",value:function(t){if(hl(t))this._createStartTagToken(),this.state=K.TAG_NAME,this._stateTagName(t);else switch(t){case V.CODE_POINTS.EXCLAMATION_MARK:{this.state=K.MARKUP_DECLARATION_OPEN;break}case V.CODE_POINTS.SOLIDUS:{this.state=K.END_TAG_OPEN;break}case V.CODE_POINTS.QUESTION_MARK:{this._err(Me.ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=K.BOGUS_COMMENT,this._stateBogusComment(t);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Me.ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=K.DATA,this._stateData(t)}}},{key:"_stateEndTagOpen",value:function(t){if(hl(t))this._createEndTagToken(),this.state=K.TAG_NAME,this._stateTagName(t);else switch(t){case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.missingEndTagName),this.state=K.DATA;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Me.ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=K.BOGUS_COMMENT,this._stateBogusComment(t)}}},{key:"_stateTagName",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=K.BEFORE_ATTRIBUTE_NAME;break}case V.CODE_POINTS.SOLIDUS:{this.state=K.SELF_CLOSING_START_TAG;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),n.tagName+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Am(t)?ub(t):t)}}},{key:"_stateRcdataLessThanSign",value:function(t){t===V.CODE_POINTS.SOLIDUS?this.state=K.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=K.RCDATA,this._stateRcdata(t))}},{key:"_stateRcdataEndTagOpen",value:function(t){hl(t)?(this.state=K.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=K.RCDATA,this._stateRcdata(t))}},{key:"handleSpecialEndTag",value:function(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=K.BEFORE_ATTRIBUTE_NAME,!1;case V.CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=K.SELF_CLOSING_START_TAG,!1;case V.CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=K.DATA,!1;default:return!this._ensureHibernation()}}},{key:"_stateRcdataEndTagName",value:function(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=K.RCDATA,this._stateRcdata(t))}},{key:"_stateRawtextLessThanSign",value:function(t){t===V.CODE_POINTS.SOLIDUS?this.state=K.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=K.RAWTEXT,this._stateRawtext(t))}},{key:"_stateRawtextEndTagOpen",value:function(t){hl(t)?(this.state=K.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=K.RAWTEXT,this._stateRawtext(t))}},{key:"_stateRawtextEndTagName",value:function(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=K.RAWTEXT,this._stateRawtext(t))}},{key:"_stateScriptDataLessThanSign",value:function(t){switch(t){case V.CODE_POINTS.SOLIDUS:{this.state=K.SCRIPT_DATA_END_TAG_OPEN;break}case V.CODE_POINTS.EXCLAMATION_MARK:{this.state=K.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=K.SCRIPT_DATA,this._stateScriptData(t)}}},{key:"_stateScriptDataEndTagOpen",value:function(t){hl(t)?(this.state=K.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=K.SCRIPT_DATA,this._stateScriptData(t))}},{key:"_stateScriptDataEndTagName",value:function(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=K.SCRIPT_DATA,this._stateScriptData(t))}},{key:"_stateScriptDataEscapeStart",value:function(t){t===V.CODE_POINTS.HYPHEN_MINUS?(this.state=K.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=K.SCRIPT_DATA,this._stateScriptData(t))}},{key:"_stateScriptDataEscapeStartDash",value:function(t){t===V.CODE_POINTS.HYPHEN_MINUS?(this.state=K.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=K.SCRIPT_DATA,this._stateScriptData(t))}},{key:"_stateScriptDataEscaped",value:function(t){switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=K.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateScriptDataEscapedDash",value:function(t){switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=K.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this.state=K.SCRIPT_DATA_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=K.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}},{key:"_stateScriptDataEscapedDashDash",value:function(t){switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.SCRIPT_DATA,this._emitChars(">");break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this.state=K.SCRIPT_DATA_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=K.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}},{key:"_stateScriptDataEscapedLessThanSign",value:function(t){t===V.CODE_POINTS.SOLIDUS?this.state=K.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:hl(t)?(this._emitChars("<"),this.state=K.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=K.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}},{key:"_stateScriptDataEscapedEndTagOpen",value:function(t){hl(t)?(this.state=K.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=K.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}},{key:"_stateScriptDataEscapedEndTagName",value:function(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=K.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}},{key:"_stateScriptDataDoubleEscapeStart",value:function(t){if(this.preprocessor.startsWith(V.SEQUENCES.SCRIPT,!1)&&_3(this.preprocessor.peek(V.SEQUENCES.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<V.SEQUENCES.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=K.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}},{key:"_stateScriptDataDoubleEscaped",value:function(t){switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateScriptDataDoubleEscapedDash",value:function(t){switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}},{key:"_stateScriptDataDoubleEscapedDashDash",value:function(t){switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.SCRIPT_DATA,this._emitChars(">");break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}},{key:"_stateScriptDataDoubleEscapedLessThanSign",value:function(t){t===V.CODE_POINTS.SOLIDUS?(this.state=K.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}},{key:"_stateScriptDataDoubleEscapeEnd",value:function(t){if(this.preprocessor.startsWith(V.SEQUENCES.SCRIPT,!1)&&_3(this.preprocessor.peek(V.SEQUENCES.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<V.SEQUENCES.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=K.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=K.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}},{key:"_stateBeforeAttributeName",value:function(t){switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.SOLIDUS:case V.CODE_POINTS.GREATER_THAN_SIGN:case V.CODE_POINTS.EOF:{this.state=K.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case V.CODE_POINTS.EQUALS_SIGN:{this._err(Me.ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=K.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=K.ATTRIBUTE_NAME,this._stateAttributeName(t)}}},{key:"_stateAttributeName",value:function(t){switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:case V.CODE_POINTS.SOLIDUS:case V.CODE_POINTS.GREATER_THAN_SIGN:case V.CODE_POINTS.EOF:{this._leaveAttrName(),this.state=K.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case V.CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=K.BEFORE_ATTRIBUTE_VALUE;break}case V.CODE_POINTS.QUOTATION_MARK:case V.CODE_POINTS.APOSTROPHE:case V.CODE_POINTS.LESS_THAN_SIGN:{this._err(Me.ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this.currentAttr.name+=V.REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(Am(t)?ub(t):t)}}},{key:"_stateAfterAttributeName",value:function(t){switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.SOLIDUS:{this.state=K.SELF_CLOSING_START_TAG;break}case V.CODE_POINTS.EQUALS_SIGN:{this.state=K.BEFORE_ATTRIBUTE_VALUE;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=K.ATTRIBUTE_NAME,this._stateAttributeName(t)}}},{key:"_stateBeforeAttributeValue",value:function(t){switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.QUOTATION_MARK:{this.state=K.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this.state=K.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.missingAttributeValue),this.state=K.DATA,this.emitCurrentTagToken();break}default:this.state=K.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}},{key:"_stateAttributeValueDoubleQuoted",value:function(t){switch(t){case V.CODE_POINTS.QUOTATION_MARK:{this.state=K.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=K.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=K.CHARACTER_REFERENCE;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this.currentAttr.value+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}},{key:"_stateAttributeValueSingleQuoted",value:function(t){switch(t){case V.CODE_POINTS.APOSTROPHE:{this.state=K.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=K.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=K.CHARACTER_REFERENCE;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this.currentAttr.value+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}},{key:"_stateAttributeValueUnquoted",value:function(t){switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=K.BEFORE_ATTRIBUTE_NAME;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=K.ATTRIBUTE_VALUE_UNQUOTED,this.state=K.CHARACTER_REFERENCE;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=K.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this.currentAttr.value+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.QUOTATION_MARK:case V.CODE_POINTS.APOSTROPHE:case V.CODE_POINTS.LESS_THAN_SIGN:case V.CODE_POINTS.EQUALS_SIGN:case V.CODE_POINTS.GRAVE_ACCENT:{this._err(Me.ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}},{key:"_stateAfterAttributeValueQuoted",value:function(t){switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=K.BEFORE_ATTRIBUTE_NAME;break}case V.CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=K.SELF_CLOSING_START_TAG;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=K.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Me.ERR.missingWhitespaceBetweenAttributes),this.state=K.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}},{key:"_stateSelfClosingStartTag",value:function(t){switch(t){case V.CODE_POINTS.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=K.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Me.ERR.unexpectedSolidusInTag),this.state=K.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}},{key:"_stateBogusComment",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.DATA,this.emitCurrentComment(n);break}case V.CODE_POINTS.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),n.data+=V.REPLACEMENT_CHARACTER;break}default:n.data+=String.fromCodePoint(t)}}},{key:"_stateMarkupDeclarationOpen",value:function(t){this._consumeSequenceIfMatch(V.SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(V.SEQUENCES.DASH_DASH.length+1),this.state=K.COMMENT_START):this._consumeSequenceIfMatch(V.SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(V.SEQUENCES.DOCTYPE.length+1),this.state=K.DOCTYPE):this._consumeSequenceIfMatch(V.SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=K.CDATA_SECTION:(this._err(Me.ERR.cdataInHtmlContent),this._createCommentToken(V.SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=K.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Me.ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=K.BOGUS_COMMENT,this._stateBogusComment(t))}},{key:"_stateCommentStart",value:function(t){switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=K.COMMENT_START_DASH;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.abruptClosingOfEmptyComment),this.state=K.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=K.COMMENT,this._stateComment(t)}}},{key:"_stateCommentStartDash",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=K.COMMENT_END;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.abruptClosingOfEmptyComment),this.state=K.DATA,this.emitCurrentComment(n);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=K.COMMENT,this._stateComment(t)}}},{key:"_stateComment",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=K.COMMENT_END_DASH;break}case V.CODE_POINTS.LESS_THAN_SIGN:{n.data+="<",this.state=K.COMMENT_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),n.data+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}},{key:"_stateCommentLessThanSign",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.EXCLAMATION_MARK:{n.data+="!",this.state=K.COMMENT_LESS_THAN_SIGN_BANG;break}case V.CODE_POINTS.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=K.COMMENT,this._stateComment(t)}}},{key:"_stateCommentLessThanSignBang",value:function(t){t===V.CODE_POINTS.HYPHEN_MINUS?this.state=K.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=K.COMMENT,this._stateComment(t))}},{key:"_stateCommentLessThanSignBangDash",value:function(t){t===V.CODE_POINTS.HYPHEN_MINUS?this.state=K.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=K.COMMENT_END_DASH,this._stateCommentEndDash(t))}},{key:"_stateCommentLessThanSignBangDashDash",value:function(t){t!==V.CODE_POINTS.GREATER_THAN_SIGN&&t!==V.CODE_POINTS.EOF&&this._err(Me.ERR.nestedComment),this.state=K.COMMENT_END,this._stateCommentEnd(t)}},{key:"_stateCommentEndDash",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=K.COMMENT_END;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=K.COMMENT,this._stateComment(t)}}},{key:"_stateCommentEnd",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.DATA,this.emitCurrentComment(n);break}case V.CODE_POINTS.EXCLAMATION_MARK:{this.state=K.COMMENT_END_BANG;break}case V.CODE_POINTS.HYPHEN_MINUS:{n.data+="-";break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=K.COMMENT,this._stateComment(t)}}},{key:"_stateCommentEndBang",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.HYPHEN_MINUS:{n.data+="--!",this.state=K.COMMENT_END_DASH;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.incorrectlyClosedComment),this.state=K.DATA,this.emitCurrentComment(n);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=K.COMMENT,this._stateComment(t)}}},{key:"_stateDoctype",value:function(t){switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=K.BEFORE_DOCTYPE_NAME;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Me.ERR.missingWhitespaceBeforeDoctypeName),this.state=K.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}},{key:"_stateBeforeDoctypeName",value:function(t){if(Am(t))this._createDoctypeToken(String.fromCharCode(ub(t))),this.state=K.DOCTYPE_NAME;else switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),this._createDoctypeToken(V.REPLACEMENT_CHARACTER),this.state=K.DOCTYPE_NAME;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=K.DATA;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=K.DOCTYPE_NAME}}},{key:"_stateDoctypeName",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=K.AFTER_DOCTYPE_NAME;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.DATA,this.emitCurrentDoctype(n);break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),n.name+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Am(t)?ub(t):t)}}},{key:"_stateAfterDoctypeName",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.DATA,this.emitCurrentDoctype(n);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(V.SEQUENCES.PUBLIC,!1)?this.state=K.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(V.SEQUENCES.SYSTEM,!1)?this.state=K.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Me.ERR.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=K.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}},{key:"_stateAfterDoctypePublicKeyword",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=K.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.CODE_POINTS.QUOTATION_MARK:{this._err(Me.ERR.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=K.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this._err(Me.ERR.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=K.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=K.DATA,this.emitCurrentDoctype(n);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Me.ERR.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=K.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateBeforeDoctypePublicIdentifier",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.QUOTATION_MARK:{n.publicId="",this.state=K.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{n.publicId="",this.state=K.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=K.DATA,this.emitCurrentDoctype(n);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Me.ERR.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=K.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateDoctypePublicIdentifierDoubleQuoted",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.QUOTATION_MARK:{this.state=K.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),n.publicId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=K.DATA;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}},{key:"_stateDoctypePublicIdentifierSingleQuoted",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.APOSTROPHE:{this.state=K.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),n.publicId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=K.DATA;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}},{key:"_stateAfterDoctypePublicIdentifier",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=K.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.DATA,this.emitCurrentDoctype(n);break}case V.CODE_POINTS.QUOTATION_MARK:{this._err(Me.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=K.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this._err(Me.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=K.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Me.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=K.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateBetweenDoctypePublicAndSystemIdentifiers",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=K.DATA;break}case V.CODE_POINTS.QUOTATION_MARK:{n.systemId="",this.state=K.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{n.systemId="",this.state=K.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Me.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=K.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateAfterDoctypeSystemKeyword",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=K.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.CODE_POINTS.QUOTATION_MARK:{this._err(Me.ERR.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=K.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this._err(Me.ERR.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=K.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=K.DATA,this.emitCurrentDoctype(n);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Me.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=K.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateBeforeDoctypeSystemIdentifier",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.QUOTATION_MARK:{n.systemId="",this.state=K.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{n.systemId="",this.state=K.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=K.DATA,this.emitCurrentDoctype(n);break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Me.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=K.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateDoctypeSystemIdentifierDoubleQuoted",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.QUOTATION_MARK:{this.state=K.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),n.systemId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=K.DATA;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}},{key:"_stateDoctypeSystemIdentifierSingleQuoted",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.APOSTROPHE:{this.state=K.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter),n.systemId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Me.ERR.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=K.DATA;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}},{key:"_stateAfterDoctypeSystemIdentifier",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=K.DATA;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Me.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=K.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateBogusDoctype",value:function(t){const n=this.currentToken;switch(t){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=K.DATA;break}case V.CODE_POINTS.NULL:{this._err(Me.ERR.unexpectedNullCharacter);break}case V.CODE_POINTS.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}},{key:"_stateCdataSection",value:function(t){switch(t){case V.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=K.CDATA_SECTION_BRACKET;break}case V.CODE_POINTS.EOF:{this._err(Me.ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateCdataSectionBracket",value:function(t){t===V.CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=K.CDATA_SECTION_END:(this._emitChars("]"),this.state=K.CDATA_SECTION,this._stateCdataSection(t))}},{key:"_stateCdataSectionEnd",value:function(t){switch(t){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=K.DATA;break}case V.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=K.CDATA_SECTION,this._stateCdataSection(t)}}},{key:"_stateCharacterReference",value:function(t){t===V.CODE_POINTS.NUMBER_SIGN?this.state=K.NUMERIC_CHARACTER_REFERENCE:Bx(t)?(this.state=K.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,t))}},{key:"_stateNamedCharacterReference",value:function(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this.state=K.AMBIGUOUS_AMPERSAND}},{key:"_stateAmbiguousAmpersand",value:function(t){Bx(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===V.CODE_POINTS.SEMICOLON&&this._err(Me.ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}},{key:"_stateNumericCharacterReference",value:function(t){this.charRefCode=0,t===V.CODE_POINTS.LATIN_SMALL_X||t===V.CODE_POINTS.LATIN_CAPITAL_X?this.state=K.HEXADEMICAL_CHARACTER_REFERENCE_START:rg(t)?(this.state=K.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Me.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}},{key:"_stateHexademicalCharacterReferenceStart",value:function(t){yEe(t)?(this.state=K.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Me.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}},{key:"_stateHexademicalCharacterReference",value:function(t){SY(t)?this.charRefCode=this.charRefCode*16+t-55:wY(t)?this.charRefCode=this.charRefCode*16+t-87:rg(t)?this.charRefCode=this.charRefCode*16+t-48:t===V.CODE_POINTS.SEMICOLON?this.state=K.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Me.ERR.missingSemicolonAfterCharacterReference),this.state=K.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}},{key:"_stateDecimalCharacterReference",value:function(t){rg(t)?this.charRefCode=this.charRefCode*10+t-48:t===V.CODE_POINTS.SEMICOLON?this.state=K.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Me.ERR.missingSemicolonAfterCharacterReference),this.state=K.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}},{key:"_stateNumericCharacterReferenceEnd",value:function(t){if(this.charRefCode===V.CODE_POINTS.NULL)this._err(Me.ERR.nullCharacterReference),this.charRefCode=V.CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Me.ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=V.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,V.isSurrogate)(this.charRefCode))this._err(Me.ERR.surrogateCharacterReference),this.charRefCode=V.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,V.isUndefinedCodePoint)(this.charRefCode))this._err(Me.ERR.noncharacterCharacterReference);else if((0,V.isControlCodePoint)(this.charRefCode)||this.charRefCode===V.CODE_POINTS.CARRIAGE_RETURN){this._err(Me.ERR.controlCharacterReference);const n=mEe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}]),e}();_c.Tokenizer=bEe;var z1={};function _Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TEe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SEe(r.key),r)}}function EEe(e,t,n){return t&&TEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SEe(e){var t=wEe(e,"string");return typeof t=="symbol"?t:String(t)}function wEe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}Object.defineProperty(z1,"__esModule",{value:!0});z1.OpenElementStack=void 0;const Be=qs,OY=new Set([Be.TAG_ID.DD,Be.TAG_ID.DT,Be.TAG_ID.LI,Be.TAG_ID.OPTGROUP,Be.TAG_ID.OPTION,Be.TAG_ID.P,Be.TAG_ID.RB,Be.TAG_ID.RP,Be.TAG_ID.RT,Be.TAG_ID.RTC]),T3=new Set([...OY,Be.TAG_ID.CAPTION,Be.TAG_ID.COLGROUP,Be.TAG_ID.TBODY,Be.TAG_ID.TD,Be.TAG_ID.TFOOT,Be.TAG_ID.TH,Be.TAG_ID.THEAD,Be.TAG_ID.TR]),cb=new Map([[Be.TAG_ID.APPLET,Be.NS.HTML],[Be.TAG_ID.CAPTION,Be.NS.HTML],[Be.TAG_ID.HTML,Be.NS.HTML],[Be.TAG_ID.MARQUEE,Be.NS.HTML],[Be.TAG_ID.OBJECT,Be.NS.HTML],[Be.TAG_ID.TABLE,Be.NS.HTML],[Be.TAG_ID.TD,Be.NS.HTML],[Be.TAG_ID.TEMPLATE,Be.NS.HTML],[Be.TAG_ID.TH,Be.NS.HTML],[Be.TAG_ID.ANNOTATION_XML,Be.NS.MATHML],[Be.TAG_ID.MI,Be.NS.MATHML],[Be.TAG_ID.MN,Be.NS.MATHML],[Be.TAG_ID.MO,Be.NS.MATHML],[Be.TAG_ID.MS,Be.NS.MATHML],[Be.TAG_ID.MTEXT,Be.NS.MATHML],[Be.TAG_ID.DESC,Be.NS.SVG],[Be.TAG_ID.FOREIGN_OBJECT,Be.NS.SVG],[Be.TAG_ID.TITLE,Be.NS.SVG]]),AEe=[Be.TAG_ID.H1,Be.TAG_ID.H2,Be.TAG_ID.H3,Be.TAG_ID.H4,Be.TAG_ID.H5,Be.TAG_ID.H6],OEe=[Be.TAG_ID.TR,Be.TAG_ID.TEMPLATE,Be.TAG_ID.HTML],kEe=[Be.TAG_ID.TBODY,Be.TAG_ID.TFOOT,Be.TAG_ID.THEAD,Be.TAG_ID.TEMPLATE,Be.TAG_ID.HTML],xEe=[Be.TAG_ID.TABLE,Be.TAG_ID.TEMPLATE,Be.TAG_ID.HTML],IEe=[Be.TAG_ID.TD,Be.TAG_ID.TH];let CEe=function(){function e(t,n,r){_Ee(this,e),this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=Be.TAG_ID.UNKNOWN,this.current=t}return EEe(e,[{key:"currentTmplContentOrNode",get:function(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}},{key:"_indexOf",value:function(t){return this.items.lastIndexOf(t,this.stackTop)}},{key:"_isInTemplate",value:function(){return this.currentTagId===Be.TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Be.NS.HTML}},{key:"_updateCurrentElement",value:function(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}},{key:"push",value:function(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}},{key:"pop",value:function(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}},{key:"replace",value:function(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}},{key:"insertAfter",value:function(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}},{key:"popUntilTagNamePopped",value:function(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Be.NS.HTML);this.shortenToLength(n<0?0:n)}},{key:"shortenToLength",value:function(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}},{key:"popUntilElementPopped",value:function(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}},{key:"popUntilPopped",value:function(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}},{key:"popUntilNumberedHeaderPopped",value:function(){this.popUntilPopped(AEe,Be.NS.HTML)}},{key:"popUntilTableCellPopped",value:function(){this.popUntilPopped(IEe,Be.NS.HTML)}},{key:"popAllUpToHtmlElement",value:function(){this.tmplCount=0,this.shortenToLength(1)}},{key:"_indexOfTagNames",value:function(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}},{key:"clearBackTo",value:function(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}},{key:"clearBackToTableContext",value:function(){this.clearBackTo(xEe,Be.NS.HTML)}},{key:"clearBackToTableBodyContext",value:function(){this.clearBackTo(kEe,Be.NS.HTML)}},{key:"clearBackToTableRowContext",value:function(){this.clearBackTo(OEe,Be.NS.HTML)}},{key:"remove",value:function(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}},{key:"tryPeekProperlyNestedBodyElement",value:function(){return this.stackTop>=1&&this.tagIDs[1]===Be.TAG_ID.BODY?this.items[1]:null}},{key:"contains",value:function(t){return this._indexOf(t)>-1}},{key:"getCommonAncestor",value:function(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}},{key:"isRootHtmlElementCurrent",value:function(){return this.stackTop===0&&this.tagIDs[0]===Be.TAG_ID.HTML}},{key:"hasInScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Be.NS.HTML)return!0;if(cb.get(r)===i)return!1}return!0}},{key:"hasNumberedHeaderInScope",value:function(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if((0,Be.isNumberedHeader)(n)&&r===Be.NS.HTML)return!0;if(cb.get(n)===r)return!1}return!0}},{key:"hasInListItemScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Be.NS.HTML)return!0;if((r===Be.TAG_ID.UL||r===Be.TAG_ID.OL)&&i===Be.NS.HTML||cb.get(r)===i)return!1}return!0}},{key:"hasInButtonScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Be.NS.HTML)return!0;if(r===Be.TAG_ID.BUTTON&&i===Be.NS.HTML||cb.get(r)===i)return!1}return!0}},{key:"hasInTableScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Be.NS.HTML){if(r===t)return!0;if(r===Be.TAG_ID.TABLE||r===Be.TAG_ID.TEMPLATE||r===Be.TAG_ID.HTML)return!1}}return!0}},{key:"hasTableBodyContextInTableScope",value:function(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Be.NS.HTML){if(n===Be.TAG_ID.TBODY||n===Be.TAG_ID.THEAD||n===Be.TAG_ID.TFOOT)return!0;if(n===Be.TAG_ID.TABLE||n===Be.TAG_ID.HTML)return!1}}return!0}},{key:"hasInSelectScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Be.NS.HTML){if(r===t)return!0;if(r!==Be.TAG_ID.OPTION&&r!==Be.TAG_ID.OPTGROUP)return!1}}return!0}},{key:"generateImpliedEndTags",value:function(){for(;OY.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsThoroughly",value:function(){for(;T3.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsWithExclusion",value:function(t){for(;this.currentTagId!==t&&T3.has(this.currentTagId);)this.pop()}}]),e}();z1.OpenElementStack=CEe;var kY={};(function(e){function t(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function n(l,f){for(var h=0;h<f.length;h++){var p=f[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,i(p.key),p)}}function r(l,f,h){return f&&n(l.prototype,f),Object.defineProperty(l,"prototype",{writable:!1}),l}function i(l){var f=o(l,"string");return typeof f=="symbol"?f:String(f)}function o(l,f){if(typeof l!="object"||l===null)return l;var h=l[Symbol.toPrimitive];if(h!==void 0){var p=h.call(l,f);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingElementList=e.EntryType=void 0;const a=3;var s;(function(l){l[l.Marker=0]="Marker",l[l.Element=1]="Element"})(s=e.EntryType||(e.EntryType={}));const u={type:s.Marker};let c=function(){function l(f){t(this,l),this.treeAdapter=f,this.entries=[],this.bookmark=null}return r(l,[{key:"_getNoahArkConditionCandidates",value:function(f,h){const p=[],d=h.length,m=this.treeAdapter.getTagName(f),g=this.treeAdapter.getNamespaceURI(f);for(let v=0;v<this.entries.length;v++){const b=this.entries[v];if(b.type===s.Marker)break;const{element:y}=b;if(this.treeAdapter.getTagName(y)===m&&this.treeAdapter.getNamespaceURI(y)===g){const _=this.treeAdapter.getAttrList(y);_.length===d&&p.push({idx:v,attrs:_})}}return p}},{key:"_ensureNoahArkCondition",value:function(f){if(this.entries.length<a)return;const h=this.treeAdapter.getAttrList(f),p=this._getNoahArkConditionCandidates(f,h);if(p.length<a)return;const d=new Map(h.map(g=>[g.name,g.value]));let m=0;for(let g=0;g<p.length;g++){const v=p[g];v.attrs.every(b=>d.get(b.name)===b.value)&&(m+=1,m>=a&&this.entries.splice(v.idx,1))}}},{key:"insertMarker",value:function(){this.entries.unshift(u)}},{key:"pushElement",value:function(f,h){this._ensureNoahArkCondition(f),this.entries.unshift({type:s.Element,element:f,token:h})}},{key:"insertElementAfterBookmark",value:function(f,h){const p=this.entries.indexOf(this.bookmark);this.entries.splice(p,0,{type:s.Element,element:f,token:h})}},{key:"removeEntry",value:function(f){const h=this.entries.indexOf(f);h>=0&&this.entries.splice(h,1)}},{key:"clearToLastMarker",value:function(){const f=this.entries.indexOf(u);f>=0?this.entries.splice(0,f+1):this.entries.length=0}},{key:"getElementEntryInScopeWithTagName",value:function(f){const h=this.entries.find(p=>p.type===s.Marker||this.treeAdapter.getTagName(p.element)===f);return h&&h.type===s.Element?h:null}},{key:"getElementEntry",value:function(f){return this.entries.find(h=>h.type===s.Element&&h.element===f)}}]),l}();e.FormattingElementList=c})(kY);var V1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTreeAdapter=void 0;const t=qs;function n(r){return{nodeName:"#text",value:r,parentNode:null}}e.defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:t.DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(r,i,o){return{nodeName:r,tagName:r,attrs:o,namespaceURI:i,childNodes:[],parentNode:null}},createCommentNode(r){return{nodeName:"#comment",data:r,parentNode:null}},appendChild(r,i){r.childNodes.push(i),i.parentNode=r},insertBefore(r,i,o){const a=r.childNodes.indexOf(o);r.childNodes.splice(a,0,i),i.parentNode=r},setTemplateContent(r,i){r.content=i},getTemplateContent(r){return r.content},setDocumentType(r,i,o,a){const s=r.childNodes.find(u=>u.nodeName==="#documentType");if(s)s.name=i,s.publicId=o,s.systemId=a;else{const u={nodeName:"#documentType",name:i,publicId:o,systemId:a,parentNode:null};e.defaultTreeAdapter.appendChild(r,u)}},setDocumentMode(r,i){r.mode=i},getDocumentMode(r){return r.mode},detachNode(r){if(r.parentNode){const i=r.parentNode.childNodes.indexOf(r);r.parentNode.childNodes.splice(i,1),r.parentNode=null}},insertText(r,i){if(r.childNodes.length>0){const o=r.childNodes[r.childNodes.length-1];if(e.defaultTreeAdapter.isTextNode(o)){o.value+=i;return}}e.defaultTreeAdapter.appendChild(r,n(i))},insertTextBefore(r,i,o){const a=r.childNodes[r.childNodes.indexOf(o)-1];a&&e.defaultTreeAdapter.isTextNode(a)?a.value+=i:e.defaultTreeAdapter.insertBefore(r,n(i),o)},adoptAttributes(r,i){const o=new Set(r.attrs.map(a=>a.name));for(let a=0;a<i.length;a++)o.has(i[a].name)||r.attrs.push(i[a])},getFirstChild(r){return r.childNodes[0]},getChildNodes(r){return r.childNodes},getParentNode(r){return r.parentNode},getAttrList(r){return r.attrs},getTagName(r){return r.tagName},getNamespaceURI(r){return r.namespaceURI},getTextNodeContent(r){return r.value},getCommentNodeContent(r){return r.data},getDocumentTypeNodeName(r){return r.name},getDocumentTypeNodePublicId(r){return r.publicId},getDocumentTypeNodeSystemId(r){return r.systemId},isTextNode(r){return r.nodeName==="#text"},isCommentNode(r){return r.nodeName==="#comment"},isDocumentTypeNode(r){return r.nodeName==="#documentType"},isElementNode(r){return Object.prototype.hasOwnProperty.call(r,"tagName")},setNodeSourceCodeLocation(r,i){r.sourceCodeLocation=i},getNodeSourceCodeLocation(r){return r.sourceCodeLocation},updateNodeSourceCodeLocation(r,i){r.sourceCodeLocation=Object.assign(Object.assign({},r.sourceCodeLocation),i)}}})(V1);var Sp={};Object.defineProperty(Sp,"__esModule",{value:!0});Sp.getDocumentMode=Sp.isConforming=void 0;const Oh=qs,xY="html",PEe="about:legacy-compat",DEe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",IY=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],REe=[...IY,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],NEe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),CY=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],MEe=[...CY,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function E3(e,t){return t.some(n=>e.startsWith(n))}function LEe(e){return e.name===xY&&e.publicId===null&&(e.systemId===null||e.systemId===PEe)}Sp.isConforming=LEe;function jEe(e){if(e.name!==xY)return Oh.DOCUMENT_MODE.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===DEe)return Oh.DOCUMENT_MODE.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),NEe.has(n))return Oh.DOCUMENT_MODE.QUIRKS;let r=t===null?REe:IY;if(E3(n,r))return Oh.DOCUMENT_MODE.QUIRKS;if(r=t===null?CY:MEe,E3(n,r))return Oh.DOCUMENT_MODE.LIMITED_QUIRKS}return Oh.DOCUMENT_MODE.NO_QUIRKS}Sp.getDocumentMode=jEe;var yN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIntegrationPoint=e.adjustTokenSVGTagName=e.adjustTokenXMLAttrs=e.adjustTokenSVGAttrs=e.adjustTokenMathMLAttrs=e.causesExit=e.SVG_TAG_NAMES_ADJUSTMENT_MAP=void 0;const t=qs,n={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},r="definitionurl",i="definitionURL",o=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(g=>[g.toLowerCase(),g])),a=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:t.NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:t.NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:t.NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:t.NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:t.NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:t.NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:t.NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:t.NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:t.NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:t.NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:t.NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:t.NS.XMLNS}]]);e.SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(g=>[g.toLowerCase(),g]));const s=new Set([t.TAG_ID.B,t.TAG_ID.BIG,t.TAG_ID.BLOCKQUOTE,t.TAG_ID.BODY,t.TAG_ID.BR,t.TAG_ID.CENTER,t.TAG_ID.CODE,t.TAG_ID.DD,t.TAG_ID.DIV,t.TAG_ID.DL,t.TAG_ID.DT,t.TAG_ID.EM,t.TAG_ID.EMBED,t.TAG_ID.H1,t.TAG_ID.H2,t.TAG_ID.H3,t.TAG_ID.H4,t.TAG_ID.H5,t.TAG_ID.H6,t.TAG_ID.HEAD,t.TAG_ID.HR,t.TAG_ID.I,t.TAG_ID.IMG,t.TAG_ID.LI,t.TAG_ID.LISTING,t.TAG_ID.MENU,t.TAG_ID.META,t.TAG_ID.NOBR,t.TAG_ID.OL,t.TAG_ID.P,t.TAG_ID.PRE,t.TAG_ID.RUBY,t.TAG_ID.S,t.TAG_ID.SMALL,t.TAG_ID.SPAN,t.TAG_ID.STRONG,t.TAG_ID.STRIKE,t.TAG_ID.SUB,t.TAG_ID.SUP,t.TAG_ID.TABLE,t.TAG_ID.TT,t.TAG_ID.U,t.TAG_ID.UL,t.TAG_ID.VAR]);function u(g){const v=g.tagID;return v===t.TAG_ID.FONT&&g.attrs.some(({name:b})=>b===t.ATTRS.COLOR||b===t.ATTRS.SIZE||b===t.ATTRS.FACE)||s.has(v)}e.causesExit=u;function c(g){for(let v=0;v<g.attrs.length;v++)if(g.attrs[v].name===r){g.attrs[v].name=i;break}}e.adjustTokenMathMLAttrs=c;function l(g){for(let v=0;v<g.attrs.length;v++){const b=o.get(g.attrs[v].name);b!=null&&(g.attrs[v].name=b)}}e.adjustTokenSVGAttrs=l;function f(g){for(let v=0;v<g.attrs.length;v++){const b=a.get(g.attrs[v].name);b&&(g.attrs[v].prefix=b.prefix,g.attrs[v].name=b.name,g.attrs[v].namespace=b.namespace)}}e.adjustTokenXMLAttrs=f;function h(g){const v=e.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(g.tagName);v!=null&&(g.tagName=v,g.tagID=(0,t.getTagID)(g.tagName))}e.adjustTokenSVGTagName=h;function p(g,v){return v===t.NS.MATHML&&(g===t.TAG_ID.MI||g===t.TAG_ID.MO||g===t.TAG_ID.MN||g===t.TAG_ID.MS||g===t.TAG_ID.MTEXT)}function d(g,v,b){if(v===t.NS.MATHML&&g===t.TAG_ID.ANNOTATION_XML){for(let y=0;y<b.length;y++)if(b[y].name===t.ATTRS.ENCODING){const _=b[y].value.toLowerCase();return _===n.TEXT_HTML||_===n.APPLICATION_XML}}return v===t.NS.SVG&&(g===t.TAG_ID.FOREIGN_OBJECT||g===t.TAG_ID.DESC||g===t.TAG_ID.TITLE)}function m(g,v,b,y){return(!y||y===t.NS.HTML)&&d(g,v,b)||(!y||y===t.NS.MATHML)&&p(g,v)}e.isIntegrationPoint=m})(yN);function BEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GEe(r.key),r)}}function FEe(e,t,n){return t&&S3(e.prototype,t),n&&S3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function GEe(e){var t=HEe(e,"string");return typeof t=="symbol"?t:String(t)}function HEe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}Object.defineProperty(ay,"__esModule",{value:!0});ay.Parser=void 0;const ci=_c,UEe=z1,w3=kY,zEe=V1,A3=Sp,va=yN,Hn=nv,PY=H1,P=qs,cn=U1,VEe="hidden",YEe=8,XEe=3;var ce;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ce||(ce={}));const WEe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},DY=new Set([P.TAG_ID.TABLE,P.TAG_ID.TBODY,P.TAG_ID.TFOOT,P.TAG_ID.THEAD,P.TAG_ID.TR]),O3={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:zEe.defaultTreeAdapter,onParseError:null};let qEe=function(){function e(t,n,r=null,i=null){BEe(this,e),this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ce.INITIAL,this.originalInsertionMode=ce.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=Object.assign(Object.assign({},O3),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new ci.Tokenizer(this.options,this),this.activeFormattingElements=new w3.FormattingElementList(this.treeAdapter),this.fragmentContextID=r?(0,P.getTagID)(this.treeAdapter.getTagName(r)):P.TAG_ID.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new UEe.OpenElementStack(this.document,this.treeAdapter,this)}return FEe(e,[{key:"getFragment",value:function(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}},{key:"_err",value:function(t,n,r){var i;if(!this.onParseError)return;const o=(i=t.location)!==null&&i!==void 0?i:WEe,a={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(a)}},{key:"onItemPush",value:function(t,n,r){var i,o;(o=(i=this.treeAdapter).onItemPush)===null||o===void 0||o.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}},{key:"onItemPop",value:function(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let o,a;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,a=this.fragmentContextID):{current:o,currentTagId:a}=this.openElements,this._setContextModes(o,a)}}},{key:"_setContextModes",value:function(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===P.NS.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}},{key:"_switchToTextParsing",value:function(t,n){this._insertElement(t,P.NS.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ce.TEXT}},{key:"switchToPlaintextParsing",value:function(){this.insertionMode=ce.TEXT,this.originalInsertionMode=ce.IN_BODY,this.tokenizer.state=ci.TokenizerMode.PLAINTEXT}},{key:"_getAdjustedCurrentElement",value:function(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}},{key:"_findFormInFragmentContext",value:function(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===P.TAG_NAMES.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}},{key:"_initTokenizerForFragmentParsing",value:function(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==P.NS.HTML))switch(this.fragmentContextID){case P.TAG_ID.TITLE:case P.TAG_ID.TEXTAREA:{this.tokenizer.state=ci.TokenizerMode.RCDATA;break}case P.TAG_ID.STYLE:case P.TAG_ID.XMP:case P.TAG_ID.IFRAME:case P.TAG_ID.NOEMBED:case P.TAG_ID.NOFRAMES:case P.TAG_ID.NOSCRIPT:{this.tokenizer.state=ci.TokenizerMode.RAWTEXT;break}case P.TAG_ID.SCRIPT:{this.tokenizer.state=ci.TokenizerMode.SCRIPT_DATA;break}case P.TAG_ID.PLAINTEXT:{this.tokenizer.state=ci.TokenizerMode.PLAINTEXT;break}}}},{key:"_setDocumentType",value:function(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}},{key:"_attachElementToTree",value:function(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&Object.assign(Object.assign({},n),{startTag:n});this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}},{key:"_appendElement",value:function(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}},{key:"_insertElement",value:function(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}},{key:"_insertFakeElement",value:function(t,n){const r=this.treeAdapter.createElement(t,P.NS.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}},{key:"_insertTemplate",value:function(t){const n=this.treeAdapter.createElement(t.tagName,P.NS.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}},{key:"_insertFakeRootElement",value:function(){const t=this.treeAdapter.createElement(P.TAG_NAMES.HTML,P.NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,P.TAG_ID.HTML)}},{key:"_appendCommentNode",value:function(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}},{key:"_insertCharacters",value:function(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),o=r?i.lastIndexOf(r):i.length,a=i[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:s,endCol:u,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:s,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}},{key:"_adoptNodes",value:function(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}},{key:"_setEndLocation",value:function(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),o=n.type===cn.TokenType.END_TAG&&i===n.tagName?{endTag:Object.assign({},r),endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}},{key:"shouldProcessStartTagTokenInForeignContent",value:function(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===P.TAG_ID.SVG&&this.treeAdapter.getTagName(n)===P.TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===P.NS.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===P.TAG_ID.MGLYPH||t.tagID===P.TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(r,n,P.NS.HTML)}},{key:"_processToken",value:function(t){switch(t.type){case cn.TokenType.CHARACTER:{this.onCharacter(t);break}case cn.TokenType.NULL_CHARACTER:{this.onNullCharacter(t);break}case cn.TokenType.COMMENT:{this.onComment(t);break}case cn.TokenType.DOCTYPE:{this.onDoctype(t);break}case cn.TokenType.START_TAG:{this._processStartTag(t);break}case cn.TokenType.END_TAG:{this.onEndTag(t);break}case cn.TokenType.EOF:{this.onEof(t);break}case cn.TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}},{key:"_isIntegrationPoint",value:function(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return va.isIntegrationPoint(t,i,o,r)}},{key:"_reconstructActiveFormattingElements",value:function(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===w3.EntryType.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const o=this.activeFormattingElements.entries[i];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}},{key:"_closeTableCell",value:function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ce.IN_ROW}},{key:"_closePElement",value:function(){this.openElements.generateImpliedEndTagsWithExclusion(P.TAG_ID.P),this.openElements.popUntilTagNamePopped(P.TAG_ID.P)}},{key:"_resetInsertionMode",value:function(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case P.TAG_ID.TR:{this.insertionMode=ce.IN_ROW;return}case P.TAG_ID.TBODY:case P.TAG_ID.THEAD:case P.TAG_ID.TFOOT:{this.insertionMode=ce.IN_TABLE_BODY;return}case P.TAG_ID.CAPTION:{this.insertionMode=ce.IN_CAPTION;return}case P.TAG_ID.COLGROUP:{this.insertionMode=ce.IN_COLUMN_GROUP;return}case P.TAG_ID.TABLE:{this.insertionMode=ce.IN_TABLE;return}case P.TAG_ID.BODY:{this.insertionMode=ce.IN_BODY;return}case P.TAG_ID.FRAMESET:{this.insertionMode=ce.IN_FRAMESET;return}case P.TAG_ID.SELECT:{this._resetInsertionModeForSelect(t);return}case P.TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case P.TAG_ID.HTML:{this.insertionMode=this.headElement?ce.AFTER_HEAD:ce.BEFORE_HEAD;return}case P.TAG_ID.TD:case P.TAG_ID.TH:{if(t>0){this.insertionMode=ce.IN_CELL;return}break}case P.TAG_ID.HEAD:{if(t>0){this.insertionMode=ce.IN_HEAD;return}break}}this.insertionMode=ce.IN_BODY}},{key:"_resetInsertionModeForSelect",value:function(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===P.TAG_ID.TEMPLATE)break;if(r===P.TAG_ID.TABLE){this.insertionMode=ce.IN_SELECT_IN_TABLE;return}}this.insertionMode=ce.IN_SELECT}},{key:"_isElementCausesFosterParenting",value:function(t){return DY.has(t)}},{key:"_shouldFosterParentOnInsertion",value:function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}},{key:"_findFosterParentingLocation",value:function(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case P.TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===P.NS.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case P.TAG_ID.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}},{key:"_fosterParentElement",value:function(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}},{key:"_isSpecialElement",value:function(t,n){const r=this.treeAdapter.getNamespaceURI(t);return P.SPECIAL_ELEMENTS[r].has(n)}},{key:"onCharacter",value:function(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){wSe(this,t);return}switch(this.insertionMode){case ce.INITIAL:{Zd(this,t);break}case ce.BEFORE_HTML:{ng(this,t);break}case ce.BEFORE_HEAD:{ig(this,t);break}case ce.IN_HEAD:{og(this,t);break}case ce.IN_HEAD_NO_SCRIPT:{ag(this,t);break}case ce.AFTER_HEAD:{sg(this,t);break}case ce.IN_BODY:case ce.IN_CAPTION:case ce.IN_CELL:case ce.IN_TEMPLATE:{NY(this,t);break}case ce.TEXT:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{UA(this,t);break}case ce.IN_TABLE_TEXT:{GY(this,t);break}case ce.IN_COLUMN_GROUP:{Y_(this,t);break}case ce.AFTER_BODY:{X_(this,t);break}case ce.AFTER_AFTER_BODY:{h0(this,t);break}}}},{key:"onNullCharacter",value:function(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){SSe(this,t);return}switch(this.insertionMode){case ce.INITIAL:{Zd(this,t);break}case ce.BEFORE_HTML:{ng(this,t);break}case ce.BEFORE_HEAD:{ig(this,t);break}case ce.IN_HEAD:{og(this,t);break}case ce.IN_HEAD_NO_SCRIPT:{ag(this,t);break}case ce.AFTER_HEAD:{sg(this,t);break}case ce.TEXT:{this._insertCharacters(t);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{UA(this,t);break}case ce.IN_COLUMN_GROUP:{Y_(this,t);break}case ce.AFTER_BODY:{X_(this,t);break}case ce.AFTER_AFTER_BODY:{h0(this,t);break}}}},{key:"onComment",value:function(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Fx(this,t);return}switch(this.insertionMode){case ce.INITIAL:case ce.BEFORE_HTML:case ce.BEFORE_HEAD:case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:case ce.IN_BODY:case ce.IN_TABLE:case ce.IN_CAPTION:case ce.IN_COLUMN_GROUP:case ce.IN_TABLE_BODY:case ce.IN_ROW:case ce.IN_CELL:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:case ce.IN_TEMPLATE:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:{Fx(this,t);break}case ce.IN_TABLE_TEXT:{Jd(this,t);break}case ce.AFTER_BODY:{t1e(this,t);break}case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{r1e(this,t);break}}}},{key:"onDoctype",value:function(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ce.INITIAL:{n1e(this,t);break}case ce.BEFORE_HEAD:case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:{this._err(t,Hn.ERR.misplacedDoctype);break}case ce.IN_TABLE_TEXT:{Jd(this,t);break}}}},{key:"onStartTag",value:function(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Hn.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}},{key:"_processStartTag",value:function(t){this.shouldProcessStartTagTokenInForeignContent(t)?ASe(this,t):this._startTagOutsideForeignContent(t)}},{key:"_startTagOutsideForeignContent",value:function(t){switch(this.insertionMode){case ce.INITIAL:{Zd(this,t);break}case ce.BEFORE_HTML:{i1e(this,t);break}case ce.BEFORE_HEAD:{a1e(this,t);break}case ce.IN_HEAD:{ia(this,t);break}case ce.IN_HEAD_NO_SCRIPT:{u1e(this,t);break}case ce.AFTER_HEAD:{h1e(this,t);break}case ce.IN_BODY:{ni(this,t);break}case ce.IN_TABLE:{wp(this,t);break}case ce.IN_TABLE_TEXT:{Jd(this,t);break}case ce.IN_CAPTION:{sSe(this,t);break}case ce.IN_COLUMN_GROUP:{_N(this,t);break}case ce.IN_TABLE_BODY:{W1(this,t);break}case ce.IN_ROW:{q1(this,t);break}case ce.IN_CELL:{cSe(this,t);break}case ce.IN_SELECT:{zY(this,t);break}case ce.IN_SELECT_IN_TABLE:{fSe(this,t);break}case ce.IN_TEMPLATE:{dSe(this,t);break}case ce.AFTER_BODY:{gSe(this,t);break}case ce.IN_FRAMESET:{ySe(this,t);break}case ce.AFTER_FRAMESET:{bSe(this,t);break}case ce.AFTER_AFTER_BODY:{TSe(this,t);break}case ce.AFTER_AFTER_FRAMESET:{ESe(this,t);break}}}},{key:"onEndTag",value:function(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?OSe(this,t):this._endTagOutsideForeignContent(t)}},{key:"_endTagOutsideForeignContent",value:function(t){switch(this.insertionMode){case ce.INITIAL:{Zd(this,t);break}case ce.BEFORE_HTML:{o1e(this,t);break}case ce.BEFORE_HEAD:{s1e(this,t);break}case ce.IN_HEAD:{l1e(this,t);break}case ce.IN_HEAD_NO_SCRIPT:{c1e(this,t);break}case ce.AFTER_HEAD:{f1e(this,t);break}case ce.IN_BODY:{X1(this,t);break}case ce.TEXT:{Q1e(this,t);break}case ce.IN_TABLE:{sy(this,t);break}case ce.IN_TABLE_TEXT:{Jd(this,t);break}case ce.IN_CAPTION:{lSe(this,t);break}case ce.IN_COLUMN_GROUP:{uSe(this,t);break}case ce.IN_TABLE_BODY:{Gx(this,t);break}case ce.IN_ROW:{UY(this,t);break}case ce.IN_CELL:{hSe(this,t);break}case ce.IN_SELECT:{VY(this,t);break}case ce.IN_SELECT_IN_TABLE:{pSe(this,t);break}case ce.IN_TEMPLATE:{mSe(this,t);break}case ce.AFTER_BODY:{XY(this,t);break}case ce.IN_FRAMESET:{vSe(this,t);break}case ce.AFTER_FRAMESET:{_Se(this,t);break}case ce.AFTER_AFTER_BODY:{h0(this,t);break}}}},{key:"onEof",value:function(t){switch(this.insertionMode){case ce.INITIAL:{Zd(this,t);break}case ce.BEFORE_HTML:{ng(this,t);break}case ce.BEFORE_HEAD:{ig(this,t);break}case ce.IN_HEAD:{og(this,t);break}case ce.IN_HEAD_NO_SCRIPT:{ag(this,t);break}case ce.AFTER_HEAD:{sg(this,t);break}case ce.IN_BODY:case ce.IN_TABLE:case ce.IN_CAPTION:case ce.IN_COLUMN_GROUP:case ce.IN_TABLE_BODY:case ce.IN_ROW:case ce.IN_CELL:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:{BY(this,t);break}case ce.TEXT:{Z1e(this,t);break}case ce.IN_TABLE_TEXT:{Jd(this,t);break}case ce.IN_TEMPLATE:{YY(this,t);break}case ce.AFTER_BODY:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{bN(this,t);break}}}},{key:"onWhitespaceCharacter",value:function(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===PY.CODE_POINTS.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:case ce.TEXT:case ce.IN_COLUMN_GROUP:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:{this._insertCharacters(t);break}case ce.IN_BODY:case ce.IN_CAPTION:case ce.IN_CELL:case ce.IN_TEMPLATE:case ce.AFTER_BODY:case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{RY(this,t);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{UA(this,t);break}case ce.IN_TABLE_TEXT:{FY(this,t);break}}}}],[{key:"parse",value:function(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}},{key:"getFragmentParser",value:function(t,n){const r=Object.assign(Object.assign({},O3),n);t??(t=r.treeAdapter.createElement(P.TAG_NAMES.TEMPLATE,P.NS.HTML,[]));const i=r.treeAdapter.createElement("documentmock",P.NS.HTML,[]),o=new this(r,i,t);return o.fragmentContextID===P.TAG_ID.TEMPLATE&&o.tmplInsertionModeStack.unshift(ce.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}}]),e}();ay.Parser=qEe;function $Ee(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):jY(e,t),n}function KEe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function QEe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,a=i;a!==n;o++,a=i){i=e.openElements.getCommonAncestor(a);const s=e.activeFormattingElements.getElementEntry(a),u=s&&o>=XEe;!s||u?(u&&e.activeFormattingElements.removeEntry(s),e.openElements.remove(a)):(a=ZEe(e,s),r===t&&(e.activeFormattingElements.bookmark=s),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function ZEe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function JEe(e,t,n){const r=e.treeAdapter.getTagName(t),i=(0,P.getTagID)(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const o=e.treeAdapter.getNamespaceURI(t);i===P.TAG_ID.TEMPLATE&&o===P.NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function e1e(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,i.tagID)}function vN(e,t){for(let n=0;n<YEe;n++){const r=$Ee(e,t);if(!r)break;const i=KEe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const o=QEe(e,i,r.element),a=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(o),a&&JEe(e,a,o),e1e(e,i,r)}}function Fx(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function t1e(e,t){e._appendCommentNode(t,e.openElements.items[0])}function r1e(e,t){e._appendCommentNode(t,e.document)}function bN(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(o);a&&!a.endTag&&e._setEndLocation(o,t)}}}}function n1e(e,t){e._setDocumentType(t);const n=t.forceQuirks?P.DOCUMENT_MODE.QUIRKS:A3.getDocumentMode(t);A3.isConforming(t)||e._err(t,Hn.ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ce.BEFORE_HTML}function Zd(e,t){e._err(t,Hn.ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,P.DOCUMENT_MODE.QUIRKS),e.insertionMode=ce.BEFORE_HTML,e._processToken(t)}function i1e(e,t){t.tagID===P.TAG_ID.HTML?(e._insertElement(t,P.NS.HTML),e.insertionMode=ce.BEFORE_HEAD):ng(e,t)}function o1e(e,t){const n=t.tagID;(n===P.TAG_ID.HTML||n===P.TAG_ID.HEAD||n===P.TAG_ID.BODY||n===P.TAG_ID.BR)&&ng(e,t)}function ng(e,t){e._insertFakeRootElement(),e.insertionMode=ce.BEFORE_HEAD,e._processToken(t)}function a1e(e,t){switch(t.tagID){case P.TAG_ID.HTML:{ni(e,t);break}case P.TAG_ID.HEAD:{e._insertElement(t,P.NS.HTML),e.headElement=e.openElements.current,e.insertionMode=ce.IN_HEAD;break}default:ig(e,t)}}function s1e(e,t){const n=t.tagID;n===P.TAG_ID.HEAD||n===P.TAG_ID.BODY||n===P.TAG_ID.HTML||n===P.TAG_ID.BR?ig(e,t):e._err(t,Hn.ERR.endTagWithoutMatchingOpenElement)}function ig(e,t){e._insertFakeElement(P.TAG_NAMES.HEAD,P.TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=ce.IN_HEAD,e._processToken(t)}function ia(e,t){switch(t.tagID){case P.TAG_ID.HTML:{ni(e,t);break}case P.TAG_ID.BASE:case P.TAG_ID.BASEFONT:case P.TAG_ID.BGSOUND:case P.TAG_ID.LINK:case P.TAG_ID.META:{e._appendElement(t,P.NS.HTML),t.ackSelfClosing=!0;break}case P.TAG_ID.TITLE:{e._switchToTextParsing(t,ci.TokenizerMode.RCDATA);break}case P.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ci.TokenizerMode.RAWTEXT):(e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_HEAD_NO_SCRIPT);break}case P.TAG_ID.NOFRAMES:case P.TAG_ID.STYLE:{e._switchToTextParsing(t,ci.TokenizerMode.RAWTEXT);break}case P.TAG_ID.SCRIPT:{e._switchToTextParsing(t,ci.TokenizerMode.SCRIPT_DATA);break}case P.TAG_ID.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ce.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ce.IN_TEMPLATE);break}case P.TAG_ID.HEAD:{e._err(t,Hn.ERR.misplacedStartTagForHeadElement);break}default:og(e,t)}}function l1e(e,t){switch(t.tagID){case P.TAG_ID.HEAD:{e.openElements.pop(),e.insertionMode=ce.AFTER_HEAD;break}case P.TAG_ID.BODY:case P.TAG_ID.BR:case P.TAG_ID.HTML:{og(e,t);break}case P.TAG_ID.TEMPLATE:{th(e,t);break}default:e._err(t,Hn.ERR.endTagWithoutMatchingOpenElement)}}function th(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==P.TAG_ID.TEMPLATE&&e._err(t,Hn.ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(P.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Hn.ERR.endTagWithoutMatchingOpenElement)}function og(e,t){e.openElements.pop(),e.insertionMode=ce.AFTER_HEAD,e._processToken(t)}function u1e(e,t){switch(t.tagID){case P.TAG_ID.HTML:{ni(e,t);break}case P.TAG_ID.BASEFONT:case P.TAG_ID.BGSOUND:case P.TAG_ID.HEAD:case P.TAG_ID.LINK:case P.TAG_ID.META:case P.TAG_ID.NOFRAMES:case P.TAG_ID.STYLE:{ia(e,t);break}case P.TAG_ID.NOSCRIPT:{e._err(t,Hn.ERR.nestedNoscriptInHead);break}default:ag(e,t)}}function c1e(e,t){switch(t.tagID){case P.TAG_ID.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ce.IN_HEAD;break}case P.TAG_ID.BR:{ag(e,t);break}default:e._err(t,Hn.ERR.endTagWithoutMatchingOpenElement)}}function ag(e,t){const n=t.type===cn.TokenType.EOF?Hn.ERR.openElementsLeftAfterEof:Hn.ERR.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ce.IN_HEAD,e._processToken(t)}function h1e(e,t){switch(t.tagID){case P.TAG_ID.HTML:{ni(e,t);break}case P.TAG_ID.BODY:{e._insertElement(t,P.NS.HTML),e.framesetOk=!1,e.insertionMode=ce.IN_BODY;break}case P.TAG_ID.FRAMESET:{e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_FRAMESET;break}case P.TAG_ID.BASE:case P.TAG_ID.BASEFONT:case P.TAG_ID.BGSOUND:case P.TAG_ID.LINK:case P.TAG_ID.META:case P.TAG_ID.NOFRAMES:case P.TAG_ID.SCRIPT:case P.TAG_ID.STYLE:case P.TAG_ID.TEMPLATE:case P.TAG_ID.TITLE:{e._err(t,Hn.ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,P.TAG_ID.HEAD),ia(e,t),e.openElements.remove(e.headElement);break}case P.TAG_ID.HEAD:{e._err(t,Hn.ERR.misplacedStartTagForHeadElement);break}default:sg(e,t)}}function f1e(e,t){switch(t.tagID){case P.TAG_ID.BODY:case P.TAG_ID.HTML:case P.TAG_ID.BR:{sg(e,t);break}case P.TAG_ID.TEMPLATE:{th(e,t);break}default:e._err(t,Hn.ERR.endTagWithoutMatchingOpenElement)}}function sg(e,t){e._insertFakeElement(P.TAG_NAMES.BODY,P.TAG_ID.BODY),e.insertionMode=ce.IN_BODY,Y1(e,t)}function Y1(e,t){switch(t.type){case cn.TokenType.CHARACTER:{NY(e,t);break}case cn.TokenType.WHITESPACE_CHARACTER:{RY(e,t);break}case cn.TokenType.COMMENT:{Fx(e,t);break}case cn.TokenType.START_TAG:{ni(e,t);break}case cn.TokenType.END_TAG:{X1(e,t);break}case cn.TokenType.EOF:{BY(e,t);break}}}function RY(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function NY(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function p1e(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function d1e(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function m1e(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_FRAMESET)}function g1e(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML)}function y1e(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),(0,P.isNumberedHeader)(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,P.NS.HTML)}function v1e(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function b1e(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML),n||(e.formElement=e.openElements.current))}function _1e(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===P.TAG_ID.LI&&i===P.TAG_ID.LI||(n===P.TAG_ID.DD||n===P.TAG_ID.DT)&&(i===P.TAG_ID.DD||i===P.TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==P.TAG_ID.ADDRESS&&i!==P.TAG_ID.DIV&&i!==P.TAG_ID.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML)}function T1e(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML),e.tokenizer.state=ci.TokenizerMode.PLAINTEXT}function E1e(e,t){e.openElements.hasInScope(P.TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(P.TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.framesetOk=!1}function S1e(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(P.TAG_NAMES.A);n&&(vN(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function w1e(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function A1e(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(P.TAG_ID.NOBR)&&(vN(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,P.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function O1e(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function k1e(e,t){e.treeAdapter.getDocumentMode(e.document)!==P.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._insertElement(t,P.NS.HTML),e.framesetOk=!1,e.insertionMode=ce.IN_TABLE}function MY(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,P.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function LY(e){const t=(0,cn.getTokenAttr)(e,P.ATTRS.TYPE);return t!=null&&t.toLowerCase()===VEe}function x1e(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,P.NS.HTML),LY(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function I1e(e,t){e._appendElement(t,P.NS.HTML),t.ackSelfClosing=!0}function C1e(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._appendElement(t,P.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function P1e(e,t){t.tagName=P.TAG_NAMES.IMG,t.tagID=P.TAG_ID.IMG,MY(e,t)}function D1e(e,t){e._insertElement(t,P.NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ci.TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ce.TEXT}function R1e(e,t){e.openElements.hasInButtonScope(P.TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ci.TokenizerMode.RAWTEXT)}function N1e(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ci.TokenizerMode.RAWTEXT)}function k3(e,t){e._switchToTextParsing(t,ci.TokenizerMode.RAWTEXT)}function M1e(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ce.IN_TABLE||e.insertionMode===ce.IN_CAPTION||e.insertionMode===ce.IN_TABLE_BODY||e.insertionMode===ce.IN_ROW||e.insertionMode===ce.IN_CELL?ce.IN_SELECT_IN_TABLE:ce.IN_SELECT}function L1e(e,t){e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML)}function j1e(e,t){e.openElements.hasInScope(P.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,P.NS.HTML)}function B1e(e,t){e.openElements.hasInScope(P.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(P.TAG_ID.RTC),e._insertElement(t,P.NS.HTML)}function F1e(e,t){e._reconstructActiveFormattingElements(),va.adjustTokenMathMLAttrs(t),va.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,P.NS.MATHML):e._insertElement(t,P.NS.MATHML),t.ackSelfClosing=!0}function G1e(e,t){e._reconstructActiveFormattingElements(),va.adjustTokenSVGAttrs(t),va.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,P.NS.SVG):e._insertElement(t,P.NS.SVG),t.ackSelfClosing=!0}function x3(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,P.NS.HTML)}function ni(e,t){switch(t.tagID){case P.TAG_ID.I:case P.TAG_ID.S:case P.TAG_ID.B:case P.TAG_ID.U:case P.TAG_ID.EM:case P.TAG_ID.TT:case P.TAG_ID.BIG:case P.TAG_ID.CODE:case P.TAG_ID.FONT:case P.TAG_ID.SMALL:case P.TAG_ID.STRIKE:case P.TAG_ID.STRONG:{w1e(e,t);break}case P.TAG_ID.A:{S1e(e,t);break}case P.TAG_ID.H1:case P.TAG_ID.H2:case P.TAG_ID.H3:case P.TAG_ID.H4:case P.TAG_ID.H5:case P.TAG_ID.H6:{y1e(e,t);break}case P.TAG_ID.P:case P.TAG_ID.DL:case P.TAG_ID.OL:case P.TAG_ID.UL:case P.TAG_ID.DIV:case P.TAG_ID.DIR:case P.TAG_ID.NAV:case P.TAG_ID.MAIN:case P.TAG_ID.MENU:case P.TAG_ID.ASIDE:case P.TAG_ID.CENTER:case P.TAG_ID.FIGURE:case P.TAG_ID.FOOTER:case P.TAG_ID.HEADER:case P.TAG_ID.HGROUP:case P.TAG_ID.DIALOG:case P.TAG_ID.DETAILS:case P.TAG_ID.ADDRESS:case P.TAG_ID.ARTICLE:case P.TAG_ID.SECTION:case P.TAG_ID.SUMMARY:case P.TAG_ID.FIELDSET:case P.TAG_ID.BLOCKQUOTE:case P.TAG_ID.FIGCAPTION:{g1e(e,t);break}case P.TAG_ID.LI:case P.TAG_ID.DD:case P.TAG_ID.DT:{_1e(e,t);break}case P.TAG_ID.BR:case P.TAG_ID.IMG:case P.TAG_ID.WBR:case P.TAG_ID.AREA:case P.TAG_ID.EMBED:case P.TAG_ID.KEYGEN:{MY(e,t);break}case P.TAG_ID.HR:{C1e(e,t);break}case P.TAG_ID.RB:case P.TAG_ID.RTC:{j1e(e,t);break}case P.TAG_ID.RT:case P.TAG_ID.RP:{B1e(e,t);break}case P.TAG_ID.PRE:case P.TAG_ID.LISTING:{v1e(e,t);break}case P.TAG_ID.XMP:{R1e(e,t);break}case P.TAG_ID.SVG:{G1e(e,t);break}case P.TAG_ID.HTML:{p1e(e,t);break}case P.TAG_ID.BASE:case P.TAG_ID.LINK:case P.TAG_ID.META:case P.TAG_ID.STYLE:case P.TAG_ID.TITLE:case P.TAG_ID.SCRIPT:case P.TAG_ID.BGSOUND:case P.TAG_ID.BASEFONT:case P.TAG_ID.TEMPLATE:{ia(e,t);break}case P.TAG_ID.BODY:{d1e(e,t);break}case P.TAG_ID.FORM:{b1e(e,t);break}case P.TAG_ID.NOBR:{A1e(e,t);break}case P.TAG_ID.MATH:{F1e(e,t);break}case P.TAG_ID.TABLE:{k1e(e,t);break}case P.TAG_ID.INPUT:{x1e(e,t);break}case P.TAG_ID.PARAM:case P.TAG_ID.TRACK:case P.TAG_ID.SOURCE:{I1e(e,t);break}case P.TAG_ID.IMAGE:{P1e(e,t);break}case P.TAG_ID.BUTTON:{E1e(e,t);break}case P.TAG_ID.APPLET:case P.TAG_ID.OBJECT:case P.TAG_ID.MARQUEE:{O1e(e,t);break}case P.TAG_ID.IFRAME:{N1e(e,t);break}case P.TAG_ID.SELECT:{M1e(e,t);break}case P.TAG_ID.OPTION:case P.TAG_ID.OPTGROUP:{L1e(e,t);break}case P.TAG_ID.NOEMBED:{k3(e,t);break}case P.TAG_ID.FRAMESET:{m1e(e,t);break}case P.TAG_ID.TEXTAREA:{D1e(e,t);break}case P.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?k3(e,t):x3(e,t);break}case P.TAG_ID.PLAINTEXT:{T1e(e,t);break}case P.TAG_ID.COL:case P.TAG_ID.TH:case P.TAG_ID.TD:case P.TAG_ID.TR:case P.TAG_ID.HEAD:case P.TAG_ID.FRAME:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:case P.TAG_ID.CAPTION:case P.TAG_ID.COLGROUP:break;default:x3(e,t)}}function H1e(e,t){if(e.openElements.hasInScope(P.TAG_ID.BODY)&&(e.insertionMode=ce.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function U1e(e,t){e.openElements.hasInScope(P.TAG_ID.BODY)&&(e.insertionMode=ce.AFTER_BODY,XY(e,t))}function z1e(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function V1e(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(P.TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(P.TAG_ID.FORM):n&&e.openElements.remove(n))}function Y1e(e){e.openElements.hasInButtonScope(P.TAG_ID.P)||e._insertFakeElement(P.TAG_NAMES.P,P.TAG_ID.P),e._closePElement()}function X1e(e){e.openElements.hasInListItemScope(P.TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(P.TAG_ID.LI),e.openElements.popUntilTagNamePopped(P.TAG_ID.LI))}function W1e(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function q1e(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function $1e(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function K1e(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(P.TAG_NAMES.BR,P.TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}function jY(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const o=e.openElements.items[i],a=e.openElements.tagIDs[i];if(r===a&&(r!==P.TAG_ID.UNKNOWN||e.treeAdapter.getTagName(o)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(o,a))break}}function X1(e,t){switch(t.tagID){case P.TAG_ID.A:case P.TAG_ID.B:case P.TAG_ID.I:case P.TAG_ID.S:case P.TAG_ID.U:case P.TAG_ID.EM:case P.TAG_ID.TT:case P.TAG_ID.BIG:case P.TAG_ID.CODE:case P.TAG_ID.FONT:case P.TAG_ID.NOBR:case P.TAG_ID.SMALL:case P.TAG_ID.STRIKE:case P.TAG_ID.STRONG:{vN(e,t);break}case P.TAG_ID.P:{Y1e(e);break}case P.TAG_ID.DL:case P.TAG_ID.UL:case P.TAG_ID.OL:case P.TAG_ID.DIR:case P.TAG_ID.DIV:case P.TAG_ID.NAV:case P.TAG_ID.PRE:case P.TAG_ID.MAIN:case P.TAG_ID.MENU:case P.TAG_ID.ASIDE:case P.TAG_ID.BUTTON:case P.TAG_ID.CENTER:case P.TAG_ID.FIGURE:case P.TAG_ID.FOOTER:case P.TAG_ID.HEADER:case P.TAG_ID.HGROUP:case P.TAG_ID.DIALOG:case P.TAG_ID.ADDRESS:case P.TAG_ID.ARTICLE:case P.TAG_ID.DETAILS:case P.TAG_ID.SECTION:case P.TAG_ID.SUMMARY:case P.TAG_ID.LISTING:case P.TAG_ID.FIELDSET:case P.TAG_ID.BLOCKQUOTE:case P.TAG_ID.FIGCAPTION:{z1e(e,t);break}case P.TAG_ID.LI:{X1e(e);break}case P.TAG_ID.DD:case P.TAG_ID.DT:{W1e(e,t);break}case P.TAG_ID.H1:case P.TAG_ID.H2:case P.TAG_ID.H3:case P.TAG_ID.H4:case P.TAG_ID.H5:case P.TAG_ID.H6:{q1e(e);break}case P.TAG_ID.BR:{K1e(e);break}case P.TAG_ID.BODY:{H1e(e,t);break}case P.TAG_ID.HTML:{U1e(e,t);break}case P.TAG_ID.FORM:{V1e(e);break}case P.TAG_ID.APPLET:case P.TAG_ID.OBJECT:case P.TAG_ID.MARQUEE:{$1e(e,t);break}case P.TAG_ID.TEMPLATE:{th(e,t);break}default:jY(e,t)}}function BY(e,t){e.tmplInsertionModeStack.length>0?YY(e,t):bN(e,t)}function Q1e(e,t){var n;t.tagID===P.TAG_ID.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Z1e(e,t){e._err(t,Hn.ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function UA(e,t){if(DY.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ce.IN_TABLE_TEXT,t.type){case cn.TokenType.CHARACTER:{GY(e,t);break}case cn.TokenType.WHITESPACE_CHARACTER:{FY(e,t);break}}else iv(e,t)}function J1e(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_CAPTION}function eSe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_COLUMN_GROUP}function tSe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(P.TAG_NAMES.COLGROUP,P.TAG_ID.COLGROUP),e.insertionMode=ce.IN_COLUMN_GROUP,_N(e,t)}function rSe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_TABLE_BODY}function nSe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(P.TAG_NAMES.TBODY,P.TAG_ID.TBODY),e.insertionMode=ce.IN_TABLE_BODY,W1(e,t)}function iSe(e,t){e.openElements.hasInTableScope(P.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function oSe(e,t){LY(t)?e._appendElement(t,P.NS.HTML):iv(e,t),t.ackSelfClosing=!0}function aSe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,P.NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function wp(e,t){switch(t.tagID){case P.TAG_ID.TD:case P.TAG_ID.TH:case P.TAG_ID.TR:{nSe(e,t);break}case P.TAG_ID.STYLE:case P.TAG_ID.SCRIPT:case P.TAG_ID.TEMPLATE:{ia(e,t);break}case P.TAG_ID.COL:{tSe(e,t);break}case P.TAG_ID.FORM:{aSe(e,t);break}case P.TAG_ID.TABLE:{iSe(e,t);break}case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{rSe(e,t);break}case P.TAG_ID.INPUT:{oSe(e,t);break}case P.TAG_ID.CAPTION:{J1e(e,t);break}case P.TAG_ID.COLGROUP:{eSe(e,t);break}default:iv(e,t)}}function sy(e,t){switch(t.tagID){case P.TAG_ID.TABLE:{e.openElements.hasInTableScope(P.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.TABLE),e._resetInsertionMode());break}case P.TAG_ID.TEMPLATE:{th(e,t);break}case P.TAG_ID.BODY:case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:case P.TAG_ID.TBODY:case P.TAG_ID.TD:case P.TAG_ID.TFOOT:case P.TAG_ID.TH:case P.TAG_ID.THEAD:case P.TAG_ID.TR:break;default:iv(e,t)}}function iv(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Y1(e,t),e.fosterParentingEnabled=n}function FY(e,t){e.pendingCharacterTokens.push(t)}function GY(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Jd(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)iv(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const HY=new Set([P.TAG_ID.CAPTION,P.TAG_ID.COL,P.TAG_ID.COLGROUP,P.TAG_ID.TBODY,P.TAG_ID.TD,P.TAG_ID.TFOOT,P.TAG_ID.TH,P.TAG_ID.THEAD,P.TAG_ID.TR]);function sSe(e,t){const n=t.tagID;HY.has(n)?e.openElements.hasInTableScope(P.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(P.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ce.IN_TABLE,wp(e,t)):ni(e,t)}function lSe(e,t){const n=t.tagID;switch(n){case P.TAG_ID.CAPTION:case P.TAG_ID.TABLE:{e.openElements.hasInTableScope(P.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(P.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ce.IN_TABLE,n===P.TAG_ID.TABLE&&sy(e,t));break}case P.TAG_ID.BODY:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:case P.TAG_ID.TBODY:case P.TAG_ID.TD:case P.TAG_ID.TFOOT:case P.TAG_ID.TH:case P.TAG_ID.THEAD:case P.TAG_ID.TR:break;default:X1(e,t)}}function _N(e,t){switch(t.tagID){case P.TAG_ID.HTML:{ni(e,t);break}case P.TAG_ID.COL:{e._appendElement(t,P.NS.HTML),t.ackSelfClosing=!0;break}case P.TAG_ID.TEMPLATE:{ia(e,t);break}default:Y_(e,t)}}function uSe(e,t){switch(t.tagID){case P.TAG_ID.COLGROUP:{e.openElements.currentTagId===P.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=ce.IN_TABLE);break}case P.TAG_ID.TEMPLATE:{th(e,t);break}case P.TAG_ID.COL:break;default:Y_(e,t)}}function Y_(e,t){e.openElements.currentTagId===P.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=ce.IN_TABLE,e._processToken(t))}function W1(e,t){switch(t.tagID){case P.TAG_ID.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_ROW;break}case P.TAG_ID.TH:case P.TAG_ID.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(P.TAG_NAMES.TR,P.TAG_ID.TR),e.insertionMode=ce.IN_ROW,q1(e,t);break}case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE,wp(e,t));break}default:wp(e,t)}}function Gx(e,t){const n=t.tagID;switch(t.tagID){case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE);break}case P.TAG_ID.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE,sy(e,t));break}case P.TAG_ID.BODY:case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:case P.TAG_ID.TD:case P.TAG_ID.TH:case P.TAG_ID.TR:break;default:sy(e,t)}}function q1(e,t){switch(t.tagID){case P.TAG_ID.TH:case P.TAG_ID.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,P.NS.HTML),e.insertionMode=ce.IN_CELL,e.activeFormattingElements.insertMarker();break}case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:case P.TAG_ID.TR:{e.openElements.hasInTableScope(P.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY,W1(e,t));break}default:wp(e,t)}}function UY(e,t){switch(t.tagID){case P.TAG_ID.TR:{e.openElements.hasInTableScope(P.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY);break}case P.TAG_ID.TABLE:{e.openElements.hasInTableScope(P.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY,Gx(e,t));break}case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(P.TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY,Gx(e,t));break}case P.TAG_ID.BODY:case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:case P.TAG_ID.TD:case P.TAG_ID.TH:break;default:sy(e,t)}}function cSe(e,t){const n=t.tagID;HY.has(n)?(e.openElements.hasInTableScope(P.TAG_ID.TD)||e.openElements.hasInTableScope(P.TAG_ID.TH))&&(e._closeTableCell(),q1(e,t)):ni(e,t)}function hSe(e,t){const n=t.tagID;switch(n){case P.TAG_ID.TD:case P.TAG_ID.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ce.IN_ROW);break}case P.TAG_ID.TABLE:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:case P.TAG_ID.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),UY(e,t));break}case P.TAG_ID.BODY:case P.TAG_ID.CAPTION:case P.TAG_ID.COL:case P.TAG_ID.COLGROUP:case P.TAG_ID.HTML:break;default:X1(e,t)}}function zY(e,t){switch(t.tagID){case P.TAG_ID.HTML:{ni(e,t);break}case P.TAG_ID.OPTION:{e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,P.NS.HTML);break}case P.TAG_ID.OPTGROUP:{e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===P.TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,P.NS.HTML);break}case P.TAG_ID.INPUT:case P.TAG_ID.KEYGEN:case P.TAG_ID.TEXTAREA:case P.TAG_ID.SELECT:{e.openElements.hasInSelectScope(P.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==P.TAG_ID.SELECT&&e._processStartTag(t));break}case P.TAG_ID.SCRIPT:case P.TAG_ID.TEMPLATE:{ia(e,t);break}}}function VY(e,t){switch(t.tagID){case P.TAG_ID.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===P.TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===P.TAG_ID.OPTGROUP&&e.openElements.pop();break}case P.TAG_ID.OPTION:{e.openElements.currentTagId===P.TAG_ID.OPTION&&e.openElements.pop();break}case P.TAG_ID.SELECT:{e.openElements.hasInSelectScope(P.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.SELECT),e._resetInsertionMode());break}case P.TAG_ID.TEMPLATE:{th(e,t);break}}}function fSe(e,t){const n=t.tagID;n===P.TAG_ID.CAPTION||n===P.TAG_ID.TABLE||n===P.TAG_ID.TBODY||n===P.TAG_ID.TFOOT||n===P.TAG_ID.THEAD||n===P.TAG_ID.TR||n===P.TAG_ID.TD||n===P.TAG_ID.TH?(e.openElements.popUntilTagNamePopped(P.TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(t)):zY(e,t)}function pSe(e,t){const n=t.tagID;n===P.TAG_ID.CAPTION||n===P.TAG_ID.TABLE||n===P.TAG_ID.TBODY||n===P.TAG_ID.TFOOT||n===P.TAG_ID.THEAD||n===P.TAG_ID.TR||n===P.TAG_ID.TD||n===P.TAG_ID.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(P.TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(t)):VY(e,t)}function dSe(e,t){switch(t.tagID){case P.TAG_ID.BASE:case P.TAG_ID.BASEFONT:case P.TAG_ID.BGSOUND:case P.TAG_ID.LINK:case P.TAG_ID.META:case P.TAG_ID.NOFRAMES:case P.TAG_ID.SCRIPT:case P.TAG_ID.STYLE:case P.TAG_ID.TEMPLATE:case P.TAG_ID.TITLE:{ia(e,t);break}case P.TAG_ID.CAPTION:case P.TAG_ID.COLGROUP:case P.TAG_ID.TBODY:case P.TAG_ID.TFOOT:case P.TAG_ID.THEAD:{e.tmplInsertionModeStack[0]=ce.IN_TABLE,e.insertionMode=ce.IN_TABLE,wp(e,t);break}case P.TAG_ID.COL:{e.tmplInsertionModeStack[0]=ce.IN_COLUMN_GROUP,e.insertionMode=ce.IN_COLUMN_GROUP,_N(e,t);break}case P.TAG_ID.TR:{e.tmplInsertionModeStack[0]=ce.IN_TABLE_BODY,e.insertionMode=ce.IN_TABLE_BODY,W1(e,t);break}case P.TAG_ID.TD:case P.TAG_ID.TH:{e.tmplInsertionModeStack[0]=ce.IN_ROW,e.insertionMode=ce.IN_ROW,q1(e,t);break}default:e.tmplInsertionModeStack[0]=ce.IN_BODY,e.insertionMode=ce.IN_BODY,ni(e,t)}}function mSe(e,t){t.tagID===P.TAG_ID.TEMPLATE&&th(e,t)}function YY(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(P.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):bN(e,t)}function gSe(e,t){t.tagID===P.TAG_ID.HTML?ni(e,t):X_(e,t)}function XY(e,t){var n;if(t.tagID===P.TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=ce.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===P.TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else X_(e,t)}function X_(e,t){e.insertionMode=ce.IN_BODY,Y1(e,t)}function ySe(e,t){switch(t.tagID){case P.TAG_ID.HTML:{ni(e,t);break}case P.TAG_ID.FRAMESET:{e._insertElement(t,P.NS.HTML);break}case P.TAG_ID.FRAME:{e._appendElement(t,P.NS.HTML),t.ackSelfClosing=!0;break}case P.TAG_ID.NOFRAMES:{ia(e,t);break}}}function vSe(e,t){t.tagID===P.TAG_ID.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==P.TAG_ID.FRAMESET&&(e.insertionMode=ce.AFTER_FRAMESET))}function bSe(e,t){switch(t.tagID){case P.TAG_ID.HTML:{ni(e,t);break}case P.TAG_ID.NOFRAMES:{ia(e,t);break}}}function _Se(e,t){t.tagID===P.TAG_ID.HTML&&(e.insertionMode=ce.AFTER_AFTER_FRAMESET)}function TSe(e,t){t.tagID===P.TAG_ID.HTML?ni(e,t):h0(e,t)}function h0(e,t){e.insertionMode=ce.IN_BODY,Y1(e,t)}function ESe(e,t){switch(t.tagID){case P.TAG_ID.HTML:{ni(e,t);break}case P.TAG_ID.NOFRAMES:{ia(e,t);break}}}function SSe(e,t){t.chars=PY.REPLACEMENT_CHARACTER,e._insertCharacters(t)}function wSe(e,t){e._insertCharacters(t),e.framesetOk=!1}function WY(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==P.NS.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function ASe(e,t){if(va.causesExit(t))WY(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===P.NS.MATHML?va.adjustTokenMathMLAttrs(t):r===P.NS.SVG&&(va.adjustTokenSVGTagName(t),va.adjustTokenSVGAttrs(t)),va.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function OSe(e,t){if(t.tagID===P.TAG_ID.P||t.tagID===P.TAG_ID.BR){WY(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===P.NS.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}var Ap={};Object.defineProperty(Ap,"__esModule",{value:!0});Ap.serializeOuter=Ap.serialize=void 0;const kr=qs,qY=mp,kSe=V1,xSe=new Set([kr.TAG_NAMES.AREA,kr.TAG_NAMES.BASE,kr.TAG_NAMES.BASEFONT,kr.TAG_NAMES.BGSOUND,kr.TAG_NAMES.BR,kr.TAG_NAMES.COL,kr.TAG_NAMES.EMBED,kr.TAG_NAMES.FRAME,kr.TAG_NAMES.HR,kr.TAG_NAMES.IMG,kr.TAG_NAMES.INPUT,kr.TAG_NAMES.KEYGEN,kr.TAG_NAMES.LINK,kr.TAG_NAMES.META,kr.TAG_NAMES.PARAM,kr.TAG_NAMES.SOURCE,kr.TAG_NAMES.TRACK,kr.TAG_NAMES.WBR]);function $Y(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===kr.NS.HTML&&xSe.has(t.treeAdapter.getTagName(e))}const KY={treeAdapter:kSe.defaultTreeAdapter,scriptingEnabled:!0};function ISe(e,t){const n=Object.assign(Object.assign({},KY),t);return $Y(e,n)?"":QY(e,n)}Ap.serialize=ISe;function CSe(e,t){const n=Object.assign(Object.assign({},KY),t);return ZY(e,n)}Ap.serializeOuter=CSe;function QY(e,t){let n="";const r=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===kr.TAG_NAMES.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===kr.NS.HTML?t.treeAdapter.getTemplateContent(e):e,i=t.treeAdapter.getChildNodes(r);if(i)for(const o of i)n+=ZY(o,t);return n}function ZY(e,t){return t.treeAdapter.isElementNode(e)?PSe(e,t):t.treeAdapter.isTextNode(e)?RSe(e,t):t.treeAdapter.isCommentNode(e)?NSe(e,t):t.treeAdapter.isDocumentTypeNode(e)?MSe(e,t):""}function PSe(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${DSe(e,t)}>${$Y(e,t)?"":`${QY(e,t)}</${n}>`}`}function DSe(e,{treeAdapter:t}){let n="";for(const r of t.getAttrList(e)){if(n+=" ",!r.namespace)n+=r.name;else switch(r.namespace){case kr.NS.XML:{n+=`xml:${r.name}`;break}case kr.NS.XMLNS:{r.name!=="xmlns"&&(n+="xmlns:"),n+=r.name;break}case kr.NS.XLINK:{n+=`xlink:${r.name}`;break}default:n+=`${r.prefix}:${r.name}`}n+=`="${(0,qY.escapeAttribute)(r.value)}"`}return n}function RSe(e,t){const{treeAdapter:n}=t,r=n.getTextNodeContent(e),i=n.getParentNode(e),o=i&&n.isElementNode(i)&&n.getTagName(i);return o&&n.getNamespaceURI(i)===kr.NS.HTML&&(0,kr.hasUnescapedText)(o,t.scriptingEnabled)?r:(0,qY.escapeText)(r)}function NSe(e,{treeAdapter:t}){return`<!--${t.getCommentNodeContent(e)}-->`}function MSe(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFragment=e.parse=e.TokenizerMode=e.Tokenizer=e.Token=e.html=e.foreignContent=e.ErrorCodes=e.serializeOuter=e.serialize=e.Parser=e.defaultTreeAdapter=void 0;const t=ay;var n=V1;Object.defineProperty(e,"defaultTreeAdapter",{enumerable:!0,get:function(){return n.defaultTreeAdapter}});var r=ay;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return r.Parser}});var i=Ap;Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return i.serialize}}),Object.defineProperty(e,"serializeOuter",{enumerable:!0,get:function(){return i.serializeOuter}});var o=nv;Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return o.ERR}}),e.foreignContent=yN,e.html=qs,e.Token=U1;var a=_c;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return a.Tokenizer}}),Object.defineProperty(e,"TokenizerMode",{enumerable:!0,get:function(){return a.TokenizerMode}});function s(c,l){return t.Parser.parse(c,l)}e.parse=s;function u(c,l,f){typeof c=="string"&&(f=l,l=c,c=null);const h=t.Parser.getFragmentParser(c,f);return h.tokenizer.write(l,!0),h.getFragment()}e.parseFragment=u})(EY);var JY={},eX={},ly={},Tc={},$1={},K1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefinedCodePoint=e.isControlCodePoint=e.getSurrogatePairCodePoint=e.isSurrogatePair=e.isSurrogate=e.SEQUENCES=e.CODE_POINTS=e.REPLACEMENT_CHARACTER=void 0;const t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);e.REPLACEMENT_CHARACTER="�",function(s){s[s.EOF=-1]="EOF",s[s.NULL=0]="NULL",s[s.TABULATION=9]="TABULATION",s[s.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",s[s.LINE_FEED=10]="LINE_FEED",s[s.FORM_FEED=12]="FORM_FEED",s[s.SPACE=32]="SPACE",s[s.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",s[s.QUOTATION_MARK=34]="QUOTATION_MARK",s[s.NUMBER_SIGN=35]="NUMBER_SIGN",s[s.AMPERSAND=38]="AMPERSAND",s[s.APOSTROPHE=39]="APOSTROPHE",s[s.HYPHEN_MINUS=45]="HYPHEN_MINUS",s[s.SOLIDUS=47]="SOLIDUS",s[s.DIGIT_0=48]="DIGIT_0",s[s.DIGIT_9=57]="DIGIT_9",s[s.SEMICOLON=59]="SEMICOLON",s[s.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",s[s.EQUALS_SIGN=61]="EQUALS_SIGN",s[s.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",s[s.QUESTION_MARK=63]="QUESTION_MARK",s[s.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",s[s.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",s[s.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",s[s.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",s[s.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",s[s.GRAVE_ACCENT=96]="GRAVE_ACCENT",s[s.LATIN_SMALL_A=97]="LATIN_SMALL_A",s[s.LATIN_SMALL_F=102]="LATIN_SMALL_F",s[s.LATIN_SMALL_X=120]="LATIN_SMALL_X",s[s.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",s[s.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"}(e.CODE_POINTS||(e.CODE_POINTS={})),e.SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function n(s){return s>=55296&&s<=57343}e.isSurrogate=n;function r(s){return s>=56320&&s<=57343}e.isSurrogatePair=r;function i(s,u){return(s-55296)*1024+9216+u}e.getSurrogatePairCodePoint=i;function o(s){return s!==32&&s!==10&&s!==13&&s!==9&&s!==12&&s>=1&&s<=31||s>=127&&s<=159}e.isControlCodePoint=o;function a(s){return s>=64976&&s<=65007||t.has(s)}e.isUndefinedCodePoint=a})(K1);var ov={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERR=void 0,function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(e.ERR||(e.ERR={}))})(ov);function LSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FSe(r.key),r)}}function BSe(e,t,n){return t&&jSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FSe(e){var t=GSe(e,"string");return typeof t=="symbol"?t:String(t)}function GSe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}Object.defineProperty($1,"__esModule",{value:!0});$1.Preprocessor=void 0;const si=K1,zA=ov,HSe=65536;let USe=function(){function e(t){LSe(this,e),this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=HSe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}return BSe(e,[{key:"col",get:function(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}},{key:"offset",get:function(){return this.droppedBufferSize+this.pos}},{key:"getError",value:function(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}},{key:"_err",value:function(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}},{key:"_addGap",value:function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}},{key:"_processSurrogate",value:function(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if((0,si.isSurrogatePair)(n))return this.pos++,this._addGap(),(0,si.getSurrogatePairCodePoint)(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,si.CODE_POINTS.EOF;return this._err(zA.ERR.surrogateInInputStream),t}},{key:"willDropParsedChunk",value:function(){return this.pos>this.bufferWaterline}},{key:"dropParsedChunk",value:function(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}},{key:"write",value:function(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}},{key:"insertHtmlAtCurrentPos",value:function(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}},{key:"startsWith",value:function(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}},{key:"peek",value:function(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,si.CODE_POINTS.EOF;const r=this.html.charCodeAt(n);return r===si.CODE_POINTS.CARRIAGE_RETURN?si.CODE_POINTS.LINE_FEED:r}},{key:"advance",value:function(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,si.CODE_POINTS.EOF;let t=this.html.charCodeAt(this.pos);return t===si.CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,si.CODE_POINTS.LINE_FEED):t===si.CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,(0,si.isSurrogate)(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===si.CODE_POINTS.LINE_FEED||t===si.CODE_POINTS.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}},{key:"_checkForProblematicCharacters",value:function(t){(0,si.isControlCodePoint)(t)?this._err(zA.ERR.controlCharacterInInputStream):(0,si.isUndefinedCodePoint)(t)&&this._err(zA.ERR.noncharacterInInputStream)}},{key:"retreat",value:function(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}]),e}();$1.Preprocessor=USe;var Q1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTokenAttr=e.TokenType=void 0,function(n){n[n.CHARACTER=0]="CHARACTER",n[n.NULL_CHARACTER=1]="NULL_CHARACTER",n[n.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",n[n.START_TAG=3]="START_TAG",n[n.END_TAG=4]="END_TAG",n[n.COMMENT=5]="COMMENT",n[n.DOCTYPE=6]="DOCTYPE",n[n.EOF=7]="EOF",n[n.HIBERNATION=8]="HIBERNATION"}(e.TokenType||(e.TokenType={}));function t(n,r){for(let i=n.attrs.length-1;i>=0;i--)if(n.attrs[i].name===r)return n.attrs[i].value;return null}e.getTokenAttr=t})(Q1);var $s={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUnescapedText=e.isNumberedHeader=e.SPECIAL_ELEMENTS=e.getTagID=e.TAG_ID=e.TAG_NAMES=e.DOCUMENT_MODE=e.ATTRS=e.NS=void 0;var t;(function(l){l.HTML="http://www.w3.org/1999/xhtml",l.MATHML="http://www.w3.org/1998/Math/MathML",l.SVG="http://www.w3.org/2000/svg",l.XLINK="http://www.w3.org/1999/xlink",l.XML="http://www.w3.org/XML/1998/namespace",l.XMLNS="http://www.w3.org/2000/xmlns/"})(t=e.NS||(e.NS={})),function(l){l.TYPE="type",l.ACTION="action",l.ENCODING="encoding",l.PROMPT="prompt",l.NAME="name",l.COLOR="color",l.FACE="face",l.SIZE="size"}(e.ATTRS||(e.ATTRS={})),function(l){l.NO_QUIRKS="no-quirks",l.QUIRKS="quirks",l.LIMITED_QUIRKS="limited-quirks"}(e.DOCUMENT_MODE||(e.DOCUMENT_MODE={}));var n;(function(l){l.A="a",l.ADDRESS="address",l.ANNOTATION_XML="annotation-xml",l.APPLET="applet",l.AREA="area",l.ARTICLE="article",l.ASIDE="aside",l.B="b",l.BASE="base",l.BASEFONT="basefont",l.BGSOUND="bgsound",l.BIG="big",l.BLOCKQUOTE="blockquote",l.BODY="body",l.BR="br",l.BUTTON="button",l.CAPTION="caption",l.CENTER="center",l.CODE="code",l.COL="col",l.COLGROUP="colgroup",l.DD="dd",l.DESC="desc",l.DETAILS="details",l.DIALOG="dialog",l.DIR="dir",l.DIV="div",l.DL="dl",l.DT="dt",l.EM="em",l.EMBED="embed",l.FIELDSET="fieldset",l.FIGCAPTION="figcaption",l.FIGURE="figure",l.FONT="font",l.FOOTER="footer",l.FOREIGN_OBJECT="foreignObject",l.FORM="form",l.FRAME="frame",l.FRAMESET="frameset",l.H1="h1",l.H2="h2",l.H3="h3",l.H4="h4",l.H5="h5",l.H6="h6",l.HEAD="head",l.HEADER="header",l.HGROUP="hgroup",l.HR="hr",l.HTML="html",l.I="i",l.IMG="img",l.IMAGE="image",l.INPUT="input",l.IFRAME="iframe",l.KEYGEN="keygen",l.LABEL="label",l.LI="li",l.LINK="link",l.LISTING="listing",l.MAIN="main",l.MALIGNMARK="malignmark",l.MARQUEE="marquee",l.MATH="math",l.MENU="menu",l.META="meta",l.MGLYPH="mglyph",l.MI="mi",l.MO="mo",l.MN="mn",l.MS="ms",l.MTEXT="mtext",l.NAV="nav",l.NOBR="nobr",l.NOFRAMES="noframes",l.NOEMBED="noembed",l.NOSCRIPT="noscript",l.OBJECT="object",l.OL="ol",l.OPTGROUP="optgroup",l.OPTION="option",l.P="p",l.PARAM="param",l.PLAINTEXT="plaintext",l.PRE="pre",l.RB="rb",l.RP="rp",l.RT="rt",l.RTC="rtc",l.RUBY="ruby",l.S="s",l.SCRIPT="script",l.SECTION="section",l.SELECT="select",l.SOURCE="source",l.SMALL="small",l.SPAN="span",l.STRIKE="strike",l.STRONG="strong",l.STYLE="style",l.SUB="sub",l.SUMMARY="summary",l.SUP="sup",l.TABLE="table",l.TBODY="tbody",l.TEMPLATE="template",l.TEXTAREA="textarea",l.TFOOT="tfoot",l.TD="td",l.TH="th",l.THEAD="thead",l.TITLE="title",l.TR="tr",l.TRACK="track",l.TT="tt",l.U="u",l.UL="ul",l.SVG="svg",l.VAR="var",l.WBR="wbr",l.XMP="xmp"})(n=e.TAG_NAMES||(e.TAG_NAMES={}));var r;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.A=1]="A",l[l.ADDRESS=2]="ADDRESS",l[l.ANNOTATION_XML=3]="ANNOTATION_XML",l[l.APPLET=4]="APPLET",l[l.AREA=5]="AREA",l[l.ARTICLE=6]="ARTICLE",l[l.ASIDE=7]="ASIDE",l[l.B=8]="B",l[l.BASE=9]="BASE",l[l.BASEFONT=10]="BASEFONT",l[l.BGSOUND=11]="BGSOUND",l[l.BIG=12]="BIG",l[l.BLOCKQUOTE=13]="BLOCKQUOTE",l[l.BODY=14]="BODY",l[l.BR=15]="BR",l[l.BUTTON=16]="BUTTON",l[l.CAPTION=17]="CAPTION",l[l.CENTER=18]="CENTER",l[l.CODE=19]="CODE",l[l.COL=20]="COL",l[l.COLGROUP=21]="COLGROUP",l[l.DD=22]="DD",l[l.DESC=23]="DESC",l[l.DETAILS=24]="DETAILS",l[l.DIALOG=25]="DIALOG",l[l.DIR=26]="DIR",l[l.DIV=27]="DIV",l[l.DL=28]="DL",l[l.DT=29]="DT",l[l.EM=30]="EM",l[l.EMBED=31]="EMBED",l[l.FIELDSET=32]="FIELDSET",l[l.FIGCAPTION=33]="FIGCAPTION",l[l.FIGURE=34]="FIGURE",l[l.FONT=35]="FONT",l[l.FOOTER=36]="FOOTER",l[l.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",l[l.FORM=38]="FORM",l[l.FRAME=39]="FRAME",l[l.FRAMESET=40]="FRAMESET",l[l.H1=41]="H1",l[l.H2=42]="H2",l[l.H3=43]="H3",l[l.H4=44]="H4",l[l.H5=45]="H5",l[l.H6=46]="H6",l[l.HEAD=47]="HEAD",l[l.HEADER=48]="HEADER",l[l.HGROUP=49]="HGROUP",l[l.HR=50]="HR",l[l.HTML=51]="HTML",l[l.I=52]="I",l[l.IMG=53]="IMG",l[l.IMAGE=54]="IMAGE",l[l.INPUT=55]="INPUT",l[l.IFRAME=56]="IFRAME",l[l.KEYGEN=57]="KEYGEN",l[l.LABEL=58]="LABEL",l[l.LI=59]="LI",l[l.LINK=60]="LINK",l[l.LISTING=61]="LISTING",l[l.MAIN=62]="MAIN",l[l.MALIGNMARK=63]="MALIGNMARK",l[l.MARQUEE=64]="MARQUEE",l[l.MATH=65]="MATH",l[l.MENU=66]="MENU",l[l.META=67]="META",l[l.MGLYPH=68]="MGLYPH",l[l.MI=69]="MI",l[l.MO=70]="MO",l[l.MN=71]="MN",l[l.MS=72]="MS",l[l.MTEXT=73]="MTEXT",l[l.NAV=74]="NAV",l[l.NOBR=75]="NOBR",l[l.NOFRAMES=76]="NOFRAMES",l[l.NOEMBED=77]="NOEMBED",l[l.NOSCRIPT=78]="NOSCRIPT",l[l.OBJECT=79]="OBJECT",l[l.OL=80]="OL",l[l.OPTGROUP=81]="OPTGROUP",l[l.OPTION=82]="OPTION",l[l.P=83]="P",l[l.PARAM=84]="PARAM",l[l.PLAINTEXT=85]="PLAINTEXT",l[l.PRE=86]="PRE",l[l.RB=87]="RB",l[l.RP=88]="RP",l[l.RT=89]="RT",l[l.RTC=90]="RTC",l[l.RUBY=91]="RUBY",l[l.S=92]="S",l[l.SCRIPT=93]="SCRIPT",l[l.SECTION=94]="SECTION",l[l.SELECT=95]="SELECT",l[l.SOURCE=96]="SOURCE",l[l.SMALL=97]="SMALL",l[l.SPAN=98]="SPAN",l[l.STRIKE=99]="STRIKE",l[l.STRONG=100]="STRONG",l[l.STYLE=101]="STYLE",l[l.SUB=102]="SUB",l[l.SUMMARY=103]="SUMMARY",l[l.SUP=104]="SUP",l[l.TABLE=105]="TABLE",l[l.TBODY=106]="TBODY",l[l.TEMPLATE=107]="TEMPLATE",l[l.TEXTAREA=108]="TEXTAREA",l[l.TFOOT=109]="TFOOT",l[l.TD=110]="TD",l[l.TH=111]="TH",l[l.THEAD=112]="THEAD",l[l.TITLE=113]="TITLE",l[l.TR=114]="TR",l[l.TRACK=115]="TRACK",l[l.TT=116]="TT",l[l.U=117]="U",l[l.UL=118]="UL",l[l.SVG=119]="SVG",l[l.VAR=120]="VAR",l[l.WBR=121]="WBR",l[l.XMP=122]="XMP"})(r=e.TAG_ID||(e.TAG_ID={}));const i=new Map([[n.A,r.A],[n.ADDRESS,r.ADDRESS],[n.ANNOTATION_XML,r.ANNOTATION_XML],[n.APPLET,r.APPLET],[n.AREA,r.AREA],[n.ARTICLE,r.ARTICLE],[n.ASIDE,r.ASIDE],[n.B,r.B],[n.BASE,r.BASE],[n.BASEFONT,r.BASEFONT],[n.BGSOUND,r.BGSOUND],[n.BIG,r.BIG],[n.BLOCKQUOTE,r.BLOCKQUOTE],[n.BODY,r.BODY],[n.BR,r.BR],[n.BUTTON,r.BUTTON],[n.CAPTION,r.CAPTION],[n.CENTER,r.CENTER],[n.CODE,r.CODE],[n.COL,r.COL],[n.COLGROUP,r.COLGROUP],[n.DD,r.DD],[n.DESC,r.DESC],[n.DETAILS,r.DETAILS],[n.DIALOG,r.DIALOG],[n.DIR,r.DIR],[n.DIV,r.DIV],[n.DL,r.DL],[n.DT,r.DT],[n.EM,r.EM],[n.EMBED,r.EMBED],[n.FIELDSET,r.FIELDSET],[n.FIGCAPTION,r.FIGCAPTION],[n.FIGURE,r.FIGURE],[n.FONT,r.FONT],[n.FOOTER,r.FOOTER],[n.FOREIGN_OBJECT,r.FOREIGN_OBJECT],[n.FORM,r.FORM],[n.FRAME,r.FRAME],[n.FRAMESET,r.FRAMESET],[n.H1,r.H1],[n.H2,r.H2],[n.H3,r.H3],[n.H4,r.H4],[n.H5,r.H5],[n.H6,r.H6],[n.HEAD,r.HEAD],[n.HEADER,r.HEADER],[n.HGROUP,r.HGROUP],[n.HR,r.HR],[n.HTML,r.HTML],[n.I,r.I],[n.IMG,r.IMG],[n.IMAGE,r.IMAGE],[n.INPUT,r.INPUT],[n.IFRAME,r.IFRAME],[n.KEYGEN,r.KEYGEN],[n.LABEL,r.LABEL],[n.LI,r.LI],[n.LINK,r.LINK],[n.LISTING,r.LISTING],[n.MAIN,r.MAIN],[n.MALIGNMARK,r.MALIGNMARK],[n.MARQUEE,r.MARQUEE],[n.MATH,r.MATH],[n.MENU,r.MENU],[n.META,r.META],[n.MGLYPH,r.MGLYPH],[n.MI,r.MI],[n.MO,r.MO],[n.MN,r.MN],[n.MS,r.MS],[n.MTEXT,r.MTEXT],[n.NAV,r.NAV],[n.NOBR,r.NOBR],[n.NOFRAMES,r.NOFRAMES],[n.NOEMBED,r.NOEMBED],[n.NOSCRIPT,r.NOSCRIPT],[n.OBJECT,r.OBJECT],[n.OL,r.OL],[n.OPTGROUP,r.OPTGROUP],[n.OPTION,r.OPTION],[n.P,r.P],[n.PARAM,r.PARAM],[n.PLAINTEXT,r.PLAINTEXT],[n.PRE,r.PRE],[n.RB,r.RB],[n.RP,r.RP],[n.RT,r.RT],[n.RTC,r.RTC],[n.RUBY,r.RUBY],[n.S,r.S],[n.SCRIPT,r.SCRIPT],[n.SECTION,r.SECTION],[n.SELECT,r.SELECT],[n.SOURCE,r.SOURCE],[n.SMALL,r.SMALL],[n.SPAN,r.SPAN],[n.STRIKE,r.STRIKE],[n.STRONG,r.STRONG],[n.STYLE,r.STYLE],[n.SUB,r.SUB],[n.SUMMARY,r.SUMMARY],[n.SUP,r.SUP],[n.TABLE,r.TABLE],[n.TBODY,r.TBODY],[n.TEMPLATE,r.TEMPLATE],[n.TEXTAREA,r.TEXTAREA],[n.TFOOT,r.TFOOT],[n.TD,r.TD],[n.TH,r.TH],[n.THEAD,r.THEAD],[n.TITLE,r.TITLE],[n.TR,r.TR],[n.TRACK,r.TRACK],[n.TT,r.TT],[n.U,r.U],[n.UL,r.UL],[n.SVG,r.SVG],[n.VAR,r.VAR],[n.WBR,r.WBR],[n.XMP,r.XMP]]);function o(l){var f;return(f=i.get(l))!==null&&f!==void 0?f:r.UNKNOWN}e.getTagID=o;const a=r;e.SPECIAL_ELEMENTS={[t.HTML]:new Set([a.ADDRESS,a.APPLET,a.AREA,a.ARTICLE,a.ASIDE,a.BASE,a.BASEFONT,a.BGSOUND,a.BLOCKQUOTE,a.BODY,a.BR,a.BUTTON,a.CAPTION,a.CENTER,a.COL,a.COLGROUP,a.DD,a.DETAILS,a.DIR,a.DIV,a.DL,a.DT,a.EMBED,a.FIELDSET,a.FIGCAPTION,a.FIGURE,a.FOOTER,a.FORM,a.FRAME,a.FRAMESET,a.H1,a.H2,a.H3,a.H4,a.H5,a.H6,a.HEAD,a.HEADER,a.HGROUP,a.HR,a.HTML,a.IFRAME,a.IMG,a.INPUT,a.LI,a.LINK,a.LISTING,a.MAIN,a.MARQUEE,a.MENU,a.META,a.NAV,a.NOEMBED,a.NOFRAMES,a.NOSCRIPT,a.OBJECT,a.OL,a.P,a.PARAM,a.PLAINTEXT,a.PRE,a.SCRIPT,a.SECTION,a.SELECT,a.SOURCE,a.STYLE,a.SUMMARY,a.TABLE,a.TBODY,a.TD,a.TEMPLATE,a.TEXTAREA,a.TFOOT,a.TH,a.THEAD,a.TITLE,a.TR,a.TRACK,a.UL,a.WBR,a.XMP]),[t.MATHML]:new Set([a.MI,a.MO,a.MN,a.MS,a.MTEXT,a.ANNOTATION_XML]),[t.SVG]:new Set([a.TITLE,a.FOREIGN_OBJECT,a.DESC]),[t.XLINK]:new Set,[t.XML]:new Set,[t.XMLNS]:new Set};function s(l){return l===a.H1||l===a.H2||l===a.H3||l===a.H4||l===a.H5||l===a.H6}e.isNumberedHeader=s;const u=new Set([n.STYLE,n.SCRIPT,n.XMP,n.IFRAME,n.NOEMBED,n.NOFRAMES,n.PLAINTEXT]);function c(l,f){return u.has(l)||f&&l===n.NOSCRIPT}e.hasUnescapedText=c})($s);function zSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XSe(r.key),r)}}function YSe(e,t,n){return t&&VSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XSe(e){var t=WSe(e,"string");return typeof t=="symbol"?t:String(t)}function WSe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}Object.defineProperty(Tc,"__esModule",{value:!0});Tc.Tokenizer=Tc.TokenizerMode=void 0;const qSe=$1,Y=K1,Ii=Q1,ca=yc,Le=ov,VA=$s,$Se=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Q;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Q||(Q={}));Tc.TokenizerMode={DATA:Q.DATA,RCDATA:Q.RCDATA,RAWTEXT:Q.RAWTEXT,SCRIPT_DATA:Q.SCRIPT_DATA,PLAINTEXT:Q.PLAINTEXT,CDATA_SECTION:Q.CDATA_SECTION};function lg(e){return e>=Y.CODE_POINTS.DIGIT_0&&e<=Y.CODE_POINTS.DIGIT_9}function Om(e){return e>=Y.CODE_POINTS.LATIN_CAPITAL_A&&e<=Y.CODE_POINTS.LATIN_CAPITAL_Z}function KSe(e){return e>=Y.CODE_POINTS.LATIN_SMALL_A&&e<=Y.CODE_POINTS.LATIN_SMALL_Z}function fl(e){return KSe(e)||Om(e)}function Hx(e){return fl(e)||lg(e)}function tX(e){return e>=Y.CODE_POINTS.LATIN_CAPITAL_A&&e<=Y.CODE_POINTS.LATIN_CAPITAL_F}function rX(e){return e>=Y.CODE_POINTS.LATIN_SMALL_A&&e<=Y.CODE_POINTS.LATIN_SMALL_F}function QSe(e){return lg(e)||tX(e)||rX(e)}function hb(e){return e+32}function nX(e){return e===Y.CODE_POINTS.SPACE||e===Y.CODE_POINTS.LINE_FEED||e===Y.CODE_POINTS.TABULATION||e===Y.CODE_POINTS.FORM_FEED}function ZSe(e){return e===Y.CODE_POINTS.EQUALS_SIGN||Hx(e)}function I3(e){return nX(e)||e===Y.CODE_POINTS.SOLIDUS||e===Y.CODE_POINTS.GREATER_THAN_SIGN}let JSe=function(){function e(t,n){zSe(this,e),this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Q.DATA,this.returnState=Q.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new qSe.Preprocessor(n),this.currentLocation=this.getCurrentLocation(-1)}return YSe(e,[{key:"_err",value:function(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}},{key:"getCurrentLocation",value:function(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}},{key:"_runParsingLoop",value:function(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||(t==null||t()))}},{key:"write",value:function(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||(r==null||r())}},{key:"insertHtmlAtCurrentPos",value:function(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}},{key:"_ensureHibernation",value:function(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}},{key:"_consume",value:function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}},{key:"_unconsume",value:function(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}},{key:"_reconsumeInState",value:function(t,n){this.state=t,this._callState(n)}},{key:"_advanceBy",value:function(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}},{key:"_consumeSequenceIfMatch",value:function(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}},{key:"_createStartTagToken",value:function(){this.currentToken={type:Ii.TokenType.START_TAG,tagName:"",tagID:VA.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}},{key:"_createEndTagToken",value:function(){this.currentToken={type:Ii.TokenType.END_TAG,tagName:"",tagID:VA.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}},{key:"_createCommentToken",value:function(t){this.currentToken={type:Ii.TokenType.COMMENT,data:"",location:this.getCurrentLocation(t)}}},{key:"_createDoctypeToken",value:function(t){this.currentToken={type:Ii.TokenType.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}},{key:"_createCharacterToken",value:function(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}},{key:"_createAttr",value:function(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}},{key:"_leaveAttrName",value:function(){var t,n;const r=this.currentToken;if((0,Ii.getTokenAttr)(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Le.ERR.duplicateAttribute)}},{key:"_leaveAttrValue",value:function(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}},{key:"prepareToken",value:function(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}},{key:"emitCurrentTagToken",value:function(){const t=this.currentToken;this.prepareToken(t),t.tagID=(0,VA.getTagID)(t.tagName),t.type===Ii.TokenType.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Le.ERR.endTagWithAttributes),t.selfClosing&&this._err(Le.ERR.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentComment",value:function(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentDoctype",value:function(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}},{key:"_emitCurrentCharacterToken",value:function(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Ii.TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Ii.TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Ii.TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}},{key:"_emitEOFToken",value:function(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Ii.TokenType.EOF,location:t}),this.active=!1}},{key:"_appendCharToCurrentCharacterToken",value:function(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}},{key:"_emitCodePoint",value:function(t){const n=nX(t)?Ii.TokenType.WHITESPACE_CHARACTER:t===Y.CODE_POINTS.NULL?Ii.TokenType.NULL_CHARACTER:Ii.TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}},{key:"_emitChars",value:function(t){this._appendCharToCurrentCharacterToken(Ii.TokenType.CHARACTER,t)}},{key:"_matchNamedCharacterReference",value:function(t){let n=null,r=0,i=!1;for(let o=0,a=ca.htmlDecodeTree[0];o>=0&&(o=(0,ca.determineBranch)(ca.htmlDecodeTree,a,o+1,t),!(o<0));t=this._consume()){r+=1,a=ca.htmlDecodeTree[o];const s=a&ca.BinTrieFlags.VALUE_LENGTH;if(s){const u=(s>>14)-1;if(t!==Y.CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&ZSe(this.preprocessor.peek(1))?(n=[Y.CODE_POINTS.AMPERSAND],o+=u):(n=u===0?[ca.htmlDecodeTree[o]&~ca.BinTrieFlags.VALUE_LENGTH]:u===1?[ca.htmlDecodeTree[++o]]:[ca.htmlDecodeTree[++o],ca.htmlDecodeTree[++o]],r=0,i=t!==Y.CODE_POINTS.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Le.ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),n}},{key:"_isCharacterReferenceInAttribute",value:function(){return this.returnState===Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Q.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Q.ATTRIBUTE_VALUE_UNQUOTED}},{key:"_flushCodePointConsumedAsCharacterReference",value:function(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}},{key:"_callState",value:function(t){switch(this.state){case Q.DATA:{this._stateData(t);break}case Q.RCDATA:{this._stateRcdata(t);break}case Q.RAWTEXT:{this._stateRawtext(t);break}case Q.SCRIPT_DATA:{this._stateScriptData(t);break}case Q.PLAINTEXT:{this._statePlaintext(t);break}case Q.TAG_OPEN:{this._stateTagOpen(t);break}case Q.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Q.TAG_NAME:{this._stateTagName(t);break}case Q.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Q.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Q.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Q.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Q.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Q.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Q.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Q.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Q.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Q.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Q.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Q.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Q.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Q.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Q.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Q.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Q.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Q.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Q.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Q.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Q.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Q.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Q.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Q.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Q.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Q.COMMENT_START:{this._stateCommentStart(t);break}case Q.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Q.COMMENT:{this._stateComment(t);break}case Q.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Q.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Q.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Q.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Q.COMMENT_END:{this._stateCommentEnd(t);break}case Q.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Q.DOCTYPE:{this._stateDoctype(t);break}case Q.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Q.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Q.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Q.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Q.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Q.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Q.CDATA_SECTION:{this._stateCdataSection(t);break}case Q.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Q.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Q.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Q.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Q.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Q.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Q.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Q.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Q.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Q.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}},{key:"_stateData",value:function(t){switch(t){case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.TAG_OPEN;break}case Y.CODE_POINTS.AMPERSAND:{this.returnState=Q.DATA,this.state=Q.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this._emitCodePoint(t);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateRcdata",value:function(t){switch(t){case Y.CODE_POINTS.AMPERSAND:{this.returnState=Q.RCDATA,this.state=Q.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.RCDATA_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateRawtext",value:function(t){switch(t){case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.RAWTEXT_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateScriptData",value:function(t){switch(t){case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_statePlaintext",value:function(t){switch(t){case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateTagOpen",value:function(t){if(fl(t))this._createStartTagToken(),this.state=Q.TAG_NAME,this._stateTagName(t);else switch(t){case Y.CODE_POINTS.EXCLAMATION_MARK:{this.state=Q.MARKUP_DECLARATION_OPEN;break}case Y.CODE_POINTS.SOLIDUS:{this.state=Q.END_TAG_OPEN;break}case Y.CODE_POINTS.QUESTION_MARK:{this._err(Le.ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(t);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Le.ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Q.DATA,this._stateData(t)}}},{key:"_stateEndTagOpen",value:function(t){if(fl(t))this._createEndTagToken(),this.state=Q.TAG_NAME,this._stateTagName(t);else switch(t){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.missingEndTagName),this.state=Q.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Le.ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(t)}}},{key:"_stateTagName",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case Y.CODE_POINTS.SOLIDUS:{this.state=Q.SELF_CLOSING_START_TAG;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),n.tagName+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Om(t)?hb(t):t)}}},{key:"_stateRcdataLessThanSign",value:function(t){t===Y.CODE_POINTS.SOLIDUS?this.state=Q.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Q.RCDATA,this._stateRcdata(t))}},{key:"_stateRcdataEndTagOpen",value:function(t){fl(t)?(this.state=Q.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Q.RCDATA,this._stateRcdata(t))}},{key:"handleSpecialEndTag",value:function(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Q.BEFORE_ATTRIBUTE_NAME,!1;case Y.CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Q.SELF_CLOSING_START_TAG,!1;case Y.CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Q.DATA,!1;default:return!this._ensureHibernation()}}},{key:"_stateRcdataEndTagName",value:function(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Q.RCDATA,this._stateRcdata(t))}},{key:"_stateRawtextLessThanSign",value:function(t){t===Y.CODE_POINTS.SOLIDUS?this.state=Q.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Q.RAWTEXT,this._stateRawtext(t))}},{key:"_stateRawtextEndTagOpen",value:function(t){fl(t)?(this.state=Q.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Q.RAWTEXT,this._stateRawtext(t))}},{key:"_stateRawtextEndTagName",value:function(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Q.RAWTEXT,this._stateRawtext(t))}},{key:"_stateScriptDataLessThanSign",value:function(t){switch(t){case Y.CODE_POINTS.SOLIDUS:{this.state=Q.SCRIPT_DATA_END_TAG_OPEN;break}case Y.CODE_POINTS.EXCLAMATION_MARK:{this.state=Q.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Q.SCRIPT_DATA,this._stateScriptData(t)}}},{key:"_stateScriptDataEndTagOpen",value:function(t){fl(t)?(this.state=Q.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Q.SCRIPT_DATA,this._stateScriptData(t))}},{key:"_stateScriptDataEndTagName",value:function(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Q.SCRIPT_DATA,this._stateScriptData(t))}},{key:"_stateScriptDataEscapeStart",value:function(t){t===Y.CODE_POINTS.HYPHEN_MINUS?(this.state=Q.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Q.SCRIPT_DATA,this._stateScriptData(t))}},{key:"_stateScriptDataEscapeStartDash",value:function(t){t===Y.CODE_POINTS.HYPHEN_MINUS?(this.state=Q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Q.SCRIPT_DATA,this._stateScriptData(t))}},{key:"_stateScriptDataEscaped",value:function(t){switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateScriptDataEscapedDash",value:function(t){switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_ESCAPED,this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}},{key:"_stateScriptDataEscapedDashDash",value:function(t){switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.SCRIPT_DATA,this._emitChars(">");break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_ESCAPED,this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}},{key:"_stateScriptDataEscapedLessThanSign",value:function(t){t===Y.CODE_POINTS.SOLIDUS?this.state=Q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:fl(t)?(this._emitChars("<"),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}},{key:"_stateScriptDataEscapedEndTagOpen",value:function(t){fl(t)?(this.state=Q.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}},{key:"_stateScriptDataEscapedEndTagName",value:function(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}},{key:"_stateScriptDataDoubleEscapeStart",value:function(t){if(this.preprocessor.startsWith(Y.SEQUENCES.SCRIPT,!1)&&I3(this.preprocessor.peek(Y.SEQUENCES.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Y.SEQUENCES.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}},{key:"_stateScriptDataDoubleEscaped",value:function(t){switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateScriptDataDoubleEscapedDash",value:function(t){switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}},{key:"_stateScriptDataDoubleEscapedDashDash",value:function(t){switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.SCRIPT_DATA,this._emitChars(">");break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}},{key:"_stateScriptDataDoubleEscapedLessThanSign",value:function(t){t===Y.CODE_POINTS.SOLIDUS?(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}},{key:"_stateScriptDataDoubleEscapeEnd",value:function(t){if(this.preprocessor.startsWith(Y.SEQUENCES.SCRIPT,!1)&&I3(this.preprocessor.peek(Y.SEQUENCES.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Y.SEQUENCES.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Q.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}},{key:"_stateBeforeAttributeName",value:function(t){switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.SOLIDUS:case Y.CODE_POINTS.GREATER_THAN_SIGN:case Y.CODE_POINTS.EOF:{this.state=Q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.CODE_POINTS.EQUALS_SIGN:{this._err(Le.ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Q.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Q.ATTRIBUTE_NAME,this._stateAttributeName(t)}}},{key:"_stateAttributeName",value:function(t){switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:case Y.CODE_POINTS.SOLIDUS:case Y.CODE_POINTS.GREATER_THAN_SIGN:case Y.CODE_POINTS.EOF:{this._leaveAttrName(),this.state=Q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=Q.BEFORE_ATTRIBUTE_VALUE;break}case Y.CODE_POINTS.QUOTATION_MARK:case Y.CODE_POINTS.APOSTROPHE:case Y.CODE_POINTS.LESS_THAN_SIGN:{this._err(Le.ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this.currentAttr.name+=Y.REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(Om(t)?hb(t):t)}}},{key:"_stateAfterAttributeName",value:function(t){switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.SOLIDUS:{this.state=Q.SELF_CLOSING_START_TAG;break}case Y.CODE_POINTS.EQUALS_SIGN:{this.state=Q.BEFORE_ATTRIBUTE_VALUE;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Q.ATTRIBUTE_NAME,this._stateAttributeName(t)}}},{key:"_stateBeforeAttributeValue",value:function(t){switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.QUOTATION_MARK:{this.state=Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{this.state=Q.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.missingAttributeValue),this.state=Q.DATA,this.emitCurrentTagToken();break}default:this.state=Q.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}},{key:"_stateAttributeValueDoubleQuoted",value:function(t){switch(t){case Y.CODE_POINTS.QUOTATION_MARK:{this.state=Q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.CODE_POINTS.AMPERSAND:{this.returnState=Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Q.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this.currentAttr.value+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}},{key:"_stateAttributeValueSingleQuoted",value:function(t){switch(t){case Y.CODE_POINTS.APOSTROPHE:{this.state=Q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.CODE_POINTS.AMPERSAND:{this.returnState=Q.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Q.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this.currentAttr.value+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}},{key:"_stateAttributeValueUnquoted",value:function(t){switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case Y.CODE_POINTS.AMPERSAND:{this.returnState=Q.ATTRIBUTE_VALUE_UNQUOTED,this.state=Q.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Q.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this.currentAttr.value+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.QUOTATION_MARK:case Y.CODE_POINTS.APOSTROPHE:case Y.CODE_POINTS.LESS_THAN_SIGN:case Y.CODE_POINTS.EQUALS_SIGN:case Y.CODE_POINTS.GRAVE_ACCENT:{this._err(Le.ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}},{key:"_stateAfterAttributeValueQuoted",value:function(t){switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case Y.CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=Q.SELF_CLOSING_START_TAG;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Q.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Le.ERR.missingWhitespaceBetweenAttributes),this.state=Q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}},{key:"_stateSelfClosingStartTag",value:function(t){switch(t){case Y.CODE_POINTS.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Q.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Le.ERR.unexpectedSolidusInTag),this.state=Q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}},{key:"_stateBogusComment",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentComment(n);break}case Y.CODE_POINTS.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),n.data+=Y.REPLACEMENT_CHARACTER;break}default:n.data+=String.fromCodePoint(t)}}},{key:"_stateMarkupDeclarationOpen",value:function(t){this._consumeSequenceIfMatch(Y.SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(Y.SEQUENCES.DASH_DASH.length+1),this.state=Q.COMMENT_START):this._consumeSequenceIfMatch(Y.SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Y.SEQUENCES.DOCTYPE.length+1),this.state=Q.DOCTYPE):this._consumeSequenceIfMatch(Y.SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=Q.CDATA_SECTION:(this._err(Le.ERR.cdataInHtmlContent),this._createCommentToken(Y.SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Q.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Le.ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(t))}},{key:"_stateCommentStart",value:function(t){switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.COMMENT_START_DASH;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.abruptClosingOfEmptyComment),this.state=Q.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Q.COMMENT,this._stateComment(t)}}},{key:"_stateCommentStartDash",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.COMMENT_END;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.abruptClosingOfEmptyComment),this.state=Q.DATA,this.emitCurrentComment(n);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Q.COMMENT,this._stateComment(t)}}},{key:"_stateComment",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.COMMENT_END_DASH;break}case Y.CODE_POINTS.LESS_THAN_SIGN:{n.data+="<",this.state=Q.COMMENT_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),n.data+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}},{key:"_stateCommentLessThanSign",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.EXCLAMATION_MARK:{n.data+="!",this.state=Q.COMMENT_LESS_THAN_SIGN_BANG;break}case Y.CODE_POINTS.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Q.COMMENT,this._stateComment(t)}}},{key:"_stateCommentLessThanSignBang",value:function(t){t===Y.CODE_POINTS.HYPHEN_MINUS?this.state=Q.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Q.COMMENT,this._stateComment(t))}},{key:"_stateCommentLessThanSignBangDash",value:function(t){t===Y.CODE_POINTS.HYPHEN_MINUS?this.state=Q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Q.COMMENT_END_DASH,this._stateCommentEndDash(t))}},{key:"_stateCommentLessThanSignBangDashDash",value:function(t){t!==Y.CODE_POINTS.GREATER_THAN_SIGN&&t!==Y.CODE_POINTS.EOF&&this._err(Le.ERR.nestedComment),this.state=Q.COMMENT_END,this._stateCommentEnd(t)}},{key:"_stateCommentEndDash",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.COMMENT_END;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Q.COMMENT,this._stateComment(t)}}},{key:"_stateCommentEnd",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentComment(n);break}case Y.CODE_POINTS.EXCLAMATION_MARK:{this.state=Q.COMMENT_END_BANG;break}case Y.CODE_POINTS.HYPHEN_MINUS:{n.data+="-";break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Q.COMMENT,this._stateComment(t)}}},{key:"_stateCommentEndBang",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.HYPHEN_MINUS:{n.data+="--!",this.state=Q.COMMENT_END_DASH;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.incorrectlyClosedComment),this.state=Q.DATA,this.emitCurrentComment(n);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Q.COMMENT,this._stateComment(t)}}},{key:"_stateDoctype",value:function(t){switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_NAME;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Le.ERR.missingWhitespaceBeforeDoctypeName),this.state=Q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}},{key:"_stateBeforeDoctypeName",value:function(t){if(Om(t))this._createDoctypeToken(String.fromCharCode(hb(t))),this.state=Q.DOCTYPE_NAME;else switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),this._createDoctypeToken(Y.REPLACEMENT_CHARACTER),this.state=Q.DOCTYPE_NAME;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Q.DOCTYPE_NAME}}},{key:"_stateDoctypeName",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=Q.AFTER_DOCTYPE_NAME;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(n);break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),n.name+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Om(t)?hb(t):t)}}},{key:"_stateAfterDoctypeName",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(n);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Y.SEQUENCES.PUBLIC,!1)?this.state=Q.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Y.SEQUENCES.SYSTEM,!1)?this.state=Q.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Le.ERR.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}},{key:"_stateAfterDoctypePublicKeyword",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.CODE_POINTS.QUOTATION_MARK:{this._err(Le.ERR.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{this._err(Le.ERR.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Le.ERR.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateBeforeDoctypePublicIdentifier",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.QUOTATION_MARK:{n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Le.ERR.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateDoctypePublicIdentifierDoubleQuoted",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.QUOTATION_MARK:{this.state=Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),n.publicId+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}},{key:"_stateDoctypePublicIdentifierSingleQuoted",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.APOSTROPHE:{this.state=Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),n.publicId+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}},{key:"_stateAfterDoctypePublicIdentifier",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=Q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(n);break}case Y.CODE_POINTS.QUOTATION_MARK:{this._err(Le.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{this._err(Le.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Le.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateBetweenDoctypePublicAndSystemIdentifiers",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Q.DATA;break}case Y.CODE_POINTS.QUOTATION_MARK:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Le.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateAfterDoctypeSystemKeyword",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.CODE_POINTS.QUOTATION_MARK:{this._err(Le.ERR.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{this._err(Le.ERR.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Le.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateBeforeDoctypeSystemIdentifier",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.QUOTATION_MARK:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Le.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateDoctypeSystemIdentifierDoubleQuoted",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.QUOTATION_MARK:{this.state=Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),n.systemId+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}},{key:"_stateDoctypeSystemIdentifierSingleQuoted",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.APOSTROPHE:{this.state=Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter),n.systemId+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Le.ERR.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}},{key:"_stateAfterDoctypeSystemIdentifier",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Q.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Le.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}},{key:"_stateBogusDoctype",value:function(t){const n=this.currentToken;switch(t){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Q.DATA;break}case Y.CODE_POINTS.NULL:{this._err(Le.ERR.unexpectedNullCharacter);break}case Y.CODE_POINTS.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}},{key:"_stateCdataSection",value:function(t){switch(t){case Y.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=Q.CDATA_SECTION_BRACKET;break}case Y.CODE_POINTS.EOF:{this._err(Le.ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}},{key:"_stateCdataSectionBracket",value:function(t){t===Y.CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=Q.CDATA_SECTION_END:(this._emitChars("]"),this.state=Q.CDATA_SECTION,this._stateCdataSection(t))}},{key:"_stateCdataSectionEnd",value:function(t){switch(t){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA;break}case Y.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Q.CDATA_SECTION,this._stateCdataSection(t)}}},{key:"_stateCharacterReference",value:function(t){t===Y.CODE_POINTS.NUMBER_SIGN?this.state=Q.NUMERIC_CHARACTER_REFERENCE:Hx(t)?(this.state=Q.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,t))}},{key:"_stateNamedCharacterReference",value:function(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.AMPERSAND),this.state=Q.AMBIGUOUS_AMPERSAND}},{key:"_stateAmbiguousAmpersand",value:function(t){Hx(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Y.CODE_POINTS.SEMICOLON&&this._err(Le.ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}},{key:"_stateNumericCharacterReference",value:function(t){this.charRefCode=0,t===Y.CODE_POINTS.LATIN_SMALL_X||t===Y.CODE_POINTS.LATIN_CAPITAL_X?this.state=Q.HEXADEMICAL_CHARACTER_REFERENCE_START:lg(t)?(this.state=Q.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Le.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}},{key:"_stateHexademicalCharacterReferenceStart",value:function(t){QSe(t)?(this.state=Q.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Le.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}},{key:"_stateHexademicalCharacterReference",value:function(t){tX(t)?this.charRefCode=this.charRefCode*16+t-55:rX(t)?this.charRefCode=this.charRefCode*16+t-87:lg(t)?this.charRefCode=this.charRefCode*16+t-48:t===Y.CODE_POINTS.SEMICOLON?this.state=Q.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Le.ERR.missingSemicolonAfterCharacterReference),this.state=Q.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}},{key:"_stateDecimalCharacterReference",value:function(t){lg(t)?this.charRefCode=this.charRefCode*10+t-48:t===Y.CODE_POINTS.SEMICOLON?this.state=Q.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Le.ERR.missingSemicolonAfterCharacterReference),this.state=Q.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}},{key:"_stateNumericCharacterReferenceEnd",value:function(t){if(this.charRefCode===Y.CODE_POINTS.NULL)this._err(Le.ERR.nullCharacterReference),this.charRefCode=Y.CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Le.ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=Y.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,Y.isSurrogate)(this.charRefCode))this._err(Le.ERR.surrogateCharacterReference),this.charRefCode=Y.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,Y.isUndefinedCodePoint)(this.charRefCode))this._err(Le.ERR.noncharacterCharacterReference);else if((0,Y.isControlCodePoint)(this.charRefCode)||this.charRefCode===Y.CODE_POINTS.CARRIAGE_RETURN){this._err(Le.ERR.controlCharacterReference);const n=$Se.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}]),e}();Tc.Tokenizer=JSe;var Z1={};function ewe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function twe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nwe(r.key),r)}}function rwe(e,t,n){return t&&twe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nwe(e){var t=iwe(e,"string");return typeof t=="symbol"?t:String(t)}function iwe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}Object.defineProperty(Z1,"__esModule",{value:!0});Z1.OpenElementStack=void 0;const Fe=$s,iX=new Set([Fe.TAG_ID.DD,Fe.TAG_ID.DT,Fe.TAG_ID.LI,Fe.TAG_ID.OPTGROUP,Fe.TAG_ID.OPTION,Fe.TAG_ID.P,Fe.TAG_ID.RB,Fe.TAG_ID.RP,Fe.TAG_ID.RT,Fe.TAG_ID.RTC]),C3=new Set([...iX,Fe.TAG_ID.CAPTION,Fe.TAG_ID.COLGROUP,Fe.TAG_ID.TBODY,Fe.TAG_ID.TD,Fe.TAG_ID.TFOOT,Fe.TAG_ID.TH,Fe.TAG_ID.THEAD,Fe.TAG_ID.TR]),fb=new Map([[Fe.TAG_ID.APPLET,Fe.NS.HTML],[Fe.TAG_ID.CAPTION,Fe.NS.HTML],[Fe.TAG_ID.HTML,Fe.NS.HTML],[Fe.TAG_ID.MARQUEE,Fe.NS.HTML],[Fe.TAG_ID.OBJECT,Fe.NS.HTML],[Fe.TAG_ID.TABLE,Fe.NS.HTML],[Fe.TAG_ID.TD,Fe.NS.HTML],[Fe.TAG_ID.TEMPLATE,Fe.NS.HTML],[Fe.TAG_ID.TH,Fe.NS.HTML],[Fe.TAG_ID.ANNOTATION_XML,Fe.NS.MATHML],[Fe.TAG_ID.MI,Fe.NS.MATHML],[Fe.TAG_ID.MN,Fe.NS.MATHML],[Fe.TAG_ID.MO,Fe.NS.MATHML],[Fe.TAG_ID.MS,Fe.NS.MATHML],[Fe.TAG_ID.MTEXT,Fe.NS.MATHML],[Fe.TAG_ID.DESC,Fe.NS.SVG],[Fe.TAG_ID.FOREIGN_OBJECT,Fe.NS.SVG],[Fe.TAG_ID.TITLE,Fe.NS.SVG]]),owe=[Fe.TAG_ID.H1,Fe.TAG_ID.H2,Fe.TAG_ID.H3,Fe.TAG_ID.H4,Fe.TAG_ID.H5,Fe.TAG_ID.H6],awe=[Fe.TAG_ID.TR,Fe.TAG_ID.TEMPLATE,Fe.TAG_ID.HTML],swe=[Fe.TAG_ID.TBODY,Fe.TAG_ID.TFOOT,Fe.TAG_ID.THEAD,Fe.TAG_ID.TEMPLATE,Fe.TAG_ID.HTML],lwe=[Fe.TAG_ID.TABLE,Fe.TAG_ID.TEMPLATE,Fe.TAG_ID.HTML],uwe=[Fe.TAG_ID.TD,Fe.TAG_ID.TH];let cwe=function(){function e(t,n,r){ewe(this,e),this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=Fe.TAG_ID.UNKNOWN,this.current=t}return rwe(e,[{key:"currentTmplContentOrNode",get:function(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}},{key:"_indexOf",value:function(t){return this.items.lastIndexOf(t,this.stackTop)}},{key:"_isInTemplate",value:function(){return this.currentTagId===Fe.TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.NS.HTML}},{key:"_updateCurrentElement",value:function(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}},{key:"push",value:function(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}},{key:"pop",value:function(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}},{key:"replace",value:function(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}},{key:"insertAfter",value:function(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}},{key:"popUntilTagNamePopped",value:function(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.NS.HTML);this.shortenToLength(n<0?0:n)}},{key:"shortenToLength",value:function(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}},{key:"popUntilElementPopped",value:function(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}},{key:"popUntilPopped",value:function(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}},{key:"popUntilNumberedHeaderPopped",value:function(){this.popUntilPopped(owe,Fe.NS.HTML)}},{key:"popUntilTableCellPopped",value:function(){this.popUntilPopped(uwe,Fe.NS.HTML)}},{key:"popAllUpToHtmlElement",value:function(){this.tmplCount=0,this.shortenToLength(1)}},{key:"_indexOfTagNames",value:function(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}},{key:"clearBackTo",value:function(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}},{key:"clearBackToTableContext",value:function(){this.clearBackTo(lwe,Fe.NS.HTML)}},{key:"clearBackToTableBodyContext",value:function(){this.clearBackTo(swe,Fe.NS.HTML)}},{key:"clearBackToTableRowContext",value:function(){this.clearBackTo(awe,Fe.NS.HTML)}},{key:"remove",value:function(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}},{key:"tryPeekProperlyNestedBodyElement",value:function(){return this.stackTop>=1&&this.tagIDs[1]===Fe.TAG_ID.BODY?this.items[1]:null}},{key:"contains",value:function(t){return this._indexOf(t)>-1}},{key:"getCommonAncestor",value:function(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}},{key:"isRootHtmlElementCurrent",value:function(){return this.stackTop===0&&this.tagIDs[0]===Fe.TAG_ID.HTML}},{key:"hasInScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.NS.HTML)return!0;if(fb.get(r)===i)return!1}return!0}},{key:"hasNumberedHeaderInScope",value:function(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if((0,Fe.isNumberedHeader)(n)&&r===Fe.NS.HTML)return!0;if(fb.get(n)===r)return!1}return!0}},{key:"hasInListItemScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.NS.HTML)return!0;if((r===Fe.TAG_ID.UL||r===Fe.TAG_ID.OL)&&i===Fe.NS.HTML||fb.get(r)===i)return!1}return!0}},{key:"hasInButtonScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.NS.HTML)return!0;if(r===Fe.TAG_ID.BUTTON&&i===Fe.NS.HTML||fb.get(r)===i)return!1}return!0}},{key:"hasInTableScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.NS.HTML){if(r===t)return!0;if(r===Fe.TAG_ID.TABLE||r===Fe.TAG_ID.TEMPLATE||r===Fe.TAG_ID.HTML)return!1}}return!0}},{key:"hasTableBodyContextInTableScope",value:function(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.NS.HTML){if(n===Fe.TAG_ID.TBODY||n===Fe.TAG_ID.THEAD||n===Fe.TAG_ID.TFOOT)return!0;if(n===Fe.TAG_ID.TABLE||n===Fe.TAG_ID.HTML)return!1}}return!0}},{key:"hasInSelectScope",value:function(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.NS.HTML){if(r===t)return!0;if(r!==Fe.TAG_ID.OPTION&&r!==Fe.TAG_ID.OPTGROUP)return!1}}return!0}},{key:"generateImpliedEndTags",value:function(){for(;iX.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsThoroughly",value:function(){for(;C3.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsWithExclusion",value:function(t){for(;this.currentTagId!==t&&C3.has(this.currentTagId);)this.pop()}}]),e}();Z1.OpenElementStack=cwe;var oX={};(function(e){function t(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function n(l,f){for(var h=0;h<f.length;h++){var p=f[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,i(p.key),p)}}function r(l,f,h){return f&&n(l.prototype,f),Object.defineProperty(l,"prototype",{writable:!1}),l}function i(l){var f=o(l,"string");return typeof f=="symbol"?f:String(f)}function o(l,f){if(typeof l!="object"||l===null)return l;var h=l[Symbol.toPrimitive];if(h!==void 0){var p=h.call(l,f);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingElementList=e.EntryType=void 0;const a=3;var s;(function(l){l[l.Marker=0]="Marker",l[l.Element=1]="Element"})(s=e.EntryType||(e.EntryType={}));const u={type:s.Marker};let c=function(){function l(f){t(this,l),this.treeAdapter=f,this.entries=[],this.bookmark=null}return r(l,[{key:"_getNoahArkConditionCandidates",value:function(f,h){const p=[],d=h.length,m=this.treeAdapter.getTagName(f),g=this.treeAdapter.getNamespaceURI(f);for(let v=0;v<this.entries.length;v++){const b=this.entries[v];if(b.type===s.Marker)break;const{element:y}=b;if(this.treeAdapter.getTagName(y)===m&&this.treeAdapter.getNamespaceURI(y)===g){const _=this.treeAdapter.getAttrList(y);_.length===d&&p.push({idx:v,attrs:_})}}return p}},{key:"_ensureNoahArkCondition",value:function(f){if(this.entries.length<a)return;const h=this.treeAdapter.getAttrList(f),p=this._getNoahArkConditionCandidates(f,h);if(p.length<a)return;const d=new Map(h.map(g=>[g.name,g.value]));let m=0;for(let g=0;g<p.length;g++){const v=p[g];v.attrs.every(b=>d.get(b.name)===b.value)&&(m+=1,m>=a&&this.entries.splice(v.idx,1))}}},{key:"insertMarker",value:function(){this.entries.unshift(u)}},{key:"pushElement",value:function(f,h){this._ensureNoahArkCondition(f),this.entries.unshift({type:s.Element,element:f,token:h})}},{key:"insertElementAfterBookmark",value:function(f,h){const p=this.entries.indexOf(this.bookmark);this.entries.splice(p,0,{type:s.Element,element:f,token:h})}},{key:"removeEntry",value:function(f){const h=this.entries.indexOf(f);h>=0&&this.entries.splice(h,1)}},{key:"clearToLastMarker",value:function(){const f=this.entries.indexOf(u);f>=0?this.entries.splice(0,f+1):this.entries.length=0}},{key:"getElementEntryInScopeWithTagName",value:function(f){const h=this.entries.find(p=>p.type===s.Marker||this.treeAdapter.getTagName(p.element)===f);return h&&h.type===s.Element?h:null}},{key:"getElementEntry",value:function(f){return this.entries.find(h=>h.type===s.Element&&h.element===f)}}]),l}();e.FormattingElementList=c})(oX);var J1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTreeAdapter=void 0;const t=$s;function n(r){return{nodeName:"#text",value:r,parentNode:null}}e.defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:t.DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(r,i,o){return{nodeName:r,tagName:r,attrs:o,namespaceURI:i,childNodes:[],parentNode:null}},createCommentNode(r){return{nodeName:"#comment",data:r,parentNode:null}},appendChild(r,i){r.childNodes.push(i),i.parentNode=r},insertBefore(r,i,o){const a=r.childNodes.indexOf(o);r.childNodes.splice(a,0,i),i.parentNode=r},setTemplateContent(r,i){r.content=i},getTemplateContent(r){return r.content},setDocumentType(r,i,o,a){const s=r.childNodes.find(u=>u.nodeName==="#documentType");if(s)s.name=i,s.publicId=o,s.systemId=a;else{const u={nodeName:"#documentType",name:i,publicId:o,systemId:a,parentNode:null};e.defaultTreeAdapter.appendChild(r,u)}},setDocumentMode(r,i){r.mode=i},getDocumentMode(r){return r.mode},detachNode(r){if(r.parentNode){const i=r.parentNode.childNodes.indexOf(r);r.parentNode.childNodes.splice(i,1),r.parentNode=null}},insertText(r,i){if(r.childNodes.length>0){const o=r.childNodes[r.childNodes.length-1];if(e.defaultTreeAdapter.isTextNode(o)){o.value+=i;return}}e.defaultTreeAdapter.appendChild(r,n(i))},insertTextBefore(r,i,o){const a=r.childNodes[r.childNodes.indexOf(o)-1];a&&e.defaultTreeAdapter.isTextNode(a)?a.value+=i:e.defaultTreeAdapter.insertBefore(r,n(i),o)},adoptAttributes(r,i){const o=new Set(r.attrs.map(a=>a.name));for(let a=0;a<i.length;a++)o.has(i[a].name)||r.attrs.push(i[a])},getFirstChild(r){return r.childNodes[0]},getChildNodes(r){return r.childNodes},getParentNode(r){return r.parentNode},getAttrList(r){return r.attrs},getTagName(r){return r.tagName},getNamespaceURI(r){return r.namespaceURI},getTextNodeContent(r){return r.value},getCommentNodeContent(r){return r.data},getDocumentTypeNodeName(r){return r.name},getDocumentTypeNodePublicId(r){return r.publicId},getDocumentTypeNodeSystemId(r){return r.systemId},isTextNode(r){return r.nodeName==="#text"},isCommentNode(r){return r.nodeName==="#comment"},isDocumentTypeNode(r){return r.nodeName==="#documentType"},isElementNode(r){return Object.prototype.hasOwnProperty.call(r,"tagName")},setNodeSourceCodeLocation(r,i){r.sourceCodeLocation=i},getNodeSourceCodeLocation(r){return r.sourceCodeLocation},updateNodeSourceCodeLocation(r,i){r.sourceCodeLocation=Object.assign(Object.assign({},r.sourceCodeLocation),i)}}})(J1);var Op={};Object.defineProperty(Op,"__esModule",{value:!0});Op.getDocumentMode=Op.isConforming=void 0;const kh=$s,aX="html",hwe="about:legacy-compat",fwe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",sX=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],pwe=[...sX,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],dwe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),lX=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],mwe=[...lX,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function P3(e,t){return t.some(n=>e.startsWith(n))}function gwe(e){return e.name===aX&&e.publicId===null&&(e.systemId===null||e.systemId===hwe)}Op.isConforming=gwe;function ywe(e){if(e.name!==aX)return kh.DOCUMENT_MODE.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===fwe)return kh.DOCUMENT_MODE.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),dwe.has(n))return kh.DOCUMENT_MODE.QUIRKS;let r=t===null?pwe:sX;if(P3(n,r))return kh.DOCUMENT_MODE.QUIRKS;if(r=t===null?lX:mwe,P3(n,r))return kh.DOCUMENT_MODE.LIMITED_QUIRKS}return kh.DOCUMENT_MODE.NO_QUIRKS}Op.getDocumentMode=ywe;var TN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIntegrationPoint=e.adjustTokenSVGTagName=e.adjustTokenXMLAttrs=e.adjustTokenSVGAttrs=e.adjustTokenMathMLAttrs=e.causesExit=e.SVG_TAG_NAMES_ADJUSTMENT_MAP=void 0;const t=$s,n={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},r="definitionurl",i="definitionURL",o=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(g=>[g.toLowerCase(),g])),a=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:t.NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:t.NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:t.NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:t.NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:t.NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:t.NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:t.NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:t.NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:t.NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:t.NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:t.NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:t.NS.XMLNS}]]);e.SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(g=>[g.toLowerCase(),g]));const s=new Set([t.TAG_ID.B,t.TAG_ID.BIG,t.TAG_ID.BLOCKQUOTE,t.TAG_ID.BODY,t.TAG_ID.BR,t.TAG_ID.CENTER,t.TAG_ID.CODE,t.TAG_ID.DD,t.TAG_ID.DIV,t.TAG_ID.DL,t.TAG_ID.DT,t.TAG_ID.EM,t.TAG_ID.EMBED,t.TAG_ID.H1,t.TAG_ID.H2,t.TAG_ID.H3,t.TAG_ID.H4,t.TAG_ID.H5,t.TAG_ID.H6,t.TAG_ID.HEAD,t.TAG_ID.HR,t.TAG_ID.I,t.TAG_ID.IMG,t.TAG_ID.LI,t.TAG_ID.LISTING,t.TAG_ID.MENU,t.TAG_ID.META,t.TAG_ID.NOBR,t.TAG_ID.OL,t.TAG_ID.P,t.TAG_ID.PRE,t.TAG_ID.RUBY,t.TAG_ID.S,t.TAG_ID.SMALL,t.TAG_ID.SPAN,t.TAG_ID.STRONG,t.TAG_ID.STRIKE,t.TAG_ID.SUB,t.TAG_ID.SUP,t.TAG_ID.TABLE,t.TAG_ID.TT,t.TAG_ID.U,t.TAG_ID.UL,t.TAG_ID.VAR]);function u(g){const v=g.tagID;return v===t.TAG_ID.FONT&&g.attrs.some(({name:b})=>b===t.ATTRS.COLOR||b===t.ATTRS.SIZE||b===t.ATTRS.FACE)||s.has(v)}e.causesExit=u;function c(g){for(let v=0;v<g.attrs.length;v++)if(g.attrs[v].name===r){g.attrs[v].name=i;break}}e.adjustTokenMathMLAttrs=c;function l(g){for(let v=0;v<g.attrs.length;v++){const b=o.get(g.attrs[v].name);b!=null&&(g.attrs[v].name=b)}}e.adjustTokenSVGAttrs=l;function f(g){for(let v=0;v<g.attrs.length;v++){const b=a.get(g.attrs[v].name);b&&(g.attrs[v].prefix=b.prefix,g.attrs[v].name=b.name,g.attrs[v].namespace=b.namespace)}}e.adjustTokenXMLAttrs=f;function h(g){const v=e.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(g.tagName);v!=null&&(g.tagName=v,g.tagID=(0,t.getTagID)(g.tagName))}e.adjustTokenSVGTagName=h;function p(g,v){return v===t.NS.MATHML&&(g===t.TAG_ID.MI||g===t.TAG_ID.MO||g===t.TAG_ID.MN||g===t.TAG_ID.MS||g===t.TAG_ID.MTEXT)}function d(g,v,b){if(v===t.NS.MATHML&&g===t.TAG_ID.ANNOTATION_XML){for(let y=0;y<b.length;y++)if(b[y].name===t.ATTRS.ENCODING){const _=b[y].value.toLowerCase();return _===n.TEXT_HTML||_===n.APPLICATION_XML}}return v===t.NS.SVG&&(g===t.TAG_ID.FOREIGN_OBJECT||g===t.TAG_ID.DESC||g===t.TAG_ID.TITLE)}function m(g,v,b,y){return(!y||y===t.NS.HTML)&&d(g,v,b)||(!y||y===t.NS.MATHML)&&p(g,v)}e.isIntegrationPoint=m})(TN);function vwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_we(r.key),r)}}function bwe(e,t,n){return t&&D3(e.prototype,t),n&&D3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _we(e){var t=Twe(e,"string");return typeof t=="symbol"?t:String(t)}function Twe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}Object.defineProperty(ly,"__esModule",{value:!0});ly.Parser=void 0;const hi=Tc,Ewe=Z1,R3=oX,Swe=J1,N3=Op,ba=TN,Un=ov,uX=K1,D=$s,hn=Q1,wwe="hidden",Awe=8,Owe=3;var he;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(he||(he={}));const kwe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},cX=new Set([D.TAG_ID.TABLE,D.TAG_ID.TBODY,D.TAG_ID.TFOOT,D.TAG_ID.THEAD,D.TAG_ID.TR]),M3={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Swe.defaultTreeAdapter,onParseError:null};let xwe=function(){function e(t,n,r=null,i=null){vwe(this,e),this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=he.INITIAL,this.originalInsertionMode=he.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=Object.assign(Object.assign({},M3),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new hi.Tokenizer(this.options,this),this.activeFormattingElements=new R3.FormattingElementList(this.treeAdapter),this.fragmentContextID=r?(0,D.getTagID)(this.treeAdapter.getTagName(r)):D.TAG_ID.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Ewe.OpenElementStack(this.document,this.treeAdapter,this)}return bwe(e,[{key:"getFragment",value:function(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}},{key:"_err",value:function(t,n,r){var i;if(!this.onParseError)return;const o=(i=t.location)!==null&&i!==void 0?i:kwe,a={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(a)}},{key:"onItemPush",value:function(t,n,r){var i,o;(o=(i=this.treeAdapter).onItemPush)===null||o===void 0||o.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}},{key:"onItemPop",value:function(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let o,a;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,a=this.fragmentContextID):{current:o,currentTagId:a}=this.openElements,this._setContextModes(o,a)}}},{key:"_setContextModes",value:function(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===D.NS.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}},{key:"_switchToTextParsing",value:function(t,n){this._insertElement(t,D.NS.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=he.TEXT}},{key:"switchToPlaintextParsing",value:function(){this.insertionMode=he.TEXT,this.originalInsertionMode=he.IN_BODY,this.tokenizer.state=hi.TokenizerMode.PLAINTEXT}},{key:"_getAdjustedCurrentElement",value:function(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}},{key:"_findFormInFragmentContext",value:function(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===D.TAG_NAMES.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}},{key:"_initTokenizerForFragmentParsing",value:function(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==D.NS.HTML))switch(this.fragmentContextID){case D.TAG_ID.TITLE:case D.TAG_ID.TEXTAREA:{this.tokenizer.state=hi.TokenizerMode.RCDATA;break}case D.TAG_ID.STYLE:case D.TAG_ID.XMP:case D.TAG_ID.IFRAME:case D.TAG_ID.NOEMBED:case D.TAG_ID.NOFRAMES:case D.TAG_ID.NOSCRIPT:{this.tokenizer.state=hi.TokenizerMode.RAWTEXT;break}case D.TAG_ID.SCRIPT:{this.tokenizer.state=hi.TokenizerMode.SCRIPT_DATA;break}case D.TAG_ID.PLAINTEXT:{this.tokenizer.state=hi.TokenizerMode.PLAINTEXT;break}}}},{key:"_setDocumentType",value:function(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}},{key:"_attachElementToTree",value:function(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&Object.assign(Object.assign({},n),{startTag:n});this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}},{key:"_appendElement",value:function(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}},{key:"_insertElement",value:function(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}},{key:"_insertFakeElement",value:function(t,n){const r=this.treeAdapter.createElement(t,D.NS.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}},{key:"_insertTemplate",value:function(t){const n=this.treeAdapter.createElement(t.tagName,D.NS.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}},{key:"_insertFakeRootElement",value:function(){const t=this.treeAdapter.createElement(D.TAG_NAMES.HTML,D.NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,D.TAG_ID.HTML)}},{key:"_appendCommentNode",value:function(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}},{key:"_insertCharacters",value:function(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),o=r?i.lastIndexOf(r):i.length,a=i[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:s,endCol:u,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:s,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,t.location)}},{key:"_adoptNodes",value:function(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}},{key:"_setEndLocation",value:function(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),o=n.type===hn.TokenType.END_TAG&&i===n.tagName?{endTag:Object.assign({},r),endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}},{key:"shouldProcessStartTagTokenInForeignContent",value:function(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===D.TAG_ID.SVG&&this.treeAdapter.getTagName(n)===D.TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===D.NS.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===D.TAG_ID.MGLYPH||t.tagID===D.TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(r,n,D.NS.HTML)}},{key:"_processToken",value:function(t){switch(t.type){case hn.TokenType.CHARACTER:{this.onCharacter(t);break}case hn.TokenType.NULL_CHARACTER:{this.onNullCharacter(t);break}case hn.TokenType.COMMENT:{this.onComment(t);break}case hn.TokenType.DOCTYPE:{this.onDoctype(t);break}case hn.TokenType.START_TAG:{this._processStartTag(t);break}case hn.TokenType.END_TAG:{this.onEndTag(t);break}case hn.TokenType.EOF:{this.onEof(t);break}case hn.TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}},{key:"_isIntegrationPoint",value:function(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return ba.isIntegrationPoint(t,i,o,r)}},{key:"_reconstructActiveFormattingElements",value:function(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===R3.EntryType.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const o=this.activeFormattingElements.entries[i];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}},{key:"_closeTableCell",value:function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=he.IN_ROW}},{key:"_closePElement",value:function(){this.openElements.generateImpliedEndTagsWithExclusion(D.TAG_ID.P),this.openElements.popUntilTagNamePopped(D.TAG_ID.P)}},{key:"_resetInsertionMode",value:function(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case D.TAG_ID.TR:{this.insertionMode=he.IN_ROW;return}case D.TAG_ID.TBODY:case D.TAG_ID.THEAD:case D.TAG_ID.TFOOT:{this.insertionMode=he.IN_TABLE_BODY;return}case D.TAG_ID.CAPTION:{this.insertionMode=he.IN_CAPTION;return}case D.TAG_ID.COLGROUP:{this.insertionMode=he.IN_COLUMN_GROUP;return}case D.TAG_ID.TABLE:{this.insertionMode=he.IN_TABLE;return}case D.TAG_ID.BODY:{this.insertionMode=he.IN_BODY;return}case D.TAG_ID.FRAMESET:{this.insertionMode=he.IN_FRAMESET;return}case D.TAG_ID.SELECT:{this._resetInsertionModeForSelect(t);return}case D.TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case D.TAG_ID.HTML:{this.insertionMode=this.headElement?he.AFTER_HEAD:he.BEFORE_HEAD;return}case D.TAG_ID.TD:case D.TAG_ID.TH:{if(t>0){this.insertionMode=he.IN_CELL;return}break}case D.TAG_ID.HEAD:{if(t>0){this.insertionMode=he.IN_HEAD;return}break}}this.insertionMode=he.IN_BODY}},{key:"_resetInsertionModeForSelect",value:function(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===D.TAG_ID.TEMPLATE)break;if(r===D.TAG_ID.TABLE){this.insertionMode=he.IN_SELECT_IN_TABLE;return}}this.insertionMode=he.IN_SELECT}},{key:"_isElementCausesFosterParenting",value:function(t){return cX.has(t)}},{key:"_shouldFosterParentOnInsertion",value:function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}},{key:"_findFosterParentingLocation",value:function(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case D.TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===D.NS.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case D.TAG_ID.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}},{key:"_fosterParentElement",value:function(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}},{key:"_isSpecialElement",value:function(t,n){const r=this.treeAdapter.getNamespaceURI(t);return D.SPECIAL_ELEMENTS[r].has(n)}},{key:"onCharacter",value:function(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){iOe(this,t);return}switch(this.insertionMode){case he.INITIAL:{em(this,t);break}case he.BEFORE_HTML:{ug(this,t);break}case he.BEFORE_HEAD:{cg(this,t);break}case he.IN_HEAD:{hg(this,t);break}case he.IN_HEAD_NO_SCRIPT:{fg(this,t);break}case he.AFTER_HEAD:{pg(this,t);break}case he.IN_BODY:case he.IN_CAPTION:case he.IN_CELL:case he.IN_TEMPLATE:{fX(this,t);break}case he.TEXT:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case he.IN_TABLE:case he.IN_TABLE_BODY:case he.IN_ROW:{YA(this,t);break}case he.IN_TABLE_TEXT:{vX(this,t);break}case he.IN_COLUMN_GROUP:{W_(this,t);break}case he.AFTER_BODY:{q_(this,t);break}case he.AFTER_AFTER_BODY:{f0(this,t);break}}}},{key:"onNullCharacter",value:function(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){nOe(this,t);return}switch(this.insertionMode){case he.INITIAL:{em(this,t);break}case he.BEFORE_HTML:{ug(this,t);break}case he.BEFORE_HEAD:{cg(this,t);break}case he.IN_HEAD:{hg(this,t);break}case he.IN_HEAD_NO_SCRIPT:{fg(this,t);break}case he.AFTER_HEAD:{pg(this,t);break}case he.TEXT:{this._insertCharacters(t);break}case he.IN_TABLE:case he.IN_TABLE_BODY:case he.IN_ROW:{YA(this,t);break}case he.IN_COLUMN_GROUP:{W_(this,t);break}case he.AFTER_BODY:{q_(this,t);break}case he.AFTER_AFTER_BODY:{f0(this,t);break}}}},{key:"onComment",value:function(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Ux(this,t);return}switch(this.insertionMode){case he.INITIAL:case he.BEFORE_HTML:case he.BEFORE_HEAD:case he.IN_HEAD:case he.IN_HEAD_NO_SCRIPT:case he.AFTER_HEAD:case he.IN_BODY:case he.IN_TABLE:case he.IN_CAPTION:case he.IN_COLUMN_GROUP:case he.IN_TABLE_BODY:case he.IN_ROW:case he.IN_CELL:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:case he.IN_TEMPLATE:case he.IN_FRAMESET:case he.AFTER_FRAMESET:{Ux(this,t);break}case he.IN_TABLE_TEXT:{tm(this,t);break}case he.AFTER_BODY:{Mwe(this,t);break}case he.AFTER_AFTER_BODY:case he.AFTER_AFTER_FRAMESET:{Lwe(this,t);break}}}},{key:"onDoctype",value:function(t){switch(this.skipNextNewLine=!1,this.insertionMode){case he.INITIAL:{jwe(this,t);break}case he.BEFORE_HEAD:case he.IN_HEAD:case he.IN_HEAD_NO_SCRIPT:case he.AFTER_HEAD:{this._err(t,Un.ERR.misplacedDoctype);break}case he.IN_TABLE_TEXT:{tm(this,t);break}}}},{key:"onStartTag",value:function(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Un.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}},{key:"_processStartTag",value:function(t){this.shouldProcessStartTagTokenInForeignContent(t)?oOe(this,t):this._startTagOutsideForeignContent(t)}},{key:"_startTagOutsideForeignContent",value:function(t){switch(this.insertionMode){case he.INITIAL:{em(this,t);break}case he.BEFORE_HTML:{Bwe(this,t);break}case he.BEFORE_HEAD:{Gwe(this,t);break}case he.IN_HEAD:{oa(this,t);break}case he.IN_HEAD_NO_SCRIPT:{zwe(this,t);break}case he.AFTER_HEAD:{Ywe(this,t);break}case he.IN_BODY:{ii(this,t);break}case he.IN_TABLE:{kp(this,t);break}case he.IN_TABLE_TEXT:{tm(this,t);break}case he.IN_CAPTION:{HAe(this,t);break}case he.IN_COLUMN_GROUP:{wN(this,t);break}case he.IN_TABLE_BODY:{rS(this,t);break}case he.IN_ROW:{nS(this,t);break}case he.IN_CELL:{VAe(this,t);break}case he.IN_SELECT:{TX(this,t);break}case he.IN_SELECT_IN_TABLE:{XAe(this,t);break}case he.IN_TEMPLATE:{qAe(this,t);break}case he.AFTER_BODY:{KAe(this,t);break}case he.IN_FRAMESET:{QAe(this,t);break}case he.AFTER_FRAMESET:{JAe(this,t);break}case he.AFTER_AFTER_BODY:{tOe(this,t);break}case he.AFTER_AFTER_FRAMESET:{rOe(this,t);break}}}},{key:"onEndTag",value:function(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?aOe(this,t):this._endTagOutsideForeignContent(t)}},{key:"_endTagOutsideForeignContent",value:function(t){switch(this.insertionMode){case he.INITIAL:{em(this,t);break}case he.BEFORE_HTML:{Fwe(this,t);break}case he.BEFORE_HEAD:{Hwe(this,t);break}case he.IN_HEAD:{Uwe(this,t);break}case he.IN_HEAD_NO_SCRIPT:{Vwe(this,t);break}case he.AFTER_HEAD:{Xwe(this,t);break}case he.IN_BODY:{tS(this,t);break}case he.TEXT:{PAe(this,t);break}case he.IN_TABLE:{uy(this,t);break}case he.IN_TABLE_TEXT:{tm(this,t);break}case he.IN_CAPTION:{UAe(this,t);break}case he.IN_COLUMN_GROUP:{zAe(this,t);break}case he.IN_TABLE_BODY:{zx(this,t);break}case he.IN_ROW:{_X(this,t);break}case he.IN_CELL:{YAe(this,t);break}case he.IN_SELECT:{EX(this,t);break}case he.IN_SELECT_IN_TABLE:{WAe(this,t);break}case he.IN_TEMPLATE:{$Ae(this,t);break}case he.AFTER_BODY:{wX(this,t);break}case he.IN_FRAMESET:{ZAe(this,t);break}case he.AFTER_FRAMESET:{eOe(this,t);break}case he.AFTER_AFTER_BODY:{f0(this,t);break}}}},{key:"onEof",value:function(t){switch(this.insertionMode){case he.INITIAL:{em(this,t);break}case he.BEFORE_HTML:{ug(this,t);break}case he.BEFORE_HEAD:{cg(this,t);break}case he.IN_HEAD:{hg(this,t);break}case he.IN_HEAD_NO_SCRIPT:{fg(this,t);break}case he.AFTER_HEAD:{pg(this,t);break}case he.IN_BODY:case he.IN_TABLE:case he.IN_CAPTION:case he.IN_COLUMN_GROUP:case he.IN_TABLE_BODY:case he.IN_ROW:case he.IN_CELL:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:{gX(this,t);break}case he.TEXT:{DAe(this,t);break}case he.IN_TABLE_TEXT:{tm(this,t);break}case he.IN_TEMPLATE:{SX(this,t);break}case he.AFTER_BODY:case he.IN_FRAMESET:case he.AFTER_FRAMESET:case he.AFTER_AFTER_BODY:case he.AFTER_AFTER_FRAMESET:{SN(this,t);break}}}},{key:"onWhitespaceCharacter",value:function(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===uX.CODE_POINTS.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case he.IN_HEAD:case he.IN_HEAD_NO_SCRIPT:case he.AFTER_HEAD:case he.TEXT:case he.IN_COLUMN_GROUP:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:case he.IN_FRAMESET:case he.AFTER_FRAMESET:{this._insertCharacters(t);break}case he.IN_BODY:case he.IN_CAPTION:case he.IN_CELL:case he.IN_TEMPLATE:case he.AFTER_BODY:case he.AFTER_AFTER_BODY:case he.AFTER_AFTER_FRAMESET:{hX(this,t);break}case he.IN_TABLE:case he.IN_TABLE_BODY:case he.IN_ROW:{YA(this,t);break}case he.IN_TABLE_TEXT:{yX(this,t);break}}}}],[{key:"parse",value:function(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}},{key:"getFragmentParser",value:function(t,n){const r=Object.assign(Object.assign({},M3),n);t??(t=r.treeAdapter.createElement(D.TAG_NAMES.TEMPLATE,D.NS.HTML,[]));const i=r.treeAdapter.createElement("documentmock",D.NS.HTML,[]),o=new this(r,i,t);return o.fragmentContextID===D.TAG_ID.TEMPLATE&&o.tmplInsertionModeStack.unshift(he.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}}]),e}();ly.Parser=xwe;function Iwe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):mX(e,t),n}function Cwe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Pwe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,a=i;a!==n;o++,a=i){i=e.openElements.getCommonAncestor(a);const s=e.activeFormattingElements.getElementEntry(a),u=s&&o>=Owe;!s||u?(u&&e.activeFormattingElements.removeEntry(s),e.openElements.remove(a)):(a=Dwe(e,s),r===t&&(e.activeFormattingElements.bookmark=s),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function Dwe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Rwe(e,t,n){const r=e.treeAdapter.getTagName(t),i=(0,D.getTagID)(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const o=e.treeAdapter.getNamespaceURI(t);i===D.TAG_ID.TEMPLATE&&o===D.NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Nwe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,i.tagID)}function EN(e,t){for(let n=0;n<Awe;n++){const r=Iwe(e,t);if(!r)break;const i=Cwe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const o=Pwe(e,i,r.element),a=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(o),a&&Rwe(e,a,o),Nwe(e,i,r)}}function Ux(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Mwe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Lwe(e,t){e._appendCommentNode(t,e.document)}function SN(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],a=e.treeAdapter.getNodeSourceCodeLocation(o);a&&!a.endTag&&e._setEndLocation(o,t)}}}}function jwe(e,t){e._setDocumentType(t);const n=t.forceQuirks?D.DOCUMENT_MODE.QUIRKS:N3.getDocumentMode(t);N3.isConforming(t)||e._err(t,Un.ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=he.BEFORE_HTML}function em(e,t){e._err(t,Un.ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,D.DOCUMENT_MODE.QUIRKS),e.insertionMode=he.BEFORE_HTML,e._processToken(t)}function Bwe(e,t){t.tagID===D.TAG_ID.HTML?(e._insertElement(t,D.NS.HTML),e.insertionMode=he.BEFORE_HEAD):ug(e,t)}function Fwe(e,t){const n=t.tagID;(n===D.TAG_ID.HTML||n===D.TAG_ID.HEAD||n===D.TAG_ID.BODY||n===D.TAG_ID.BR)&&ug(e,t)}function ug(e,t){e._insertFakeRootElement(),e.insertionMode=he.BEFORE_HEAD,e._processToken(t)}function Gwe(e,t){switch(t.tagID){case D.TAG_ID.HTML:{ii(e,t);break}case D.TAG_ID.HEAD:{e._insertElement(t,D.NS.HTML),e.headElement=e.openElements.current,e.insertionMode=he.IN_HEAD;break}default:cg(e,t)}}function Hwe(e,t){const n=t.tagID;n===D.TAG_ID.HEAD||n===D.TAG_ID.BODY||n===D.TAG_ID.HTML||n===D.TAG_ID.BR?cg(e,t):e._err(t,Un.ERR.endTagWithoutMatchingOpenElement)}function cg(e,t){e._insertFakeElement(D.TAG_NAMES.HEAD,D.TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=he.IN_HEAD,e._processToken(t)}function oa(e,t){switch(t.tagID){case D.TAG_ID.HTML:{ii(e,t);break}case D.TAG_ID.BASE:case D.TAG_ID.BASEFONT:case D.TAG_ID.BGSOUND:case D.TAG_ID.LINK:case D.TAG_ID.META:{e._appendElement(t,D.NS.HTML),t.ackSelfClosing=!0;break}case D.TAG_ID.TITLE:{e._switchToTextParsing(t,hi.TokenizerMode.RCDATA);break}case D.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,hi.TokenizerMode.RAWTEXT):(e._insertElement(t,D.NS.HTML),e.insertionMode=he.IN_HEAD_NO_SCRIPT);break}case D.TAG_ID.NOFRAMES:case D.TAG_ID.STYLE:{e._switchToTextParsing(t,hi.TokenizerMode.RAWTEXT);break}case D.TAG_ID.SCRIPT:{e._switchToTextParsing(t,hi.TokenizerMode.SCRIPT_DATA);break}case D.TAG_ID.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=he.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(he.IN_TEMPLATE);break}case D.TAG_ID.HEAD:{e._err(t,Un.ERR.misplacedStartTagForHeadElement);break}default:hg(e,t)}}function Uwe(e,t){switch(t.tagID){case D.TAG_ID.HEAD:{e.openElements.pop(),e.insertionMode=he.AFTER_HEAD;break}case D.TAG_ID.BODY:case D.TAG_ID.BR:case D.TAG_ID.HTML:{hg(e,t);break}case D.TAG_ID.TEMPLATE:{rh(e,t);break}default:e._err(t,Un.ERR.endTagWithoutMatchingOpenElement)}}function rh(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==D.TAG_ID.TEMPLATE&&e._err(t,Un.ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(D.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Un.ERR.endTagWithoutMatchingOpenElement)}function hg(e,t){e.openElements.pop(),e.insertionMode=he.AFTER_HEAD,e._processToken(t)}function zwe(e,t){switch(t.tagID){case D.TAG_ID.HTML:{ii(e,t);break}case D.TAG_ID.BASEFONT:case D.TAG_ID.BGSOUND:case D.TAG_ID.HEAD:case D.TAG_ID.LINK:case D.TAG_ID.META:case D.TAG_ID.NOFRAMES:case D.TAG_ID.STYLE:{oa(e,t);break}case D.TAG_ID.NOSCRIPT:{e._err(t,Un.ERR.nestedNoscriptInHead);break}default:fg(e,t)}}function Vwe(e,t){switch(t.tagID){case D.TAG_ID.NOSCRIPT:{e.openElements.pop(),e.insertionMode=he.IN_HEAD;break}case D.TAG_ID.BR:{fg(e,t);break}default:e._err(t,Un.ERR.endTagWithoutMatchingOpenElement)}}function fg(e,t){const n=t.type===hn.TokenType.EOF?Un.ERR.openElementsLeftAfterEof:Un.ERR.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=he.IN_HEAD,e._processToken(t)}function Ywe(e,t){switch(t.tagID){case D.TAG_ID.HTML:{ii(e,t);break}case D.TAG_ID.BODY:{e._insertElement(t,D.NS.HTML),e.framesetOk=!1,e.insertionMode=he.IN_BODY;break}case D.TAG_ID.FRAMESET:{e._insertElement(t,D.NS.HTML),e.insertionMode=he.IN_FRAMESET;break}case D.TAG_ID.BASE:case D.TAG_ID.BASEFONT:case D.TAG_ID.BGSOUND:case D.TAG_ID.LINK:case D.TAG_ID.META:case D.TAG_ID.NOFRAMES:case D.TAG_ID.SCRIPT:case D.TAG_ID.STYLE:case D.TAG_ID.TEMPLATE:case D.TAG_ID.TITLE:{e._err(t,Un.ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,D.TAG_ID.HEAD),oa(e,t),e.openElements.remove(e.headElement);break}case D.TAG_ID.HEAD:{e._err(t,Un.ERR.misplacedStartTagForHeadElement);break}default:pg(e,t)}}function Xwe(e,t){switch(t.tagID){case D.TAG_ID.BODY:case D.TAG_ID.HTML:case D.TAG_ID.BR:{pg(e,t);break}case D.TAG_ID.TEMPLATE:{rh(e,t);break}default:e._err(t,Un.ERR.endTagWithoutMatchingOpenElement)}}function pg(e,t){e._insertFakeElement(D.TAG_NAMES.BODY,D.TAG_ID.BODY),e.insertionMode=he.IN_BODY,eS(e,t)}function eS(e,t){switch(t.type){case hn.TokenType.CHARACTER:{fX(e,t);break}case hn.TokenType.WHITESPACE_CHARACTER:{hX(e,t);break}case hn.TokenType.COMMENT:{Ux(e,t);break}case hn.TokenType.START_TAG:{ii(e,t);break}case hn.TokenType.END_TAG:{tS(e,t);break}case hn.TokenType.EOF:{gX(e,t);break}}}function hX(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function fX(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Wwe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function qwe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function $we(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,D.NS.HTML),e.insertionMode=he.IN_FRAMESET)}function Kwe(e,t){e.openElements.hasInButtonScope(D.TAG_ID.P)&&e._closePElement(),e._insertElement(t,D.NS.HTML)}function Qwe(e,t){e.openElements.hasInButtonScope(D.TAG_ID.P)&&e._closePElement(),(0,D.isNumberedHeader)(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,D.NS.HTML)}function Zwe(e,t){e.openElements.hasInButtonScope(D.TAG_ID.P)&&e._closePElement(),e._insertElement(t,D.NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Jwe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(D.TAG_ID.P)&&e._closePElement(),e._insertElement(t,D.NS.HTML),n||(e.formElement=e.openElements.current))}function eAe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===D.TAG_ID.LI&&i===D.TAG_ID.LI||(n===D.TAG_ID.DD||n===D.TAG_ID.DT)&&(i===D.TAG_ID.DD||i===D.TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==D.TAG_ID.ADDRESS&&i!==D.TAG_ID.DIV&&i!==D.TAG_ID.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(D.TAG_ID.P)&&e._closePElement(),e._insertElement(t,D.NS.HTML)}function tAe(e,t){e.openElements.hasInButtonScope(D.TAG_ID.P)&&e._closePElement(),e._insertElement(t,D.NS.HTML),e.tokenizer.state=hi.TokenizerMode.PLAINTEXT}function rAe(e,t){e.openElements.hasInScope(D.TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(D.TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,D.NS.HTML),e.framesetOk=!1}function nAe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(D.TAG_NAMES.A);n&&(EN(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,D.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function iAe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,D.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function oAe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(D.TAG_ID.NOBR)&&(EN(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,D.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function aAe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,D.NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function sAe(e,t){e.treeAdapter.getDocumentMode(e.document)!==D.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(D.TAG_ID.P)&&e._closePElement(),e._insertElement(t,D.NS.HTML),e.framesetOk=!1,e.insertionMode=he.IN_TABLE}function pX(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,D.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function dX(e){const t=(0,hn.getTokenAttr)(e,D.ATTRS.TYPE);return t!=null&&t.toLowerCase()===wwe}function lAe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,D.NS.HTML),dX(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function uAe(e,t){e._appendElement(t,D.NS.HTML),t.ackSelfClosing=!0}function cAe(e,t){e.openElements.hasInButtonScope(D.TAG_ID.P)&&e._closePElement(),e._appendElement(t,D.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function hAe(e,t){t.tagName=D.TAG_NAMES.IMG,t.tagID=D.TAG_ID.IMG,pX(e,t)}function fAe(e,t){e._insertElement(t,D.NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=hi.TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=he.TEXT}function pAe(e,t){e.openElements.hasInButtonScope(D.TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,hi.TokenizerMode.RAWTEXT)}function dAe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,hi.TokenizerMode.RAWTEXT)}function L3(e,t){e._switchToTextParsing(t,hi.TokenizerMode.RAWTEXT)}function mAe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,D.NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===he.IN_TABLE||e.insertionMode===he.IN_CAPTION||e.insertionMode===he.IN_TABLE_BODY||e.insertionMode===he.IN_ROW||e.insertionMode===he.IN_CELL?he.IN_SELECT_IN_TABLE:he.IN_SELECT}function gAe(e,t){e.openElements.currentTagId===D.TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,D.NS.HTML)}function yAe(e,t){e.openElements.hasInScope(D.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,D.NS.HTML)}function vAe(e,t){e.openElements.hasInScope(D.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(D.TAG_ID.RTC),e._insertElement(t,D.NS.HTML)}function bAe(e,t){e._reconstructActiveFormattingElements(),ba.adjustTokenMathMLAttrs(t),ba.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,D.NS.MATHML):e._insertElement(t,D.NS.MATHML),t.ackSelfClosing=!0}function _Ae(e,t){e._reconstructActiveFormattingElements(),ba.adjustTokenSVGAttrs(t),ba.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,D.NS.SVG):e._insertElement(t,D.NS.SVG),t.ackSelfClosing=!0}function j3(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,D.NS.HTML)}function ii(e,t){switch(t.tagID){case D.TAG_ID.I:case D.TAG_ID.S:case D.TAG_ID.B:case D.TAG_ID.U:case D.TAG_ID.EM:case D.TAG_ID.TT:case D.TAG_ID.BIG:case D.TAG_ID.CODE:case D.TAG_ID.FONT:case D.TAG_ID.SMALL:case D.TAG_ID.STRIKE:case D.TAG_ID.STRONG:{iAe(e,t);break}case D.TAG_ID.A:{nAe(e,t);break}case D.TAG_ID.H1:case D.TAG_ID.H2:case D.TAG_ID.H3:case D.TAG_ID.H4:case D.TAG_ID.H5:case D.TAG_ID.H6:{Qwe(e,t);break}case D.TAG_ID.P:case D.TAG_ID.DL:case D.TAG_ID.OL:case D.TAG_ID.UL:case D.TAG_ID.DIV:case D.TAG_ID.DIR:case D.TAG_ID.NAV:case D.TAG_ID.MAIN:case D.TAG_ID.MENU:case D.TAG_ID.ASIDE:case D.TAG_ID.CENTER:case D.TAG_ID.FIGURE:case D.TAG_ID.FOOTER:case D.TAG_ID.HEADER:case D.TAG_ID.HGROUP:case D.TAG_ID.DIALOG:case D.TAG_ID.DETAILS:case D.TAG_ID.ADDRESS:case D.TAG_ID.ARTICLE:case D.TAG_ID.SECTION:case D.TAG_ID.SUMMARY:case D.TAG_ID.FIELDSET:case D.TAG_ID.BLOCKQUOTE:case D.TAG_ID.FIGCAPTION:{Kwe(e,t);break}case D.TAG_ID.LI:case D.TAG_ID.DD:case D.TAG_ID.DT:{eAe(e,t);break}case D.TAG_ID.BR:case D.TAG_ID.IMG:case D.TAG_ID.WBR:case D.TAG_ID.AREA:case D.TAG_ID.EMBED:case D.TAG_ID.KEYGEN:{pX(e,t);break}case D.TAG_ID.HR:{cAe(e,t);break}case D.TAG_ID.RB:case D.TAG_ID.RTC:{yAe(e,t);break}case D.TAG_ID.RT:case D.TAG_ID.RP:{vAe(e,t);break}case D.TAG_ID.PRE:case D.TAG_ID.LISTING:{Zwe(e,t);break}case D.TAG_ID.XMP:{pAe(e,t);break}case D.TAG_ID.SVG:{_Ae(e,t);break}case D.TAG_ID.HTML:{Wwe(e,t);break}case D.TAG_ID.BASE:case D.TAG_ID.LINK:case D.TAG_ID.META:case D.TAG_ID.STYLE:case D.TAG_ID.TITLE:case D.TAG_ID.SCRIPT:case D.TAG_ID.BGSOUND:case D.TAG_ID.BASEFONT:case D.TAG_ID.TEMPLATE:{oa(e,t);break}case D.TAG_ID.BODY:{qwe(e,t);break}case D.TAG_ID.FORM:{Jwe(e,t);break}case D.TAG_ID.NOBR:{oAe(e,t);break}case D.TAG_ID.MATH:{bAe(e,t);break}case D.TAG_ID.TABLE:{sAe(e,t);break}case D.TAG_ID.INPUT:{lAe(e,t);break}case D.TAG_ID.PARAM:case D.TAG_ID.TRACK:case D.TAG_ID.SOURCE:{uAe(e,t);break}case D.TAG_ID.IMAGE:{hAe(e,t);break}case D.TAG_ID.BUTTON:{rAe(e,t);break}case D.TAG_ID.APPLET:case D.TAG_ID.OBJECT:case D.TAG_ID.MARQUEE:{aAe(e,t);break}case D.TAG_ID.IFRAME:{dAe(e,t);break}case D.TAG_ID.SELECT:{mAe(e,t);break}case D.TAG_ID.OPTION:case D.TAG_ID.OPTGROUP:{gAe(e,t);break}case D.TAG_ID.NOEMBED:{L3(e,t);break}case D.TAG_ID.FRAMESET:{$we(e,t);break}case D.TAG_ID.TEXTAREA:{fAe(e,t);break}case D.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?L3(e,t):j3(e,t);break}case D.TAG_ID.PLAINTEXT:{tAe(e,t);break}case D.TAG_ID.COL:case D.TAG_ID.TH:case D.TAG_ID.TD:case D.TAG_ID.TR:case D.TAG_ID.HEAD:case D.TAG_ID.FRAME:case D.TAG_ID.TBODY:case D.TAG_ID.TFOOT:case D.TAG_ID.THEAD:case D.TAG_ID.CAPTION:case D.TAG_ID.COLGROUP:break;default:j3(e,t)}}function TAe(e,t){if(e.openElements.hasInScope(D.TAG_ID.BODY)&&(e.insertionMode=he.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function EAe(e,t){e.openElements.hasInScope(D.TAG_ID.BODY)&&(e.insertionMode=he.AFTER_BODY,wX(e,t))}function SAe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function wAe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(D.TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(D.TAG_ID.FORM):n&&e.openElements.remove(n))}function AAe(e){e.openElements.hasInButtonScope(D.TAG_ID.P)||e._insertFakeElement(D.TAG_NAMES.P,D.TAG_ID.P),e._closePElement()}function OAe(e){e.openElements.hasInListItemScope(D.TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(D.TAG_ID.LI),e.openElements.popUntilTagNamePopped(D.TAG_ID.LI))}function kAe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function xAe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function IAe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function CAe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(D.TAG_NAMES.BR,D.TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}function mX(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const o=e.openElements.items[i],a=e.openElements.tagIDs[i];if(r===a&&(r!==D.TAG_ID.UNKNOWN||e.treeAdapter.getTagName(o)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(o,a))break}}function tS(e,t){switch(t.tagID){case D.TAG_ID.A:case D.TAG_ID.B:case D.TAG_ID.I:case D.TAG_ID.S:case D.TAG_ID.U:case D.TAG_ID.EM:case D.TAG_ID.TT:case D.TAG_ID.BIG:case D.TAG_ID.CODE:case D.TAG_ID.FONT:case D.TAG_ID.NOBR:case D.TAG_ID.SMALL:case D.TAG_ID.STRIKE:case D.TAG_ID.STRONG:{EN(e,t);break}case D.TAG_ID.P:{AAe(e);break}case D.TAG_ID.DL:case D.TAG_ID.UL:case D.TAG_ID.OL:case D.TAG_ID.DIR:case D.TAG_ID.DIV:case D.TAG_ID.NAV:case D.TAG_ID.PRE:case D.TAG_ID.MAIN:case D.TAG_ID.MENU:case D.TAG_ID.ASIDE:case D.TAG_ID.BUTTON:case D.TAG_ID.CENTER:case D.TAG_ID.FIGURE:case D.TAG_ID.FOOTER:case D.TAG_ID.HEADER:case D.TAG_ID.HGROUP:case D.TAG_ID.DIALOG:case D.TAG_ID.ADDRESS:case D.TAG_ID.ARTICLE:case D.TAG_ID.DETAILS:case D.TAG_ID.SECTION:case D.TAG_ID.SUMMARY:case D.TAG_ID.LISTING:case D.TAG_ID.FIELDSET:case D.TAG_ID.BLOCKQUOTE:case D.TAG_ID.FIGCAPTION:{SAe(e,t);break}case D.TAG_ID.LI:{OAe(e);break}case D.TAG_ID.DD:case D.TAG_ID.DT:{kAe(e,t);break}case D.TAG_ID.H1:case D.TAG_ID.H2:case D.TAG_ID.H3:case D.TAG_ID.H4:case D.TAG_ID.H5:case D.TAG_ID.H6:{xAe(e);break}case D.TAG_ID.BR:{CAe(e);break}case D.TAG_ID.BODY:{TAe(e,t);break}case D.TAG_ID.HTML:{EAe(e,t);break}case D.TAG_ID.FORM:{wAe(e);break}case D.TAG_ID.APPLET:case D.TAG_ID.OBJECT:case D.TAG_ID.MARQUEE:{IAe(e,t);break}case D.TAG_ID.TEMPLATE:{rh(e,t);break}default:mX(e,t)}}function gX(e,t){e.tmplInsertionModeStack.length>0?SX(e,t):SN(e,t)}function PAe(e,t){var n;t.tagID===D.TAG_ID.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function DAe(e,t){e._err(t,Un.ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function YA(e,t){if(cX.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=he.IN_TABLE_TEXT,t.type){case hn.TokenType.CHARACTER:{vX(e,t);break}case hn.TokenType.WHITESPACE_CHARACTER:{yX(e,t);break}}else av(e,t)}function RAe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,D.NS.HTML),e.insertionMode=he.IN_CAPTION}function NAe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,D.NS.HTML),e.insertionMode=he.IN_COLUMN_GROUP}function MAe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(D.TAG_NAMES.COLGROUP,D.TAG_ID.COLGROUP),e.insertionMode=he.IN_COLUMN_GROUP,wN(e,t)}function LAe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,D.NS.HTML),e.insertionMode=he.IN_TABLE_BODY}function jAe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(D.TAG_NAMES.TBODY,D.TAG_ID.TBODY),e.insertionMode=he.IN_TABLE_BODY,rS(e,t)}function BAe(e,t){e.openElements.hasInTableScope(D.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(D.TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function FAe(e,t){dX(t)?e._appendElement(t,D.NS.HTML):av(e,t),t.ackSelfClosing=!0}function GAe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,D.NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function kp(e,t){switch(t.tagID){case D.TAG_ID.TD:case D.TAG_ID.TH:case D.TAG_ID.TR:{jAe(e,t);break}case D.TAG_ID.STYLE:case D.TAG_ID.SCRIPT:case D.TAG_ID.TEMPLATE:{oa(e,t);break}case D.TAG_ID.COL:{MAe(e,t);break}case D.TAG_ID.FORM:{GAe(e,t);break}case D.TAG_ID.TABLE:{BAe(e,t);break}case D.TAG_ID.TBODY:case D.TAG_ID.TFOOT:case D.TAG_ID.THEAD:{LAe(e,t);break}case D.TAG_ID.INPUT:{FAe(e,t);break}case D.TAG_ID.CAPTION:{RAe(e,t);break}case D.TAG_ID.COLGROUP:{NAe(e,t);break}default:av(e,t)}}function uy(e,t){switch(t.tagID){case D.TAG_ID.TABLE:{e.openElements.hasInTableScope(D.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(D.TAG_ID.TABLE),e._resetInsertionMode());break}case D.TAG_ID.TEMPLATE:{rh(e,t);break}case D.TAG_ID.BODY:case D.TAG_ID.CAPTION:case D.TAG_ID.COL:case D.TAG_ID.COLGROUP:case D.TAG_ID.HTML:case D.TAG_ID.TBODY:case D.TAG_ID.TD:case D.TAG_ID.TFOOT:case D.TAG_ID.TH:case D.TAG_ID.THEAD:case D.TAG_ID.TR:break;default:av(e,t)}}function av(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,eS(e,t),e.fosterParentingEnabled=n}function yX(e,t){e.pendingCharacterTokens.push(t)}function vX(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function tm(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)av(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const bX=new Set([D.TAG_ID.CAPTION,D.TAG_ID.COL,D.TAG_ID.COLGROUP,D.TAG_ID.TBODY,D.TAG_ID.TD,D.TAG_ID.TFOOT,D.TAG_ID.TH,D.TAG_ID.THEAD,D.TAG_ID.TR]);function HAe(e,t){const n=t.tagID;bX.has(n)?e.openElements.hasInTableScope(D.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(D.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=he.IN_TABLE,kp(e,t)):ii(e,t)}function UAe(e,t){const n=t.tagID;switch(n){case D.TAG_ID.CAPTION:case D.TAG_ID.TABLE:{e.openElements.hasInTableScope(D.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(D.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=he.IN_TABLE,n===D.TAG_ID.TABLE&&uy(e,t));break}case D.TAG_ID.BODY:case D.TAG_ID.COL:case D.TAG_ID.COLGROUP:case D.TAG_ID.HTML:case D.TAG_ID.TBODY:case D.TAG_ID.TD:case D.TAG_ID.TFOOT:case D.TAG_ID.TH:case D.TAG_ID.THEAD:case D.TAG_ID.TR:break;default:tS(e,t)}}function wN(e,t){switch(t.tagID){case D.TAG_ID.HTML:{ii(e,t);break}case D.TAG_ID.COL:{e._appendElement(t,D.NS.HTML),t.ackSelfClosing=!0;break}case D.TAG_ID.TEMPLATE:{oa(e,t);break}default:W_(e,t)}}function zAe(e,t){switch(t.tagID){case D.TAG_ID.COLGROUP:{e.openElements.currentTagId===D.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=he.IN_TABLE);break}case D.TAG_ID.TEMPLATE:{rh(e,t);break}case D.TAG_ID.COL:break;default:W_(e,t)}}function W_(e,t){e.openElements.currentTagId===D.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=he.IN_TABLE,e._processToken(t))}function rS(e,t){switch(t.tagID){case D.TAG_ID.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,D.NS.HTML),e.insertionMode=he.IN_ROW;break}case D.TAG_ID.TH:case D.TAG_ID.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(D.TAG_NAMES.TR,D.TAG_ID.TR),e.insertionMode=he.IN_ROW,nS(e,t);break}case D.TAG_ID.CAPTION:case D.TAG_ID.COL:case D.TAG_ID.COLGROUP:case D.TAG_ID.TBODY:case D.TAG_ID.TFOOT:case D.TAG_ID.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE,kp(e,t));break}default:kp(e,t)}}function zx(e,t){const n=t.tagID;switch(t.tagID){case D.TAG_ID.TBODY:case D.TAG_ID.TFOOT:case D.TAG_ID.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE);break}case D.TAG_ID.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE,uy(e,t));break}case D.TAG_ID.BODY:case D.TAG_ID.CAPTION:case D.TAG_ID.COL:case D.TAG_ID.COLGROUP:case D.TAG_ID.HTML:case D.TAG_ID.TD:case D.TAG_ID.TH:case D.TAG_ID.TR:break;default:uy(e,t)}}function nS(e,t){switch(t.tagID){case D.TAG_ID.TH:case D.TAG_ID.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,D.NS.HTML),e.insertionMode=he.IN_CELL,e.activeFormattingElements.insertMarker();break}case D.TAG_ID.CAPTION:case D.TAG_ID.COL:case D.TAG_ID.COLGROUP:case D.TAG_ID.TBODY:case D.TAG_ID.TFOOT:case D.TAG_ID.THEAD:case D.TAG_ID.TR:{e.openElements.hasInTableScope(D.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY,rS(e,t));break}default:kp(e,t)}}function _X(e,t){switch(t.tagID){case D.TAG_ID.TR:{e.openElements.hasInTableScope(D.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY);break}case D.TAG_ID.TABLE:{e.openElements.hasInTableScope(D.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY,zx(e,t));break}case D.TAG_ID.TBODY:case D.TAG_ID.TFOOT:case D.TAG_ID.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(D.TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY,zx(e,t));break}case D.TAG_ID.BODY:case D.TAG_ID.CAPTION:case D.TAG_ID.COL:case D.TAG_ID.COLGROUP:case D.TAG_ID.HTML:case D.TAG_ID.TD:case D.TAG_ID.TH:break;default:uy(e,t)}}function VAe(e,t){const n=t.tagID;bX.has(n)?(e.openElements.hasInTableScope(D.TAG_ID.TD)||e.openElements.hasInTableScope(D.TAG_ID.TH))&&(e._closeTableCell(),nS(e,t)):ii(e,t)}function YAe(e,t){const n=t.tagID;switch(n){case D.TAG_ID.TD:case D.TAG_ID.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=he.IN_ROW);break}case D.TAG_ID.TABLE:case D.TAG_ID.TBODY:case D.TAG_ID.TFOOT:case D.TAG_ID.THEAD:case D.TAG_ID.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),_X(e,t));break}case D.TAG_ID.BODY:case D.TAG_ID.CAPTION:case D.TAG_ID.COL:case D.TAG_ID.COLGROUP:case D.TAG_ID.HTML:break;default:tS(e,t)}}function TX(e,t){switch(t.tagID){case D.TAG_ID.HTML:{ii(e,t);break}case D.TAG_ID.OPTION:{e.openElements.currentTagId===D.TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,D.NS.HTML);break}case D.TAG_ID.OPTGROUP:{e.openElements.currentTagId===D.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===D.TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,D.NS.HTML);break}case D.TAG_ID.INPUT:case D.TAG_ID.KEYGEN:case D.TAG_ID.TEXTAREA:case D.TAG_ID.SELECT:{e.openElements.hasInSelectScope(D.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(D.TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==D.TAG_ID.SELECT&&e._processStartTag(t));break}case D.TAG_ID.SCRIPT:case D.TAG_ID.TEMPLATE:{oa(e,t);break}}}function EX(e,t){switch(t.tagID){case D.TAG_ID.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===D.TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===D.TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===D.TAG_ID.OPTGROUP&&e.openElements.pop();break}case D.TAG_ID.OPTION:{e.openElements.currentTagId===D.TAG_ID.OPTION&&e.openElements.pop();break}case D.TAG_ID.SELECT:{e.openElements.hasInSelectScope(D.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(D.TAG_ID.SELECT),e._resetInsertionMode());break}case D.TAG_ID.TEMPLATE:{rh(e,t);break}}}function XAe(e,t){const n=t.tagID;n===D.TAG_ID.CAPTION||n===D.TAG_ID.TABLE||n===D.TAG_ID.TBODY||n===D.TAG_ID.TFOOT||n===D.TAG_ID.THEAD||n===D.TAG_ID.TR||n===D.TAG_ID.TD||n===D.TAG_ID.TH?(e.openElements.popUntilTagNamePopped(D.TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(t)):TX(e,t)}function WAe(e,t){const n=t.tagID;n===D.TAG_ID.CAPTION||n===D.TAG_ID.TABLE||n===D.TAG_ID.TBODY||n===D.TAG_ID.TFOOT||n===D.TAG_ID.THEAD||n===D.TAG_ID.TR||n===D.TAG_ID.TD||n===D.TAG_ID.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(D.TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(t)):EX(e,t)}function qAe(e,t){switch(t.tagID){case D.TAG_ID.BASE:case D.TAG_ID.BASEFONT:case D.TAG_ID.BGSOUND:case D.TAG_ID.LINK:case D.TAG_ID.META:case D.TAG_ID.NOFRAMES:case D.TAG_ID.SCRIPT:case D.TAG_ID.STYLE:case D.TAG_ID.TEMPLATE:case D.TAG_ID.TITLE:{oa(e,t);break}case D.TAG_ID.CAPTION:case D.TAG_ID.COLGROUP:case D.TAG_ID.TBODY:case D.TAG_ID.TFOOT:case D.TAG_ID.THEAD:{e.tmplInsertionModeStack[0]=he.IN_TABLE,e.insertionMode=he.IN_TABLE,kp(e,t);break}case D.TAG_ID.COL:{e.tmplInsertionModeStack[0]=he.IN_COLUMN_GROUP,e.insertionMode=he.IN_COLUMN_GROUP,wN(e,t);break}case D.TAG_ID.TR:{e.tmplInsertionModeStack[0]=he.IN_TABLE_BODY,e.insertionMode=he.IN_TABLE_BODY,rS(e,t);break}case D.TAG_ID.TD:case D.TAG_ID.TH:{e.tmplInsertionModeStack[0]=he.IN_ROW,e.insertionMode=he.IN_ROW,nS(e,t);break}default:e.tmplInsertionModeStack[0]=he.IN_BODY,e.insertionMode=he.IN_BODY,ii(e,t)}}function $Ae(e,t){t.tagID===D.TAG_ID.TEMPLATE&&rh(e,t)}function SX(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(D.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):SN(e,t)}function KAe(e,t){t.tagID===D.TAG_ID.HTML?ii(e,t):q_(e,t)}function wX(e,t){var n;if(t.tagID===D.TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=he.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===D.TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else q_(e,t)}function q_(e,t){e.insertionMode=he.IN_BODY,eS(e,t)}function QAe(e,t){switch(t.tagID){case D.TAG_ID.HTML:{ii(e,t);break}case D.TAG_ID.FRAMESET:{e._insertElement(t,D.NS.HTML);break}case D.TAG_ID.FRAME:{e._appendElement(t,D.NS.HTML),t.ackSelfClosing=!0;break}case D.TAG_ID.NOFRAMES:{oa(e,t);break}}}function ZAe(e,t){t.tagID===D.TAG_ID.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==D.TAG_ID.FRAMESET&&(e.insertionMode=he.AFTER_FRAMESET))}function JAe(e,t){switch(t.tagID){case D.TAG_ID.HTML:{ii(e,t);break}case D.TAG_ID.NOFRAMES:{oa(e,t);break}}}function eOe(e,t){t.tagID===D.TAG_ID.HTML&&(e.insertionMode=he.AFTER_AFTER_FRAMESET)}function tOe(e,t){t.tagID===D.TAG_ID.HTML?ii(e,t):f0(e,t)}function f0(e,t){e.insertionMode=he.IN_BODY,eS(e,t)}function rOe(e,t){switch(t.tagID){case D.TAG_ID.HTML:{ii(e,t);break}case D.TAG_ID.NOFRAMES:{oa(e,t);break}}}function nOe(e,t){t.chars=uX.REPLACEMENT_CHARACTER,e._insertCharacters(t)}function iOe(e,t){e._insertCharacters(t),e.framesetOk=!1}function AX(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==D.NS.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function oOe(e,t){if(ba.causesExit(t))AX(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===D.NS.MATHML?ba.adjustTokenMathMLAttrs(t):r===D.NS.SVG&&(ba.adjustTokenSVGTagName(t),ba.adjustTokenSVGAttrs(t)),ba.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function aOe(e,t){if(t.tagID===D.TAG_ID.P||t.tagID===D.TAG_ID.BR){AX(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===D.NS.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}var xp={};Object.defineProperty(xp,"__esModule",{value:!0});xp.serializeOuter=xp.serialize=void 0;const xr=$s,OX=mp,sOe=J1,lOe=new Set([xr.TAG_NAMES.AREA,xr.TAG_NAMES.BASE,xr.TAG_NAMES.BASEFONT,xr.TAG_NAMES.BGSOUND,xr.TAG_NAMES.BR,xr.TAG_NAMES.COL,xr.TAG_NAMES.EMBED,xr.TAG_NAMES.FRAME,xr.TAG_NAMES.HR,xr.TAG_NAMES.IMG,xr.TAG_NAMES.INPUT,xr.TAG_NAMES.KEYGEN,xr.TAG_NAMES.LINK,xr.TAG_NAMES.META,xr.TAG_NAMES.PARAM,xr.TAG_NAMES.SOURCE,xr.TAG_NAMES.TRACK,xr.TAG_NAMES.WBR]);function kX(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===xr.NS.HTML&&lOe.has(t.treeAdapter.getTagName(e))}const xX={treeAdapter:sOe.defaultTreeAdapter,scriptingEnabled:!0};function uOe(e,t){const n=Object.assign(Object.assign({},xX),t);return kX(e,n)?"":IX(e,n)}xp.serialize=uOe;function cOe(e,t){const n=Object.assign(Object.assign({},xX),t);return CX(e,n)}xp.serializeOuter=cOe;function IX(e,t){let n="";const r=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===xr.TAG_NAMES.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===xr.NS.HTML?t.treeAdapter.getTemplateContent(e):e,i=t.treeAdapter.getChildNodes(r);if(i)for(const o of i)n+=CX(o,t);return n}function CX(e,t){return t.treeAdapter.isElementNode(e)?hOe(e,t):t.treeAdapter.isTextNode(e)?pOe(e,t):t.treeAdapter.isCommentNode(e)?dOe(e,t):t.treeAdapter.isDocumentTypeNode(e)?mOe(e,t):""}function hOe(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${fOe(e,t)}>${kX(e,t)?"":`${IX(e,t)}</${n}>`}`}function fOe(e,{treeAdapter:t}){let n="";for(const r of t.getAttrList(e)){if(n+=" ",!r.namespace)n+=r.name;else switch(r.namespace){case xr.NS.XML:{n+=`xml:${r.name}`;break}case xr.NS.XMLNS:{r.name!=="xmlns"&&(n+="xmlns:"),n+=r.name;break}case xr.NS.XLINK:{n+=`xlink:${r.name}`;break}default:n+=`${r.prefix}:${r.name}`}n+=`="${(0,OX.escapeAttribute)(r.value)}"`}return n}function pOe(e,t){const{treeAdapter:n}=t,r=n.getTextNodeContent(e),i=n.getParentNode(e),o=i&&n.isElementNode(i)&&n.getTagName(i);return o&&n.getNamespaceURI(i)===xr.NS.HTML&&(0,xr.hasUnescapedText)(o,t.scriptingEnabled)?r:(0,OX.escapeText)(r)}function dOe(e,{treeAdapter:t}){return`<!--${t.getCommentNodeContent(e)}-->`}function mOe(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFragment=e.parse=e.TokenizerMode=e.Tokenizer=e.Token=e.html=e.foreignContent=e.ErrorCodes=e.serializeOuter=e.serialize=e.Parser=e.defaultTreeAdapter=void 0;const t=ly;var n=J1;Object.defineProperty(e,"defaultTreeAdapter",{enumerable:!0,get:function(){return n.defaultTreeAdapter}});var r=ly;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return r.Parser}});var i=xp;Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return i.serialize}}),Object.defineProperty(e,"serializeOuter",{enumerable:!0,get:function(){return i.serializeOuter}});var o=ov;Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return o.ERR}}),e.foreignContent=TN,e.html=$s,e.Token=Q1;var a=Tc;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return a.Tokenizer}}),Object.defineProperty(e,"TokenizerMode",{enumerable:!0,get:function(){return a.TokenizerMode}});function s(c,l){return t.Parser.parse(c,l)}e.parse=s;function u(c,l,f){typeof c=="string"&&(f=l,l=c,c=null);const h=t.Parser.getFragmentParser(c,f);return h.tokenizer.write(l,!0),h.getFragment()}e.parseFragment=u})(eX);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.adapter=e.serializeDoctypeContent=void 0;const t=eX,n=ti;function r(a){return new n.Text(a)}function i(a){const s=a.includes('"')?"'":'"';return s+a+s}function o(a,s,u){let c="!DOCTYPE ";return a&&(c+=a),s?c+=` PUBLIC ${i(s)}`:u&&(c+=" SYSTEM"),u&&(c+=` ${i(u)}`),c}e.serializeDoctypeContent=o,e.adapter={isCommentNode:n.isComment,isElementNode:n.isTag,isTextNode:n.isText,createDocument(){const a=new n.Document([]);return a["x-mode"]=t.html.DOCUMENT_MODE.NO_QUIRKS,a},createDocumentFragment(){return new n.Document([])},createElement(a,s,u){const c=Object.create(null),l=Object.create(null),f=Object.create(null);for(let p=0;p<u.length;p++){const d=u[p].name;c[d]=u[p].value,l[d]=u[p].namespace,f[d]=u[p].prefix}const h=new n.Element(a,c,[]);return h.namespace=s,h["x-attribsNamespace"]=l,h["x-attribsPrefix"]=f,h},createCommentNode(a){return new n.Comment(a)},appendChild(a,s){const u=a.children[a.children.length-1];u&&(u.next=s,s.prev=u),a.children.push(s),s.parent=a},insertBefore(a,s,u){const c=a.children.indexOf(u),{prev:l}=u;l&&(l.next=s,s.prev=l),u.prev=s,s.next=u,a.children.splice(c,0,s),s.parent=a},setTemplateContent(a,s){e.adapter.appendChild(a,s)},getTemplateContent(a){return a.children[0]},setDocumentType(a,s,u,c){const l=o(s,u,c);let f=a.children.find(h=>(0,n.isDirective)(h)&&h.name==="!doctype");f?f.data=l??null:(f=new n.ProcessingInstruction("!doctype",l),e.adapter.appendChild(a,f)),f["x-name"]=s??void 0,f["x-publicId"]=u??void 0,f["x-systemId"]=c??void 0},setDocumentMode(a,s){a["x-mode"]=s},getDocumentMode(a){return a["x-mode"]},detachNode(a){if(a.parent){const s=a.parent.children.indexOf(a),{prev:u,next:c}=a;a.prev=null,a.next=null,u&&(u.next=c),c&&(c.prev=u),a.parent.children.splice(s,1),a.parent=null}},insertText(a,s){const u=a.children[a.children.length-1];u&&(0,n.isText)(u)?u.data+=s:e.adapter.appendChild(a,r(s))},insertTextBefore(a,s,u){const c=a.children[a.children.indexOf(u)-1];c&&(0,n.isText)(c)?c.data+=s:e.adapter.insertBefore(a,r(s),u)},adoptAttributes(a,s){for(let u=0;u<s.length;u++){const c=s[u].name;typeof a.attribs[c]>"u"&&(a.attribs[c]=s[u].value,a["x-attribsNamespace"][c]=s[u].namespace,a["x-attribsPrefix"][c]=s[u].prefix)}},getFirstChild(a){return a.children[0]},getChildNodes(a){return a.children},getParentNode(a){return a.parent},getAttrList(a){return a.attributes},getTagName(a){return a.name},getNamespaceURI(a){return a.namespace},getTextNodeContent(a){return a.data},getCommentNodeContent(a){return a.data},getDocumentTypeNodeName(a){var s;return(s=a["x-name"])!==null&&s!==void 0?s:""},getDocumentTypeNodePublicId(a){var s;return(s=a["x-publicId"])!==null&&s!==void 0?s:""},getDocumentTypeNodeSystemId(a){var s;return(s=a["x-systemId"])!==null&&s!==void 0?s:""},isDocumentTypeNode(a){return(0,n.isDirective)(a)&&a.name==="!doctype"},setNodeSourceCodeLocation(a,s){s&&(a.startIndex=s.startOffset,a.endIndex=s.endOffset),a.sourceCodeLocation=s},getNodeSourceCodeLocation(a){return a.sourceCodeLocation},updateNodeSourceCodeLocation(a,s){s.endOffset!=null&&(a.endIndex=s.endOffset),a.sourceCodeLocation=Object.assign(Object.assign({},a.sourceCodeLocation),s)}}})(JY);var gOe=Pe&&Pe.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(Ep,"__esModule",{value:!0});Ep.renderWithParse5=Ep.parseWithParse5=void 0;var yOe=ti,Vx=EY,PX=JY;function vOe(e,t,n,r){var i={scriptingEnabled:typeof t.scriptingEnabled=="boolean"?t.scriptingEnabled:!0,treeAdapter:PX.adapter,sourceCodeLocationInfo:t.sourceCodeLocationInfo};return n?(0,Vx.parse)(e,i):(0,Vx.parseFragment)(r,e,i)}Ep.parseWithParse5=vOe;var bOe={treeAdapter:PX.adapter};function _Oe(e){for(var t,n=("length"in e)?e:[e],r=0;r<n.length;r+=1){var i=n[r];(0,yOe.isDocument)(i)&&(t=Array.prototype.splice).call.apply(t,gOe([n,r,1],i.children,!1))}for(var o="",r=0;r<n.length;r+=1){var i=n[r];o+=(0,Vx.serializeOuter)(i,bOe)}return o}Ep.renderWithParse5=_Oe;var DX={},cy={},AN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0;var t=yc,n;(function(h){h[h.Tab=9]="Tab",h[h.NewLine=10]="NewLine",h[h.FormFeed=12]="FormFeed",h[h.CarriageReturn=13]="CarriageReturn",h[h.Space=32]="Space",h[h.ExclamationMark=33]="ExclamationMark",h[h.Number=35]="Number",h[h.Amp=38]="Amp",h[h.SingleQuote=39]="SingleQuote",h[h.DoubleQuote=34]="DoubleQuote",h[h.Dash=45]="Dash",h[h.Slash=47]="Slash",h[h.Zero=48]="Zero",h[h.Nine=57]="Nine",h[h.Semi=59]="Semi",h[h.Lt=60]="Lt",h[h.Eq=61]="Eq",h[h.Gt=62]="Gt",h[h.Questionmark=63]="Questionmark",h[h.UpperA=65]="UpperA",h[h.LowerA=97]="LowerA",h[h.UpperF=70]="UpperF",h[h.LowerF=102]="LowerF",h[h.UpperZ=90]="UpperZ",h[h.LowerZ=122]="LowerZ",h[h.LowerX=120]="LowerX",h[h.OpeningSquareBracket=91]="OpeningSquareBracket"})(n||(n={}));var r;(function(h){h[h.Text=1]="Text",h[h.BeforeTagName=2]="BeforeTagName",h[h.InTagName=3]="InTagName",h[h.InSelfClosingTag=4]="InSelfClosingTag",h[h.BeforeClosingTagName=5]="BeforeClosingTagName",h[h.InClosingTagName=6]="InClosingTagName",h[h.AfterClosingTagName=7]="AfterClosingTagName",h[h.BeforeAttributeName=8]="BeforeAttributeName",h[h.InAttributeName=9]="InAttributeName",h[h.AfterAttributeName=10]="AfterAttributeName",h[h.BeforeAttributeValue=11]="BeforeAttributeValue",h[h.InAttributeValueDq=12]="InAttributeValueDq",h[h.InAttributeValueSq=13]="InAttributeValueSq",h[h.InAttributeValueNq=14]="InAttributeValueNq",h[h.BeforeDeclaration=15]="BeforeDeclaration",h[h.InDeclaration=16]="InDeclaration",h[h.InProcessingInstruction=17]="InProcessingInstruction",h[h.BeforeComment=18]="BeforeComment",h[h.CDATASequence=19]="CDATASequence",h[h.InSpecialComment=20]="InSpecialComment",h[h.InCommentLike=21]="InCommentLike",h[h.BeforeSpecialS=22]="BeforeSpecialS",h[h.SpecialStartSequence=23]="SpecialStartSequence",h[h.InSpecialTag=24]="InSpecialTag",h[h.BeforeEntity=25]="BeforeEntity",h[h.BeforeNumericEntity=26]="BeforeNumericEntity",h[h.InNamedEntity=27]="InNamedEntity",h[h.InNumericEntity=28]="InNumericEntity",h[h.InHexEntity=29]="InHexEntity"})(r||(r={}));function i(h){return h===n.Space||h===n.NewLine||h===n.Tab||h===n.FormFeed||h===n.CarriageReturn}function o(h){return h===n.Slash||h===n.Gt||i(h)}function a(h){return h>=n.Zero&&h<=n.Nine}function s(h){return h>=n.LowerA&&h<=n.LowerZ||h>=n.UpperA&&h<=n.UpperZ}function u(h){return h>=n.UpperA&&h<=n.UpperF||h>=n.LowerA&&h<=n.LowerF}var c;(function(h){h[h.NoValue=0]="NoValue",h[h.Unquoted=1]="Unquoted",h[h.Single=2]="Single",h[h.Double=3]="Double"})(c=e.QuoteType||(e.QuoteType={}));var l={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},f=function(){function h(p,d){var m=p.xmlMode,g=m===void 0?!1:m,v=p.decodeEntities,b=v===void 0?!0:v;this.cbs=d,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=g,this.decodeEntities=b,this.entityTrie=g?t.xmlDecodeTree:t.htmlDecodeTree}return h.prototype.reset=function(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},h.prototype.write=function(p){this.offset+=this.buffer.length,this.buffer=p,this.parse()},h.prototype.end=function(){this.running&&this.finish()},h.prototype.pause=function(){this.running=!1},h.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},h.prototype.getIndex=function(){return this.index},h.prototype.getSectionStart=function(){return this.sectionStart},h.prototype.stateText=function(p){p===n.Lt||!this.decodeEntities&&this.fastForwardTo(n.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&p===n.Amp&&(this.state=r.BeforeEntity)},h.prototype.stateSpecialStartSequence=function(p){var d=this.sequenceIndex===this.currentSequence.length,m=d?o(p):(p|32)===this.currentSequence[this.sequenceIndex];if(!m)this.isSpecial=!1;else if(!d){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(p)},h.prototype.stateInSpecialTag=function(p){if(this.sequenceIndex===this.currentSequence.length){if(p===n.Gt||i(p)){var d=this.index-this.currentSequence.length;if(this.sectionStart<d){var m=this.index;this.index=d,this.cbs.ontext(this.sectionStart,d),this.index=m}this.isSpecial=!1,this.sectionStart=d+2,this.stateInClosingTagName(p);return}this.sequenceIndex=0}(p|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===l.TitleEnd?this.decodeEntities&&p===n.Amp&&(this.state=r.BeforeEntity):this.fastForwardTo(n.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(p===n.Lt)},h.prototype.stateCDATASequence=function(p){p===l.Cdata[this.sequenceIndex]?++this.sequenceIndex===l.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=l.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(p))},h.prototype.fastForwardTo=function(p){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===p)return!0;return this.index=this.buffer.length+this.offset-1,!1},h.prototype.stateInCommentLike=function(p){p===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):p!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},h.prototype.isTagStartChar=function(p){return this.xmlMode?!o(p):s(p)},h.prototype.startSpecial=function(p,d){this.isSpecial=!0,this.currentSequence=p,this.sequenceIndex=d,this.state=r.SpecialStartSequence},h.prototype.stateBeforeTagName=function(p){if(p===n.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(p===n.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(p)){var d=p|32;this.sectionStart=this.index,!this.xmlMode&&d===l.TitleEnd[2]?this.startSpecial(l.TitleEnd,3):this.state=!this.xmlMode&&d===l.ScriptEnd[2]?r.BeforeSpecialS:r.InTagName}else p===n.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(p))},h.prototype.stateInTagName=function(p){o(p)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(p))},h.prototype.stateBeforeClosingTagName=function(p){i(p)||(p===n.Gt?this.state=r.Text:(this.state=this.isTagStartChar(p)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))},h.prototype.stateInClosingTagName=function(p){(p===n.Gt||i(p))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(p))},h.prototype.stateAfterClosingTagName=function(p){(p===n.Gt||this.fastForwardTo(n.Gt))&&(this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeAttributeName=function(p){p===n.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.baseState=this.state,this.sectionStart=this.index+1):p===n.Slash?this.state=r.InSelfClosingTag:i(p)||(this.state=r.InAttributeName,this.sectionStart=this.index)},h.prototype.stateInSelfClosingTag=function(p){p===n.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):i(p)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(p))},h.prototype.stateInAttributeName=function(p){(p===n.Eq||o(p))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterAttributeName,this.stateAfterAttributeName(p))},h.prototype.stateAfterAttributeName=function(p){p===n.Eq?this.state=r.BeforeAttributeValue:p===n.Slash||p===n.Gt?(this.cbs.onattribend(c.NoValue,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(p)):i(p)||(this.cbs.onattribend(c.NoValue,this.index),this.state=r.InAttributeName,this.sectionStart=this.index)},h.prototype.stateBeforeAttributeValue=function(p){p===n.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):p===n.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):i(p)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(p))},h.prototype.handleInAttributeValue=function(p,d){p===d||!this.decodeEntities&&this.fastForwardTo(d)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(d===n.DoubleQuote?c.Double:c.Single,this.index),this.state=r.BeforeAttributeName):this.decodeEntities&&p===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},h.prototype.stateInAttributeValueDoubleQuotes=function(p){this.handleInAttributeValue(p,n.DoubleQuote)},h.prototype.stateInAttributeValueSingleQuotes=function(p){this.handleInAttributeValue(p,n.SingleQuote)},h.prototype.stateInAttributeValueNoQuotes=function(p){i(p)||p===n.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(c.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(p)):this.decodeEntities&&p===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},h.prototype.stateBeforeDeclaration=function(p){p===n.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=p===n.Dash?r.BeforeComment:r.InDeclaration},h.prototype.stateInDeclaration=function(p){(p===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},h.prototype.stateInProcessingInstruction=function(p){(p===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeComment=function(p){p===n.Dash?(this.state=r.InCommentLike,this.currentSequence=l.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration},h.prototype.stateInSpecialComment=function(p){(p===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeSpecialS=function(p){var d=p|32;d===l.ScriptEnd[3]?this.startSpecial(l.ScriptEnd,4):d===l.StyleEnd[3]?this.startSpecial(l.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(p))},h.prototype.stateBeforeEntity=function(p){this.entityExcess=1,this.entityResult=0,p===n.Number?this.state=r.BeforeNumericEntity:p===n.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=r.InNamedEntity,this.stateInNamedEntity(p))},h.prototype.stateInNamedEntity=function(p){if(this.entityExcess+=1,this.trieIndex=(0,t.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,p),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var d=this.trieCurrent&t.BinTrieFlags.VALUE_LENGTH;if(d){var m=(d>>14)-1;if(!this.allowLegacyEntity()&&p!==n.Semi)this.trieIndex+=m;else{var g=this.index-this.entityExcess+1;g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.entityResult=this.trieIndex,this.trieIndex+=m,this.entityExcess=0,this.sectionStart=this.index+1,m===0&&this.emitNamedEntity()}}},h.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var p=(this.entityTrie[this.entityResult]&t.BinTrieFlags.VALUE_LENGTH)>>14;switch(p){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~t.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},h.prototype.stateBeforeNumericEntity=function(p){(p|32)===n.LowerX?(this.entityExcess++,this.state=r.InHexEntity):(this.state=r.InNumericEntity,this.stateInNumericEntity(p))},h.prototype.emitNumericEntity=function(p){var d=this.index-this.entityExcess-1,m=d+2+ +(this.state===r.InHexEntity);m!==this.index&&(d>this.sectionStart&&this.emitPartial(this.sectionStart,d),this.sectionStart=this.index+Number(p),this.emitCodePoint((0,t.replaceCodePoint)(this.entityResult))),this.state=this.baseState},h.prototype.stateInNumericEntity=function(p){p===n.Semi?this.emitNumericEntity(!0):a(p)?(this.entityResult=this.entityResult*10+(p-n.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.stateInHexEntity=function(p){p===n.Semi?this.emitNumericEntity(!0):a(p)?(this.entityResult=this.entityResult*16+(p-n.Zero),this.entityExcess++):u(p)?(this.entityResult=this.entityResult*16+((p|32)-n.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===r.Text||this.baseState===r.InSpecialTag)},h.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===r.InAttributeValueDq||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},h.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},h.prototype.parse=function(){for(;this.shouldContinue();){var p=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:{this.stateText(p);break}case r.SpecialStartSequence:{this.stateSpecialStartSequence(p);break}case r.InSpecialTag:{this.stateInSpecialTag(p);break}case r.CDATASequence:{this.stateCDATASequence(p);break}case r.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(p);break}case r.InAttributeName:{this.stateInAttributeName(p);break}case r.InCommentLike:{this.stateInCommentLike(p);break}case r.InSpecialComment:{this.stateInSpecialComment(p);break}case r.BeforeAttributeName:{this.stateBeforeAttributeName(p);break}case r.InTagName:{this.stateInTagName(p);break}case r.InClosingTagName:{this.stateInClosingTagName(p);break}case r.BeforeTagName:{this.stateBeforeTagName(p);break}case r.AfterAttributeName:{this.stateAfterAttributeName(p);break}case r.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(p);break}case r.BeforeAttributeValue:{this.stateBeforeAttributeValue(p);break}case r.BeforeClosingTagName:{this.stateBeforeClosingTagName(p);break}case r.AfterClosingTagName:{this.stateAfterClosingTagName(p);break}case r.BeforeSpecialS:{this.stateBeforeSpecialS(p);break}case r.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(p);break}case r.InSelfClosingTag:{this.stateInSelfClosingTag(p);break}case r.InDeclaration:{this.stateInDeclaration(p);break}case r.BeforeDeclaration:{this.stateBeforeDeclaration(p);break}case r.BeforeComment:{this.stateBeforeComment(p);break}case r.InProcessingInstruction:{this.stateInProcessingInstruction(p);break}case r.InNamedEntity:{this.stateInNamedEntity(p);break}case r.BeforeEntity:{this.stateBeforeEntity(p);break}case r.InHexEntity:{this.stateInHexEntity(p);break}case r.InNumericEntity:{this.stateInNumericEntity(p);break}default:this.stateBeforeNumericEntity(p)}this.index++}this.cleanup()},h.prototype.finish=function(){this.state===r.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},h.prototype.handleTrailingData=function(){var p=this.buffer.length+this.offset;this.state===r.InCommentLike?this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,p,0):this.cbs.oncomment(this.sectionStart,p,0):this.state===r.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,p)},h.prototype.emitPartial=function(p,d){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribdata(p,d):this.cbs.ontext(p,d)},h.prototype.emitCodePoint=function(p){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribentity(p):this.cbs.ontextentity(p)},h}();e.default=f})(AN);var TOe=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),EOe=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),SOe=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&TOe(t,e,n);return EOe(t,e),t};Object.defineProperty(cy,"__esModule",{value:!0});cy.Parser=void 0;var pb=SOe(AN),B3=yc,xh=new Set(["input","option","optgroup","select","button","datalist","textarea"]),br=new Set(["p"]),F3=new Set(["thead","tbody"]),G3=new Set(["dd","dt"]),H3=new Set(["rt","rp"]),wOe=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",br],["h1",br],["h2",br],["h3",br],["h4",br],["h5",br],["h6",br],["select",xh],["input",xh],["output",xh],["button",xh],["datalist",xh],["textarea",xh],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",G3],["dt",G3],["address",br],["article",br],["aside",br],["blockquote",br],["details",br],["div",br],["dl",br],["fieldset",br],["figcaption",br],["figure",br],["footer",br],["form",br],["header",br],["hr",br],["main",br],["nav",br],["ol",br],["pre",br],["section",br],["table",br],["ul",br],["rt",H3],["rp",H3],["tbody",F3],["tfoot",F3]]),AOe=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),U3=new Set(["math","svg"]),z3=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),OOe=/\s|\//,kOe=function(){function e(t,n){n===void 0&&(n={});var r,i,o,a,s;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t??{},this.lowerCaseTagNames=(r=n.lowerCaseTags)!==null&&r!==void 0?r:!n.xmlMode,this.lowerCaseAttributeNames=(i=n.lowerCaseAttributeNames)!==null&&i!==void 0?i:!n.xmlMode,this.tokenizer=new((o=n.Tokenizer)!==null&&o!==void 0?o:pb.default)(this.options,this),(s=(a=this.cbs).onparserinit)===null||s===void 0||s.call(a,this)}return e.prototype.ontext=function(t,n){var r,i,o=this.getSlice(t,n);this.endIndex=n-1,(i=(r=this.cbs).ontext)===null||i===void 0||i.call(r,o),this.startIndex=n},e.prototype.ontextentity=function(t){var n,r,i=this.tokenizer.getSectionStart();this.endIndex=i-1,(r=(n=this.cbs).ontext)===null||r===void 0||r.call(n,(0,B3.fromCodePoint)(t)),this.startIndex=i},e.prototype.isVoidElement=function(t){return!this.options.xmlMode&&AOe.has(t)},e.prototype.onopentagname=function(t,n){this.endIndex=n;var r=this.getSlice(t,n);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)},e.prototype.emitOpenTag=function(t){var n,r,i,o;this.openTagStart=this.startIndex,this.tagname=t;var a=!this.options.xmlMode&&wOe.get(t);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){var s=this.stack.pop();(r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,s,!0)}this.isVoidElement(t)||(this.stack.push(t),U3.has(t)?this.foreignContext.push(!0):z3.has(t)&&this.foreignContext.push(!1)),(o=(i=this.cbs).onopentagname)===null||o===void 0||o.call(i,t),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(t){var n,r;this.startIndex=this.openTagStart,this.attribs&&((r=(n=this.cbs).onopentag)===null||r===void 0||r.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1},e.prototype.onclosetag=function(t,n){var r,i,o,a,s,u;this.endIndex=n;var c=this.getSlice(t,n);if(this.lowerCaseTagNames&&(c=c.toLowerCase()),(U3.has(c)||z3.has(c))&&this.foreignContext.pop(),this.isVoidElement(c))!this.options.xmlMode&&c==="br"&&((i=(r=this.cbs).onopentagname)===null||i===void 0||i.call(r,"br"),(a=(o=this.cbs).onopentag)===null||a===void 0||a.call(o,"br",{},!0),(u=(s=this.cbs).onclosetag)===null||u===void 0||u.call(s,"br",!1));else{var l=this.stack.lastIndexOf(c);if(l!==-1)if(this.cbs.onclosetag)for(var f=this.stack.length-l;f--;)this.cbs.onclosetag(this.stack.pop(),f!==0);else this.stack.length=l;else!this.options.xmlMode&&c==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1},e.prototype.onselfclosingtag=function(t){this.endIndex=t,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)},e.prototype.closeCurrentTag=function(t){var n,r,i=this.tagname;this.endOpenTag(t),this.stack[this.stack.length-1]===i&&((r=(n=this.cbs).onclosetag)===null||r===void 0||r.call(n,i,!t),this.stack.pop())},e.prototype.onattribname=function(t,n){this.startIndex=t;var r=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r},e.prototype.onattribdata=function(t,n){this.attribvalue+=this.getSlice(t,n)},e.prototype.onattribentity=function(t){this.attribvalue+=(0,B3.fromCodePoint)(t)},e.prototype.onattribend=function(t,n){var r,i;this.endIndex=n,(i=(r=this.cbs).onattribute)===null||i===void 0||i.call(r,this.attribname,this.attribvalue,t===pb.QuoteType.Double?'"':t===pb.QuoteType.Single?"'":t===pb.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(t){var n=t.search(OOe),r=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r},e.prototype.ondeclaration=function(t,n){this.endIndex=n;var r=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(r);this.cbs.onprocessinginstruction("!".concat(i),"!".concat(r))}this.startIndex=n+1},e.prototype.onprocessinginstruction=function(t,n){this.endIndex=n;var r=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(r);this.cbs.onprocessinginstruction("?".concat(i),"?".concat(r))}this.startIndex=n+1},e.prototype.oncomment=function(t,n,r){var i,o,a,s;this.endIndex=n,(o=(i=this.cbs).oncomment)===null||o===void 0||o.call(i,this.getSlice(t,n-r)),(s=(a=this.cbs).oncommentend)===null||s===void 0||s.call(a),this.startIndex=n+1},e.prototype.oncdata=function(t,n,r){var i,o,a,s,u,c,l,f,h,p;this.endIndex=n;var d=this.getSlice(t,n-r);this.options.xmlMode||this.options.recognizeCDATA?((o=(i=this.cbs).oncdatastart)===null||o===void 0||o.call(i),(s=(a=this.cbs).ontext)===null||s===void 0||s.call(a,d),(c=(u=this.cbs).oncdataend)===null||c===void 0||c.call(u)):((f=(l=this.cbs).oncomment)===null||f===void 0||f.call(l,"[CDATA[".concat(d,"]]")),(p=(h=this.cbs).oncommentend)===null||p===void 0||p.call(h)),this.startIndex=n+1},e.prototype.onend=function(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r],!0));}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)},e.prototype.reset=function(){var t,n,r,i;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(i=(r=this.cbs).onparserinit)===null||i===void 0||i.call(r,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(t){this.reset(),this.end(t)},e.prototype.getSlice=function(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var r=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,n-this.bufferOffset);return r},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(t){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)},e.prototype.end=function(t){var n,r;if(this.ended){(r=(n=this.cbs).onerror)===null||r===void 0||r.call(n,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(t){this.write(t)},e.prototype.done=function(t){this.end(t)},e}();cy.Parser=kOe;(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(v,b,y,_){_===void 0&&(_=y);var T=Object.getOwnPropertyDescriptor(b,y);(!T||("get"in T?!b.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return b[y]}}),Object.defineProperty(v,_,T)}:function(v,b,y,_){_===void 0&&(_=y),v[_]=b[y]}),n=Pe&&Pe.__setModuleDefault||(Object.create?function(v,b){Object.defineProperty(v,"default",{enumerable:!0,value:b})}:function(v,b){v.default=b}),r=Pe&&Pe.__importStar||function(v){if(v&&v.__esModule)return v;var b={};if(v!=null)for(var y in v)y!=="default"&&Object.prototype.hasOwnProperty.call(v,y)&&t(b,v,y);return n(b,v),b},i=Pe&&Pe.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DefaultHandler=e.DomHandler=e.Parser=void 0;var o=cy,a=cy;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return a.Parser}});var s=ti,u=ti;Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return u.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return u.DomHandler}});function c(v,b){var y=new s.DomHandler(void 0,b);return new o.Parser(y,b).end(v),y.root}e.parseDocument=c;function l(v,b){return c(v,b).children}e.parseDOM=l;function f(v,b,y){var _=new s.DomHandler(v,b,y);return new o.Parser(_,b)}e.createDomStream=f;var h=AN;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return i(h).default}}),e.ElementType=r(sd);var p=$o,d=$o;Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return d.getFeed}});var m={xmlMode:!0};function g(v,b){return b===void 0&&(b=m),(0,p.getFeed)(l(v,b))}e.parseFeed=g,e.DomUtils=r($o)})(DX);(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(d,m,g,v){v===void 0&&(v=g);var b=Object.getOwnPropertyDescriptor(m,g);(!b||("get"in b?!m.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return m[g]}}),Object.defineProperty(d,v,b)}:function(d,m,g,v){v===void 0&&(v=g),d[v]=m[g]}),n=Pe&&Pe.__setModuleDefault||(Object.create?function(d,m){Object.defineProperty(d,"default",{enumerable:!0,value:m})}:function(d,m){d.default=m}),r=Pe&&Pe.__exportStar||function(d,m){for(var g in d)g!=="default"&&!Object.prototype.hasOwnProperty.call(m,g)&&t(m,d,g)},i=Pe&&Pe.__importStar||function(d){if(d&&d.__esModule)return d;var m={};if(d!=null)for(var g in d)g!=="default"&&Object.prototype.hasOwnProperty.call(d,g)&&t(m,d,g);return n(m,d),m},o=Pe&&Pe.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.root=e.parseHTML=e.merge=e.contains=e.text=e.xml=e.html=e.load=void 0,r(SV,e);var a=A1,s=bc,u=Ep,c=o(ld),l=DX,f=(0,s.getParse)(function(d,m,g,v){return m.xmlMode||m._useHtmlParser2?(0,l.parseDocument)(d,m):(0,u.parseWithParse5)(d,m,g,v)});e.load=(0,a.getLoad)(f,function(d,m){return m.xmlMode||m._useHtmlParser2?(0,c.default)(d,m):(0,u.renderWithParse5)(d)}),e.default=(0,e.load)([]);var h=tn;Object.defineProperty(e,"html",{enumerable:!0,get:function(){return h.html}}),Object.defineProperty(e,"xml",{enumerable:!0,get:function(){return h.xml}}),Object.defineProperty(e,"text",{enumerable:!0,get:function(){return h.text}});var p=i(tn);e.contains=p.contains,e.merge=p.merge,e.parseHTML=p.parseHTML,e.root=p.root})(EV);var nh={},iS={},xOe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function IOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function db(e,t){return new Error(String(e)+" is a required method of "+String(t)+", but was not implemented.")}var RX=function(){function e(){IOe(this,e),this.options={}}return xOe(e,[{key:"createRenderer",value:function(){function t(n){throw db("createRenderer","EnzymeAdapter")}return t}()},{key:"nodeToElement",value:function(){function t(n){throw db("nodeToElement","EnzymeAdapter")}return t}()},{key:"matchesElementType",value:function(){function t(n,r){if(!n)return n;var i=n.type;return i===r}return t}()},{key:"isValidElement",value:function(){function t(n){throw db("isValidElement","EnzymeAdapter")}return t}()},{key:"createElement",value:function(){function t(n,r){throw db("createElement","EnzymeAdapter")}return t}()},{key:"invokeSetStateCallback",value:function(){function t(n,r){r.call(n)}return t}()}]),e}();RX.MODES={STRING:"string",MOUNT:"mount",SHALLOW:"shallow"};var NX=RX;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=NX,n=r(t);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){if(!o)throw new Error(`
      Enzyme Internal Error: Enzyme expects an adapter to be configured, but found none.
      To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
      before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
      corresponding to the library currently being tested. For example:

      import Adapter from 'enzyme-adapter-react-15';

      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
    `);if(typeof o=="function")throw Object.getPrototypeOf(o)===n.default?new Error(`
        Enzyme Internal Error: Enzyme expects an adapter instance to be configured -
        you provided an adapter *constructor*.
        To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
        before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
        corresponding to the library currently being tested. For example:

        import Adapter from 'enzyme-adapter-react-15';

        To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
      `):new Error(`
      Enzyme Internal Error: Enzyme expects an adapter to be configured -
      an enzyme adapter must be an object instance; you provided a function.
      To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
      before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
      corresponding to the library currently being tested. For example:

      import Adapter from 'enzyme-adapter-react-15';

      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
    `);if(!(o instanceof n.default))throw new Error("Enzyme Internal Error: configured enzyme adapter did not inherit from the EnzymeAdapter base class")}})(iS);Object.defineProperty(nh,"__esModule",{value:!0});nh.get=ROe;nh.merge=jX;nh.reset=NOe;var COe=nd,MX=LX(COe),POe=iS,DOe=LX(POe);function LX(e){return e&&e.__esModule?e:{default:e}}var ON={};function ROe(){return(0,MX.default)({},ON)}function jX(e){e.adapter&&(0,DOe.default)(e.adapter),(0,MX.default)(ON,e)}function NOe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ON={},jX(e)}var yn={},Yx={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(r){function i(o,a){return r.apply(this,arguments)}return i.toString=function(){return r.toString()},i}(function(r,i){return typeof r!="object"||r===null||typeof i!="object"||i===null?!1:Object.keys(i).every(function(o){if(!r.propertyIsEnumerable(o))return!1;var a=i[o],s=r[o];return!(typeof a=="object"&&a!==null?!n(s,a):s!==a)})});t.default=n,e.exports=t.default})(Yx,Yx.exports);var MOe=Yx.exports,su={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=iS,n=i(t),r=nh;function i(a){return a&&a.__esModule?a:{default:a}}function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(a.adapter)return(0,n.default)(a.adapter),a.adapter;var s=(0,r.get)(),u=s.adapter;return(0,n.default)(u),u}})(su);Object.defineProperty(yn,"__esModule",{value:!0});var LOe=function(){function e(t,n){var r=[],i=!0,o=!1,a=void 0;try{for(var s=t[Symbol.iterator](),u;!(i=(u=s.next()).done)&&(r.push(u.value),!(n&&r.length===n));i=!0);}catch(c){o=!0,a=c}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();yn.propsOfNode=oS;yn.childrenOfNode=fd;yn.hasClassName=ZOe;yn.treeForEach=kN;yn.treeFilter=xN;yn.findParentNode=JOe;yn.pathToNode=BX;yn.parentsOfNode=tke;yn.nodeHasId=rke;yn.nodeMatchesObjectProps=ake;yn.getTextFromNode=FX;yn.getTextFromHostNodes=GX;yn.getHTMLFromHostNodes=HX;var jOe=nd,BOe=ih(jOe),FOe=qy,V3=ih(FOe),GOe=fV,HOe=ih(GOe),UOe=MOe,zOe=ih(UOe),VOe=rN,YOe=ih(VOe),XOe=F7,WOe=ih(XOe),qOe=su,$Oe=ih(qOe);function ih(e){return e&&e.__esModule?e:{default:e}}function KOe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QOe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}function oS(e){return e&&e.props||{}}function fd(e){if(!e)return[];var t=(0,$Oe.default)(),n=t.isFragment&&typeof t.isFragment=="function",r=Array.isArray(e.rendered)?(0,V3.default)(e.rendered,1):[e.rendered];return n?(0,V3.default)(r.map(function(i){return t.isFragment(i)?fd(i):i}),1):r}function ZOe(e,t){var n=oS(e).className||"";return n=String(n).replace(/\s/g," "),(0,WOe.default)(t)?t.test(n):(" "+String(n)+" ").indexOf(" "+String(t)+" ")>-1}function kN(e,t){e&&t(e),fd(e).forEach(function(n){return kN(n,t)})}function xN(e,t){var n=[];return kN(e,function(r){t(r)&&n.push(r)}),n}function JOe(e,t){var n=xN(e,function(r){return r.rendered?fd(r).indexOf(t)!==-1:!1});return n[0]||null}function eke(e,t){return e.filter(function(n){return xN(n,t).length!==0})}function BX(e,t){for(var n=[t],r=[],i=function(s){return e===s};n.length;){var o=n.pop(),a=fd(o);if(o===e)return eke(r,i);r.push(o),a.length===0&&r.pop(),n.push.apply(n,QOe(a))}return null}function tke(e,t){return(BX(e,t)||[]).reverse()}function rke(e,t){return oS(e).id===t}var nke={};function ike(e){return typeof e<"u"?e:nke}function oke(e){return(0,HOe.default)(e).reduce(function(t,n){var r=LOe(n,2),i=r[0],o=r[1];return(0,BOe.default)({},t,KOe({},i,ike(o)))},{})}function ake(e,t){return(0,zOe.default)(oS(e),oke(t))}function ske(e){return typeof e=="string"?String(e||""):e&&e.textContent||""}function IN(e,t){var n=t.getCustom,r=t.handleHostNodes,i=t.recurse,o=t.nullRenderReturnsNull,a=o===void 0?!1:o;return e==null?"":typeof e=="string"||typeof e=="number"?String(e):n&&e.type&&typeof e.type=="function"?n(e):r&&e.nodeType==="host"?r(e):e.rendered==null&&a?null:fd(e).map(i).join("")}function FX(e){return IN(e,{recurse:FX,getCustom:function(){function t(n){var r=n.type;return"<"+String(r.displayName||(0,YOe.default)(r))+" />"}return t}()})}function GX(e,t){return IN(e,{recurse:function(){function n(r){return GX(r,t)}return n}(),handleHostNodes:function(){function n(r){var i=[].concat(t.nodeToHostNode(r,!0));return i.map(ske).join("")}return n}()})}function lke(e){return e==null?null:e.outerHTML.replace(/\sdata-(reactid|reactroot)+="([^"]*)+"/g,"")}function HX(e,t){return IN(e,{recurse:function(){function n(r){return HX(r,t)}return n}(),handleHostNodes:function(){function n(r){var i=[].concat(t.nodeToHostNode(r,!0));return i.map(lke).join("")}return n}(),nullRenderReturnsNull:!0})}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.shallowEqual=e.ITERATOR_SYMBOL=void 0;var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},n=function(){function Z(fe,we){var Ce=[],Ve=!0,Ye=!1,$e=void 0;try{for(var it=fe[Symbol.iterator](),ht;!(Ve=(ht=it.next()).done)&&(Ce.push(ht.value),!(we&&Ce.length===we));Ve=!0);}catch(Dt){Ye=!0,$e=Dt}finally{try{!Ve&&it.return&&it.return()}finally{if(Ye)throw $e}}return Ce}return function(fe,we){if(Array.isArray(fe))return fe;if(Symbol.iterator in Object(fe))return Z(fe,we);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.getAdapter=F,e.makeOptions=$,e.isCustomComponent=ie,e.isCustomComponentElement=oe,e.propsOfNode=me,e.typeOfNode=ae,e.nodeHasType=X,e.nodeMatches=ve,e.nodeEqual=Ne,e.containsChildrenSubArray=He,e.childrenToSimplifiedArray=qe,e.isReactElementAlike=ut,e.withSetStateAllowed=Je,e.AND=at,e.displayNameOfNode=Ht,e.sym=qt,e.privateSet=dr,e.cloneElement=tr,e.spyMethod=Ie;var r=aV;Object.defineProperty(e,"shallowEqual",{enumerable:!0,get:function(){function Z(){return L(r).default}return Z}()}),e.isEmptyValue=te,e.renderedDive=le,e.loadCheerioRoot=ye;var i=nd,o=L(i),a=JE,s=L(a),u=eN,c=L(u),l=fV,f=L(l),h=rN,p=L(h),d=od,m=L(d),g=qy,v=L(g),b=X7,y=L(b),_=EV,T=L(_),S=ou,E=nh,I=yn,x=su,C=L(x),w=iS,B=L(w);function L(Z){return Z&&Z.__esModule?Z:{default:Z}}function k(Z,fe,we){return fe in Z?Object.defineProperty(Z,fe,{value:we,enumerable:!0,configurable:!0,writable:!0}):Z[fe]=we,Z}function R(Z,fe){var we={};for(var Ce in Z)fe.indexOf(Ce)>=0||Object.prototype.hasOwnProperty.call(Z,Ce)&&(we[Ce]=Z[Ce]);return we}e.ITERATOR_SYMBOL=typeof Symbol=="function"&&Symbol.iterator;function F(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return console.warn("getAdapter from Utils is deprecated; please use ./getAdapter instead"),(0,C.default)(Z)}function U(Z,fe){if(Z&&fe&&Z!==fe)throw new TypeError("If both the `attachTo` and `hydrateIn` options are provided, they must be === (for backwards compatibility)")}function $(Z){var fe=(0,E.get)(),we=fe.attachTo,Ce=fe.hydrateIn,Ve=R(fe,["attachTo","hydrateIn"]);U(we,Ce);var Ye=Z.attachTo,$e=Z.hydrateIn;U(Ye,$e);var it=$e||Ce||we||Ye||void 0,ht=$e||Ce||void 0,Dt=(0,o.default)({},it&&{attachTo:it},ht&&{hydrateIn:ht});return(0,o.default)({},Ve,Z,Dt)}function ie(Z,fe){return(0,B.default)(fe),fe.isCustomComponent?!!fe.isCustomComponent(Z):typeof Z=="function"}function oe(Z,fe){return fe.isCustomComponentElement?!!fe.isCustomComponentElement(Z):!!Z&&fe.isValidElement(Z)&&typeof Z.type=="function"}function me(Z){return(0,f.default)(Z&&Z.props||{}).filter(function(fe){var we=n(fe,2),Ce=we[1];return typeof Ce<"u"}).reduce(function(fe,we){var Ce=n(we,2),Ve=Ce[0],Ye=Ce[1];return(0,o.default)(fe,k({},Ve,Ye))},{})}function ae(Z){return Z?Z.type:null}function X(Z,fe){if(!fe||!Z)return!1;var we=(0,C.default)();if(we.displayNameOfNode){var Ce=we.displayNameOfNode(Z);return Ce===fe}return Z.type?typeof Z.type=="string"?Z.type===fe:(typeof Z.type=="function"?(0,p.default)(Z.type)===fe:Z.type.name===fe)||Z.type.displayName===fe:!1}function ee(Z,fe,we,Ce){var Ve=Ce?ve:Ne;if(Z===fe)return!0;if(!Array.isArray(Z)&&!Array.isArray(fe))return Ve(Z,fe,we);var Ye=(0,v.default)(Z,1/0),$e=(0,v.default)(fe,1/0);if(Ye.length!==$e.length)return!1;if(Ye.length===0&&$e.length===0)return!0;for(var it=0;it<Ye.length;it+=1)if(!Ve(Ye[it],$e[it],we))return!1;return!0}function se(Z,fe,we){return ee(Z,fe,we,!0)}function _e(Z,fe,we){return ee(Z,fe,we,!1)}function Oe(Z,fe){var we=n(fe,2),Ce=we[0],Ve=we[1],Ye=Ve==null?{}:k({},Ce,Ve);return(0,o.default)({},Z,Ye)}function Re(Z,fe,we,Ce){if(Z===fe)return!0;if(!Z||!fe||Z.type!==fe.type)return!1;var Ve=me(Z),Ye=me(fe);Ce&&(Ve=(0,f.default)(Ve).reduce(Oe,{}),Ye=(0,f.default)(Ye).reduce(Oe,{}));for(var $e=Object.keys(Ve),it=0;it<$e.length;it+=1){var ht=$e[it];if(ht!=="children")if(ht in Ye){if(Ye[ht]!==Ve[ht])if(t(Ye[ht])===t(Ve[ht])&&t(Ve[ht])==="object"){if(!(0,s.default)(Ve[ht],Ye[ht]))return!1}else return!1}else return!1}var Dt="children"in Ve,dt="children"in Ye,pr=Ce?se:_e;if((Dt||dt)&&!pr(qe(Ve.children,Ce),qe(Ye.children,Ce),we))return!1;if(!ot(Z)){var A=Object.keys(Ye);return we($e.length-Dt,A.length-dt)}return!1}function ve(Z,fe){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.default;return Re(Z,fe,we,!0)}function Ne(Z,fe){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.default;return Re(Z,fe,we,!1)}function He(Z,fe,we){var Ce=(0,I.childrenOfNode)(fe),Ve=function(Ye,$e){return be(Z,Ce.slice($e,$e+we.length),we)};return Ce.some(Ve)}function be(Z,fe,we){return fe.length===we.length&&fe.every(function(Ce,Ve){return Z(Ce,we[Ve])})}function je(Z){var fe=[],we=function(Ce){Ce===null||Ce===!1||typeof Ce>"u"||fe.push(Ce)};return Array.isArray(Z)?Z.forEach(we):we(Z),fe}function qe(Z){for(var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,we=je(Z),Ce=[],Ve=0;Ve<we.length;Ve+=1){var Ye=we[Ve],$e=Ce.pop();typeof $e>"u"?Ce.push(Ye):ot(Ye)&&ot($e)?Ce.push($e+Ye):(Ce.push($e),Ce.push(Ye))}return fe?Ce.map(function(it){return typeof it=="string"?(0,y.default)(it):it}):Ce}function ot(Z){return typeof Z=="string"||typeof Z=="number"}function ut(Z,fe){return fe.isValidElement(Z)||ot(Z)||Array.isArray(Z)}function Je(Z){var fe=!1;typeof globalThis.document>"u"&&(fe=!0,globalThis.document={}),Z(),fe&&(globalThis.document=void 0,delete globalThis.document)}function at(Z){var fe=Z.slice().reverse();return function(we){return fe.every(function(Ce){return Ce(we)})}}function Ht(Z){if(!Z)return null;var fe=Z.type;return fe?fe.displayName||(typeof fe=="function"?(0,p.default)(fe):fe.name||fe):null}function qt(Z){return typeof Symbol=="function"?Symbol.for("enzyme."+String(Z)):Z}function dr(Z,fe,we){Object.defineProperty(Z,fe,{value:we,enumerable:!1,writable:!0})}function tr(Z,fe,we){return Z.createElement(fe.type,(0,o.default)({},fe.props,we))}function Ie(Z,fe){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},Ce=void 0,Ve=Z[fe],Ye=(0,m.default)(Z,fe),$e=void 0;return Ye&&($e=Object.getOwnPropertyDescriptor(Z,fe)),Object.defineProperty(Z,fe,{configurable:!0,enumerable:!$e||!!$e.enumerable,value:we(Ve)||function(){function it(){for(var ht=arguments.length,Dt=Array(ht),dt=0;dt<ht;dt++)Dt[dt]=arguments[dt];var pr=Ve.apply(this,Dt);return Ce=pr,pr}return it}()}),{restore:function(){function it(){Ye?$e?Object.defineProperty(Z,fe,$e):Z[fe]=Ve:delete Z[fe]}return it}(),getLastReturnValue:function(){function it(){return Ce}return it}()}}function te(Z){return Z===null||Z===!1}function le(Z){return te(Z)?!0:[].concat(Z).every(function(fe){if(fe){var we=fe.rendered;return te(we)||le(we)}return te(fe)})}function ye(Z){return Z?(0,S.isHtml)(Z)?T.default.load("")(Z):T.default.load(Z,null,!1).root():T.default.root()}})($y);var lu={},uke="[object Symbol]",UX=/[&<>"'`]/g,cke=RegExp(UX.source),hke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},fke=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,pke=typeof self=="object"&&self&&self.Object===Object&&self,dke=fke||pke||Function("return this")();function mke(e){return function(t){return e==null?void 0:e[t]}}var gke=mke(hke),yke=Object.prototype,vke=yke.toString,Y3=dke.Symbol,X3=Y3?Y3.prototype:void 0,W3=X3?X3.toString:void 0;function bke(e){if(typeof e=="string")return e;if(Tke(e))return W3?W3.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function _ke(e){return!!e&&typeof e=="object"}function Tke(e){return typeof e=="symbol"||_ke(e)&&vke.call(e)==uke}function Eke(e){return e==null?"":bke(e)}function Ske(e){return e=Eke(e),e&&cke.test(e)?e.replace(UX,gke):e}var wke=Ske,Ake=String.prototype.valueOf,Oke=function(e){try{return Ake.call(e),!0}catch{return!1}},kke=Object.prototype.toString,xke="[object String]",Ike=Wy(),zX=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:Ike?Oke(e):kke.call(e)===xke},Cke=Number.prototype.toString,Pke=function(e){try{return Cke.call(e),!0}catch{return!1}},Dke=Object.prototype.toString,Rke="[object Number]",Nke=Wy(),Mke=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:Nke?Pke(e):Dke.call(e)===Rke},VX=wi,Lke=VX("Boolean.prototype.toString"),jke=VX("Object.prototype.toString"),Bke=function(e){try{return Lke(e),!0}catch{return!1}},Fke="[object Boolean]",Gke=Wy(),Hke=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:Gke&&Symbol.toStringTag in e?Bke(e):jke(e)===Fke};Object.defineProperty(lu,"__esModule",{value:!0});var q3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};lu.typeName=WX;lu.spaces=qX;lu.indent=$X;lu.debugNode=CN;lu.debugNodes=sxe;var Uke=wke,zke=Ks(Uke),Vke=rN,YX=Ks(Vke),Yke=zX,Xke=Ks(Yke),Wke=Mke,qke=Ks(Wke),$ke=QR,Kke=Ks($ke),Qke=Hke,Zke=Ks(Qke),Jke=v7,zh=Ks(Jke),exe=od,Ih=Ks(exe),XX=yn,txe=su,Xx=Ks(txe);function Ks(e){return e&&e.__esModule?e:{default:e}}var rxe=Function.bind.call(Function.call,Boolean.prototype.valueOf);function WX(e){var t=(0,Xx.default)();return t.displayNameOfNode?(0,Xx.default)().displayNameOfNode(e)||"Component":typeof e.type=="function"?e.type.displayName||(0,YX.default)(e.type)||"Component":e.type}function qX(e){return Array(e+1).join(" ")}function $X(e,t){return t.split(`
`).map(function(n){return""+String(qX(e))+String(n)}).join(`
`)}function nxe(e,t){return(0,Xke.default)(e)?(0,zh.default)(String(e),{quoteStyle:"double"}):(0,qke.default)(e)?"{"+String((0,zh.default)(Number(e)))+"}":(0,Zke.default)(e)?"{"+String((0,zh.default)(rxe(e)))+"}":(0,Kke.default)(e)?"{"+String((0,zh.default)(e))+"}":(typeof e>"u"?"undefined":q3(e))==="object"?t.verbose?"{"+String((0,zh.default)(e))+"}":"{{...}}":"{["+(typeof e>"u"?"undefined":q3(e))+"]}"}function ixe(e,t){var n=(0,XX.propsOfNode)(e),r=Object.keys(n).filter(function(i){return i!=="children"});return r.map(function(i){return String(i)+"="+String(nxe(n[i],t))}).join(" ")}function oxe(e,t){return e.length?`
`+String(e.map(function(n){return $X(t,n)}).join(`
`))+`
`:""}function axe(e){return(0,Ih.default)(e,"nodeType")&&typeof e.nodeType=="string"&&(0,Ih.default)(e,"type")&&(0,Ih.default)(e,"key")&&(0,Ih.default)(e,"ref")&&(0,Ih.default)(e,"instance")&&(0,Ih.default)(e,"rendered")}function CN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"||typeof e=="number")return(0,zke.default)(e);if(typeof e=="function"){var r=(0,YX.default)(e);return"[function"+(r?" "+String(r):"")+"]"}if(!e)return"";var i=(0,Xx.default)();if(!i.isValidElement(e)&&!axe(e))return"{"+String((0,zh.default)(e))+"}";var o=(0,XX.childrenOfNode)(e).map(function(h){return CN(h,t,n)}).filter(Boolean),a=WX(e),s=n.ignoreProps?"":ixe(e,n),u=s?" ":"",c=o.length?">":" ",l=oxe(o,t),f=o.length?"</"+String(a)+">":"/>";return"<"+String(a)+u+String(s)+c+String(l)+f}function sxe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.map(function(n){return CN(n,void 0,t)}).join(`


`)}var pd={},Ip={},PN={};Object.defineProperty(PN,"__esModule",{value:!0});var $3=function(e){return JSON.stringify(e)},lxe=function(e){var t=e.body,n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){var u=s.value,c=void 0;if(u.type==="universalSelector")c="*";else if(u.type==="typeSelector")c=u.name;else if(u.type==="idSelector")c="#"+u.name;else if(u.type==="classSelector")c="."+u.name;else if(u.type==="attributePresenceSelector")c="["+u.name+"]";else if(u.type==="attributeValueSelector")c="["+u.name+u.operator+$3(u.value)+"]";else if(u.type==="pseudoClassSelector")c=":"+u.name,u.parameters.length&&(c+="("+u.parameters.map($3).join(", ")+")");else if(u.type==="pseudoElementSelector")c="::"+u.name;else throw new Error("Unknown token.");n.push(c)}}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n.join("")};PN.default=function(){var e=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){var u=s.value;if(u.type==="selector")n.push(lxe(u));else if(u.type==="descendantCombinator")n.push(" ");else if(u.type==="childCombinator")n.push(" > ");else if(u.type==="adjacentSiblingCombinator")n.push(" + ");else if(u.type==="generalSiblingCombinator")n.push(" ~ ");else throw new Error("Unknown token.")}}catch(c){i=!0,o=c}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n.join("")};return{generate:e}};var DN={},KX={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.nearley=n()})(Pe,function(){function t(c,l,f){return this.id=++t.highestId,this.name=c,this.symbols=l,this.postprocess=f,this}t.highestId=0,t.prototype.toString=function(c){var l=typeof c>"u"?this.symbols.map(u).join(" "):this.symbols.slice(0,c).map(u).join(" ")+" ● "+this.symbols.slice(c).map(u).join(" ");return this.name+" → "+l};function n(c,l,f,h){this.rule=c,this.dot=l,this.reference=f,this.data=[],this.wantedBy=h,this.isComplete=this.dot===c.symbols.length}n.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},n.prototype.nextState=function(c){var l=new n(this.rule,this.dot+1,this.reference,this.wantedBy);return l.left=this,l.right=c,l.isComplete&&(l.data=l.build(),l.right=void 0),l},n.prototype.build=function(){var c=[],l=this;do c.push(l.right.data),l=l.left;while(l.left);return c.reverse(),c},n.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,a.fail))};function r(c,l){this.grammar=c,this.index=l,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(c){for(var l=this.states,f=this.wants,h=this.completed,p=0;p<l.length;p++){var d=l[p];if(d.isComplete){if(d.finish(),d.data!==a.fail){for(var m=d.wantedBy,g=m.length;g--;){var v=m[g];this.complete(v,d)}if(d.reference===this.index){var b=d.rule.name;(this.completed[b]=this.completed[b]||[]).push(d)}}}else{var b=d.rule.symbols[d.dot];if(typeof b!="string"){this.scannable.push(d);continue}if(f[b]){if(f[b].push(d),h.hasOwnProperty(b))for(var y=h[b],g=0;g<y.length;g++){var _=y[g];this.complete(d,_)}}else f[b]=[d],this.predict(b)}}},r.prototype.predict=function(c){for(var l=this.grammar.byName[c]||[],f=0;f<l.length;f++){var h=l[f],p=this.wants[c],d=new n(h,0,this.index,p);this.states.push(d)}},r.prototype.complete=function(c,l){var f=c.nextState(l);this.states.push(f)};function i(c,l){this.rules=c,this.start=l||this.rules[0].name;var f=this.byName={};this.rules.forEach(function(h){f.hasOwnProperty(h.name)||(f[h.name]=[]),f[h.name].push(h)})}i.fromCompiled=function(h,l){var f=h.Lexer;h.ParserStart&&(l=h.ParserStart,h=h.ParserRules);var h=h.map(function(d){return new t(d.name,d.symbols,d.postprocess)}),p=new i(h,l);return p.lexer=f,p};function o(){this.reset("")}o.prototype.reset=function(c,l){this.buffer=c,this.index=0,this.line=l?l.line:1,this.lastLineBreak=l?-l.col:0},o.prototype.next=function(){if(this.index<this.buffer.length){var c=this.buffer[this.index++];return c===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:c}}},o.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},o.prototype.formatError=function(c,l){var f=this.buffer;if(typeof f=="string"){var h=f.split(`
`).slice(Math.max(0,this.line-5),this.line),p=f.indexOf(`
`,this.index);p===-1&&(p=f.length);var d=this.index-this.lastLineBreak,m=String(this.line).length;return l+=" at line "+this.line+" col "+d+`:

`,l+=h.map(function(v,b){return g(this.line-h.length+b+1,m)+" "+v},this).join(`
`),l+=`
`+g("",m+d)+`^
`,l}else return l+" at index "+(this.index-1);function g(v,b){var y=String(v);return Array(b-y.length+1).join(" ")+y}};function a(c,l,h){if(c instanceof i)var p=c,h=l;else var p=i.fromCompiled(c,l);this.grammar=p,this.options={keepHistory:!1,lexer:p.lexer||new o};for(var d in h||{})this.options[d]=h[d];this.lexer=this.options.lexer,this.lexerState=void 0;var m=new r(p,0);this.table=[m],m.wants[p.start]=[],m.predict(p.start),m.process(),this.current=0}a.fail={},a.prototype.feed=function(c){var l=this.lexer;l.reset(c,this.lexerState);for(var f;;){try{if(f=l.next(),!f)break}catch(E){var m=new r(this.grammar,this.current+1);this.table.push(m);var h=new Error(this.reportLexerError(E));throw h.offset=this.current,h.token=E.token,h}var p=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var d=this.current+1,m=new r(this.grammar,d);this.table.push(m);for(var g=f.text!==void 0?f.text:f.value,v=l.constructor===o?f.value:f,b=p.scannable,y=b.length;y--;){var _=b[y],T=_.rule.symbols[_.dot];if(T.test?T.test(v):T.type?T.type===f.type:T.literal===g){var S=_.nextState({data:v,token:f,isToken:!0,reference:d-1});m.states.push(S)}}if(m.process(),m.states.length===0){var h=new Error(this.reportError(f));throw h.offset=this.current,h.token=f,h}this.options.keepHistory&&(p.lexerState=l.save()),this.current++}return p&&(this.lexerState=l.save()),this.results=this.finish(),this},a.prototype.reportLexerError=function(c){var l,f,h=c.token;return h?(l="input "+JSON.stringify(h.text[0])+" (lexer error)",f=this.lexer.formatError(h,"Syntax error")):(l="input (lexer error)",f=c.message),this.reportErrorCommon(f,l)},a.prototype.reportError=function(c){var l=(c.type?c.type+" token: ":"")+JSON.stringify(c.value!==void 0?c.value:c),f=this.lexer.formatError(c,"Syntax error");return this.reportErrorCommon(f,l)},a.prototype.reportErrorCommon=function(c,l){var f=[];f.push(c);var h=this.table.length-2,p=this.table[h],d=p.states.filter(function(g){var v=g.rule.symbols[g.dot];return v&&typeof v!="string"});if(d.length===0)f.push("Unexpected "+l+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(p.states,f);else{f.push("Unexpected "+l+`. Instead, I was expecting to see one of the following:
`);var m=d.map(function(g){return this.buildFirstStateStack(g,[])||[g]},this);m.forEach(function(g){var v=g[0],b=v.rule.symbols[v.dot],y=this.getSymbolDisplay(b);f.push("A "+y+" based on:"),this.displayStateStack(g,f)},this)}return f.push(""),f.join(`
`)},a.prototype.displayStateStack=function(c,l){for(var f,h=0,p=0;p<c.length;p++){var d=c[p],m=d.rule.toString(d.dot);m===f?h++:(h>0&&l.push("    ^ "+h+" more lines identical to this"),h=0,l.push("    "+m)),f=m}},a.prototype.getSymbolDisplay=function(c){return s(c)},a.prototype.buildFirstStateStack=function(c,l){if(l.indexOf(c)!==-1)return null;if(c.wantedBy.length===0)return[c];var f=c.wantedBy[0],h=[c].concat(l),p=this.buildFirstStateStack(f,h);return p===null?null:[c].concat(p)},a.prototype.save=function(){var c=this.table[this.current];return c.lexerState=this.lexerState,c},a.prototype.restore=function(c){var l=c.index;this.current=l,this.table[l]=c,this.table.splice(l+1),this.lexerState=c.lexerState,this.results=this.finish()},a.prototype.rewind=function(c){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[c])},a.prototype.finish=function(){var c=[],l=this.grammar.start,f=this.table[this.table.length-1];return f.states.forEach(function(h){h.rule.name===l&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==a.fail&&c.push(h)}),c.map(function(h){return h.data})};function s(c){var l=typeof c;if(l==="string")return c;if(l==="object"){if(c.literal)return JSON.stringify(c.literal);if(c instanceof RegExp)return"character matching "+c;if(c.type)return c.type+" token";if(c.test)return"token matching "+String(c.test);throw new Error("Unknown symbol type: "+c)}}function u(c){var l=typeof c;if(l==="string")return c;if(l==="object"){if(c.literal)return JSON.stringify(c.literal);if(c instanceof RegExp)return c.toString();if(c.type)return"%"+c.type;if(c.test)return"<"+String(c.test)+">";throw new Error("Unknown symbol type: "+c)}}return{Parser:a,Grammar:i,Rule:t}})})(KX);var uxe=KX.exports,QX={exports:{}},cxe=1/0,hxe=9007199254740991,fxe="[object Arguments]",pxe="[object Function]",dxe="[object GeneratorFunction]",mxe=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,gxe=typeof self=="object"&&self&&self.Object===Object&&self,yxe=mxe||gxe||Function("return this")(),RN=Object.prototype,vxe=RN.hasOwnProperty,ZX=RN.toString,K3=yxe.Symbol,bxe=RN.propertyIsEnumerable,Q3=K3?K3.isConcatSpreadable:void 0;function JX(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=_xe),i||(i=[]);++o<a;){var s=e[o];n(s)?JX(s,t-1,n,r,i):i[i.length]=s}return i}function _xe(e){return Sxe(e)||Exe(e)||!!(Q3&&e&&e[Q3])}function Txe(e){var t=e?e.length:0;return t?JX(e,cxe):[]}function Exe(e){return Axe(e)&&vxe.call(e,"callee")&&(!bxe.call(e,"callee")||ZX.call(e)==fxe)}var Sxe=Array.isArray;function wxe(e){return e!=null&&kxe(e.length)&&!Oxe(e)}function Axe(e){return Ixe(e)&&wxe(e)}function Oxe(e){var t=xxe(e)?ZX.call(e):"";return t==pxe||t==dxe}function kxe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=hxe}function xxe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ixe(e){return!!e&&typeof e=="object"}var Cxe=Txe;(function(e){(function(){function t(f){return f[0]}var n=Cxe,r=function(f,h){return function(p){return p[f].concat([p[h]])}},i=function(f){return f=f.filter(function(h){return h!==null}),n(f)},o={" ":"descendantCombinator","+":"adjacentSiblingCombinator",">":"childCombinator","~":"generalSiblingCombinator"},a=function(f){return(Array.isArray(f[0])?f[0]:[f[0]]).concat({type:o[f[2]]}).concat(f[4])},s=function(f,h,p){var d=n(f).join(""),m=parseFloat(d);return isNaN(m)?p:m},u=function(f,h,p){return f[0]==="true"?!0:f[0]==="false"?!1:p},c=function(f,h,p){if(f[0]==="NaN")return NaN;if(f[0]!=="undefined")return f[0]==="null"?null:p},l={Lexer:void 0,ParserRules:[{name:"combinator",symbols:["selector"]},{name:"combinator",symbols:["combinator","_",/[>+~ ]/,"_","selector"],postprocess:a},{name:"selector",symbols:["selectorBody"],postprocess:function(f){return{type:"selector",body:f[0]}}},{name:"selectorBody$ebnf$1",symbols:["typeSelector"],postprocess:t},{name:"selectorBody$ebnf$1",symbols:[],postprocess:function(f){return null}},{name:"selectorBody$ebnf$2",symbols:[]},{name:"selectorBody$ebnf$2",symbols:["selectorBody$ebnf$2","simpleSelector"],postprocess:function(f){return f[0].concat([f[1]])}},{name:"selectorBody",symbols:["selectorBody$ebnf$1","selectorBody$ebnf$2"],postprocess:function(f,h,p){var d=i(f);return d.length?d:p}},{name:"selectorBody$ebnf$3",symbols:[]},{name:"selectorBody$ebnf$3",symbols:["selectorBody$ebnf$3","simpleSelector"],postprocess:function(f){return f[0].concat([f[1]])}},{name:"selectorBody",symbols:["universalSelector","selectorBody$ebnf$3"],postprocess:i},{name:"simpleSelector",symbols:["idSelector"]},{name:"simpleSelector",symbols:["classSelector"]},{name:"simpleSelector",symbols:["attributeValueSelector"]},{name:"simpleSelector",symbols:["attributePresenceSelector"]},{name:"simpleSelector",symbols:["pseudoClassSelector"]},{name:"simpleSelector",symbols:["pseudoElementSelector"]},{name:"typeSelector",symbols:["attributeName"],postprocess:function(f){return{type:"typeSelector",name:f[0]}}},{name:"className$ebnf$1",symbols:[{literal:"-"}],postprocess:t},{name:"className$ebnf$1",symbols:[],postprocess:function(f){return null}},{name:"className$ebnf$2",symbols:[]},{name:"className$ebnf$2",symbols:["className$ebnf$2",/[_a-zA-Z0-9-]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"className",symbols:["className$ebnf$1",/[_a-zA-Z]/,"className$ebnf$2"],postprocess:function(f){return(f[0]||"")+f[1]+f[2].join("")}},{name:"attributeName$ebnf$1",symbols:[]},{name:"attributeName$ebnf$1",symbols:["attributeName$ebnf$1",/[_a-zA-Z()0-9-]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"attributeName",symbols:[/[_a-z()A-Z]/,"attributeName$ebnf$1"],postprocess:function(f){return f[0]+f[1].join("")}},{name:"classSelector",symbols:[{literal:"."},"className"],postprocess:function(f){return{type:"classSelector",name:f[1]}}},{name:"idSelector",symbols:[{literal:"#"},"attributeName"],postprocess:function(f){return{type:"idSelector",name:f[1]}}},{name:"universalSelector",symbols:[{literal:"*"}],postprocess:function(f){return{type:"universalSelector"}}},{name:"attributePresenceSelector",symbols:[{literal:"["},"attributeName",{literal:"]"}],postprocess:function(f){return{type:"attributePresenceSelector",name:f[1]}}},{name:"attributeOperator",symbols:[{literal:"="}]},{name:"attributeOperator$string$1",symbols:[{literal:"~"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$1"]},{name:"attributeOperator$string$2",symbols:[{literal:"|"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$2"]},{name:"attributeOperator$string$3",symbols:[{literal:"^"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$3"]},{name:"attributeOperator$string$4",symbols:[{literal:"$"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$4"]},{name:"attributeOperator$string$5",symbols:[{literal:"*"},{literal:"="}],postprocess:function(f){return f.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$5"]},{name:"attributeValueSelector",symbols:[{literal:"["},"attributeName","attributeOperator","attributeValue",{literal:"]"}],postprocess:function(f){return{type:"attributeValueSelector",name:f[1],value:f[3],operator:f[2][0]}}},{name:"attributeValue",symbols:["falsyPrimitiveStrings"],postprocess:t},{name:"attributeValue",symbols:["numericValue"],postprocess:t},{name:"attributeValue",symbols:["sqstring"],postprocess:t},{name:"attributeValue",symbols:["dqstring"],postprocess:t},{name:"falsyPrimitiveStrings$string$1",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$1"],postprocess:u},{name:"falsyPrimitiveStrings$string$2",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$2"],postprocess:u},{name:"falsyPrimitiveStrings$string$3",symbols:[{literal:"N"},{literal:"a"},{literal:"N"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$3"],postprocess:c},{name:"falsyPrimitiveStrings$string$4",symbols:[{literal:"n"},{literal:"u"},{literal:"l"},{literal:"l"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$4"],postprocess:c},{name:"falsyPrimitiveStrings$string$5",symbols:[{literal:"u"},{literal:"n"},{literal:"d"},{literal:"e"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"e"},{literal:"d"}],postprocess:function(f){return f.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$5"],postprocess:c},{name:"numericValue",symbols:["int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int"],postprocess:s},{name:"numericValue",symbols:["int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int"],postprocess:s},{name:"numericValue$string$1",symbols:[{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(f){return f.join("")}},{name:"numericValue",symbols:["numericValue$string$1"],postprocess:s},{name:"numericValue$string$2",symbols:[{literal:"+"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(f){return f.join("")}},{name:"numericValue",symbols:["numericValue$string$2"],postprocess:s},{name:"numericValue$string$3",symbols:[{literal:"-"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(f){return f.join("")}},{name:"numericValue",symbols:["numericValue$string$3"],postprocess:s},{name:"int$ebnf$1",symbols:[/[0-9]/]},{name:"int$ebnf$1",symbols:["int$ebnf$1",/[0-9]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"int",symbols:["int$ebnf$1"]},{name:"classParameters",symbols:[]},{name:"classParameters",symbols:["classParameter"]},{name:"classParameters",symbols:["classParameters",{literal:","},"_","classParameter"],postprocess:r(0,3)},{name:"classParameter$ebnf$1",symbols:[/[^()"', ]/]},{name:"classParameter$ebnf$1",symbols:["classParameter$ebnf$1",/[^()"', ]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"classParameter",symbols:["classParameter$ebnf$1"],postprocess:function(f){return f[0].join("")}},{name:"classParameter",symbols:["sqstring"],postprocess:t},{name:"classParameter",symbols:["dqstring"],postprocess:t},{name:"pseudoElementSelector$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:function(f){return f.join("")}},{name:"pseudoElementSelector",symbols:["pseudoElementSelector$string$1","pseudoClassSelectorName"],postprocess:function(f){return{type:"pseudoElementSelector",name:f[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName"],postprocess:function(f){return{type:"pseudoClassSelector",name:f[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName",{literal:"("},"classParameters",{literal:")"}],postprocess:function(f){return{type:"pseudoClassSelector",name:f[1],parameters:f[3]}}},{name:"pseudoClassSelectorName$ebnf$1",symbols:[/[a-zA-Z0-9-_]/]},{name:"pseudoClassSelectorName$ebnf$1",symbols:["pseudoClassSelectorName$ebnf$1",/[a-zA-Z0-9-_]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"pseudoClassSelectorName",symbols:[/[a-zA-Z]/,"pseudoClassSelectorName$ebnf$1"],postprocess:function(f){return f[0]+f[1].join("")}},{name:"dqstring$ebnf$1",symbols:[]},{name:"dqstring$ebnf$1",symbols:["dqstring$ebnf$1","dstrchar"],postprocess:function(f){return f[0].concat([f[1]])}},{name:"dqstring",symbols:[{literal:'"'},"dqstring$ebnf$1",{literal:'"'}],postprocess:function(f){return f[1].join("")}},{name:"dstrchar",symbols:[/[^"]/],postprocess:t},{name:"dstrchar$string$1",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(f){return f.join("")}},{name:"dstrchar",symbols:["dstrchar$string$1"],postprocess:function(f){return'"'}},{name:"sqstring$ebnf$1",symbols:[]},{name:"sqstring$ebnf$1",symbols:["sqstring$ebnf$1","sstrchar"],postprocess:function(f){return f[0].concat([f[1]])}},{name:"sqstring",symbols:[{literal:"'"},"sqstring$ebnf$1",{literal:"'"}],postprocess:function(f){return f[1].join("")}},{name:"sstrchar",symbols:[/[^']/],postprocess:t},{name:"sstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(f){return f.join("")}},{name:"sstrchar",symbols:["sstrchar$string$1"],postprocess:function(f){return"'"}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[ ]/],postprocess:function(f){return f[0].concat([f[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:function(f){return null}}],ParserStart:"combinator"};e.exports=l})()})(QX);var Pxe=QX.exports;Object.defineProperty(DN,"__esModule",{value:!0});var Dxe=uxe,Rxe=Pxe,Z3=Nxe(Rxe);function Nxe(e){return e&&e.__esModule?e:{default:e}}DN.default=function(){var e=function(t){var n=new Dxe.Parser(Z3.default.ParserRules,Z3.default.ParserStart),r=n.feed(t).results;if(r.length===0)throw new Error("Found no parsings.");if(r.length>1)throw new Error("Ambiguous results.");return r[0]};return{parse:e}};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.createParser=Ip.createGenerator=void 0;var Mxe=PN,Lxe=eW(Mxe),jxe=DN,Bxe=eW(jxe);function eW(e){return e&&e.__esModule?e:{default:e}}Ip.createGenerator=Lxe.default;Ip.createParser=Bxe.default;var Fxe=id,tW=wi,Gxe=tW("Object.prototype.propertyIsEnumerable"),Hxe=tW("Array.prototype.push"),rW=function(e){var t=Fxe(e),n=[];for(var r in t)Gxe(t,r)&&Hxe(n,t[r]);return n},Uxe=rW,nW=function(){return typeof Object.values=="function"?Object.values:Uxe},zxe=nW,Vxe=ri,Yxe=function(){var e=zxe();return Vxe(Object,{values:e},{values:function(){return Object.values!==e}}),e},Xxe=ri,Wxe=Ws,qxe=rW,iW=nW,$xe=Yxe,oW=Wxe(iW(),Object);Xxe(oW,{getPolyfill:iW,implementation:qxe,shim:$xe});var Kxe=oW,Qxe=C7,Zxe=D7(),Jxe=N7(),eIe=Xy,tIe=M7(),rIe=ZR,nIe=K7(),iIe=O7,oIe=Q7,J3=JR,aIe=wi,sIe=zX,eF=Object("a"),lIe=eF[0]!=="a"||!(0 in eF),uIe=aIe("String.prototype.split"),aW=function(e){var t=oIe(this),n=lIe&&sIe(t)?uIe(t,""):t,r=nIe(n);if(!rIe(e))throw new TypeError("Array.prototype.filter callback must be a function");var i;arguments.length>1&&(i=arguments[1]);for(var o=Qxe(t,0),a=0,s=0;a<r;){var u=J3(a),c=tIe(t,u);if(c){var l=eIe(t,u),f=iIe(Zxe(e,i,[l,a,t]));f&&(Jxe(o,J3(s),l),s+=1)}a+=1}return o},cIe=function(e){var t=!0,n=!0,r=!1;if(typeof e=="function"){try{e.call("f",function(i,o,a){typeof a!="object"&&(t=!1)}),e.call([null],function(){"use strict";n=typeof this=="string"},"x")}catch{r=!0}return!r&&t&&n}return!1},hIe=cIe,fIe=aW,sW=function(){var e=Array.prototype.filter;return hIe(e)?e:fIe},XA,tF;function pIe(){if(tF)return XA;tF=1;var e=ri,t=sW;return XA=function(){var n=t();return e(Array.prototype,{filter:n},{filter:function(){return Array.prototype.filter!==n}}),n},XA}var dIe=ri,mIe=id,gIe=Ws,yIe=wi,vIe=aW,lW=sW,bIe=gIe.apply(lW()),_Ie=pIe(),TIe=yIe("Array.prototype.slice"),uW=function(e,t){return mIe(e),bIe(e,TIe(arguments,1))};dIe(uW,{getPolyfill:lW,implementation:vIe,shim:_Ie});var EIe=uW,SIe=wi,wIe=SIe("Array.prototype.push"),AIe=function(e,t){for(var n=[],r=0;r<e.length;r+=1)wIe(n,t(e[r],r));return n},OIe=[["HTMLElement","article"],["HTMLElement","section"],["HTMLBaseFontElement","basefont","HTMLBaseFontElementConstructor"],["HTMLPhraseElement","cite","HTMLElement"],["HTMLElement","noscript"],["HTMLBGSoundElement","bgsound","HTMLElement"],["HTMLPhraseElement","blink","HTMLElement"],["HTMLElement","multicol"],["HTMLNextIdElement","nextid","HTMLElement"],["HTMLElement","rb"],["HTMLElement","spacer"],["HTMLAnchorElement","a","HTMLElement"],["HTMLAreaElement","area","HTMLElement"],["HTMLAudioElement","audio","HTMLElement"],["HTMLBaseElement","base","HTMLElement"],["HTMLBodyElement","body","HTMLElement"],["HTMLBRElement","br","HTMLElement"],["HTMLButtonElement","button"],["HTMLCanvasElement","canvas"],["HTMLContentElement","content","HTMLElement"],["HTMLDataElement","data","HTMLElement"],["HTMLDataListElement","datalist"],["HTMLDialogElement","dialog","HTMLElement"],["HTMLDirectoryElement","dir"],["HTMLDivElement","div"],["HTMLDListElement","dl"],["HTMLEmbedElement","embed"],["HTMLFieldSetElement","fieldset"],["HTMLFontElement","font"],["HTMLFormElement","form"],["HTMLFrameElement","frame"],["HTMLFrameSetElement","frameset"],["HTMLHeadElement","head"],["HTMLHeadingElement","h1"],["HTMLHeadingElement","h2"],["HTMLHeadingElement","h3"],["HTMLHeadingElement","h4"],["HTMLHeadingElement","h5"],["HTMLHeadingElement","h6"],["HTMLHtmlElement","html"],["HTMLHRElement","hr"],["HTMLIFrameElement","iframe"],["HTMLImageElement","img"],["HTMLInputElement","input"],["HTMLIsIndexElement","index","HTMLElement"],["HTMLKeygenElement","keygen","HTMLBlockElement"],["HTMLLabelElement","label"],["HTMLLegendElement","legend"],["HTMLLIElement","li"],["HTMLLinkElement","link"],["HTMLElement","main"],["HTMLMapElement","map"],["HTMLMarqueeElement","marquee"],["HTMLMenuElement","menu"],["HTMLMetaElement","meta"],["HTMLMeterElement","meter","HTMLElement"],["HTMLModElement","del"],["HTMLModElement","ins"],["HTMLObjectElement","object"],["HTMLOListElement","ol"],["HTMLOptGroupElement","optgroup"],["HTMLOptionElement","option"],["HTMLOutputElement","output"],["HTMLParagraphElement","p"],["HTMLParamElement","param"],["HTMLPictureElement","picture","HTMLElement"],["HTMLPreElement","pre"],["HTMLProgressElement","progress","HTMLElement"],["HTMLQuoteElement","q","HTMLBlockquoteElement"],["HTMLQuoteElement","blockquote","HTMLBlockElement","HTMLBlockquoteElement"],["HTMLScriptElement","script"],["HTMLSelectElement","select"],["HTMLShadowElement","shadow","HTMLElement"],["HTMLSourceElement","source"],["HTMLSpanElement","span","HTMLElement"],["HTMLStyleElement","style"],["HTMLTableElement","table"],["HTMLTableCaptionElement","caption"],["HTMLTableCellElement","td","HTMLTableDataCellElement"],["HTMLTableCellElement","th","HTMLTableHeaderCellElement"],["HTMLTableRowElement","tr"],["HTMLTableColElement","col"],["HTMLTableColElement","colgroup"],["HTMLTableSectionElement","tbody"],["HTMLTableSectionElement","thead"],["HTMLTableSectionElement","tfoot"],["HTMLTemplateElement","template","HTMLElement"],["HTMLTextAreaElement","textarea"],["HTMLTimeElement","time","HTMLElement"],["HTMLTitleElement","title"],["HTMLTrackElement","track","HTMLElement"],["HTMLUListElement","ul"],["HTMLVideoElement","video"],["HTMLElement","abbr"],["HTMLElement","address"],["HTMLElement","aside"],["HTMLElement","b"],["HTMLElement","bdi"],["HTMLElement","bdo"],["HTMLElement","code"],["HTMLElement","dd"],["HTMLDetailsElement","details","HTMLElement"],["HTMLElement","dfn"],["HTMLElement","dt"],["HTMLElement","em"],["HTMLElement","figcaption"],["HTMLElement","figure"],["HTMLElement","footer"],["HTMLElement","header"],["HTMLElement","hgroup"],["HTMLElement","i"],["HTMLElement","kbd"],["HTMLElement","mark"],["HTMLElement","nav"],["HTMLElement","rp"],["HTMLElement","rt"],["HTMLElement","ruby"],["HTMLElement","s"],["HTMLElement","samp"],["HTMLSlotElement","slot","HTMLElement"],["HTMLElement","small"],["HTMLElement","strong"],["HTMLElement","summary"],["HTMLElement","u"],["HTMLElement","var"],["HTMLElement","wbr"]],kIe=function(e,t,n){if(typeof document<"u"&&typeof document.createElement=="function"){var r=document.createElement(e).constructor;if(r!==n)return r}},xIe=function(){var e=globalThis.HTMLUnknownElement;return{all:globalThis.HTMLElement,elements:AIe(OIe,function(t){for(var n=t[0],r=t[1],i,o,a=2;a<arguments.length&&!o;a+=1)i=t[a],o=i&&globalThis[i];var s=globalThis[n];return{constructor:kIe(r,o||s,e),constructorName:o?i:n,expectedConstructor:o||s,tag:r}}),unknown:e}},IIe=EIe,CIe=xIe,PIe=function(e){if(!e)return[];var t=CIe();return e===t.unknown?[]:e===t.all?t.elements:IIe(t.elements,function(n){return n.constructor===e})};Object.defineProperty(pd,"__esModule",{value:!0});var cW=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DIe=function(){function e(t,n){var r=[],i=!0,o=!1,a=void 0;try{for(var s=t[Symbol.iterator](),u;!(i=(u=s.next()).done)&&(r.push(u.value),!(n&&r.length===n));i=!0);}catch(c){o=!0,a=c}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();pd.buildPredicate=yW;pd.reduceTreeBySelector=aS;pd.reduceTreesBySelector=mCe;var RIe=Ip,NIe=Kxe,MIe=dd(NIe),LIe=qy,NN=dd(LIe),jIe=eN,BIe=dd(jIe),FIe=od,GIe=dd(FIe),HIe=PIe,UIe=dd(HIe),bi=yn,hW=$y,zIe=su,fW=dd(zIe);function dd(e){return e&&e.__esModule?e:{default:e}}function VIe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}var YIe=(0,RIe.createParser)(),XIe="childCombinator",WIe="adjacentSiblingCombinator",qIe="generalSiblingCombinator",$Ie="descendantCombinator",pW="selector",KIe="typeSelector",QIe="classSelector",ZIe="idSelector",JIe="universalSelector",dW="attributePresenceSelector",eCe="attributeValueSelector",tCe="pseudoClassSelector",rCe="pseudoElementSelector",rF="=",nCe="~=",iCe="|=",oCe="^=",aCe="$=",sCe="*=";function mW(e){return[].concat(VIe(new Set(e)))}function MN(e,t){return mW(t.reduce(e,[]))}function gW(e){try{return YIe.parse(e)}catch{throw new Error("Failed to parse selector: "+String(e))}}function nF(e,t){var n=t.operator,r=t.value,i=t.name,o=(0,hW.propsOfNode)(e),a=Object.getOwnPropertyDescriptor(o,i);if(a&&a.get)return!1;var s=o[i];if(typeof s>"u")return!1;if(t.type===dW)return(0,GIe.default)(o,t.name);if((typeof s!="string"||typeof r!="string")&&n!==rF)return!1;switch(n){case rF:return(0,BIe.default)(s,r);case nCe:return s.split(" ").indexOf(r)!==-1;case iCe:return s===r||s.startsWith(String(r)+"-");case oCe:return r===""?!1:s.slice(0,r.length)===r;case aCe:return r===""?!1:s.slice(-r.length)===r;case sCe:return r===""?!1:s.indexOf(r)!==-1;default:throw new Error('Enzyme::Selector: Unknown attribute selector operator "'+String(n)+'"')}}function lCe(e,t,n){var r=t.name,i=t.parameters;if(r==="not")return i.every(function(h){return aS(h,e).length===0});if(r==="empty")return(0,bi.treeFilter)(e,function(h){return h!==e}).length===0;if(r==="first-child"){var o=(0,bi.findParentNode)(n,e),a=o.rendered,s=DIe(a,1),u=s[0];return u===e}if(r==="last-child"){var c=(0,bi.findParentNode)(n,e),l=c.rendered;return l[l.length-1]===e}if(r==="focus"){if(typeof document>"u")throw new Error('Enzyme::Selector does not support the ":focus" pseudo-element without a global `document`.');var f=(0,fW.default)();return document.activeElement&&f.nodeToHostNode(e)===document.activeElement}throw new TypeError('Enzyme::Selector does not support the "'+String(t.name)+'" pseudo-element or pseudo-class selectors.')}function uCe(e,t,n){if(e===null||typeof e=="string")return!1;switch(t.type){case JIe:return!0;case QIe:return(0,bi.hasClassName)(e,t.name);case KIe:return(0,hW.nodeHasType)(e,t.name);case ZIe:return(0,bi.nodeHasId)(e,t.name);case dW:return nF(e,t);case eCe:return nF(e,t);case rCe:case tCe:return lCe(e,t,n);default:throw new Error("Unknown token type: "+String(t.type))}}function Wx(e,t){return function(n){return e.body.every(function(r){return uCe(n,r,t)})}}function cCe(e){return e.some(function(t){return t.type!==pW})}function yW(e){if(typeof e=="string"){var t=gW(e);if(cCe(t))throw new TypeError("This method does not support complex CSS selectors");return Wx(t[0])}var n=(0,fW.default)(),r=n.isValidElementType?n.isValidElementType(e):typeof e=="function";if(r)return function(o){return n.matchesElementType(o,e)};if((typeof e>"u"?"undefined":cW(e))==="object"){if(!Array.isArray(e)&&e!==null&&Object.keys(e).length>0){var i=(0,MIe.default)(e).some(function(o){return typeof o>"u"});if(i)throw new TypeError("Enzyme::Props can’t have `undefined` values. Try using ‘findWhere()’ instead.");return function(o){return(0,bi.nodeMatchesObjectProps)(o,e)}}throw new TypeError("Enzyme::Selector does not support an array, null, or empty object as a selector")}throw new TypeError("Enzyme::Selector expects a string, object, or valid element type (Component Constructor)")}function hCe(e,t,n){return e.reduce(function(r,i){var o=(0,bi.findParentNode)(n,i);if(!o)return r;var a=(0,bi.childrenOfNode)(o),s=a.indexOf(i),u=a[s+1];return u&&t(u)&&r.push(u),r},[])}function fCe(e,t,n){return MN(function(r,i){var o=(0,bi.findParentNode)(n,i);if(!o)return r;var a=(0,bi.childrenOfNode)(o),s=a.indexOf(i),u=a.slice(s+1);return r.concat(u.filter(t))},e)}function pCe(e,t){return MN(function(n,r){return n.concat((0,bi.childrenOfNode)(r).filter(t))},e)}function dCe(e,t){return MN(function(n,r){return n.concat((0,bi.treeFilter)(r,t))},(0,NN.default)(e.map(bi.childrenOfNode)))}function aS(e,t){if(typeof e!="string"){var n=(0,UIe.default)(e);if(n.length>0)return(0,NN.default)(n.map(function(l){return aS(l.tag,t)}))}if(typeof e=="function"||(typeof e>"u"?"undefined":cW(e))==="object")return(0,bi.treeFilter)(t,yW(e));var r=[];if(typeof e=="string")for(var i=gW(e),o=0;o<i.length;){var a=i[o];if(a.type===pW){var s=Wx(a,t);r=r.concat((0,bi.treeFilter)(t,s))}else{var u=a.type;o+=1;var c=Wx(i[o],t);switch(u){case WIe:r=hCe(r,c,t);break;case qIe:r=fCe(r,c,t);break;case XIe:r=pCe(r,c);break;case $Ie:{r=dCe(r,c);break}default:throw new Error("Unknown combinator selector: "+String(u))}}o+=1}else throw new TypeError("Enzyme::Selector expects a string, object, or Component Constructor");return r}function mCe(e,t){var n=t.map(function(r){return aS(e,r)});return mW((0,NN.default)(n,1))}(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},n=function(){function ae(X,ee){for(var se=0;se<ee.length;se++){var _e=ee[se];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(X,_e.key,_e)}}return function(X,ee,se){return ee&&ae(X.prototype,ee),se&&ae(X,se),X}}(),r=nd,i=m(r),o=qy,a=m(o),s=od,u=m(s),c=$y,l=su,f=m(l),h=lu,p=yn,d=pd;function m(ae){return ae&&ae.__esModule?ae:{default:ae}}function g(ae,X,ee){return X in ae?Object.defineProperty(ae,X,{value:ee,enumerable:!0,configurable:!0,writable:!0}):ae[X]=ee,ae}function v(ae,X){if(!ae)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:ae}function b(ae,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);ae.prototype=Object.create(X&&X.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(ae,X):ae.__proto__=X)}function y(ae,X){if(!(ae instanceof X))throw new TypeError("Cannot call a class as a function")}var _=(0,c.sym)("__node__"),T=(0,c.sym)("__nodes__"),S=(0,c.sym)("__renderer__"),E=(0,c.sym)("__unrendered__"),I=(0,c.sym)("__root__"),x=(0,c.sym)("__options__"),C=(0,c.sym)("__rootNodes__"),w=(0,c.sym)("__wrappingComponent__"),B=(0,c.sym)("__linkedRoots__"),L=(0,c.sym)("__updatedBy__");function k(ae,X){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.treeFilter;return ae.flatMap(function(se){return ee(se.getNodeInternal(),X)})}function R(ae,X){return ae.wrap(ae.getNodesInternal().filter(X).filter(Boolean))}function F(ae){if(ae[I].length!==1)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return ae[I]!==ae?ae[C][0]:ae[I][_]}function U(ae,X){return(0,p.parentsOfNode)(X,F(ae))}function $(ae,X){X?Array.isArray(X)?((0,c.privateSet)(ae,_,X[0]),(0,c.privateSet)(ae,T,X)):((0,c.privateSet)(ae,_,X),(0,c.privateSet)(ae,T,[X])):((0,c.privateSet)(ae,_,null),(0,c.privateSet)(ae,T,[])),(0,c.privateSet)(ae,"length",ae[T].length)}var ie=function(){function ae(X,ee){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(y(this,ae),!globalThis.window&&!globalThis.document)throw new Error("It looks like you called `mount()` without a global document being loaded.");var _e=(0,c.makeOptions)(se);if(ee)(0,c.privateSet)(this,S,ee[S]),(0,c.privateSet)(this,I,ee),$(this,X),(0,c.privateSet)(this,C,ee[T]),(0,c.privateSet)(this,x,ee[x]),(0,c.privateSet)(this,B,[]);else{var Oe=(0,f.default)(_e);if(!Oe.isValidElement(X))throw new TypeError("ReactWrapper can only wrap valid elements");var Re=Oe.createRenderer((0,i.default)({mode:"mount"},_e));if((0,c.privateSet)(this,S,Re),Re.render(X,_e.context),(0,c.privateSet)(this,I,this),$(this,this[S].getNode()),(0,c.privateSet)(this,x,_e),(0,c.privateSet)(this,B,[]),(0,c.isCustomComponent)(_e.wrappingComponent,Oe)){if(typeof this[S].getWrappingComponentRenderer!="function")throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");(0,c.privateSet)(this,w,new oe(this,this[S].getWrappingComponentRenderer())),this[B].push(this[w])}}(0,c.privateSet)(this,E,X),(0,c.privateSet)(this,L,null)}return n(ae,[{key:"root",value:function(){function X(){return this[I]}return X}()},{key:"getNodeInternal",value:function(){function X(){if(this.length!==1)throw new Error("ReactWrapper::getNode() can only be called when wrapping one node");return this[T][0]}return X}()},{key:"getNodesInternal",value:function(){function X(){return this[T]}return X}()},{key:"getElement",value:function(){function X(){var ee=this;return this.single("getElement",function(){return(0,f.default)(ee[x]).nodeToElement(ee[_])})}return X}()},{key:"getElements",value:function(){function X(){var ee=this;return this[T].map(function(se){return(0,f.default)(ee[x]).nodeToElement(se)})}return X}()},{key:"getNode",value:function(){function X(){throw new Error("ReactWrapper::getNode() is no longer supported. Use ReactWrapper::instance() instead")}return X}()},{key:"getNodes",value:function(){function X(){throw new Error("ReactWrapper::getNodes() is no longer supported.")}return X}()},{key:"getDOMNode",value:function(){function X(){var ee=(0,f.default)(this[x]);return this.single("getDOMNode",function(se){return ee.nodeToHostNode(se,!0)})}return X}()},{key:"ref",value:function(){function X(ee){if(this[I]!==this)throw new Error("ReactWrapper::ref(refname) can only be called on the root");return this.instance().refs[ee]}return X}()},{key:"instance",value:function(){function X(){var ee=this;return this.single("instance",function(){return ee[_].instance})}return X}()},{key:"getWrappingComponent",value:function(){function X(){if(this[I]!==this)throw new Error("ReactWrapper::getWrappingComponent() can only be called on the root");if(!this[x].wrappingComponent)throw new Error("ReactWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[w]}return X}()},{key:"update",value:function(){function X(){var ee=this,se=this[I];return this!==se?se.update():($(this,this[S].getNode()),this[B].forEach(function(_e){if(_e!==ee[L]){_e[L]=ee;try{_e.update()}finally{_e[L]=null}}}),this)}return X}()},{key:"unmount",value:function(){function X(){var ee=this;if(this[I]!==this)throw new Error("ReactWrapper::unmount() can only be called on the root");return this.single("unmount",function(){ee[S].unmount(),ee.update()}),this}return X}()},{key:"mount",value:function(){function X(){var ee=this;if(this[I]!==this)throw new Error("ReactWrapper::mount() can only be called on the root");return this[S].render(this[E],this[x].context,function(){return ee.update()}),this}return X}()},{key:"setProps",value:function(){function X(ee){var se=this,_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this[I]!==this)throw new Error("ReactWrapper::setProps() can only be called on the root");if(arguments.length>1&&typeof _e!="function")throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");var Oe=(0,f.default)(this[x]);return this[E]=(0,c.cloneElement)(Oe,this[E],ee),this[S].render(this[E],null,function(){se.update(),_e&&_e()}),this}return X}()},{key:"setState",value:function(){function X(ee){var se=this,_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.instance()===null||this.getNodeInternal().nodeType!=="class")throw new Error("ReactWrapper::setState() can only be called on class components");if(arguments.length>1&&typeof _e!="function")throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.instance().setState(ee,function(){if(se.update(),_e){var Oe=(0,f.default)(se[x]),Re=se.instance();Oe.invokeSetStateCallback?Oe.invokeSetStateCallback(Re,_e):_e.call(Re)}}),this}return X}()},{key:"setContext",value:function(){function X(ee){var se=this;if(this[I]!==this)throw new Error("ReactWrapper::setContext() can only be called on the root");if(!this[x].context)throw new Error("ReactWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this[S].render(this[E],ee,function(){return se.update()}),this}return X}()},{key:"contains",value:function(){function X(ee){var se=(0,f.default)(this[x]),_e=Array.isArray(ee)?function(Oe){return(0,c.containsChildrenSubArray)(c.nodeEqual,Oe,ee.map(function(Re){return se.elementToNode(Re)}))}:function(Oe){return(0,c.nodeEqual)(se.elementToNode(ee),Oe)};return k(this,_e).length>0}return X}()},{key:"containsMatchingElement",value:function(){function X(ee){var se=(0,f.default)(this[x]).elementToNode(ee),_e=function(){function Oe(Re){return(0,c.nodeMatches)(se,Re,function(ve,Ne){return ve<=Ne})}return Oe}();return k(this,_e).length>0}return X}()},{key:"containsAllMatchingElements",value:function(){function X(ee){var se=this;if(!Array.isArray(ee))throw new TypeError("nodes should be an Array");return ee.every(function(_e){return se.containsMatchingElement(_e)})}return X}()},{key:"containsAnyMatchingElements",value:function(){function X(ee){var se=this;return Array.isArray(ee)&&ee.some(function(_e){return se.containsMatchingElement(_e)})}return X}()},{key:"equals",value:function(){function X(ee){var se=this;return this.single("equals",function(){return(0,c.nodeEqual)(se.getNodeInternal(),ee)})}return X}()},{key:"matchesElement",value:function(){function X(ee){var se=this;return this.single("matchesElement",function(){var _e=(0,f.default)(se[x]),Oe=_e.elementToNode(ee);return(0,c.nodeMatches)(Oe,se.getNodeInternal(),function(Re,ve){return Re<=ve})})}return X}()},{key:"find",value:function(){function X(ee){return this.wrap((0,d.reduceTreesBySelector)(ee,this.getNodesInternal()))}return X}()},{key:"is",value:function(){function X(ee){var se=(0,d.buildPredicate)(ee);return this.single("is",function(_e){return se(_e)})}return X}()},{key:"isEmptyRender",value:function(){function X(){var ee=this.getNodeInternal();return(0,c.renderedDive)(ee)}return X}()},{key:"filterWhere",value:function(){function X(ee){var se=this;return R(this,function(_e){return ee(se.wrap(_e))})}return X}()},{key:"filter",value:function(){function X(ee){var se=(0,d.buildPredicate)(ee);return R(this,se)}return X}()},{key:"not",value:function(){function X(ee){var se=(0,d.buildPredicate)(ee);return R(this,function(_e){return!se(_e)})}return X}()},{key:"text",value:function(){function X(){var ee=(0,f.default)(this[x]);return this.single("text",function(se){return(0,p.getTextFromHostNodes)(se,ee)})}return X}()},{key:"html",value:function(){function X(){var ee=(0,f.default)(this[x]);return this.single("html",function(se){return(0,p.getHTMLFromHostNodes)(se,ee)})}return X}()},{key:"render",value:function(){function X(){var ee=this.html();return(0,c.loadCheerioRoot)(ee)}return X}()},{key:"simulate",value:function(){function X(ee){var se=this,_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.single("simulate",function(Oe){return se[S].simulateEvent(Oe,ee,_e),se[I].update(),se})}return X}()},{key:"simulateError",value:function(){function X(ee){var se=this;if(this[I]===this)throw new Error("ReactWrapper::simulateError() may not be called on the root");return this.single("simulateError",function(_e){if(_e.nodeType==="host")throw new Error("ReactWrapper::simulateError() can only be called on custom components");var Oe=se[S];if(typeof Oe.simulateError!="function")throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var Re=F(se),ve=[_e].concat(U(se,_e));return Oe.simulateError(ve,Re,ee),se[I].update(),se})}return X}()},{key:"props",value:function(){function X(){return this.single("props",p.propsOfNode)}return X}()},{key:"state",value:function(){function X(ee){var se=this,_e=this[I]===this?this[S].getNode():this.getNodeInternal();if(this.instance()===null||_e.nodeType!=="class")throw new Error("ReactWrapper::state() can only be called on class components");var Oe=this.single("state",function(){return se.instance().state});if(typeof ee<"u"){if(Oe==null)throw new TypeError('ReactWrapper::state("'+String(ee)+'") requires that `state` not be `null` or `undefined`');return Oe[ee]}return Oe}return X}()},{key:"context",value:function(){function X(ee){var se=this;if(this[I]!==this)throw new Error("ReactWrapper::context() can only be called on the root");var _e=this.single("context",function(){return se.instance()});if(_e===null)throw new Error("ReactWrapper::context() can only be called on components with instances");var Oe=_e.context;return typeof ee<"u"?Oe[ee]:Oe}return X}()},{key:"children",value:function(){function X(ee){var se=this.flatMap(function(_e){return(0,p.childrenOfNode)(_e.getNodeInternal())});return ee?se.filter(ee):se}return X}()},{key:"childAt",value:function(){function X(ee){var se=this;return this.single("childAt",function(){return se.children().at(ee)})}return X}()},{key:"parents",value:function(){function X(ee){var se=this;return this.single("parents",function(_e){var Oe=se.wrap(U(se,_e));return ee?Oe.filter(ee):Oe})}return X}()},{key:"parent",value:function(){function X(){return this.flatMap(function(ee){return[ee.parents().get(0)]})}return X}()},{key:"closest",value:function(){function X(ee){if(this.is(ee))return this;var se=this.parents().filter(ee);return se.length>0?se.first():this.findWhere(function(){return!1})}return X}()},{key:"prop",value:function(){function X(ee){return this.props()[ee]}return X}()},{key:"invoke",value:function(){function X(ee){var se=this;return this.single("invoke",function(){var _e=se.prop(ee);if(typeof _e!="function")throw new TypeError("ReactWrapper::invoke() requires the name of a prop whose value is a function");return function(){for(var Oe=arguments.length,Re=Array(Oe),ve=0;ve<Oe;ve++)Re[ve]=arguments[ve];var Ne=typeof se[S].wrapInvoke=="function"?se[S].wrapInvoke(function(){return _e.apply(void 0,Re)}):_e.apply(void 0,Re);return se[I].update(),Ne}})}return X}()},{key:"renderProp",value:function(){function X(ee){var se=this,_e=(0,f.default)(this[x]);if(typeof _e.wrap!="function")throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",function(Oe){if(Oe.nodeType==="host")throw new TypeError("ReactWrapper::renderProp() can only be called on custom components");if(typeof ee!="string")throw new TypeError("ReactWrapper::renderProp(): `propName` must be a string");var Re=se.props();if(!(0,u.default)(Re,ee))throw new Error("ReactWrapper::renderProp(): no prop called “"+String(ee)+"“ found");var ve=Re[ee];if(typeof ve!="function")throw new TypeError("ReactWrapper::renderProp(): expected prop “"+String(ee)+"“ to contain a function, but it holds “"+(typeof ve>"u"?"undefined":t(ve))+"“");return function(){var Ne=ve.apply(void 0,arguments),He=_e.wrap(Ne);return se.wrap(He,null,se[x])}})}return X}()},{key:"key",value:function(){function X(){return this.single("key",function(ee){return ee.key===void 0?null:ee.key})}return X}()},{key:"type",value:function(){function X(){return this.single("type",function(ee){return(0,c.typeOfNode)(ee)})}return X}()},{key:"name",value:function(){function X(){var ee=(0,f.default)(this[x]);return this.single("name",function(se){return ee.displayNameOfNode?ee.displayNameOfNode(se):(0,c.displayNameOfNode)(se)})}return X}()},{key:"hasClass",value:function(){function X(ee){return typeof ee=="string"&&ee.indexOf(".")!==-1&&console.warn("It looks like you're calling `ReactWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",function(se){return(0,p.hasClassName)(se,ee)})}return X}()},{key:"forEach",value:function(){function X(ee){var se=this;return this.getNodesInternal().forEach(function(_e,Oe){return ee.call(se,se.wrap(_e),Oe)}),this}return X}()},{key:"map",value:function(){function X(ee){var se=this;return this.getNodesInternal().map(function(_e,Oe){return ee.call(se,se.wrap(_e),Oe)})}return X}()},{key:"reduce",value:function(){function X(ee){var se=this,_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce(function(Oe,Re,ve){return ee.call(se,Oe,se.wrap(Re),ve)},_e):this.getNodesInternal().reduce(function(Oe,Re,ve){return ee.call(se,ve===1?se.wrap(Oe):Oe,se.wrap(Re),ve)})}return X}()},{key:"reduceRight",value:function(){function X(ee){var se=this,_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight(function(Oe,Re,ve){return ee.call(se,Oe,se.wrap(Re),ve)},_e):this.getNodesInternal().reduceRight(function(Oe,Re,ve){return ee.call(se,ve===1?se.wrap(Oe):Oe,se.wrap(Re),ve)})}return X}()},{key:"slice",value:function(){function X(ee,se){return this.wrap(this.getNodesInternal().slice(ee,se))}return X}()},{key:"some",value:function(){function X(ee){if(this[I]===this)throw new Error("ReactWrapper::some() can not be called on the root");var se=(0,d.buildPredicate)(ee);return this.getNodesInternal().some(se)}return X}()},{key:"someWhere",value:function(){function X(ee){var se=this;return this.getNodesInternal().some(function(_e,Oe){return ee.call(se,se.wrap(_e),Oe)})}return X}()},{key:"every",value:function(){function X(ee){var se=(0,d.buildPredicate)(ee);return this.getNodesInternal().every(se)}return X}()},{key:"everyWhere",value:function(){function X(ee){var se=this;return this.getNodesInternal().every(function(_e,Oe){return ee.call(se,se.wrap(_e),Oe)})}return X}()},{key:"flatMap",value:function(){function X(ee){var se=this,_e=this.getNodesInternal().map(function(Re,ve){return ee.call(se,se.wrap(Re),ve)}),Oe=(0,a.default)(_e,1);return this.wrap(Oe.filter(Boolean))}return X}()},{key:"findWhere",value:function(){function X(ee){var se=this;return k(this,function(_e){var Oe=se.wrap(_e);return Oe.length>0&&ee(Oe)})}return X}()},{key:"get",value:function(){function X(ee){return this.getElements()[ee]}return X}()},{key:"at",value:function(){function X(ee){var se=this.getNodesInternal();return ee<se.length?this.wrap(se[ee]):this.wrap([])}return X}()},{key:"first",value:function(){function X(){return this.at(0)}return X}()},{key:"last",value:function(){function X(){return this.at(this.length-1)}return X}()},{key:"isEmpty",value:function(){function X(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}return X}()},{key:"exists",value:function(){function X(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return arguments.length>0?this.find(ee).exists():this.length>0}return X}()},{key:"single",value:function(){function X(ee,se){var _e=typeof ee=="string"?ee:"unknown",Oe=typeof se=="function"?se:ee;if(this.length!==1)throw new Error("Method “"+_e+"” is meant to be run on 1 node. "+String(this.length)+" found instead.");return Oe.call(this,this.getNodeInternal())}return X}()},{key:"wrap",value:function(){function X(ee){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[I];if(ee instanceof ae)return ee;for(var _e=arguments.length,Oe=Array(_e>2?_e-2:0),Re=2;Re<_e;Re++)Oe[Re-2]=arguments[Re];return new(Function.prototype.bind.apply(ae,[null].concat([ee,se],Oe)))}return X}()},{key:"debug",value:function(){function X(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,h.debugNodes)(this.getNodesInternal(),ee)}return X}()},{key:"tap",value:function(){function X(ee){return ee(this),this}return X}()},{key:"detach",value:function(){function X(){if(this[I]!==this)throw new Error("ReactWrapper::detach() can only be called on the root");if(!this[x].attachTo)throw new Error("ReactWrapper::detach() can only be called on when the `attachTo` option was passed into `mount()`.");this[S].unmount()}return X}()},{key:"hostNodes",value:function(){function X(){return this.filterWhere(function(ee){return typeof ee.type()=="string"})}return X}()}]),ae}(),oe=function(ae){b(X,ae);function X(ee,se){y(this,X);var _e=v(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,se.getNode(),ee));return(0,c.privateSet)(_e,I,_e),(0,c.privateSet)(_e,S,se),_e[B].push(ee),_e}return n(X,[{key:"getWrappingComponent",value:function(){function ee(){throw new TypeError("ReactWrapper::getWrappingComponent() can only be called on the root")}return ee}()}]),X}(ie);c.ITERATOR_SYMBOL&&Object.defineProperty(ie.prototype,c.ITERATOR_SYMBOL,{configurable:!0,value:function(){function ae(){var X,ee=this[T][c.ITERATOR_SYMBOL](),se=(0,f.default)(this[x]);return X={},g(X,c.ITERATOR_SYMBOL,function(){return this}),g(X,"next",function(){function _e(){var Oe=ee.next();return Oe.done?{done:!0}:{done:!1,value:se.nodeToElement(Oe.value)}}return _e}()),X}return ae}()});function me(ae,X){Object.defineProperty(ie.prototype,ae,{get:function(){function ee(){throw new Error(`
        Attempted to access ReactWrapper::`+String(ae)+`, which was previously a private property on
        Enzyme ReactWrapper instances, but is no longer and should not be relied upon.
        `+String(X)+`
      `)}return ee}(),enumerable:!1,configurable:!1})}me("node","Consider using the getElement() method instead."),me("nodes","Consider using the getElements() method instead."),me("renderer",""),me("options",""),me("complexSelector",""),e.default=ie})(FR);var LN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function Ie(te,le,ye){te===null&&(te=Function.prototype);var Z=Object.getOwnPropertyDescriptor(te,le);if(Z===void 0){var fe=Object.getPrototypeOf(te);return fe===null?void 0:Ie(fe,le,ye)}else{if("value"in Z)return Z.value;var we=Z.get;return we===void 0?void 0:we.call(ye)}}return Ie}(),n=function(){function Ie(te,le){for(var ye=0;ye<le.length;ye++){var Z=le[ye];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(te,Z.key,Z)}}return function(te,le,ye){return le&&Ie(te.prototype,le),ye&&Ie(te,ye),te}}(),r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ie){return typeof Ie}:function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie},i=nd,o=b(i),a=qy,s=b(a),u=od,c=b(u),l=aV,f=b(l),h=$y,p=su,d=b(p),m=lu,g=yn,v=pd;function b(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}}function y(Ie,te){if(!Ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:Ie}function _(Ie,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);Ie.prototype=Object.create(te&&te.prototype,{constructor:{value:Ie,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(Ie,te):Ie.__proto__=te)}function T(Ie){if(Array.isArray(Ie)){for(var te=0,le=Array(Ie.length);te<Ie.length;te++)le[te]=Ie[te];return le}else return Array.from(Ie)}function S(Ie,te){if(!(Ie instanceof te))throw new TypeError("Cannot call a class as a function")}function E(Ie,te,le){return te in Ie?Object.defineProperty(Ie,te,{value:le,enumerable:!0,configurable:!0,writable:!0}):Ie[te]=le,Ie}var I=(0,h.sym)("__node__"),x=(0,h.sym)("__nodes__"),C=(0,h.sym)("__renderer__"),w=(0,h.sym)("__unrendered__"),B=(0,h.sym)("__root__"),L=(0,h.sym)("__options__"),k=(0,h.sym)("__setState__"),R=(0,h.sym)("__rootNodes__"),F=(0,h.sym)("__childContext__"),U=(0,h.sym)("__wrappingComponent__"),$=(0,h.sym)("__primaryWrapper__"),ie=(0,h.sym)("__rootFinder__"),oe=(0,h.sym)("__providerValues__");function me(Ie,te){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.treeFilter;return Ie.flatMap(function(ye){return le(ye.getNodeInternal(),te)})}function ae(Ie,te){return Ie.wrap(Ie.getNodesInternal().filter(te).filter(Boolean))}function X(Ie){var te=Ie.lifecycleExperimental,le=Ie.disableLifecycleMethods,ye=Ie.enableComponentDidUpdateOnSetState,Z=Ie.supportPrevContextArgumentOfComponentDidUpdate,fe=Ie.lifecycles;if(typeof te<"u"&&typeof te!="boolean")throw new Error("lifecycleExperimental must be either true or false if provided");if(typeof le<"u"&&typeof le!="boolean")throw new Error("disableLifecycleMethods must be either true or false if provided");if(te!=null&&le!=null&&te===le)throw new Error("lifecycleExperimental and disableLifecycleMethods cannot be set to the same value");if(typeof ye<"u"&&fe.componentDidUpdate&&fe.componentDidUpdate.onSetState!==ye)throw new TypeError("the legacy enableComponentDidUpdateOnSetState option should be matched by `lifecycles: { componentDidUpdate: { onSetState: true } }`, for compatibility");if(typeof Z<"u"&&fe.componentDidUpdate&&fe.componentDidUpdate.prevContext!==Z)throw new TypeError("the legacy supportPrevContextArgumentOfComponentDidUpdate option should be matched by `lifecycles: { componentDidUpdate: { prevContext: true } }`, for compatibility")}function ee(Ie){var te=Ie.options,le=te.lifecycles,ye=le===void 0?{}:le,Z=te.enableComponentDidUpdateOnSetState,fe=te.supportPrevContextArgumentOfComponentDidUpdate,we=typeof Z<"u",Ce=typeof fe<"u",Ve=we||Ce?(0,o.default)({},we&&{onSetState:!!Z},Ce&&{prevContext:!!fe}):null,Ye=ye.getDerivedStateFromProps,$e=Ye?{hasShouldComponentUpdateBug:!!Ye.hasShouldComponentUpdateBug}:!1;return(0,o.default)({},ye,{setState:(0,o.default)({},ye.setState),getChildContext:(0,o.default)({calledByRenderer:!0},ye.getChildContext)},Ve&&{componentDidUpdate:Ve},{getDerivedStateFromProps:$e})}function se(Ie){return Ie.nodeType==="host"?Ie:Ie.rendered}function _e(Ie){if(Ie[B].length!==1)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return Ie[B]!==Ie?Ie[R][0]:Ie[B][I]}function Oe(Ie,te){return(0,g.parentsOfNode)(te,_e(Ie))}function Re(Ie,te){Array.isArray(te)?((0,h.privateSet)(Ie,I,te[0]),(0,h.privateSet)(Ie,x,te)):((0,h.privateSet)(Ie,I,te),(0,h.privateSet)(Ie,x,[te])),(0,h.privateSet)(Ie,"length",Ie[x].length)}function ve(Ie,te,le,ye){return!(0,f.default)(Ie,te)||!(0,f.default)(le,ye)}function Ne(Ie){return Ie&&Ie.isPureReactComponent}function He(Ie,te,le){var ye=Ie.instance,Z=Ie.type,fe=(0,h.displayNameOfNode)(Ie);if(r(Z.childContextTypes)!=="object")return console.warn(String(fe)+".getChildContext(): childContextTypes must be defined in order to use getChildContext()."),{};var we=ye.getChildContext();return Object.keys(we).forEach(function(Ce){if(!(Ce in Z.childContextTypes))throw new Error(String(fe)+'.getChildContext(): key "'+String(Ce)+'" is not defined in childContextTypes.')}),typeof le.checkPropTypes=="function"&&le.checkPropTypes(Z.childContextTypes,we,"child context",te),we}function be(Ie,te){return!(0,h.isCustomComponentElement)(Ie,te)||!Ie.type.prototype||typeof Ie.type.prototype.getChildContext!="function"?null:(0,h.spyMethod)(Ie.type.prototype,"getChildContext")}function je(Ie,te,le,ye,Z){var fe=te[C];if(Ie.options.legacyContextMode==="parent")if(Z)(0,h.privateSet)(te,F,Z.getLastReturnValue()),Z.restore();else if(typeof le.getChildContext=="function"){var we=[te[I]].concat(Oe(te,te[I])),Ce=He(ye,we,fe);(0,h.privateSet)(te,F,Ce)}else(0,h.privateSet)(te,F,null)}function qe(Ie,te){var le=Ie.type.getDerivedStateFromProps;if(typeof le=="function")var ye=Ie.instance,Z=(0,h.spyMethod)(ye,"shouldComponentUpdate",function(we){return function(){function Ce(){ye.state=te;for(var Ve=arguments.length,Ye=Array(Ve),$e=0;$e<Ve;$e++)Ye[$e]=arguments[$e];var it=we.apply(ye,Ye),ht=Ye[1];return ye.state=ht,fe(),it}return Ce}()}),fe=Z.restore}function ot(Ie,te,le){var ye=Ie[I],Z=ye&&le.nodeToElement(ye);if(Ie.type()===te)return Ie.dive();if(Z&&(0,h.isCustomComponentElement)(Z,le))return ot(Ie.dive(),te,le);for(var fe=Ie.children(),we=0;we<fe.length;we+=1){var Ce=ot(fe.at(we),te,le);if(typeof Ce<"u")return Ce}}function ut(Ie,te){var le=ot(Ie,Ie[ie],te);if(!le)throw new Error("`wrappingComponent` must render its children!");return{legacyContext:le[L].context,providerValues:le[oe]}}function Je(Ie,te,le,ye){var Z=(0,h.makeOptions)(le),fe=(0,d.default)(le);if((0,h.privateSet)(Z,oe,le[oe]),te||!(0,h.isCustomComponent)(Z.wrappingComponent,fe))return Z;if(typeof fe.wrapWithWrappingComponent!="function")throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");var we=fe.wrapWithWrappingComponent(Ie,Z),Ce=we.node,Ve=we.RootFinder,Ye=new dr(Ce,ye,Ve),$e=ut(Ye,fe),it=$e.legacyContext,ht=$e.providerValues;return(0,h.privateSet)(ye,U,Ye),(0,o.default)({},Z,E({context:(0,o.default)({},Z.context,it)},oe,ht))}function at(Ie){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=(0,o.default)({},Ie[L],te,{context:te.context||(0,o.default)({},Ie[L].context,Ie[B][F])});return(0,h.privateSet)(le,oe,Ie[B][oe]),le}var Ht=function(){function Ie(te,le){var ye=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};S(this,Ie),X(Z);var fe=Je(te,le,Z,this),we=(0,d.default)(fe),Ce=ee(we);if(le)(0,h.privateSet)(this,B,le),(0,h.privateSet)(this,w,null),(0,h.privateSet)(this,C,le[C]),Re(this,te),(0,h.privateSet)(this,L,le[L]),(0,h.privateSet)(this,R,le[x]),(0,h.privateSet)(this,oe,null);else{if(!we.isValidElement(te))throw new TypeError("ShallowWrapper can only wrap valid elements");var Ve=Ce.getChildContext.calledByRenderer?be(te,we):null;(0,h.privateSet)(this,B,this),(0,h.privateSet)(this,w,te);var Ye=we.createRenderer((0,o.default)({mode:"shallow"},fe));(0,h.privateSet)(this,C,Ye);var $e=new Map(fe[oe]||[]);this[C].render(te,fe.context,{providerValues:$e});var it=this[C].getNode();Re(this,se(it)),(0,h.privateSet)(this,L,fe),(0,h.privateSet)(this,oe,$e);var ht=it.instance;ht&&!fe.disableLifecycleMethods&&(Ce.componentDidUpdate.onSetState&&!ht[k]&&((0,h.privateSet)(ht,k,ht.setState),ht.setState=function(Dt){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return ye.setState.apply(ye,T(dt==null?[Dt]:[Dt,dt]))}),typeof ht.componentDidMount=="function"&&this[C].batchedUpdates(function(){ht.componentDidMount()}),je(we,this,ht,it,Ve))}}return n(Ie,[{key:"root",value:function(){function te(){return this[B]}return te}()},{key:"getNodeInternal",value:function(){function te(){if(this.length!==1)throw new Error("ShallowWrapper::getNode() can only be called when wrapping one node");return this[B]===this&&this.update(),this[I]}return te}()},{key:"getNodesInternal",value:function(){function te(){return this[B]===this&&this.length===1&&this.update(),this[x]}return te}()},{key:"getElement",value:function(){function te(){var le=this;return this.single("getElement",function(ye){return(0,d.default)(le[L]).nodeToElement(ye)})}return te}()},{key:"getElements",value:function(){function te(){var le=this;return this.getNodesInternal().map(function(ye){return(0,d.default)(le[L]).nodeToElement(ye)})}return te}()},{key:"getNode",value:function(){function te(){throw new Error("ShallowWrapper::getNode() is no longer supported. Use ShallowWrapper::getElement() instead")}return te}()},{key:"getNodes",value:function(){function te(){throw new Error("ShallowWrapper::getNodes() is no longer supported. Use ShallowWrapper::getElements() instead")}return te}()},{key:"instance",value:function(){function te(){if(this[B]!==this)throw new Error("ShallowWrapper::instance() can only be called on the root");return this[C].getNode().instance}return te}()},{key:"getWrappingComponent",value:function(){function te(){if(this[B]!==this)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root");if(!this[L].wrappingComponent)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[U]}return te}()},{key:"update",value:function(){function te(){if(this[B]!==this)throw new Error("ShallowWrapper::update() can only be called on the root");if(this.length!==1)throw new Error("ShallowWrapper::update() can only be called when wrapping one node");return Re(this,se(this[C].getNode())),this}return te}()},{key:"unmount",value:function(){function te(){return this[C].unmount(),this[B][U]&&this[B][U].unmount(),this}return te}()},{key:"rerender",value:function(){function te(le,ye){var Z=this,fe=(0,d.default)(this[L]);return this.single("rerender",function(){(0,h.withSetStateAllowed)(function(){var we=Z[C].getNode(),Ce=we.instance||{},Ve=we.type||{},Ye=Ce.state,$e=Ce.props||Z[w].props,it=Ce.context||Z[L].context,ht=ye||it;ye&&(Z[L]=(0,o.default)({},Z[L],{context:ht})),Z[C].batchedUpdates(function(){var Dt=ee(fe),dt=!0,pr=void 0,A=void 0;if(!Z[L].disableLifecycleMethods&&Ce){if(typeof Ce.shouldComponentUpdate=="function"){var M=Dt.getDerivedStateFromProps;M&&M.hasShouldComponentUpdateBug&&qe(we,Ye),pr=(0,h.spyMethod)(Ce,"shouldComponentUpdate")}Dt.getChildContext.calledByRenderer&&typeof Ce.getChildContext=="function"&&(A=(0,h.spyMethod)(Ce,"getChildContext"))}if(!pr&&Ne(Ce)&&(dt=ve($e,le,Ye,Ce.state)),le&&(Z[w]=(0,h.cloneElement)(fe,Z[w],le)),Z[C].render(Z[w],ht,{providerValues:Z[oe]}),pr&&(dt=pr.getLastReturnValue(),pr.restore()),dt&&!Z[L].disableLifecycleMethods&&Ce)if(je(fe,Z,Ce,we,A),Dt.getSnapshotBeforeUpdate){var H=void 0;typeof Ce.getSnapshotBeforeUpdate=="function"&&(H=Ce.getSnapshotBeforeUpdate($e,Ye)),Dt.componentDidUpdate&&typeof Ce.componentDidUpdate=="function"&&(!Ye||(0,f.default)(Ye,Z.instance().state)||typeof Ve.getDerivedStateFromProps=="function")&&Ce.componentDidUpdate($e,Ye,H)}else Dt.componentDidUpdate&&typeof Ce.componentDidUpdate=="function"&&(Dt.componentDidUpdate.prevContext?Ce.componentDidUpdate($e,Ye,it):(!Ye||(0,f.default)(Z.instance().state,Ye))&&Ce.componentDidUpdate($e,Ye));else(0,f.default)(le,Ce.props)||(Ce.props=(Object.freeze||Object)((0,o.default)({},Ce.props,le)));Z.update()})})}),this}return te}()},{key:"setProps",value:function(){function te(le){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this[B]!==this)throw new Error("ShallowWrapper::setProps() can only be called on the root");if(arguments.length>1&&typeof ye!="function")throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");return this.rerender(le),ye&&ye(),this}return te}()},{key:"setState",value:function(){function te(le){var ye=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this[B]!==this)throw new Error("ShallowWrapper::setState() can only be called on the root");if(this.instance()===null||this[C].getNode().nodeType!=="class")throw new Error("ShallowWrapper::setState() can only be called on class components");if(arguments.length>1&&typeof Z!="function")throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.single("setState",function(){(0,h.withSetStateAllowed)(function(){var fe=(0,d.default)(ye[L]),we=ee(fe),Ce=ye[C].getNode(),Ve=Ce.instance,Ye=Ve.props,$e=Ve.state,it=Ve.context,ht=typeof le=="function"?le.call(Ve,$e,Ye):le,Dt=!we.setState.skipsComponentDidUpdateOnNullish||ht!=null,dt=void 0,pr=void 0,A=!0;if(!ye[L].disableLifecycleMethods&&Ve){if(we.componentDidUpdate&&we.componentDidUpdate.onSetState&&typeof Ve.shouldComponentUpdate=="function"){var M=we.getDerivedStateFromProps;M&&M.hasShouldComponentUpdateBug&&qe(Ce,le),dt=(0,h.spyMethod)(Ve,"shouldComponentUpdate")}we.getChildContext.calledByRenderer&&typeof Ve.getChildContext=="function"&&(pr=(0,h.spyMethod)(Ve,"getChildContext"))}if(!dt&&Ne(Ve)&&(A=ve(Ye,Ve.props,$e,(0,o.default)({},$e,ht))),Ve[k]?Ve[k](ht):Ve.setState(ht),dt&&(A=dt.getLastReturnValue(),dt.restore()),Dt&&A&&!ye[L].disableLifecycleMethods&&(je(fe,ye,Ve,Ce,pr),we.componentDidUpdate&&we.componentDidUpdate.onSetState))if(we.getSnapshotBeforeUpdate&&typeof Ve.getSnapshotBeforeUpdate=="function"){var H=Ve.getSnapshotBeforeUpdate(Ye,$e);typeof Ve.componentDidUpdate=="function"&&Ve.componentDidUpdate(Ye,$e,H)}else typeof Ve.componentDidUpdate=="function"&&(we.componentDidUpdate.prevContext?Ve.componentDidUpdate(Ye,$e,it):Ve.componentDidUpdate(Ye,$e));ye.update(),Z&&(fe.invokeSetStateCallback?fe.invokeSetStateCallback(Ve,Z):Z.call(Ve))})}),this}return te}()},{key:"setContext",value:function(){function te(le){if(this[B]!==this)throw new Error("ShallowWrapper::setContext() can only be called on the root");if(!this[L].context)throw new Error("ShallowWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this.rerender(null,le)}return te}()},{key:"contains",value:function(){function te(le){var ye=(0,d.default)(this[L]);if(!(0,h.isReactElementAlike)(le,ye))throw new Error("ShallowWrapper::contains() can only be called with a ReactElement (or an array of them), a string, or a number as an argument.");var Z=Array.isArray(le)?function(fe){return(0,h.containsChildrenSubArray)(h.nodeEqual,fe,le.map(function(we){return ye.elementToNode(we)}))}:function(fe){return(0,h.nodeEqual)(ye.elementToNode(le),fe)};return me(this,Z).length>0}return te}()},{key:"containsMatchingElement",value:function(){function te(le){var ye=(0,d.default)(this[L]),Z=ye.elementToNode(le),fe=function(){function we(Ce){return(0,h.nodeMatches)(Z,Ce,function(Ve,Ye){return Ve<=Ye})}return we}();return me(this,fe).length>0}return te}()},{key:"containsAllMatchingElements",value:function(){function te(le){var ye=this;if(!Array.isArray(le))throw new TypeError("nodes should be an Array");return le.every(function(Z){return ye.containsMatchingElement(Z)})}return te}()},{key:"containsAnyMatchingElements",value:function(){function te(le){var ye=this;return Array.isArray(le)&&le.some(function(Z){return ye.containsMatchingElement(Z)})}return te}()},{key:"equals",value:function(){function te(le){var ye=this;return this.single("equals",function(){return(0,h.nodeEqual)(ye.getNodeInternal(),le)})}return te}()},{key:"matchesElement",value:function(){function te(le){var ye=this;return this.single("matchesElement",function(){var Z=(0,d.default)(ye[L]),fe=Z.elementToNode(le);return(0,h.nodeMatches)(fe,ye.getNodeInternal(),function(we,Ce){return we<=Ce})})}return te}()},{key:"find",value:function(){function te(le){return this.wrap((0,v.reduceTreesBySelector)(le,this.getNodesInternal()))}return te}()},{key:"is",value:function(){function te(le){var ye=(0,v.buildPredicate)(le);return this.single("is",function(Z){return ye(Z)})}return te}()},{key:"isEmptyRender",value:function(){function te(){var le=this.getNodesInternal();return le.every(function(ye){return(0,h.isEmptyValue)(ye)})}return te}()},{key:"filterWhere",value:function(){function te(le){var ye=this;return ae(this,function(Z){return le(ye.wrap(Z))})}return te}()},{key:"filter",value:function(){function te(le){var ye=(0,v.buildPredicate)(le);return ae(this,ye)}return te}()},{key:"not",value:function(){function te(le){var ye=(0,v.buildPredicate)(le);return ae(this,function(Z){return!ye(Z)})}return te}()},{key:"text",value:function(){function te(){return this.single("text",g.getTextFromNode)}return te}()},{key:"html",value:function(){function te(){var le=this;return this.single("html",function(ye){if(le.type()===null)return null;var Z=(0,d.default)(le[L]),fe=Z.createRenderer((0,o.default)({},le[L],{mode:"string"}));return fe.render(Z.nodeToElement(ye))})}return te}()},{key:"render",value:function(){function te(){var le=this.html();return(0,h.loadCheerioRoot)(le)}return te}()},{key:"simulate",value:function(){function te(le){for(var ye=this,Z=arguments.length,fe=Array(Z>1?Z-1:0),we=1;we<Z;we++)fe[we-1]=arguments[we];return this.single("simulate",function(Ce){var Ve;return(Ve=ye[C]).simulateEvent.apply(Ve,[Ce,le].concat(fe)),ye[B].update(),ye})}return te}()},{key:"simulateError",value:function(){function te(le){var ye=this;return this.single("simulateError",function(Z){if(Z.nodeType==="host")throw new TypeError("ShallowWrapper::simulateError() can only be called on custom components");var fe=ye[C];if(typeof fe.simulateError!="function")throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var we=_e(ye),Ce=[Z].concat(Oe(ye,Z));return fe.simulateError(Ce,we,le),ye})}return te}()},{key:"props",value:function(){function te(){return this.single("props",g.propsOfNode)}return te}()},{key:"state",value:function(){function te(le){var ye=this;if(this[B]!==this)throw new Error("ShallowWrapper::state() can only be called on the root");if(this.instance()===null||this[C].getNode().nodeType!=="class")throw new Error("ShallowWrapper::state() can only be called on class components");var Z=this.single("state",function(){return ye.instance().state});if(typeof le<"u"){if(Z==null)throw new TypeError('ShallowWrapper::state("'+String(le)+'") requires that `state` not be `null` or `undefined`');return Z[le]}return Z}return te}()},{key:"context",value:function(){function te(le){var ye=this;if(this[B]!==this)throw new Error("ShallowWrapper::context() can only be called on the root");if(!this[L].context)throw new Error("ShallowWrapper::context() can only be called on a wrapper that was originally passed a context option");if(this.instance()===null)throw new Error("ShallowWrapper::context() can only be called on wrapped nodes that have a non-null instance");var Z=this.single("context",function(){return ye.instance().context});return le?Z[le]:Z}return te}()},{key:"children",value:function(){function te(le){var ye=this.flatMap(function(Z){return(0,g.childrenOfNode)(Z.getNodeInternal())});return le?ye.filter(le):ye}return te}()},{key:"childAt",value:function(){function te(le){var ye=this;return this.single("childAt",function(){return ye.children().at(le)})}return te}()},{key:"parents",value:function(){function te(le){var ye=this;return this.single("parents",function(Z){var fe=ye.wrap(Oe(ye,Z));return le?fe.filter(le):fe})}return te}()},{key:"parent",value:function(){function te(){return this.flatMap(function(le){return[le.parents().get(0)]})}return te}()},{key:"closest",value:function(){function te(le){if(this.is(le))return this;var ye=this.parents().filter(le);return ye.length>0?ye.first():this.findWhere(function(){return!1})}return te}()},{key:"shallow",value:function(){function te(){var le=this,ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.single("shallow",function(Z){var fe=at(le,ye);return le.wrap((0,d.default)(le[L]).nodeToElement(Z),null,fe)})}return te}()},{key:"prop",value:function(){function te(le){return this.props()[le]}return te}()},{key:"invoke",value:function(){function te(le){var ye=this;return this.single("invoke",function(){var Z=ye.prop(le);if(typeof Z!="function")throw new TypeError("ShallowWrapper::invoke() requires the name of a prop whose value is a function");return function(){var fe=Z.apply(void 0,arguments);return ye[B].update(),fe}})}return te}()},{key:"renderProp",value:function(){function te(le){var ye=this,Z=(0,d.default)(this[L]);if(typeof Z.wrap!="function")throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",function(fe){if(fe.nodeType==="host")throw new TypeError("ShallowWrapper::renderProp() can only be called on custom components");if(typeof le!="string")throw new TypeError("ShallowWrapper::renderProp(): `propName` must be a string");var we=ye.props();if(!(0,c.default)(we,le))throw new Error("ShallowWrapper::renderProp(): no prop called “"+String(le)+"“ found");var Ce=we[le];if(typeof Ce!="function")throw new TypeError("ShallowWrapper::renderProp(): expected prop “"+String(le)+"“ to contain a function, but it holds “"+(typeof Ce>"u"?"undefined":r(Ce))+"“");return function(){var Ve=Ce.apply(void 0,arguments),Ye=Z.wrap(Ve);return ye.wrap(Ye,null,ye[L])}})}return te}()},{key:"key",value:function(){function te(){return this.single("key",function(le){return le.key===void 0?null:le.key})}return te}()},{key:"type",value:function(){function te(){return this.single("type",function(le){return(0,h.typeOfNode)(le)})}return te}()},{key:"name",value:function(){function te(){var le=(0,d.default)(this[L]);return this.single("name",function(ye){return le.displayNameOfNode?le.displayNameOfNode(ye):(0,h.displayNameOfNode)(ye)})}return te}()},{key:"hasClass",value:function(){function te(le){return typeof le=="string"&&le.indexOf(".")!==-1&&console.warn("It looks like you're calling `ShallowWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",function(ye){return(0,g.hasClassName)(ye,le)})}return te}()},{key:"forEach",value:function(){function te(le){var ye=this;return this.getNodesInternal().forEach(function(Z,fe){return le.call(ye,ye.wrap(Z),fe)}),this}return te}()},{key:"map",value:function(){function te(le){var ye=this;return this.getNodesInternal().map(function(Z,fe){return le.call(ye,ye.wrap(Z),fe)})}return te}()},{key:"reduce",value:function(){function te(le){var ye=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce(function(fe,we,Ce){return le.call(ye,fe,ye.wrap(we),Ce)},Z):this.getNodesInternal().reduce(function(fe,we,Ce){return le.call(ye,Ce===1?ye.wrap(fe):fe,ye.wrap(we),Ce)})}return te}()},{key:"reduceRight",value:function(){function te(le){var ye=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight(function(fe,we,Ce){return le.call(ye,fe,ye.wrap(we),Ce)},Z):this.getNodesInternal().reduceRight(function(fe,we,Ce){return le.call(ye,Ce===1?ye.wrap(fe):fe,ye.wrap(we),Ce)})}return te}()},{key:"slice",value:function(){function te(le,ye){return this.wrap(this.getNodesInternal().slice(le,ye))}return te}()},{key:"some",value:function(){function te(le){if(this[B]===this)throw new Error("ShallowWrapper::some() can not be called on the root");var ye=(0,v.buildPredicate)(le);return this.getNodesInternal().some(ye)}return te}()},{key:"someWhere",value:function(){function te(le){var ye=this;return this.getNodesInternal().some(function(Z,fe){return le.call(ye,ye.wrap(Z),fe)})}return te}()},{key:"every",value:function(){function te(le){var ye=(0,v.buildPredicate)(le);return this.getNodesInternal().every(ye)}return te}()},{key:"everyWhere",value:function(){function te(le){var ye=this;return this.getNodesInternal().every(function(Z,fe){return le.call(ye,ye.wrap(Z),fe)})}return te}()},{key:"flatMap",value:function(){function te(le){var ye=this,Z=this.getNodesInternal().map(function(we,Ce){return le.call(ye,ye.wrap(we),Ce)}),fe=(0,s.default)(Z,1);return this.wrap(fe.filter(Boolean))}return te}()},{key:"findWhere",value:function(){function te(le){var ye=this;return me(this,function(Z){var fe=ye.wrap(Z);return fe.length>0&&le(fe)})}return te}()},{key:"get",value:function(){function te(le){return this.getElements()[le]}return te}()},{key:"at",value:function(){function te(le){var ye=this.getNodesInternal();return le<ye.length?this.wrap(ye[le]):this.wrap([])}return te}()},{key:"first",value:function(){function te(){return this.at(0)}return te}()},{key:"last",value:function(){function te(){return this.at(this.length-1)}return te}()},{key:"isEmpty",value:function(){function te(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}return te}()},{key:"exists",value:function(){function te(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return arguments.length>0?this.find(le).exists():this.length>0}return te}()},{key:"single",value:function(){function te(le,ye){var Z=typeof le=="string"?le:"unknown",fe=typeof ye=="function"?ye:le;if(this.length!==1)throw new Error("Method “"+Z+"” is meant to be run on 1 node. "+String(this.length)+" found instead.");return fe.call(this,this.getNodeInternal())}return te}()},{key:"wrap",value:function(){function te(le){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[B];if(le instanceof Ie)return le;for(var Z=arguments.length,fe=Array(Z>2?Z-2:0),we=2;we<Z;we++)fe[we-2]=arguments[we];return new(Function.prototype.bind.apply(Ie,[null].concat([le,ye],fe)))}return te}()},{key:"debug",value:function(){function te(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,m.debugNodes)(this.getNodesInternal(),le)}return te}()},{key:"tap",value:function(){function te(le){return le(this),this}return te}()},{key:"dive",value:function(){function te(){var le=this,ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=(0,d.default)(this[L]),fe="dive";return this.single(fe,function(we){if(we&&we.nodeType==="host")throw new TypeError("ShallowWrapper::"+fe+"() can not be called on Host Components");var Ce=(0,d.default)(le[L]).nodeToElement(we);if(!(0,h.isCustomComponentElement)(Ce,Z))throw new TypeError("ShallowWrapper::"+fe+"() can only be called on components");var Ve=at(le,ye);return le.wrap(Ce,null,Ve)})}return te}()},{key:"hostNodes",value:function(){function te(){return this.filterWhere(function(le){return typeof le.type()=="string"})}return te}()}]),Ie}();function qt(Ie){var te=(0,d.default)(Ie[L]),le=Ie[$],ye=le[C],Z=ye.getNode(),fe=ut(Ie,te),we=fe.legacyContext,Ce=fe.providerValues,Ve=le[oe];if(le.setContext((0,o.default)({},Ie[$][L].context,we)),le[oe]=new Map([].concat(T(Ve),T(Ce))),typeof te.isContextConsumer=="function"&&te.isContextConsumer(Z.type)){var Ye=Z.type,$e=te.getProviderFromConsumer(Ye),it=Ce.get($e),ht=Ve.get($e);it!==ht&&le.rerender()}}var dr=function(Ie){_(te,Ie);function te(le,ye,Z){S(this,te);var fe=y(this,(te.__proto__||Object.getPrototypeOf(te)).call(this,le));return(0,h.privateSet)(fe,$,ye),(0,h.privateSet)(fe,ie,Z),fe}return n(te,[{key:"rerender",value:function(){function le(){for(var ye,Z=arguments.length,fe=Array(Z),we=0;we<Z;we++)fe[we]=arguments[we];var Ce=(ye=t(te.prototype.__proto__||Object.getPrototypeOf(te.prototype),"rerender",this)).call.apply(ye,[this].concat(fe));return qt(this),Ce}return le}()},{key:"setState",value:function(){function le(){for(var ye,Z=arguments.length,fe=Array(Z),we=0;we<Z;we++)fe[we]=arguments[we];var Ce=(ye=t(te.prototype.__proto__||Object.getPrototypeOf(te.prototype),"setState",this)).call.apply(ye,[this].concat(fe));return qt(this),Ce}return le}()},{key:"getWrappingComponent",value:function(){function le(){throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root")}return le}()}]),te}(Ht);h.ITERATOR_SYMBOL&&Object.defineProperty(Ht.prototype,h.ITERATOR_SYMBOL,{configurable:!0,value:function(){function Ie(){var te,le=this.getNodesInternal()[h.ITERATOR_SYMBOL](),ye=(0,d.default)(this[L]);return te={},E(te,h.ITERATOR_SYMBOL,function(){return this}),E(te,"next",function(){function Z(){var fe=le.next();return fe.done?{done:!0}:{done:!1,value:ye.nodeToElement(fe.value)}}return Z}()),te}return Ie}()});function tr(Ie,te){Object.defineProperty(Ht.prototype,Ie,{get:function(){function le(){throw new Error(`
        Attempted to access ShallowWrapper::`+String(Ie)+`, which was previously a private property on
        Enzyme ShallowWrapper instances, but is no longer and should not be relied upon.
        `+String(te)+`
      `)}return le}(),enumerable:!1,configurable:!1})}tr("node","Consider using the getElement() method instead."),tr("nodes","Consider using the getElements() method instead."),tr("renderer",""),tr("options",""),tr("complexSelector",""),e.default=Ht})(LN);var vW={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=FR,n=r(t);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){return new n.default(o,null,a)}})(vW);var bW={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=LN,n=r(t);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a){return new n.default(o,null,a)}})(bW);var _W={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=nd,n=a(t),r=su,i=a(r),o=$y;function a(u){return u&&u.__esModule?u:{default:u}}function s(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(0,i.default)(c),f=l.createRenderer((0,n.default)({mode:"string"},c)),h=f.render(u,c.context);return(0,o.loadCheerioRoot)(h)}})(_W);var gCe=FR,yCe=md(gCe),vCe=LN,bCe=md(vCe),_Ce=NX,TCe=md(_Ce),ECe=vW,SCe=md(ECe),wCe=bW,ACe=md(wCe),OCe=_W,kCe=md(OCe),xCe=nh;function md(e){return e&&e.__esModule?e:{default:e}}var ICe={render:kCe.default,shallow:ACe.default,mount:SCe.default,ShallowWrapper:bCe.default,ReactWrapper:yCe.default,configure:xCe.merge,EnzymeAdapter:TCe.default};const jN=100,CCe=(e,t,n,r)=>{for(const{viewId:i,trackId:o,track:a}of e.instance().iterateOverTracks())i===t&&o===n&&(a.options={...a.options,...r});e.setState(e.instance().state)},PCe=e=>{for(const t of e.iterateOverTracks())if(K9(e,t.viewId,t.trackId).activeTransitions>0)return!0;return!1},TW=(e,t)=>{PCe(e)?setTimeout(()=>{TW(e,t)},jN):t()},BN=e=>{ty>0?setTimeout(()=>BN(e),jN):e()},DCe=e=>{for(const t of e.iterateOverTracks()){let n=BR(e,t.viewId,t.trackId);if(!(!t.track.server&&!t.track.tilesetUid&&!(t.track.data&&t.track.data.type==="divided")))if(t.track.data&&t.track.data.type==="divided"||t.track.server&&t.track.tilesetUid){if(n.originalTrack&&(n=n.originalTrack),!(n.tilesetInfo||n.chromInfo)||n.fetching&&n.fetching.size)return!0}else throw Error('"server" and "tilesetUid" belong together')}return!1},$_=(e,t)=>{DCe(e)?setTimeout(()=>{$_(e,t)},jN):t()},EW=(e,t,n,r,i={})=>{const{style:o="width:800px; background-color: lightgreen;",bounded:a=!1,extendedDelay:s=!1}=i;t&&(t.unmount(),t.detach()),e&&globalThis.document.body.removeChild(e);const u=globalThis.document.createElement("div");globalThis.document.body.appendChild(u),u.setAttribute("style",o),u.setAttribute("id","simple-hg-component");const c=ICe.mount(O.createElement(kv,{options:{bounded:a},viewConfig:n}),{attachTo:u});return c.update(),BN(()=>{if(s){const l=()=>setTimeout(()=>{r()},1e3);$_(c.instance(),l)}else $_(c.instance(),r)}),[u,c]},RCe=e=>{e&&(Fn.unmountComponentAtNode(e),document.body.removeChild(e))};async function NCe(e,t,n,r){let i;return await new Promise(o=>{i=EW(e,t,n,o,r)}),i}var Cp=0,km=0,rm=0,SW=1e3,K_,xm,Q_=0,Ec=0,sS=0,hy=typeof performance=="object"&&performance.now?performance:Date,wW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function FN(){return Ec||(wW(MCe),Ec=hy.now()+sS)}function MCe(){Ec=0}function Z_(){this._call=this._time=this._next=null}Z_.prototype=AW.prototype={constructor:Z_,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?FN():+n)+(t==null?0:+t),!this._next&&xm!==this&&(xm?xm._next=this:K_=this,xm=this),this._call=e,this._time=n,qx()},stop:function(){this._call&&(this._call=null,this._time=1/0,qx())}};function AW(e,t,n){var r=new Z_;return r.restart(e,t,n),r}function LCe(){FN(),++Cp;for(var e=K_,t;e;)(t=Ec-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Cp}function iF(){Ec=(Q_=hy.now())+sS,Cp=km=0;try{LCe()}finally{Cp=0,BCe(),Ec=0}}function jCe(){var e=hy.now(),t=e-Q_;t>SW&&(sS-=t,Q_=e)}function BCe(){for(var e,t=K_,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:K_=n);xm=e,qx(r)}function qx(e){if(!Cp){km&&(km=clearTimeout(km));var t=e-Ec;t>24?(e<1/0&&(km=setTimeout(iF,e-hy.now()-sS)),rm&&(rm=clearInterval(rm))):(rm||(Q_=hy.now(),rm=setInterval(jCe,SW)),Cp=1,wW(iF))}}function oF(e,t,n){var r=new Z_;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var FCe=td("start","end","cancel","interrupt"),GCe=[],OW=0,$x=1,Kx=2,p0=3,aF=4,Qx=5,d0=6;function lS(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;HCe(e,n,{name:t,index:r,group:i,on:FCe,tween:GCe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:OW})}function GN(e,t){var n=aa(e,t);if(n.state>OW)throw new Error("too late; already scheduled");return n}function $a(e,t){var n=aa(e,t);if(n.state>p0)throw new Error("too late; already running");return n}function aa(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function HCe(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=AW(o,0,n.time);function o(c){n.state=$x,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var l,f,h,p;if(n.state!==$x)return u();for(l in r)if(p=r[l],p.name===n.name){if(p.state===p0)return oF(a);p.state===aF?(p.state=d0,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[l]):+l<t&&(p.state=d0,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[l])}if(oF(function(){n.state===p0&&(n.state=aF,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Kx,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Kx){for(n.state=p0,i=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(p=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function s(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Qx,1),f=-1,h=i.length;++f<h;)i[f].call(e,l);n.state===Qx&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=d0,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function dg(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Kx&&r.state<Qx,r.state=d0,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function UCe(e){return this.each(function(){dg(this,e)})}function zCe(e,t){var n,r;return function(){var i=$a(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function VCe(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=$a(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function YCe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=aa(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?zCe:VCe)(n,e,t))}function HN(e,t,n){var r=e._id;return e.each(function(){var i=$a(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return aa(i,r).value[t]}}function kW(e,t){var n;return(typeof t=="number"?yo:t instanceof fn?ip:(n=fn(t))?(t=n,ip):CD)(e,t)}function XCe(e){return function(){this.removeAttribute(e)}}function WCe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qCe(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function $Ce(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function KCe(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function QCe(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function ZCe(e,t){var n=Vc(e),r=n==="transform"?Az:kW;return this.attrTween(e,typeof t=="function"?(n.local?QCe:KCe)(n,r,HN(this,"attr."+e,t)):t==null?(n.local?WCe:XCe)(n):(n.local?$Ce:qCe)(n,r,t))}function JCe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ePe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tPe(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ePe(e,o)),n}return i._value=t,i}function rPe(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&JCe(e,o)),n}return i._value=t,i}function nPe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Vc(e);return this.tween(n,(r.local?tPe:rPe)(r,t))}function iPe(e,t){return function(){GN(this,e).delay=+t.apply(this,arguments)}}function oPe(e,t){return t=+t,function(){GN(this,e).delay=t}}function aPe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iPe:oPe)(t,e)):aa(this.node(),t).delay}function sPe(e,t){return function(){$a(this,e).duration=+t.apply(this,arguments)}}function lPe(e,t){return t=+t,function(){$a(this,e).duration=t}}function uPe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sPe:lPe)(t,e)):aa(this.node(),t).duration}function cPe(e,t){if(typeof t!="function")throw new Error;return function(){$a(this,e).ease=t}}function hPe(e){var t=this._id;return arguments.length?this.each(cPe(t,e)):aa(this.node(),t).ease}function fPe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;$a(this,e).ease=n}}function pPe(e){if(typeof e!="function")throw new Error;return this.each(fPe(this._id,e))}function dPe(e){typeof e!="function"&&(e=BE(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,c=0;c<a;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&s.push(u);return new za(r,this._parents,this._name,this._id)}function mPe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=t[s],c=n[s],l=u.length,f=a[s]=new Array(l),h,p=0;p<l;++p)(h=u[p]||c[p])&&(f[p]=h);for(;s<r;++s)a[s]=t[s];return new za(a,this._parents,this._name,this._id)}function gPe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yPe(e,t,n){var r,i,o=gPe(t)?GN:$a;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function vPe(e,t){var n=this._id;return arguments.length<2?aa(this.node(),n).on.on(e):this.each(yPe(n,e,t))}function bPe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _Pe(){return this.on("end.remove",bPe(this._id))}function TPe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Py(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,c=o[a]=new Array(u),l,f,h=0;h<u;++h)(l=s[h])&&(f=e.call(l,l.__data__,h,s))&&("__data__"in l&&(f.__data__=l.__data__),c[h]=f,lS(c[h],t,n,h,c,aa(l,n)));return new za(o,this._parents,t,n)}function EPe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jE(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],c=u.length,l,f=0;f<c;++f)if(l=u[f]){for(var h=e.call(l,l.__data__,f,u),p,d=aa(l,n),m=0,g=h.length;m<g;++m)(p=h[m])&&lS(p,t,n,m,h,d);o.push(h),a.push(l)}return new za(o,a,t,n)}var SPe=ta.prototype.constructor;function wPe(){return new SPe(this._groups,this._parents)}function APe(e,t){var n,r,i;return function(){var o=ko(this,e),a=(this.style.removeProperty(e),ko(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function xW(e){return function(){this.style.removeProperty(e)}}function OPe(e,t,n){var r,i=n+"",o;return function(){var a=ko(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function kPe(e,t,n){var r,i,o;return function(){var a=ko(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),ko(this,e))),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}function xPe(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var u=$a(this,e),c=u.on,l=u.value[o]==null?s||(s=xW(t)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(a,i=l),u.on=r}}function IPe(e,t,n){var r=(e+="")=="transform"?wz:kW;return t==null?this.styleTween(e,APe(e,r)).on("end.style."+e,xW(e)):typeof t=="function"?this.styleTween(e,kPe(e,r,HN(this,"style."+e,t))).each(xPe(this._id,e)):this.styleTween(e,OPe(e,r,t),n).on("end.style."+e,null)}function CPe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function PPe(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&CPe(e,a,n)),r}return o._value=t,o}function DPe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,PPe(e,t,n??""))}function RPe(e){return function(){this.textContent=e}}function NPe(e){return function(){var t=e(this);this.textContent=t??""}}function MPe(e){return this.tween("text",typeof e=="function"?NPe(HN(this,"text",e)):RPe(e==null?"":e+""))}function LPe(e){return function(t){this.textContent=e.call(this,t)}}function jPe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&LPe(i)),t}return r._value=e,r}function BPe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jPe(e))}function FPe(){for(var e=this._name,t=this._id,n=CW(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,c=0;c<s;++c)if(u=a[c]){var l=aa(u,t);lS(u,e,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new za(r,this._parents,e,n)}function GPe(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var c=$a(this,r),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),i===0&&o()})}var HPe=0;function za(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function IW(e){return ta().transition(e)}function CW(){return++HPe}var rs=ta.prototype;za.prototype=IW.prototype={constructor:za,select:TPe,selectAll:EPe,selectChild:rs.selectChild,selectChildren:rs.selectChildren,filter:dPe,merge:mPe,selection:wPe,transition:FPe,call:rs.call,nodes:rs.nodes,node:rs.node,size:rs.size,empty:rs.empty,each:rs.each,on:vPe,attr:ZCe,attrTween:nPe,style:IPe,styleTween:DPe,text:MPe,textTween:BPe,remove:_Pe,tween:YCe,delay:aPe,duration:uPe,ease:hPe,easeVarying:pPe,end:GPe,[Symbol.iterator]:rs[Symbol.iterator]};function UPe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zPe={time:null,delay:0,duration:250,ease:UPe};function VPe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function YPe(e){var t,n;e instanceof za?(t=e._id,e=e._name):(t=CW(),(n=zPe).time=FN(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,c=0;c<s;++c)(u=a[c])&&lS(u,e,t,c,a,n||VPe(u,t));return new za(r,this._parents,e,t)}ta.prototype.interrupt=UCe;ta.prototype.transition=YPe;var XPe=[null];function WPe(e,t){var n=e.__transition,r,i;if(n){t=t==null?null:t+"";for(i in n)if((r=n[i]).state>$x&&r.name===t)return new za([[e]],XPe,t,+i)}return null}const qPe=Object.freeze(Object.defineProperty({__proto__:null,active:WPe,interrupt:dg,transition:IW},Symbol.toStringTag,{value:"Module"})),mb=e=>()=>e;function $Pe(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Da(e,t,n){this.k=e,this.x=t,this.y=n}Da.prototype={constructor:Da,scale:function(e){return e===1?this:new Da(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Da(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Tn=new Da(1,0,0);PW.prototype=Da.prototype;function PW(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Tn;return e.__zoom}function WA(e){e.stopImmediatePropagation()}function nm(e){e.preventDefault(),e.stopImmediatePropagation()}function KPe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function QPe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sF(){return this.__zoom||Tn}function ZPe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function JPe(){return navigator.maxTouchPoints||"ontouchstart"in this}function eDe(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Zx(){var e=KPe,t=QPe,n=eDe,r=ZPe,i=JPe,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Loe,c=td("start","zoom","end"),l,f,h,p=500,d=150,m=0,g=10;function v(k){k.property("__zoom",sF).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",C).filter(i).on("touchstart.zoom",w).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(k,R,F,U){var $=k.selection?k.selection():k;$.property("__zoom",sF),k!==$?T(k,R,F,U):$.interrupt().each(function(){S(this,arguments).event(U).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},v.scaleBy=function(k,R,F,U){v.scaleTo(k,function(){var $=this.__zoom.k,ie=typeof R=="function"?R.apply(this,arguments):R;return $*ie},F,U)},v.scaleTo=function(k,R,F,U){v.transform(k,function(){var $=t.apply(this,arguments),ie=this.__zoom,oe=F==null?_($):typeof F=="function"?F.apply(this,arguments):F,me=ie.invert(oe),ae=typeof R=="function"?R.apply(this,arguments):R;return n(y(b(ie,ae),oe,me),$,a)},F,U)},v.translateBy=function(k,R,F,U){v.transform(k,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof F=="function"?F.apply(this,arguments):F),t.apply(this,arguments),a)},null,U)},v.translateTo=function(k,R,F,U,$){v.transform(k,function(){var ie=t.apply(this,arguments),oe=this.__zoom,me=U==null?_(ie):typeof U=="function"?U.apply(this,arguments):U;return n(Tn.translate(me[0],me[1]).scale(oe.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof F=="function"?-F.apply(this,arguments):-F),ie,a)},U,$)};function b(k,R){return R=Math.max(o[0],Math.min(o[1],R)),R===k.k?k:new Da(R,k.x,k.y)}function y(k,R,F){var U=R[0]-F[0]*k.k,$=R[1]-F[1]*k.k;return U===k.x&&$===k.y?k:new Da(k.k,U,$)}function _(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function T(k,R,F,U){k.on("start.zoom",function(){S(this,arguments).event(U).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(U).end()}).tween("zoom",function(){var $=this,ie=arguments,oe=S($,ie).event(U),me=t.apply($,ie),ae=F==null?_(me):typeof F=="function"?F.apply($,ie):F,X=Math.max(me[1][0]-me[0][0],me[1][1]-me[0][1]),ee=$.__zoom,se=typeof R=="function"?R.apply($,ie):R,_e=u(ee.invert(ae).concat(X/ee.k),se.invert(ae).concat(X/se.k));return function(Oe){if(Oe===1)Oe=se;else{var Re=_e(Oe),ve=X/Re[2];Oe=new Da(ve,ae[0]-Re[0]*ve,ae[1]-Re[1]*ve)}oe.zoom(null,Oe)}})}function S(k,R,F){return!F&&k.__zooming||new E(k,R)}function E(k,R){this.that=k,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(k,R),this.taps=0}E.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,R){return this.mouse&&k!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var R=Wt(this.that).datum();c.call(k,this.that,new $Pe(k,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:c}),R)}};function I(k,...R){if(!e.apply(this,arguments))return;var F=S(this,R).event(k),U=this.__zoom,$=Math.max(o[0],Math.min(o[1],U.k*Math.pow(2,r.apply(this,arguments)))),ie=yr(k);if(F.wheel)(F.mouse[0][0]!==ie[0]||F.mouse[0][1]!==ie[1])&&(F.mouse[1]=U.invert(F.mouse[0]=ie)),clearTimeout(F.wheel);else{if(U.k===$)return;F.mouse=[ie,U.invert(ie)],dg(this),F.start()}nm(k),F.wheel=setTimeout(oe,d),F.zoom("mouse",n(y(b(U,$),F.mouse[0],F.mouse[1]),F.extent,a));function oe(){F.wheel=null,F.end()}}function x(k,...R){if(h||!e.apply(this,arguments))return;var F=k.currentTarget,U=S(this,R,!0).event(k),$=Wt(k.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",X,!0),ie=yr(k,F),oe=k.clientX,me=k.clientY;f1(k.view),WA(k),U.mouse=[ie,this.__zoom.invert(ie)],dg(this),U.start();function ae(ee){if(nm(ee),!U.moved){var se=ee.clientX-oe,_e=ee.clientY-me;U.moved=se*se+_e*_e>m}U.event(ee).zoom("mouse",n(y(U.that.__zoom,U.mouse[0]=yr(ee,F),U.mouse[1]),U.extent,a))}function X(ee){$.on("mousemove.zoom mouseup.zoom",null),p1(ee.view,U.moved),nm(ee),U.event(ee).end()}}function C(k,...R){if(e.apply(this,arguments)){var F=this.__zoom,U=yr(k.changedTouches?k.changedTouches[0]:k,this),$=F.invert(U),ie=F.k*(k.shiftKey?.5:2),oe=n(y(b(F,ie),U,$),t.apply(this,R),a);nm(k),s>0?Wt(this).transition().duration(s).call(T,oe,U,k):Wt(this).call(v.transform,oe,U,k)}}function w(k,...R){if(e.apply(this,arguments)){var F=k.touches,U=F.length,$=S(this,R,k.changedTouches.length===U).event(k),ie,oe,me,ae;for(WA(k),oe=0;oe<U;++oe)me=F[oe],ae=yr(me,this),ae=[ae,this.__zoom.invert(ae),me.identifier],$.touch0?!$.touch1&&$.touch0[2]!==ae[2]&&($.touch1=ae,$.taps=0):($.touch0=ae,ie=!0,$.taps=1+!!l);l&&(l=clearTimeout(l)),ie&&($.taps<2&&(f=ae[0],l=setTimeout(function(){l=null},p)),dg(this),$.start())}}function B(k,...R){if(this.__zooming){var F=S(this,R).event(k),U=k.changedTouches,$=U.length,ie,oe,me,ae;for(nm(k),ie=0;ie<$;++ie)oe=U[ie],me=yr(oe,this),F.touch0&&F.touch0[2]===oe.identifier?F.touch0[0]=me:F.touch1&&F.touch1[2]===oe.identifier&&(F.touch1[0]=me);if(oe=F.that.__zoom,F.touch1){var X=F.touch0[0],ee=F.touch0[1],se=F.touch1[0],_e=F.touch1[1],Oe=(Oe=se[0]-X[0])*Oe+(Oe=se[1]-X[1])*Oe,Re=(Re=_e[0]-ee[0])*Re+(Re=_e[1]-ee[1])*Re;oe=b(oe,Math.sqrt(Oe/Re)),me=[(X[0]+se[0])/2,(X[1]+se[1])/2],ae=[(ee[0]+_e[0])/2,(ee[1]+_e[1])/2]}else if(F.touch0)me=F.touch0[0],ae=F.touch0[1];else return;F.zoom("touch",n(y(oe,me,ae),F.extent,a))}}function L(k,...R){if(this.__zooming){var F=S(this,R).event(k),U=k.changedTouches,$=U.length,ie,oe;for(WA(k),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),ie=0;ie<$;++ie)oe=U[ie],F.touch0&&F.touch0[2]===oe.identifier?delete F.touch0:F.touch1&&F.touch1[2]===oe.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(oe=yr(oe,this),Math.hypot(f[0]-oe[0],f[1]-oe[1])<g)){var me=Wt(this).on("dblclick.zoom");me&&me.apply(this,arguments)}}}return v.wheelDelta=function(k){return arguments.length?(r=typeof k=="function"?k:mb(+k),v):r},v.filter=function(k){return arguments.length?(e=typeof k=="function"?k:mb(!!k),v):e},v.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:mb(!!k),v):i},v.extent=function(k){return arguments.length?(t=typeof k=="function"?k:mb([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),v):t},v.scaleExtent=function(k){return arguments.length?(o[0]=+k[0],o[1]=+k[1],v):[o[0],o[1]]},v.translateExtent=function(k){return arguments.length?(a[0][0]=+k[0][0],a[1][0]=+k[1][0],a[0][1]=+k[0][1],a[1][1]=+k[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(k){return arguments.length?(n=k,v):n},v.duration=function(k){return arguments.length?(s=+k,v):s},v.interpolate=function(k){return arguments.length?(u=k,v):u},v.on=function(){var k=c.on.apply(c,arguments);return k===c?v:k},v.clickDistance=function(k){return arguments.length?(m=(k=+k)*k,v):Math.sqrt(m)},v.tapDistance=function(k){return arguments.length?(g=+k,v):g},v}const tDe=Object.freeze(Object.defineProperty({__proto__:null,ZoomTransform:Da,zoom:Zx,zoomIdentity:Tn,zoomTransform:PW},Symbol.toStringTag,{value:"Module"}));function rDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nDe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oDe(r.key),r)}}function iDe(e,t,n){return t&&nDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oDe(e){var t=aDe(e,"string");return typeof t=="symbol"?t:String(t)}function aDe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}const sDe=40,Ch=0,im=5,lF=4;let uS=function(){function e(t){rDe(this,e),this.pAxis=new Ue.PIXI.Graphics,this.track=t,this.axisTexts=[],this.axisTextFontFamily="Arial",this.axisTextFontSize=10}return iDe(e,[{key:"startAxis",value:function(t){const n=this.pAxis;n.clear(),n.lineStyle(1,this.track.getTheme()===wr?ct("#ffffff"):0,1),n.moveTo(0,0),n.lineTo(0,t)}},{key:"createAxisTexts",value:function(t,n){this.tickValues=this.calculateAxisTickValues(t,n);let r=0;const i=this.track.getTheme()===wr?"white":"black";for(!this.track.options||!this.track.options.axisLabelFormatting||this.track.options.axisLabelFormatting==="scientific"?this.tickFormat=no(".2"):this.tickFormat=o=>o;r<this.tickValues.length;){const o=this.tickValues[r];for(;this.axisTexts.length<=r;){const a=new Ue.PIXI.Text(o,{fontSize:`${this.axisTextFontSize}px`,fontFamily:this.axisTextFontFamily,fill:i});this.axisTexts.push(a),this.pAxis.addChild(a)}this.axisTexts[r].text=this.tickFormat(o),this.axisTexts[r].anchor.y=.5,this.axisTexts[r].anchor.x=.5,r++}for(;this.axisTexts.length>this.tickValues.length;){const o=this.axisTexts.pop();this.pAxis.removeChild(o),o.destroy(!0)}}},{key:"calculateAxisTickValues",value:function(t,n){const r=Math.max(Math.ceil(n/sDe),1);let i=t.ticks(r);return i.length<1&&(i=t.ticks(r+1),i.length>1&&(i=[i[0]])),i}},{key:"drawAxisLeft",value:function(t,n){this.startAxis(n),this.createAxisTexts(t,n);const r=this.pAxis;this.track.getTheme()===wr&&r.lineStyle(r.lineWidth||r._lineStyle.width,ct("#ffffff")),r.moveTo(0,0),r.lineTo(-5,0),r.moveTo(0,n),r.lineTo(-5,n);for(let i=0;i<this.axisTexts.length;i++){const o=this.tickValues[i];this.axisTexts[i].x=-(Ch+im+lF+this.axisTexts[i].width/2),this.axisTexts[i].y=t(o),r.moveTo(-0,t(o)),r.lineTo(-5,t(o)),this.track&&this.track.flipText&&(this.axisTexts[i].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"drawAxisRight",value:function(t,n){this.startAxis(n),this.createAxisTexts(t,n);const r=this.pAxis;this.track.getTheme()===wr&&r.lineStyle(r.lineWidth||r._lineStyle.width,ct("#ffffff")),r.moveTo(0,0),r.lineTo(Ch+im,0),r.moveTo(0,n),r.lineTo(Ch+im,n);for(let i=0;i<this.axisTexts.length;i++){const o=this.tickValues[i];this.axisTexts[i].x=Ch+im+lF+this.axisTexts[i].width/2,this.axisTexts[i].y=t(o),r.moveTo(Ch,t(o)),r.lineTo(Ch+im,t(o)),this.track&&this.track.flipText&&(this.axisTexts[i].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"hideOverlappingAxisLabels",value:function(){for(let t=this.axisTexts.length-1;t>=0;t--)this.axisTexts[t].visible=!0;for(let t=this.axisTexts.length-1;t>=0;t--){if(!this.axisTexts[t].visible)continue;let n=t-1;for(;n>=0&&this.axisTexts[t].y+this.axisTexts[t].height/2>this.axisTexts[n].y-this.axisTexts[n].height/2;)this.axisTexts[n].visible=!1,n-=1}}},{key:"exportVerticalAxis",value:function(t){const n=document.createElement("g");n.setAttribute("class","axis-vertical");let r="black";this.track&&this.track.options.lineStrokeColor&&(r=this.track.options.lineStrokeColor),this.track.getTheme()===wr&&(r="#cccccc");const i=document.createElement("path");return i.setAttribute("fill","transparent"),i.setAttribute("stroke",r),i.setAttribute("id","axis-line"),i.setAttribute("d",`M0,0 L0,${t}`),n.appendChild(i),n}},{key:"createAxisSVGLine",value:function(){let t="black";this.track&&this.track.options.lineStrokeColor&&(t=this.track.options.lineStrokeColor),this.track.getTheme()===wr&&(t="#cccccc");const n=document.createElement("path");return n.setAttribute("id","tick-mark"),n.setAttribute("fill","transparent"),n.setAttribute("stroke",t),n}},{key:"createAxisSVGText",value:function(t){const n=document.createElement("text");return n.innerHTML=t,n.setAttribute("id","axis-text"),n.setAttribute("text-anchor","middle"),n.setAttribute("font-family",this.axisTextFontFamily),n.setAttribute("font-size",this.axisTextFontSize),n.setAttribute("dy",this.axisTextFontSize/2-2),n}},{key:"exportAxisLeftSVG",value:function(t,n){const r=this.exportVerticalAxis(n),i=this.createAxisSVGLine();r.appendChild(i),i.setAttribute("d","M0,0 L5,0");const o=this.createAxisSVGLine();r.appendChild(o),o.setAttribute("d",`M0,${n} L5,${n}`);for(let a=0;a<this.axisTexts.length;a++){const s=this.tickValues[a],u=this.axisTexts[a],c=this.createAxisSVGLine();r.appendChild(c),c.setAttribute("d",`M0,${t(s)} L5,${t(s)}`);const l=document.createElement("g");if(r.appendChild(l),u.visible){const f=this.createAxisSVGText(u.text);l.appendChild(f)}l.setAttribute("transform",`translate(${u.position.x},${u.position.y})
             scale(${u.scale.x},${u.scale.y})`)}return r}},{key:"exportAxisRightSVG",value:function(t,n){const r=this.exportVerticalAxis(n),i=this.createAxisSVGLine();r.appendChild(i),i.setAttribute("d","M0,0 L-5,0");const o=this.createAxisSVGLine();r.appendChild(o),o.setAttribute("d",`M0,${n} L-5,${n}`);for(let a=0;a<this.axisTexts.length;a++){const s=this.tickValues[a],u=this.axisTexts[a],c=this.createAxisSVGLine();r.appendChild(c),c.setAttribute("d",`M0,${t(s)} L-5,${t(s)}`);const l=document.createElement("g");if(r.appendChild(l),u.visible){const f=this.createAxisSVGText(u.text);l.appendChild(f)}l.setAttribute("transform",`translate(${u.position.x},${u.position.y})
             scale(${u.scale.x},${u.scale.y})`)}return r}},{key:"clearAxis",value:function(){const t=this.pAxis;for(;this.axisTexts.length;){const n=this.axisTexts.pop();t.removeChild(n)}t.clear()}}]),e}();const DW=(e,t)=>{const n=[];for(let r=e;r<t;r++)n.push(r);return n},lDe=(e,t)=>{const n=e.map(a=>+a).sort((a,s)=>s-a),r=t.range()[1]-t.range()[0],i=n.map(a=>(t.domain()[1]-t.domain()[0])/a).map(a=>a/r),o=i.filter(a=>a<1);return o.length===0?0:i.indexOf(o[o.length-1])},uDe=(e,t,n,r)=>{const i=e.range()[1]-e.range()[0],o=Math.max((n-t)/(e.domain()[1]-e.domain()[0]),1),a=Math.max(0,Math.ceil(Math.log(i/384)/Math.LN2));let s=Math.round(Math.log(o)/Math.LN2)+a,u=0;return r&&(u=Math.floor(Math.log(256)/Math.log(2)-Math.log(r)/Math.log(2))),s+=u,s},RW=(e,t,n)=>{if(typeof n>"u"&&(n=Number.MAX_SAFE_INTEGER),e.resolutions)return lDe(e.resolutions,t,e.min_pos[0],e.max_pos[0]-2);const r=uDe(t,e.min_pos[0],e.max_pos[0],e.bins_per_dimension||e.tile_size),i=Math.min(r,n);return Math.max(i,0)},cDe=(e,t,n,r,i,o)=>{const a=Math.min(e,i),s=o/2**a;return DW(Math.max(0,Math.floor((t.domain()[0]-n)/s)),Math.min(2**a,Math.ceil((t.domain()[1]-n-1e-7)/s)))},hDe=(e,t,n,r=Number.MAX_VALUE,i=256)=>{const o=e*i,a=20,s=Math.max(0,Math.floor((t.domain()[0]-n)/o)),u=Math.ceil(Math.min(r,t.domain()[1]-n-1e-7)/o);let c=DW(s,u);return c.length>a&&(console.warn(`Too many visible tiles: ${c.length} truncating to ${a}`),c=c.slice(0,a)),c},fDe=(e,t)=>{if(!e)return[];const n=RW(e,t,e.max_zoom);if(e.resolutions){const r=e.resolutions.map(i=>+i).sort((i,o)=>o-i);return hDe(r[n],t,e.min_pos[0],e.max_pos[0]).map(i=>[n,i])}return cDe(n,t,e.min_pos[0],e.max_pos[0],e.max_zoom,e.max_width).map(r=>[n,r])},pDe=(e,t)=>{if(e.axis||(e.axis=new uS(e),e.pBase.addChild(e.axis.pAxis)),!e.options.axisPositionVertical&&!e.options.axisPositionHorizontal){e.axis.clearAxis();return}if(e.options.axisPositionVertical&&e.options.axisPositionVertical==="hidden"){e.axis.clearAxis();return}if(e.options.axisPositionHorizontal&&e.options.axisPositionHorizontal==="hidden"){e.axis.clearAxis();return}const n=e.options.axisMargin||0;e.options.axisPositionHorizontal==="left"||e.options.axisPositionVertical==="top"?(e.axis.pAxis.position.x=e.position[0]+n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1])):e.options.axisPositionHorizontal==="outsideLeft"||e.options.axisPositionVertical==="outsideTop"?(e.axis.pAxis.position.x=e.position[0]+n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):e.options.axisPositionHorizontal==="right"||e.options.axisPositionVertical==="bottom"?(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):(e.options.axisPositionHorizontal==="outsideRight"||e.options.axisPositionVertical==="outsideBottom")&&(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1]))},dDe=(e,t)=>{const n=e.valueScaleTransform,{y:r,k:i}=n,o=e.dimensions[1];r+t/i>-(i-1)*o&&r+t/i<0&&(e.valueScaleTransform=n.translate(0,t/i)),Object.values(e.fetchedTiles).forEach(a=>{a.graphics.position.y=e.valueScaleTransform.y}),e.animate()},mDe=(e,t,n,r)=>{const i=n.k,o=n.y,a=(e-o)/i,s=Math.max(i/t,1);let u=i*a+o-s*a;return u=Math.max(u,-(s-1)*r),u=Math.min(u,0),Tn.translate(0,u).scale(s)},gDe=(e,t)=>{const n=+t.split(".")[0],r=+t.split(".")[1],i=e.max_width,o=e.min_pos[0],a=i/2**n;return{tileX:o+r*a,tileWidth:a}};function yDe(e,t){Object.values(e.fetchedTiles).forEach(n=>{if(!n.drawnAtScale)return;const r=n.drawnAtScale.range(),i=e._xScale.range();if(r[0]!==i[0]||r[1]!==i[1]){e.renderTile(n);return}const o=(n.drawnAtScale.domain()[1]-n.drawnAtScale.domain()[0])/(e._xScale.domain()[1]-e._xScale.domain()[0]);if(o>2||o<.5)e.renderTile(n);else{const a=e._xScale.domain().map(n.drawnAtScale)[0];for(const s of t)s(n).scale.x=o,s(n).x=-a*o}})}const tc={calculate1DVisibleTiles:fDe,calculate1DZoomLevel:RW,drawAxis:pDe,movedY:dDe,getTilePosAndDimensions:gDe,stretchRects:yDe,zoomedY:mDe},vDe=Object.freeze(Object.defineProperty({__proto__:null,DenseDataExtrema1D:N_,DenseDataExtrema2D:LR,IS_TRACK_RANGE_SELECTABLE:rd,absToChr:pn,accessorTransposition:o9,addArrays:a9,addClass:jfe,base64ToCanvas:Bfe,changeOptions:CCe,chrToAbs:S_,chromInfoBisector:i9,cloneEvent:s9,colorDomainToRgbaArray:$l,colorToHex:ct,colorToRgba:T9,dataToGenomicLoci:x_,debounce:wR,decToHexStr:ux,dictFromTuples:E9,dictItems:po,dictKeys:ho,dictValues:mr,download:$m,expandCombinedTracks:o0,fillInMinWidths:S9,flatten:bpe,forEach:_pe,forwardEvent:I_,genomeLociToPixels:Tpe,genomicRangeToChromosomeChunks:Epe,getAggregationFunction:jR,getDefaultTrackForDatatype:AR,getElementDim:C9,getTiledPlot:bme,getTrackByUid:Ki,getTrackConfFromHGC:Tde,getTrackObjById:wm,getTrackObjectFromHGC:BR,getTrackPositionByUid:Km,getTrackRenderer:K9,getXylofon:D9,gradient:R9,hasClass:E_,hasParent:N9,hexStrToInt:M9,intoTheVoid:L9,isTrackOrChildTrack:j9,isWithin:RR,latToY:Pde,lngToX:Rde,loadChromInfos:Dde,map:PR,max:cx,maxNonZero:hx,min:B9,minNonZero:fx,mod:Lde,mountHGComponent:EW,mountHGComponentAsync:NCe,ndarrayAssign:F9,ndarrayFlatten:U9,ndarrayToList:H9,numericifyVersion:z9,objVals:y1,or:Vy,parseChromsizesRows:v1,pixiTextToSvg:px,q:Kde,rangeQuery2d:Qde,reduce:w9,relToAbsChromPos:Zde,removeClass:eme,removeHGComponent:RCe,resetD3BrushStyle:Cf,rgbToHex:tme,scalesCenterAndK:un,scalesToGenomeLoci:V9,segmentsToRows:R_,selectedItemsToSize:ny,showMousePosition:gc,some:ome,sum:wl,svgLine:Y9,throttleAndDebounce:X9,tileToCanvas:ame,timeout:NR,toVoid:Yo,totalTrackPixelHeight:sme,trackUtils:tc,trimTrailingSlash:b1,valueToColor:MR,visitPositionedTracks:ls,visitTracks:CR,waitForJsonComplete:BN,waitForTilesLoaded:$_,waitForTransitionsFinished:TW},Symbol.toStringTag,{value:"Module"}));function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jx.apply(this,arguments)}const{Provider:bDe,Consumer:_De}=O.createContext({close:Yo,open:Yo}),oh=e=>O.forwardRef((t,n)=>O.createElement(_De,null,r=>O.createElement(e,Jx({ref:n},t,{theme:r})))),El={"track-control":"_track-control_w7hx2_1","track-control-vertical":"_track-control-vertical_w7hx2_2","track-control-dark":"_track-control-dark_w7hx2_15","track-control-active":"_track-control-active_w7hx2_16 _track-control_w7hx2_1","track-control-left":"_track-control-left_w7hx2_24","track-control-padding-right":"_track-control-padding-right_w7hx2_48","track-control-button":"_track-control-button_w7hx2_52","track-control-button-vertical":"_track-control-button-vertical_w7hx2_81"},TDe=e=>ir({[El["track-control-active"]]:e.isVisible,[El["track-control"]]:!e.isVisible,[El["track-control-left"]]:e.isAlignLeft,[El["track-control-vertical"]]:e.isVertical,[El["track-control-padding-right"]]:e.paddingRight,[El["track-control-dark"]]:e.theme===wr}),gb=e=>ir("no-zoom",El["track-control-button"],{[El["track-control-button-vertical"]]:e.isVertical});let qA=null,uF=null;function NW(e){(!e||!qA||Object.keys(e).some(r=>qA[r]!==e[r]))&&(qA=e,uF=ox(()=>O.createElement("svg",{className:gb(e),style:{height:"20px",width:"20px",...e.imgStyleMove}},O.createElement("title",null,"Move track"),O.createElement("use",{xlinkHref:"#move"}))));let t,n;return O.createElement("div",{className:TDe(e)},e.isMoveable&&O.createElement(uF,null),O.createElement("svg",{ref:r=>{t=r},className:gb(e),onClick:()=>{e.onConfigTrackMenuOpened(e.uid,t.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleSettings}},O.createElement("title",null,"Configure track"),O.createElement("use",{xlinkHref:"#cog"})),e.onAddSeries&&O.createElement("svg",{className:gb(e),onClick:()=>e.onAddSeries(e.uid),style:{height:"20px",width:"20px",...e.imgStyleAdd}},O.createElement("title",null,"Add series"),O.createElement("use",{xlinkHref:"#plus"})),O.createElement("svg",{ref:r=>{n=r},className:gb(e),onClick:()=>{e.onCloseTrackMenuOpened(e.uid,n.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleClose}},O.createElement("title",null,"Close track"),O.createElement("use",{xlinkHref:"#cross"})))}NW.propTypes={imgStyleAdd:N.object,imgStyleClose:N.object,imgStyleMove:N.object,imgStyleSettings:N.object,isAlignLeft:N.bool,isMoveable:N.bool,isVertical:N.bool,isVisible:N.bool,onConfigTrackMenuOpened:N.func,onCloseTrackMenuOpened:N.func,onAddSeries:N.func,paddingRight:N.bool,theme:N.symbol.isRequired,uid:N.string};const cS=oh(NW),eI={"center-track":"_center-track_fiu64_1","center-track-container":"_center-track-container_fiu64_6"},Bo={"track-range-selection":"_track-range-selection_5bcsr_1","track-range-selection-active":"_track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-primary":"_track-range-selection-active-primary_5bcsr_14 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-secondary":"_track-range-selection-active-secondary_5bcsr_18 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-group-inactive":"_track-range-selection-group-inactive_5bcsr_22","track-range-selection-group-brush-selection":"_track-range-selection-group-brush-selection_5bcsr_26"};function EDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SDe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ADe(r.key),r)}}function wDe(e,t,n){return t&&SDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ADe(e){var t=ODe(e,"string");return typeof t=="symbol"?t:String(t)}function ODe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tI(e,t)}function tI(e,t){return tI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},tI(e,t)}function xDe(e){var t=CDe();return function(){var n=J_(e),r;if(t){var i=J_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return IDe(this,r)}}function IDe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pl(e)}function pl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function J_(e){return J_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},J_(e)}const yb={pointerEvents:"all"};function Ph(e){return e&&e.sourceEvent}let UN=function(e){kDe(n,e);var t=xDe(n);function n(r){var i;return EDe(this,n),i=t.call(this,r),i.state={isVisible:!1},i.brushBehaviorX=g1().on("brush",i.brushedX.bind(pl(i))).on("end",i.brushedXEnded.bind(pl(i))),i.brushBehaviorY=Hy().on("brush",i.brushedY.bind(pl(i))).on("end",i.brushedYEnded.bind(pl(i))),i.brushBehaviorXY=gR().on("start",i.brushStarted.bind(pl(i))).on("brush",i.brushedXY.bind(pl(i))).on("end",i.brushedXYEnded.bind(pl(i))),i}return wDe(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush2d()}},{key:"shouldComponentUpdate",value:function(r,i){if(this.rangeSelectionTriggeredXY){if(this.rangeSelectionTriggeredXY=!1,this.rangeSelectionTriggeredXYEnd){const o=r.rangeSelection[0]||null;this.moveBrushXY([o,r.rangeSelection[1]],!0),this.rangeSelectionTriggeredXYEnd=!1}return this.state!==i}if(this.props.rangeSelection!==r.rangeSelection){const o=r.rangeSelection[0]||null;this.props.is1dRangeSelection?(this.rangeSelectionTriggeredX||this.moveBrushX(o,r.rangeSelectionEnd),this.rangeSelectionTriggeredXEnd&&this.moveBrushX(o,r.rangeSelectionEnd,!0),this.rangeSelectionTriggeredY||this.moveBrushY(o,r.rangeSelectionEnd),this.rangeSelectionTriggeredYEnd&&this.moveBrushY(o,r.rangeSelectionEnd,!0),this.rangeSelectionTriggeredX=!1,this.rangeSelectionTriggeredXEnd=!1,this.rangeSelectionTriggeredY=!1,this.rangeSelectionTriggeredYEnd=!1):this.moveBrushXY([o,r.rangeSelection[1]],r.rangeSelectionEnd);const a=this.props.is1dRangeSelection&&!r.is1dRangeSelection&&o===null;return this.state!==i||a}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush2d():(this.removeBrush1d(),this.removeBrush2d())}},{key:"addBrush1d",value:function(){!this.brushElX||!this.brushElY||this.brushElXOld===this.brushElX&&this.brushElYOld===this.brushElY||(this.brushElXOld&&this.brushElXOld.on(".brush",null),this.brushElYOld&&this.brushElYOld.on(".brush",null),this.brushElX.call(this.brushBehaviorX),this.brushElY.call(this.brushBehaviorY),Cf(this.brushElX,Bo["track-range-selection-group-brush-selection"]),Cf(this.brushElY,Bo["track-range-selection-group-brush-selection"]),this.brushElXOld=this.brushElX,this.brushElYOld=this.brushElY,this.brushIs1dBound=!0)}},{key:"addBrush2d",value:function(){!this.brushElXY||this.brushElXYOld===this.brushElXY||(this.brushElXYOld&&this.brushElXYOld.on(".brush",null),this.brushElXY.call(this.brushBehaviorXY),this.brushElXYOld=this.brushElXY,this.brushIs2dBound=!0,Cf(this.brushElXY,Bo["track-range-selection-group-brush-selection"]))}},{key:"brushedX",value:function(r){const i=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!Ph(r)||!this.props.onRangeSelectionX||!this.props.is1dRangeSelection||i)&&(this.rangeSelectionTriggeredX=!0,this.props.onRangeSelectionX(r.selection))}},{key:"brushedXEnded",value:function(r){const i=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,!(!Ph(r)||!this.props.onRangeSelectionX||!this.props.is1dRangeSelection||i)&&(this.rangeSelectionTriggeredX=!0,this.rangeSelectionTriggeredXEnd=!0,this.props.onRangeSelectionXEnd(r.selection))}},{key:"brushedY",value:function(r){const i=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!Ph(r)||!this.props.onRangeSelectionY||!this.props.is1dRangeSelection||i)&&(this.rangeSelectionTriggeredY=!0,this.props.onRangeSelectionY(r.selection))}},{key:"brushedYEnded",value:function(r){const i=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,!(!Ph(r)||!this.props.onRangeSelectionY||!this.props.is1dRangeSelection||i)&&(this.rangeSelectionTriggeredY=!0,this.rangeSelectionTriggeredYEnd=!0,this.props.onRangeSelectionYEnd(r.selection))}},{key:"brushedXY",value:function(r){const i=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!Ph(r)||!this.props.onRangeSelectionXY||i||this.props.is1dRangeSelection)&&(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionXY([[r.selection[0][0],r.selection[1][0]],[r.selection[0][1],r.selection[1][1]]]))}},{key:"brushedXYEnded",value:function(r){if(this.props.is1dRangeSelection)return;const i=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,r.selection&&r.sourceEvent&&this.props.onRangeSelectionXY&&!i&&(this.rangeSelectionTriggeredXY=!0,this.rangeSelectionTriggeredXYEnd=!0,this.props.onRangeSelectionXYEnd([[r.selection[0][0],r.selection[1][0]],[r.selection[0][1],r.selection[1][1]]])),r.selection||(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionReset())}},{key:"brushStarted",value:function(r){Ph(r)&&this.props.onRangeSelectionStart()}},{key:"moveBrushX",value:function(r,i=!1){if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const o=r?[this.props.scaleX(r[0]),this.props.scaleX(r[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,i?this.brushElX.transition().call(this.brushBehaviorX.move,o):this.brushElX.call(this.brushBehaviorX.move,o)}},{key:"moveBrushY",value:function(r,i=!1){if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const o=r?[this.props.scaleY(r[0]),this.props.scaleY(r[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,i?this.brushElY.transition().call(this.brushBehaviorY.move,o):this.brushElY.call(this.brushBehaviorY.move,o)}},{key:"moveBrushXY",value:function(r,i=!1){if(!this.brushEl)return;const o=[[this.props.scaleX(r[0][0]),this.props.scaleY(r[1][0])],[this.props.scaleX(r[0][1]),this.props.scaleY(r[1][1])]];this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,i?this.brushElXY.transition().call(this.brushBehaviorXY.move,o):this.brushElXY.call(this.brushBehaviorXY.move,o)}},{key:"mouseEnterHandler",value:function(){this.props.isRangeSelectionActive||this.setState({isVisible:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({isVisible:!1})}},{key:"removeBrush1d",value:function(){this.brushIs1dBound&&(this.brushElX&&(this.brushElX.call(this.brushBehaviorX.move,null),this.brushElX.on(".brush",null)),this.brushElY&&(this.brushElY.call(this.brushBehaviorY.move,null),this.brushElY.on(".brush",null)),this.brushIs1dBound=!1)}},{key:"removeBrush2d",value:function(){this.brushIs2dBound&&this.brushElXY&&(this.brushElXY.call(this.brushBehaviorXY.move,null),this.brushElXY.on(".brush",null),this.brushElXYOld=void 0,this.brushIs2dBound=!1,this.props.is1dRangeSelection||this.props.onRangeSelectionReset())}},{key:"render",value:function(){const r=this.props.tracks.map(u=>rd(u)).reduce(Vy,!1),i=this.props.tracks.some(u=>u.contents?u.contents.some(c=>c.type==="heatmap"?c.options.colorbarPosition==="topRight":!1):u.type==="heatmap"?u.options.colorbarPosition==="topRight":!1);let o="track-range-selection";this.props.isRangeSelectionActive&&(o+=this.props.is1dRangeSelection?"-active-secondary":"-active-primary");const a=ir(!this.props.is1dRangeSelection&&Bo["track-range-selection-group-inactive"]),s=ir(this.props.is1dRangeSelection&&Bo["track-range-selection-group-inactive"]);return O.createElement("div",{className:ir(this.props.className,eI["center-track"]),onMouseEnter:this.mouseEnterHandler.bind(this),onMouseLeave:this.mouseLeaveHandler.bind(this),style:{height:this.props.height,width:this.props.width}},r&&O.createElement("svg",{className:Bo[o],style:{height:this.props.height,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"},O.createElement("g",{ref:u=>{this.brushElX=Wt(u)},className:a}),O.createElement("g",{ref:u=>{this.brushElY=Wt(u)},className:a}),O.createElement("g",{ref:u=>{this.brushElXY=Wt(u)},className:s})),this.props.editable&&O.createElement(cS,{imgStyleAdd:yb,imgStyleClose:yb,imgStyleMove:yb,imgStyleSettings:yb,isMoveable:!1,isVisible:this.state.isVisible||this.props.uid===this.props.configTrackMenuId,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,paddingRight:i,uid:this.props.uid}))}}]),n}(O.Component);UN.defaultProps={className:"center-track",configTrackMenuId:null,is1dRangeSelection:!1,rangeSelectionEnd:N.bool,isRangeSelectionActive:!1,scaleX:e=>e,scaleY:e=>e};UN.propTypes={className:N.string,configTrackMenuId:N.string,editable:N.bool,height:N.number.isRequired,is1dRangeSelection:N.bool,isRangeSelectionActive:N.bool,onAddSeries:N.func.isRequired,onCloseTrackMenuOpened:N.func.isRequired,onConfigTrackMenuOpened:N.func.isRequired,onRangeSelectionX:N.func.isRequired,onRangeSelectionXEnd:N.func.isRequired,onRangeSelectionY:N.func.isRequired,onRangeSelectionYEnd:N.func.isRequired,onRangeSelectionXY:N.func.isRequired,onRangeSelectionXYEnd:N.func.isRequired,onRangeSelectionReset:N.func.isRequired,onRangeSelectionStart:N.func.isRequired,rangeSelection:N.array.isRequired,rangeSelectionEnd:N.bool,scaleX:N.func,scaleY:N.func,tracks:N.array.isRequired,uid:N.string.isRequired,width:N.number.isRequired};function rI(){return rI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rI.apply(this,arguments)}const zN={__fake__:!0,publish:Yo,subscribe:()=>({event:"fake",handler:Yo}),unsubscribe:Yo,clear:Yo},{Provider:PDe,Consumer:DDe}=O.createContext(zN),gd=e=>O.forwardRef((t,n)=>O.createElement(DDe,null,r=>O.createElement(e,rI({ref:n},t,{pubSub:r})))),RDe={"drag-listening-div-active":"_drag-listening-div-active_19gkt_1"};function NDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MDe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jDe(r.key),r)}}function LDe(e,t,n){return t&&MDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jDe(e){var t=BDe(e,"string");return typeof t=="symbol"?t:String(t)}function BDe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function FDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nI(e,t)}function nI(e,t){return nI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},nI(e,t)}function GDe(e){var t=zDe();return function(){var n=eT(e),r;if(t){var i=eT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return HDe(this,r)}}function HDe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UDe(e)}function UDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function eT(e){return eT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eT(e)}let VN=function(e){FDe(n,e);var t=GDe(n);function n(r){var i;return NDe(this,n),i=t.call(this,r),i.state={dragOnTop:!1},i}return LDe(n,[{key:"render",value:function(){let r="red";return this.props.enabled&&this.state.dragOnTop?r="green":this.props.enabled&&(r="blue"),O.createElement("div",{className:ir("DragListeningDiv",{[RDe["drag-listening-div-active"]]:this.props.enabled}),onDragEnter:()=>{this.setState({dragOnTop:!0})},onDragLeave:()=>{this.setState({dragOnTop:!1})},onDragOver:i=>{i.preventDefault()},onDrop:()=>{if(!this.props.enabled)return;const i=this.props.draggingHappening,o={type:this.props.defaultTrackType,uid:zt.nice(),tilesetUid:i.tilesetUid,server:i.server};this.props.onTrackDropped(o),this.props.pubSub.publish("trackDropped",o)},style:{background:r,opacity:.6,...this.props.style}})}}]),n}(O.Component);VN.defaultProps={enabled:!1,style:{},draggingHappening:{},onTrackDropped:()=>{}};VN.propTypes={enabled:N.bool,style:N.object,defaultTrackType:N.object,draggingHappening:N.object,onTrackDropped:N.func,position:N.string.isRequired,pubSub:N.object.isRequired};const vb=gd(VN),wu={"gallery-tracks":"_gallery-tracks_fbxxi_1","gallery-track":"_gallery-track_fbxxi_1","gallery-sub-track":"_gallery-sub-track_fbxxi_18","gallery-invisible-track":"_gallery-invisible-track_fbxxi_19"},VDe="_horizontalList_1y7td_7",YDe="_list_1y7td_14",XDe="_stylizedList_1y7td_21",WDe="_stylizedItem_1y7td_28",qDe="_stylizedHelper_1y7td_39",$De="_horizontalItem_1y7td_44",Fo={"tiled-plot":"_tiled-plot_1y7td_1",horizontalList:VDe,list:YDe,stylizedList:XDe,stylizedItem:WDe,stylizedHelper:qDe,horizontalItem:$De};function KDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QDe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JDe(r.key),r)}}function ZDe(e,t,n){return t&&QDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JDe(e){var t=eRe(e,"string");return typeof t=="symbol"?t:String(t)}function eRe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function tRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iI(e,t)}function iI(e,t){return iI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},iI(e,t)}function rRe(e){var t=oRe();return function(){var n=tT(e),r;if(t){var i=tT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return nRe(this,r)}}function nRe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iRe(e)}function iRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oRe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tT(e){return tT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tT(e)}const bb={pointerEvents:"all"};let MW=function(e){tRe(n,e);var t=rRe(n);function n(r){var i;return KDe(this,n),i=t.call(this,r),i.state={hovering:!1},i}return ZDe(n,[{key:"mouseEnterHandler",value:function(){this.setState({hovering:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({hovering:!1})}},{key:"render",value:function(){return O.createElement("div",{className:ir("gallery-tracks",wu["gallery-tracks"])},this.props.tracks&&this.props.tracks.map((r,i)=>O.createElement("div",{key:r.uid||i,className:wu["gallery-track"],onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:r.height*i,right:r.height*i,bottom:r.height*i,left:r.height*i}},O.createElement("div",{className:wu["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,left:0,height:r.height}}),O.createElement("div",{className:wu["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,bottom:0,width:r.height}}),O.createElement("div",{className:wu["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{right:0,bottom:0,left:0,height:r.height}}),O.createElement("div",{className:wu["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,bottom:0,left:0,width:r.height}}),O.createElement("div",{className:wu["gallery-invisible-track"],onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:r.height,right:r.height,bottom:r.height,left:r.height}}),this.props.editable&&O.createElement(cS,{configMenuVisible:!0,imgStyleAdd:bb,imgStyleClose:bb,imgStyleMove:bb,imgStyleSettings:bb,isMoveable:!1,isVisible:this.state.hovering,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:r.uid||i}))))}}]),n}(O.Component);MW.propTypes={editable:N.bool,onCloseTrackMenuOpened:N.func.isRequired,onConfigTrackMenuOpened:N.func.isRequired,tracks:N.array};function aRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sRe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uRe(r.key),r)}}function lRe(e,t,n){return t&&sRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uRe(e){var t=cRe(e,"string");return typeof t=="symbol"?t:String(t)}function cRe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}let Nf=function(){function e(t,n){aRe(this,e),this.context=t;const{id:r,pubSub:i,getTheme:o}=t;this.pubSub=i??zN,this.id=r,this._xScale=kt(),this._yScale=kt(),this._refXScale=kt(),this._refYScale=kt(),this.position=[0,0],this.dimensions=[1,1],this.options=n,this.pubSubs=[],this.getTheme=o??(()=>{}),this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.defaultMouseMoveHandler.bind(this))),this.isLeftModified=!1}return lRe(e,[{key:"isWithin",value:function(t,n){let r=t,i=n,o=this.position[0],a=this.position[1];return this.isLeftModified&&(r=n,i=t,o=this.position[1],a=this.position[0]),RR(r,i,o,this.dimensions[0]+o,a,this.dimensions[1]+a)}},{key:"getProp",value:function(t){return()=>this[t]}},{key:"getData",value:function(){}},{key:"click",value:function(t,n,r){return{type:"generic",event:r,payload:null}}},{key:"clickOutside",value:function(){}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"setDimensions",value:function(t){this.dimensions=t,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]])}},{key:"refXScale",value:function(t){return t?(this._refXScale=t,this):this._refXScale}},{key:"refYScale",value:function(t){return t?(this._refYScale=t,this):this._refYScale}},{key:"xScale",value:function(t){return t?(this._xScale=t,this):this._xScale}},{key:"yScale",value:function(t){return t?(this._yScale=t,this):this._yScale}},{key:"zoomed",value:function(t,n){this.xScale(t),this.yScale(n)}},{key:"refScalesChanged",value:function(t,n){this._refXScale=t,this._refYScale=n}},{key:"draw",value:function(){}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){this.position=t}},{key:"defaultMouseMoveHandler",value:function(t){}},{key:"remove",value:function(){this.pubSubs.forEach(t=>this.pubSub.unsubscribe(t)),this.pubSubs=[]}},{key:"rerender",value:function(t){}},{key:"respondsToPosition",value:function(t,n){return this.isWithin(t,n)}},{key:"zoomedY",value:function(t,n){}},{key:"movedY",value:function(t){}}]),e}();function hRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fRe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dRe(r.key),r)}}function pRe(e,t,n){return t&&fRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dRe(e){var t=mRe(e,"string");return typeof t=="symbol"?t:String(t)}function mRe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function m0(){return typeof Reflect<"u"&&Reflect.get?m0=Reflect.get.bind():m0=function(e,t,n){var r=gRe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},m0.apply(this,arguments)}function gRe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Pp(e),e!==null););return e}function yRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oI(e,t)}function oI(e,t){return oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},oI(e,t)}function vRe(e){var t=TRe();return function(){var n=Pp(e),r;if(t){var i=Pp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bRe(this,r)}}function bRe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Re(e)}function _Re(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TRe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pp(e){return Pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pp(e)}function ERe(e,t){const n=ed(t,e);return Wc(`.${n}`,e)(e)}function SRe(e,t){const n=e.map(o=>+o).sort((o,a)=>a-o),r=n[t],i=n[n.length-1];return ERe(r,i)}function wRe(e,t,n,r){const i=t/(2**e*n);if(!Number.isNaN(i)){const o=t/(2**r*n),a=ed(o,i);return Wc(`.${a}`,i)(i)}return console.warn("NaN resolution, screen is probably too small."),""}let Ai=function(e){yRe(n,e);var t=vRe(n);function n(r,i){var o;hRe(this,n),o=t.call(this,r,i);const{scene:a}=r;o.scene=a,o.delayDrawing=!1,o.pBase=new Ue.PIXI.Graphics,o.pMasked=new Ue.PIXI.Graphics,o.pMask=new Ue.PIXI.Graphics,o.pMain=new Ue.PIXI.Graphics,o.pBorder=new Ue.PIXI.Graphics,o.pBackground=new Ue.PIXI.Graphics,o.pForeground=new Ue.PIXI.Graphics,o.pLabel=new Ue.PIXI.Graphics,o.pMobile=new Ue.PIXI.Graphics,o.pAxis=new Ue.PIXI.Graphics,o.pMouseOver=new Ue.PIXI.Graphics,o.scene.addChild(o.pBase),o.pBase.addChild(o.pMasked),o.pMasked.addChild(o.pBackground),o.pMasked.addChild(o.pMain),o.pMasked.addChild(o.pMask),o.pMasked.addChild(o.pMobile),o.pMasked.addChild(o.pBorder),o.pMasked.addChild(o.pLabel),o.pMasked.addChild(o.pForeground),o.pMasked.addChild(o.pMouseOver),o.pBase.addChild(o.pAxis),o.pMasked.mask=o.pMask,o.prevOptions="",o.options=Object.assign(o.options,i);const s=o.getName();return o.labelTextFontFamily="Arial",o.labelTextFontSize=12,o.labelXOffset=0,o.labelText=new Ue.PIXI.Text(s,{fontSize:`${o.labelTextFontSize}px`,fontFamily:o.labelTextFontFamily,fill:"black"}),o.pLabel.addChild(o.labelText),o.errorText=new Ue.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"red"}),o.errorText.anchor.x=.5,o.errorText.anchor.y=.5,o.pLabel.addChild(o.errorText),o.errorTextText="",o.flipText=!1,o.tilesetInfo=void 0,o}return pRe(n,[{key:"setLabelText",value:function(){}},{key:"setPosition",value:function(r){this.position=r,this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setDimensions",value:function(r){m0(Pp(n.prototype),"setDimensions",this).call(this,r),this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setMask",value:function(r,i){this.pMask.clear(),this.pMask.beginFill(),this.pMask.drawRect(r[0],r[1],i[0],i[1]),this.pMask.endFill()}},{key:"setForeground",value:function(){this.pForeground.position.y=this.position[1],this.pForeground.position.x=this.position[0]}},{key:"remove",value:function(){this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"drawBorder",value:function(){const r=this.pBorder;if(r.clear(),!this.options||!this.options.trackBorderWidth)return;const i=ct(this.options.trackBorderColor?this.options.trackBorderColor:"white");r.lineStyle(this.options.trackBorderWidth,i),r.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"drawError",value:function(){if(this.errorText.x=this.position[0]+this.dimensions[0]/2,this.errorText.y=this.position[1]+this.dimensions[1]/2,this.errorText.text=this.errorTextText,this.errorTextText&&this.errorTextText.length){const r=this.pBorder;r.clear(),r.lineStyle(1,ct("red")),r.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}}},{key:"drawBackground",value:function(){const r=this.pBackground;if(r.clear(),!this.options||!this.options.backgroundColor)return;let i=1,o=this.options.backgroundColor;this.options.backgroundColor==="transparent"&&(i=0,o="white");const a=ct(o);r.beginFill(a,i),r.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"getLabelColor",value:function(){return this.options.labelColor&&this.options.labelColor!=="[glyph-color]"?this.options.labelColor:this.options.lineStrokeColor||this.options.barFillColor||"black"}},{key:"getName",value:function(){return this.options.name?this.options.name:this.tilesetInfo&&this.tilesetInfo.name||""}},{key:"drawLabel",value:function(){if(!this.labelText)return;const r=this.pLabel;if(r.clear(),!this.options||!this.options.labelPosition||this.options.labelPosition==="hidden"){this.labelText.alpha=0;return}const{labelBackgroundColor:i="white",labelBackgroundOpacity:o=.5}=this.options;r.beginFill(ct(i),+o);const a=ct(this.getLabelColor()),s=2;if(this.dimensions[0]<0)return;let u=this.options.labelShowAssembly&&this.tilesetInfo&&this.tilesetInfo.coordSystem?`${this.tilesetInfo.coordSystem} | `:"";if(u+=this.getName(),this.options.labelShowResolution&&Sde(this.tilesetInfo)&&this.tilesetInfo.bins_per_dimension){const p=wRe(this.calculateZoomLevel(),this.tilesetInfo.max_width,this.tilesetInfo.bins_per_dimension,this.tilesetInfo.max_zoom);u+=`
[Current data resolution: ${p}]`}else if(this.options.labelShowResolution&&wde(this.tilesetInfo)){const p=SRe(this.tilesetInfo.resolutions,this.calculateZoomLevel());u+=`
[Current data resolution: ${p}]`}if(this.options&&this.options.dataTransform){let p=null;if(this.tilesetInfo&&this.tilesetInfo.transforms)for(const d of this.tilesetInfo.transforms)d.value===this.options.dataTransform&&(p=d);p?u+=`
[Transform: ${p.name}]`:this.options.dataTransform==="None"?u+=`
[Transform: None ]`:u+=`
[Transform: Default ]`}this.labelText.text=u,this.labelText.style={fontSize:`${this.labelTextFontSize}px`,fontFamily:this.labelTextFontFamily,fill:a},this.labelText.alpha=typeof this.options.labelTextOpacity<"u"?this.options.labelTextOpacity:1,this.labelText.visible=!0,this.flipText&&(this.labelText.scale.x=-1);const{labelLeftMargin:c=0,labelRightMargin:l=0,labelTopMargin:f=0,labelBottomMargin:h=0}=this.options;this.options.labelPosition==="topLeft"?(this.labelText.x=this.position[0]+c+this.labelXOffset,this.labelText.y=this.position[1]+f,this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x+=this.labelText.width/2,r.drawRect(this.position[0]+c+this.labelXOffset,this.position[1]+f,this.labelText.width+s,this.labelText.height+s)):this.options.labelPosition==="bottomLeft"&&!this.flipText||this.options.labelPosition==="topRight"&&this.flipText?(this.labelText.x=this.position[0]+(c||f),this.labelText.y=this.position[1]+this.dimensions[1]-(h||l),this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x+=this.labelText.width/2+this.labelXOffset,r.drawRect(this.position[0]+(c||f)+this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-s-(h||l),this.labelText.width+s,this.labelText.height+s)):this.options.labelPosition==="topRight"&&!this.flipText||this.options.labelPosition==="bottomLeft"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]-(l||h),this.labelText.y=this.position[1]+(f||c),this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x-=this.labelText.width/2+this.labelXOffset,r.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-s-(l||h)-this.labelXOffset,this.position[1]+(f||c),this.labelText.width+s,this.labelText.height+s)):this.options.labelPosition==="bottomRight"?(this.labelText.x=this.position[0]+this.dimensions[0]-l,this.labelText.y=this.position[1]+this.dimensions[1]-h,this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x-=this.labelText.width/2+this.labelXOffset,r.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-s-l-this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-s-h,this.labelText.width+s,this.labelText.height+s)):this.options.labelPosition==="outerLeft"&&!this.flipText||this.options.labelPosition==="outerTop"&&this.flipText?(this.labelText.x=this.position[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x-=this.labelText.width/2+3):this.options.labelPosition==="outerTop"&&!this.flipText||this.options.labelPosition==="outerLeft"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y-=this.labelText.height/2+3):this.options.labelPosition==="outerBottom"&&!this.flipText||this.options.labelPosition==="outerRight"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1]+this.dimensions[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y+=this.labelText.height/2+3):this.options.labelPosition==="outerRight"&&!this.flipText||this.options.labelPosition==="outerBottom"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x+=this.labelText.width/2+3):this.labelText.visible=!1,this.options.labelPosition==="outerLeft"||this.options.labelPosition==="outerRight"||this.options.labelPosition==="outerTop"||this.options.labelPosition==="outerBottom"?this.pLabel.setParent(this.pBase):this.pLabel.setParent(this.pMasked)}},{key:"rerender",value:function(r){this.options=r,this.draw(),this.drawBackground(),this.drawLabel(),this.drawError(),this.drawBorder()}},{key:"draw",value:function(){this.drawError()}},{key:"exportSVG",value:function(){const r=document.createElement("g"),i=document.createElement("rect");i.setAttribute("x",`${this.position[0]}`),i.setAttribute("y",`${this.position[1]}`),i.setAttribute("width",`${this.dimensions[0]}`),i.setAttribute("height",`${this.dimensions[1]}`),this.options&&this.options.backgroundColor?i.setAttribute("fill",this.options.backgroundColor):i.setAttribute("fill-opacity","0");const o=document.createElement("g");o.setAttribute("class","g-clipped"),r.appendChild(o),o.appendChild(i);const a=document.createElement("g");o.setAttribute("class","g-track"),o.appendChild(a);const s=document.createElement("g");o.setAttribute("class","g-labels"),o.appendChild(s);const u=document.createElementNS("http://www.w3.org/2000/svg","clipPath");r.appendChild(u);const c=document.createElementNS("http://www.w3.org/2000/svg","polygon");u.appendChild(c),c.setAttribute("points",`${this.position[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]+this.dimensions[1]} ${this.position[0]},${this.position[1]+this.dimensions[1]} `);const l=zt.nice();u.setAttribute("id",l),o.setAttribute("style",`clip-path:url(#${l});`);const f=this.labelText.text.split(`
`);let h=0;const p=3,d=(this.labelTextFontSize+2)*f.length+p;this.labelText.anchor.y===.5?h=d/2:this.labelText.anchor.y===1&&(h=-d);for(let m=0;m<f.length;m++){const g=document.createElement("text");if(g.setAttribute("font-family",this.labelTextFontFamily),g.setAttribute("font-size",`${this.labelTextFontSize}px`),g.innerText=f[m],this.options.labelPosition==="topLeft"||this.options.labelPosition==="topRight"){const v=h+(m+1)*(this.labelTextFontSize+2);g.setAttribute("dy",String(v))}else(this.options.labelPosition==="bottomLeft"||this.options.labelPosition==="bottomRight")&&g.setAttribute("dy",String(h+m*(this.labelTextFontSize+2)));g.setAttribute("fill",this.options.labelColor??""),this.labelText.anchor.x===.5?g.setAttribute("text-anchor","middle"):this.labelText.anchor.x===1&&g.setAttribute("text-anchor","end"),s.appendChild(g)}return s.setAttribute("transform",`translate(${this.labelText.x},${this.labelText.y})scale(${this.labelText.scale.x},1)`),[r,a]}},{key:"calculateZoomLevel",value:function(){throw new Error("Must be implemented by subclass")}}]),n}(Nf);function ARe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ORe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xRe(r.key),r)}}function kRe(e,t,n){return t&&ORe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xRe(e){var t=IRe(e,"string");return typeof t=="symbol"?t:String(t)}function IRe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function CRe(e){return e.length===2}let hS=function(){function e(t,n){if(ARe(this,e),this.tilesetInfoLoading=!0,!t){console.error("No dataconfig provided");return}this.dataConfig=JSON.parse(JSON.stringify(t)),this.uuid=zt.nice(),this.pubSub=n,t.children&&(this.dataConfig.children=t.children.map(r=>new e(r,n)))}return kRe(e,[{key:"registerFileUrl",value:async function({server:t,url:n,filetype:r,coordSystem:i}){const o=`${b1(t)}/register_url/`;return fetch(o,{method:"POST",body:JSON.stringify({fileurl:n,filetype:r,coordSystem:i}),headers:{"Content-Type":"application/json; charset=utf-8"}})}},{key:"tilesetInfo",value:function(t){const{server:n,url:r,filetype:i,coordSystem:o}=this.dataConfig;return n&&r&&i?this.registerFileUrl({server:n,url:r,filetype:i,coordSystem:o}).then(a=>a.json()).then(a=>{this.dataConfig.tilesetUid=a.uid,this.tilesetInfoAfterRegister(t)}).catch(a=>{console.error("Error registering url",a)}):new Promise(()=>{this.tilesetInfoAfterRegister(t)})}},{key:"tilesetInfoAfterRegister",value:function(t){if(this.dataConfig.children){const n=this.dataConfig.children.map(r=>new Promise(i=>{r.tilesetInfo(i)}));Promise.all(n).then(r=>{t(r[0])})}else{const{server:n,tilesetUid:r}=this.dataConfig;!n||!r?(console.warn("No dataConfig children, server or tilesetUid:",this.dataConfig),t(null)):et.trackInfo(n,r,i=>{this.dataConfig.tilesetInfo=i[r],t(i[r],r)},i=>{this.tilesetInfoLoading=!1,t({error:i})},this.pubSub)}}},{key:"fullTileId",value:function(t,n){return`${t}.${n}`}},{key:"fetchTilesDebounced",value:function(t,n){var r;if(this.dataConfig.type==="horizontal-section")return this.fetchHorizontalSection(t,n);if(this.dataConfig.type==="vertical-section")return this.fetchHorizontalSection(t,n,!0);if(!this.dataConfig.children&&this.dataConfig.tilesetUid)return new Promise(o=>{et.fetchTilesDebounced({id:zt.nice(),server:this.dataConfig.server,done:o,ids:n.map(a=>`${this.dataConfig.tilesetUid}.${a}`),options:this.dataConfig.options},this.pubSub,!0)}).then(o=>{const a=mr(o)[0].tilesetUid,s={};for(let u=0;u<n.length;u++){const c=this.fullTileId(a,n[u]);o[c].tilePositionId=n[u],s[n[u]]=o[c]}return t(s),s});const i=((r=this.dataConfig.children)==null?void 0:r.map(o=>new Promise(a=>{o.fetchTilesDebounced(a,n)})))??[];return Promise.all(i).then(o=>{if(this.dataConfig.type==="divided"&&CRe(o)){const a=this.makeDivided(o,n);return t(a),a}return console.warn("Unimplemented dataConfig type. Returning first data source.",this.dataConfig),t(o[0]),o[0]})}},{key:"divideData",value:function(t,n){const r=new Float32Array(t.length);for(let i=0;i<r.length;i++)n[i]===0?r[i]=NaN:r[i]=t[i]/n[i];return r}},{key:"horizontalSlice",value:function(){return null}},{key:"extractDataSlice",value:function(t,n,r,i){if(!i)return t.slice(n[1]*r,n[1]*(r+1));const o=new Array(n[1]);for(let a=r;a<t.length;a+=n[0])o[Math.floor(a/n[0])]=t[a];return o}},{key:"fetchHorizontalSection",value:function(t,n,r=!1){const i=[],o=[],{slicePos:a,tilesetInfo:s}=this.dataConfig;if(!a||!s)throw new Error("No slice position or tileset info");for(const u of n){const c=u.split("."),l=+c[0],f=+c[1],h=kt().domain([a,a]);let p=[];if("resolutions"in s){const g=s.resolutions.map(v=>+v).sort((v,b)=>b-v);p=et.calculateTilesFromResolution(g[l],h,s.min_pos[r?1:0],s.max_pos[r?1:0])}else p=et.calculateTiles(l,h,s.min_pos[r?1:0],s.max_pos[r?1:0],s.max_zoom,s.max_width);const d=[f,p[0]].sort((g,v)=>g-v);d[0]===f?o.push(!1):o.push(!0);const m=`${l}.${d[0]}.${d[1]}`;i.push(m)}return new Promise(u=>{et.fetchTilesDebounced({id:zt.nice(),server:this.dataConfig.server,done:u,ids:i.map(c=>`${this.dataConfig.tilesetUid}.${c}`)},this.pubSub,!0)}).then(u=>{const c=mr(u)[0].tilesetUid,l={};for(let f=0;f<i.length;f++){const h=i[f].split("."),p=+h[0],d=+h[1],m=+h[2],g=et.calculateTileAndPosInTile(s,s.max_width,s.min_pos[1],p,+a)[1],v=this.fullTileId(c,i[f]),b=u[v];let y=null;if(d===m){y=this.extractDataSlice(b.dense,[256,256],g);const T=this.extractDataSlice(b.dense,[256,256],g,1);for(let S=0;S<y.length;S++)y[S]+=T[S]}else o[f]?y=this.extractDataSlice(b.dense,[256,256],g,1):y=this.extractDataSlice(b.dense,[256,256],g);const _={min_value:Math.min.apply(null,y),max_value:Math.max.apply(null,y),denseDataExtrema:new N_(y),minNonZero:fx(y),maxNonZero:hx(y),dense:y,dtype:b.dtype,server:b.server,tilePos:o[f]?[m]:[d],tilePositionId:n[f],tilesetUid:c,zoomLevel:b.zoomLevel};l[n[f]]=_}return t(l),l})}},{key:"makeDivided",value:function(t,n){t.length<2&&console.warn("Only one tileset specified for a divided datafetcher:",this.dataConfig);const r={};for(let i=0;i<n.length;i++){const o=t[0][n[i]].zoomLevel,a=t[0][n[i]].tilePos;let s={zoomLevel:o,tilePos:a,tilePositionId:n[i]};const u=t[0][n[i]].dense,c=t[1][n[i]].dense;if(u&&c){const l=this.divideData(u,c),f=a.length===2?new LR(l):new N_(l);s={dense:l,denseDataExtrema:f,minNonZero:fx(l),maxNonZero:hx(l),zoomLevel:o,tilePos:a,tilePositionId:n[i]}}r[n[i]]=s}return r}}]),e}();var Qs={};(function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(o,a){return Object.prototype.hasOwnProperty.call(o,a)}e.assign=function(o){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var s=a.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(o[u]=s[u])}}return o},e.shrinkBuf=function(o,a){return o.length===a?o:o.subarray?o.subarray(0,a):(o.length=a,o)};var r={arraySet:function(o,a,s,u,c){if(a.subarray&&o.subarray){o.set(a.subarray(s,s+u),c);return}for(var l=0;l<u;l++)o[c+l]=a[s+l]},flattenChunks:function(o){var a,s,u,c,l,f;for(u=0,a=0,s=o.length;a<s;a++)u+=o[a].length;for(f=new Uint8Array(u),c=0,a=0,s=o.length;a<s;a++)l=o[a],f.set(l,c),c+=l.length;return f}},i={arraySet:function(o,a,s,u,c){for(var l=0;l<u;l++)o[c+l]=a[s+l]},flattenChunks:function(o){return[].concat.apply([],o)}};e.setTyped=function(o){o?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)})(Qs);var sv={},Ka={},yd={},PRe=Qs,DRe=4,cF=0,hF=1,RRe=2;function vd(e){for(var t=e.length;--t>=0;)e[t]=0}var NRe=0,LW=1,MRe=2,LRe=3,jRe=258,YN=29,lv=256,fy=lv+1+YN,Mf=30,XN=19,jW=2*fy+1,Uu=15,$A=16,BRe=7,WN=256,BW=16,FW=17,GW=18,aI=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],g0=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],FRe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],HW=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],GRe=512,us=new Array((fy+2)*2);vd(us);var mg=new Array(Mf*2);vd(mg);var py=new Array(GRe);vd(py);var dy=new Array(jRe-LRe+1);vd(dy);var qN=new Array(YN);vd(qN);var rT=new Array(Mf);vd(rT);function KA(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}var UW,zW,VW;function QA(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function YW(e){return e<256?py[e]:py[256+(e>>>7)]}function my(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function ji(e,t,n){e.bi_valid>$A-n?(e.bi_buf|=t<<e.bi_valid&65535,my(e,e.bi_buf),e.bi_buf=t>>$A-e.bi_valid,e.bi_valid+=n-$A):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function _a(e,t,n){ji(e,n[t*2],n[t*2+1])}function XW(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function HRe(e){e.bi_valid===16?(my(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function URe(e,t){var n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,u=t.stat_desc.max_length,c,l,f,h,p,d,m=0;for(h=0;h<=Uu;h++)e.bl_count[h]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<jW;c++)l=e.heap[c],h=n[n[l*2+1]*2+1]+1,h>u&&(h=u,m++),n[l*2+1]=h,!(l>r)&&(e.bl_count[h]++,p=0,l>=s&&(p=a[l-s]),d=n[l*2],e.opt_len+=d*(h+p),o&&(e.static_len+=d*(i[l*2+1]+p)));if(m!==0){do{for(h=u-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[u]--,m-=2}while(m>0);for(h=u;h!==0;h--)for(l=e.bl_count[h];l!==0;)f=e.heap[--c],!(f>r)&&(n[f*2+1]!==h&&(e.opt_len+=(h-n[f*2+1])*n[f*2],n[f*2+1]=h),l--)}}function WW(e,t,n){var r=new Array(Uu+1),i=0,o,a;for(o=1;o<=Uu;o++)r[o]=i=i+n[o-1]<<1;for(a=0;a<=t;a++){var s=e[a*2+1];s!==0&&(e[a*2]=XW(r[s]++,s))}}function zRe(){var e,t,n,r,i,o=new Array(Uu+1);for(n=0,r=0;r<YN-1;r++)for(qN[r]=n,e=0;e<1<<aI[r];e++)dy[n++]=r;for(dy[n-1]=r,i=0,r=0;r<16;r++)for(rT[r]=i,e=0;e<1<<g0[r];e++)py[i++]=r;for(i>>=7;r<Mf;r++)for(rT[r]=i<<7,e=0;e<1<<g0[r]-7;e++)py[256+i++]=r;for(t=0;t<=Uu;t++)o[t]=0;for(e=0;e<=143;)us[e*2+1]=8,e++,o[8]++;for(;e<=255;)us[e*2+1]=9,e++,o[9]++;for(;e<=279;)us[e*2+1]=7,e++,o[7]++;for(;e<=287;)us[e*2+1]=8,e++,o[8]++;for(WW(us,fy+1,o),e=0;e<Mf;e++)mg[e*2+1]=5,mg[e*2]=XW(e,5);UW=new KA(us,aI,lv+1,fy,Uu),zW=new KA(mg,g0,0,Mf,Uu),VW=new KA(new Array(0),FRe,0,XN,BRe)}function qW(e){var t;for(t=0;t<fy;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Mf;t++)e.dyn_dtree[t*2]=0;for(t=0;t<XN;t++)e.bl_tree[t*2]=0;e.dyn_ltree[WN*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function $W(e){e.bi_valid>8?my(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function VRe(e,t,n,r){$W(e),my(e,n),my(e,~n),PRe.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function fF(e,t,n,r){var i=t*2,o=n*2;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function ZA(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&fF(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!fF(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function pF(e,t,n){var r,i,o=0,a,s;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1],i=e.pending_buf[e.l_buf+o],o++,r===0?_a(e,i,t):(a=dy[i],_a(e,a+lv+1,t),s=aI[a],s!==0&&(i-=qN[a],ji(e,i,s)),r--,a=YW(r),_a(e,a,n),s=g0[a],s!==0&&(r-=rT[a],ji(e,r,s)));while(o<e.last_lit);_a(e,WN,t)}function sI(e,t){var n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,u=-1,c;for(e.heap_len=0,e.heap_max=jW,a=0;a<o;a++)n[a*2]!==0?(e.heap[++e.heap_len]=u=a,e.depth[a]=0):n[a*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=u<2?++u:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[c*2+1]);for(t.max_code=u,a=e.heap_len>>1;a>=1;a--)ZA(e,n,a);c=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ZA(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[c*2]=n[a*2]+n[s*2],e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[a*2+1]=n[s*2+1]=c,e.heap[1]=c++,ZA(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],URe(e,t),WW(n,u,e.bl_count)}function dF(e,t,n){var r,i=-1,o,a=t[0*2+1],s=0,u=7,c=4;for(a===0&&(u=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)o=a,a=t[(r+1)*2+1],!(++s<u&&o===a)&&(s<c?e.bl_tree[o*2]+=s:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[BW*2]++):s<=10?e.bl_tree[FW*2]++:e.bl_tree[GW*2]++,s=0,i=o,a===0?(u=138,c=3):o===a?(u=6,c=3):(u=7,c=4))}function mF(e,t,n){var r,i=-1,o,a=t[0*2+1],s=0,u=7,c=4;for(a===0&&(u=138,c=3),r=0;r<=n;r++)if(o=a,a=t[(r+1)*2+1],!(++s<u&&o===a)){if(s<c)do _a(e,o,e.bl_tree);while(--s!==0);else o!==0?(o!==i&&(_a(e,o,e.bl_tree),s--),_a(e,BW,e.bl_tree),ji(e,s-3,2)):s<=10?(_a(e,FW,e.bl_tree),ji(e,s-3,3)):(_a(e,GW,e.bl_tree),ji(e,s-11,7));s=0,i=o,a===0?(u=138,c=3):o===a?(u=6,c=3):(u=7,c=4)}}function YRe(e){var t;for(dF(e,e.dyn_ltree,e.l_desc.max_code),dF(e,e.dyn_dtree,e.d_desc.max_code),sI(e,e.bl_desc),t=XN-1;t>=3&&e.bl_tree[HW[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function XRe(e,t,n,r){var i;for(ji(e,t-257,5),ji(e,n-1,5),ji(e,r-4,4),i=0;i<r;i++)ji(e,e.bl_tree[HW[i]*2+1],3);mF(e,e.dyn_ltree,t-1),mF(e,e.dyn_dtree,n-1)}function WRe(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return cF;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return hF;for(n=32;n<lv;n++)if(e.dyn_ltree[n*2]!==0)return hF;return cF}var gF=!1;function qRe(e){gF||(zRe(),gF=!0),e.l_desc=new QA(e.dyn_ltree,UW),e.d_desc=new QA(e.dyn_dtree,zW),e.bl_desc=new QA(e.bl_tree,VW),e.bi_buf=0,e.bi_valid=0,qW(e)}function KW(e,t,n,r){ji(e,(NRe<<1)+(r?1:0),3),VRe(e,t,n)}function $Re(e){ji(e,LW<<1,3),_a(e,WN,us),HRe(e)}function KRe(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===RRe&&(e.strm.data_type=WRe(e)),sI(e,e.l_desc),sI(e,e.d_desc),a=YRe(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&t!==-1?KW(e,t,n,r):e.strategy===DRe||o===i?(ji(e,(LW<<1)+(r?1:0),3),pF(e,us,mg)):(ji(e,(MRe<<1)+(r?1:0),3),XRe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),pF(e,e.dyn_ltree,e.dyn_dtree)),qW(e),r&&$W(e)}function QRe(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(dy[n]+lv+1)*2]++,e.dyn_dtree[YW(t)*2]++),e.last_lit===e.lit_bufsize-1}yd._tr_init=qRe;yd._tr_stored_block=KW;yd._tr_flush_block=KRe;yd._tr_tally=QRe;yd._tr_align=$Re;function ZRe(e,t,n,r){for(var i=e&65535|0,o=e>>>16&65535|0,a=0;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}var QW=ZRe;function JRe(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}var eNe=JRe();function tNe(e,t,n,r){var i=eNe,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[(e^t[a])&255];return e^-1}var ZW=tNe,$N={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},fi=Qs,Oo=yd,JW=QW,dl=ZW,rNe=$N,ah=0,nNe=1,iNe=3,Hl=4,yF=5,Ta=0,vF=1,ja=-2,oNe=-3,JA=-5,aNe=-1,sNe=1,_b=2,lNe=3,uNe=4,cNe=0,hNe=2,fS=8,fNe=9,pNe=15,dNe=8,mNe=29,gNe=256,lI=gNe+1+mNe,yNe=30,vNe=19,bNe=2*lI+1,_Ne=15,Zt=3,Ml=258,Ko=Ml+Zt+1,TNe=32,pS=42,uI=69,y0=73,v0=91,b0=103,zu=113,Im=666,jn=1,uv=2,Sc=3,bd=4,ENe=3;function Ll(e,t){return e.msg=rNe[t],t}function bF(e){return(e<<1)-(e>4?9:0)}function Al(e){for(var t=e.length;--t>=0;)e[t]=0}function ml(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(fi.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))}function Bn(e,t){Oo._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ml(e.strm)}function sr(e,t){e.pending_buf[e.pending++]=t}function om(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function SNe(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,fi.arraySet(t,e.input,e.next_in,i,n),e.state.wrap===1?e.adler=JW(e.adler,t,i,n):e.state.wrap===2&&(e.adler=dl(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function eq(e,t){var n=e.max_chain_length,r=e.strstart,i,o,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-Ko?e.strstart-(e.w_size-Ko):0,c=e.window,l=e.w_mask,f=e.prev,h=e.strstart+Ml,p=c[r+a-1],d=c[r+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(c[i+a]!==d||c[i+a-1]!==p||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<h);if(o=Ml-(h-r),r=h-Ml,o>a){if(e.match_start=t,a=o,o>=s)break;p=c[r+a-1],d=c[r+a]}}while((t=f[t&l])>u&&--n!==0);return a<=e.lookahead?a:e.lookahead}function wc(e){var t=e.w_size,n,r,i,o,a;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ko)){fi.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do i=e.head[--n],e.head[n]=i>=t?i-t:0;while(--r);r=t,n=r;do i=e.prev[--n],e.prev[n]=i>=t?i-t:0;while(--r);o+=t}if(e.strm.avail_in===0)break;if(r=SNe(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=Zt)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+Zt-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<Zt)););}while(e.lookahead<Ko&&e.strm.avail_in!==0)}function wNe(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(wc(e),e.lookahead===0&&t===ah)return jn;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Bn(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Ko&&(Bn(e,!1),e.strm.avail_out===0))return jn}return e.insert=0,t===Hl?(Bn(e,!0),e.strm.avail_out===0?Sc:bd):(e.strstart>e.block_start&&(Bn(e,!1),e.strm.avail_out),jn)}function eO(e,t){for(var n,r;;){if(e.lookahead<Ko){if(wc(e),e.lookahead<Ko&&t===ah)return jn;if(e.lookahead===0)break}if(n=0,e.lookahead>=Zt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Zt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Ko&&(e.match_length=eq(e,n)),e.match_length>=Zt)if(r=Oo._tr_tally(e,e.strstart-e.match_start,e.match_length-Zt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Zt){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Zt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=Oo._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Bn(e,!1),e.strm.avail_out===0))return jn}return e.insert=e.strstart<Zt-1?e.strstart:Zt-1,t===Hl?(Bn(e,!0),e.strm.avail_out===0?Sc:bd):e.last_lit&&(Bn(e,!1),e.strm.avail_out===0)?jn:uv}function Dh(e,t){for(var n,r,i;;){if(e.lookahead<Ko){if(wc(e),e.lookahead<Ko&&t===ah)return jn;if(e.lookahead===0)break}if(n=0,e.lookahead>=Zt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Zt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Zt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Ko&&(e.match_length=eq(e,n),e.match_length<=5&&(e.strategy===sNe||e.match_length===Zt&&e.strstart-e.match_start>4096)&&(e.match_length=Zt-1)),e.prev_length>=Zt&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Zt,r=Oo._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Zt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Zt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Zt-1,e.strstart++,r&&(Bn(e,!1),e.strm.avail_out===0))return jn}else if(e.match_available){if(r=Oo._tr_tally(e,0,e.window[e.strstart-1]),r&&Bn(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return jn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Oo._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Zt-1?e.strstart:Zt-1,t===Hl?(Bn(e,!0),e.strm.avail_out===0?Sc:bd):e.last_lit&&(Bn(e,!1),e.strm.avail_out===0)?jn:uv}function ANe(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=Ml){if(wc(e),e.lookahead<=Ml&&t===ah)return jn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Zt&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+Ml;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=Ml-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Zt?(n=Oo._tr_tally(e,1,e.match_length-Zt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Oo._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Bn(e,!1),e.strm.avail_out===0))return jn}return e.insert=0,t===Hl?(Bn(e,!0),e.strm.avail_out===0?Sc:bd):e.last_lit&&(Bn(e,!1),e.strm.avail_out===0)?jn:uv}function ONe(e,t){for(var n;;){if(e.lookahead===0&&(wc(e),e.lookahead===0)){if(t===ah)return jn;break}if(e.match_length=0,n=Oo._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Bn(e,!1),e.strm.avail_out===0))return jn}return e.insert=0,t===Hl?(Bn(e,!0),e.strm.avail_out===0?Sc:bd):e.last_lit&&(Bn(e,!1),e.strm.avail_out===0)?jn:uv}function ha(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var gf;gf=[new ha(0,0,0,0,wNe),new ha(4,4,8,4,eO),new ha(4,5,16,8,eO),new ha(4,6,32,32,eO),new ha(4,4,16,16,Dh),new ha(8,16,32,32,Dh),new ha(8,16,128,128,Dh),new ha(8,32,128,256,Dh),new ha(32,128,258,1024,Dh),new ha(32,258,258,4096,Dh)];function kNe(e){e.window_size=2*e.w_size,Al(e.head),e.max_lazy_match=gf[e.level].max_lazy,e.good_match=gf[e.level].good_length,e.nice_match=gf[e.level].nice_length,e.max_chain_length=gf[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Zt-1,e.match_available=0,e.ins_h=0}function xNe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=fS,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new fi.Buf16(bNe*2),this.dyn_dtree=new fi.Buf16((2*yNe+1)*2),this.bl_tree=new fi.Buf16((2*vNe+1)*2),Al(this.dyn_ltree),Al(this.dyn_dtree),Al(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new fi.Buf16(_Ne+1),this.heap=new fi.Buf16(2*lI+1),Al(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new fi.Buf16(2*lI+1),Al(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function tq(e){var t;return!e||!e.state?Ll(e,ja):(e.total_in=e.total_out=0,e.data_type=hNe,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?pS:zu,e.adler=t.wrap===2?0:1,t.last_flush=ah,Oo._tr_init(t),Ta)}function rq(e){var t=tq(e);return t===Ta&&kNe(e.state),t}function INe(e,t){return!e||!e.state||e.state.wrap!==2?ja:(e.state.gzhead=t,Ta)}function nq(e,t,n,r,i,o){if(!e)return ja;var a=1;if(t===aNe&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>fNe||n!==fS||r<8||r>15||t<0||t>9||o<0||o>uNe)return Ll(e,ja);r===8&&(r=9);var s=new xNe;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+Zt-1)/Zt),s.window=new fi.Buf8(s.w_size*2),s.head=new fi.Buf16(s.hash_size),s.prev=new fi.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new fi.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,rq(e)}function CNe(e,t){return nq(e,t,fS,pNe,dNe,cNe)}function PNe(e,t){var n,r,i,o;if(!e||!e.state||t>yF||t<0)return e?Ll(e,ja):ja;if(r=e.state,!e.output||!e.input&&e.avail_in!==0||r.status===Im&&t!==Hl)return Ll(e,e.avail_out===0?JA:ja);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===pS)if(r.wrap===2)e.adler=0,sr(r,31),sr(r,139),sr(r,8),r.gzhead?(sr(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),sr(r,r.gzhead.time&255),sr(r,r.gzhead.time>>8&255),sr(r,r.gzhead.time>>16&255),sr(r,r.gzhead.time>>24&255),sr(r,r.level===9?2:r.strategy>=_b||r.level<2?4:0),sr(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(sr(r,r.gzhead.extra.length&255),sr(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=dl(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=uI):(sr(r,0),sr(r,0),sr(r,0),sr(r,0),sr(r,0),sr(r,r.level===9?2:r.strategy>=_b||r.level<2?4:0),sr(r,ENe),r.status=zu);else{var a=fS+(r.w_bits-8<<4)<<8,s=-1;r.strategy>=_b||r.level<2?s=0:r.level<6?s=1:r.level===6?s=2:s=3,a|=s<<6,r.strstart!==0&&(a|=TNe),a+=31-a%31,r.status=zu,om(r,a),r.strstart!==0&&(om(r,e.adler>>>16),om(r,e.adler&65535)),e.adler=1}if(r.status===uI)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=dl(e.adler,r.pending_buf,r.pending-i,i)),ml(e),i=r.pending,r.pending===r.pending_buf_size));)sr(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=dl(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=y0)}else r.status=y0;if(r.status===y0)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=dl(e.adler,r.pending_buf,r.pending-i,i)),ml(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.name.length?o=r.gzhead.name.charCodeAt(r.gzindex++)&255:o=0,sr(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=dl(e.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.gzindex=0,r.status=v0)}else r.status=v0;if(r.status===v0)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=dl(e.adler,r.pending_buf,r.pending-i,i)),ml(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.comment.length?o=r.gzhead.comment.charCodeAt(r.gzindex++)&255:o=0,sr(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=dl(e.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.status=b0)}else r.status=b0;if(r.status===b0&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ml(e),r.pending+2<=r.pending_buf_size&&(sr(r,e.adler&255),sr(r,e.adler>>8&255),e.adler=0,r.status=zu)):r.status=zu),r.pending!==0){if(ml(e),e.avail_out===0)return r.last_flush=-1,Ta}else if(e.avail_in===0&&bF(t)<=bF(n)&&t!==Hl)return Ll(e,JA);if(r.status===Im&&e.avail_in!==0)return Ll(e,JA);if(e.avail_in!==0||r.lookahead!==0||t!==ah&&r.status!==Im){var u=r.strategy===_b?ONe(r,t):r.strategy===lNe?ANe(r,t):gf[r.level].func(r,t);if((u===Sc||u===bd)&&(r.status=Im),u===jn||u===Sc)return e.avail_out===0&&(r.last_flush=-1),Ta;if(u===uv&&(t===nNe?Oo._tr_align(r):t!==yF&&(Oo._tr_stored_block(r,0,0,!1),t===iNe&&(Al(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),ml(e),e.avail_out===0))return r.last_flush=-1,Ta}return t!==Hl?Ta:r.wrap<=0?vF:(r.wrap===2?(sr(r,e.adler&255),sr(r,e.adler>>8&255),sr(r,e.adler>>16&255),sr(r,e.adler>>24&255),sr(r,e.total_in&255),sr(r,e.total_in>>8&255),sr(r,e.total_in>>16&255),sr(r,e.total_in>>24&255)):(om(r,e.adler>>>16),om(r,e.adler&65535)),ml(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Ta:vF)}function DNe(e){var t;return!e||!e.state?ja:(t=e.state.status,t!==pS&&t!==uI&&t!==y0&&t!==v0&&t!==b0&&t!==zu&&t!==Im?Ll(e,ja):(e.state=null,t===zu?Ll(e,oNe):Ta))}function RNe(e,t){var n=t.length,r,i,o,a,s,u,c,l;if(!e||!e.state||(r=e.state,a=r.wrap,a===2||a===1&&r.status!==pS||r.lookahead))return ja;for(a===1&&(e.adler=JW(e.adler,t,n,0)),r.wrap=0,n>=r.w_size&&(a===0&&(Al(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new fi.Buf8(r.w_size),fi.arraySet(l,t,n-r.w_size,r.w_size,0),t=l,n=r.w_size),s=e.avail_in,u=e.next_in,c=e.input,e.avail_in=n,e.next_in=0,e.input=t,wc(r);r.lookahead>=Zt;){i=r.strstart,o=r.lookahead-(Zt-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+Zt-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++;while(--o);r.strstart=i,r.lookahead=Zt-1,wc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Zt-1,r.match_available=0,e.next_in=u,e.input=c,e.avail_in=s,r.wrap=a,Ta}Ka.deflateInit=CNe;Ka.deflateInit2=nq;Ka.deflateReset=rq;Ka.deflateResetKeep=tq;Ka.deflateSetHeader=INe;Ka.deflate=PNe;Ka.deflateEnd=DNe;Ka.deflateSetDictionary=RNe;Ka.deflateInfo="pako deflate (from Nodeca project)";var sh={},dS=Qs,iq=!0,oq=!0;try{String.fromCharCode.apply(null,[0])}catch{iq=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{oq=!1}var gy=new dS.Buf8(256);for(var al=0;al<256;al++)gy[al]=al>=252?6:al>=248?5:al>=240?4:al>=224?3:al>=192?2:1;gy[254]=gy[254]=1;sh.string2buf=function(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new dS.Buf8(s),o=0,i=0;o<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};function aq(e,t){if(t<65534&&(e.subarray&&oq||!e.subarray&&iq))return String.fromCharCode.apply(null,dS.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}sh.buf2binstring=function(e){return aq(e,e.length)};sh.binstring2buf=function(e){for(var t=new dS.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t};sh.buf2string=function(e,t){var n,r,i,o,a=t||e.length,s=new Array(a*2);for(r=0,n=0;n<a;){if(i=e[n++],i<128){s[r++]=i;continue}if(o=gy[i],o>4){s[r++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<a;)i=i<<6|e[n++]&63,o--;if(o>1){s[r++]=65533;continue}i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|i&1023)}return aq(s,r)};sh.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+gy[e[n]]>t?n:t};function NNe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var sq=NNe,gg=Ka,yg=Qs,cI=sh,hI=$N,MNe=sq,lq=Object.prototype.toString,LNe=0,tO=4,Lf=0,_F=1,TF=2,jNe=-1,BNe=0,FNe=8;function Ac(e){if(!(this instanceof Ac))return new Ac(e);this.options=yg.assign({level:jNe,method:FNe,chunkSize:16384,windowBits:15,memLevel:8,strategy:BNe,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new MNe,this.strm.avail_out=0;var n=gg.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Lf)throw new Error(hI[n]);if(t.header&&gg.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(typeof t.dictionary=="string"?r=cI.string2buf(t.dictionary):lq.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=gg.deflateSetDictionary(this.strm,r),n!==Lf)throw new Error(hI[n]);this._dict_set=!0}}Ac.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;o=t===~~t?t:t===!0?tO:LNe,typeof e=="string"?n.input=cI.string2buf(e):lq.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new yg.Buf8(r),n.next_out=0,n.avail_out=r),i=gg.deflate(n,o),i!==_F&&i!==Lf)return this.onEnd(i),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(o===tO||o===TF))&&(this.options.to==="string"?this.onData(cI.buf2binstring(yg.shrinkBuf(n.output,n.next_out))):this.onData(yg.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&i!==_F);return o===tO?(i=gg.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Lf):(o===TF&&(this.onEnd(Lf),n.avail_out=0),!0)};Ac.prototype.onData=function(e){this.chunks.push(e)};Ac.prototype.onEnd=function(e){e===Lf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=yg.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function KN(e,t){var n=new Ac(t);if(n.push(e,!0),n.err)throw n.msg||hI[n.err];return n.result}function GNe(e,t){return t=t||{},t.raw=!0,KN(e,t)}function HNe(e,t){return t=t||{},t.gzip=!0,KN(e,t)}sv.Deflate=Ac;sv.deflate=KN;sv.deflateRaw=GNe;sv.gzip=HNe;var cv={},sa={},Tb=30,UNe=12,zNe=function(e,t){var n,r,i,o,a,s,u,c,l,f,h,p,d,m,g,v,b,y,_,T,S,E,I,x,C;n=e.state,r=e.next_in,x=e.input,i=r+(e.avail_in-5),o=e.next_out,C=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,h=n.window,p=n.hold,d=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{d<15&&(p+=x[r++]<<d,d+=8,p+=x[r++]<<d,d+=8),y=m[p&v];t:for(;;){if(_=y>>>24,p>>>=_,d-=_,_=y>>>16&255,_===0)C[o++]=y&65535;else if(_&16){T=y&65535,_&=15,_&&(d<_&&(p+=x[r++]<<d,d+=8),T+=p&(1<<_)-1,p>>>=_,d-=_),d<15&&(p+=x[r++]<<d,d+=8,p+=x[r++]<<d,d+=8),y=g[p&b];r:for(;;){if(_=y>>>24,p>>>=_,d-=_,_=y>>>16&255,_&16){if(S=y&65535,_&=15,d<_&&(p+=x[r++]<<d,d+=8,d<_&&(p+=x[r++]<<d,d+=8)),S+=p&(1<<_)-1,S>u){e.msg="invalid distance too far back",n.mode=Tb;break e}if(p>>>=_,d-=_,_=o-a,S>_){if(_=S-_,_>l&&n.sane){e.msg="invalid distance too far back",n.mode=Tb;break e}if(E=0,I=h,f===0){if(E+=c-_,_<T){T-=_;do C[o++]=h[E++];while(--_);E=o-S,I=C}}else if(f<_){if(E+=c+f-_,_-=f,_<T){T-=_;do C[o++]=h[E++];while(--_);if(E=0,f<T){_=f,T-=_;do C[o++]=h[E++];while(--_);E=o-S,I=C}}}else if(E+=f-_,_<T){T-=_;do C[o++]=h[E++];while(--_);E=o-S,I=C}for(;T>2;)C[o++]=I[E++],C[o++]=I[E++],C[o++]=I[E++],T-=3;T&&(C[o++]=I[E++],T>1&&(C[o++]=I[E++]))}else{E=o-S;do C[o++]=C[E++],C[o++]=C[E++],C[o++]=C[E++],T-=3;while(T>2);T&&(C[o++]=C[E++],T>1&&(C[o++]=C[E++]))}}else if(_&64){e.msg="invalid distance code",n.mode=Tb;break e}else{y=g[(y&65535)+(p&(1<<_)-1)];continue r}break}}else if(_&64)if(_&32){n.mode=UNe;break e}else{e.msg="invalid literal/length code",n.mode=Tb;break e}else{y=m[(y&65535)+(p&(1<<_)-1)];continue t}break}}while(r<i&&o<s);T=d>>3,r-=T,d-=T<<3,p&=(1<<d)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<s?257+(s-o):257-(o-s),n.hold=p,n.bits=d},EF=Qs,Rh=15,SF=852,wF=592,AF=0,rO=1,OF=2,VNe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],YNe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],XNe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],WNe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],qNe=function(e,t,n,r,i,o,a,s){var u=s.bits,c=0,l=0,f=0,h=0,p=0,d=0,m=0,g=0,v=0,b=0,y,_,T,S,E,I=null,x=0,C,w=new EF.Buf16(Rh+1),B=new EF.Buf16(Rh+1),L=null,k=0,R,F,U;for(c=0;c<=Rh;c++)w[c]=0;for(l=0;l<r;l++)w[t[n+l]]++;for(p=u,h=Rh;h>=1&&w[h]===0;h--);if(p>h&&(p=h),h===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(f=1;f<h&&w[f]===0;f++);for(p<f&&(p=f),g=1,c=1;c<=Rh;c++)if(g<<=1,g-=w[c],g<0)return-1;if(g>0&&(e===AF||h!==1))return-1;for(B[1]=0,c=1;c<Rh;c++)B[c+1]=B[c]+w[c];for(l=0;l<r;l++)t[n+l]!==0&&(a[B[t[n+l]]++]=l);if(e===AF?(I=L=a,C=19):e===rO?(I=VNe,x-=257,L=YNe,k-=257,C=256):(I=XNe,L=WNe,C=-1),b=0,l=0,c=f,E=o,d=p,m=0,T=-1,v=1<<p,S=v-1,e===rO&&v>SF||e===OF&&v>wF)return 1;for(;;){R=c-m,a[l]<C?(F=0,U=a[l]):a[l]>C?(F=L[k+a[l]],U=I[x+a[l]]):(F=96,U=0),y=1<<c-m,_=1<<d,f=_;do _-=y,i[E+(b>>m)+_]=R<<24|F<<16|U|0;while(_!==0);for(y=1<<c-1;b&y;)y>>=1;if(y!==0?(b&=y-1,b+=y):b=0,l++,--w[c]===0){if(c===h)break;c=t[n+a[l]]}if(c>p&&(b&S)!==T){for(m===0&&(m=p),E+=f,d=c-m,g=1<<d;d+m<h&&(g-=w[d+m],!(g<=0));)d++,g<<=1;if(v+=1<<d,e===rO&&v>SF||e===OF&&v>wF)return 1;T=b&S,i[T]=p<<24|d<<16|E-o|0}}return b!==0&&(i[E+b]=c-m<<24|64<<16|0),s.bits=p,0},ro=Qs,fI=QW,fa=ZW,$Ne=zNe,vg=qNe,KNe=0,uq=1,cq=2,kF=4,QNe=5,Eb=6,Oc=0,ZNe=1,JNe=2,js=-2,hq=-3,fq=-4,e2e=-5,xF=8,pq=1,IF=2,CF=3,PF=4,DF=5,RF=6,NF=7,MF=8,LF=9,jF=10,nT=11,ns=12,nO=13,BF=14,iO=15,FF=16,GF=17,HF=18,UF=19,Sb=20,wb=21,zF=22,VF=23,YF=24,XF=25,WF=26,oO=27,qF=28,$F=29,Nr=30,dq=31,t2e=32,r2e=852,n2e=592,i2e=15,o2e=i2e;function KF(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function a2e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ro.Buf16(320),this.work=new ro.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function mq(e){var t;return!e||!e.state?js:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=pq,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new ro.Buf32(r2e),t.distcode=t.distdyn=new ro.Buf32(n2e),t.sane=1,t.back=-1,Oc)}function gq(e){var t;return!e||!e.state?js:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,mq(e))}function yq(e,t){var n,r;return!e||!e.state||(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?js:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,gq(e))}function vq(e,t){var n,r;return e?(r=new a2e,e.state=r,r.window=null,n=yq(e,t),n!==Oc&&(e.state=null),n):js}function s2e(e){return vq(e,o2e)}var QF=!0,aO,sO;function l2e(e){if(QF){var t;for(aO=new ro.Buf32(512),sO=new ro.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(vg(uq,e.lens,0,288,aO,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;vg(cq,e.lens,0,32,sO,0,e.work,{bits:5}),QF=!1}e.lencode=aO,e.lenbits=9,e.distcode=sO,e.distbits=5}function bq(e,t,n,r){var i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new ro.Buf8(o.wsize)),r>=o.wsize?(ro.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),ro.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(ro.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function u2e(e,t){var n,r,i,o,a,s,u,c,l,f,h,p,d,m,g=0,v,b,y,_,T,S,E,I,x=new ro.Buf8(4),C,w,B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return js;n=e.state,n.mode===ns&&(n.mode=nO),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,l=n.bits,f=s,h=u,I=Oc;e:for(;;)switch(n.mode){case pq:if(n.wrap===0){n.mode=nO;break}for(;l<16;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if(n.wrap&2&&c===35615){n.check=0,x[0]=c&255,x[1]=c>>>8&255,n.check=fa(n.check,x,2,0),c=0,l=0,n.mode=IF;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Nr;break}if((c&15)!==xF){e.msg="unknown compression method",n.mode=Nr;break}if(c>>>=4,l-=4,E=(c&15)+8,n.wbits===0)n.wbits=E;else if(E>n.wbits){e.msg="invalid window size",n.mode=Nr;break}n.dmax=1<<E,e.adler=n.check=1,n.mode=c&512?jF:ns,c=0,l=0;break;case IF:for(;l<16;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if(n.flags=c,(n.flags&255)!==xF){e.msg="unknown compression method",n.mode=Nr;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Nr;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=fa(n.check,x,2,0)),c=0,l=0,n.mode=CF;case CF:for(;l<32;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}n.head&&(n.head.time=c),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=fa(n.check,x,4,0)),c=0,l=0,n.mode=PF;case PF:for(;l<16;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=fa(n.check,x,2,0)),c=0,l=0,n.mode=DF;case DF:if(n.flags&1024){for(;l<16;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=fa(n.check,x,2,0)),c=0,l=0}else n.head&&(n.head.extra=null);n.mode=RF;case RF:if(n.flags&1024&&(p=n.length,p>s&&(p=s),p&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),ro.arraySet(n.head.extra,r,o,p,E)),n.flags&512&&(n.check=fa(n.check,r,p,o)),s-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=NF;case NF:if(n.flags&2048){if(s===0)break e;p=0;do E=r[o+p++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E));while(E&&p<s);if(n.flags&512&&(n.check=fa(n.check,r,p,o)),s-=p,o+=p,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=MF;case MF:if(n.flags&4096){if(s===0)break e;p=0;do E=r[o+p++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E));while(E&&p<s);if(n.flags&512&&(n.check=fa(n.check,r,p,o)),s-=p,o+=p,E)break e}else n.head&&(n.head.comment=null);n.mode=LF;case LF:if(n.flags&512){for(;l<16;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Nr;break}c=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=ns;break;case jF:for(;l<32;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}e.adler=n.check=KF(c),c=0,l=0,n.mode=nT;case nT:if(n.havedict===0)return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=l,JNe;e.adler=n.check=1,n.mode=ns;case ns:if(t===QNe||t===Eb)break e;case nO:if(n.last){c>>>=l&7,l-=l&7,n.mode=oO;break}for(;l<3;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}switch(n.last=c&1,c>>>=1,l-=1,c&3){case 0:n.mode=BF;break;case 1:if(l2e(n),n.mode=Sb,t===Eb){c>>>=2,l-=2;break e}break;case 2:n.mode=GF;break;case 3:e.msg="invalid block type",n.mode=Nr}c>>>=2,l-=2;break;case BF:for(c>>>=l&7,l-=l&7;l<32;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Nr;break}if(n.length=c&65535,c=0,l=0,n.mode=iO,t===Eb)break e;case iO:n.mode=FF;case FF:if(p=n.length,p){if(p>s&&(p=s),p>u&&(p=u),p===0)break e;ro.arraySet(i,r,o,p,a),s-=p,o+=p,u-=p,a+=p,n.length-=p;break}n.mode=ns;break;case GF:for(;l<14;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if(n.nlen=(c&31)+257,c>>>=5,l-=5,n.ndist=(c&31)+1,c>>>=5,l-=5,n.ncode=(c&15)+4,c>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Nr;break}n.have=0,n.mode=HF;case HF:for(;n.have<n.ncode;){for(;l<3;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}n.lens[B[n.have++]]=c&7,c>>>=3,l-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},I=vg(KNe,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,I){e.msg="invalid code lengths set",n.mode=Nr;break}n.have=0,n.mode=UF;case UF:for(;n.have<n.nlen+n.ndist;){for(;g=n.lencode[c&(1<<n.lenbits)-1],v=g>>>24,b=g>>>16&255,y=g&65535,!(v<=l);){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if(y<16)c>>>=v,l-=v,n.lens[n.have++]=y;else{if(y===16){for(w=v+2;l<w;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if(c>>>=v,l-=v,n.have===0){e.msg="invalid bit length repeat",n.mode=Nr;break}E=n.lens[n.have-1],p=3+(c&3),c>>>=2,l-=2}else if(y===17){for(w=v+3;l<w;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}c>>>=v,l-=v,E=0,p=3+(c&7),c>>>=3,l-=3}else{for(w=v+7;l<w;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}c>>>=v,l-=v,E=0,p=11+(c&127),c>>>=7,l-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Nr;break}for(;p--;)n.lens[n.have++]=E}}if(n.mode===Nr)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Nr;break}if(n.lenbits=9,C={bits:n.lenbits},I=vg(uq,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,I){e.msg="invalid literal/lengths set",n.mode=Nr;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},I=vg(cq,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,I){e.msg="invalid distances set",n.mode=Nr;break}if(n.mode=Sb,t===Eb)break e;case Sb:n.mode=wb;case wb:if(s>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=l,$Ne(e,h),a=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,l=n.bits,n.mode===ns&&(n.back=-1);break}for(n.back=0;g=n.lencode[c&(1<<n.lenbits)-1],v=g>>>24,b=g>>>16&255,y=g&65535,!(v<=l);){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if(b&&!(b&240)){for(_=v,T=b,S=y;g=n.lencode[S+((c&(1<<_+T)-1)>>_)],v=g>>>24,b=g>>>16&255,y=g&65535,!(_+v<=l);){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}c>>>=_,l-=_,n.back+=_}if(c>>>=v,l-=v,n.back+=v,n.length=y,b===0){n.mode=WF;break}if(b&32){n.back=-1,n.mode=ns;break}if(b&64){e.msg="invalid literal/length code",n.mode=Nr;break}n.extra=b&15,n.mode=zF;case zF:if(n.extra){for(w=n.extra;l<w;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=VF;case VF:for(;g=n.distcode[c&(1<<n.distbits)-1],v=g>>>24,b=g>>>16&255,y=g&65535,!(v<=l);){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if(!(b&240)){for(_=v,T=b,S=y;g=n.distcode[S+((c&(1<<_+T)-1)>>_)],v=g>>>24,b=g>>>16&255,y=g&65535,!(_+v<=l);){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}c>>>=_,l-=_,n.back+=_}if(c>>>=v,l-=v,n.back+=v,b&64){e.msg="invalid distance code",n.mode=Nr;break}n.offset=y,n.extra=b&15,n.mode=YF;case YF:if(n.extra){for(w=n.extra;l<w;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Nr;break}n.mode=XF;case XF:if(u===0)break e;if(p=h-u,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Nr;break}p>n.wnext?(p-=n.wnext,d=n.wsize-p):d=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,d=a-n.offset,p=n.length;p>u&&(p=u),u-=p,n.length-=p;do i[a++]=m[d++];while(--p);n.length===0&&(n.mode=wb);break;case WF:if(u===0)break e;i[a++]=n.length,u--,n.mode=wb;break;case oO:if(n.wrap){for(;l<32;){if(s===0)break e;s--,c|=r[o++]<<l,l+=8}if(h-=u,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?fa(n.check,i,h,a-h):fI(n.check,i,h,a-h)),h=u,(n.flags?c:KF(c))!==n.check){e.msg="incorrect data check",n.mode=Nr;break}c=0,l=0}n.mode=qF;case qF:if(n.wrap&&n.flags){for(;l<32;){if(s===0)break e;s--,c+=r[o++]<<l,l+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Nr;break}c=0,l=0}n.mode=$F;case $F:I=ZNe;break e;case Nr:I=hq;break e;case dq:return fq;case t2e:default:return js}return e.next_out=a,e.avail_out=u,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=l,(n.wsize||h!==e.avail_out&&n.mode<Nr&&(n.mode<oO||t!==kF))&&bq(e,e.output,e.next_out,h-e.avail_out),f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?fa(n.check,i,h,e.next_out-h):fI(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===ns?128:0)+(n.mode===Sb||n.mode===iO?256:0),(f===0&&h===0||t===kF)&&I===Oc&&(I=e2e),I}function c2e(e){if(!e||!e.state)return js;var t=e.state;return t.window&&(t.window=null),e.state=null,Oc}function h2e(e,t){var n;return!e||!e.state||(n=e.state,!(n.wrap&2))?js:(n.head=t,t.done=!1,Oc)}function f2e(e,t){var n=t.length,r,i,o;return!e||!e.state||(r=e.state,r.wrap!==0&&r.mode!==nT)?js:r.mode===nT&&(i=1,i=fI(i,t,n,0),i!==r.check)?hq:(o=bq(e,t,n,n),o?(r.mode=dq,fq):(r.havedict=1,Oc))}sa.inflateReset=gq;sa.inflateReset2=yq;sa.inflateResetKeep=mq;sa.inflateInit=s2e;sa.inflateInit2=vq;sa.inflate=u2e;sa.inflateEnd=c2e;sa.inflateGetHeader=h2e;sa.inflateSetDictionary=f2e;sa.inflateInfo="pako inflate (from Nodeca project)";var _q={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function p2e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var d2e=p2e,jf=sa,bg=Qs,_0=sh,Qr=_q,pI=$N,m2e=sq,g2e=d2e,Tq=Object.prototype.toString;function kc(e){if(!(this instanceof kc))return new kc(e);this.options=bg.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m2e,this.strm.avail_out=0;var n=jf.inflateInit2(this.strm,t.windowBits);if(n!==Qr.Z_OK)throw new Error(pI[n]);if(this.header=new g2e,jf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=_0.string2buf(t.dictionary):Tq.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=jf.inflateSetDictionary(this.strm,t.dictionary),n!==Qr.Z_OK)))throw new Error(pI[n])}kc.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,a,s,u,c,l=!1;if(this.ended)return!1;a=t===~~t?t:t===!0?Qr.Z_FINISH:Qr.Z_NO_FLUSH,typeof e=="string"?n.input=_0.binstring2buf(e):Tq.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new bg.Buf8(r),n.next_out=0,n.avail_out=r),o=jf.inflate(n,Qr.Z_NO_FLUSH),o===Qr.Z_NEED_DICT&&i&&(o=jf.inflateSetDictionary(this.strm,i)),o===Qr.Z_BUF_ERROR&&l===!0&&(o=Qr.Z_OK,l=!1),o!==Qr.Z_STREAM_END&&o!==Qr.Z_OK)return this.onEnd(o),this.ended=!0,!1;n.next_out&&(n.avail_out===0||o===Qr.Z_STREAM_END||n.avail_in===0&&(a===Qr.Z_FINISH||a===Qr.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=_0.utf8border(n.output,n.next_out),u=n.next_out-s,c=_0.buf2string(n.output,s),n.next_out=u,n.avail_out=r-u,u&&bg.arraySet(n.output,n.output,s,u,0),this.onData(c)):this.onData(bg.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(l=!0)}while((n.avail_in>0||n.avail_out===0)&&o!==Qr.Z_STREAM_END);return o===Qr.Z_STREAM_END&&(a=Qr.Z_FINISH),a===Qr.Z_FINISH?(o=jf.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Qr.Z_OK):(a===Qr.Z_SYNC_FLUSH&&(this.onEnd(Qr.Z_OK),n.avail_out=0),!0)};kc.prototype.onData=function(e){this.chunks.push(e)};kc.prototype.onEnd=function(e){e===Qr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=bg.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function QN(e,t){var n=new kc(t);if(n.push(e,!0),n.err)throw n.msg||pI[n.err];return n.result}function y2e(e,t){return t=t||{},t.raw=!0,QN(e,t)}cv.Inflate=kc;cv.inflate=QN;cv.inflateRaw=y2e;cv.ungzip=QN;var v2e=Qs.assign,b2e=sv,_2e=cv,T2e=_q,Eq={};v2e(Eq,b2e,_2e,T2e);var E2e=Eq;const S2e=Gi(E2e);var w2e=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];const A2e=w2e;function O2e(e){if(typeof e!="string")throw new TypeError("input must be a string");let t=[],n,r,i={LOCUS_TAG:"LOCUS",DEFINITION_TAG:"DEFINITION",ACCESSION_TAG:"ACCESSION",VERSION_TAG:"VERSION",KEYWORDS_TAG:"KEYWORDS",SOURCE_TAG:"SOURCE",ORGANISM_TAG:"ORGANISM",REFERENCE_TAG:"REFERENCE",FEATURES_TAG:"FEATURES",ORIGIN_TAG:"ORIGIN",END_SEQUENCE_TAG:"//"},o=e.split(/\r?\n/),a,s,u,c,l,f=!1;for(let k of o){if(k===null)break;let R=I(k),F=C(k),U=B(k),$=w(k);if(R===i.END_SEQUENCE_TAG||$?(a=R,s=null):U&&(s=R),!(k.trim()===""||R===";")){if(!f&&a!==i.LOCUS_TAG)break;switch(a){case i.LOCUS_TAG:f=!0,g(k);break;case i.FEATURES_TAG:y(k,R,F);break;case i.ORIGIN_TAG:m(k,R);break;case i.DEFINITION_TAG:case i.ACCESSION_TAG:case i.VERSION_TAG:case i.KEYWORDS_TAG:x(a,k,a.toLowerCase());break;case i.SOURCE_TAG:s===i.ORGANISM_TAG?x(s,k,"organism"):x(R,k,"source");break;case i.REFERENCE_TAG:if(R===i.REFERENCE_TAG){const ie=n.references||[];n.references=ie,ie.push({})}b(k,s);break;case i.END_SEQUENCE_TAG:h();break}}}return t[t.length-1]!==n&&h(),t;function h(){d(),t.push(n)}function p(){return n.features[n.features.length-1]}function d(){if(n&&n.features)for(let k=0;k<n.features.length;k++)n.features[k]=L(n.features[k])}function m(k,R){if(R!==i.ORIGIN_TAG){let F=k.replace(/[\s]*[0-9]*/g,"");n.sequence+=F}}function g(k){n={features:[],name:"Untitled sequence",sequence:"",references:[]},k=v(i.LOCUS_TAG,k);const R=k.match(/^([^\s]+)\s+(\d+)\s+bp\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*([^\s]+)?$/);let F=R[1],U=+R[2],$=R[3],ie=R[4]==="circular";const oe=n;let me="";R[6]?(oe.genbankDivision=R[5],me=R[6]):me=R[5],oe.circular=ie,oe.moleculeType=$;const ae=me.match(/^(\d{2})-(.{3})-(\d{4})$/),X=new Date;X.setFullYear(+ae[3]),X.setUTCMonth(A2e.indexOf(ae[2].toUpperCase())),X.setDate(+ae[1]),X.setUTCHours(12),X.setMinutes(0),X.setSeconds(0),X.setMilliseconds(0),oe.date=X.toISOString(),oe.name=F,oe.size=U}function v(k,R){return R=R.replace(/^\s*/,""),R.indexOf(k)===0&&(R=R.replace(k,"")),R.trim()}function b(k,R){const F=n.references;let U=F[F.length-1];R?x(R,k,R.toLowerCase(),U):x(i.REFERENCE_TAG,k,"description",U)}function y(k,R,F){let U;if(R===i.FEATURES_TAG){c=!0;return}if(c&&(u=Sq(k),c=!1),k2e(k,u))l?(S(k.trim()),l=!0):(r&&(r[r.length-1]+=k.trim().replace(/"/g,"")),l=!1);else if(T(k))p()&&(E(k),l=!1);else{F.match(/complement/g)?U=-1:U=1,_();let $=p();$.type=R,$.strand=U,S(F),l=!0}}function _(){n.features.push({notes:{}})}function T(k){let R=!1;return(k.trim().charAt(0).match(/\//)||k.match(/^[\s]*\/[\w]+=[\S]+/))&&(R=!0),R}function S(k){k=k.trim();let R=[];k.replace(/(\d+)/g,function(U,$){R.push($)});let F=p();F.start=+R[0],F.end=R[1]===void 0?+R[0]:+R[1]}function E(k){let R,F;R=k.trim(),R=R.replace(/^\/|"$/g,""),F=R.split(/="|=/);let U=F[1];U&&(U=U.replace(/\\/g," "),k.match(/="/g)?U=U.replace(/".*/g,""):U.match(/^\d+$/g)&&(U=+U));let $=F[0],ie=p().notes;ie[$]?ie[$].push(U):ie[$]=[U],r=ie[$]}function I(k){let R;return k=k.trim(),R=k.split(/[\s]+/),R[0]}function x(k,R,F,U){U=U||n;let $=v(k,R);U[F]=U[F]?`${U[F]} `:"",U[F]+=$}function C(k){let R;return k.indexOf("=")<0?(k=k.replace(/^[\s]*[\S]+[\s]+|[\s]+$/,""),k=k.trim(),k):(R=k.split(/=/),R[1])}function w(k){let R=!1;return k.substr(0,10).match(/^[\S]+/)&&(R=!0),R}function B(k){let R=!1;return k.substr(0,10).match(/^[\s]+[\S]+/)&&(R=!0),R}function L(k){return k.notes.label?k.name=k.notes.label[0]:k.notes.gene?k.name=k.notes.gene[0]:k.notes.ApEinfo_label?k.name=k.notes.ApEinfo_label[0]:k.notes.name?k.name=k.notes.name[0]:k.notes.organism?k.name=k.notes.organism[0]:k.notes.locus_tag?k.name=k.notes.locus_tag[0]:k.notes.note?k.name=k.notes.note[0]:k.name="Untitled Feature",k.name=typeof k.name=="string"?k.name:String(k.name),k}}function k2e(e,t){let n=Sq(e);return!(t===n||e.trim().charAt(0).match(/\//))}function Sq(e){let t=/^\s*/.exec(e);return t!==null?t[0].length:0}var x2e=O2e;const I2e=Gi(x2e);function C2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R2e(r.key),r)}}function D2e(e,t,n){return t&&P2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R2e(e){var t=N2e(e,"string");return typeof t=="symbol"?t:String(t)}function N2e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ZF(e,t,n){const r=[];if(!e.length)return[];let i=e[0].start,o=e[0].end;for(let a=1;a<e.length;a++)e[a].start<o+5*1/t?o=Math.max(o,e[a].end):(r.push({type:"filler",start:i,end:o,strand:n}),i=e[a].start,o=e[a].end);return r.push({start:i,end:o,type:"filler",strand:n}),r}function M2e(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function L2e(e){return e.type==="filler"}function j2e(e){const t=e.end-e.start,n=e.strand===1?"+":"-",r=zt.nice();return L2e(e)?{xStart:e.start,xEnd:e.end,strand:e.strand,fields:[],type:"filler",uid:r}:{xStart:e.start,xEnd:e.end,strand:n,chrOffset:0,importance:e.end-e.start,uid:r,type:e.type,fields:["chrom",e.start,e.end,e.name,t,n,"","",e.type,e.name,e.start.toString(),e.end.toString(),e.start.toString(),e.end.toString()]}}function B2e(e){const t=I2e(e),n=M2e(t[0].features.filter(r=>r.type!=="source").sort((r,i)=>r.start-i.start));return{json:t,features:n}}async function F2e(e,{gzipped:t}){if(!t)return e.text();const n=await e.arrayBuffer();return S2e.inflate(n,{to:"string"})}let wq=function(){function e(t){C2e(this,e),this.dataConfig=t,this.trackUid=zt.nice(),this.errorTxt="";let n;if(t.url){const r=t.url.slice(t.url.length-3);n=fetch(t.url,{mode:"cors",redirect:"follow",method:"GET"}).then(i=>F2e(i,{gzipped:r===".gz"}))}else if(t.text)n=Promise.resolve(t.text);else throw new Error("No data or URL specified");this.gbDataPromise=n.then(r=>B2e(r))}return D2e(e,[{key:"tilesetInfo",value:function(t){return this.tilesetInfoLoading=!0,this.gbDataPromise.then(n=>{this.tilesetInfoLoading=!1;const r=1024,i={name:`genbank-${this.trackUid}`,tile_size:r,max_zoom:Math.ceil(Math.log(n.json[0].size/r)/Math.log(2)),max_width:n.json[0].size,min_pos:[0],max_pos:[n.json[0].size]};return t&&t(i),i}).catch(n=>{this.tilesetInfoLoading=!1,t&&t({error:`Error parsing genbank: ${n}`})})}},{key:"fetchTilesDebounced",value:async function(t,n){const r={},i=[],o=[];for(const s of n){const u=s.split("."),c=parseInt(u[0],10),l=parseInt(u[1],10);if(Number.isNaN(l)||Number.isNaN(c)){console.warn("Invalid tile zoom or position:",c,l);continue}i.push(s),o.push(this.tile(c,l))}const a=await Promise.all(o);for(let s=0;s<a.length;s++){const u=i[s];r[u]=a[s],r[u].tilePositionId=u}return t(r),r}},{key:"tile",value:async function(t,n){const[r,i]=await Promise.all([this.tilesetInfo(),this.gbDataPromise]);if(!r)throw new Error("No tileset info");const o=+r.max_width/2**+t,a=r.min_pos[0]+n*o,s=r.min_pos[0]+(n+1)*o,u=i.features.filter(d=>d.end>a&&d.start<s),c=1024/2**(r.max_zoom-t),l=ZF(u.filter(d=>d.strand===1),c,"+"),f=ZF(u.filter(d=>d.strand!==1),c,"-"),h=[],p=20;for(let d=0;d<i.features.length&&!(h.length>=p);d++)i.features[d].end>=a&&i.features[d].start<=s&&h.push(i.features[d]);return[h,l,f].flatMap(d=>d.map(j2e))}}]),e}();function G2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z2e(r.key),r)}}function U2e(e,t,n){return t&&H2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function z2e(e){var t=V2e(e,"string");return typeof t=="symbol"?t:String(t)}function V2e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}let Aq=function(){function e(t){G2e(this,e),this.dataConfig=t,this.tilesetInfoData=Object.values(this.dataConfig.tilesetInfo)[0],this.tilesData={},this.tilesetInfoLoading=!0}return U2e(e,[{key:"tilesetInfo",value:async function(t){return this.tilesetInfoLoading=!1,t(this.tilesetInfoData),this.tilesetInfoData}},{key:"fetchTilesDebounced",value:async function(t,n){this.tilesData={};for(const o of Object.keys(this.dataConfig.tiles)){const a=`localtile.${o.split(".").slice(1).join(".")}`;this.tilesData[a]=this.dataConfig.tiles[o]}const r={},i=n.map(o=>`localtile.${o}`);IR(this.tilesData,"",i);for(const o of n)r[o]=this.tilesData[`localtile.${o}`];return t(r),r}},{key:"tile",value:function(t,n){}}]),e}();function Y2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q2e(r.key),r)}}function W2e(e,t,n){return t&&X2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q2e(e){var t=$2e(e,"string");return typeof t=="symbol"?t:String(t)}function $2e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function K2e(e){return e.data===null}let Q2e=function(){function e(){Y2e(this,e),this.taskList=[],this.taskHandle=null,this.requestIdleCallbackTimeout=300}return W2e(e,[{key:"enqueueTask",value:function(t,n,r=null){r===null?this.taskList.push({handler:t,data:n}):(this.taskList=this.taskList.filter(i=>i.trackId!==r),this.taskList.push({handler:t,data:n,trackId:r})),this.taskHandle||(this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}))}},{key:"runTaskQueue",value:function(t){for(;(t.timeRemaining()>0||t.didTimeout)&&this.taskList.length;){const n=this.taskList.shift();n&&K2e(n)?n.handler():n&&n.handler(n.data)}this.taskList.length?this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}):this.taskHandle=0}}]),e}();const Z2e=new Q2e;function J2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eMe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rMe(r.key),r)}}function tMe(e,t,n){return t&&eMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rMe(e){var t=nMe(e,"string");return typeof t=="symbol"?t:String(t)}function nMe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Vu(){return typeof Reflect<"u"&&Reflect.get?Vu=Reflect.get.bind():Vu=function(e,t,n){var r=iMe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Vu.apply(this,arguments)}function iMe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=bs(e),e!==null););return e}function oMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dI(e,t)}function dI(e,t){return dI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},dI(e,t)}function aMe(e){var t=lMe();return function(){var n=bs(e),r;if(t){var i=bs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return sMe(this,r)}}function sMe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mI(e)}function mI(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lMe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bs(e){return bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bs(e)}function uMe(e,t,n,r,i){const o=e,a=0;return o==="log"&&t>0?["log",eu().range([254,0]).domain([t+a,r+a])]:["linear",kt().range([254,0]).domain([t,r])]}let lh=function(e){oMe(n,e);var t=aMe(n);function n(r,i){var o;J2e(this,n),o=t.call(this,r,i);const{pubSub:a,dataConfig:s,handleTilesetInfoReceived:u,animate:c,onValueScaleChanged:l}=r;return o.renderVersion=1,o.visibleTiles=new Set,o.visibleTileIds=new Set,o.renderingTiles=new Set,o.fetching=new Set,o.scale={},o.fetchedTiles={},o.tileGraphics={},o.maxZoom=0,o.medianVisibleValue=null,o.backgroundTaskScheduler=Z2e,o.continuousScaling="requestIdleCallback"in window,o.valueScaleMin=null,o.fixedValueScaleMin=null,o.valueScaleMax=null,o.fixedValueScaleMax=null,o.listeners={},o.pubSub=a,o.animate=c,o.onValueScaleChanged=l,o.prevValueScale=null,r.dataFetcher?o.dataFetcher=r.dataFetcher:o.dataFetcher=new hS(s,o.pubSub),o.tilesetInfo=null,o.uuid=zt.nice(),o.trackNotFoundText=new Ue.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"black"}),o.pLabel.addChild(o.trackNotFoundText),o.refreshTilesDebounced=X9(o.refreshTiles.bind(mI(o)),A_,A_),o.dataFetcher.tilesetInfo((f,h)=>{if(f){if(o.tilesetInfo=f,o.dataFetcher.dataConfig.tilesetUid||(o.dataFetcher.dataConfig.tilesetUid=h),o.tilesetUid=o.dataFetcher.dataConfig.tilesetUid,o.server=o.dataFetcher.dataConfig.server||"unknown",o.tilesetInfo&&o.tilesetInfo.chromsizes&&(o.chromInfo=v1(o.tilesetInfo.chromsizes)),"error"in o.tilesetInfo){console.warn("Error retrieving tilesetInfo:",s,o.tilesetInfo.error),o.tilesetInfo=null,o.setError(o.tilesetInfo.error);return}o.tilesetInfo.resolutions?o.maxZoom=o.tilesetInfo.resolutions.length:o.maxZoom=+o.tilesetInfo.max_zoom,o.options&&o.options.maxZoom&&(o.options.maxZoom>=0?o.maxZoom=Math.min(o.options.maxZoom,o.maxZoom):console.error("Invalid maxZoom on track:",mI(o))),o.refreshTiles(),u&&u(f),o.options||(o.options={}),o.options.name=o.options.name||f.name,o.checkValueScaleLimits(),o.draw(),o.drawLabel(),o.animate()}}),o}return tMe(n,[{key:"setError",value:function(r){this.errorTextText=r,this.draw(),this.animate()}},{key:"setFixedValueScaleMin",value:function(r){Number.isNaN(+r)?this.fixedValueScaleMin=null:this.fixedValueScaleMin=+r}},{key:"setFixedValueScaleMax",value:function(r){Number.isNaN(+r)?this.fixedValueScaleMax=null:this.fixedValueScaleMax=+r}},{key:"checkValueScaleLimits",value:function(){this.valueScaleMin=typeof this.options.valueScaleMin<"u"?+this.options.valueScaleMin:null,this.fixedValueScaleMin!==null&&(this.valueScaleMin=this.fixedValueScaleMin),this.valueScaleMax=typeof this.options.valueScaleMax<"u"?+this.options.valueScaleMax:null,this.fixedValueScaleMax!==null&&(this.valueScaleMax=this.fixedValueScaleMax)}},{key:"on",value:function(r,i){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)}},{key:"off",value:function(r,i){const o=this.listeners[r].indexOf(i);o===-1||o>=this.listeners[r].length||this.listeners[r].splice(o,1)}},{key:"rerender",value:function(r){Vu(bs(n.prototype),"rerender",this).call(this,r),this.renderVersion+=1,this.tilesetInfo&&(this.checkValueScaleLimits(),this.tilesetInfo.resolutions?this.maxZoom=this.tilesetInfo.resolutions.length:this.maxZoom=+this.tilesetInfo.max_zoom,this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?this.maxZoom=Math.min(this.options.maxZoom,this.maxZoom):console.error("Invalid maxZoom on track:",this)))}},{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter(r=>this.visibleTileIds.has(r))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map(r=>this.fetchedTiles[r])}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(i=>({tileId:this.tileToLocalId(i),remoteId:this.tileToRemoteId(i),mirrored:i.mirrored})),this.visibleTileIds=new Set(this.visibleTiles.map(i=>i.tileId))}},{key:"removeOldTiles",value:function(){this.calculateVisibleTiles();const r=[...new Set(Object.keys(this.fetchedTiles))].filter(i=>!this.visibleTileIds.has(i));this.removeTiles(r)}},{key:"refreshTiles",value:function(){if(!this.tilesetInfo)return;this.calculateVisibleTiles();const r=new Set(Object.keys(this.fetchedTiles)),i=[...this.visibleTiles].filter(o=>!this.fetching.has(o.remoteId)&&!r.has(o.tileId));for(let o=0;o<i.length;o++)this.fetching.add(i[o].remoteId);this.removeOldTiles(),this.fetchNewTiles(i)}},{key:"parentInFetched",value:function(r){const i=r.tileData.tilesetUid;let o=r.tileData.zoomLevel,a=r.tileData.tilePos;for(;o>0;)if(o-=1,a=a.map(s=>Math.floor(s/2)),`${i}.${o}.${a.join(".")}`in this.fetchedTiles)return!0;return!1}},{key:"parentTileId",value:function(r){const i=r.tileData.zoomLevel-1,o=r.tileData.tilePos.map(a=>Math.floor(a/2));return`${r.tileData.tilesetUid}.${i}.${o.join(".")}`}},{key:"removeTiles",value:function(r){!r.length||!this.areAllVisibleTilesLoaded()||this.renderingTiles.size||(r.forEach(i=>{const o=i;this.destroyTile(this.fetchedTiles[o]),o in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[o]),delete this.tileGraphics[o]),delete this.fetchedTiles[o]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"zoomed",value:function(r,i,o=1,a=0,s=0){this.xScale(r),this.yScale(i),this.refreshTilesDebounced(),this.pMobile.position.x=a,this.pMobile.position.y=this.position[1],this.pMobile.scale.x=o,this.pMobile.scale.y=1}},{key:"setPosition",value:function(r){Vu(bs(n.prototype),"setPosition",this).call(this,r)}},{key:"setDimensions",value:function(r){Vu(bs(n.prototype),"setDimensions",this).call(this,r)}},{key:"areAllVisibleTilesLoaded",value:function(){const r=new Set(Object.keys(this.fetchedTiles)),i=[...this.visibleTileIds];for(let o=0;o<i.length;o++)if(!r.has(i[o]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(r){return r?(this.scale.minValue=r,this):this.valueScaleMin!==null?this.valueScaleMin:this.scale.minValue}},{key:"maxValue",value:function(r){return r?(this.scale.maxValue=r,this):this.valueScaleMax!==null?this.valueScaleMax:this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"initTile",value:function(){this.scale.minRawValue=this.continuousScaling?this.minVisibleValue():this.minVisibleValueInTiles(),this.scale.maxRawValue=this.continuousScaling?this.maxVisibleValue():this.maxVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue}},{key:"updateTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"addMissingGraphics",value:function(){const r=Object.keys(this.fetchedTiles);this.renderVersion+=1;for(let i=0;i<r.length;i++)if(!(r[i]in this.tileGraphics)){const o=new Ue.PIXI.Graphics;this.pMain.addChild(o),this.fetchedTiles[r[i]].graphics=o,this.initTile(this.fetchedTiles[r[i]]),this.tileGraphics[r[i]]=o}}},{key:"updateExistingGraphics",value:function(){const r=Object.keys(this.fetchedTiles);for(let i=0;i<r.length;i++){const o=this.fetchedTiles[r[i]];this.updateTile(o)}}},{key:"synchronizeTilesAndGraphics",value:function(){if(this.addMissingGraphics(),this.removeOldTiles(),this.updateExistingGraphics(),this.listeners.dataChanged)for(const r of this.listeners.dataChanged)r(this.visibleAndFetchedTiles().map(i=>i.tileData))}},{key:"loadTileData",value:function(r,i){let o=this.lruCache.get(r.tileId);return o||(o=i(r.data,r.type),this.lruCache.put(r.tileId,o)),o}},{key:"fetchNewTiles",value:function(r){if(r.length>0){const i=[...new Set(r.map(o=>o.remoteId))];this.dataFetcher.fetchTilesDebounced(this.receivedTiles.bind(this),i)}}},{key:"receivedTiles",value:function(r){for(let i=0;i<this.visibleTiles.length;i++){const{tileId:o}=this.visibleTiles[i];if(r[this.visibleTiles[i].remoteId]&&this.visibleTiles[i].remoteId in r){if(o in this.fetchedTiles||(this.fetchedTiles[o]=this.visibleTiles[i]),Array.isArray(r[this.visibleTiles[i].remoteId])){const a=r[this.visibleTiles[i].remoteId];this.fetchedTiles[o].tileData=[...a],Object.keys(a).filter(s=>Number.isNaN(+s)).forEach(s=>{this.fetchedTiles[o].tileData[s]=a[s]})}else this.fetchedTiles[o].tileData={...r[this.visibleTiles[i].remoteId]};this.fetchedTiles[o].tileData.error&&console.warn("Error in loaded tile",o,this.fetchedTiles[o].tileData)}}for(const i in r)if(r[i]){const o=r[i].tilePositionId;this.fetching.has(o)&&this.fetching.delete(o)}this.synchronizeTilesAndGraphics(),this.draw(),this.drawLabel(),this.valueScale&&(!this.prevValueScale||JSON.stringify(this.valueScale.domain())!==JSON.stringify(this.prevValueScale.domain()))&&(this.prevValueScale=this.valueScale.copy(),this.onValueScaleChanged&&this.onValueScaleChanged()),this.animate(),this.areAllVisibleTilesLoaded()&&this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesLoaded",{uuid:this.uuid})}},{key:"draw",value:function(){if(this.delayDrawing)return;this.tilesetInfo?this.trackNotFoundText.visible=!1:(this.dataFetcher.tilesetInfoLoading?this.trackNotFoundText.text="Loading...":this.trackNotFoundText.text=`Tileset info not found. Server: [${this.server}] tilesetUid: [${this.tilesetUid}]`,[this.trackNotFoundText.x,this.trackNotFoundText.y]=this.position,this.flipText&&(this.trackNotFoundText.anchor.x=1,this.trackNotFoundText.scale.x=-1),this.trackNotFoundText.visible=!0),this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesDrawnStart",{uuid:this.uuid});const r=Object.values(this.fetchedTiles).map(i=>i.tileData&&i.tileData.error&&`${i.tileId}: ${i.tileData.error}`).filter(i=>i);r.length?this.errorTextText=r.join(`
`):this.errorTextText="",Vu(bs(n.prototype),"draw",this).call(this),Object.keys(this.fetchedTiles).forEach(i=>{this.drawTile(this.fetchedTiles[i])}),this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesDrawnEnd",{uuid:this.uuid})}},{key:"drawTile",value:function(){}},{key:"calculateMedianVisibleValue",value:function(){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let r=this.visibleAndFetchedIds();r.length===0&&(r=Object.keys(this.fetchedTiles));const i=[].concat(...r.filter(o=>this.fetchedTiles[o].tileData.dense).map(o=>Array.from(this.fetchedTiles[o].tileData.dense))).filter(o=>o>0);return this.medianVisibleValue=SD(i),this.medianVisibleValue}},{key:"allVisibleValues",value:function(){return[].concat(...this.visibleAndFetchedIds().map(r=>Array.from(this.fetchedTiles[r].tileData.dense)))}},{key:"minVisibleValue",value:function(r=!1){return this.minVisibleValueInTiles(r)}},{key:"minVisibleValueInTiles",value:function(r=!1){let i=this.visibleAndFetchedIds();i.length===0&&(i=Object.keys(this.fetchedTiles));let o=Math.min(...i.map(a=>this.fetchedTiles[a].tileData.minNonZero));return o===Number.MAX_SAFE_INTEGER&&(o=null),r?o:this.valueScaleMin!==null?this.valueScaleMin:o}},{key:"maxVisibleValue",value:function(r=!1){return this.maxVisibleValueInTiles(r)}},{key:"maxVisibleValueInTiles",value:function(r=!1){let i=this.visibleAndFetchedIds();i.length===0&&(i=Object.keys(this.fetchedTiles));let o=Math.max(...i.map(a=>this.fetchedTiles[a].tileData.maxNonZero));return o===Number.MIN_SAFE_INTEGER&&(o=null),r?o:this.valueScaleMax!==null?this.valueScaleMax:o}},{key:"makeValueScale",value:function(r,i,o,a){let s=null,u=0,c=a;(c===null||typeof c>"u")&&(c=6);let l=Math.min(this.dimensions[1]-c,c),f=Math.max(this.dimensions[1]-c,c);if(this.dimensions[1]-c<c&&(l=this.dimensions[1]/2,f=this.dimensions[1]/2),this.options.valueScaling==="log")u=i,u||(u=r),s=eu().domain([u,o+u]).range([l,f]);else if(this.options.valueScaling==="quantile"){const h=this.dimensions[1]-c,p=c,d=u_().domain(this.allVisibleValues()).range(yi(h,p,(p-h)/256));return d.ticks=m=>hc(h,p,m),[d,0]}else if(this.options.valueScaling==="setquantile"){const h=this.dimensions[1]-c,p=c,d=new Set(this.allVisibleValues()),m=u_().domain([...d]).range(yi(h,p,(p-h)/256));return m.ticks=g=>hc(h,p,g),[m,0]}else s=kt().domain([r,o]).range([f,l]);return[s,u]}}]),n}(Ai);function cMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hMe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pMe(r.key),r)}}function fMe(e,t,n){return t&&hMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pMe(e){var t=dMe(e,"string");return typeof t=="symbol"?t:String(t)}function dMe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Zr(){return typeof Reflect<"u"&&Reflect.get?Zr=Reflect.get.bind():Zr=function(e,t,n){var r=mMe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Zr.apply(this,arguments)}function mMe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ur(e),e!==null););return e}function gMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gI(e,t)}function gI(e,t){return gI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},gI(e,t)}function yMe(e){var t=bMe();return function(){var n=Ur(e),r;if(t){var i=Ur(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vMe(this,r)}}function vMe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T0(e)}function T0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bMe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ur(e){return Ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ur(e)}const JF=200,gl=10,Cm=40,Zn=10,yl=Zn,eG=4,Vh=1,vl=4,tG=5,_Me=256,am=gl+Cm+Zn+Vh+yl+vl;let hv=function(e){gMe(n,e);var t=yMe(n);function n(r,i){var o;cMe(this,n);const a={...r};a.onValueScaleChanged=()=>{r.onValueScaleChanged(),o.drawColorbar()},o=t.call(this,a,i);const{pubSub:s,animate:u,svgElement:c,onTrackOptionsChanged:l,onMouseMoveZoom:f,isShowGlobalMousePosition:h,isValueScaleLocked:p}=r;return o.pubSub=s,o.is2d=!0,o.animate=u,o.uid=zt.nice(),o.scaleBrush=Hy(),o.onTrackOptionsChanged=l,o.isShowGlobalMousePosition=h,o.isValueScaleLocked=p,o.pColorbarArea=new Ue.PIXI.Graphics,o.pMasked.addChild(o.pColorbarArea),o.pColorbar=new Ue.PIXI.Graphics,o.pColorbarArea.addChild(o.pColorbar),o.axis=new uS(T0(o)),o.pColorbarArea.addChild(o.axis.pAxis),o.colorScale=hp,i&&i.colorRange&&(o.colorScale=$l(i.colorRange)),o.gBase=Wt(c).append("g"),o.gMain=o.gBase.append("g"),o.gColorscaleBrush=o.gMain.append("g"),o.brushing=!1,o.prevOptions="",o.prevIndUpperLeftTile="",o.onMouseMoveZoom=f,o.setDataLensSize(11),o.dataLens=new Float32Array(o.dataLensSize**2),o.mouseMoveHandlerBound=o.mouseMoveHandler.bind(T0(o)),o.onMouseMoveZoom&&o.pubSubs.push(o.pubSub.subscribe("app.mouseMove",o.mouseMoveHandlerBound)),o.options&&o.options.showMousePosition&&!o.hideMousePosition&&(o.hideMousePosition=gc(T0(o),o.is2d,o.isShowGlobalMousePosition())),o.prevOptions=JSON.stringify(i),o}return fMe(n,[{key:"mouseMoveHandler",value:function(r){this.isWithin(r.x,r.y)&&(this.mouseX=r.x,this.mouseY=r.y,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(r=this.mouseX,i=this.mouseY){if(typeof r>"u"||typeof i>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;const o=r-this.position[0],a=i-this.position[1];let s,u;try{u=this.getVisibleRectangleData(o-this.dataLensPadding,a-this.dataLensPadding,this.dataLensSize,this.dataLensSize),s=u.get(this.dataLensPadding,this.dataLensPadding)}catch{return}const c=this.dataLensSize;let l;try{l=MR(this.limitedValueScale,this.colorScale,this.valueScale.domain()[0])}catch{return}if(!l)return;const f=Math.round(this._xScale.invert(o)),h=Math.round(this._yScale.invert(a));let p=[f,h],d=[Math.round(this._xScale.invert(o-this.dataLensPadding)),Math.round(this._xScale.invert(o+this.dataLensPadding))],m=[Math.round(this._yScale.invert(a-this.dataLensPadding)),Math.round(this._yScale.invert(a+this.dataLensPadding))];this.chromInfo&&(p=p.map(g=>pn(g,this.chromInfo).slice(0,2)),d=d.map(g=>pn(g,this.chromInfo).slice(0,2)),m=m.map(g=>pn(g,this.chromInfo).slice(0,2))),this.onMouseMoveZoom({trackId:this.id,data:s,absX:r,absY:i,relX:o,relY:a,dataX:f,dataY:h,orientation:"2d",dataLens:u,dim:c,toRgb:l,center:p,xRange:d,yRange:m,isGenomicCoords:!!this.chromInfo})}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!0)}},{key:"getAbsTileDim",value:function(r,i,o){const{tileX:a,tileY:s,tileWidth:u,tileHeight:c}=this.getTilePosAndDimensions(r,i),l={};return l.width=this._refXScale(a+u)-this._refXScale(a),l.height=this._refYScale(s+c)-this._refYScale(s),o?(l.x=this._refXScale(s),l.y=this._refYScale(a)):(l.x=this._refXScale(a),l.y=this._refYScale(s)),l}},{key:"updateValueScale",value:function(){let r=this.minValue(),i=this.maxValue();const o=1e-6;r!=null&&i!==void 0&&i!==null&&Math.abs(r-i)<o&&(r=Math.max(o,r-.001),i+=.001);const[a,s]=uMe(this.options&&this.options.heatmapValueScaling||"log",r,this.medianVisibleValue,i);return this.valueScale=s,this.limitedValueScale=this.valueScale.copy(),this.options&&typeof this.options.scaleStartPercent<"u"&&typeof this.options.scaleEndPercent<"u"&&this.limitedValueScale.domain([this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleStartPercent,this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleEndPercent]),[a,s]}},{key:"rerender",value:function(r,i){Zr(Ur(n.prototype),"rerender",this).call(this,r,i),this.updateValueScale();const o=JSON.stringify(r);this.drawColorbar(),!(!i&&o===this.prevOptions)&&(this.prevOptions=o,this.options=r,Zr(Ur(n.prototype),"rerender",this).call(this,r,i),this.calculateVisibleTiles(),r&&r.colorRange&&(this.colorScale=$l(r.colorRange)),this.visibleAndFetchedTiles().forEach(a=>this.renderTile(a)),this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0),this.options&&this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=gc(this,this.is2d,this.isShowGlobalMousePosition())))}},{key:"drawLabel",value:function(){this.options.labelPosition===this.options.colorbarPosition?this.labelXOffset=am:this.labelXOffset=0,Zr(Ur(n.prototype),"drawLabel",this).call(this)}},{key:"tileDataToCanvas",value:function(r){const i=document.createElement("canvas");i.width=this.binsPerTile(),i.height=this.binsPerTile();const o=i.getContext("2d");o.fillStyle="transparent",o.fillRect(0,0,i.width,i.height);const a=new ImageData(r,i.width,i.height);return o.putImageData(a,0,0),i}},{key:"exportData",value:function(){if(this.tilesetInfo){const r=this.getVisibleRectangleData(0,0,this.dimensions[0],this.dimensions[1]),i={bounds:[this._xScale.domain(),this._yScale.domain()],dimensions:r.shape,data:U9(r)};$m("data.json",JSON.stringify(i))}}},{key:"setSpriteProperties",value:function(r,i,o,a){const s=this.getAbsTileDim(i,o,a);r.width=s.width,r.height=s.height,r.x=s.x,r.y=s.y,a&&o[0]!==o[1]&&(r.rotation=-Math.PI/2,r.scale.x=Math.abs(r.scale.x)*-1)}},{key:"refXScale",value:function(r){Zr(Ur(n.prototype),"refXScale",this).call(this,r),this.draw()}},{key:"refYScale",value:function(r){Zr(Ur(n.prototype),"refYScale",this).call(this,r),this.draw()}},{key:"draw",value:function(){Zr(Ur(n.prototype),"draw",this).call(this)}},{key:"newBrushOptions",value:function(r){const i=JSON.parse(JSON.stringify(this.options)),o=this.valueScale.copy().range([this.colorbarHeight,0]),a=o.invert(r[0]),s=(o.invert(r[1])-o.domain()[0])/(o.domain()[1]-o.domain()[0]),u=(a-o.domain()[0])/(o.domain()[1]-o.domain()[0]);return i.scaleStartPercent=s.toFixed(tG),i.scaleEndPercent=u.toFixed(tG),i}},{key:"brushStart",value:function(){this.brushing=!0}},{key:"brushMoved",value:function(r){if(!r.selection)return;const i=this.newBrushOptions(r.selection),o=JSON.stringify(i);this.gColorscaleBrush.selectAll(".handle--custom").attr("y",a=>a.type==="n"?r.selection[0]:r.selection[1]-eG/2),o!==this.prevOptions&&(this.prevOptions=o,this.rerender(i,!0),this.onTrackOptionsChanged(i),this.isValueScaleLocked()&&this.onValueScaleChanged())}},{key:"brushEnd",value:function(){this.brushing=!1}},{key:"setPosition",value:function(r){Zr(Ur(n.prototype),"setPosition",this).call(this,r),this.drawColorbar()}},{key:"setDimensions",value:function(r){Zr(Ur(n.prototype),"setDimensions",this).call(this,r),this.drawColorbar()}},{key:"removeColorbar",value:function(){this.pColorbarArea.visible=!1,this.scaleBrush.on(".brush")&&this.gColorscaleBrush.call(this.scaleBrush.move,null),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.selectAll("rect").remove()}},{key:"drawColorbar",value:function(){if(this.pColorbar.clear(),!this.options||!this.options.colorbarPosition||this.options.colorbarPosition==="hidden"){this.removeColorbar();return}if(this.pColorbarArea.visible=!0,!this.valueScale||Number.isNaN(+this.valueScale.domain()[0])||Number.isNaN(+this.valueScale.domain()[1]))return;const r=Math.min(this.dimensions[1]/2,JF);if(this.colorbarHeight=r-2*Zn,this.colorbarHeight<0){this.removeColorbar();return}if(this.valueScale.domain()[1]===this.valueScale.domain()[0]){this.removeColorbar();return}const i=this.valueScale.copy().range([this.colorbarHeight,0]);this.options.colorbarPosition==="topLeft"||this.options.colorbarPosition==="bottomLeft"?this.scaleBrush.extent([[vl,0],[yl,this.colorbarHeight]]):this.scaleBrush.extent([[0,0],[yl-vl,this.colorbarHeight]]),this.options.colorbarPosition==="topLeft"&&([this.pColorbarArea.x,this.pColorbarArea.y]=this.position,this.pColorbar.y=Zn,this.axis.pAxis.y=Zn,this.axis.pAxis.x=vl+yl+Vh+gl,this.pColorbar.x=vl+yl+Vh,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+vl},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.options.colorbarPosition==="topRight"&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-am,this.pColorbarArea.y=this.position[1],this.pColorbar.y=Zn,this.axis.pAxis.y=Zn,this.axis.pAxis.x=Cm+Zn,this.pColorbar.x=Cm+Zn,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+gl+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.options.colorbarPosition==="bottomRight"&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-am,this.pColorbarArea.y=this.position[1]+this.dimensions[1]-r,this.pColorbar.y=Zn,this.axis.pAxis.y=Zn,this.axis.pAxis.x=Cm+Zn,this.pColorbar.x=Cm+Zn,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+gl+Vh},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.options.colorbarPosition==="bottomLeft"&&(this.pColorbarArea.x=this.position[0],this.pColorbarArea.y=this.position[1]+this.dimensions[1]-r,this.pColorbar.y=Zn,this.axis.pAxis.y=Zn,this.axis.pAxis.x=vl+yl+Vh+gl,this.pColorbar.x=vl+yl+Vh,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.pColorbarArea.clear(),this.pColorbarArea.beginFill(ct(this.options.colorbarBackgroundColor||"white"),+this.options.colorbarBackgroundOpacity>=0?+this.options.colorbarBackgroundOpacity:.6),this.pColorbarArea.drawRect(0,0,am,r),this.options?(this.options.scaleStartPercent||(this.options.scaleStartPercent=0),this.options.scaleEndPercent||(this.options.scaleEndPercent=1)):this.options={scaleStartPercent:0,scaleEndPercent:1};const o=i.domain()[1]-i.domain()[0],a=i(this.options.scaleStartPercent*o+i.domain()[0]),s=i(this.options.scaleEndPercent*o+i.domain()[0]);this.brushing||(this.scaleBrush.on("start",this.brushStart.bind(this)).on("brush",this.brushMoved.bind(this)).on("end",this.brushEnd.bind(this)).handleSize(0),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.call(this.scaleBrush),this.northHandle=this.gColorscaleBrush.selectAll(".handle--custom").data([{type:"n"},{type:"s"}]).enter().append("rect").classed("handle--custom",!0).attr("cursor","ns-resize").attr("width",yl).attr("height",eG).style("fill","#666").style("stroke","white"),this.flipText&&this.northHandle.attr("cursor","ew-resize"),this.gColorscaleBrush.call(this.scaleBrush.move,[s,a]));const u=kt().domain([0,255]).range([0,this.colorbarHeight]);for(let c=0;c<this.colorbarHeight;c++){const l=this.limitedValueScale(i.invert(c)),f=Math.max(0,Math.min(254,Math.floor(l)));this.pColorbar.beginFill(ct(`rgb(${this.colorScale[f][0]},${this.colorScale[f][1]},${this.colorScale[f][2]})`)),this.pColorbar.drawRect(0,c,gl,1)}this.pAxis.position.x=gl,this.pAxis.position.y=u(0),this.options.colorbarPosition==="topLeft"||this.options.colorbarPosition==="bottomLeft"?this.axis.drawAxisRight(i,this.colorbarHeight):(this.options.colorbarPosition==="topRight"||this.options.colorbarPosition==="bottomRight")&&this.axis.drawAxisLeft(i,this.colorbarHeight)}},{key:"exportColorBarSVG",value:function(){const r=document.createElement("g");if(r.setAttribute("class","color-bar"),!this.options.colorbarPosition||this.options.colorbarPosition==="hidden"||!this.valueScale)return r;r.setAttribute("transform",`translate(${this.pColorbarArea.x}, ${this.pColorbarArea.y})`);const i=document.createElement("rect");r.appendChild(i);const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.pColorbar.x}, ${this.pColorbar.y})`);const a=Math.min(this.dimensions[1]/2,JF);this.colorbarHeight=a-2*Zn,i.setAttribute("x",0),i.setAttribute("y",0),i.setAttribute("width",am),i.setAttribute("height",a),i.setAttribute("style","fill: white; stroke-width: 0; opacity: 0.7");const s=256,u=kt().domain([0,s-1]).range([0,this.colorbarHeight]),c=this.colorbarHeight/s;for(let p=0;p<s;p++){const d=document.createElement("rect");o.appendChild(d),d.setAttribute("x",0),d.setAttribute("y",u(p)),d.setAttribute("width",gl),d.setAttribute("height",c),d.setAttribute("class","color-rect");const m=Math.min(this.colorScale.length-1,Math.max(0,Math.floor(this.limitedValueScale(this.valueScale.invert(p))))),g=this.colorScale[m];g?d.setAttribute("style",`fill: rgb(${g[0]}, ${g[1]}, ${g[2]})`):d.setAttribute("style","fill: rgb(255,255,255,0)")}const l=document.createElement("g");r.appendChild(l),l.setAttribute("transform",`translate(${this.axis.pAxis.position.x},${this.axis.pAxis.position.y})`);let f=null;const h=this.valueScale.copy().range([this.colorbarHeight,0]);return this.options.colorbarPosition==="topLeft"||this.options.colorbarPosition==="bottomLeft"?f=this.axis.exportAxisRightSVG(h,this.colorbarHeight):(this.options.colorbarPosition==="topRight"||this.options.colorbarPosition==="bottomRight")&&(f=this.axis.exportAxisLeftSVG(h,this.colorbarHeight)),l.appendChild(f),r}},{key:"setDataLensSize",value:function(r){this.dataLensPadding=Math.max(0,Math.floor((r-1)/2)),this.dataLensSize=this.dataLensPadding*2+1}},{key:"binsPerTile",value:function(){return this.tilesetInfo.bins_per_dimension||_Me}},{key:"getVisibleRectangleData",value:function(r,i,o,a){let s=this.calculateZoomLevel();s=this.tilesetInfo.max_zoom?Math.min(this.tilesetInfo.max_zoom,s):s;const u=et.calculateTileWidth(this.tilesetInfo,s,this.binsPerTile())/this.binsPerTile(),c=[this._xScale.invert(r),this._xScale.invert(r+o)],l=[this._yScale.invert(i),this._yScale.invert(i+a)],f=[Math.max(c[0],this.tilesetInfo.min_pos[0]),Math.min(c[1],this.tilesetInfo.max_pos[0])],h=[Math.max(l[0],this.tilesetInfo.min_pos[1]),Math.min(l[1],this.tilesetInfo.max_pos[1])],p=Math.floor(f[0]/u),d=Math.floor(h[0]/u),m=Math.max(0,Math.ceil((f[1]-f[0])/u)),g=Math.max(0,Math.ceil((h[1]-h[0])/u)),v=If(new Array(g*m).fill(NaN),[g,m]);return this.visibleAndFetchedTiles().forEach(b=>{const y=b.mirrored?[b.tileData.tilePos[1],b.tileData.tilePos[0]]:b.tileData.tilePos,{tileX:_,tileY:T,tileWidth:S,tileHeight:E}=this.getTilePosAndDimensions(b.tileData.zoomLevel,y,this.binsPerTile()),I=Math.floor(_/u),x=Math.floor((_+S)/u),C=Math.floor(T/u),w=Math.floor((T+E)/u);let B=Math.max(p,I)-I,L=Math.max(d,C)-C;const k=Math.min(p+m,x)-I,R=Math.min(d+g,w)-C,F=Math.max(I-p,0),U=Math.max(C-d,0),$=k-B,ie=R-L;if(!($<0||ie<0)){if(b.mirrored&&B>L){const oe=B;B=L,L=oe}F9(v.hi(U+ie,F+$).lo(U,F),b.dataArray.hi(L+ie,B+$).lo(L,B))}}),v}},{key:"initTile",value:function(r){Zr(Ur(n.prototype),"initTile",this).call(this,r),r.tileData.dense.length===this.binsPerTile()**2&&(r.dataArray=If(Array.from(r.tileData.dense),[this.binsPerTile(),this.binsPerTile()]),this.continuousScaling&&r.tileData.tilePos[0]===r.tileData.tilePos[1]&&r.mirrored&&(r.tileData.denseDataExtrema.mirrorPrecomputedExtrema(),Zr(Ur(n.prototype),"initTile",this).call(this,r))),!(this.scale.minValue===null||this.scale.maxValue===null)&&this.renderTile(r)}},{key:"updateTile",value:function(r){r.scale&&this.scale&&this.scale.minValue===r.scale.minValue&&this.scale.maxValue===r.scale.maxValue||(this.renderTile(r),this.drawColorbar())}},{key:"destroyTile",value:function(r){r.sprite.destroy(!0),r.canvas=null,r.sprite=null,r.texture=null}},{key:"pixDataFunction",value:function(r,i){if(i){const{graphics:o}=r,a=this.tileDataToCanvas(i.pixData);r.sprite&&r.sprite.destroy(!0);const s=Ue.PIXI.VERSION[0]==="4"?Ue.PIXI.Texture.fromCanvas(a,Ue.PIXI.SCALE_MODES.NEAREST):Ue.PIXI.Texture.from(a,{scaleMode:Ue.PIXI.SCALE_MODES.NEAREST}),u=new Ue.PIXI.Sprite(s);r.sprite=u,r.texture=s,r.canvas=a,this.setSpriteProperties(r.sprite,r.tileData.zoomLevel,r.tileData.tilePos,r.mirrored),o.removeChildren(),o.addChild(r.sprite)}this.renderingTiles.delete(r.tileId)}},{key:"renderTile",value:function(r){const[i]=this.updateValueScale(),o=0;if(this.renderingTiles.add(r.tileId),this.tilesetInfo.tile_size&&r.tileData.dense.length<this.tilesetInfo.tile_size){const a=new Float32Array(this.tilesetInfo.tile_size);a.fill(NaN),a.set(r.tileData.dense),r.tileData.dense=a}et.tileDataToPixData(r,i,this.limitedValueScale.domain(),o,this.colorScale,a=>this.pixDataFunction(r,a),this.mirrorTiles()&&!r.mirrored&&r.tileData.tilePos[0]===r.tileData.tilePos[1],this.options.extent==="upper-right"&&r.tileData.tilePos[0]===r.tileData.tilePos[1],this.options.zeroValueColor?T9(this.options.zeroValueColor):void 0,{selectedRows:this.options.selectRows,selectedRowsAggregationMode:this.options.selectRowsAggregationMode,selectedRowsAggregationWithRelativeHeight:this.options.selectRowsAggregationWithRelativeHeight,selectedRowsAggregationMethod:this.options.selectRowsAggregationMethod})}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null,Zr(Ur(n.prototype),"remove",this).call(this)}},{key:"refScalesChanged",value:function(r,i){Zr(Ur(n.prototype),"refScalesChanged",this).call(this,r,i),y1(this.fetchedTiles).filter(o=>o.sprite).forEach(o=>this.setSpriteProperties(o.sprite,o.tileData.zoomLevel,o.tileData.tilePos,o.mirrored))}},{key:"superSVG",value:function(){return Zr(Ur(n.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){let r=null,i=null;Zr(Ur(n.prototype),"exportSVG",this)?[i,r]=Zr(Ur(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const s of this.visibleAndFetchedTiles()){const u=s.sprite.rotation*180/Math.PI,c=document.createElement("g");c.setAttribute("transform",`translate(${s.sprite.x},${s.sprite.y}) rotate(${u}) scale(${s.sprite.scale.x},${s.sprite.scale.y})`);const l=document.createElement("image");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.canvas.toDataURL()),l.setAttribute("width",s.canvas.width),l.setAttribute("height",s.canvas.height),l.setAttribute("style","image-rendering: pixelated"),c.appendChild(l),o.appendChild(c)}const a=this.exportColorBarSVG();return r.appendChild(a),[i,i]}},{key:"getVisiblePartOfUppLeftTile",value:function(){const r=this.visibleAndFetchedTiles().map(p=>{const d=p.mirrored?[p.tileData.tilePos[1],p.tileData.tilePos[0]]:p.tileData.tilePos;return[d[0],d[1],p.tileId]});if(r.length===0)return null;let i=r[0];for(let p=0;p<r.length;p++){const d=r[p];(d[0]<i[0]||d[1]<i[1])&&(i=d)}const o=Math.min(SR,this.binsPerTile()),a=this.binsPerTile()/o,s=this.visibleAndFetchedTiles().filter(p=>p.tileId===i[2])[0],u=this.getIndicesOfVisibleDataInTile(s),c=u[0],l=u[1],f=c-c%a,h=l-l%a;return[s.tileId,f,h]}},{key:"getIndicesOfVisibleDataInTile",value:function(r){const i=this._xScale.range(),o=this._yScale.range(),a=r.mirrored?[r.tileData.tilePos[1],r.tileData.tilePos[0]]:r.tileData.tilePos,{tileX:s,tileY:u,tileWidth:c,tileHeight:l}=this.getTilePosAndDimensions(r.tileData.zoomLevel,a,this.binsPerTile()),f=kt().domain([0,this.binsPerTile()]).range([s,s+c]),h=Math.max(0,Math.round(f.invert(this._xScale.invert(i[0])))-1),p=Math.min(this.binsPerTile(),Math.round(f.invert(this._xScale.invert(i[1])))),d=kt().domain([0,this.binsPerTile()]).range([u,u+l]),m=Math.max(0,Math.round(d.invert(this._yScale.invert(o[0])))-1),g=Math.min(this.binsPerTile(),Math.round(d.invert(this._yScale.invert(o[1]))));return r.mirrored&&a[0]!==a[1]?[m,h,g,p]:[h,m,p,g]}},{key:"minVisibleValue",value:function(r=!1){const i=this.visibleAndFetchedTiles().map(a=>{if(a.tileData.denseDataExtrema===void 0)return null;const s=this.getIndicesOfVisibleDataInTile(a);return a.tileData.denseDataExtrema.getMinNonZeroInSubset(s)});if(i.length===0&&this.valueScaleMax===null)return null;const o=Math.min.apply(null,i);return o===Number.MAX_SAFE_INTEGER?Zr(Ur(n.prototype),"minVisibleValue",this).call(this,r):r?o:this.valueScaleMin!==null?this.valueScaleMin:o}},{key:"maxVisibleValue",value:function(r=!1){const i=this.visibleAndFetchedTiles().map(a=>{if(a.tileData.denseDataExtrema===void 0)return null;const s=this.getIndicesOfVisibleDataInTile(a);return a.tileData.denseDataExtrema.getMaxNonZeroInSubset(s)});if(i.length===0&&this.valueScaleMax===null)return null;const o=Math.max.apply(null,i);return o===Number.MIN_SAFE_INTEGER?Zr(Ur(n.prototype),"maxVisibleValue",this).call(this,r):r?o:this.valueScaleMax!==null?this.valueScaleMax:o}},{key:"zoomed",value:function(r,i,o,a,s){if(this.brushing)return;Zr(Ur(n.prototype),"zoomed",this).call(this,r,i),this.pMain.position.x=a,this.pMain.position.y=s,this.pMain.scale.x=o,this.pMain.scale.y=o;const u=this.isValueScaleLocked();if(this.continuousScaling&&this.minValue()!==void 0&&this.maxValue()!==void 0){const c=JSON.stringify(this.getVisiblePartOfUppLeftTile());if(this.valueScaleMin===null&&this.valueScaleMax===null&&!u&&c!==this.prevIndUpperLeftTile){const l=this.minVisibleValue(),f=this.maxVisibleValue(),h=1e-6;l!==null&&f!==null&&(Math.abs(this.minValue()-l)>h||Math.abs(this.maxValue()-f)>h)&&(this.minValue(l),this.maxValue(f),this.scheduleRerender()),this.prevIndUpperLeftTile=c}u&&this.onValueScaleChanged()}this.mouseMoveZoomHandler()}},{key:"addTileId",value:function(r,i,o,a,s,u=!1){const c=[i,o,a];c.mirrored=u,c.dataTransform=s,r.push(c)}},{key:"tilesToId",value:function(r,i,o){const a=r,s=i,u=this.options&&this.options.dataTransform||"default",c=[];for(let l=0;l<a.length;l++)for(let f=0;f<s.length;f++)this.mirrorTiles()?(a[l]>=s[f]?this.options.extent!=="lower-left"&&this.addTileId(c,o,s[f],a[l],u,!0):this.options.extent!=="upper-right"&&this.addTileId(c,o,a[l],s[f],u),a[l]===s[f]&&this.options.extent==="lower-left"&&this.addTileId(c,o,a[l],s[f],u)):this.addTileId(c,o,a[l],s[f],u);return c}},{key:"calculateVisibleTiles",value:function(){if(this.tilesetInfo){if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const r=this.tilesetInfo.resolutions.map(i=>+i).sort((i,o)=>o-i);this.xTiles=et.calculateTilesFromResolution(r[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=et.calculateTilesFromResolution(r[this.zoomLevel],this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=et.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=et.calculateTiles(this.zoomLevel,this._yScale,this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],this.options.reverseYAxis?-this.tilesetInfo.min_pos[1]:this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width1||this.tilesetInfo.max_width);this.setVisibleTiles(this.tilesToId(this.xTiles,this.yTiles,this.zoomLevel))}}},{key:"mirrorTiles",value:function(){return!(this.tilesetInfo.mirror_tiles&&(this.tilesetInfo.mirror_tiles===!1||this.tilesetInfo.mirror_tiles==="false"))}},{key:"getMouseOverHtml",value:function(r,i){if(!this.options||!this.options.showTooltip||!this.tilesetInfo)return"";const o=et.calculateResolution(this.tilesetInfo,this.zoomLevel),a=Math.max(this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0]),s=Math.ceil(Math.log(a/o)/Math.log(10));this.setDataLensSize(1);const u=this._xScale.invert(r),c=this._yScale.invert(i);let l="<b>Position:</b> ";if(this.chromInfo){const h=pn(u,this.chromInfo),p=pn(c,this.chromInfo),d=m=>no(`.${s}s`)(m);l+=`${h[0]}:${d(h[1])} & ${p[0]}:${d(p[1])}`,l+="<br/>"}let f=null;try{f=this.getVisibleRectangleData(r,i,1,1).get(0,0)}catch{return""}return this.options&&this.options.heatmapValueScaling==="log"?f>0?`${l}<b>Value:</b> 1e${no(".3f")(Math.log(f)/Math.log(10))}`:f===0?`${l}<b>Value:</b> 0`:`${l}<b>Value:</b> N/A`:`${l}<b>Value:</b> ${no(".3f")(f)}`}},{key:"getTilePosAndDimensions",value:function(r,i,o){const a=o||this.binsPerTile();if(this.tilesetInfo.resolutions){const m=this.tilesetInfo.resolutions.map(_=>+_).sort((_,T)=>T-_)[r],g=m*a,v=g,b=m*a*i[0],y=m*a*i[1];return{tileX:b,tileY:y,tileWidth:g,tileHeight:v}}const s=i[0],u=i[1],c=this.tilesetInfo.min_pos[0],l=this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],f=this.tilesetInfo.max_width/2**r,h=this.tilesetInfo.max_width/2**r,p=c+s*f,d=l+u*h;return{tileX:p,tileY:d,tileWidth:f,tileHeight:h}}},{key:"calculateZoomLevel",value:function(){const r=this.tilesetInfo.min_pos[0],i=this.tilesetInfo.max_pos[0],o=this.tilesetInfo.min_pos[1],a=this.tilesetInfo.max_pos[1];let s=null;if(this.tilesetInfo.resolutions){const u=et.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,r,i),c=et.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._yScale,o,a);s=Math.min(u,c)}else{const u=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.binsPerTile()),c=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.binsPerTile());s=Math.max(u,c),s=Math.min(s,this.maxZoom)}return this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?s=Math.min(this.options.maxZoom,s):console.error("Invalid maxZoom on track:",this)),s}},{key:"tileToLocalId",value:function(r){return r.dataTransform&&r.dataTransform!=="default"?`${r.join(".")}.${r.mirrored}.${r.dataTransform}`:`${r.join(".")}.${r.mirrored}`}},{key:"tileToRemoteId",value:function(r){return r.dataTransform&&r.dataTransform!=="default"?`${r.join(".")}.${r.dataTransform}`:`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const i=r.split(".");return i.slice(0,i.length-1).join(".")}}]),n}(lh);function TMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EMe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wMe(r.key),r)}}function SMe(e,t,n){return t&&EMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wMe(e){var t=AMe(e,"string");return typeof t=="symbol"?t:String(t)}function AMe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function OMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yI(e,t)}function yI(e,t){return yI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},yI(e,t)}function kMe(e){var t=CMe();return function(){var n=iT(e),r;if(t){var i=iT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xMe(this,r)}}function xMe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IMe(e)}function IMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CMe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iT(e){return iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iT(e)}function Oq(e){if(!e.graphics)return;const t=e.graphics,{tileX:n,tileY:r,tileWidth:i}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos);e.drawnAtScale=this._xScale.copy();const o=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0))),a=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));e.text.scale.x=o,e.text.scale.y=a;const s=this._xScale(i)-this._xScale(0);if(e.textGraphics.scale.x=s/256,e.textGraphics.scale.y=s/256,t.clear(),t.lineStyle(4*o,255,1),t.beginFill(16740363,.4),t.alpha=.5,e.mirrored){const u=this._refXScale(r+i)-this._refXScale(r),c=this._refYScale(n+i)-this._refYScale(n);e.textGraphics.position.x=this._refXScale(r)+u/2,e.textGraphics.position.y=this._refYScale(n)+c/2,t.drawRect(this._refXScale(r),this._refYScale(n),u,c)}else{const u=this._refXScale(n+i)-this._refXScale(n),c=this._refYScale(r+i)-this._refYScale(r);e.textGraphics.position.x=this._refXScale(n)+u/2,e.textGraphics.position.y=this._refYScale(r)+c/2,t.drawRect(this._refXScale(n),this._refYScale(r),u,c)}}function kq(e){const t=e.graphics;e.textGraphics=new Ue.PIXI.Graphics,e.mirrored?e.text=new Ue.PIXI.Text(`${e.tileData.zoomLevel}/${[e.tileData.tilePos[1],e.tileData.tilePos[0]].join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}):e.text=new Ue.PIXI.Text(`${e.tileData.zoomLevel}/${e.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,t.addChild(e.textGraphics)}let xq=function(e){OMe(n,e);var t=kMe(n);function n(){return TMe(this,n),t.apply(this,arguments)}return SMe(n,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(r){kq.bind(this)(r),this.drawTile(r)}},{key:"destroyTile",value:function(r,i){}},{key:"drawTile",value:function(r){Oq.bind(this)(r)}},{key:"fetchNewTiles",value:function(r){r.forEach(i=>{const o=i.remoteId.split("."),a={zoomLevel:o[0],tilePos:o.slice(1,o.length).map(s=>+s)};this.fetchedTiles[i.tileId]=i,this.fetchedTiles[i.tileId].tileData=a,this.fetching.has(i.remoteId)&&this.fetching.delete(i.remoteId)}),this.synchronizeTilesAndGraphics()}}]),n}(hv);function PMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DMe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NMe(r.key),r)}}function RMe(e,t,n){return t&&DMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NMe(e){var t=MMe(e,"string");return typeof t=="symbol"?t:String(t)}function MMe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _g(){return typeof Reflect<"u"&&Reflect.get?_g=Reflect.get.bind():_g=function(e,t,n){var r=LMe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_g.apply(this,arguments)}function LMe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=xc(e),e!==null););return e}function jMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vI(e,t)}function vI(e,t){return vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},vI(e,t)}function BMe(e){var t=GMe();return function(){var n=xc(e),r;if(t){var i=xc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return FMe(this,r)}}function FMe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iq(e)}function Iq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GMe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xc(e){return xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xc(e)}const HMe=1024;let ZN=function(e){jMe(n,e);var t=BMe(n);function n(r,i){var o;PMe(this,n),o=t.call(this,r,i);const{onMouseMoveZoom:a,isValueScaleLocked:s,getLockGroupExtrema:u}=r;return o.onMouseMoveZoom=a,o.isValueScaleLocked=s,o.getLockGroupExtrema=u,o.onMouseMoveZoom&&o.pubSubs.push(o.pubSub.subscribe("app.mouseMove",o.mouseMoveHandler.bind(Iq(o)))),o}return RMe(n,[{key:"initTile",value:function(r){_g(xc(n.prototype),"initTile",this).call(this,r)}},{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"relevantScale",value:function(){return null}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(i=>({tileId:this.tileToLocalId(i),remoteId:this.tileToRemoteId(i)})),this.visibleTileIds=new Set(this.visibleTiles.map(i=>i.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const i=this.tilesetInfo.resolutions.map(a=>+a).sort((a,s)=>s-a),o=et.calculateTilesFromResolution(i[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]).map(a=>[this.zoomLevel,a]);this.setVisibleTiles(o);return}const r=et.calculateTiles(this.zoomLevel,this.relevantScale(),this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width).map(i=>[this.zoomLevel,i]);this.setVisibleTiles(r)}},{key:"getTilePosAndDimensions",value:function(r,i,o){const a=i[0],s=i[0];if(this.tilesetInfo.resolutions){const g=o||HMe,v=this.tilesetInfo.resolutions.map(S=>+S).sort((S,E)=>E-S)[r],b=v*g,y=b,_=v*g*i[0],T=v*g*i[1];return{tileX:_,tileY:T,tileWidth:b,tileHeight:y}}const u=this.tilesetInfo.max_width,c=this.tilesetInfo.max_width,l=this.tilesetInfo.min_pos[0],f=this.tilesetInfo.min_pos[1],h=u/2**r,p=c/2**r,d=l+a*h,m=f+s*p;return{tileX:d,tileY:m,tileWidth:h,tileHeight:p}}},{key:"updateTile",value:function(r){}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!1)}},{key:"getIndicesOfVisibleDataInTile",value:function(r){const i=this._xScale.range();if(!this.tilesetInfo)return[null,null];const{tileX:o,tileWidth:a}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),s=kt().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([o,o+a]),u=Math.max(0,Math.round(s.invert(this._xScale.invert(i[0])))),c=Math.min(r.tileData.dense.length,Math.round(s.invert(this._xScale.invert(i[1]))));return[u,c]}},{key:"minVisibleValue",value:function(r=!1){let i=this.visibleAndFetchedIds();i.length===0&&(i=Object.keys(this.fetchedTiles));const o=i.map(s=>this.fetchedTiles[s]).map(s=>{const u=this.getIndicesOfVisibleDataInTile(s);return s.tileData.denseDataExtrema.getMinNonZeroInSubset(u)}),a=Math.min(...o);return r?a:this.valueScaleMin!==null?this.valueScaleMin:a}},{key:"maxVisibleValue",value:function(r=!1){let i=this.visibleAndFetchedIds();i.length===0&&(i=Object.keys(this.fetchedTiles));const o=i.map(s=>this.fetchedTiles[s]).map(s=>{const u=this.getIndicesOfVisibleDataInTile(s);return s.tileData.denseDataExtrema.getMaxNonZeroInSubset(u)}),a=Math.max(...o);return r?a:this.valueScaleMax!==null?this.valueScaleMax:a}},{key:"getAggregatedVisibleValue",value:function(r="max"){const i=r==="min"?Math.min:Math.max,o=r==="min"?1/0:-1/0;let a=this.visibleAndFetchedIds();a.length===0&&(a=Object.keys(this.fetchedTiles));const s=this._xScale.range();return a.map(u=>this.fetchedTiles[u]).map(u=>{if(!u.tileData.tilePos)return r==="min"?this.minVisibleValue():this.maxVisibleValue();const{tileX:c,tileWidth:l}=this.getTilePosAndDimensions(u.tileData.zoomLevel,u.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),f=kt().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([c,c+l]),h=Math.max(0,Math.round(f.invert(this._xScale.invert(s[0])))),p=Math.min(u.tileData.dense.length,Math.round(f.invert(this._xScale.invert(s[1]))));return u.tileData.dense.slice(h,p)}).reduce((u,c)=>i(u,...c),o)}},{key:"getDataAtPos",value:function(r){let i;if(!this.tilesetInfo)return i;const o=this.calculateZoomLevel(),a=et.calculateTileWidth(this.tilesetInfo,o,this.tilesetInfo.tile_size),s=this._xScale.invert(r)/a,u=this.tileToLocalId([o,Math.floor(s)]),c=this.fetchedTiles[u];if(!c)return i;const l=this.tilesetInfo.tile_size*(s-Math.floor(s));return c.tileData.dense?c.tileData.dense[Math.floor(l)]:null}},{key:"mouseMoveHandler",value:function({x:r,y:i}={}){this.isWithin(r,i)&&(this.mouseX=r,this.mouseY=i,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(){}},{key:"zoomed",value:function(...r){_g(xc(n.prototype),"zoomed",this).call(this,...r),this.mouseMoveZoomHandler()}}]),n}(lh);function UMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zMe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YMe(r.key),r)}}function VMe(e,t,n){return t&&zMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YMe(e){var t=XMe(e,"string");return typeof t=="symbol"?t:String(t)}function XMe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Yu(){return typeof Reflect<"u"&&Reflect.get?Yu=Reflect.get.bind():Yu=function(e,t,n){var r=WMe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Yu.apply(this,arguments)}function WMe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=_s(e),e!==null););return e}function qMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bI(e,t)}function bI(e,t){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bI(e,t)}function $Me(e){var t=QMe();return function(){var n=_s(e),r;if(t){var i=_s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return KMe(this,r)}}function KMe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _I(e)}function _I(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QMe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _s(e){return _s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_s(e)}let _d=function(e){qMe(n,e);var t=$Me(n);function n(r,i){var o;UMe(this,n),o=t.call(this,r,i);const{animate:a,isShowGlobalMousePosition:s}=r;return o.constIndicator=new Ue.PIXI.Graphics,o.pMain.addChild(o.constIndicator),o.axis=new uS(_I(o)),o.pBase.addChild(o.axis.pAxis),o.animate=a,o.options=i,o.isShowGlobalMousePosition=s,o.pubSubs=[],o.options.showMousePosition&&!o.hideMousePosition&&(o.hideMousePosition=gc(_I(o),o.is2d,o.isShowGlobalMousePosition())),o}return VMe(n,[{key:"rerender",value:function(r,i){const o=JSON.stringify(r);!i&&o===this.prevOptions||(Yu(_s(n.prototype),"rerender",this).call(this,r,i),this.prevOptions=o,this.options=r,this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=gc(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"calculateZoomLevel",value:function(){if(this.tilesetInfo.resolutions)return et.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]-2);const r=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size);let i=Math.min(r,this.maxZoom);return i=Math.max(i,0),i}},{key:"relevantScale",value:function(){return this._xScale}},{key:"draw",value:function(){Yu(_s(n.prototype),"draw",this).call(this),this.drawConstIndicator()}},{key:"drawAxis",value:function(r){if(!this.options.axisPositionVertical&&!this.options.axisPositionHorizontal){this.axis.clearAxis();return}if(this.options.axisPositionVertical&&this.options.axisPositionVertical==="hidden"){this.axis.clearAxis();return}if(this.options.axisPositionHorizontal&&this.options.axisPositionHorizontal==="hidden"){this.axis.clearAxis();return}const i=this.options.axisMargin||0;this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"?(this.axis.pAxis.position.x=this.position[0]+i,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(r,this.dimensions[1])):this.options.axisPositionHorizontal==="outsideLeft"||this.options.axisPositionVertical==="outsideTop"?(this.axis.pAxis.position.x=this.position[0]+i,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(r,this.dimensions[1])):this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"?(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-i,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(r,this.dimensions[1])):(this.options.axisPositionHorizontal==="outsideRight"||this.options.axisPositionVertical==="outsideBottom")&&(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-i,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(r,this.dimensions[1]))}},{key:"mouseMoveZoomHandler",value:function(r=this.mouseX,i=this.mouseY){if(typeof r>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;let o=0,a=0,s="1d-horizontal";this.isLeftModified?(o=i-this.position[1],a=r-this.position[0],s="1d-vertical"):(o=r-this.position[0],a=i-this.position[1]);const u=r-this.position[0],c=i-this.position[1],l=this._xScale.invert(o),f=this._yScale.invert(a),h=this.getDataAtPos(o);h&&this.onMouseMoveZoom({trackId:this.id,data:h,absX:r,absY:i,relX:u,relY:c,dataX:l,dataY:f,orientation:s})}},{key:"drawConstIndicator",value:function(){if(this.constIndicator){for(this.constIndicator.clear();this.constIndicator.children[0];)this.constIndicator.removeChild(this.constIndicator.children[0]);!this.options.constIndicators||!this.valueScale||this.options.constIndicators.forEach(({color:r="black",opacity:i=1,label:o=null,labelColor:a="black",labelOpacity:s=1,labelPosition:u="leftTop",labelSize:c=12,value:l=0}={})=>{const f=ct(r),h=ct(a);this.constIndicator.beginFill(f,i);const p=this.valueScale(l);let d=0,m=0;if(o){const g=new Ue.PIXI.Text(o,{fontFamily:"Arial",fontSize:c,fill:h});switch(g.alpha=s,u){case"right":g.anchor.x=1,g.anchor.y=.5,g.x=this.position[0]+this.dimensions[0]-6,g.y=p,m=g.width+8;break;case"rightBottom":g.anchor.x=1,g.anchor.y=0,g.x=this.position[0]+this.dimensions[0]-6,g.y=p;break;case"rightTop":g.anchor.x=1,g.anchor.y=1,g.x=this.position[0]+this.dimensions[0]-6,g.y=p;break;case"left":g.anchor.x=0,g.anchor.y=.5,g.x=this.position[0]+2,g.y=p,d=g.width+4;break;case"leftBottom":g.anchor.x=0,g.anchor.y=0,g.x=this.position[0]+2,g.y=p;break;case"leftTop":default:g.anchor.x=0,g.anchor.y=1,g.x=this.position[0]+2,g.y=p;break}this.constIndicator.addChild(g)}this.constIndicator.drawRect(this.position[0]+d,p,this.dimensions[0]-m,1)})}}},{key:"exportSVG",value:function(){let r=null,i=null;Yu(_s(n.prototype),"exportSVG",this)?[i,r]=Yu(_s(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i),i.setAttribute("class","horizontal-tiled-1d-track");const o=document.createElement("g");return r.appendChild(o),this.options.constIndicators&&this.options.constIndicators.forEach(({color:a="black",opacity:s=1,label:u=null,labelColor:c="black",labelOpacity:l=1,labelPosition:f="leftTop",labelSize:h=12,value:p=0}={})=>{const d=this.valueScale(p);if(u){const g=document.createElement("text");switch(g.textContent=u,g.setAttribute("x",this.position[0]),g.setAttribute("y",d),g.setAttribute("style",`font-family: 'Arial'; font-size: ${h}px; fill: ${c}; fill-opacity: ${l};`),f){case"rightBottom":g.setAttribute("x",this.position[0]+this.dimensions[0]-6),g.setAttribute("y",d+h+2),g.setAttribute("text-anchor","end");break;case"right":case"rightTop":g.setAttribute("x",this.position[0]+this.dimensions[0]-6),g.setAttribute("y",d-2),g.setAttribute("text-anchor","end");break;case"leftBottom":g.setAttribute("x",this.position[0]+2),g.setAttribute("y",d+h+2);break;case"left":case"leftTop":default:g.setAttribute("x",this.position[0]+2),g.setAttribute("y",d-2);break}o.appendChild(g)}const m=document.createElement("line");m.setAttribute("x1",this.position[0]),m.setAttribute("y1",d),m.setAttribute("x2",this.dimensions[0]),m.setAttribute("y2",d),m.setAttribute("stroke",a),m.setAttribute("stroke-opacity",s),o.appendChild(m)}),[i,r]}}]),n}(ZN);function ZMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JMe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tLe(r.key),r)}}function eLe(e,t,n){return t&&JMe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tLe(e){var t=rLe(e,"string");return typeof t=="symbol"?t:String(t)}function rLe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function E0(){return typeof Reflect<"u"&&Reflect.get?E0=Reflect.get.bind():E0=function(e,t,n){var r=nLe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},E0.apply(this,arguments)}function nLe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Dp(e),e!==null););return e}function iLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TI(e,t)}function TI(e,t){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},TI(e,t)}function oLe(e){var t=lLe();return function(){var n=Dp(e),r;if(t){var i=Dp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return aLe(this,r)}}function aLe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sLe(e)}function sLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lLe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dp(e){return Dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dp(e)}let Cq=function(e){iLe(n,e);var t=oLe(n);function n(r,i){var o;return ZMe(this,n),o=t.call(this,r,i),o.pMain=o.pMobile,o}return eLe(n,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(r){const i=r.graphics;r.textGraphics=new Ue.PIXI.Graphics,r.text=new Ue.PIXI.Text(`${r.tileData.zoomLevel}/${r.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),r.textGraphics.addChild(r.text),r.text.anchor.x=.5,r.text.anchor.y=.5,i.addChild(r.textGraphics),this.drawTile(r)}},{key:"destroyTile",value:function(r){}},{key:"drawTile",value:function(r){if(E0(Dp(n.prototype),"drawTile",this).call(this,r),!r.graphics)return;const i=r.graphics,{tileX:o,tileWidth:a}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),s=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0)));r.text.scale.x=s,i.clear();const u=this.dimensions[1],c=this._refXScale(o+a)-this._refXScale(o);r.textGraphics.position.x=this._refXScale(o)+c/2,r.textGraphics.position.y=u/2;const l=this._refXScale(o);i.lineStyle(4*s,255,1),i.beginFill(16740363,.4),i.alpha=.5,i.moveTo(l,0),i.lineTo(l,u),i.moveTo(l+c,0),i.lineTo(l+c,u),i.lineStyle(0,255,1),i.drawRect(l,0,c,u)}}]),n}(_d);function uLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cLe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fLe(r.key),r)}}function hLe(e,t,n){return t&&cLe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fLe(e){var t=pLe(e,"string");return typeof t=="symbol"?t:String(t)}function pLe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function S0(){return typeof Reflect<"u"&&Reflect.get?S0=Reflect.get.bind():S0=function(e,t,n){var r=dLe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},S0.apply(this,arguments)}function dLe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Rp(e),e!==null););return e}function mLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EI(e,t)}function EI(e,t){return EI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},EI(e,t)}function gLe(e){var t=bLe();return function(){var n=Rp(e),r;if(t){var i=Rp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yLe(this,r)}}function yLe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vLe(e)}function vLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bLe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rp(e){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rp(e)}let Pq=function(e){mLe(n,e);var t=gLe(n);function n(){return uLe(this,n),t.apply(this,arguments)}return hLe(n,[{key:"calculateZoomLevel",value:function(){const r=et.calculateZoomLevel(this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);return Math.min(r,this.maxZoom)}},{key:"relevantScale",value:function(){return this._yScale}},{key:"zoomed",value:function(r,i){S0(Rp(n.prototype),"zoomed",this).call(this,r,i);const o=1,a=(i(1)-i(0))/(this._refYScale(1)-this._refYScale(0)),s=this.position[0],u=i(0)+this.position[1]-this._refYScale(1)*a;this.pMain.position.x=s,this.pMain.position.y=u,this.pMain.scale.x=o,this.pMain.scale.y=a}}]),n}(ZN);function _Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TLe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SLe(r.key),r)}}function ELe(e,t,n){return t&&TLe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SLe(e){var t=wLe(e,"string");return typeof t=="symbol"?t:String(t)}function wLe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function w0(){return typeof Reflect<"u"&&Reflect.get?w0=Reflect.get.bind():w0=function(e,t,n){var r=ALe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},w0.apply(this,arguments)}function ALe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Np(e),e!==null););return e}function OLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SI(e,t)}function SI(e,t){return SI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},SI(e,t)}function kLe(e){var t=CLe();return function(){var n=Np(e),r;if(t){var i=Np(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xLe(this,r)}}function xLe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ILe(e)}function ILe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CLe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Np(e){return Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Np(e)}let Dq=function(e){OLe(n,e);var t=kLe(n);function n(){return _Le(this,n),t.apply(this,arguments)}return ELe(n,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(r){const i=r.graphics;r.textGraphics=new Ue.PIXI.Graphics,r.text=new Ue.PIXI.Text(`${r.tileData.zoomLevel}/${r.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),r.textGraphics.addChild(r.text),r.text.anchor.x=.5,r.text.anchor.y=.5,r.text.rotation=-Math.PI/2,i.addChild(r.textGraphics),this.drawTile(r,i)}},{key:"destroyTile",value:function(r,i){}},{key:"drawTile",value:function(r){if(w0(Np(n.prototype),"drawTile",this).call(this,r),!r.graphics)return;const i=r.graphics,{tileY:o,tileHeight:a}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),s=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));r.text.scale.x=s,i.clear(),i.lineStyle(4*s,255,1),i.beginFill(16740363,.4),i.alpha=.5;const u=this.dimensions[0],c=this._refYScale(o+a)-this._refYScale(o);r.textGraphics.position.x=u/2,r.textGraphics.position.y=this._refYScale(o)+c/2,i.drawRect(0,this._refYScale(o),u,c)}},{key:"fetchNewTiles",value:function(r){r.forEach(i=>{const o=i.remoteId.split("."),a={zoomLevel:o[1],tilePos:o.slice(2,o.length).map(s=>+s)};this.fetchedTiles[i.tileId]=i,this.fetchedTiles[i.tileId].tileData=a,this.fetching.has(i.remoteId)&&this.fetching.delete(i.remoteId)}),this.synchronizeTilesAndGraphics()}}]),n}(Pq);var lO=Array.prototype.slice;function PLe(e){return e}var A0=1,O0=2,wI=3,Pm=4,rG=1e-6;function DLe(e){return"translate("+e+",0)"}function RLe(e){return"translate(0,"+e+")"}function NLe(e){return t=>+e(t)}function MLe(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function LLe(){return!this.__axis}function mS(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===A0||e===Pm?-1:1,l=e===Pm||e===O0?"x":"y",f=e===A0||e===wI?DLe:RLe;function h(p){var d=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):PLe),g=Math.max(o,0)+s,v=t.range(),b=+v[0]+u,y=+v[v.length-1]+u,_=(t.bandwidth?MLe:NLe)(t.copy(),u),T=p.selection?p.selection():p,S=T.selectAll(".domain").data([null]),E=T.selectAll(".tick").data(d,t).order(),I=E.exit(),x=E.enter().append("g").attr("class","tick"),C=E.select("line"),w=E.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(x),C=C.merge(x.append("line").attr("stroke","currentColor").attr(l+"2",c*o)),w=w.merge(x.append("text").attr("fill","currentColor").attr(l,c*g).attr("dy",e===A0?"0em":e===wI?"0.71em":"0.32em")),p!==T&&(S=S.transition(p),E=E.transition(p),C=C.transition(p),w=w.transition(p),I=I.transition(p).attr("opacity",rG).attr("transform",function(B){return isFinite(B=_(B))?f(B+u):this.getAttribute("transform")}),x.attr("opacity",rG).attr("transform",function(B){var L=this.parentNode.__axis;return f((L&&isFinite(L=L(B))?L:_(B))+u)})),I.remove(),S.attr("d",e===Pm||e===O0?a?"M"+c*a+","+b+"H"+u+"V"+y+"H"+c*a:"M"+u+","+b+"V"+y:a?"M"+b+","+c*a+"V"+u+"H"+y+"V"+c*a:"M"+b+","+u+"H"+y),E.attr("opacity",1).attr("transform",function(B){return f(_(B)+u)}),C.attr(l+"2",c*o),w.attr(l,c*g).text(m),T.filter(LLe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===O0?"start":e===Pm?"end":"middle"),T.each(function(){this.__axis=_})}return h.scale=function(p){return arguments.length?(t=p,h):t},h.ticks=function(){return n=lO.call(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:lO.call(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(r=p==null?null:lO.call(p),h):r&&r.slice()},h.tickFormat=function(p){return arguments.length?(i=p,h):i},h.tickSize=function(p){return arguments.length?(o=a=+p,h):o},h.tickSizeInner=function(p){return arguments.length?(o=+p,h):o},h.tickSizeOuter=function(p){return arguments.length?(a=+p,h):a},h.tickPadding=function(p){return arguments.length?(s=+p,h):s},h.offset=function(p){return arguments.length?(u=+p,h):u},h}function Rq(e){return mS(A0,e)}function jLe(e){return mS(O0,e)}function BLe(e){return mS(wI,e)}function Nq(e){return mS(Pm,e)}const FLe=Object.freeze(Object.defineProperty({__proto__:null,axisBottom:BLe,axisLeft:Nq,axisRight:jLe,axisTop:Rq},Symbol.toStringTag,{value:"Module"}));function GLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HLe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zLe(r.key),r)}}function ULe(e,t,n){return t&&HLe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zLe(e){var t=VLe(e,"string");return typeof t=="symbol"?t:String(t)}function VLe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function YLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AI(e,t)}function AI(e,t){return AI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},AI(e,t)}function XLe(e){var t=$Le();return function(){var n=oT(e),r;if(t){var i=oT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return WLe(this,r)}}function WLe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qLe(e)}function qLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $Le(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oT(e){return oT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oT(e)}let uh=function(e){YLe(n,e);var t=XLe(n);function n(r,i){var o;GLe(this,n),o=t.call(this,r,i);const{svgElement:a}=r;return o.gMain=Wt(a).append("g"),o.clipUid=zt.nice(),o.clipRect=o.gMain.append("clipPath").attr("id",`track-bounds-${o.clipUid}`).append("rect"),o.gMain.attr("clip-path",`url(#track-bounds-${o.clipUid})`),o}return ULe(n,[{key:"setPosition",value:function(r){this.position=r,this.gMain.attr("transform",`translate(${this.position[0]},${this.position[1]})`),this.draw()}},{key:"setDimensions",value:function(r){this.dimensions=r,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]]),r[0]>=0&&r[1]>=0?(this.clipRect.attr("width",r[0]),this.clipRect.attr("height",r[1])):(this.clipRect.attr("width",0),this.clipRect.attr("height",0)),this.draw()}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null}},{key:"draw",value:function(){return this}}]),n}(Nf);function KLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QLe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JLe(r.key),r)}}function ZLe(e,t,n){return t&&QLe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JLe(e){var t=e5e(e,"string");return typeof t=="symbol"?t:String(t)}function e5e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Tg(){return typeof Reflect<"u"&&Reflect.get?Tg=Reflect.get.bind():Tg=function(e,t,n){var r=t5e(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Tg.apply(this,arguments)}function t5e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ic(e),e!==null););return e}function r5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OI(e,t)}function OI(e,t){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},OI(e,t)}function n5e(e){var t=a5e();return function(){var n=Ic(e),r;if(t){var i=Ic(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return i5e(this,r)}}function i5e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o5e(e)}function o5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a5e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ic(e){return Ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ic(e)}let Mq=function(e){r5e(n,e);var t=n5e(n);function n(r,i){var o;return KLe(this,n),o=t.call(this,r,i),o.axis=Rq(o._xScale),o.gAxis=o.gMain.append("g"),o.tilesetInfo=!0,o}return ZLe(n,[{key:"setDimensions",value:function(r){Tg(Ic(n.prototype),"setDimensions",this).call(this,r),this.axis.ticks(Math.ceil(this.dimensions[0]/150)),this.gAxis.attr("transform",`translate(0,${r[1]})`)}},{key:"draw",value:function(){return this.axis.scale(this._xScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(r,i){Tg(Ic(n.prototype),"zoomed",this).call(this,r,i),this.draw()}}]),n}(uh);function s5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l5e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c5e(r.key),r)}}function u5e(e,t,n){return t&&l5e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c5e(e){var t=h5e(e,"string");return typeof t=="symbol"?t:String(t)}function h5e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Eg(){return typeof Reflect<"u"&&Reflect.get?Eg=Reflect.get.bind():Eg=function(e,t,n){var r=f5e(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Eg.apply(this,arguments)}function f5e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Cc(e),e!==null););return e}function p5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kI(e,t)}function kI(e,t){return kI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},kI(e,t)}function d5e(e){var t=y5e();return function(){var n=Cc(e),r;if(t){var i=Cc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m5e(this,r)}}function m5e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g5e(e)}function g5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y5e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cc(e){return Cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cc(e)}let Lq=function(e){p5e(n,e);var t=d5e(n);function n(r,i){var o;return s5e(this,n),o=t.call(this,r,i),o.axis=Nq(o._yScale),o.gAxis=o.gMain.append("g"),o.tilesetInfo=!0,o}return u5e(n,[{key:"setDimensions",value:function(r){Eg(Cc(n.prototype),"setDimensions",this).call(this,r),this.axis.ticks(Math.ceil(this.dimensions[1]/150)),this.gAxis.attr("transform",`translate(${r[0]},0)`)}},{key:"draw",value:function(){return this.axis.scale(this._yScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(r,i){Eg(Cc(n.prototype),"zoomed",this).call(this,r,i),this.draw()}}]),n}(uh);var Ut={},Br={},JN=32;Br.INT_BITS=JN;Br.INT_MAX=2147483647;Br.INT_MIN=-1<<JN-1;Br.sign=function(e){return(e>0)-(e<0)};Br.abs=function(e){var t=e>>JN-1;return(e^t)-t};Br.min=function(e,t){return t^(e^t)&-(e<t)};Br.max=function(e,t){return e^(e^t)&-(e<t)};Br.isPow2=function(e){return!(e&e-1)&&!!e};Br.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1};Br.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};Br.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function jq(e){var t=32;return e&=-e,e&&t--,e&65535&&(t-=16),e&16711935&&(t-=8),e&252645135&&(t-=4),e&858993459&&(t-=2),e&1431655765&&(t-=1),t}Br.countTrailingZeros=jq;Br.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1};Br.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)};Br.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var Dm=new Array(256);(function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=n&1,--i;e[t]=r<<i&255}})(Dm);Br.reverse=function(e){return Dm[e&255]<<24|Dm[e>>>8&255]<<16|Dm[e>>>16&255]<<8|Dm[e>>>24&255]};Br.interleave2=function(e,t){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1};Br.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16};Br.interleave3=function(e,t,n){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e|=t<<1,n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,e|n<<2};Br.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22};Br.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>jq(e)+1};function Bq(e,t,n){var r=e[n]|0;if(r<=0)return[];var i=new Array(r),o;if(n===e.length-1)for(o=0;o<r;++o)i[o]=t;else for(o=0;o<r;++o)i[o]=Bq(e,t,n+1);return i}function v5e(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function b5e(e,t){switch(typeof t>"u"&&(t=0),typeof e){case"number":if(e>0)return v5e(e|0,t);break;case"object":if(typeof e.length=="number")return Bq(e,t,0);break}return[]}var _5e=b5e,Fq={},gS={};gS.byteLength=S5e;gS.toByteArray=A5e;gS.fromByteArray=x5e;var Ea=[],fo=[],T5e=typeof Uint8Array<"u"?Uint8Array:Array,uO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Nh=0,E5e=uO.length;Nh<E5e;++Nh)Ea[Nh]=uO[Nh],fo[uO.charCodeAt(Nh)]=Nh;fo[45]=62;fo[95]=63;function Gq(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function S5e(e){var t=Gq(e),n=t[0],r=t[1];return(n+r)*3/4-r}function w5e(e,t,n){return(t+n)*3/4-n}function A5e(e){var t,n=Gq(e),r=n[0],i=n[1],o=new T5e(w5e(e,r,i)),a=0,s=i>0?r-4:r,u;for(u=0;u<s;u+=4)t=fo[e.charCodeAt(u)]<<18|fo[e.charCodeAt(u+1)]<<12|fo[e.charCodeAt(u+2)]<<6|fo[e.charCodeAt(u+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=t&255;return i===2&&(t=fo[e.charCodeAt(u)]<<2|fo[e.charCodeAt(u+1)]>>4,o[a++]=t&255),i===1&&(t=fo[e.charCodeAt(u)]<<10|fo[e.charCodeAt(u+1)]<<4|fo[e.charCodeAt(u+2)]>>2,o[a++]=t>>8&255,o[a++]=t&255),o}function O5e(e){return Ea[e>>18&63]+Ea[e>>12&63]+Ea[e>>6&63]+Ea[e&63]}function k5e(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(O5e(r));return i.join("")}function x5e(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(k5e(e,a,a+o>s?s:a+o));return r===1?(t=e[n-1],i.push(Ea[t>>2]+Ea[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Ea[t>>10]+Ea[t>>4&63]+Ea[t<<2&63]+"=")),i.join("")}var e2={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */e2.read=function(e,t,n,r,i){var o,a,s=i*8-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=o*256+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=a*256+e[t+f],f+=h,l-=8);if(o===0)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,r),o=o-c}return(p?-1:1)*a*Math.pow(2,o-r)};e2.write=function(e,t,n,r,i,o){var a,s,u,c=o*8-i-1,l=(1<<c)-1,f=l>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+f>=1?t+=h/u:t+=h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a=a+f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=s&255,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=a&255,p+=d,a/=256,c-=8);e[n+p-d]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){function t(A,M){if(!(A instanceof M))throw new TypeError("Cannot call a class as a function")}function n(A,M){for(var H=0;H<M.length;H++){var ue=M[H];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(A,i(ue.key),ue)}}function r(A,M,H){return M&&n(A.prototype,M),Object.defineProperty(A,"prototype",{writable:!1}),A}function i(A){var M=o(A,"string");return typeof M=="symbol"?M:String(M)}function o(A,M){if(typeof A!="object"||A===null)return A;var H=A[Symbol.toPrimitive];if(H!==void 0){var ue=H.call(A,M);if(typeof ue!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}function a(A,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(M&&M.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),M&&s(A,M)}function s(A,M){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,ue){return H.__proto__=ue,H},s(A,M)}function u(A){var M=f();return function(){var H=h(A),ue;if(M){var Te=h(this).constructor;ue=Reflect.construct(H,arguments,Te)}else ue=H.apply(this,arguments);return c(this,ue)}}function c(A,M){if(M&&(typeof M=="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(A)}function l(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(A){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},h(A)}const p=gS,d=e2,m=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=y,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const g=2147483647;e.kMaxLength=g,y.TYPED_ARRAY_SUPPORT=v(),!y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{const A=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(A,M),A.foo()===42}catch{return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}});function b(A){if(A>g)throw new RangeError('The value "'+A+'" is invalid for option "size"');const M=new Uint8Array(A);return Object.setPrototypeOf(M,y.prototype),M}function y(A,M,H){if(typeof A=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(A)}return _(A,M,H)}y.poolSize=8192;function _(A,M,H){if(typeof A=="string")return I(A,M);if(ArrayBuffer.isView(A))return C(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(it(A,ArrayBuffer)||A&&it(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(it(A,SharedArrayBuffer)||A&&it(A.buffer,SharedArrayBuffer)))return w(A,M,H);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ue=A.valueOf&&A.valueOf();if(ue!=null&&ue!==A)return y.from(ue,M,H);const Te=B(A);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return y.from(A[Symbol.toPrimitive]("string"),M,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}y.from=function(A,M,H){return _(A,M,H)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array);function T(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function S(A,M,H){return T(A),A<=0?b(A):M!==void 0?typeof H=="string"?b(A).fill(M,H):b(A).fill(M):b(A)}y.alloc=function(A,M,H){return S(A,M,H)};function E(A){return T(A),b(A<0?0:L(A)|0)}y.allocUnsafe=function(A){return E(A)},y.allocUnsafeSlow=function(A){return E(A)};function I(A,M){if((typeof M!="string"||M==="")&&(M="utf8"),!y.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const H=R(A,M)|0;let ue=b(H);const Te=ue.write(A,M);return Te!==H&&(ue=ue.slice(0,Te)),ue}function x(A){const M=A.length<0?0:L(A.length)|0,H=b(M);for(let ue=0;ue<M;ue+=1)H[ue]=A[ue]&255;return H}function C(A){if(it(A,Uint8Array)){const M=new Uint8Array(A);return w(M.buffer,M.byteOffset,M.byteLength)}return x(A)}function w(A,M,H){if(M<0||A.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<M+(H||0))throw new RangeError('"length" is outside of buffer bounds');let ue;return M===void 0&&H===void 0?ue=new Uint8Array(A):H===void 0?ue=new Uint8Array(A,M):ue=new Uint8Array(A,M,H),Object.setPrototypeOf(ue,y.prototype),ue}function B(A){if(y.isBuffer(A)){const M=L(A.length)|0,H=b(M);return H.length===0||A.copy(H,0,0,M),H}if(A.length!==void 0)return typeof A.length!="number"||ht(A.length)?b(0):x(A);if(A.type==="Buffer"&&Array.isArray(A.data))return x(A.data)}function L(A){if(A>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return A|0}function k(A){return+A!=A&&(A=0),y.alloc(+A)}y.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==y.prototype},y.compare=function(A,M){if(it(A,Uint8Array)&&(A=y.from(A,A.offset,A.byteLength)),it(M,Uint8Array)&&(M=y.from(M,M.offset,M.byteLength)),!y.isBuffer(A)||!y.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===M)return 0;let H=A.length,ue=M.length;for(let Te=0,J=Math.min(H,ue);Te<J;++Te)if(A[Te]!==M[Te]){H=A[Te],ue=M[Te];break}return H<ue?-1:ue<H?1:0},y.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(A,M){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return y.alloc(0);let H;if(M===void 0)for(M=0,H=0;H<A.length;++H)M+=A[H].length;const ue=y.allocUnsafe(M);let Te=0;for(H=0;H<A.length;++H){let J=A[H];if(it(J,Uint8Array))Te+J.length>ue.length?(y.isBuffer(J)||(J=y.from(J)),J.copy(ue,Te)):Uint8Array.prototype.set.call(ue,J,Te);else if(y.isBuffer(J))J.copy(ue,Te);else throw new TypeError('"list" argument must be an Array of Buffers');Te+=J.length}return ue};function R(A,M){if(y.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||it(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const H=A.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&H===0)return 0;let Te=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return we(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H*2;case"hex":return H>>>1;case"base64":return Ye(A).length;default:if(Te)return ue?-1:we(A).length;M=(""+M).toLowerCase(),Te=!0}}y.byteLength=R;function F(A,M,H){let ue=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((H===void 0||H>this.length)&&(H=this.length),H<=0)||(H>>>=0,M>>>=0,H<=M))return"";for(A||(A="utf8");;)switch(A){case"hex":return He(this,M,H);case"utf8":case"utf-8":return _e(this,M,H);case"ascii":return ve(this,M,H);case"latin1":case"binary":return Ne(this,M,H);case"base64":return se(this,M,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,M,H);default:if(ue)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),ue=!0}}y.prototype._isBuffer=!0;function U(A,M,H){const ue=A[M];A[M]=A[H],A[H]=ue}y.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let M=0;M<A;M+=2)U(this,M,M+1);return this},y.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let M=0;M<A;M+=4)U(this,M,M+3),U(this,M+1,M+2);return this},y.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let M=0;M<A;M+=8)U(this,M,M+7),U(this,M+1,M+6),U(this,M+2,M+5),U(this,M+3,M+4);return this},y.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?_e(this,0,A):F.apply(this,arguments)},y.prototype.toLocaleString=y.prototype.toString,y.prototype.equals=function(A){if(!y.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:y.compare(this,A)===0},y.prototype.inspect=function(){let A="";const M=e.INSPECT_MAX_BYTES;return A=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(A+=" ... "),"<Buffer "+A+">"},m&&(y.prototype[m]=y.prototype.inspect),y.prototype.compare=function(A,M,H,ue,Te){if(it(A,Uint8Array)&&(A=y.from(A,A.offset,A.byteLength)),!y.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(M===void 0&&(M=0),H===void 0&&(H=A?A.length:0),ue===void 0&&(ue=0),Te===void 0&&(Te=this.length),M<0||H>A.length||ue<0||Te>this.length)throw new RangeError("out of range index");if(ue>=Te&&M>=H)return 0;if(ue>=Te)return-1;if(M>=H)return 1;if(M>>>=0,H>>>=0,ue>>>=0,Te>>>=0,this===A)return 0;let J=Te-ue,j=H-M;const z=Math.min(J,j),W=this.slice(ue,Te),de=A.slice(M,H);for(let ge=0;ge<z;++ge)if(W[ge]!==de[ge]){J=W[ge],j=de[ge];break}return J<j?-1:j<J?1:0};function $(A,M,H,ue,Te){if(A.length===0)return-1;if(typeof H=="string"?(ue=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),H=+H,ht(H)&&(H=Te?0:A.length-1),H<0&&(H=A.length+H),H>=A.length){if(Te)return-1;H=A.length-1}else if(H<0)if(Te)H=0;else return-1;if(typeof M=="string"&&(M=y.from(M,ue)),y.isBuffer(M))return M.length===0?-1:ie(A,M,H,ue,Te);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?Te?Uint8Array.prototype.indexOf.call(A,M,H):Uint8Array.prototype.lastIndexOf.call(A,M,H):ie(A,[M],H,ue,Te);throw new TypeError("val must be string, number or Buffer")}function ie(A,M,H,ue,Te){let J=1,j=A.length,z=M.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(A.length<2||M.length<2)return-1;J=2,j/=2,z/=2,H/=2}function W(ge,De){return J===1?ge[De]:ge.readUInt16BE(De*J)}let de;if(Te){let ge=-1;for(de=H;de<j;de++)if(W(A,de)===W(M,ge===-1?0:de-ge)){if(ge===-1&&(ge=de),de-ge+1===z)return ge*J}else ge!==-1&&(de-=de-ge),ge=-1}else for(H+z>j&&(H=j-z),de=H;de>=0;de--){let ge=!0;for(let De=0;De<z;De++)if(W(A,de+De)!==W(M,De)){ge=!1;break}if(ge)return de}return-1}y.prototype.includes=function(A,M,H){return this.indexOf(A,M,H)!==-1},y.prototype.indexOf=function(A,M,H){return $(this,A,M,H,!0)},y.prototype.lastIndexOf=function(A,M,H){return $(this,A,M,H,!1)};function oe(A,M,H,ue){H=Number(H)||0;const Te=A.length-H;ue?(ue=Number(ue),ue>Te&&(ue=Te)):ue=Te;const J=M.length;ue>J/2&&(ue=J/2);let j;for(j=0;j<ue;++j){const z=parseInt(M.substr(j*2,2),16);if(ht(z))return j;A[H+j]=z}return j}function me(A,M,H,ue){return $e(we(M,A.length-H),A,H,ue)}function ae(A,M,H,ue){return $e(Ce(M),A,H,ue)}function X(A,M,H,ue){return $e(Ye(M),A,H,ue)}function ee(A,M,H,ue){return $e(Ve(M,A.length-H),A,H,ue)}y.prototype.write=function(A,M,H,ue){if(M===void 0)ue="utf8",H=this.length,M=0;else if(H===void 0&&typeof M=="string")ue=M,H=this.length,M=0;else if(isFinite(M))M=M>>>0,isFinite(H)?(H=H>>>0,ue===void 0&&(ue="utf8")):(ue=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Te=this.length-M;if((H===void 0||H>Te)&&(H=Te),A.length>0&&(H<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");let J=!1;for(;;)switch(ue){case"hex":return oe(this,A,M,H);case"utf8":case"utf-8":return me(this,A,M,H);case"ascii":case"latin1":case"binary":return ae(this,A,M,H);case"base64":return X(this,A,M,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,A,M,H);default:if(J)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),J=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function se(A,M,H){return M===0&&H===A.length?p.fromByteArray(A):p.fromByteArray(A.slice(M,H))}function _e(A,M,H){H=Math.min(A.length,H);const ue=[];let Te=M;for(;Te<H;){const J=A[Te];let j=null,z=J>239?4:J>223?3:J>191?2:1;if(Te+z<=H){let W,de,ge,De;switch(z){case 1:J<128&&(j=J);break;case 2:W=A[Te+1],(W&192)===128&&(De=(J&31)<<6|W&63,De>127&&(j=De));break;case 3:W=A[Te+1],de=A[Te+2],(W&192)===128&&(de&192)===128&&(De=(J&15)<<12|(W&63)<<6|de&63,De>2047&&(De<55296||De>57343)&&(j=De));break;case 4:W=A[Te+1],de=A[Te+2],ge=A[Te+3],(W&192)===128&&(de&192)===128&&(ge&192)===128&&(De=(J&15)<<18|(W&63)<<12|(de&63)<<6|ge&63,De>65535&&De<1114112&&(j=De))}}j===null?(j=65533,z=1):j>65535&&(j-=65536,ue.push(j>>>10&1023|55296),j=56320|j&1023),ue.push(j),Te+=z}return Re(ue)}const Oe=4096;function Re(A){const M=A.length;if(M<=Oe)return String.fromCharCode.apply(String,A);let H="",ue=0;for(;ue<M;)H+=String.fromCharCode.apply(String,A.slice(ue,ue+=Oe));return H}function ve(A,M,H){let ue="";H=Math.min(A.length,H);for(let Te=M;Te<H;++Te)ue+=String.fromCharCode(A[Te]&127);return ue}function Ne(A,M,H){let ue="";H=Math.min(A.length,H);for(let Te=M;Te<H;++Te)ue+=String.fromCharCode(A[Te]);return ue}function He(A,M,H){const ue=A.length;(!M||M<0)&&(M=0),(!H||H<0||H>ue)&&(H=ue);let Te="";for(let J=M;J<H;++J)Te+=Dt[A[J]];return Te}function be(A,M,H){const ue=A.slice(M,H);let Te="";for(let J=0;J<ue.length-1;J+=2)Te+=String.fromCharCode(ue[J]+ue[J+1]*256);return Te}y.prototype.slice=function(A,M){const H=this.length;A=~~A,M=M===void 0?H:~~M,A<0?(A+=H,A<0&&(A=0)):A>H&&(A=H),M<0?(M+=H,M<0&&(M=0)):M>H&&(M=H),M<A&&(M=A);const ue=this.subarray(A,M);return Object.setPrototypeOf(ue,y.prototype),ue};function je(A,M,H){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+M>H)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(A,M,H){A=A>>>0,M=M>>>0,H||je(A,M,this.length);let ue=this[A],Te=1,J=0;for(;++J<M&&(Te*=256);)ue+=this[A+J]*Te;return ue},y.prototype.readUintBE=y.prototype.readUIntBE=function(A,M,H){A=A>>>0,M=M>>>0,H||je(A,M,this.length);let ue=this[A+--M],Te=1;for(;M>0&&(Te*=256);)ue+=this[A+--M]*Te;return ue},y.prototype.readUint8=y.prototype.readUInt8=function(A,M){return A=A>>>0,M||je(A,1,this.length),this[A]},y.prototype.readUint16LE=y.prototype.readUInt16LE=function(A,M){return A=A>>>0,M||je(A,2,this.length),this[A]|this[A+1]<<8},y.prototype.readUint16BE=y.prototype.readUInt16BE=function(A,M){return A=A>>>0,M||je(A,2,this.length),this[A]<<8|this[A+1]},y.prototype.readUint32LE=y.prototype.readUInt32LE=function(A,M){return A=A>>>0,M||je(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},y.prototype.readUint32BE=y.prototype.readUInt32BE=function(A,M){return A=A>>>0,M||je(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},y.prototype.readBigUInt64LE=dt(function(A){A=A>>>0,le(A,"offset");const M=this[A],H=this[A+7];(M===void 0||H===void 0)&&ye(A,this.length-8);const ue=M+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,Te=this[++A]+this[++A]*2**8+this[++A]*2**16+H*2**24;return BigInt(ue)+(BigInt(Te)<<BigInt(32))}),y.prototype.readBigUInt64BE=dt(function(A){A=A>>>0,le(A,"offset");const M=this[A],H=this[A+7];(M===void 0||H===void 0)&&ye(A,this.length-8);const ue=M*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],Te=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+H;return(BigInt(ue)<<BigInt(32))+BigInt(Te)}),y.prototype.readIntLE=function(A,M,H){A=A>>>0,M=M>>>0,H||je(A,M,this.length);let ue=this[A],Te=1,J=0;for(;++J<M&&(Te*=256);)ue+=this[A+J]*Te;return Te*=128,ue>=Te&&(ue-=Math.pow(2,8*M)),ue},y.prototype.readIntBE=function(A,M,H){A=A>>>0,M=M>>>0,H||je(A,M,this.length);let ue=M,Te=1,J=this[A+--ue];for(;ue>0&&(Te*=256);)J+=this[A+--ue]*Te;return Te*=128,J>=Te&&(J-=Math.pow(2,8*M)),J},y.prototype.readInt8=function(A,M){return A=A>>>0,M||je(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},y.prototype.readInt16LE=function(A,M){A=A>>>0,M||je(A,2,this.length);const H=this[A]|this[A+1]<<8;return H&32768?H|4294901760:H},y.prototype.readInt16BE=function(A,M){A=A>>>0,M||je(A,2,this.length);const H=this[A+1]|this[A]<<8;return H&32768?H|4294901760:H},y.prototype.readInt32LE=function(A,M){return A=A>>>0,M||je(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},y.prototype.readInt32BE=function(A,M){return A=A>>>0,M||je(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},y.prototype.readBigInt64LE=dt(function(A){A=A>>>0,le(A,"offset");const M=this[A],H=this[A+7];(M===void 0||H===void 0)&&ye(A,this.length-8);const ue=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(H<<24);return(BigInt(ue)<<BigInt(32))+BigInt(M+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),y.prototype.readBigInt64BE=dt(function(A){A=A>>>0,le(A,"offset");const M=this[A],H=this[A+7];(M===void 0||H===void 0)&&ye(A,this.length-8);const ue=(M<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt(ue)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+H)}),y.prototype.readFloatLE=function(A,M){return A=A>>>0,M||je(A,4,this.length),d.read(this,A,!0,23,4)},y.prototype.readFloatBE=function(A,M){return A=A>>>0,M||je(A,4,this.length),d.read(this,A,!1,23,4)},y.prototype.readDoubleLE=function(A,M){return A=A>>>0,M||je(A,8,this.length),d.read(this,A,!0,52,8)},y.prototype.readDoubleBE=function(A,M){return A=A>>>0,M||je(A,8,this.length),d.read(this,A,!1,52,8)};function qe(A,M,H,ue,Te,J){if(!y.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>Te||M<J)throw new RangeError('"value" argument is out of bounds');if(H+ue>A.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(A,M,H,ue){if(A=+A,M=M>>>0,H=H>>>0,!ue){const j=Math.pow(2,8*H)-1;qe(this,A,M,H,j,0)}let Te=1,J=0;for(this[M]=A&255;++J<H&&(Te*=256);)this[M+J]=A/Te&255;return M+H},y.prototype.writeUintBE=y.prototype.writeUIntBE=function(A,M,H,ue){if(A=+A,M=M>>>0,H=H>>>0,!ue){const j=Math.pow(2,8*H)-1;qe(this,A,M,H,j,0)}let Te=H-1,J=1;for(this[M+Te]=A&255;--Te>=0&&(J*=256);)this[M+Te]=A/J&255;return M+H},y.prototype.writeUint8=y.prototype.writeUInt8=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,1,255,0),this[M]=A&255,M+1},y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,2,65535,0),this[M]=A&255,this[M+1]=A>>>8,M+2},y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,2,65535,0),this[M]=A>>>8,this[M+1]=A&255,M+2},y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,4,4294967295,0),this[M+3]=A>>>24,this[M+2]=A>>>16,this[M+1]=A>>>8,this[M]=A&255,M+4},y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,4,4294967295,0),this[M]=A>>>24,this[M+1]=A>>>16,this[M+2]=A>>>8,this[M+3]=A&255,M+4};function ot(A,M,H,ue,Te){te(M,ue,Te,A,H,7);let J=Number(M&BigInt(4294967295));A[H++]=J,J=J>>8,A[H++]=J,J=J>>8,A[H++]=J,J=J>>8,A[H++]=J;let j=Number(M>>BigInt(32)&BigInt(4294967295));return A[H++]=j,j=j>>8,A[H++]=j,j=j>>8,A[H++]=j,j=j>>8,A[H++]=j,H}function ut(A,M,H,ue,Te){te(M,ue,Te,A,H,7);let J=Number(M&BigInt(4294967295));A[H+7]=J,J=J>>8,A[H+6]=J,J=J>>8,A[H+5]=J,J=J>>8,A[H+4]=J;let j=Number(M>>BigInt(32)&BigInt(4294967295));return A[H+3]=j,j=j>>8,A[H+2]=j,j=j>>8,A[H+1]=j,j=j>>8,A[H]=j,H+8}y.prototype.writeBigUInt64LE=dt(function(A,M=0){return ot(this,A,M,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeBigUInt64BE=dt(function(A,M=0){return ut(this,A,M,BigInt(0),BigInt("0xffffffffffffffff"))}),y.prototype.writeIntLE=function(A,M,H,ue){if(A=+A,M=M>>>0,!ue){const z=Math.pow(2,8*H-1);qe(this,A,M,H,z-1,-z)}let Te=0,J=1,j=0;for(this[M]=A&255;++Te<H&&(J*=256);)A<0&&j===0&&this[M+Te-1]!==0&&(j=1),this[M+Te]=(A/J>>0)-j&255;return M+H},y.prototype.writeIntBE=function(A,M,H,ue){if(A=+A,M=M>>>0,!ue){const z=Math.pow(2,8*H-1);qe(this,A,M,H,z-1,-z)}let Te=H-1,J=1,j=0;for(this[M+Te]=A&255;--Te>=0&&(J*=256);)A<0&&j===0&&this[M+Te+1]!==0&&(j=1),this[M+Te]=(A/J>>0)-j&255;return M+H},y.prototype.writeInt8=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,1,127,-128),A<0&&(A=255+A+1),this[M]=A&255,M+1},y.prototype.writeInt16LE=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,2,32767,-32768),this[M]=A&255,this[M+1]=A>>>8,M+2},y.prototype.writeInt16BE=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,2,32767,-32768),this[M]=A>>>8,this[M+1]=A&255,M+2},y.prototype.writeInt32LE=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,4,2147483647,-2147483648),this[M]=A&255,this[M+1]=A>>>8,this[M+2]=A>>>16,this[M+3]=A>>>24,M+4},y.prototype.writeInt32BE=function(A,M,H){return A=+A,M=M>>>0,H||qe(this,A,M,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[M]=A>>>24,this[M+1]=A>>>16,this[M+2]=A>>>8,this[M+3]=A&255,M+4},y.prototype.writeBigInt64LE=dt(function(A,M=0){return ot(this,A,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),y.prototype.writeBigInt64BE=dt(function(A,M=0){return ut(this,A,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Je(A,M,H,ue,Te,J){if(H+ue>A.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function at(A,M,H,ue,Te){return M=+M,H=H>>>0,Te||Je(A,M,H,4),d.write(A,M,H,ue,23,4),H+4}y.prototype.writeFloatLE=function(A,M,H){return at(this,A,M,!0,H)},y.prototype.writeFloatBE=function(A,M,H){return at(this,A,M,!1,H)};function Ht(A,M,H,ue,Te){return M=+M,H=H>>>0,Te||Je(A,M,H,8),d.write(A,M,H,ue,52,8),H+8}y.prototype.writeDoubleLE=function(A,M,H){return Ht(this,A,M,!0,H)},y.prototype.writeDoubleBE=function(A,M,H){return Ht(this,A,M,!1,H)},y.prototype.copy=function(A,M,H,ue){if(!y.isBuffer(A))throw new TypeError("argument should be a Buffer");if(H||(H=0),!ue&&ue!==0&&(ue=this.length),M>=A.length&&(M=A.length),M||(M=0),ue>0&&ue<H&&(ue=H),ue===H||A.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),A.length-M<ue-H&&(ue=A.length-M+H);const Te=ue-H;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,H,ue):Uint8Array.prototype.set.call(A,this.subarray(H,ue),M),Te},y.prototype.fill=function(A,M,H,ue){if(typeof A=="string"){if(typeof M=="string"?(ue=M,M=0,H=this.length):typeof H=="string"&&(ue=H,H=this.length),ue!==void 0&&typeof ue!="string")throw new TypeError("encoding must be a string");if(typeof ue=="string"&&!y.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(A.length===1){const J=A.charCodeAt(0);(ue==="utf8"&&J<128||ue==="latin1")&&(A=J)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(M<0||this.length<M||this.length<H)throw new RangeError("Out of range index");if(H<=M)return this;M=M>>>0,H=H===void 0?this.length:H>>>0,A||(A=0);let Te;if(typeof A=="number")for(Te=M;Te<H;++Te)this[Te]=A;else{const J=y.isBuffer(A)?A:y.from(A,ue),j=J.length;if(j===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(Te=0;Te<H-M;++Te)this[Te+M]=J[Te%j]}return this};const qt={};function dr(A,M,H){qt[A]=function(ue){a(J,ue);var Te=u(J);function J(){var j;return t(this,J),j=Te.call(this),Object.defineProperty(l(j),"message",{value:M.apply(l(j),arguments),writable:!0,configurable:!0}),j.name=`${j.name} [${A}]`,j.stack,delete j.name,j}return r(J,[{key:"code",get:function(){return A},set:function(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}},{key:"toString",value:function(){return`${this.name} [${A}]: ${this.message}`}}]),J}(H)}dr("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),dr("ERR_INVALID_ARG_TYPE",function(A,M){return`The "${A}" argument must be of type number. Received type ${typeof M}`},TypeError),dr("ERR_OUT_OF_RANGE",function(A,M,H){let ue=`The value of "${A}" is out of range.`,Te=H;return Number.isInteger(H)&&Math.abs(H)>2**32?Te=tr(String(H)):typeof H=="bigint"&&(Te=String(H),(H>BigInt(2)**BigInt(32)||H<-(BigInt(2)**BigInt(32)))&&(Te=tr(Te)),Te+="n"),ue+=` It must be ${M}. Received ${Te}`,ue},RangeError);function tr(A){let M="",H=A.length;const ue=A[0]==="-"?1:0;for(;H>=ue+4;H-=3)M=`_${A.slice(H-3,H)}${M}`;return`${A.slice(0,H)}${M}`}function Ie(A,M,H){le(M,"offset"),(A[M]===void 0||A[M+H]===void 0)&&ye(M,A.length-(H+1))}function te(A,M,H,ue,Te,J){if(A>H||A<M){const j=typeof M=="bigint"?"n":"";let z;throw M===0||M===BigInt(0)?z=`>= 0${j} and < 2${j} ** ${(J+1)*8}${j}`:z=`>= -(2${j} ** ${(J+1)*8-1}${j}) and < 2 ** ${(J+1)*8-1}${j}`,new qt.ERR_OUT_OF_RANGE("value",z,A)}Ie(ue,Te,J)}function le(A,M){if(typeof A!="number")throw new qt.ERR_INVALID_ARG_TYPE(M,"number",A)}function ye(A,M,H){throw Math.floor(A)!==A?(le(A,H),new qt.ERR_OUT_OF_RANGE("offset","an integer",A)):M<0?new qt.ERR_BUFFER_OUT_OF_BOUNDS:new qt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${M}`,A)}const Z=/[^+/0-9A-Za-z-_]/g;function fe(A){if(A=A.split("=")[0],A=A.trim().replace(Z,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function we(A,M){M=M||1/0;let H;const ue=A.length;let Te=null;const J=[];for(let j=0;j<ue;++j){if(H=A.charCodeAt(j),H>55295&&H<57344){if(!Te){if(H>56319){(M-=3)>-1&&J.push(239,191,189);continue}else if(j+1===ue){(M-=3)>-1&&J.push(239,191,189);continue}Te=H;continue}if(H<56320){(M-=3)>-1&&J.push(239,191,189),Te=H;continue}H=(Te-55296<<10|H-56320)+65536}else Te&&(M-=3)>-1&&J.push(239,191,189);if(Te=null,H<128){if((M-=1)<0)break;J.push(H)}else if(H<2048){if((M-=2)<0)break;J.push(H>>6|192,H&63|128)}else if(H<65536){if((M-=3)<0)break;J.push(H>>12|224,H>>6&63|128,H&63|128)}else if(H<1114112){if((M-=4)<0)break;J.push(H>>18|240,H>>12&63|128,H>>6&63|128,H&63|128)}else throw new Error("Invalid code point")}return J}function Ce(A){const M=[];for(let H=0;H<A.length;++H)M.push(A.charCodeAt(H)&255);return M}function Ve(A,M){let H,ue,Te;const J=[];for(let j=0;j<A.length&&!((M-=2)<0);++j)H=A.charCodeAt(j),ue=H>>8,Te=H%256,J.push(Te),J.push(ue);return J}function Ye(A){return p.toByteArray(fe(A))}function $e(A,M,H,ue){let Te;for(Te=0;Te<ue&&!(Te+H>=M.length||Te>=A.length);++Te)M[Te+H]=A[Te];return Te}function it(A,M){return A instanceof M||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===M.name}function ht(A){return A!==A}const Dt=function(){const A="0123456789abcdef",M=new Array(256);for(let H=0;H<16;++H){const ue=H*16;for(let Te=0;Te<16;++Te)M[ue+Te]=A[H]+A[Te]}return M}();function dt(A){return typeof BigInt>"u"?pr:A}function pr(){throw new Error("BigInt not supported")}})(Fq);var Kl=Br,Dn=_5e,Hq=Fq.Buffer;globalThis.__TYPEDARRAY_POOL||(globalThis.__TYPEDARRAY_POOL={UINT8:Dn([32,0]),UINT16:Dn([32,0]),UINT32:Dn([32,0]),BIGUINT64:Dn([32,0]),INT8:Dn([32,0]),INT16:Dn([32,0]),INT32:Dn([32,0]),BIGINT64:Dn([32,0]),FLOAT:Dn([32,0]),DOUBLE:Dn([32,0]),DATA:Dn([32,0]),UINT8C:Dn([32,0]),BUFFER:Dn([32,0])});var I5e=typeof Uint8ClampedArray<"u",C5e=typeof BigUint64Array<"u",P5e=typeof BigInt64Array<"u",en=globalThis.__TYPEDARRAY_POOL;en.UINT8C||(en.UINT8C=Dn([32,0]));en.BIGUINT64||(en.BIGUINT64=Dn([32,0]));en.BIGINT64||(en.BIGINT64=Dn([32,0]));en.BUFFER||(en.BUFFER=Dn([32,0]));var yS=en.DATA,vS=en.BUFFER;Ut.free=function(e){if(Hq.isBuffer(e))vS[Kl.log2(e.length)].push(e);else{if(Object.prototype.toString.call(e)!=="[object ArrayBuffer]"&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=Kl.log2(t)|0;yS[n].push(e)}};function Uq(e){if(e){var t=e.length||e.byteLength,n=Kl.log2(t);yS[n].push(e)}}function D5e(e){Uq(e.buffer)}Ut.freeUint8=Ut.freeUint16=Ut.freeUint32=Ut.freeBigUint64=Ut.freeInt8=Ut.freeInt16=Ut.freeInt32=Ut.freeBigInt64=Ut.freeFloat32=Ut.freeFloat=Ut.freeFloat64=Ut.freeDouble=Ut.freeUint8Clamped=Ut.freeDataView=D5e;Ut.freeArrayBuffer=Uq;Ut.freeBuffer=function(e){vS[Kl.log2(e.length)].push(e)};Ut.malloc=function(e,t){if(t===void 0||t==="arraybuffer")return Hi(e);switch(t){case"uint8":return t2(e);case"uint16":return zq(e);case"uint32":return Vq(e);case"int8":return Yq(e);case"int16":return Xq(e);case"int32":return Wq(e);case"float":case"float32":return qq(e);case"double":case"float64":return $q(e);case"uint8_clamped":return Kq(e);case"bigint64":return Zq(e);case"biguint64":return Qq(e);case"buffer":return e$(e);case"data":case"dataview":return Jq(e);default:return null}return null};function Hi(t){var t=Kl.nextPow2(t),n=Kl.log2(t),r=yS[n];return r.length>0?r.pop():new ArrayBuffer(t)}Ut.mallocArrayBuffer=Hi;function t2(e){return new Uint8Array(Hi(e),0,e)}Ut.mallocUint8=t2;function zq(e){return new Uint16Array(Hi(2*e),0,e)}Ut.mallocUint16=zq;function Vq(e){return new Uint32Array(Hi(4*e),0,e)}Ut.mallocUint32=Vq;function Yq(e){return new Int8Array(Hi(e),0,e)}Ut.mallocInt8=Yq;function Xq(e){return new Int16Array(Hi(2*e),0,e)}Ut.mallocInt16=Xq;function Wq(e){return new Int32Array(Hi(4*e),0,e)}Ut.mallocInt32=Wq;function qq(e){return new Float32Array(Hi(4*e),0,e)}Ut.mallocFloat32=Ut.mallocFloat=qq;function $q(e){return new Float64Array(Hi(8*e),0,e)}Ut.mallocFloat64=Ut.mallocDouble=$q;function Kq(e){return I5e?new Uint8ClampedArray(Hi(e),0,e):t2(e)}Ut.mallocUint8Clamped=Kq;function Qq(e){return C5e?new BigUint64Array(Hi(8*e),0,e):null}Ut.mallocBigUint64=Qq;function Zq(e){return P5e?new BigInt64Array(Hi(8*e),0,e):null}Ut.mallocBigInt64=Zq;function Jq(e){return new DataView(Hi(e),0,e)}Ut.mallocDataView=Jq;function e$(e){e=Kl.nextPow2(e);var t=Kl.log2(e),n=vS[t];return n.length>0?n.pop():new Hq(e)}Ut.mallocBuffer=e$;Ut.clearCache=function(){for(var e=0;e<32;++e)en.UINT8[e].length=0,en.UINT16[e].length=0,en.UINT32[e].length=0,en.INT8[e].length=0,en.INT16[e].length=0,en.INT32[e].length=0,en.FLOAT[e].length=0,en.DOUBLE[e].length=0,en.BIGUINT64[e].length=0,en.BIGINT64[e].length=0,en.UINT8C[e].length=0,yS[e].length=0,vS[e].length=0};var R5e=N5e,k0=32;function N5e(e,t){t<=4*k0?x0(0,t-1,e):I0(0,t-1,e)}function x0(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var o=n[r++],a=n[r++],s=i,u=r-2;s-- >e;){var c=n[u-2],l=n[u-1];if(c<o||c===o&&l<a)break;n[u]=c,n[u+1]=l,u-=2}n[u]=o,n[u+1]=a}}function nG(e,t,n){e*=2,t*=2;var r=n[e],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function iG(e,t,n){e*=2,t*=2,n[e]=n[t],n[e+1]=n[t+1]}function M5e(e,t,n,r){e*=2,t*=2,n*=2;var i=r[e],o=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=o}function oG(e,t,n,r,i){e*=2,t*=2,i[e]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function is(e,t,n){e*=2,t*=2;var r=n[e],i=n[t];return r<i?!1:r===i?n[e+1]>n[t+1]:!0}function Ab(e,t,n,r){e*=2;var i=r[e];return i<t?!0:i===t?r[e+1]<n:!1}function I0(e,t,n){var r=(t-e+1)/6|0,i=e+r,o=t-r,a=e+t>>1,s=a-r,u=a+r,c=i,l=s,f=a,h=u,p=o,d=e+1,m=t-1,g=0;is(c,l,n)&&(g=c,c=l,l=g),is(h,p,n)&&(g=h,h=p,p=g),is(c,f,n)&&(g=c,c=f,f=g),is(l,f,n)&&(g=l,l=f,f=g),is(c,h,n)&&(g=c,c=h,h=g),is(f,h,n)&&(g=f,f=h,h=g),is(l,p,n)&&(g=l,l=p,p=g),is(l,f,n)&&(g=l,l=f,f=g),is(h,p,n)&&(g=h,h=p,p=g);for(var v=n[2*l],b=n[2*l+1],y=n[2*h],_=n[2*h+1],T=2*c,S=2*f,E=2*p,I=2*i,x=2*a,C=2*o,w=0;w<2;++w){var B=n[T+w],L=n[S+w],k=n[E+w];n[I+w]=B,n[x+w]=L,n[C+w]=k}iG(s,e,n),iG(u,t,n);for(var R=d;R<=m;++R)if(Ab(R,v,b,n))R!==d&&nG(R,d,n),++d;else if(!Ab(R,y,_,n))for(;;)if(Ab(m,y,_,n)){Ab(m,v,b,n)?(M5e(R,d,m,n),++d,--m):(nG(R,m,n),--m);break}else{if(--m<R)break;continue}oG(e,d-1,v,b,n),oG(t,m+1,y,_,n),d-2-e<=k0?x0(e,d-2,n):I0(e,d-2,n),t-(m+2)<=k0?x0(m+2,t,n):I0(m+2,t,n),m-d<=k0?x0(d,m,n):I0(d,m,n)}var t$={init:j5e,sweepBipartite:B5e,sweepComplete:F5e,scanBipartite:G5e,scanComplete:H5e},Jr=Ut,L5e=Br,bS=R5e,So=1<<28,ch=1024,Mn=Jr.mallocInt32(ch),ks=Jr.mallocInt32(ch),xs=Jr.mallocInt32(ch),rc=Jr.mallocInt32(ch),Bf=Jr.mallocInt32(ch),Sg=Jr.mallocInt32(ch),Lt=Jr.mallocDouble(ch*8);function j5e(e){var t=L5e.nextPow2(e);Mn.length<t&&(Jr.free(Mn),Mn=Jr.mallocInt32(t)),ks.length<t&&(Jr.free(ks),ks=Jr.mallocInt32(t)),xs.length<t&&(Jr.free(xs),xs=Jr.mallocInt32(t)),rc.length<t&&(Jr.free(rc),rc=Jr.mallocInt32(t)),Bf.length<t&&(Jr.free(Bf),Bf=Jr.mallocInt32(t)),Sg.length<t&&(Jr.free(Sg),Sg=Jr.mallocInt32(t));var n=8*t;Lt.length<n&&(Jr.free(Lt),Lt=Jr.mallocDouble(n))}function Ff(e,t,n,r){var i=t[r],o=e[n-1];e[i]=o,t[o]=i}function Gf(e,t,n,r){e[n]=r,t[r]=n}function B5e(e,t,n,r,i,o,a,s,u,c){for(var l=0,f=2*e,h=e-1,p=f-1,d=n;d<r;++d){var m=o[d],g=f*d;Lt[l++]=i[g+h],Lt[l++]=-(m+1),Lt[l++]=i[g+p],Lt[l++]=m}for(var d=a;d<s;++d){var m=c[d]+So,v=f*d;Lt[l++]=u[v+h],Lt[l++]=-m,Lt[l++]=u[v+p],Lt[l++]=m}var b=l>>>1;bS(Lt,b);for(var y=0,_=0,d=0;d<b;++d){var T=Lt[2*d+1]|0;if(T>=So)T=T-So|0,Ff(xs,rc,_--,T);else if(T>=0)Ff(Mn,ks,y--,T);else if(T<=-268435456){T=-T-So|0;for(var S=0;S<y;++S){var E=t(Mn[S],T);if(E!==void 0)return E}Gf(xs,rc,_++,T)}else{T=-T-1|0;for(var S=0;S<_;++S){var E=t(T,xs[S]);if(E!==void 0)return E}Gf(Mn,ks,y++,T)}}}function F5e(e,t,n,r,i,o,a,s,u,c){for(var l=0,f=2*e,h=e-1,p=f-1,d=n;d<r;++d){var m=o[d]+1<<1,g=f*d;Lt[l++]=i[g+h],Lt[l++]=-m,Lt[l++]=i[g+p],Lt[l++]=m}for(var d=a;d<s;++d){var m=c[d]+1<<1,v=f*d;Lt[l++]=u[v+h],Lt[l++]=-m|1,Lt[l++]=u[v+p],Lt[l++]=m|1}var b=l>>>1;bS(Lt,b);for(var y=0,_=0,T=0,d=0;d<b;++d){var S=Lt[2*d+1]|0,E=S&1;if(d<b-1&&S>>1===Lt[2*d+3]>>1&&(E=2,d+=1),S<0){for(var I=-(S>>1)-1,x=0;x<T;++x){var C=t(Bf[x],I);if(C!==void 0)return C}if(E!==0)for(var x=0;x<y;++x){var C=t(Mn[x],I);if(C!==void 0)return C}if(E!==1)for(var x=0;x<_;++x){var C=t(xs[x],I);if(C!==void 0)return C}E===0?Gf(Mn,ks,y++,I):E===1?Gf(xs,rc,_++,I):E===2&&Gf(Bf,Sg,T++,I)}else{var I=(S>>1)-1;E===0?Ff(Mn,ks,y--,I):E===1?Ff(xs,rc,_--,I):E===2&&Ff(Bf,Sg,T--,I)}}}function G5e(e,t,n,r,i,o,a,s,u,c,l,f){var h=0,p=2*e,d=t,m=t+e,g=1,v=1;r?v=So:g=So;for(var b=i;b<o;++b){var y=b+g,_=p*b;Lt[h++]=a[_+d],Lt[h++]=-y,Lt[h++]=a[_+m],Lt[h++]=y}for(var b=u;b<c;++b){var y=b+v,T=p*b;Lt[h++]=l[T+d],Lt[h++]=-y}var S=h>>>1;bS(Lt,S);for(var E=0,b=0;b<S;++b){var I=Lt[2*b+1]|0;if(I<0){var y=-I,x=!1;if(y>=So?(x=!r,y-=So):(x=!!r,y-=1),x)Gf(Mn,ks,E++,y);else{var C=f[y],w=p*y,B=l[w+t+1],L=l[w+t+1+e];e:for(var k=0;k<E;++k){var R=Mn[k],F=p*R;if(!(L<a[F+t+1]||a[F+t+1+e]<B)){for(var U=t+2;U<e;++U)if(l[w+U+e]<a[F+U]||a[F+U+e]<l[w+U])continue e;var $=s[R],ie;if(r?ie=n(C,$):ie=n($,C),ie!==void 0)return ie}}}}else Ff(Mn,ks,E--,I-g)}}function H5e(e,t,n,r,i,o,a,s,u,c,l){for(var f=0,h=2*e,p=t,d=t+e,m=r;m<i;++m){var g=m+So,v=h*m;Lt[f++]=o[v+p],Lt[f++]=-g,Lt[f++]=o[v+d],Lt[f++]=g}for(var m=s;m<u;++m){var g=m+1,b=h*m;Lt[f++]=c[b+p],Lt[f++]=-g}var y=f>>>1;bS(Lt,y);for(var _=0,m=0;m<y;++m){var T=Lt[2*m+1]|0;if(T<0){var g=-T;if(g>=So)Mn[_++]=g-So;else{g-=1;var S=l[g],E=h*g,I=c[E+t+1],x=c[E+t+1+e];e:for(var C=0;C<_;++C){var w=Mn[C],B=a[w];if(B===S)break;var L=h*w;if(!(x<o[L+t+1]||o[L+t+1+e]<I)){for(var k=t+2;k<e;++k)if(c[E+k+e]<o[L+k]||o[L+k+e]<c[E+k])continue e;var R=n(B,S);if(R!==void 0)return R}}}}else{for(var g=T-So,C=_-1;C>=0;--C)if(Mn[C]===g){for(var k=C+1;k<_;++k)Mn[k-1]=Mn[k];break}--_}}}var r2={},Nu="d",Yh="ax",r$="vv",cO="fp",sm="es",aT="rs",n2="re",Rm="rb",n$="ri",Mh="rp",sT="bs",i2="be",Nm="bb",i$="bi",Lh="bp",hO="rv",fO="Q",xI=[Nu,Yh,r$,aT,n2,Rm,n$,sT,i2,Nm,i$];function U5e(e,t,n){var r="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),i=["function ",r,"(",xI.join(),"){","var ",sm,"=2*",Nu,";"],o="for(var i="+aT+","+Mh+"="+sm+"*"+aT+";i<"+n2+";++i,"+Mh+"+="+sm+"){var x0="+Rm+"["+Yh+"+"+Mh+"],x1="+Rm+"["+Yh+"+"+Mh+"+"+Nu+"],xi="+n$+"[i];",a="for(var j="+sT+","+Lh+"="+sm+"*"+sT+";j<"+i2+";++j,"+Lh+"+="+sm+"){var y0="+Nm+"["+Yh+"+"+Lh+"],"+(n?"y1="+Nm+"["+Yh+"+"+Lh+"+"+Nu+"],":"")+"yi="+i$+"[j];";return e?i.push(o,fO,":",a):i.push(a,fO,":",o),n?i.push("if(y1<x0||x1<y0)continue;"):t?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+Yh+"+1;k<"+Nu+";++k){var r0="+Rm+"[k+"+Mh+"],r1="+Rm+"[k+"+Nu+"+"+Mh+"],b0="+Nm+"[k+"+Lh+"],b1="+Nm+"[k+"+Nu+"+"+Lh+"];if(r1<b0||b1<r0)continue "+fO+";}var "+hO+"="+r$+"("),t?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+hO+"!==void 0)return "+hO+";}}}"),{name:r,code:i.join("")}}function o$(e){var t="bruteForce"+(e?"Full":"Partial"),n=[],r=xI.slice();e||r.splice(3,0,cO);var i=["function "+t+"("+r.join()+"){"];function o(u,c){var l=U5e(u,c,e);n.push(l.code),i.push("return "+l.name+"("+xI.join()+");")}i.push("if("+n2+"-"+aT+">"+i2+"-"+sT+"){"),e?(o(!0,!1),i.push("}else{"),o(!1,!1)):(i.push("if("+cO+"){"),o(!0,!0),i.push("}else{"),o(!0,!1),i.push("}}else{if("+cO+"){"),o(!1,!0),i.push("}else{"),o(!1,!1),i.push("}")),i.push("}}return "+t);var a=n.join("")+i.join(""),s=new Function(a);return s()}r2.partial=o$(!1);r2.full=o$(!0);var a$=V5e,z5e="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";function V5e(e,t){var n="abcdef".split("").concat(t),r=[];return e.indexOf("lo")>=0&&r.push("lo=e[k+n]"),e.indexOf("hi")>=0&&r.push("hi=e[k+o]"),n.push(z5e.replace("_",r.join()).replace("$",e)),Function.apply(void 0,n)}var Y5e=$5e,X5e=a$,aG=X5e("lo<p0",["p0"]),W5e=8;function q5e(e,t,n,r,i,o){for(var a=2*e,s=a*(n+1)+t,u=n+1;u<r;++u,s+=a)for(var c=i[s],l=u,f=a*(u-1);l>n&&i[f+t]>c;--l,f-=a){for(var h=f,p=f+a,d=0;d<a;++d,++h,++p){var m=i[h];i[h]=i[p],i[p]=m}var g=o[l];o[l]=o[l-1],o[l-1]=g}}function $5e(e,t,n,r,i,o){if(r<=n+1)return n;for(var a=n,s=r,u=r+n>>>1,c=2*e,l=u,f=i[c*u+t];a<s;){if(s-a<W5e){q5e(e,t,a,s,i,o),f=i[c*u+t];break}var h=s-a,p=Math.random()*h+a|0,d=i[c*p+t],m=Math.random()*h+a|0,g=i[c*m+t],v=Math.random()*h+a|0,b=i[c*v+t];d<=g?b>=g?(l=m,f=g):d>=b?(l=p,f=d):(l=v,f=b):g>=b?(l=m,f=g):b>=d?(l=p,f=d):(l=v,f=b);for(var y=c*(s-1),_=c*l,T=0;T<c;++T,++y,++_){var S=i[y];i[y]=i[_],i[_]=S}var E=o[s-1];o[s-1]=o[l],o[l]=E,l=aG(e,t,a,s-1,i,o,f);for(var y=c*(s-1),_=c*l,T=0;T<c;++T,++y,++_){var S=i[y];i[y]=i[_],i[_]=S}var E=o[s-1];if(o[s-1]=o[l],o[l]=E,u<l){for(s=l-1;a<s&&i[c*(s-1)+t]===f;)s-=1;s+=1}else if(l<u)for(a=l+1;a<s&&i[c*a+t]===f;)a+=1;else break}return aG(e,t,n,u,i,o,i[c*u+t])}var K5e=uje,yf=Ut,pO=Br,s$=r2,Q5e=s$.partial,Z5e=s$.full,sl=t$,J5e=Y5e,Td=a$,sG=128,eje=1<<22,tje=1<<22,rje=Td("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),lG=Td("lo===p0",["p0"]),nje=Td("lo<p0",["p0"]),ije=Td("hi<=p0",["p0"]),uG=Td("lo<=p0&&p0<=hi",["p0"]),oje=Td("lo<p0&&p0<=hi",["p0"]),o2=6,a2=2,l$=1024,pi=yf.mallocInt32(l$),nc=yf.mallocDouble(l$);function aje(e,t){var n=8*pO.log2(t+1)*(e+1)|0,r=pO.nextPow2(o2*n);pi.length<r&&(yf.free(pi),pi=yf.mallocInt32(r));var i=pO.nextPow2(a2*n);nc.length<i&&(yf.free(nc),nc=yf.mallocDouble(i))}function Do(e,t,n,r,i,o,a,s,u){var c=o2*e;pi[c]=t,pi[c+1]=n,pi[c+2]=r,pi[c+3]=i,pi[c+4]=o,pi[c+5]=a;var l=a2*e;nc[l]=s,nc[l+1]=u}function sje(e,t,n,r,i,o,a,s,u,c,l){var f=2*e,h=u*f,p=c[h+t];e:for(var d=i,m=i*f;d<o;++d,m+=f){var g=a[m+t],v=a[m+t+e];if(!(p<g||v<p)&&!(r&&p===g)){for(var b=s[d],y=t+1;y<e;++y){var g=a[m+y],v=a[m+y+e],_=c[h+y],T=c[h+y+e];if(v<_||T<g)continue e}var S;if(r?S=n(l,b):S=n(b,l),S!==void 0)return S}}}function lje(e,t,n,r,i,o,a,s,u,c){var l=2*e,f=s*l,h=u[f+t];e:for(var p=r,d=r*l;p<i;++p,d+=l){var m=a[p];if(m!==c){var g=o[d+t],v=o[d+t+e];if(!(h<g||v<h)){for(var b=t+1;b<e;++b){var g=o[d+b],v=o[d+b+e],y=u[f+b],_=u[f+b+e];if(v<y||_<g)continue e}var T=n(m,c);if(T!==void 0)return T}}}}function uje(e,t,n,r,i,o,a,s,u){aje(e,r+a);var c=0,l=2*e,f;for(Do(c++,0,0,r,0,a,n?16:0,-1/0,1/0),n||Do(c++,0,0,a,0,r,1,-1/0,1/0);c>0;){c-=1;var h=c*o2,p=pi[h],d=pi[h+1],m=pi[h+2],g=pi[h+3],v=pi[h+4],b=pi[h+5],y=c*a2,_=nc[y],T=nc[y+1],S=b&1,E=!!(b&16),I=i,x=o,C=s,w=u;if(S&&(I=s,x=u,C=i,w=o),!(b&2&&(m=nje(e,p,d,m,I,x,T),d>=m))&&!(b&4&&(d=ije(e,p,d,m,I,x,_),d>=m))){var B=m-d,L=v-g;if(E){if(e*B*(B+L)<tje){if(f=sl.scanComplete(e,p,t,d,m,I,x,g,v,C,w),f!==void 0)return f;continue}}else if(e*Math.min(B,L)<sG){if(f=Q5e(e,p,t,S,d,m,I,x,g,v,C,w),f!==void 0)return f;continue}else if(e*B*L<eje){if(f=sl.scanBipartite(e,p,t,S,d,m,I,x,g,v,C,w),f!==void 0)return f;continue}var k=rje(e,p,d,m,I,x,_,T);if(d<k)if(e*(k-d)<sG){if(f=Z5e(e,p+1,t,d,k,I,x,g,v,C,w),f!==void 0)return f}else if(p===e-2){if(S?f=sl.sweepBipartite(e,t,g,v,C,w,d,k,I,x):f=sl.sweepBipartite(e,t,d,k,I,x,g,v,C,w),f!==void 0)return f}else Do(c++,p+1,d,k,g,v,S,-1/0,1/0),Do(c++,p+1,g,v,d,k,S^1,-1/0,1/0);if(k<m){var R=J5e(e,p,g,v,C,w),F=C[l*R+p],U=lG(e,p,R,v,C,w,F);if(U<v&&Do(c++,p,k,m,U,v,(S|4)+(E?16:0),F,T),g<R&&Do(c++,p,k,m,g,R,(S|2)+(E?16:0),_,F),R+1===U){if(E?f=lje(e,p,t,k,m,I,x,R,C,w[R]):f=sje(e,p,t,S,k,m,I,x,R,C,w[R]),f!==void 0)return f}else if(R<U){var $;if(E){if($=uG(e,p,k,m,I,x,F),k<$){var ie=lG(e,p,k,$,I,x,F);if(p===e-2){if(k<ie&&(f=sl.sweepComplete(e,t,k,ie,I,x,R,U,C,w),f!==void 0)||ie<$&&(f=sl.sweepBipartite(e,t,ie,$,I,x,R,U,C,w),f!==void 0))return f}else k<ie&&Do(c++,p+1,k,ie,R,U,16,-1/0,1/0),ie<$&&(Do(c++,p+1,ie,$,R,U,0,-1/0,1/0),Do(c++,p+1,R,U,ie,$,1,-1/0,1/0))}}else S?$=oje(e,p,k,m,I,x,F):$=uG(e,p,k,m,I,x,F),k<$&&(p===e-2?S?f=sl.sweepBipartite(e,t,R,U,C,w,k,$,I,x):f=sl.sweepBipartite(e,t,k,$,I,x,R,U,C,w):(Do(c++,p+1,k,$,R,U,S,-1/0,1/0),Do(c++,p+1,R,U,k,$,S^1,-1/0,1/0)))}}}}}var cje=mje,ll=Ut,Ob=t$,hje=K5e;function fje(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function cG(e,t,n,r){for(var i=0,o=0,a=0,s=e.length;a<s;++a){var u=e[a];if(!fje(t,u)){for(var c=0;c<2*t;++c)n[i++]=u[c];r[o++]=a}}return o}function lT(e,t,n,r){var i=e.length,o=t.length;if(!(i<=0||o<=0)){var a=e[0].length>>>1;if(!(a<=0)){var s,u=ll.mallocDouble(2*a*i),c=ll.mallocInt32(i);if(i=cG(e,a,u,c),i>0){if(a===1&&r)Ob.init(i),s=Ob.sweepComplete(a,n,0,i,u,c,0,i,u,c);else{var l=ll.mallocDouble(2*a*o),f=ll.mallocInt32(o);o=cG(t,a,l,f),o>0&&(Ob.init(i+o),a===1?s=Ob.sweepBipartite(a,n,0,i,u,c,0,o,l,f):s=hje(a,n,r,i,u,c,o,l,f),ll.free(l),ll.free(f))}ll.free(u),ll.free(c)}return s}}}var yy;function u$(e,t){yy.push([e,t])}function pje(e){return yy=[],lT(e,e,u$,!0),yy}function dje(e,t){return yy=[],lT(e,t,u$,!1),yy}function mje(e,t,n){switch(arguments.length){case 1:return pje(e);case 2:return typeof t=="function"?lT(e,e,t,!0):dje(e,t);case 3:return lT(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}}const fv=Gi(cje);var c$={exports:{}},h$=gje,hG=+(Math.pow(2,27)+1);function gje(e,t,n){var r=e*t,i=hG*e,o=i-e,a=i-o,s=e-a,u=hG*t,c=u-t,l=u-c,f=t-l,h=r-a*l,p=h-s*l,d=p-a*f,m=s*f-d;return n?(n[0]=m,n[1]=r,n):[m,r]}var yje=bje;function vje(e,t){var n=e+t,r=n-e,i=n-r,o=t-r,a=e-i,s=a+o;return s?[s,n]:[n]}function bje(e,t){var n=e.length|0,r=t.length|0;if(n===1&&r===1)return vje(e[0],t[0]);var i=n+r,o=new Array(i),a=0,s=0,u=0,c=Math.abs,l=e[s],f=c(l),h=t[u],p=c(h),d,m;f<p?(m=l,s+=1,s<n&&(l=e[s],f=c(l))):(m=h,u+=1,u<r&&(h=t[u],p=c(h))),s<n&&f<p||u>=r?(d=l,s+=1,s<n&&(l=e[s],f=c(l))):(d=h,u+=1,u<r&&(h=t[u],p=c(h)));for(var g=d+m,v=g-d,b=m-v,y=b,_=g,T,S,E,I,x;s<n&&u<r;)f<p?(d=l,s+=1,s<n&&(l=e[s],f=c(l))):(d=h,u+=1,u<r&&(h=t[u],p=c(h))),m=y,g=d+m,v=g-d,b=m-v,b&&(o[a++]=b),T=_+g,S=T-_,E=T-S,I=g-S,x=_-E,y=x+I,_=T;for(;s<n;)d=l,m=y,g=d+m,v=g-d,b=m-v,b&&(o[a++]=b),T=_+g,S=T-_,E=T-S,I=g-S,x=_-E,y=x+I,_=T,s+=1,s<n&&(l=e[s]);for(;u<r;)d=h,m=y,g=d+m,v=g-d,b=m-v,b&&(o[a++]=b),T=_+g,S=T-_,E=T-S,I=g-S,x=_-E,y=x+I,_=T,u+=1,u<r&&(h=t[u]);return y&&(o[a++]=y),_&&(o[a++]=_),a||(o[a++]=0),o.length=a,o}var _je=Tje;function Tje(e,t,n){var r=e+t,i=r-e,o=r-i,a=t-i,s=e-o;return n?(n[0]=s+a,n[1]=r,n):[s+a,r]}var dO=h$,Eje=_je,Sje=wje;function wje(e,t){var n=e.length;if(n===1){var r=dO(e[0],t);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;dO(e[0],t,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<n;++u){dO(e[u],t,a);var c=o[1];Eje(c,a[0],o),o[0]&&(i[s++]=o[0]);var l=a[1],f=o[1],h=l+f,p=h-l,d=f-p;o[1]=h,d&&(i[s++]=d)}return o[1]&&(i[s++]=o[1]),s===0&&(i[s++]=0),i.length=s,i}var Aje=kje;function Oje(e,t){var n=e+t,r=n-e,i=n-r,o=t-r,a=e-i,s=a+o;return s?[s,n]:[n]}function kje(e,t){var n=e.length|0,r=t.length|0;if(n===1&&r===1)return Oje(e[0],-t[0]);var i=n+r,o=new Array(i),a=0,s=0,u=0,c=Math.abs,l=e[s],f=c(l),h=-t[u],p=c(h),d,m;f<p?(m=l,s+=1,s<n&&(l=e[s],f=c(l))):(m=h,u+=1,u<r&&(h=-t[u],p=c(h))),s<n&&f<p||u>=r?(d=l,s+=1,s<n&&(l=e[s],f=c(l))):(d=h,u+=1,u<r&&(h=-t[u],p=c(h)));for(var g=d+m,v=g-d,b=m-v,y=b,_=g,T,S,E,I,x;s<n&&u<r;)f<p?(d=l,s+=1,s<n&&(l=e[s],f=c(l))):(d=h,u+=1,u<r&&(h=-t[u],p=c(h))),m=y,g=d+m,v=g-d,b=m-v,b&&(o[a++]=b),T=_+g,S=T-_,E=T-S,I=g-S,x=_-E,y=x+I,_=T;for(;s<n;)d=l,m=y,g=d+m,v=g-d,b=m-v,b&&(o[a++]=b),T=_+g,S=T-_,E=T-S,I=g-S,x=_-E,y=x+I,_=T,s+=1,s<n&&(l=e[s]);for(;u<r;)d=h,m=y,g=d+m,v=g-d,b=m-v,b&&(o[a++]=b),T=_+g,S=T-_,E=T-S,I=g-S,x=_-E,y=x+I,_=T,u+=1,u<r&&(h=-t[u]);return y&&(o[a++]=y),_&&(o[a++]=_),a||(o[a++]=0),o.length=a,o}(function(e){var t=h$,n=yje,r=Sje,i=Aje,o=5,a=11102230246251565e-32,s=(3+16*a)*a,u=(7+56*a)*a;function c(y,_,T,S){return function(E,I,x){var C=y(y(_(I[1],x[0]),_(-x[1],I[0])),y(_(E[1],I[0]),_(-I[1],E[0]))),w=y(_(E[1],x[0]),_(-x[1],E[0])),B=S(C,w);return B[B.length-1]}}function l(y,_,T,S){return function(E,I,x,C){var w=y(y(T(y(_(x[1],C[0]),_(-C[1],x[0])),I[2]),y(T(y(_(I[1],C[0]),_(-C[1],I[0])),-x[2]),T(y(_(I[1],x[0]),_(-x[1],I[0])),C[2]))),y(T(y(_(I[1],C[0]),_(-C[1],I[0])),E[2]),y(T(y(_(E[1],C[0]),_(-C[1],E[0])),-I[2]),T(y(_(E[1],I[0]),_(-I[1],E[0])),C[2])))),B=y(y(T(y(_(x[1],C[0]),_(-C[1],x[0])),E[2]),y(T(y(_(E[1],C[0]),_(-C[1],E[0])),-x[2]),T(y(_(E[1],x[0]),_(-x[1],E[0])),C[2]))),y(T(y(_(I[1],x[0]),_(-x[1],I[0])),E[2]),y(T(y(_(E[1],x[0]),_(-x[1],E[0])),-I[2]),T(y(_(E[1],I[0]),_(-I[1],E[0])),x[2])))),L=S(w,B);return L[L.length-1]}}function f(y,_,T,S){return function(E,I,x,C,w){var B=y(y(y(T(y(T(y(_(C[1],w[0]),_(-w[1],C[0])),x[2]),y(T(y(_(x[1],w[0]),_(-w[1],x[0])),-C[2]),T(y(_(x[1],C[0]),_(-C[1],x[0])),w[2]))),I[3]),y(T(y(T(y(_(C[1],w[0]),_(-w[1],C[0])),I[2]),y(T(y(_(I[1],w[0]),_(-w[1],I[0])),-C[2]),T(y(_(I[1],C[0]),_(-C[1],I[0])),w[2]))),-x[3]),T(y(T(y(_(x[1],w[0]),_(-w[1],x[0])),I[2]),y(T(y(_(I[1],w[0]),_(-w[1],I[0])),-x[2]),T(y(_(I[1],x[0]),_(-x[1],I[0])),w[2]))),C[3]))),y(T(y(T(y(_(x[1],C[0]),_(-C[1],x[0])),I[2]),y(T(y(_(I[1],C[0]),_(-C[1],I[0])),-x[2]),T(y(_(I[1],x[0]),_(-x[1],I[0])),C[2]))),-w[3]),y(T(y(T(y(_(C[1],w[0]),_(-w[1],C[0])),I[2]),y(T(y(_(I[1],w[0]),_(-w[1],I[0])),-C[2]),T(y(_(I[1],C[0]),_(-C[1],I[0])),w[2]))),E[3]),T(y(T(y(_(C[1],w[0]),_(-w[1],C[0])),E[2]),y(T(y(_(E[1],w[0]),_(-w[1],E[0])),-C[2]),T(y(_(E[1],C[0]),_(-C[1],E[0])),w[2]))),-I[3])))),y(y(T(y(T(y(_(I[1],w[0]),_(-w[1],I[0])),E[2]),y(T(y(_(E[1],w[0]),_(-w[1],E[0])),-I[2]),T(y(_(E[1],I[0]),_(-I[1],E[0])),w[2]))),C[3]),y(T(y(T(y(_(I[1],C[0]),_(-C[1],I[0])),E[2]),y(T(y(_(E[1],C[0]),_(-C[1],E[0])),-I[2]),T(y(_(E[1],I[0]),_(-I[1],E[0])),C[2]))),-w[3]),T(y(T(y(_(x[1],C[0]),_(-C[1],x[0])),I[2]),y(T(y(_(I[1],C[0]),_(-C[1],I[0])),-x[2]),T(y(_(I[1],x[0]),_(-x[1],I[0])),C[2]))),E[3]))),y(T(y(T(y(_(x[1],C[0]),_(-C[1],x[0])),E[2]),y(T(y(_(E[1],C[0]),_(-C[1],E[0])),-x[2]),T(y(_(E[1],x[0]),_(-x[1],E[0])),C[2]))),-I[3]),y(T(y(T(y(_(I[1],C[0]),_(-C[1],I[0])),E[2]),y(T(y(_(E[1],C[0]),_(-C[1],E[0])),-I[2]),T(y(_(E[1],I[0]),_(-I[1],E[0])),C[2]))),x[3]),T(y(T(y(_(I[1],x[0]),_(-x[1],I[0])),E[2]),y(T(y(_(E[1],x[0]),_(-x[1],E[0])),-I[2]),T(y(_(E[1],I[0]),_(-I[1],E[0])),x[2]))),-C[3]))))),L=y(y(y(T(y(T(y(_(C[1],w[0]),_(-w[1],C[0])),x[2]),y(T(y(_(x[1],w[0]),_(-w[1],x[0])),-C[2]),T(y(_(x[1],C[0]),_(-C[1],x[0])),w[2]))),E[3]),T(y(T(y(_(C[1],w[0]),_(-w[1],C[0])),E[2]),y(T(y(_(E[1],w[0]),_(-w[1],E[0])),-C[2]),T(y(_(E[1],C[0]),_(-C[1],E[0])),w[2]))),-x[3])),y(T(y(T(y(_(x[1],w[0]),_(-w[1],x[0])),E[2]),y(T(y(_(E[1],w[0]),_(-w[1],E[0])),-x[2]),T(y(_(E[1],x[0]),_(-x[1],E[0])),w[2]))),C[3]),T(y(T(y(_(x[1],C[0]),_(-C[1],x[0])),E[2]),y(T(y(_(E[1],C[0]),_(-C[1],E[0])),-x[2]),T(y(_(E[1],x[0]),_(-x[1],E[0])),C[2]))),-w[3]))),y(y(T(y(T(y(_(x[1],w[0]),_(-w[1],x[0])),I[2]),y(T(y(_(I[1],w[0]),_(-w[1],I[0])),-x[2]),T(y(_(I[1],x[0]),_(-x[1],I[0])),w[2]))),E[3]),T(y(T(y(_(x[1],w[0]),_(-w[1],x[0])),E[2]),y(T(y(_(E[1],w[0]),_(-w[1],E[0])),-x[2]),T(y(_(E[1],x[0]),_(-x[1],E[0])),w[2]))),-I[3])),y(T(y(T(y(_(I[1],w[0]),_(-w[1],I[0])),E[2]),y(T(y(_(E[1],w[0]),_(-w[1],E[0])),-I[2]),T(y(_(E[1],I[0]),_(-I[1],E[0])),w[2]))),x[3]),T(y(T(y(_(I[1],x[0]),_(-x[1],I[0])),E[2]),y(T(y(_(E[1],x[0]),_(-x[1],E[0])),-I[2]),T(y(_(E[1],I[0]),_(-I[1],E[0])),x[2]))),-w[3])))),k=S(B,L);return k[k.length-1]}}function h(y){var _=y===3?c:y===4?l:f;return _(n,t,r,i)}var p=h(3),d=h(4),m=[function(){return 0},function(){return 0},function(y,_){return _[0]-y[0]},function(y,_,T){var S=(y[1]-T[1])*(_[0]-T[0]),E=(y[0]-T[0])*(_[1]-T[1]),I=S-E,x;if(S>0){if(E<=0)return I;x=S+E}else if(S<0){if(E>=0)return I;x=-(S+E)}else return I;var C=s*x;return I>=C||I<=-C?I:p(y,_,T)},function(y,_,T,S){var E=y[0]-S[0],I=_[0]-S[0],x=T[0]-S[0],C=y[1]-S[1],w=_[1]-S[1],B=T[1]-S[1],L=y[2]-S[2],k=_[2]-S[2],R=T[2]-S[2],F=I*B,U=x*w,$=x*C,ie=E*B,oe=E*w,me=I*C,ae=L*(F-U)+k*($-ie)+R*(oe-me),X=(Math.abs(F)+Math.abs(U))*Math.abs(L)+(Math.abs($)+Math.abs(ie))*Math.abs(k)+(Math.abs(oe)+Math.abs(me))*Math.abs(R),ee=u*X;return ae>ee||-ae>ee?ae:d(y,_,T,S)}];function g(y){var _=m[y.length];return _||(_=m[y.length]=h(y.length)),_.apply(void 0,y)}function v(y,_,T,S,E,I,x){return function(C,w,B,L,k){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,w);case 3:return E(C,w,B);case 4:return I(C,w,B,L);case 5:return x(C,w,B,L,k)}for(var R=new Array(arguments.length),F=0;F<arguments.length;++F)R[F]=arguments[F];return y(R)}}function b(){for(;m.length<=o;)m.push(h(m.length));e.exports=v.apply(void 0,[g].concat(m));for(var y=0;y<=o;++y)e.exports[y]=m[y]}b()})(c$);var xje=c$.exports,Ije=Cje,kb=xje;function Cje(e,t){for(var n=t[0],r=t[1],i=e.length,o=1,a=i,s=0,u=i-1;s<a;u=s++){var c=e[s],l=e[u],f=c[1],h=l[1];if(h<f){if(h<r&&r<f){var p=kb(c,l,t);if(p===0)return 0;o^=0<p|0}else if(r===f){var d=e[(s+1)%i],m=d[1];if(f<m){var p=kb(c,l,t);if(p===0)return 0;o^=0<p|0}}}else if(f<h){if(f<r&&r<h){var p=kb(c,l,t);if(p===0)return 0;o^=p<0|0}else if(r===f){var d=e[(s+1)%i],m=d[1];if(m<f){var p=kb(c,l,t);if(p===0)return 0;o^=p<0|0}}}else if(r===f){var g=Math.min(c[0],l[0]),v=Math.max(c[0],l[0]);if(s===0){for(;u>0;){var b=(u+i-1)%i,y=e[b];if(y[1]!==r)break;var _=y[0];g=Math.min(g,_),v=Math.max(v,_),u=b}if(u===0)return g<=n&&n<=v?0:1;a=u+1}for(var T=e[(u+i-1)%i][1];s+1<a;){var y=e[s+1];if(y[1]!==r)break;var _=y[0];g=Math.min(g,_),v=Math.max(v,_),s+=1}if(g<=n&&n<=v)return 0;var S=e[(s+1)%i][1];n<g&&T<r!=S<r&&(o^=1)}}return 2*o-1}const f$=Gi(Ije);function Pje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dje(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nje(r.key),r)}}function Rje(e,t,n){return t&&Dje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nje(e){var t=Mje(e,"string");return typeof t=="symbol"?t:String(t)}function Mje(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function da(){return typeof Reflect<"u"&&Reflect.get?da=Reflect.get.bind():da=function(e,t,n){var r=Lje(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},da.apply(this,arguments)}function Lje(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=go(e),e!==null););return e}function jje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&II(e,t)}function II(e,t){return II=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},II(e,t)}function Bje(e){var t=Hje();return function(){var n=go(e),r;if(t){var i=go(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Fje(this,r)}}function Fje(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gje(e)}function Gje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hje(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function go(e){return go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},go(e)}const fG=16,pG=50,mO=5e3,dG=5,Uje=14,Au={fontSize:`${Uje}px`,fontFamily:"Arial",stroke:"white",strokeThickness:2,fontWeight:400,dropShadow:!0,dropShadowColor:"white",dropShadowDistance:0,dropShadowBlur:2};let p$=function(e){jje(n,e);var t=Bje(n);function n(r,i){var o;return Pje(this,n),o=t.call(this,r,i),o.valueScaleTransform=Tn,o}return Rje(n,[{key:"initialize",value:function(){this.initialized||([this.prevK,this.vertK,this.vertY]=[1,1,0],this.drawnRects||(this.drawnRects={}),this.colorScale||(this.options.colorRange?this.colorScale=$l(this.options.colorRange):this.colorScale=hp),this.initialized=!0)}},{key:"initTile",value:function(r){r.texts={},r.rectGraphics=new Ue.PIXI.Graphics,r.textGraphics=new Ue.PIXI.Graphics,r.graphics.addChild(r.rectGraphics),r.graphics.addChild(r.textGraphics);let i=[],o=[];if(r.tileData&&r.tileData.length){if(r.tileData.sort((a,s)=>s.importance-a.importance),!this.options||!this.options.valueColumn){const a=r.tileData.map(s=>{const u=+s.chrOffset;return{from:+s.fields[1]+u,to:+s.fields[2]+u,value:s,text:s.fields[3],strand:s.fields.length>=6&&s.fields[5]==="-"?"-":"+"}});i=R_(a.filter(s=>s.strand==="+")),o=R_(a.filter(s=>s.strand==="-"))}else i=[r.tileData.map(a=>({value:a}))];r.plusStrandRows=i,r.minusStrandRows=o,this.options.showTexts&&r.tileData.forEach((a,s)=>{const u=a.fields;if(a.importance||(a.importance=Math.random()),r.textWidths={},r.textHeights={},s>=(+this.options.maxTexts||pG))return;const c=new Ue.PIXI.Text(u[3],{...Au,fontSize:+this.options.fontSize||Au.fontSize});this.flipText&&(c.scale.x=-1),c.anchor.x=.5,c.anchor.y=.5,r.texts[a.uid]=c,r.textGraphics.addChild(c)})}r.initialized=!0}},{key:"removeTileRects",value:function(r){const i=+r.tileId.split(".")[0];r.rectGraphics.clear(),r.rendered=!1,r.tileData&&r.tileData.length&&r.tileData.forEach((o,a)=>{this.drawnRects[i]&&this.drawnRects[i][o.uid]&&this.drawnRects[i][o.uid][2]===r.tileId&&delete this.drawnRects[i][o.uid]})}},{key:"destroyTile",value:function(r){this.removeTileRects(r),r.graphics.removeChild(r.textGraphics),r.graphics.removeChild(r.rectGraphics)}},{key:"removeTiles",value:function(r){da(go(n.prototype),"removeTiles",this).call(this,r)}},{key:"drawTile",value:function(r){this.options&&this.options.valueColumn&&this.valueScale&&this.drawAxis(this.valueScale)}},{key:"rerender",value:function(r,i){da(go(n.prototype),"rerender",this).call(this,r,i),this.valueScale=null,this.drawnRects={},this.options.colorRange?this.colorScale=$l(this.options.colorRange):this.colorScale=hp;for(const o of this.visibleAndFetchedTiles())this.destroyTile(o),this.initTile(o),this.renderTile(o)}},{key:"updateTile",value:function(r){this.areAllVisibleTilesLoaded()&&this.renderTile(r)}},{key:"allVisibleRects",value:function(){const r={};Object.values(this.fetchedTiles).forEach(s=>{if(s.plusStrandRows)for(const u of s.plusStrandRows[0])r[u.value.uid]||(r[u.value.uid]=u)});const i=Object.values(r).sort((s,u)=>s.from-u.from);let o=0,a=0;for(let s=0;s<i.length;s++)if(i[s].staggeredStartPosition!==void 0){o=s,a=i[s].staggeredStartPosition;break}for(let s=o;s<i.length;s++)i[s].staggeredStartPosition=(a+s-o)%2;for(let s=o;s>=0&&i.length;s--)i[s].staggeredStartPosition=(a+o-s)%2;return r}},{key:"drawSegmentStyle",value:function(r,i,o,a,s,u){const c=a+s/2,l=[i,a,i+2*.1,a,i+2*.1,c-.1,o-2*.1,c-.1,o-2*.1,a,o,a,o,a+s,o-2*.1,a+s,o-2*.1,c+.1,i+2*.1,c+.1,i+2*.1,a+s,i,a+s];return r.rectGraphics.drawPolygon(l),l}},{key:"drawPoly",value:function(r,i,o,a,s,u){let c=null;return this.options.annotationStyle==="segment"?this.drawSegmentStyle(r,i,o,a,s,u):((u==="+"||u==="-")&&o-i<fG/2?(c=[i,a,i+s/2,a+s/2,i,a+s],u==="+"||(c=[o,a,o-s/2,a+s/2,o,a+s]),r.rectGraphics.drawPolygon(c)):(u==="+"?c=[i,a,o-s/2,a,o,a+s/2,o-s/2,a+s,i,a+s]:u==="-"?c=[i+s/2,a,o,a,o,a+s,i+s/2,a+s,i,a+s/2]:c=[i,a,o,a,o,a+s,i,a+s],r.rectGraphics.drawPolygon(c)),c)}},{key:"setValueScale",value:function(){if(this.valueScale=null,this.options&&this.options.valueColumn){const r=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.valueColumn),i=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.valueColumn);this.options.valueColumn&&([this.valueScale]=this.makeValueScale(r,this.calculateMedianVisibleValue(+this.options.valueColumn),i))}}},{key:"setColorValueScale",value:function(){if(this.colorValueScale=null,this.options&&this.options.colorEncoding&&this.options.colorEncoding!=="itemRgb"){const r=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.colorEncoding),i=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.colorEncoding);this.colorValueScale=kt().domain([r,i]).range([0,255])}}},{key:"renderRows",value:function(r,i,o,a,s,u){const c=+r.tileId.split(".")[0];this.initialize();const l=Ry().domain(yi(o)).range([a,s]).paddingInner(.3);this.allVisibleRects();let f=null;this.options.staggered&&(f=this.allVisibleRects());for(let h=0;h<i.length;h++)for(let p=0;p<i[h].length;p++){const d=i[h][p].value,m=d.fields,g=+d.chrOffset,v=+m[1]+g,b=+m[2]+g,y=(v+b)/2;let _=l(h)+l.step()/2,T=this.options.annotationHeight||fG;if(T==="scaled"&&(T=l.bandwidth(),this.options.maxAnnotationHeight&&(T=Math.min(T,+this.options.maxAnnotationHeight))),this.options&&this.options.colorEncoding==="itemRgb"&&d.fields[8]?d.fields[8].split(",").length===3&&(u=`rgb(${d.fields[8]})`):this.colorValueScale&&(u=`rgba(${MR(this.colorValueScale,this.colorScale,0,-Number.MIN_VALUE)(+m[+this.options.colorEncoding-1]).join(",")})`),this.valueScale){const L=+m[+this.options.valueColumn-1];_=this.valueScale(L)}const S=this.options.fillOpacity||.3;r.rectGraphics.lineStyle(1,ct(u),S),r.rectGraphics.beginFill(ct(u),S);let E=_-T/2;const I=this._xScale(v),x=this._xScale(b);this.options.staggered&&(f[d.uid].staggeredStartPosition?E-=dG/2:E+=dG/2);let C=!0;if(!(c in this.drawnRects&&d.uid in this.drawnRects[c])){C=!1,this.drawnRects[c]||(this.drawnRects[c]={});const L=this.drawPoly(r,I,x,E*this.prevK,T*this.prevK,m[5]);this.drawnRects[c][d.uid]=[L,{start:v,end:b,value:d,tile:r,fill:u},r.tileId]}if(!this.options.showTexts)continue;if(!r.texts)return;if(p>=(+this.options.maxTexts||pG)||!r.texts[d.uid])continue;const w=r.texts[d.uid];w.position.x=this._xScale(y),w.position.y=E+T/2,w.nominalY=E+T/2,C&&(w.alreadyDrawn=!0);const B=this.options.fontColor!==void 0?ct(this.options.fontColor):u;if(w.style={...Au,fill:B,fontSize:+this.options.fontSize||Au.fontSize},!(m[3]in r.textWidths)){w.updateTransform();const L=w.getBounds().width,k=w.getBounds().height,R=5;r.textWidths[m[3]]=L,r.textHeights[m[3]]=k-R}}}},{key:"renderTile",value:function(r){let i=r.plusStrandRows?r.plusStrandRows.length:1,o=r.minusStrandRows?r.minusStrandRows.length:1;for(const a of this.visibleAndFetchedTiles()){if(!a.initialized)return;!a.plusStrandRows&&!a.minusStrandRows||(i=Math.max(a.plusStrandRows.length,i),o=Math.max(a.minusStrandRows.length,o))}if(r.rendered&&this.removeTileRects(r),r.drawnAtScale=this._xScale.copy(),r.rendered=!0,this.setValueScale(),this.setColorValueScale(),r.tileData&&r.tileData.length){const a=this.options.plusStrandColor||this.options.fillColor||"blue",s=this.options.minusStrandColor||this.options.fillColor||"purple",u=0;let c=0;this.options.separatePlusMinusStrands?c=i*this.dimensions[1]/(i+o)-u/2:c=this.dimensions[1],this.renderRows(r,r.plusStrandRows,i,0,c,a),this.renderRows(r,r.minusStrandRows,o,this.options.separatePlusMinusStrands?c+u/2:0,this.dimensions[1],s)}tc.stretchRects(this,[a=>a.rectGraphics])}},{key:"calculateZoomLevel",value:function(){const r=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let i=Math.min(r,this.maxZoom);return i=Math.max(i,0),i}},{key:"minVisibleValueInTiles",value:function(r){let i=this.visibleAndFetchedIds();i.length===0&&(i=Object.keys(this.fetchedTiles));let o=Math.min.apply(null,i.map(a=>this.fetchedTiles[a]).filter(a=>a.tileData&&a.tileData.length).map(a=>Math.min.apply(null,a.tileData.sort((s,u)=>u.importance-s.importance).slice(0,mO).map(s=>+s.fields[r-1]).filter(s=>!Number.isNaN(s)))));return o===Number.MAX_SAFE_INTEGER&&(o=null),o}},{key:"maxVisibleValueInTiles",value:function(r){let i=this.visibleAndFetchedIds();i.length===0&&(i=Object.keys(this.fetchedTiles));let o=Math.max.apply(null,i.map(a=>this.fetchedTiles[a]).filter(a=>a.tileData&&a.tileData.length).map(a=>Math.max.apply(null,a.tileData.sort((s,u)=>u.importance-s.importance).slice(0,mO).map(s=>+s.fields[r-1]).filter(s=>!Number.isNaN(s)))));return o===Number.MIN_SAFE_INTEGER&&(o=null),o}},{key:"calculateMedianVisibleValue",value:function(r){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let i=this.visibleAndFetchedIds();i.length===0&&(i=Object.keys(this.fetchedTiles));const o=[].concat(...i.map(a=>this.fetchedTiles[a]).filter(a=>a.tileData&&a.tileData.length).map(a=>a.tileData.sort((s,u)=>u.importance-s.importance).slice(0,mO).map(s=>+s.fields[r-1]))).filter(a=>a>0);this.medianVisibleValue=SD(o)}},{key:"draw",value:function(){da(go(n.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[];for(const r in this.fetchedTiles){const i=this.fetchedTiles[r];if(i.rectGraphics.scale.y=this.vertK,i.rectGraphics.position.y=this.vertY,!i.drawnAtScale)return;tc.stretchRects(this,[a=>a.rectGraphics]);const o=this.parentInFetched(i);i.initialized&&i.tileData&&i.tileData.length&&i.tileData.forEach(a=>{if(!i.texts)return;const s=a.fields,u=s[3],c=i.texts[a.uid];if(!c)return;const l=+a.chrOffset,f=+s[1]+l,h=+s[2]+l,p=(f+h)/2;if(c.position.x=this._xScale(p),c.position.y=c.nominalY*(this.vertK*this.prevK)+this.vertY,!o&&!c.alreadyDrawn){c.visible=!0;const d=3;this.allBoxes.push([c.position.x-d,c.position.y-i.textHeights[s[3]]/2,c.position.x+i.textWidths[s[3]]+d,c.position.y+i.textHeights[s[3]]/2]),this.allTexts.push({importance:a.importance,text:c,caption:u,strand:s[5]})}else c.visible=!1})}this.hideOverlaps(this.allBoxes,this.allTexts)}},{key:"hideOverlaps",value:function(r,i){fv(r,(o,a)=>{i[o].importance>i[a].importance?i[o].text.visible&&(i[a].text.visible=!1):i[a].text.visible&&(i[o].text.visible=!1)})}},{key:"setPosition",value:function(r){da(go(n.prototype),"setPosition",this).call(this,r),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(r){da(go(n.prototype),"setDimensions",this).call(this,r)}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){let r=null,i=null;da(go(n.prototype),"exportSVG",this)?[i,r]=da(go(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);const a=document.createElement("g"),s=document.createElement("g");o.appendChild(a),o.appendChild(s);for(const u of this.visibleAndFetchedTiles())u.tileData.length&&u.tileData.forEach(c=>{const l=+u.tileId.split(".")[0],f=document.createElement("g");if(f.setAttribute("transform",`translate(${u.rectGraphics.position.x},${u.rectGraphics.position.y})scale(${u.rectGraphics.scale.x},${u.rectGraphics.scale.y})`),a.appendChild(f),this.drawnRects[l]&&c.uid in this.drawnRects[l]){const h=this.drawnRects[l][c.uid][0],p=document.createElement("path");let d=`M ${h[0]} ${h[1]}`;for(let v=2;v<h.length;v+=2)d+=` L ${h[v]} ${h[v+1]}`;const m=this.drawnRects[l][c.uid][1].fill,g=this.options.fontColor!==void 0?ct(this.options.fontColor):m;if(p.setAttribute("d",d),p.setAttribute("fill",m),p.setAttribute("opacity",.3),p.style.stroke=m,p.style.strokeWidth="1px",f.appendChild(p),u.texts[c.uid]){const v=u.texts[c.uid];if(!v.visible)return;const b=document.createElement("g"),y=document.createElement("text");s.appendChild(b),b.appendChild(y),b.setAttribute("transform",`translate(${v.x},${v.y})scale(${v.scale.x},1)`),y.setAttribute("text-anchor","middle"),y.setAttribute("font-family",Au.fontFamily),y.setAttribute("font-size",+this.options.fontSize||Au.fontSize),y.setAttribute("font-weight","bold"),y.setAttribute("dy","5px"),y.setAttribute("fill",g),y.setAttribute("stroke",Au.stroke),y.setAttribute("stroke-width","0.4"),y.setAttribute("text-shadow","0px 0px 2px grey"),y.innerHTML=v.text}}});return[i,i]}},{key:"movedY",value:function(r){Object.values(this.fetchedTiles).forEach(i=>{const o=this.valueScaleTransform,{y:a,k:s}=o,u=this.dimensions[1];a+r/s>-(s-1)*u&&a+r/s<0&&(this.valueScaleTransform=o.translate(0,r/s)),i.rectGraphics.position.y=this.valueScaleTransform.y,this.vertY=this.valueScaleTransform.y}),this.animate()}},{key:"zoomedY",value:function(r,i){const o=tc.zoomedY(r,i,this.valueScaleTransform,this.dimensions[1]);this.valueScaleTransform=o;let a=o.k;const s=o.y;let u=!1;a/=this.prevK,(a>1.5||a<1/1.5)&&(this.prevK*=a,a=1,u=!0),this.vertK=a,this.vertY=s,Object.values(this.fetchedTiles).forEach(c=>{u&&this.renderTile(c),c.rectGraphics.scale.y=a,c.rectGraphics.position.y=s}),this.draw(),this.animate()}},{key:"getMouseOverHtml",value:function(r,i){if(!this.tilesetInfo)return"";const o=this.calculateZoomLevel(),a=[r,i];if(this.drawnRects[o]){const s=Object.values(this.drawnRects[o]);for(let u=0;u<s.length;u++){const c=s[u][0].slice(0),l=s[u][1].tile.rectGraphics.scale.x,f=s[u][1].tile.rectGraphics.position.x,h=s[u][1].tile.rectGraphics.scale.y,p=s[u][1].tile.rectGraphics.position.y,d=[];for(;c.length;){const[m,g]=c.splice(0,2);d.push([m*l+f,g*h+p])}if(f$(d,a)===-1)return s[u][1].value.fields.join(" ")}}return""}}]),n}(_d);function zje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vje(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xje(r.key),r)}}function Yje(e,t,n){return t&&Vje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xje(e){var t=Wje(e,"string");return typeof t=="symbol"?t:String(t)}function Wje(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ol(){return typeof Reflect<"u"&&Reflect.get?Ol=Reflect.get.bind():Ol=function(e,t,n){var r=qje(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ol.apply(this,arguments)}function qje(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Sa(e),e!==null););return e}function $je(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CI(e,t)}function CI(e,t){return CI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},CI(e,t)}function Kje(e){var t=Jje();return function(){var n=Sa(e),r;if(t){var i=Sa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Qje(this,r)}}function Qje(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zje(e)}function Zje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jje(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sa(e){return Sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sa(e)}const eBe=(e,t,n,r,i)=>{i.drawRect(e,t,n,r)},tBe=(e,t,n,r,i,{fill:o=0,fillOpacity:a=0,stroke:s=0,strokeWidth:u=0,strokeOpacity:c=0}={})=>{const l=document.createElement("rect");l.setAttribute("x",e),l.setAttribute("y",t),l.setAttribute("width",n),l.setAttribute("height",r),l.setAttribute("fill",`#${ux(o)}`),l.setAttribute("fill-opacity",a),l.setAttribute("stroke",`#${ux(s)}`),l.setAttribute("stroke-opacity",c),l.setAttribute("stroke-width",u),i.appendChild(l)},pa=(e,t,n,r,i,o)=>{i instanceof HTMLElement?tBe(e,t,n,r,i,o):eBe(e,t,n,r,i)},mG=(e,t,n,r,i,o,a,s,{isVertical:u=!1,svg:c=null}={})=>{let l=t,f=n,h=r,p=i;const d=s.width*2>r?r/2:s.width,m=s.width*2>i?i/2:s.width,g=c||e,v={fill:0,fillOpacity:0,stroke:0,strokeOpacity:0,strokeWidth:1};if(s.positions&&s.positions.length?(e.lineStyle(1,0,0),e.beginFill(s.color,s.opacity),v.fill=s.color,v.fillOpacity=s.opacity,v.stroke=0,v.strokeOpacity=0,v.strokeWidth=1,s.positions.forEach(b=>{b==="top"&&!u||b==="left"&&u?pa(t-d,n-m,r+d*2,m,g,v):b==="bottom"&&!u||b==="right"&&u?pa(t-d,n+i,r+d*2,m,g,v):b==="left"&&!u||b==="top"&&u?pa(t-d,n-m,d,i+m*2,g,v):(b==="right"&&!u||b==="bottom"&&u)&&pa(t+r,n-m,d,i+m*2,g,v)})):s.width>0&&s.opacity>0&&(e.lineStyle(s.width,s.color,s.opacity),e.beginFill(0,0),v.fill=0,v.fillOpacity=0,v.stroke=s.color,v.strokeOpacity=s.opacity,v.strokeWidth=s.width,pa(t-d,n-m,r+d*2,i+m*2,g,v)),a.positions&&a.positions.length){e.lineStyle(1,0,0),e.beginFill(a.color,a.opacity);const b=a.width*2>r?r/2:a.width,y=a.width*2>i?i/2:a.width;v.fill=a.color,v.fillOpacity=a.opacity,v.stroke=0,v.strokeOpacity=0,v.strokeWidth=1,a.positions.forEach(_=>{_==="top"&&!u||_==="left"&&u?(pa(t,n,r,y,g,v),f+=y,p-=y):_==="bottom"&&!u||_==="right"&&u?(pa(t,n+i-y,r,y,g,v),p-=y):_==="left"&&!u||_==="top"&&u?(pa(t,n,b,i,g,v),l+=b,h-=b):(_==="right"&&!u||_==="bottom"&&u)&&(pa(t+r-b,n,b,i,g,v),h-=b)})}else e.lineStyle(a.width,a.color,a.opacity),v.stroke=a.color,v.strokeOpacity=a.opacity,v.strokeWidth=a.width;e.beginFill(o.color,o.opacity),v.fill=o.color,v.fillOpacity=o.opacity,pa(l,f,h,p,g,v)};let d$=function(e){$je(n,e);var t=Kje(n);function n(r,i){var o;return zje(this,n),o=t.call(this,r,i),o.options=i||{},o.drawnRects={},o}return Yje(n,[{key:"drawHorizontalOverlay",value:function(r,i,o,a=0,s,u,c,l){if(!o||o.length<2)return;let f=this.position[0]+i.left+this._xScale(o[0]);const h=this.position[1]+i.top,p=i.height;let d=this._xScale(o[1])-this._xScale(o[0]);d<a&&(f-=(a-d)/2,d=a),mG(r,f,h,d,p,s,u,c,l)}},{key:"drawVerticalOverlay",value:function(r,i,o,a=0,s,u,c,l={}){if(!o||o.length<2)return;const f=this.position[0]+i.left;let h=this.position[1]+i.top+this._yScale(o.length>=4?o[2]:o[0]);const p=this.position[1]+i.top,d=this.position[1]+i.top+i.height;if(h>d)return;h<p&&(h=p);const m=i.width;let g=this._yScale(o.length>=4?o[3]:o[1])-h+i.top+this.position[1];g<0||(h+g>d&&(g+=d-(h+g)),g<a&&(h-=(a-g)/2,g=a),l.isVertical=!0,mG(r,f,h,m,g,s,u,c,l))}},{key:"draw",value:function(r){Ol(Sa(n.prototype),"draw",this).call(this);const i=this.pMain,o={color:ct(this.options.fill||this.options.fillColor||"blue"),opacity:Number.isNaN(+this.options.fillOpacity)?.3:+this.options.fillOpacity},a={color:ct(this.options.stroke||"blue"),opacity:+this.options.strokeOpacity||1,width:+this.options.strokeWidth||0,positions:!this.options.strokePos||Array.isArray(this.options.strokePos)?this.options.strokePos:[this.options.strokePos]},s={color:ct(this.options.outline||"white"),opacity:+this.options.outlineOpacity||1,width:+this.options.outlineWidth||0,positions:!this.options.outlinePos||Array.isArray(this.options.outlinePos)?this.options.outlinePos:[this.options.outlinePos]};(!r||!r.svg)&&i.clear(),i.lineStyle(a.width,a,+!a.positions*a.opacity),i.beginFill(o.color,o.opacity);const u=Math.max(0,+this.options.minWidth||0),c=Math.max(0,+this.options.minHeight||0);Array.isArray(this.options.extent)&&this.options.orientationsAndPositions.forEach(l=>{(l.orientation==="1d-horizontal"||l.orientation==="2d")&&this.options.extent.forEach(f=>this.drawHorizontalOverlay(i,l.position,f,u,o,a,s,r)),(l.orientation==="1d-vertical"||l.orientation==="2d")&&this.options.extent.forEach(f=>this.drawVerticalOverlay(i,l.position,f,c,o,a,s,r))})}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}},{key:"setPosition",value:function(r){Ol(Sa(n.prototype),"setPosition",this).call(this,r),this.draw()}},{key:"setDimensions",value:function(r){Ol(Sa(n.prototype),"setDimensions",this).call(this,r),this.draw()}},{key:"exportSVG",value:function(){let r=null,i=null;Ol(Sa(n.prototype),"exportSVG",this)?[i,r]=Ol(Sa(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");return r.appendChild(o),this.draw({svg:o}),[i,r]}}]),n}(Ai);function rBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nBe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oBe(r.key),r)}}function iBe(e,t,n){return t&&nBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oBe(e){var t=aBe(e,"string");return typeof t=="symbol"?t:String(t)}function aBe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function jo(){return typeof Reflect<"u"&&Reflect.get?jo=Reflect.get.bind():jo=function(e,t,n){var r=sBe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},jo.apply(this,arguments)}function sBe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=qi(e),e!==null););return e}function lBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PI(e,t)}function PI(e,t){return PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},PI(e,t)}function uBe(e){var t=fBe();return function(){var n=qi(e),r;if(t){var i=qi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cBe(this,r)}}function cBe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hBe(e)}function hBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qi(e){return qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qi(e)}let Ed=function(e){lBe(n,e);var t=uBe(n);function n(){return rBe(this,n),t.apply(this,arguments)}return iBe(n,[{key:"stopHover",value:function(){this.pMouseOver.clear(),this.animate()}},{key:"getMouseOverHtml",value:function(r){if(!this.tilesetInfo||!this.options.showTooltip||!this.valueScale)return"";const i=this.getDataAtPos(r);let o="";i&&(o=no(".3f")(i));const a=this.pMouseOver,s=0,u=this.valueScale(i);a.clear(),a.beginFill(s,.5),a.lineStyle(1,s,1);const c=4;return a.drawRect(r-c/2,u-c/2,c,c),this.animate(),`${o}`}},{key:"initTile",value:function(r){if(jo(qi(n.prototype),"initTile",this).call(this,r),!r.tileData||!r.tileData.dense){console.warn("emptyTile:",r);return}if(r.xValues=new Array(r.tileData.dense.length),r.yValues=new Array(r.tileData.dense.length),this.isValueScaleLocked()){const i=this.getLockGroupExtrema();i!==null&&(this.minValue(i[0]),this.maxValue(i[1]))}this.drawTile(r)}},{key:"rerender",value:function(r,i){jo(qi(n.prototype),"rerender",this).call(this,r,i),this.options=r,jo(qi(n.prototype),"draw",this).call(this),this.visibleAndFetchedTiles().forEach(o=>{this.renderTile(o)})}},{key:"renderTile",value:function(r){this.drawTile(r),this.drawAxis(this.valueScale)}},{key:"drawTile",value:function(r){if(jo(qi(n.prototype),"drawTile",this).call(this,r),!r.graphics||!r.tileData||!r.tileData.dense)return;const i=r.graphics,{tileX:o,tileWidth:a}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),s=r.tileData.dense;if(s.length===0)return;const[u,c]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(this.valueScale=u,i.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const l=ct(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue");!this.tilesetInfo.tile_size&&!this.tilesetInfo.bins_per_dimension&&console.warn("No tileset_info.tile_size or tileset_info.bins_per_dimension",this.tilesetInfo);const f=this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension,h=kt().domain([0,f]).range([o,o+a]),p=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;i.lineStyle(p,l,1),r.segments=[];let d=[];for(let m=0;m<s.length;m++){const g=this._xScale(h(m)),v=this.valueScale(s[m]+c);if(this.options.valueScaling==="log"&&s[m]===0||Number.isNaN(v)){d.length>1&&r.segments.push(d),d=[];continue}if(h(m)>this.tilesetInfo.max_pos[0])break;d.push([g,v])}d.length>1&&r.segments.push(d);for(const m of r.segments){const g=m[0],v=m.slice(1);i.moveTo(g[0],g[1]);for(const b of v)i.lineTo(b[0],b[1])}}},{key:"setPosition",value:function(r){jo(qi(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.pMouseOver.position.y=this.position[1],this.pMouseOver.position.x=this.position[0]}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.refreshTiles(),this.draw();const o=this.isValueScaleLocked();if(this.continuousScaling&&this.minValue()!==void 0&&this.maxValue()!==void 0){if(this.valueScaleMin===null&&this.valueScaleMax===null&&!o){const a=this.minVisibleValue(),s=this.maxVisibleValue(),u=1e-6;a!==null&&s!==null&&(Math.abs(this.minValue()-a)>u||Math.abs(this.maxValue()-s)>u)&&(this.minValue(a),this.maxValue(s),this.scheduleRerender())}o&&this.onValueScaleChanged()}}},{key:"superSVG",value:function(){return jo(qi(n.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){let r=null,i=null;jo(qi(n.prototype),"exportSVG",this)?[i,r]=jo(qi(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i),i.setAttribute("class","exported-line-track");const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);const a=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue";this.visibleAndFetchedTiles().forEach(u=>{const c=document.createElement("path");c.setAttribute("fill","transparent"),c.setAttribute("stroke",a);let l="";for(const f of u.segments){const h=f[0],p=f.slice(1);l+=`M${h[0]} ${h[1]}`;for(const d of p)l+=`L${d[0]} ${d[1]}`}c.setAttribute("d",l),o.appendChild(c)});const s=document.createElement("g");if(s.setAttribute("id","axis"),i.appendChild(s),s.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"){const u=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}else if(this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"){const u=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}return[i,r]}},{key:"tileToLocalId",value:function(r){return this.options.aggregationMode&&this.options.aggregationMode!=="mean"?`${r.join(".")}.${this.options.aggregationMode}`:`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return this.tileToLocalId(r)}}]),n}(_d);function pBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dBe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gBe(r.key),r)}}function mBe(e,t,n){return t&&dBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gBe(e){var t=yBe(e,"string");return typeof t=="symbol"?t:String(t)}function yBe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Xu(){return typeof Reflect<"u"&&Reflect.get?Xu=Reflect.get.bind():Xu=function(e,t,n){var r=vBe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xu.apply(this,arguments)}function vBe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ts(e),e!==null););return e}function bBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DI(e,t)}function DI(e,t){return DI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},DI(e,t)}function _Be(e){var t=SBe();return function(){var n=Ts(e),r;if(t){var i=Ts(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return TBe(this,r)}}function TBe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EBe(e)}function EBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ts(e){return Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ts(e)}let m$=function(e){bBe(n,e);var t=_Be(n);function n(){return pBe(this,n),t.apply(this,arguments)}return mBe(n,[{key:"initTile",value:function(r){r.barXValues=new Array(r.tileData.dense.length),r.barYValues=new Array(r.tileData.dense.length),r.barWidths=new Array(r.tileData.dense.length),r.barHeights=new Array(r.tileData.dense.length),Xu(Ts(n.prototype),"initTile",this).call(this,r)}},{key:"drawTile",value:function(r){if(!r.graphics||!r.tileData||!r.tileData.dense)return;const i=r.graphics,{tileX:o,tileWidth:a}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),s=r.tileData.dense;if(s.length===0)return;let u=0;if(this.valueScale=null,this.options.valueScaling==="log"){let d=this.medianVisibleValue;this.medianVisibleValue||(d=this.minValue()),this.valueScale=eu().domain([d,this.maxValue()+d]).range([this.dimensions[1],0]),u=d}else this.valueScale=kt().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(i.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const c=ct(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),l=kt().domain([0,this.tilesetInfo.tile_size]).range([o,o+a]);i.lineStyle(0,c,1);const h=this.options.pointSize?this.options.pointSize:3,p=ct(this.options.pointColor?this.options.pointColor:"red");i.beginFill(p,1),r.drawnAtScale=this._xScale.copy();for(let d=0;d<s.length;d++){const m=this._xScale(l(d)),g=this.valueScale(s[d]+u);if(r.barXValues[d]=m-h/2/this.pMain.scale.x,r.barYValues[d]=g-h/2/this.pMain.scale.y,r.barWidths[d]=h/this.pMain.scale.x,r.barHeights[d]=h/this.pMain.scale.y,l(d)>this.tilesetInfo.max_pos[0])break;i.drawRect(m-h/2/this.pMain.scale.x,g-h/2/this.pMain.scale.y,h/this.pMain.scale.x,h/this.pMain.scale.y)}}},{key:"draw",value:function(){Xu(Ts(n.prototype),"draw",this).call(this);for(const r of mr(this.fetchedTiles)){const i=(r.drawnAtScale.domain()[1]-r.drawnAtScale.domain()[0])/(this._xScale.domain()[1]-this._xScale.domain()[0]),o=this._xScale.domain().map(r.drawnAtScale)[0];r.graphics.scale.x=i,r.graphics.position.x=-o*i}}},{key:"zoomed",value:function(r,i,o,a,s){Xu(Ts(n.prototype),"zoomed",this).call(this,r,i)}},{key:"exportSVG",value:function(){let r=null,i=null;[i,r]=Xu(Ts(n.prototype),"superSVG",this).call(this),i.setAttribute("class","exported-line-track");const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);for(const s of this.visibleAndFetchedTiles())for(let u=0;u<s.barXValues.length;u++){const c=document.createElement("rect"),l=this.options.lineStrokeColor||"blue",f=this.options.pointColor||"red";c.setAttribute("fill",f),c.setAttribute("stroke",l),c.setAttribute("stroke-width",0),c.setAttribute("x",s.barXValues[u]),c.setAttribute("y",s.barYValues[u]),c.setAttribute("height",s.barHeights[u]),c.setAttribute("width",s.barWidths[u]),o.appendChild(c)}const a=document.createElement("g");if(a.setAttribute("id","axis"),i.appendChild(a),a.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"){const s=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);a.appendChild(s)}else if(this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"){const s=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);a.appendChild(s)}return[i,r]}}]),n}(Ed);function wBe(e){let t=0;const n=[];return e.forEach(r=>{t+=+r||0,n.push(t)}),Float64Array.from(n)}const ABe=(e,t)=>{const n=ny(e,t);return wBe(e.map(r=>(Array.isArray(r)&&t?r.length:1)/n))};function OBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kBe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IBe(r.key),r)}}function xBe(e,t,n){return t&&kBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IBe(e){var t=CBe(e,"string");return typeof t=="symbol"?t:String(t)}function CBe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function wg(){return typeof Reflect<"u"&&Reflect.get?wg=Reflect.get.bind():wg=function(e,t,n){var r=PBe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},wg.apply(this,arguments)}function PBe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Pc(e),e!==null););return e}function DBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RI(e,t)}function RI(e,t){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},RI(e,t)}function RBe(e){var t=LBe();return function(){var n=Pc(e),r;if(t){var i=Pc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return NBe(this,r)}}function NBe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MBe(e)}function MBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pc(e){return Pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pc(e)}let g$=function(e){DBe(n,e);var t=RBe(n);function n(r,i){var o;return OBe(this,n),o=t.call(this,r,i),o.pMain=o.pMobile,o.continuousScaling=!1,o.updateDataFetcher(i),o}return xBe(n,[{key:"updateDataFetcher",value:function(r){if(r&&r.selectRows&&r.selectRowsAggregationMethod==="server"){const{pubSub:i,dataFetcher:o}=this,a=o.dataConfig.options,s={aggGroups:r.selectRows,aggFunc:r.selectRowsAggregationMode};if(JSON.stringify(a)!==JSON.stringify(s)){const u={...o.dataConfig,options:s};this.dataFetcher=new o.constructor(u,i),this.dataFetcher.dataConfig.tilesetUid&&this.fetchNewTiles(Object.keys(this.fetchedTiles).map(c=>({tileId:c,remoteId:c})))}}}},{key:"rerender",value:function(r,i){this.updateDataFetcher(r),wg(Pc(n.prototype),"rerender",this).call(this,r,i),r.selectRows&&(this.selectRowsCumWeights=ABe(r.selectRows,r.selectRowsAggregationWithRelativeHeight))}},{key:"tileDataToCanvas",value:function(r){const i=document.createElement("canvas");this.options.selectRows&&this.tilesetInfo.shape?(i.width=this.tilesetInfo.shape[0],i.height=ny(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight)):this.tilesetInfo.shape?(i.width=this.tilesetInfo.shape[0],i.height=this.tilesetInfo.shape[1]):(i.width=this.tilesetInfo.tile_size,i.height=1);const o=i.getContext("2d");if(o.fillStyle="transparent",o.fillRect(0,0,i.width,i.height),r.length!==0&&r.length===4*i.width*i.height){const a=new ImageData(r,i.width,i.height);o.putImageData(a,0,0)}else console.warn("HorizontalMultivecTrack: pixData has an incorrect length.");return i}},{key:"setSpriteProperties",value:function(r,i,o){const{tileX:a,tileWidth:s}=this.getTilePosAndDimensions(i,o,this.tilesetInfo.tile_size),u=a+s;r.width=this._refXScale(u)-this._refXScale(a),r.height=this.dimensions[1],r.x=this._refXScale(a),r.y=0}},{key:"leftTrackZoomed",value:function(r,i,o,a,s){const u=this._xScale(0)-o*this._refXScale(0);this.pMobile.position.x=u+this.position[0],this.pMobile.position.y=this.position[1],this.pMobile.scale.x=o,this.pMobile.scale.y=1}},{key:"zoomed",value:function(r,i,o,a){wg(Pc(n.prototype),"zoomed",this).call(this,r,i),this.pMain.position.x=a,this.pMain.position.y=this.position[1],this.pMain.scale.x=o,this.pMain.scale.y=1,this.drawColorbar()}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const i=this.tilesetInfo.resolutions.map(o=>+o).sort((o,a)=>a-o);this.xTiles=et.calculateTilesFromResolution(i[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],null,this.tilesetInfo.tile_size)}else this.xTiles=et.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const r=this.xTiles.map(i=>[this.zoomLevel,i]);this.setVisibleTiles(r)}},{key:"calculateZoomLevel",value:function(){if(!this.tilesetInfo)return;const r=this.tilesetInfo.min_pos[0];let i=null;return this.tilesetInfo.resolutions?i=et.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,r):i=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),i}},{key:"tileToLocalId",value:function(r){return r.join(".")}},{key:"tileToRemoteId",value:function(r){return r.join(".")}},{key:"getTilePosAtPosition",value:function(r,i){if(!this.tilesetInfo)return;const o=this.calculateZoomLevel(),a=et.calculateTileWidth(this.tilesetInfo,o,this.tilesetInfo.tile_size),s=this._xScale.invert(r)/a;return[o,Math.floor(s)]}},{key:"getVisibleData",value:function(r,i){const o=this.calculateZoomLevel(),a=et.calculateTileWidth(this.tilesetInfo,o,this.tilesetInfo.tile_size),s=this._xScale.invert(r)/a;let u=this.tilesetInfo.shape?this.tilesetInfo.shape[1]:1;this.options.selectRows&&(u=ny(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight));let c=this.tilesetInfo.tile_size*(s-Math.floor(s));const l=i/this.dimensions[1],f=l*u;let h=Math.floor(f),p;this.options.selectRows&&(this.options.selectRowsAggregationWithRelativeHeight&&(h=this.selectRowsCumWeights.findIndex((v,b)=>l<=v&&(b===this.selectRowsCumWeights.length-1||this.selectRowsCumWeights[b+1]>=l))),p=this.options.selectRows[h]);const d=this.tileToLocalId([o,Math.floor(s)]),m=this.fetchedTiles[d];let g="";if(m){this.tilesetInfo.shape||(c=m.tileData.dense.length*(s-Math.floor(s)));let v=null;if(this.tilesetInfo.shape?Array.isArray(p)&&this.options.selectRowsAggregationMethod==="client"?v=p.map(b=>this.tilesetInfo.shape[0]*b+Math.floor(c)):p&&this.options.selectRowsAggregationMethod==="client"?v=this.tilesetInfo.shape[0]*p+Math.floor(c):v=this.tilesetInfo.shape[0]*h+Math.floor(c):v=m.tileData.dense.length*h+Math.floor(c),Array.isArray(v)){const b=jR(this.options.selectRowsAggregationMode),y=v.map(_=>m.tileData.dense[_]);g=no(".3f")(b(y)),g+="<br/>",g+=`${v.length}-item ${this.options.selectRowsAggregationMode}`}else g=no(".3f")(m.tileData.dense[v]),Array.isArray(p)&&(g+="<br/>",g+=`${p.length}-item ${this.options.selectRowsAggregationMode}`)}if(this.tilesetInfo.row_infos){g+="<br/>";let v="";this.options.selectRows&&!Array.isArray(p)?v=this.tilesetInfo.row_infos[p]:h>=0&&h<this.tilesetInfo.row_infos.length&&(v=this.tilesetInfo.row_infos[h]),typeof v=="object"?g+=Object.values(v).join("	"):g+=v}return`${g}`}},{key:"getMouseOverHtml",value:function(r,i){if(!this.tilesetInfo)return"";const o=this.getTilePosAtPosition(r,i);let a="";if(this.options&&this.options.heatmapValueScaling&&this.options.heatmapValueScaling==="categorical"&&this.options.colorRange){const s=this.getVisibleData(r,i).split("<br/>"),u=this.options.colorRange[parseInt(s[0],10)-1],c=s[1];if(Number.isNaN(u)||u==="NaN"||typeof u>"u"||u==="undefined")return"";a=`<svg width="10" height="10" style="position:relative;bottom:1px"><rect width="10" height="10" rx="2" ry="2"
                 style="fill:${u};stroke:black;stroke-width:2;"></svg> ${c}`}else a+=`Data value: ${this.getVisibleData(r,i)}</br>`,a+=`Zoom level: ${o[0]} tile position: ${o[1]}`;return a}}]),n}(hv);function jBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BBe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GBe(r.key),r)}}function FBe(e,t,n){return t&&BBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function GBe(e){var t=HBe(e,"string");return typeof t=="symbol"?t:String(t)}function HBe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function cs(){return typeof Reflect<"u"&&Reflect.get?cs=Reflect.get.bind():cs=function(e,t,n){var r=UBe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},cs.apply(this,arguments)}function UBe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Go(e),e!==null););return e}function zBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NI(e,t)}function NI(e,t){return NI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},NI(e,t)}function VBe(e){var t=WBe();return function(){var n=Go(e),r;if(t){var i=Go(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return YBe(this,r)}}function YBe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XBe(e)}function XBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WBe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Go(e){return Go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Go(e)}const qBe=ct("#FFFFFF");let s2=function(e){zBe(n,e);var t=VBe(n);function n(...r){var i;return jBe(this,n),i=t.call(this,...r),i.zeroLine=new Ue.PIXI.Graphics,i.pMain.addChild(i.zeroLine),i.valueScaleTransform=Tn,i.options&&i.options.colorRange&&(i.options.colorRangeGradient?i.setColorGradient(i.options.colorRange):i.setColorScale(i.options.colorRange)),i.initialized=!0,i}return FBe(n,[{key:"setColorScale",value:function(r){r&&(this.colorScale=$l(r),this.colorScale=this.colorScale.map(i=>i.map(o=>o/255)))}},{key:"setColorGradient",value:function(r){if(!r)return;const i=r.length-1;this.colorGradientColors=this.options.align==="bottom"?r.slice().reverse().map((o,a)=>({from:a/i,color:o})):r.map((o,a)=>({from:a/i,color:o}))}},{key:"initTile",value:function(r){this.initialized&&cs(Go(n.prototype),"initTile",this).call(this,r)}},{key:"updateTile",value:function(r){(!r.valueScale||!this.scale||this.scale.minValue!==r.scale.minValue||this.scale.maxValue!==r.scale.maxValue)&&this.renderTile(r)}},{key:"renderTile",value:function(r){this.initialized&&cs(Go(n.prototype),"renderTile",this).call(this,r)}},{key:"drawTile",value:function(r){if(!r.graphics||!r.tileData||!r.tileData.dense)return;const{graphics:i}=r;r.svgData=void 0;const{tileX:o,tileWidth:a}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),s=r.tileData.dense;if(s.length===0)return;const[u,c]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue(),0);u.clamp(!0),this.valueScale=u;const l=u.copy();if(l.range([254,0]).clamp(!0),i.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const f=ct(this.options.lineStrokeColor||"blue"),h=kt().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([o,o+a]);i.lineStyle(0,f,1);const d=this.options.barFillColor||"grey",m=ct(d),g="barOpacity"in this.options?this.options.barOpacity:1;i.beginFill(m,g),r.drawnAtScale=this._xScale.copy();const v=this.options.align==="top";let b,y,_,T,S,E;if(this.colorGradientColors){S=new Ue.PIXI.Graphics,S.beginFill(qBe,1);const I=R9(this.colorGradientColors,1,this.dimensions[1],0,0,0,this.dimensions[1]);E=new Ue.PIXI.Sprite(Ue.PIXI.Texture.fromCanvas(I,Ue.PIXI.SCALE_MODES.NEAREST)),E.x=this._xScale(o),E.width=this._xScale(o+a)-E.x}for(let I=0;I<s.length;I++)if(b=this._xScale(h(I)),_=this.valueScale(s[I]+c),y=this._xScale(h(I+1))-b,T=this.dimensions[1]-_,v&&(_=0),!(Number.isNaN(T)||T<0||_<0)){if(this.addSVGInfo(r,b,_,y,T,d),h(I)>this.tilesetInfo.max_pos[0])break;if(this.colorScale&&!this.options.colorRangeGradient){const x=Math.round(l(s[I]+c)),C=this.colorScale[x],w=Ue.PIXI.utils.rgb2hex(C);i.beginFill(w,g)}(S||i).drawRect(b,_,y,T)}this.colorGradientColors&&(E.mask=S,i.removeChildren(),i.addChild(E,S))}},{key:"rerender",value:function(r,i){r&&r.colorRange&&(r.colorRangeGradient?this.setColorGradient(r.colorRange):this.setColorScale(r.colorRange)),cs(Go(n.prototype),"rerender",this).call(this,r,i)}},{key:"drawZeroLine",value:function(){this.zeroLine.clear();const r=ct(this.options.barFillColor||"grey"),i=+this.options.barOpacity||1,o=this.options.zeroLineColor?ct(this.options.zeroLineColor):r,a=Number.isNaN(+this.options.zeroLineOpacity)?i:+this.options.zeroLineOpacity;this.zeroLine.beginFill(o,a),this.zeroLine.drawRect(0,this.dimensions[1]-1,this.dimensions[0],1)}},{key:"drawZeroLineSvg",value:function(r){const i=document.createElement("rect");i.setAttribute("id","zero-line"),i.setAttribute("x",0),i.setAttribute("y",this.dimensions[1]-1),i.setAttribute("height",1),i.setAttribute("width",this.dimensions[0]),i.setAttribute("fill",this.options.zeroLineColor||this.options.barFillColor),i.setAttribute("fill-opacity",this.options.zeroLineOpacity||this.options.barOpacity),r.appendChild(i)}},{key:"getXScaleAndOffset",value:function(r){const i=r.domain(),o=this._xScale.domain(),a=(i[1]-i[0])/(o[1]-o[0]),s=this._xScale.domain().map(r)[0];return[a,-s*a]}},{key:"draw",value:function(){this.initialized&&(cs(Go(n.prototype),"draw",this).call(this),this.options.zeroLineVisible?this.drawZeroLine():this.zeroLine.clear(),Object.values(this.fetchedTiles).forEach(r=>{const[i,o]=this.getXScaleAndOffset(r.drawnAtScale);r.graphics.scale.x=i,r.graphics.position.x=o}))}},{key:"zoomed",value:function(r,i){cs(Go(n.prototype),"zoomed",this).call(this,r,i)}},{key:"movedY",value:function(r){}},{key:"zoomedY",value:function(r,i){}},{key:"addSVGInfo",value:function(r,i,o,a,s,u){r.svgData?(r.svgData.barXValues.push(i),r.svgData.barYValues.push(o),r.svgData.barWidths.push(a),r.svgData.barHeights.push(s),r.svgData.barColors.push(u)):r.svgData={barXValues:[i],barYValues:[o],barWidths:[a],barHeights:[s],barColors:[u]}}},{key:"exportSVG",value:function(){let r=null,i=null;[i,r]=cs(Go(n.prototype),"superSVG",this).call(this),i.setAttribute("class","exported-line-track");const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.options.zeroLine&&this.drawZeroLineSvg(o),this.visibleAndFetchedTiles().filter(s=>s.svgData&&s.svgData.barXValues).forEach(s=>{const u=s.svgData;for(let c=0;c<u.barXValues.length;c++){const l=document.createElement("rect");l.setAttribute("fill",u.barColors[c]),l.setAttribute("stroke",u.barColors[c]),l.setAttribute("x",u.barXValues[c]),l.setAttribute("y",u.barYValues[c]),l.setAttribute("height",u.barHeights[c]),l.setAttribute("width",u.barWidths[c]),s.barBorders&&(l.setAttribute("stroke-width","0.1"),l.setAttribute("stroke","black")),o.appendChild(l)}});const a=document.createElement("g");if(a.setAttribute("id","axis"),i.appendChild(a),a.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"){const s=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);a.appendChild(s)}else if(this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"){const s=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);a.appendChild(s)}return[i,r]}}]),n}(Ed);function $Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KBe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZBe(r.key),r)}}function QBe(e,t,n){return t&&KBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZBe(e){var t=JBe(e,"string");return typeof t=="symbol"?t:String(t)}function JBe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function e3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MI(e,t)}function MI(e,t){return MI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},MI(e,t)}function t3e(e){var t=i3e();return function(){var n=uT(e),r;if(t){var i=uT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return r3e(this,r)}}function r3e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n3e(e)}function n3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uT(e){return uT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uT(e)}let y$=function(e){e3e(n,e);var t=t3e(n);function n(){return $Be(this,n),t.apply(this,arguments)}return QBe(n,[{key:"drawTile",value:function(r){this.renderTile(r)}},{key:"renderTile",value:function(r){if(!r.graphics)return;const i=r.graphics,{tileX:o,tileWidth:a}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension),s=r.tileData.dense;if(s.length===0)return;let u=0;if(this.valueScale=null,this.options.valueScaling==="log"){let b=this.medianVisibleValue;this.medianVisibleValue||(b=this.minValue()),this.valueScale=eu().domain([b,this.maxValue()+b]).range([this.dimensions[1],0]),u=b}else this.valueScale=kt().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(i.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const c=ct(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),l=kt().domain([0,this.tilesetInfo.tile_size]).range([o,o+a]);i.lineStyle(0,c,1);const h=this.options.barFillColorTop?this.options.barFillColorTop:"green",p=this.options.barFillColorBottom?this.options.barFillColorBottom:"red",d=ct(h),m=ct(p),g="barOpacity"in this.options?this.options.barOpacity:1;r.drawnAtScale=this._xScale.copy();let v=0;this.options.valueScaling==="log"?v=this.valueScale(1):v=this.valueScale(0),delete r.svgData;for(let b=0;b<s.length;b++){const y=this._xScale(l(b)),_=this.valueScale(s[b]+u),T=this._xScale(l(b+1))-y;if(_>v?(i.beginFill(m,g),this.addSVGInfo(r,y,v,T,_-v,p)):(i.beginFill(d,g),this.addSVGInfo(r,y,_,T,v-_,h)),l(b)>this.tilesetInfo.max_pos[0])break;i.drawRect(y,r.svgData.barYValues[b],T,r.svgData.barHeights[b])}}}]),n}(s2);function o3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a3e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l3e(r.key),r)}}function s3e(e,t,n){return t&&a3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function l3e(e){var t=u3e(e,"string");return typeof t=="symbol"?t:String(t)}function u3e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function C0(){return typeof Reflect<"u"&&Reflect.get?C0=Reflect.get.bind():C0=function(e,t,n){var r=c3e(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},C0.apply(this,arguments)}function c3e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Mp(e),e!==null););return e}function h3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LI(e,t)}function LI(e,t){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},LI(e,t)}function f3e(e){var t=m3e();return function(){var n=Mp(e),r;if(t){var i=Mp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p3e(this,r)}}function p3e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d3e(e)}function d3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mp(e){return Mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mp(e)}let v$=function(e){h3e(n,e);var t=f3e(n);function n(r,i){var o;return o3e(this,n),o=t.call(this,r,i),o.setColorScale(i.colorRange),o.opacity=i.opacity||1,o}return s3e(n,[{key:"setColorScale",value:function(r){this.colorScale=r?$l(r):hp,this.colorScale=this.colorScale.map(i=>i.map(o=>o/255))}},{key:"rerender",value:function(r){r&&r.colorRange&&this.setColorScale(r.colorRange),this.opacity=r.opacity||1,C0(Mp(n.prototype),"rerender",this).call(this,r)}},{key:"drawAxis",value:function(){}},{key:"drawTile",value:function(r){if(!r.graphics||!r.tileData||!r.tileData.dense)return;const i=r.graphics,{tileX:o,tileWidth:a}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),s=r.tileData.dense;if(s.length===0)return;const[u,c]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(u.range([254,0]).clamp(!0),this.valueScale=u,i.clear(),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const l=kt().domain([0,this.tilesetInfo.tile_size]).range([o,o+a]);i.lineStyle(0,0,0);for(let f=0;f<s.length;f++){if(Number.isNaN(s[f]))continue;const h=Math.round(this.valueScale(s[f]+c));if(Number.isNaN(+h))continue;const p=this._xScale(l(f)),d=this._xScale(l(f+1))-p,m=this.dimensions[1];r.xValues[f]=p,r.yValues[f]=h;const g=this.colorScale[h],v=Ue.PIXI.utils.rgb2hex(g);if(i.beginFill(v,this.opacity),f!==0){if(l(f)>this.tilesetInfo.max_pos[0])break;s[f]!==0&&i.drawRect(p,0,d,m)}}}}]),n}(Ed);function g3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y3e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b3e(r.key),r)}}function v3e(e,t,n){return t&&y3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b3e(e){var t=_3e(e,"string");return typeof t=="symbol"?t:String(t)}function _3e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function T3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jI(e,t)}function jI(e,t){return jI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},jI(e,t)}function E3e(e){var t=A3e();return function(){var n=cT(e),r;if(t){var i=cT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return S3e(this,r)}}function S3e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w3e(e)}function w3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cT(e){return cT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cT(e)}let b$=function(e){T3e(n,e);var t=E3e(n);function n(r,i){var o;return g3e(this,n),o=t.call(this,r,i),o.seen=new Set,o.pMain=o.pMobile,o.rows=[],o}return v3e(n,[{key:"uid",value:function(r){return r[r.length-2]}},{key:"segmentOverlap",value:function(r,i){}},{key:"drawAll",value:function(r){this.pMain.clear();const i=new Set,o=r.map(s=>i.has(this.uid(s))?null:(i.add(this.uid(s)),{from:+s[1],to:+s[2],type:s[4],uid:this.uid(s)})).filter(s=>s),a=R_(o);this.rows=a,this.draw()}},{key:"draw",value:function(){const r=this.rows;if(!r)return;const i=Ry().range([0,this.dimensions[1]]).padding(.1).domain(yi(0,this.maxRows())),o=this.pMain;o.clear(),o.lineStyle(1,255,0),o.beginFill(16740363,.8);for(let a=0;a<r.length;a++)for(let s=0;s<r[a].length;s++){const u=r[a][s],c=this._refXScale(u.from),l=this._refXScale(u.to),f=i(a),h=f+i.bandwidth(),p=l-c,d=h-f;o.drawRect(c,f,p,d)}}},{key:"allTilesLoaded",value:function(){const r=this.visibleAndFetchedIds().map(o=>this.fetchedTiles[o].tileData.discrete),i=[].concat(...r);this.drawAll(i)}},{key:"initTile",value:function(r){}},{key:"maxRows",value:function(){return this.rows.length}},{key:"updateTile",value:function(r){}},{key:"destroyTile",value:function(r){r.tileData.discrete.forEach(i=>{const o=i[i.length-2];this.seen.has(o)&&this.seen.delete(o)})}},{key:"drawTile",value:function(r){}}]),n}(_d);function O3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k3e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I3e(r.key),r)}}function x3e(e,t,n){return t&&k3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function I3e(e){var t=C3e(e,"string");return typeof t=="symbol"?t:String(t)}function C3e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}let gG=function(){function e(t){O3e(this,e),this.scene=t.scene,this.originalTrack=t,this.pBase=new Ue.PIXI.Graphics,this.scene.removeChild(t.pBase),this.scene.addChild(this.pBase),this.moveToOrigin=new Ue.PIXI.Graphics,this.moveToOrigin.addChild(t.pBase),this.pBase.addChild(this.moveToOrigin),this.moveToOrigin.rotation=Math.PI/2,t.isLeftModified=!0,t.flipText=!0,this.svgOutput=null,t.gBase&&t.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                             rotate(90)
                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))}return x3e(e,[{key:"remove",value:function(){this.originalTrack.remove(),this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"setDimensions",value:function(t){this.dimensions=t;const n=[t[1],t[0]];this.originalTrack.setDimensions(n)}},{key:"setPosition",value:function(t){this.position=t,this.originalTrack.setPosition(t),this.originalTrack.pBase.position.x=-this.originalTrack.position[0],this.originalTrack.pBase.position.y=-this.originalTrack.position[1],this.moveToOrigin.scale.y=-1,this.moveToOrigin.scale.x=1,this.moveToOrigin.position.x=this.originalTrack.position[0],this.moveToOrigin.position.y=this.originalTrack.position[1],this.originalTrack.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                                 rotate(90)
                                 scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))}},{key:"refXScale",value:function(t){return arguments.length?(this.originalTrack._refXScale=t,this):this.originalTrack._refYScale}},{key:"refYScale",value:function(t){return arguments.length?(this.originalTrack._refYScale=t,this):this.originalTrack._refXScale}},{key:"xScale",value:function(t){return arguments.length?(this.originalTrack._yScale=t,this):this.originalTrack._xScale}},{key:"yScale",value:function(t){return arguments.length?(this.originalTrack._xScale=t,this):this.originalTrack._yScale}},{key:"getMouseOverHtml",value:function(t,n){return this.originalTrack.getMouseOverHtml(n,t)}},{key:"clickOutside",value:function(){this.originalTrack.clickOutside()}},{key:"click",value:function(...t){this.originalTrack.click(...t)}},{key:"draw",value:function(){this.originalTrack.draw()}},{key:"zoomed",value:function(t,n,r=1,i=0,o=0,a=0,s=0){if(this.xScale(t),this.yScale(n),this.originalTrack.leftTrackZoomed){this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),this.originalTrack.leftTrackZoomed(t,n,r,i,o),this.originalTrack.draw();return}const u=this.originalTrack._xScale(0)-r*this.originalTrack._refXScale(0);if(this.originalTrack.pMobile.position.x=u+this.originalTrack.position[0],this.originalTrack.pMobile.position.y=this.originalTrack.position[1]+this.originalTrack.dimensions[1],this.originalTrack.pMobile.scale.x=r,this.originalTrack.pMobile.scale.y=r,this.originalTrack.options.oneDHeatmapFlipped&&(this.originalTrack.pMobile.scale.y=-r,this.originalTrack.pMobile.position.y=this.originalTrack.position[1]),this.originalTrack.leftTrackDraw){this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),this.originalTrack.leftTrackDraw();return}this.originalTrack.zoomed(this.xScale(),this.yScale())}},{key:"zoomedY",value:function(t,n){this.originalTrack.zoomedY(t,n)}},{key:"movedY",value:function(t){this.originalTrack.movedY(t)}},{key:"refScalesChanged",value:function(t,n){this.originalTrack.refScalesChanged(n,t)}},{key:"rerender",value:function(t){this.originalTrack.rerender(t)}},{key:"exportSVG",value:function(){const t=document.createElement("g");if(t.setAttribute("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                             rotate(90)
                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.exportSVG){const n=document.createElement("g");n.setAttribute("transform",`translate(${this.originalTrack.pBase.position.x}, ${this.originalTrack.pBase.position.y})`),n.appendChild(this.originalTrack.exportSVG()[0]),t.appendChild(n)}return[t,t]}},{key:"respondsToPosition",value:function(t,n){return t>=this.position[0]&&t<=this.dimensions[0]+this.position[0]&&n>=this.position[1]&&n<=this.dimensions[1]+this.position[1]}}]),e}();function P3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D3e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N3e(r.key),r)}}function R3e(e,t,n){return t&&D3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function N3e(e){var t=M3e(e,"string");return typeof t=="symbol"?t:String(t)}function M3e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function hs(){return typeof Reflect<"u"&&Reflect.get?hs=Reflect.get.bind():hs=function(e,t,n){var r=L3e(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},hs.apply(this,arguments)}function L3e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ho(e),e!==null););return e}function j3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BI(e,t)}function BI(e,t){return BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},BI(e,t)}function B3e(e){var t=H3e();return function(){var n=Ho(e),r;if(t){var i=Ho(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return F3e(this,r)}}function F3e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G3e(e)}function G3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H3e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ho(e){return Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ho(e)}const yG=11,gO="Arial",vG="outside",FI=10,U3e=4,z3e=20,V3e=ct("#ffffff"),xb=2,Y3e=2*FI/3,jh=2*Y3e/3,X3e=50,W3e=5e3,GI="blue",HI="red",l2=(e,t,n)=>{n.type!=="filler"&&t.pubSub.publish("app.click",{type:"gene-annotation",event:e,payload:n})},bG=(e,t)=>{const n=e.concat(t),r=n.map(i=>[i.xStart,1,i.xEnd,1]);fv(r,(i,o)=>{let a=null,s=null;if(n[i].type==="filler"?a=n[i]:s=n[i],n[o].type==="filler"){if(a)return;a=n[o]}else{if(!a)return;s=n[o]}a.xStart>=s.xStart&&a.xEnd<=s.xEnd&&(a.hide=!0)})};function q3e(e,t,n){const{flipText:r,fontSize:i,fontFamily:o,plusStrandColor:a,minusStrandColor:s,maxGeneEntries:u,maxFillerEntries:c,maxTexts:l}=n;if(t.texts={},t.rectGraphics=new Ue.PIXI.Graphics,t.textBgGraphics=new Ue.PIXI.Graphics,t.textGraphics=new Ue.PIXI.Graphics,t.rectMaskGraphics=new Ue.PIXI.Graphics,t.graphics.addChild(t.rectGraphics),t.graphics.addChild(t.textBgGraphics),t.graphics.addChild(t.textGraphics),t.graphics.addChild(t.rectMaskGraphics),t.rectGraphics.mask=t.rectMaskGraphics,!t.tileData.sort)return;t.tileData.sort((p,d)=>d.importance-p.importance);const f=t.tileData.filter(p=>p.type!=="filler").slice(0,u),h=t.tileData.filter(p=>p.type==="filler").slice(0,c);t.tileData=f.concat(h),t.tileData.forEach((p,d)=>{if(p.type==="filler")return;const m=p.fields,g=m[3],v=e.geneId(m,p.type),b=p.strand||m[5];p.strand=p.strand||b;let y=a||GI;if(b==="-"&&(y=s||HI),t.textWidths={},t.textHeights={},d>=l)return;const _=new Ue.PIXI.Text(g,{fontSize:`${i}px`,fontFamily:o,fill:ct(y)});_.interactive=!0,r&&(_.scale.x=-1),_.anchor.x=.5,_.anchor.y=1,t.texts[v]=_,t.texts[v].strand=b,t.textGraphics.addChild(_)}),t.initialized=!0}function _G(e,t,n,r,i,o,a,s,u){const c=s-u/2,l=0;e.forEach(f=>{const h=new Ue.PIXI.Graphics;n.rectGraphics.addChild(h),h.beginFill(o,.1),h.lineStyle(0,o);const p=[i(f.xStart)-l,c,i(f.xEnd)+l,c,i(f.xEnd)+l,c+u,i(f.xStart)-l,c+u,i(f.xStart)-l,c];h.interactive=!0,h.buttonMode=!0,h.mouseup=d=>l2(d,t,f),h.drawPolygon(p),n.allRects.push([p,f.strand,f])})}function $3e(e,t,n,r,i,o,a,s,u,c){const l=s-u/2,f=i.split(",").map(_=>+_+a),h=o.split(",").map(_=>+_+a),p=e._xScale(n),d=e._xScale(r),m=d-p,g=s,v=[];let b=[p,g-xb/2,p+m,g-xb/2,p+m,g+xb/2,p,g+xb/2];t.drawPolygon(b),v.push(b);const y=2*u;for(let _=Math.max(e.position[0],p)+y;_<Math.min(e.position[0]+e.dimensions[0],p+m);_+=y)c==="+"?b=[_,g-jh/2,_+jh/2,g,_,g+jh/2]:b=[_,g-jh/2,_-jh/2,g,_,g+jh/2],v.push(b),t.drawPolygon(b);for(let _=0;_<f.length;_++){const T=f[_],S=h[_],E=e._xScale(T),I=Math.max(1,e._xScale(S)-e._xScale(T));let x=p,C=d;const w=e.geneRectHeight/2;let B=null;c==="+"?(C=d-w,B=[Math.min(E,C),l,Math.min(E+I,C),l,Math.min(E+I,C),l+u,Math.min(E,C),l+u,Math.min(E,C),l]):(x=p+w,B=[Math.max(E,x),l,Math.max(E+I,x),l,Math.max(E+I,x),l+u,Math.max(E,x),l+u,Math.max(E,x),l]),v.push(B),t.drawPolygon(B)}return v}function K3e(e,t,n,r,i,o,a,s,u){const c=s-u/2;e.forEach(l=>{const f=t._xScale(l.xStart),h=t._xScale(l.xEnd),p=new Ue.PIXI.Graphics;n.rectGraphics.addChild(p),p.beginFill(o,a),p.interactive=!0,p.buttonMode=!0,p.mouseup=g=>l2(g,t,l);const d=t.geneRectHeight/2;let m=[];if(l.strand==="+"||l.fields[5]==="+"){const g=Math.max(f,h-d),v=g+d;m=[g,c,v,c+t.geneRectHeight/2,g,c+t.geneRectHeight]}else{const g=Math.min(h,f+d),v=g-d;m=[g,c,v,c+t.geneRectHeight/2,g,c+t.geneRectHeight]}p.drawPolygon(m),n.allRects.push([m,l.strand,l])})}function Q3e(e,t,n,r,i,o,a,s,u){e.forEach(c=>{const l=c.fields,f=+c.chrOffset,h=l[12],p=l[13],d=new Ue.PIXI.Graphics;n.rectGraphics.addChild(d),d.beginFill(o,a),d.interactive=!0,d.buttonMode=!0,d.mouseup=m=>l2(m,t,c),n.allRects=n.allRects.concat($3e(t,d,c.xStart,c.xEnd,h,p,f,s,u,c.strand||c.fields[5]).map(m=>[m,c.strand,c]))})}function TG(e,t,n,r,i,o,a,s,u){K3e(e,t,n,r,i,o,a,s,u),Q3e(e,t,n,r,i,o,a,s,u)}function Z3e(e,t){const{tileX:n,tileWidth:r}=tc.getTilePosAndDimensions(e.tilesetInfo,t.tileId);t.rectMaskGraphics.clear();const i=Math.floor(Math.random()*16**6);t.rectMaskGraphics.beginFill(i,.3);const o=e._xScale(n),a=0,s=e._xScale(n+r)-e._xScale(n),u=e.dimensions[1];t.rectMaskGraphics.drawRect(o,a,s,u)}let _$=function(e){j3e(n,e);var t=B3e(n);function n(r,i){var o;P3e(this,n),o=t.call(this,r,i);const{animate:a}=r;return o.animate=a,o.options=i,o.fontSize=+o.options.fontSize||yG,o.geneLabelPos=o.options.geneLabelPosition||vG,o.geneRectHeight=+o.options.geneAnnotationHeight||FI,o.geneRectHeight-=2,o.geneStrandSpacing=+o.options.geneStrandSpacing||U3e,o.geneStrandHSpacing=o.geneStrandSpacing/2,o.geneRectHHeight=o.geneRectHeight/2,o}return R3e(n,[{key:"initTile",value:function(r){q3e(this,r,{flipText:this.flipText,fontSize:this.fontSize,fontFamily:gO,plusStrandColor:this.options.plusStrandColor,minusStrandColor:this.options.minusStrandColor,maxGeneEntries:X3e,maxFillerEntries:W3e,maxTexts:z3e}),this.renderTile(r)}},{key:"destroyTile",value:function(r){r.rectGraphics.destroy(),r.rectMaskGraphics.destroy(),r.textGraphics.destroy(),r.textBgGraphics.destroy(),r.graphics.destroy()}},{key:"rerender",value:function(r,i){const o=JSON.stringify(r);!i&&o===this.prevOptions||(hs(Ho(n.prototype),"rerender",this).call(this,r,i),this.fontSize=+this.options.fontSize||yG,this.geneLabelPos=this.options.geneLabelPosition||vG,this.geneRectHeight=+this.options.geneAnnotationHeight||FI,this.geneStrandHSpacing=this.geneStrandSpacing/2,this.geneRectHHeight=this.geneRectHeight/2,this.prevOptions=o,this.visibleAndFetchedTiles().forEach(a=>{this.renderTile(a)}))}},{key:"drawTile",value:function(){}},{key:"geneId",value:function(r,i){return`${i}_${r[0]}_${r[1]}_${r[2]}_${r[3]}`}},{key:"renderTile",value:function(r){if(!r.initialized)return;r.allRects=[],r.drawnAtScale=this._xScale.copy(),r.rectGraphics.removeChildren(),r.rectGraphics.clear(),r.textBgGraphics.clear();const i={},o=.3,a=.3;i["+"]=ct(this.options.plusStrandColor||GI),i["-"]=ct(this.options.minusStrandColor||HI);let s=r.tileData.filter(g=>g.type==="filler"&&g.strand==="+"),u=r.tileData.filter(g=>g.type==="filler"&&g.strand==="-");const c=r.tileData.filter(g=>g.type!=="filler"&&(g.strand==="+"||g.fields[5]==="+")),l=r.tileData.filter(g=>g.type!=="filler"&&(g.strand==="-"||g.fields[5]==="-"));bG(c,s),bG(l,u),s=s.filter(g=>!g.hide),u=u.filter(g=>!g.hide);const f=this.dimensions[1]/2,h=f-this.geneRectHeight/2-this.geneStrandSpacing/2,p=f+this.geneRectHeight/2+this.geneStrandSpacing/2,d=[this,r,r.rectGraphics,this._xScale,i["+"],o,h,this.geneRectHeight],m=[this,r,r.rectGraphics,this._xScale,i["-"],o,p,this.geneRectHeight];_G(s,...d),_G(u,...m),d[5]=a,m[5]=a,TG(c,...d),TG(l,...m),Z3e(this,r),tc.stretchRects(this,[g=>g.rectGraphics,g=>g.rectMaskGraphics]);for(const g of Object.values(r.texts))g.style={fontSize:`${this.fontSize}px`,FONT_FAMILY:gO,fill:ct(g.strand==="-"?this.options.minusStrandColor||HI:this.options.plusStrandColor||GI)}}},{key:"calculateZoomLevel",value:function(){const r=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let i=Math.min(r,this.maxZoom);return i=Math.max(i,0),i}},{key:"draw",value:function(){hs(Ho(n.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[];const r=[];this.geneAreaHeight=this.geneRectHeight;const i=this.fontSize/2;tc.stretchRects(this,[o=>o.rectGraphics,o=>o.rectMaskGraphics]),Object.values(this.fetchedTiles).filter(o=>o.drawnAtScale).forEach(o=>{o.textBgGraphics.clear(),o.textBgGraphics.beginFill(typeof this.options.labelBackgroundColor<"u"?ct(this.options.labelBackgroundColor):V3e);const a=this.parentInFetched(o);o.initialized&&o.tileData.forEach(s=>{if(!o.texts||s.type==="filler")return;const u=s.fields,c=u[3],l=this.geneId(u,s.type),f=o.texts[l];if(!f)return;const h=+s.chrOffset,p=+u[1]+h,d=+u[2]+h,m=(p+d)/2;let g=this.dimensions[1]/2;const v=(this.geneAreaHeight-this.fontSize)/2;if(u[5]==="+"?g-=this.geneLabelPos==="inside"?v+this.geneStrandSpacing-2:this.fontSize/2+this.geneAreaHeight-2:g+=this.geneLabelPos==="inside"?this.fontSize+this.geneStrandSpacing/2+v+1:1.5*this.fontSize+this.geneAreaHeight+2,f.position.x=this._xScale(m),f.position.y=g,!o.textWidths[l]){const b=f.getBounds().width,y=f.getBounds().height;o.textHeights[l]=y,o.textWidths[l]=b}if(a)f.visible=!1;else{f.visible=!0;const b=2;this.flipText?this.allBoxes.push([f.position.x-o.textHeights[l]/2-b,g-i-1,f.position.x+o.textHeights[l]/2+b,g+i-1,c]):this.allBoxes.push([f.position.x-o.textWidths[l]/2-b,g-i-1,f.position.x+o.textWidths[l]/2+b,g+i-1,c]),this.allTexts.push({importance:+u[4],text:f,caption:c,strand:u[5]}),r.push(o.textBgGraphics)}})}),this.hideOverlaps(this.allBoxes,this.allTexts),this.renderTextBg(this.allBoxes,this.allTexts,r)}},{key:"renderTextBg",value:function(r,i,o){i.forEach((a,s)=>{if(a.text.visible&&r[s]&&o[s]){const[u,c,l,f]=r[s],h=l-u,p=f-c;o[s].drawRect(u-h/2,c-p/2,h,p)}})}},{key:"hideOverlaps",value:function(r,i){fv(r,(o,a)=>{i[o].importance>i[a].importance?i[a].text.visible=!1:i[o].text.visible=!1})}},{key:"setPosition",value:function(r){hs(Ho(n.prototype),"setPosition",this).call(this,r),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(r){hs(Ho(n.prototype),"setDimensions",this).call(this,r),this.halfRectHHeight=this.dimensions[1]/2,this.visibleAndFetchedTiles().forEach(i=>{this.renderTile(i)})}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.refreshTiles(),this.draw()}},{key:"getMouseOverHtml",value:function(r,i){if(!this.tilesetInfo)return"";const o=[r,i];for(const a of this.visibleAndFetchedTiles())for(let s=0;s<a.allRects.length;s++){if(a.allRects[s][2].type==="filler")continue;const u=a.allRects[s][0].slice(0),c=[];for(;u.length;){const l=u.splice(0,2);l[0]=l[0]*a.rectGraphics.scale.x+a.rectGraphics.position.x,l[1]=l[1]*a.rectGraphics.scale.y+a.rectGraphics.position.y,c.push(l)}if(f$(c,o)===-1){const l=a.allRects[s][2];return`
            <div>
              <b>${l.fields[3]}</b><br>
              <b>Position:</b> ${l.fields[0]}:${l.fields[1]}-${l.fields[2]}<br>
              <b>Strand:</b> ${l.fields[5]}
            </div>
          `}}return""}},{key:"exportSVG",value:function(){let r=null,i=null;hs(Ho(n.prototype),"exportSVG",this)?[i,r]=hs(Ho(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");return o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o),this.visibleAndFetchedTiles().filter(a=>a.allRects).forEach(a=>{const s=document.createElement("g");s.setAttribute("transform",`translate(${a.rectGraphics.position.x},
          ${a.rectGraphics.position.y})
          scale(${a.rectGraphics.scale.x},
          ${a.rectGraphics.scale.y})`),a.allRects.forEach(u=>{const c=document.createElement("path"),l=u[0];let f=`M ${l[0]} ${l[1]}`;for(let h=2;h<l.length;h+=2)f+=` L ${l[h]} ${l[h+1]}`;c.setAttribute("d",f),u[1]==="+"?c.setAttribute("fill",this.options.plusStrandColor):c.setAttribute("fill",this.options.minusStrandColor),c.setAttribute("opacity","0.3"),s.appendChild(c)}),o.appendChild(s)}),this.allTexts.filter(a=>a.text.visible).forEach(a=>{const s=document.createElement("g"),u=document.createElement("text");u.setAttribute("text-anchor","middle"),u.setAttribute("font-family",gO),u.setAttribute("font-size",`${this.fontSize}px`),u.setAttribute("dy","-.2em"),s.setAttribute("transform",`scale(${a.text.scale.x},1)`),a.strand==="+"?u.setAttribute("fill",this.options.plusStrandColor):u.setAttribute("fill",this.options.minusStrandColor),u.innerHTML=a.text.text,s.appendChild(u),s.setAttribute("transform",`translate(${a.text.x},${a.text.y})scale(${a.text.scale.x},1)`),o.appendChild(s)}),[i,i]}}]),n}(_d);function J3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eFe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rFe(r.key),r)}}function tFe(e,t,n){return t&&eFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rFe(e){var t=nFe(e,"string");return typeof t=="symbol"?t:String(t)}function nFe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Wu(){return typeof Reflect<"u"&&Reflect.get?Wu=Reflect.get.bind():Wu=function(e,t,n){var r=iFe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Wu.apply(this,arguments)}function iFe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Es(e),e!==null););return e}function oFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UI(e,t)}function UI(e,t){return UI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},UI(e,t)}function aFe(e){var t=uFe();return function(){var n=Es(e),r;if(t){var i=Es(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return sFe(this,r)}}function sFe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lFe(e)}function lFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Es(e){return Es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Es(e)}function EG(e,t,n,r,i,o,a,s,u,c){const l=c?e._xScale(n.yStart):e._xScale(n.xStart),f=c?e._xScale(n.yEnd):e._xScale(n.xEnd),h=c?e._yScale(n.xStart):e._yScale(n.yStart),p=c?e._yScale(n.xEnd):e._yScale(n.yEnd),d=n.uid+c,m=f-l,g=p-h;let v={x:l,y:h,width:m,height:g};r&&(m<r||g<r)&&(v={x:l-r/2,y:h-r/2,width:r,height:r}),e.drawnRects[d]=v;const b=v.x+v.width,y=v.y+v.height;(v.x>i&&v.x<o||b>i&&b<o||v.y>a&&v.y<s||y>a&&y<s)&&(v.width>u||v.height>u)&&(t.drawRect(v.x,v.y,v.width,v.height),e.publish("annotationDrawn",{trackUuid:e.uuid,annotationUuid:d,viewPos:[v.x,v.y,v.width,v.height],dataPos:[n.xStart,n.xEnd,n.yStart,n.yEnd],importance:n.importance,info:{patternType:e.options.patternType}}))}let T$=function(e){oFe(n,e);var t=aFe(n);function n(...r){var i;J3e(this,n),i=t.call(this,...r),i.drawnRects={};const{publish:o,subscribe:a,unsubscribe:s}=h1();return i.publish=o,i.subscribe=a,i.unsubscribe=s,i}return tFe(n,[{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const i=r.split(".");return i.slice(0,i.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),i=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let o=Math.max(r,i);return o=Math.min(o,this.maxZoom),o}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(i=>({tileId:this.tileToLocalId(i),remoteId:this.tileToRemoteId(i)})),this.visibleTileIds=new Set(this.visibleTiles.map(i=>i.remoteId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=et.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=et.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const r=this.xTiles,i=this.yTiles,o=this.zoomLevel,a=[];for(let s=0;s<r.length;s++)for(let u=0;u<i.length;u++){const c=[o,r[s],i[u]];a.push(c)}this.setVisibleTiles(a)}},{key:"initTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"draw",value:function(){this.drawnRects={},Wu(Es(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(r){const i=r.graphics;if(!i)return;i.clear();const o=ct(this.options.rectangleDomainStrokeColor||"black"),a=ct(this.options.rectangleDomainFillColor||"grey");i.lineStyle(typeof this.options.rectangleDomainStrokeWidth<"u"?this.options.rectangleDomainStrokeWidth:1,o,typeof this.options.rectangleDomainStrokeOpacity<"u"?this.options.rectangleDomainStrokeOpacity:1),i.beginFill(a,typeof this.options.rectangleDomainFillOpacity<"u"?this.options.rectangleDomainFillOpacity:.4),i.alpha=this.options.rectangleDomainOpacity||.5;const s=this.options.minSquareSize&&this.options.minSquareSize!=="none"?+this.options.minSquareSize:0,u=this.options.rectangleMinSize?+this.options.rectangleMinSize:0,c=this._xScale.range()[0],l=this._xScale.range()[1],f=this._yScale.range()[0],h=this._yScale.range()[1];r.tileData.length&&r.tileData.filter(p=>!(p.uid in this.drawnRects)).forEach(p=>{EG(this,i,p,s,c,l,f,h,u,this.options.flipDiagonal==="yes"),this.options.flipDiagonal&&this.options.flipDiagonal==="copy"&&EG(this,i,p,s,c,l,f,h,u,!0)})}},{key:"exportSVG",value:function(){let r=null,i=null;Wu(Es(n.prototype),"exportSVG",this)?[i,r]=Wu(Es(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);for(const a of[!0,!1])for(const s of this.visibleAndFetchedTiles())!s.tileData||!s.tileData.length||s.tileData.forEach(u=>{const c=u.uid+a,l=document.createElement("g");if(l.setAttribute("transform",`translate(${s.graphics.position.x},${s.graphics.position.y})scale(${s.graphics.scale.x},${s.graphics.scale.y})`),o.appendChild(l),c in this.drawnRects){const f=this.drawnRects[c],h=document.createElement("rect");h.setAttribute("x",f.x),h.setAttribute("y",f.y),h.setAttribute("width",f.width),h.setAttribute("height",f.height),h.setAttribute("fill",this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey"),h.setAttribute("opacity",.3),h.style.stroke="black",h.style.strokeWidth="1px",l.appendChild(h)}});return[i,i]}},{key:"setPosition",value:function(r){Wu(Es(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,i){this.xScale().domain()[0]===r.domain()[0]&&this.xScale().domain()[1]===r.domain()[1]&&this.yScale().domain()[0]===i.domain()[0]&&this.yScale().domain()[1]===i.domain()[1]||(this.xScale(r),this.yScale(i),this.refreshTiles(),this.draw())}},{key:"leftTrackDraw",value:function(){this.draw()}}]),n}(lh);function cFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hFe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pFe(r.key),r)}}function fFe(e,t,n){return t&&hFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pFe(e){var t=dFe(e,"string");return typeof t=="symbol"?t:String(t)}function dFe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qu(){return typeof Reflect<"u"&&Reflect.get?qu=Reflect.get.bind():qu=function(e,t,n){var r=mFe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},qu.apply(this,arguments)}function mFe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ss(e),e!==null););return e}function gFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zI(e,t)}function zI(e,t){return zI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},zI(e,t)}function yFe(e){var t=bFe();return function(){var n=Ss(e),r;if(t){var i=Ss(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vFe(this,r)}}function vFe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E$(e)}function E$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ss(e){return Ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ss(e)}const _Fe=250;let S$=function(e){gFe(n,e);var t=yFe(n);function n(r,i){var o;cFe(this,n),o=t.call(this,r,i);const{pubSub:a}=r;o.drawnAnnotations={},o.drawnAnnoGfx={},o.selectedAnno=null,o.options.minSquareSize=+o.options.minSquareSize;const{publish:s,subscribe:u,unsubscribe:c}=h1();return o.publish=s,o.subscribe=u,o.unsubscribe=c,o.sT=0,o.annoSelectedBound=o.annoSelected.bind(E$(o)),o.pubSubs.push(a.subscribe("annoSelected",o.annoSelectedBound)),o}return fFe(n,[{key:"minX",get:function(){return this.tilesetInfo&&this.tilesetInfo.min_pos?this.tilesetInfo.min_pos[0]:0}},{key:"maxX",get:function(){return this.tilesetInfo&&this.tilesetInfo.max_pos?this.tilesetInfo.max_pos[0]:this.tilesetInfo.max_width||this.tilesetInfo.max_size}},{key:"minY",get:function(){return this.minX}},{key:"maxY",get:function(){return this.maxX}},{key:"maxSize",get:function(){return this.tilesetInfo.max_pos&&Math.max(this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1])||(this.tilesetInfo.max_size?this.tilesetInfo.max_size:0)}},{key:"projection",value:function([r,i]){return[this._xScale(r),this._yScale(i)]}},{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const i=r.split(".");return i.slice(0,i.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=et.calculateZoomLevel(this._xScale,this.minX,this.maxX),i=et.calculateZoomLevel(this._yScale,this.minY,this.maxY);return B9(cx(r,i),this.maxZoom)}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(i=>({tileId:this.tileToLocalId(i),remoteId:this.tileToRemoteId(i)})),this.visibleTileIds=new Set(this.visibleTiles.map(i=>i.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=et.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.tilesetInfo.max_zoom,this.maxSize),this.yTiles=et.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.tilesetInfo.max_zoom,this.maxSize);const r=this.zoomLevel,i=[];for(let o=0;o<this.xTiles.length;o++)for(let a=0;a<this.yTiles.length;a++)i.push([r,this.xTiles[o],this.yTiles[a]]);this.setVisibleTiles(i)}},{key:"draw",value:function(){this.drawnAnnotations={},qu(Ss(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(r,i=!1,o=!1){if(!r.graphics)return;r.graphics.__tile__=r;const a=r.graphics;a.clear(),this.setBorderStyle(a),this.setFill(a),a.alpha=+this.options.rectangleDomainOpacity,r.tileData.length&&r.tileData.filter(s=>!(s.uid in this.drawnAnnotations)||i).forEach(s=>{const[u,c]=this.projection([s.xStart,s.yStart]),[l,f]=this.projection([s.xEnd,s.yEnd]);this.options.exclude&&this.options.exclude.indexOf(s.uid)>=0||this.drawAnnotation(this.prepAnnotation(a,s.uid,u,c,l-u,f-c,s),o)})}},{key:"prepAnnotation",value:function(r,i,o,a,s,u,c){let l;try{l=JSON.parse(c.fields)}catch{}return{graphics:r,id:c.id,uid:i,annotation:{x:o,y:a,width:s,height:u},dataPos:[c.xStart,c.xEnd,c.yStart,c.yEnd],importance:c.importance,info:l}}},{key:"drawAnnotation",value:function({graphics:r,id:i,uid:o,annotation:a,dataPos:s,importance:u,info:c},l){this.options.minSquareSize&&(a.width<this.options.minSquareSize||a.height<this.options.minSquareSize)&&(a.x=(a.x+a.width)/2,a.y=(a.y+a.height)/2,a.width=this.options.minSquareSize,a.height=this.options.minSquareSize),this.drawnAnnotations[o]=a;const f=[a.x,a.y,a.width,a.height];let h=this.drawnAnnoGfx[o];h||(h=new Ue.PIXI.Graphics,this.drawnAnnoGfx[o]=h),r.children.indexOf(h)===-1&&r.addChild(h),this._drawRect(h,f,o),r.interactive=!0,h.interactive=!0,h.buttonMode=!0;const p={id:i,uid:o,dataPos:s,importance:u,info:c,viewPos:[a.x,a.y,a.x+a.width,a.y+a.height]};h.mouseover=()=>this.hover(h,f,o),h.mouseout=()=>this.blur(h,f,o),h.mousedown=()=>this.mouseDown(),h.mouseup=d=>this.mouseUp(h,f,o,d,p),l||this.publish("annotationDrawn",{trackUuids:this.uuid,annotationUuid:o,annotationId:i,viewPos:f,dataPos:s,importance:u,info:c})}},{key:"_drawRect",value:function(r,i,o){let a=this.options.rectangleDomainStrokeColor,s=this.options.rectangleDomainStrokeWidth,u=this.options.rectangleDomainStrokeOpacity,c=this.options.rectangleDomainFillColor,l=this.options.rectangleDomainFillOpacity;this.hoveredAnno===o&&(a=this.options.hoverColor,s=this.options.rectangleDomainStrokeWidth+1||2,u=1,c=this.options.hoverColor,l=this.options.rectangleDomainFillOpacity),this.selectedAnno&&this.selectedAnno.uid===o&&(a=this.options.selectColor,s=this.options.rectangleDomainStrokeWidth+1||2,u=1,c=this.options.selectColor,l=cx(.33,this.options.rectangleDomainFillOpacity)),r.clear(),this.options.trackBorderBgWidth&&(this.setBorderStyle(r,this.options.trackBorderBgColor,this.options.trackBorderBgWidth,this.options.trackBorderBgAlpha),this.setFill(r,c,0),r.drawRect(...i)),this.setBorderStyle(r,a,s,u),this.setFill(r,c,l),r.drawRect(...i),r.__viewPos__=i}},{key:"context",value:function(r,i,o){return a=>a(r,i,o)}},{key:"click",value:function(r,i,o,a,s){this.select(r,i,o),this.pubSub.publish("app.click",{type:"annotation",event:a,payload:s})}},{key:"mouseDown",value:function(){this.sT=performance.now()}},{key:"mouseUp",value:function(r,i,o,a,s){performance.now()-this.sT<=_Fe&&this.click(r,i,o,a,s)}},{key:"hover",value:function(r,i,o){this.hoveredAnno=o,this._drawRect(r,i,o),this.animate()}},{key:"focus",value:function(r,i,o){this._drawRect(r,i,o),this.animate()}},{key:"blur",value:function(r,i,o){this.hoveredAnno=null,this._drawRect(r,i,o),this.animate()}},{key:"select",value:function(r,i,o,a=!1){let s=null,u=null;this.selectedAnno&&(s=this.selectedAnno.graphics,u=this.selectedAnno.uid),this.selectedAnno={graphics:r,uid:o},this.focus(r,i,o),this.options.onSelect&&!a&&(window[this.options.onSelect](o),this.pubSub.publish("annoSelected",o)),s&&u&&this.blur(s,s.__viewPos__,u)}},{key:"unselect",value:function(){const r=this.selectedAnno.graphics,i=this.selectedAnno.uid;this.selectedAnno=null,this.blur(r,r.__viewPos__,i)}},{key:"annoSelected",value:function(r){if(!this.selectedAnno||this.selectedAnno.uid!==r){this.selectedAnno&&this.unselect();const i=this.drawnAnnoGfx[r];i&&this.select(i,i.__viewPos__,r,!0)}}},{key:"exportSVG",value:function(){let r=null,i=null;qu(Ss(n.prototype),"exportSVG",this)?[i,r]=qu(Ss(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");return o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o),this.visibleAndFetchedTiles().filter(a=>a.tileData&&a.tileData.length).map(a=>({graphics:a.graphics,td:a.tileData})).forEach(({td:a,graphics:s})=>{const u=document.createElement("g");if(u.setAttribute("transform",`translate(${s.position.x},${s.position.y})scale(${s.scale.x},${s.scale.y})`),o.appendChild(u),a.uid in this.drawnAnnotations){const c=this.drawnAnnotations[a.uid],l=document.createElement("rect");l.setAttribute("x",c.x),l.setAttribute("y",c.y),l.setAttribute("width",c.width),l.setAttribute("height",c.height),l.setAttribute("fill",this.options.fillColor||"grey"),l.setAttribute("opacity",.3),l.style.stroke=this.options.fillColor||"grey",l.style.strokeWidth="1px",u.appendChild(l)}}),[i,i]}},{key:"setBorderStyle",value:function(r,i=this.options.rectangleDomainStrokeColor,o=this.options.rectangleDomainStrokeWidth,a=this.options.rectangleDomainStrokeOpacity){r.lineStyle(typeof o<"u"?o:1,ct(i||"black"),typeof a<"u"?a:1)}},{key:"setFill",value:function(r,i=this.options.rectangleDomainFillColor,o=this.options.rectangleDomainFillOpacity){r.beginFill(ct(i||"grey"),typeof o<"u"?o:.4)}},{key:"setPosition",value:function(r){qu(Ss(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.refreshTiles(),this.draw()}}]),n}(lh);function TFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EFe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wFe(r.key),r)}}function SFe(e,t,n){return t&&EFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wFe(e){var t=AFe(e,"string");return typeof t=="symbol"?t:String(t)}function AFe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ag(){return typeof Reflect<"u"&&Reflect.get?Ag=Reflect.get.bind():Ag=function(e,t,n){var r=OFe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ag.apply(this,arguments)}function OFe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Dc(e),e!==null););return e}function kFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VI(e,t)}function VI(e,t){return VI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},VI(e,t)}function xFe(e){var t=PFe();return function(){var n=Dc(e),r;if(t){var i=Dc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return IFe(this,r)}}function IFe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CFe(e)}function CFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dc(e){return Dc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dc(e)}let YI=function(e){kFe(n,e);var t=xFe(n);function n(r,i,o){var a;return TFe(this,n),a=t.call(this,r,i),a.pubSub=r.pubSub,a.options=i,a.isVertical=o,a.rects={},a.defaultColor=fn("red"),a}return SFe(n,[{key:"draw",value:function(){const r=typeof this.options.minRectWidth<"u"?this.options.minRectWidth:10,i=typeof this.options.fill<"u"?fn(this.options.fill):this.defaultColor,o=typeof this.options.fillOpacity<"u"?+this.options.fillOpacity:.2,a=typeof this.options.stroke<"u"?fn(this.options.stroke):this.defaultColor,s=typeof this.options.strokeWidth<"u"?+this.options.strokeWidth:1,u=typeof this.options.strokeOpacity<"u"?+this.options.strokeOpacity:0;let c;this.options.strokePos&&this.options.strokePos.length&&(c=Array.isArray(this.options.strokePos)?this.options.strokePos:[this.options.strokePos]),Ag(Dc(n.prototype),"draw",this).call(this);const l=this.pMain;l.clear();const f=performance.now();this.options.regions.forEach(h=>{const p=`${h[0]}-${h[1]}`;this.rects[p]||(this.rects[p]={graphics:new Ue.PIXI.Graphics},l.addChild(this.rects[p].graphics)),this.rects[p].timeStamp=f;const d=fn(h[2])||i;let m=fn(h[3])||a;m||(m=d);const g=Ue.PIXI.utils.rgb2hex([d.r/255,d.g/255,d.b/255]),v=Ue.PIXI.utils.rgb2hex([m.r/255,m.g/255,m.b/255]);c?(l.lineStyle(1,v,0),l.beginFill(v,+h[5]||u)):(l.lineStyle(s,v,+h[5]||u),l.beginFill(g,+h[4]||o));const b=this.isVertical?this._yScale:this._xScale;let y=b(+h[0]);const _=b(+h[1]);let T=_-y;const S=typeof h[6]<"u"?h[6]:r;T<S&&(y=(y+_)/2-S/2,T=S),c?(l.lineStyle(1,v,0),l.beginFill(v,+h[5]||u),c.forEach(E=>{(E==="top"||E==="around")&&(this.isVertical?l.drawRect(0,y,s,T):l.drawRect(y,0,T,s)),(E==="right"||E==="around")&&(this.isVertical?l.drawRect(0,y,this.dimensions[0],s):l.drawRect(y,0,s,this.dimensions[1])),(E==="bottom"||E==="around")&&(this.isVertical?l.drawRect(this.dimensions[0]-s,y,s,T):l.drawRect(y,this.dimensions[1]-s,T,s)),(E==="left"||E==="around")&&(this.isVertical?l.drawRect(0,y+T-s,this.dimensions[0],s):l.drawRect(y+T-s,0,s,this.dimensions[1]))})):l.lineStyle(s,v,+h[5]||u),this.rects[p].graphics.clear(),this.rects[p].graphics.interactive=!0,this.rects[p].graphics.buttonMode=!0,l.beginFill(g,+h[4]||o),this.isVertical?(l.drawRect(0,y,this.dimensions[0],T),this.rects[p].graphics.hitArea=new Ue.PIXI.Rectangle(0,y,this.dimensions[0],T)):(l.drawRect(y,0,T,this.dimensions[1]),this.rects[p].graphics.hitArea=new Ue.PIXI.Rectangle(y,0,T,this.dimensions[1])),this.rects[p].graphics.mousedown=()=>{this.rects[p].mouseDownTime=performance.now()},this.rects[p].graphics.mouseup=E=>{performance.now()-this.rects[p].mouseDownTime<c9&&this.pubSub.publish("app.click",{type:"annotation",event:E,payload:h})}}),Object.values(this.rects).filter(h=>h.timeStamp!==f).forEach(h=>l.removeChild(h.graphics))}},{key:"setPosition",value:function(r){Ag(Dc(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}}]),n}(Ai);function DFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RFe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MFe(r.key),r)}}function NFe(e,t,n){return t&&RFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MFe(e){var t=LFe(e,"string");return typeof t=="symbol"?t:String(t)}function LFe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kl(){return typeof Reflect<"u"&&Reflect.get?kl=Reflect.get.bind():kl=function(e,t,n){var r=jFe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},kl.apply(this,arguments)}function jFe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=wa(e),e!==null););return e}function BFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XI(e,t)}function XI(e,t){return XI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},XI(e,t)}function FFe(e){var t=UFe();return function(){var n=wa(e),r;if(t){var i=wa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return GFe(this,r)}}function GFe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HFe(e)}function HFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wa(e){return wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wa(e)}let w$=function(e){BFe(n,e);var t=FFe(n);function n(r,i){var o;return DFe(this,n),o=t.call(this,r,i),o.drawnRects=new Set,o.pMain=o.pMobile,o}return NFe(n,[{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const i=r.split(".");return i.slice(0,i.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),i=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let o=Math.max(r,i);return o=Math.min(o,this.maxZoom),this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?o=Math.min(this.options.maxZoom,o):console.error("Invalid maxZoom on track:",this)),o}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(i=>({tileId:this.tileToLocalId(i),remoteId:this.tileToRemoteId(i)})),this.visibleTileIds=new Set(this.visibleTiles.map(i=>i.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const r=this._xScale.copy();r.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.xTiles=et.calculateTiles(this.zoomLevel,r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=et.calculateTiles(this.zoomLevel,r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const i=this.xTiles,o=this.yTiles,a=this.zoomLevel,s=this.tilesetInfo.max_width/2**a,u=[];for(let c=0;c<i.length;c++)for(let l=c;l<o.length;l++){if((l-c-2)*(this._xScale(s)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const f=[a,i[c],o[l]];f.mirrored=!1,u.push(f)}this.setVisibleTiles(u)}},{key:"initTile",value:function(r){kl(wa(n.prototype),"initTile",this).call(this,r),this.drawTile(r)}},{key:"destroyTile",value:function(r,i){}},{key:"draw",value:function(){this.delayDrawing||this.drawnRects.clear(),kl(wa(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(r){if(!r.graphics)return;const i=r.graphics;i.clear();const o=ct(this.options.rectangleDomainStrokeColor?this.options.rectangleDomainStrokeColor:"black"),a=ct(this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey");if(i.lineStyle(1/this.pMain.scale.x,o,1),i.beginFill(a,.4),i.alpha=this.options.rectangleDomainOpacity?this.options.rectangleDomainOpacity:.5,!!r.tileData.sort)for(const s of r.tileData){const u=this._refXScale(s.xStart),c=this._refXScale(s.xEnd),l=this._refYScale(s.yStart),f=this._refYScale(s.yEnd),h=s.uid;this.drawnRects.has(h)||(this.drawnRects.add(h),i.drawRect(u,l,c-u,f-l),i.pivot.x=this._refXScale(0),i.pivot.y=this._refYScale(0),i.scale.x=-1/Math.sqrt(2),i.rotation=-3*Math.PI/4,i.scale.y=1/Math.sqrt(2),i.position.x=this._refXScale(0),i.position.y=0)}}},{key:"setPosition",value:function(r){kl(wa(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"refScalesChanged",value:function(r,i){kl(wa(n.prototype),"refScalesChanged",this).call(this,r,i);for(const o in this.fetchedTiles){const a=this.fetchedTiles[o];if(a.sprite){const s=a.graphics;s.pivot.x=this._refXScale(0),s.pivot.y=this._refYScale(0),s.scale.x=-1/Math.sqrt(2),s.rotation=-3*Math.PI/4,s.scale.y=1/Math.sqrt(2),s.position.x=this._refXScale(0),s.position.y=0}}}},{key:"zoomed",value:function(r,i,o,a,s){kl(wa(n.prototype),"zoomed",this).call(this,r,i,o,a,s),this.pMain.position.x=a,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=o,this.pMain.scale.y=o,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-o,this.pMain.position.y=this.position[1]),this.draw()}},{key:"leftTrackDraw",value:function(){this.draw()}}]),n}(lh);function zFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VFe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XFe(r.key),r)}}function YFe(e,t,n){return t&&VFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XFe(e){var t=WFe(e,"string");return typeof t=="symbol"?t:String(t)}function WFe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Og(){return typeof Reflect<"u"&&Reflect.get?Og=Reflect.get.bind():Og=function(e,t,n){var r=qFe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Og.apply(this,arguments)}function qFe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Rc(e),e!==null););return e}function $Fe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WI(e,t)}function WI(e,t){return WI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},WI(e,t)}function KFe(e){var t=JFe();return function(){var n=Rc(e),r;if(t){var i=Rc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return QFe(this,r)}}function QFe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZFe(e)}function ZFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rc(e){return Rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rc(e)}let A$=function(e){$Fe(n,e);var t=KFe(n);function n(r,i){var o;return zFe(this,n),o=t.call(this,r,i),o.drawnRects=new Set,o}return YFe(n,[{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const i=r.split(".");return i.slice(0,i.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),i=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let o=Math.max(r,i);return o=Math.min(o,this.maxZoom),o}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(i=>({tileId:this.tileToLocalId(i),remoteId:this.tileToRemoteId(i)})),this.visibleTileIds=new Set(this.visibleTiles.map(i=>i.tileId))}},{key:"calculateVisibleTiles",value:function(r=!0){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=et.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=et.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const i=this.xTiles,o=this.yTiles,a=this.zoomLevel,s=[];for(let u=0;u<i.length;u++)for(let c=0;c<o.length;c++){const l=[a,i[u],o[c]];s.push(l)}this.setVisibleTiles(s)}},{key:"initTile",value:function(r){}},{key:"destroyTile",value:function(r,i){}},{key:"draw",value:function(){this.drawnRects.clear(),Og(Rc(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(r){if(!r.graphics)return;const i=r.graphics;i.clear();const o=ct("green");i.lineStyle(1,255,1),i.beginFill(o,.8),i.alpha=.5;for(const a of r.tileData){const s=this._xScale(a.xStart),u=this._xScale(a.xEnd),c=this._yScale(a.yStart),l=this._yScale(a.yEnd),f=a.uid;if(this.drawnRects.has(f))continue;this.drawnRects.add(f);const h=6,p=6;let d=l-c,m=u-s;const g=(s+u)/2,v=(c+l)/2;d<h&&(d=h),m<p&&(m=p),i.drawRect(g-d/2,v-m/2,d,m)}}},{key:"setPosition",value:function(r){Og(Rc(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.refreshTiles(),this.draw()}}]),n}(lh);function Bs(e,t,n=zN){const r={};return r.absToChr=i=>r.chrPositions?pn(i,r):null,r.chrToAbs=([i,o]=[])=>r.chrPositions?S_(i,o,r):null,et.text(e,(i,o)=>{if(i)t&&t(null);else{const a=kR(o),s=v1(a);Object.keys(s).forEach(u=>{r[u]=s[u]}),t&&t(r)}},n).then(()=>r)}function eGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tGe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nGe(r.key),r)}}function rGe(e,t,n){return t&&tGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nGe(e){var t=iGe(e,"string");return typeof t=="symbol"?t:String(t)}function iGe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}let Lp=function(){function e(t){eGe(this,e),this.chromInfo=t,this.chromInfoBisector=Qp(n=>n.pos).left}return rGe(e,[{key:"scalesToPositionText",value:function(t,n,r=!1){if(this.chromInfo===null||!t||!n)return"";const i=pn(t.domain()[0],this.chromInfo),o=pn(t.domain()[1],this.chromInfo),a=pn(n.domain()[0],this.chromInfo),s=pn(n.domain()[1],this.chromInfo);let u=null;const c=no(",d");return i[0]!==o[0]?u=`${i[0]}:${c(Math.floor(i[1]))}-${o[0]}:${c(Math.ceil(o[1]))}`:u=`${i[0]}:${c(Math.floor(i[1]))}-${c(Math.ceil(o[1]))}`,r&&(a[0]!==s[0]?u+=` & ${a[0]}:${c(Math.floor(a[1]))}-${s[0]}:${c(Math.ceil(s[1]))}`:u+=` & ${a[0]}:${c(Math.floor(a[1]))}-${c(Math.ceil(s[1]))}`),(i[2]<=0||o[2]>0||r&&(a[2]<=0||s[2]>0))&&(u+=` [offset ${i[2]},${o[2]}`,r&&(u+=`:${a[2]},${s[2]}`),u+="]"),u}},{key:"convertNumberNotation",value:function(t){let n=t;if(!n.includes("M",n.length-1)&&!n.includes("K",n.length-1))return n;let r=0,i=0;if(n.includes("M",n.length-1)?(r=6,n=n.replace("M","")):(r=3,n=n.replace("K","")),Number.isNaN(+n))return t;n=(+n).toString(),n.includes(".")&&(i=n.length-1-n.indexOf("."),n=(+n.replace(".","")).toString());const o=r-i;return o<0?t:(n+="0".repeat(o),n)}},{key:"parsePosition",value:function(t,n=null){const r=t.split(":");let i=null,o=0;r.length>1?(i=r[0],o=+this.convertNumberNotation(r[1].replace(/,/g,""))):r[0]in this.chromInfo.chrPositions?(i=r[0],o=0,n!==null&&(o=+this.chromInfo.chromLengths[i])):(o=+this.convertNumberNotation(r[0].replace(/,/g,"")),i=null,n&&(i=n));let a=null;return i===null?(i=n,a=o):i in this.chromInfo.chrPositions&&(a=this.chromInfo.chrPositions[i].pos+o),[i,o,a]}},{key:"matchRangesToLarger",value:function(t,n){if(t[1]-t[0]<n[1]-n[0]){const i=n[1]-n[0]-(t[1]-t[0]);return[[t[0]-i/2,t[1]+i/2],n]}const r=t[1]-t[0]-(n[1]-n[0]);return[t,[n[0]-r/2,n[1]+r/2]]}},{key:"getSearchRange",value:function(t){if(t.length===0)return null;let n=t.split("-");n=n.filter(i=>i.length>0);let r=null;if(n[0].indexOf("-")===0&&(n[0]=n[0].slice(3,n[0].length)),n.length>1){let[i,o,a]=this.parsePosition(n[0]),[s,u,c]=this.parsePosition(n[1],i);const l=[a,c];[i,o,a]=this.parsePosition(n[1]),[s,u,c]=this.parsePosition(n[0],i),i===null&&s!==null&&([i,o,a]=this.parsePosition(n[1],s));const f=[a,c];return f[1]-f[0]>l[1]-l[0]?f:l}if(n[0]in this.chromInfo.chrPositions){const i=+this.chromInfo.chrPositions[n[0]].pos;r=[i,i+ +this.chromInfo.chromLengths[n[0]]]}else{const[i,o,a]=this.parsePosition(n[0]);r=[a-8e6,a+8e6]}return r[0]>r[1]?[r[1],r[0]]:r}},{key:"parseOffset",value:function(t){const n=t.split(":");if(n.length===0)return[[0,0],[0,0]];if(n.length===1){const o=n[0].split(",");return[[+o[0],+o[1]],[0,0]]}const r=n[0].split(","),i=n[1].split(",");return[[+r[0],+r[1]],[+i[0],+i[1]]]}},{key:"searchPosition",value:function(t){let n=null,r=null;t=t.trim();const i=/\[offset (.+?)\]/.exec(t);let o=[[0,0],[0,0]];i&&(t=t.replace(i[0],""),o=this.parseOffset(i[1]));const a=t.split(" & ");return a.length>1?(n=this.getSearchRange(a[0].split(" ")[0]),r=this.getSearchRange(a[1].split(" ")[0])):n=this.getSearchRange(a[0]),n!==null&&r!==null&&([n,r]=this.matchRangesToLarger(n,r)),n&&(n[0]+=o[0][0],n[1]+=o[0][1]),r&&(r[0]+=o[1][0],r[1]+=o[1][1]),[n,r]}}]),e}();function oGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aGe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lGe(r.key),r)}}function sGe(e,t,n){return t&&aGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lGe(e){var t=uGe(e,"string");return typeof t=="symbol"?t:String(t)}function uGe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function P0(){return typeof Reflect<"u"&&Reflect.get?P0=Reflect.get.bind():P0=function(e,t,n){var r=cGe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},P0.apply(this,arguments)}function cGe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=jp(e),e!==null););return e}function hGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qI(e,t)}function qI(e,t){return qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},qI(e,t)}function fGe(e){var t=mGe();return function(){var n=jp(e),r;if(t){var i=jp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pGe(this,r)}}function pGe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dGe(e)}function dGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jp(e){return jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jp(e)}let O$=function(e){hGe(n,e);var t=fGe(n);function n(r,i){var o;oGe(this,n),o=t.call(this,r,i);const{dataConfig:a,animate:s,pubSub:u}=r;o.searchField=null,o.chromInfo=null,o.animate=s;const c=a.server,l=a.tilesetUid,f=`${c}/chrom-sizes/?id=${l}`;return Bs(f,h=>{o.chromInfo=h,o.searchField=new Lp(o.chromInfo),o.draw(),o.texts=[];for(let p=0;p<o.chromInfo.cumPositions.length;p++){const d=[];for(let m=0;m<o.chromInfo.cumPositions.length;m++){const g=`${o.chromInfo.cumPositions[p].chr}/${o.chromInfo.cumPositions[m].chr}`,v=new Ue.PIXI.Text(g,{fontSize:"14px",fontFamily:"Arial",fill:"red"});v.anchor.x=.5,v.anchor.y=.5,v.visible=!1,v.hashValue=Math.random(),d.push(v),o.pMain.addChild(v)}o.texts.push(d)}o.draw(),o.animate()},u),o}return sGe(n,[{key:"draw",value:function(){const r=[];if(!this.texts||!this.searchField)return;const i=pn(this._xScale.domain()[0],this.chromInfo),o=pn(this._xScale.domain()[1],this.chromInfo),a=pn(this._yScale.domain()[0],this.chromInfo),s=pn(this._yScale.domain()[1],this.chromInfo);for(let u=0;u<this.texts.length;u++)for(let c=0;c<this.texts.length;c++)this.texts[u][c].visible=!1;for(let u=i[3];u<=o[3];u++)for(let c=a[3];c<=s[3];c++){const l=this.chromInfo.cumPositions[u],f=this.chromInfo.cumPositions[c],h=l.pos+this.chromInfo.chromLengths[l.chr]/2,p=f.pos+this.chromInfo.chromLengths[f.chr]/2,d=this._xScale(h),m=this._yScale(p),g=this.texts[u][c];g.x=d,g.y=m,g.updateTransform();const v=g.getBounds(),b=v.width/2,y=v.height/2;d+b>this.dimensions[0]?g.x-=d+b-this.dimensions[0]:d-b<0&&(g.x-=d-b),m+y>this.dimensions[1]?g.y-=m+y-this.dimensions[1]:m-y<0&&(g.y-=m-y),g.visible=!0,r.push({importance:this.texts[u][c].hashValue,text:this.texts[u][c],caption:null})}this.hideOverlaps(r)}},{key:"hideOverlaps",value:function(r){let i=[];i=r.map(o=>{const a=o.text;a.updateTransform();const s=a.getBounds();return[s.x,s.y,s.x+s.width,s.y+s.height]}),fv(i,(o,a)=>{r[o].importance>r[a].importance?r[a].text.visible=0:r[o].text.visible=0})}},{key:"setPosition",value:function(r){P0(jp(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}}]),n}(Ai);function gGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yGe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bGe(r.key),r)}}function vGe(e,t,n){return t&&yGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bGe(e){var t=_Ge(e,"string");return typeof t=="symbol"?t:String(t)}function _Ge(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Hf(){return typeof Reflect<"u"&&Reflect.get?Hf=Reflect.get.bind():Hf=function(e,t,n){var r=TGe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Hf.apply(this,arguments)}function TGe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ul(e),e!==null););return e}function EGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$I(e,t)}function $I(e,t){return $I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$I(e,t)}function SGe(e){var t=OGe();return function(){var n=Ul(e),r;if(t){var i=Ul(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wGe(this,r)}}function wGe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AGe(e)}function AGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ul(e){return Ul=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ul(e)}let Mm=function(e){EGe(n,e);var t=SGe(n);function n(r,i){var o;gGe(this,n),o=t.call(this,r,i);const{chromInfoPath:a,dataConfig:s,animate:u,pubSub:c,orientation:l="2d",isOverlay:f=!1}=r;o.searchField=null,o.chromInfo=null,o.animate=u,o.orientation=l,o.isOverlay=f;let h=a;return h||(h=`${s.server}/chrom-sizes/?id=${s.tilesetUid}`),Bs(h,p=>{o.chromInfo=p,o.searchField=new Lp(o.chromInfo),o.texts=[],o.lineGraphics=new Ue.PIXI.Graphics,o.lineGraphics1dH=new Ue.PIXI.Graphics,o.lineGraphics1dV=new Ue.PIXI.Graphics,o.lineGraphics2d=new Ue.PIXI.Graphics,o.mask1dH=new Ue.PIXI.Graphics,o.mask1dV=new Ue.PIXI.Graphics,o.mask2d=new Ue.PIXI.Graphics,o.lineGraphics.addChild(o.lineGraphics1dH),o.lineGraphics1dH.addChild(o.mask1dH),o.lineGraphics.addChild(o.lineGraphics1dV),o.lineGraphics1dV.addChild(o.mask1dV),o.lineGraphics.addChild(o.lineGraphics2d),o.lineGraphics2d.addChild(o.mask2d),o.pMain.addChild(o.lineGraphics),o.draw(),o.animate()},c),o}return vGe(n,[{key:"drawLines",value:function(r=this.orientation,i=0,o=0){let a=this.lineGraphics;this.isOverlay&&r==="1d-horizontal"&&(a=this.lineGraphics1dH),this.isOverlay&&r==="1d-vertical"&&(a=this.lineGraphics1dV),this.isOverlay&&r==="2d"&&(a=this.lineGraphics2d);const s=ct(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),u=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;a.lineStyle(u,s,1),(r==="2d"||r==="1d-horizontal")&&(a.moveTo(this._xScale(0)+i,o),a.lineTo(this._xScale(0)+i,this.dimensions[1]+o)),(r==="2d"||r==="1d-vertical")&&(a.moveTo(i,this._yScale(0)+o),a.lineTo(this.dimensions[0]+i,this._yScale(0)+o));for(let c=0;c<this.chromInfo.cumPositions.length;c++){const l=this.chromInfo.cumPositions[c],f=l.pos+ +this.chromInfo.chromLengths[l.chr]+1;(r==="2d"||r==="1d-horizontal")&&(a.moveTo(this._xScale(f)+i,o),a.lineTo(this._xScale(f)+i,this.dimensions[1]+o)),(r==="2d"||r==="1d-vertical")&&(a.moveTo(i,this._yScale(f)+o),a.lineTo(this.dimensions[0]+i,this._yScale(f)+o))}}},{key:"draw",value:function(){if(this.texts&&this.searchField)if(this.lineGraphics.clear(),this.isOverlay){this.lineGraphics1dH.clear(),this.lineGraphics1dV.clear(),this.lineGraphics2d.clear(),this.mask1dH.clear(),this.mask1dV.clear(),this.mask2d.clear(),this.mask1dH.beginFill(16777215),this.mask1dV.beginFill(16777215),this.mask2d.beginFill(16711680);for(let r=0;r<this.options.orientationsAndPositions.length;r++){const i=this.options.orientationsAndPositions[r].orientation,{left:o,top:a,width:s,height:u}=this.options.orientationsAndPositions[r].position;i==="1d-horizontal"&&this.mask1dH.drawRect(o,a,s,u),i==="1d-vertical"&&this.mask1dV.drawRect(o,a,s,u),i==="2d"&&this.mask2d.drawRect(o,a,s,u),this.drawLines(i,o,a)}this.lineGraphics1dH.mask=this.mask1dH,this.lineGraphics1dV.mask=this.mask1dV,this.lineGraphics2d.mask=this.mask2d}else this.drawLines()}},{key:"setPosition",value:function(r){Hf(Ul(n.prototype),"setPosition",this).call(this,r),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}},{key:"createSvgLine",value:function(r,i,o,a,s,u){const c=document.createElement("line");return c.setAttribute("x1",r),c.setAttribute("x2",i),c.setAttribute("y1",o),c.setAttribute("y2",a),c.setAttribute("stroke",s),c.setAttribute("stroke-width",u),c}},{key:"drawLinesSvg",value:function(r,i,o,a,s=0,u=0){const c=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue",l=this.options.lineStrokeWidth;if(i==="2d"||i==="1d-vertical"){const f=this._yScale(0);f>0&&f<u+a&&r.appendChild(this.createSvgLine(s,o+s,f+u,f+u,c,l))}if(i==="2d"||i==="1d-horizontal"){const f=this._xScale(0);f>0&&f<s+o&&r.appendChild(this.createSvgLine(f+s,f+s,u,a+u,c,l))}for(let f=0;f<this.chromInfo.cumPositions.length;f++){const h=this.chromInfo.cumPositions[f],p=h.pos+ +this.chromInfo.chromLengths[h.chr]+1;if(i==="2d"||i==="1d-vertical"){const d=this._yScale(p);d>0&&d<u+a&&r.appendChild(this.createSvgLine(s,o+s,d+u,d+u,c,l))}if(i==="2d"||i==="1d-horizontal"){const d=this._xScale(p);d>0&&d<s+o&&r.appendChild(this.createSvgLine(d+s,d+s,u,a+u,c,l))}}}},{key:"exportSVG",value:function(){let r=null,i=null;Hf(Ul(n.prototype),"exportSVG",this)?[i,r]=Hf(Ul(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");if(r.appendChild(o),i.setAttribute("id","ChromosomeGrid"),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),!this.chromInfo)return[i,r];if(this.isOverlay)for(let a=0;a<this.options.orientationsAndPositions.length;a++){const s=this.options.orientationsAndPositions[a].orientation,{left:u,top:c,width:l,height:f}=this.options.orientationsAndPositions[a].position;this.drawLinesSvg(o,s,l,f,u,c)}else this.drawLinesSvg(o,this.orientation,...this.dimensions);return[i,r]}}]),n}(Ai);function kGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xGe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CGe(r.key),r)}}function IGe(e,t,n){return t&&xGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CGe(e){var t=PGe(e,"string");return typeof t=="symbol"?t:String(t)}function PGe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kg(){return typeof Reflect<"u"&&Reflect.get?kg=Reflect.get.bind():kg=function(e,t,n){var r=DGe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},kg.apply(this,arguments)}function DGe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Nc(e),e!==null););return e}function RGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KI(e,t)}function KI(e,t){return KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},KI(e,t)}function NGe(e){var t=jGe();return function(){var n=Nc(e),r;if(t){var i=Nc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return MGe(this,r)}}function MGe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LGe(e)}function LGe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nc(e){return Nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nc(e)}const BGe=300;let k$=function(e){RGe(n,e);var t=NGe(n);function n(r,i){var o;kGe(this,n),o=t.call(this,r,i);const{chromInfoPath:a,pubSub:s}=r;return o.pubSub=s,o.rects={},Bs(a,u=>{o.chromInfo=u,o.draw()},o.pubSub),o}return IGe(n,[{key:"draw",value:function(){if(!this.chromInfo)return;const r=this.options.minRectWidth?this.options.minRectWidth:10,i=this.options.minRectWidth?this.options.minRectHeight:10;kg(Nc(n.prototype),"draw",this).call(this);const o=this.pMain;o.clear();const a=performance.now();this.options.regions.forEach(s=>{const u=s.slice(0,6).join("-");this.rects[u]||(this.rects[u]={graphics:new Ue.PIXI.Graphics},o.addChild(this.rects[u].graphics)),this.rects[u].timeStamp=a;const c=fn(s[6]);let l=fn(s[7]);l||(l=c);const f=Ue.PIXI.utils.rgb2hex([c.r/255,c.g/255,c.b/255]),h=Ue.PIXI.utils.rgb2hex([l.r/255,l.g/255,l.b/255]);o.lineStyle(1,h,l.opacity),o.beginFill(f,c.opacity);let p=this._xScale(this.chromInfo.chrPositions[s[0]].pos+ +s[1]);const d=this._xScale(this.chromInfo.chrPositions[s[0]].pos+ +s[2]);let m=this._yScale(this.chromInfo.chrPositions[s[3]].pos+ +s[4]);const g=this._yScale(this.chromInfo.chrPositions[s[3]].pos+ +s[5]);let v=d-p,b=g-m;const y=typeof s[8]<"u"?s[8]:r,_=typeof s[9]<"u"?s[9]:i;v<y&&(p=(p+d)/2-y/2,v=y),b<_&&(m=(m+g)/2-_/2,b=_),o.drawRect(p,m,v,b),this.rects[u].graphics.clear(),this.rects[u].graphics.interactive=!0,this.rects[u].graphics.buttonMode=!0,this.rects[u].graphics.hitArea=new Ue.PIXI.Rectangle(p,m,v,b),this.rects[u].graphics.mousedown=()=>{this.rects[u].mouseDownTime=performance.now()},this.rects[u].graphics.mouseup=T=>{performance.now()-this.rects[u].mouseDownTime<BGe&&this.pubSub.publish("app.click",{type:"annotation",event:T,payload:s})}})}},{key:"setPosition",value:function(r){kg(Nc(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}}]),n}(Ai);function FGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GGe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UGe(r.key),r)}}function HGe(e,t,n){return t&&GGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UGe(e){var t=zGe(e,"string");return typeof t=="symbol"?t:String(t)}function zGe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $u(){return typeof Reflect<"u"&&Reflect.get?$u=Reflect.get.bind():$u=function(e,t,n){var r=VGe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},$u.apply(this,arguments)}function VGe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=ws(e),e!==null););return e}function YGe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QI(e,t)}function QI(e,t){return QI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},QI(e,t)}function XGe(e){var t=qGe();return function(){var n=ws(e),r;if(t){var i=ws(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return WGe(this,r)}}function WGe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x$(e)}function x$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qGe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ws(e){return ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ws(e)}const $Ge=200,KGe=6,QGe=2,SG=7829367;let I$=function(e){YGe(n,e);var t=XGe(n);function n(r,i){var o;FGe(this,n),o=t.call(this,r,i);const{dataConfig:a,animate:s,chromInfoPath:u,isShowGlobalMousePosition:c}=r;o.searchField=null,o.chromInfo=null,o.dataConfig=a,o.pTicks=new Ue.PIXI.Graphics,o.pMain.addChild(o.pTicks),o.gTicks={},o.tickTexts={},o.options=i,o.isShowGlobalMousePosition=c,o.textFontSize=12,o.textFontFamily="Arial",o.textFontColor="#808080",o.textStrokeColor=o.getTheme()===wr?"#000000":"#ffffff",o.pixiTextConfig={fontSize:+o.options.fontSize?`${+o.options.fontSize}px`:`${o.textFontSize}px`,fontFamily:o.textFontFamily,fill:o.options.color||o.textFontColor,lineJoin:"round",stroke:o.options.stroke||o.textStrokeColor,strokeThickness:2},o.stroke=ct(o.pixiTextConfig.stroke),o.tickWidth=$Ge,o.tickHeight=KGe,o.tickTextSeparation=QGe,o.tickColor=o.options.tickColor?ct(o.options.tickColor):SG,o.animate=s,o.pubSubs=[],o.options.showMousePosition&&!o.hideMousePosition&&(o.hideMousePosition=gc(x$(o),o.is2d,o.isShowGlobalMousePosition()));let l=u;return l||(l=`${a.server}/chrom-sizes/?id=${a.tilesetUid}`),Bs(l,f=>{o.chromInfo=f,o.searchField=new Lp(o.chromInfo),o.rerender(o.options,!0),o.draw(),o.animate()},o.pubSub),o}return HGe(n,[{key:"initBoundsTicks",value:function(){this.pTicks&&(this.pMain.removeChild(this.pTicks),this.pTicks=null),this.gBoundTicks||(this.gBoundTicks=new Ue.PIXI.Graphics,this.leftBoundTick=new Ue.PIXI.Text("",this.pixiTextConfig),this.rightBoundTick=new Ue.PIXI.Text("",this.pixiTextConfig),this.gBoundTicks.addChild(this.leftBoundTick),this.gBoundTicks.addChild(this.rightBoundTick),this.pMain.addChild(this.gBoundTicks)),this.texts=[]}},{key:"initChromLabels",value:function(){if(this.chromInfo){this.gBoundTicks&&(this.pMain.removeChild(this.gBoundTicks),this.gBoundTicks=null),this.pTicks||(this.pTicks=new Ue.PIXI.Graphics,this.pMain.addChild(this.pTicks)),this.texts=[],this.pTicks.removeChildren();for(let r=0;r<this.chromInfo.cumPositions.length;r++){const i=this.chromInfo.cumPositions[r].chr;this.gTicks[i]=new Ue.PIXI.Graphics,this.tickTexts[i]||(this.tickTexts[i]=[]);const o=new Ue.PIXI.Text(i,this.pixiTextConfig);o.hashValue=Math.random(),this.pTicks.addChild(o),this.pTicks.addChild(this.gTicks[i]),this.texts.push(o)}}}},{key:"rerender",value:function(r,i){const o=JSON.stringify(r);!i&&o===this.prevOptions||(this.prevOptions=o,this.options=r,this.tickTexts={},this.pixiTextConfig.fontSize=+this.options.fontSize?`${+this.options.fontSize}px`:this.pixiTextConfig.fontSize,this.pixiTextConfig.fill=this.options.color||this.pixiTextConfig.fill,this.pixiTextConfig.stroke=this.options.stroke||this.pixiTextConfig.stroke,this.stroke=ct(this.pixiTextConfig.stroke),this.tickColor=this.options.tickColor?ct(this.options.tickColor):SG,this.options.tickPositions==="ends"?this.initBoundsTicks():this.initChromLabels(),$u(ws(n.prototype),"rerender",this).call(this,r,i),this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=gc(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"formatTick",value:function(r){const i=this._xScale.domain(),o=i[1]-i[0],a=ed(r,o),s=no(","),u=Wc(`,.${a}`,o);let c=s;return this.options.tickFormat==="si"?c=u:this.options.tickFormat==="plain"?c=s:this.options.tickPositions==="ends"&&(c=u),c(r)}},{key:"drawBoundsTicks",value:function(r,i){const o=this.gBoundTicks;o.clear(),o.lineStyle(1,0);const a=this.options.reverseOrientation?0:this.dimensions[1],s=this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight;o.moveTo(1,a),o.lineTo(1,s),o.moveTo(this.dimensions[0]-1,a),o.lineTo(this.dimensions[0]-1,s),this.leftBoundTick.x=0,this.leftBoundTick.y=this.options.reverseOrientation?s+this.tickTextSeparation:s-this.tickTextSeparation,this.leftBoundTick.text=`${r[0]}: ${this.formatTick(r[1])}`,this.leftBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.x=this.dimensions[0],this.rightBoundTick.text=`${i[0]}: ${this.formatTick(i[1])}`,this.rightBoundTick.y=this.options.reverseOrientation?s+this.tickTextSeparation:s-this.tickTextSeparation,this.rightBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.anchor.x=1,this.flipText&&(this.leftBoundTick.scale.x=-1,this.leftBoundTick.anchor.x=1,this.rightBoundTick.scale.x=-1,this.rightBoundTick.anchor.x=0),this.leftBoundTick.tickLine=[1,this.dimensions[1],1,this.dimensions[1]-this.tickHeight],this.rightBoundTick.tickLine=[this.dimensions[0]-1,this.dimensions[1],this.dimensions[0]-1,this.dimensions[1]-this.tickHeight],this.tickTexts={},this.tickTexts.all=[this.leftBoundTick,this.rightBoundTick]}},{key:"drawTicks",value:function(r){const i=this.gTicks[r.chr];i.visible=!0,i.clear();const o=+this.chromInfo.chromLengths[r.chr],a=Math.max(this._xScale(r.pos),0),s=Math.min(this._xScale(r.pos+o),this.dimensions[0]),u=(s-a)/this.tickWidth,c=kt().domain([Math.max(1,this._xScale.invert(0)-r.pos),Math.min(o,this._xScale.invert(this.dimensions[0])-r.pos)]).range(a,s).ticks(u).filter(g=>Number.isInteger(g)),l=this.tickTexts[r.chr],f=this.options.fontIsLeftAligned?(+this.options.fontSize||this.textFontSize)/2:this.tickHeight,h=this.flipText?-1:1,p=this.options.fontIsLeftAligned?h*4:0;let d=this.options.fontIsLeftAligned?0:f+this.tickTextSeparation;for(this.options.reverseOrientation&&(d=this.dimensions[1]-d);l.length<c.length;){const g=new Ue.PIXI.Text("",this.pixiTextConfig);l.push(g),this.gTicks[r.chr].addChild(g)}for(;l.length>c.length;){const g=l.pop();this.gTicks[r.chr].removeChild(g)}let m=0;for(;m<c.length;){l[m].visible=!0,l[m].anchor.x=this.options.fontIsLeftAligned?0:.5,l[m].anchor.y=this.options.reverseOrientation?0:1,this.flipText&&(l[m].scale.x=-1),l[m].x=this._xScale(r.pos+c[m])+p,l[m].y=this.dimensions[1]-d,l[m].text=c[m]===0?`${r.chr}: 1`:`${r.chr}: ${this.formatTick(c[m])}`;const g=this._xScale(r.pos+c[m]);l[m].tickLine=[g-1,this.dimensions[1],g-1,this.dimensions[1]-f-1];const v=this.options.reverseOrientation?0:this.dimensions[1],b=this.options.reverseOrientation?f:this.dimensions[1]-f;i.lineStyle(1,this.stroke),i.moveTo(g-1,v),i.lineTo(g-1,b-1),this.options.fontIsLeftAligned?(i.lineTo(g+2*h+1*h,b-1),i.lineTo(g+2*h+1*h,b+1),i.lineTo(g+1,b+1)):i.lineTo(g+1,b-1),i.lineTo(g+1,v),i.lineStyle(1,this.tickColor),i.moveTo(g,v),i.lineTo(g,b),this.options.fontIsLeftAligned&&i.lineTo(g+2*h,b),m+=1}for(;m<l.length;)l[m].visible=!1,m+=1;return c.length}},{key:"draw",value:function(){if(this.allTexts=[],!this.texts||!this.searchField)return;const r=pn(this._xScale.domain()[0],this.chromInfo),i=pn(this._xScale.domain()[1],this.chromInfo);if(!r||!i){console.warn("Empty chromInfo:",this.dataConfig,this.chromInfo);return}if(this.options.tickPositions==="ends"){if(!this.gBoundTicks)return;this.gBoundTicks.visible=!0,this.drawBoundsTicks(r,i);return}if(!this.pTicks)return;for(let a=0;a<this.texts.length;a++)this.texts[a].visible=!1,this.gTicks[this.chromInfo.cumPositions[a].chr].visible=!1;let o=this.options.fontIsLeftAligned?0:this.tickHeight+this.tickTextSeparation;this.options.reverseOrientation&&(o=this.dimensions[1]-o),Object.keys(this.chromInfo.chrPositions).forEach(a=>{if(this.tickTexts[a])for(let s=0;s<this.tickTexts[a].length;s++)this.tickTexts[a][s].visible=!1});for(let a=r[3];a<=i[3];a++){const s=this.chromInfo.cumPositions[a],u=s.pos+this.chromInfo.chromLengths[s.chr]/2,c=this._xScale(u),l=this.texts[a];l.anchor.x=this.options.fontIsLeftAligned?0:.5,l.anchor.y=this.options.reverseOrientation?0:1,l.x=c,l.y=this.dimensions[1]-o,l.updateTransform(),this.flipText&&(l.scale.x=-1);const f=this.drawTicks(s);l.visible=f<=0,this.allTexts.push({importance:l.hashValue,text:l,caption:null})}this.hideOverlaps(this.allTexts)}},{key:"hideOverlaps",value:function(r){let i=[];i=r.map(({text:o},a)=>{o.updateTransform();const s=o.getBounds();return[s.x,s.y,s.x+s.width,s.y+s.height]}),fv(i,(o,a)=>{r[o].importance>r[a].importance?r[a].text.visible=!1:r[o].text.visible=!1})}},{key:"setPosition",value:function(r){$u(ws(n.prototype),"setPosition",this).call(this,r),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}},{key:"exportSVG",value:function(){let r=null,i=null;$u(ws(n.prototype),"exportSVG",this)?[i,r]=$u(ws(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i),i.setAttribute("class","chromosome-labels");const o=document.createElement("g");return r.appendChild(o),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.allTexts.filter(a=>a.text.visible).forEach(a=>{const s=px(a.text);o.appendChild(s)}),Object.values(this.tickTexts).forEach(a=>{a.filter(s=>s.visible).forEach(s=>{let u=px(s);o.appendChild(u),u=Y9(s.x,this.options.reverseOrientation?0:this.dimensions[1],s.x,this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight,1,this.tickColor);const c=document.createElement("line");c.setAttribute("x1",s.tickLine[0]),c.setAttribute("y1",s.tickLine[1]),c.setAttribute("x2",s.tickLine[2]),c.setAttribute("y2",s.tickLine[3]),c.setAttribute("style","stroke: grey"),o.appendChild(u),o.appendChild(c)})}),[i,r]}}]),n}(Ai);function ZGe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JGe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tHe(r.key),r)}}function eHe(e,t,n){return t&&JGe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tHe(e){var t=rHe(e,"string");return typeof t=="symbol"?t:String(t)}function rHe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function xl(){return typeof Reflect<"u"&&Reflect.get?xl=Reflect.get.bind():xl=function(e,t,n){var r=nHe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},xl.apply(this,arguments)}function nHe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Aa(e),e!==null););return e}function iHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZI(e,t)}function ZI(e,t){return ZI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ZI(e,t)}function oHe(e){var t=lHe();return function(){var n=Aa(e),r;if(t){var i=Aa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return aHe(this,r)}}function aHe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sHe(e)}function sHe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Aa(e){return Aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Aa(e)}let C$=function(e){iHe(n,e);var t=oHe(n);function n(r,i){var o;ZGe(this,n),o=t.call(this,r,i);const{animate:a}=r;return o.pMain=o.pMobile,o.colorScale=hp,o.continuousScaling=!1,i&&i.colorRange&&(o.colorScale=$l(i.colorRange)),o.animate=a,o.options=i,o.pubSubs=[],o}return eHe(n,[{key:"rerender",value:function(r,i){xl(Aa(n.prototype),"rerender",this).call(this,r,i),this.zoomed(this.xScale(),this.yScale(),this.pMain.scale.x,this.pMain.position.x,this.pMain.position.y)}},{key:"calculateZoomLevel",value:function(){let r=null;if(this.tilesetInfo.resolutions){const i=et.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),o=et.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);r=Math.min(i,o)}else{const i=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),o=et.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);r=Math.max(i,o),r=Math.min(r,this.maxZoom)}return this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?r=Math.min(this.options.maxZoom,r):console.error("Invalid maxZoom on track:",this)),r}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const r=this._xScale.copy();if(r.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.tilesetInfo.resolutions){const c=this.tilesetInfo.resolutions.map(l=>+l).sort((l,f)=>f-l);this.xTiles=et.calculateTilesFromResolution(c[this.zoomLevel],r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=et.calculateTilesFromResolution(c[this.zoomLevel],r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=et.calculateTiles(this.zoomLevel,r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=et.calculateTiles(this.zoomLevel,r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const i=this.xTiles,o=this.yTiles,a=this.zoomLevel,s=this.tilesetInfo.max_width/2**a,u=[];for(let c=0;c<i.length;c++)for(let l=c;l<o.length;l++){if((l-c-2)*(this._xScale(s)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const f=[a,i[c],o[l]];f.mirrored=!1,f.dataTransform=this.options.dataTransform?this.options.dataTransform:"default",u.push(f)}this.setVisibleTiles(u)}},{key:"tileDataToCanvas",value:function(r){const i=document.createElement("canvas");i.width=256,i.height=256;const o=i.getContext("2d");o.fillStyle="transparent",o.fillRect(0,0,i.width,i.height);const a=new ImageData(r,i.width,i.height);return o.putImageData(a,0,0),i}},{key:"setSpriteProperties",value:function(r,i,o,a){const{tileX:s,tileY:u,tileWidth:c,tileHeight:l}=this.getTilePosAndDimensions(i,o),f=s+c,h=u+l;r.width=this._refXScale(f)-this._refXScale(s),r.height=this._refYScale(h)-this._refYScale(u),r.x=this._refXScale(s),r.y=this._refYScale(u)}},{key:"pixDataFunction",value:function(r,i){if(i){const o=r.graphics,a=this.tileDataToCanvas(i.pixData),s=Ue.PIXI.VERSION[0]==="4"?Ue.PIXI.Texture.fromCanvas(a,Ue.PIXI.SCALE_MODES.NEAREST):Ue.PIXI.Texture.from(a,{scaleMode:Ue.PIXI.SCALE_MODES.NEAREST});r.sprite=new Ue.PIXI.Sprite(s),r.canvas=a,this.setSpriteProperties(r.sprite,r.tileData.zoomLevel,r.tileData.tilePos,r.mirrored),o.pivot.x=this._refXScale(0),o.pivot.y=this._refYScale(0),o.scale.x=-1/Math.sqrt(2),o.rotation=-3*Math.PI/4,o.scale.y=1/Math.sqrt(2),o.position.x=this._refXScale(0),o.position.y=0,o.removeChildren(),o.addChild(r.sprite)}this.renderingTiles.delete(r.tileId)}},{key:"refScalesChanged",value:function(r,i){xl(Aa(n.prototype),"refScalesChanged",this).call(this,r,i);for(const o in this.fetchedTiles){const a=this.fetchedTiles[o];if(a.sprite){this.setSpriteProperties(a.sprite,a.tileData.zoomLevel,a.tileData.tilePos,a.mirrored);const s=a.graphics;s.pivot.x=this._refXScale(0),s.pivot.y=this._refYScale(0),s.scale.x=-1/Math.sqrt(2),s.rotation=-3*Math.PI/4,s.scale.y=1/Math.sqrt(2),s.position.x=this._refXScale(0),s.position.y=0}}}},{key:"zoomed",value:function(r,i,o,a,s){xl(Aa(n.prototype),"zoomed",this).call(this,r,i,o,a,s),xl(Aa(n.prototype),"draw",this).call(this),this.pMain.position.x=a,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=o,this.pMain.scale.y=o,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-o,this.pMain.position.y=this.position[1])}},{key:"leftTrackDraw",value:function(){this.draw()}},{key:"exportSVG",value:function(){let r=null,i=null;[i,r]=xl(Aa(n.prototype),"superSVG",this).call(this);const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const s of this.visibleAndFetchedTiles()){const u=document.createElement("g"),c=s.graphics,l=c.rotation*180/Math.PI,f=`translate(${c.position.x},${c.position.y}) rotate(${l}) scale(${c.scale.x},${c.scale.y}) translate(${-c.pivot.x},${-c.pivot.y})`;u.setAttribute("transform",f);const h=s.sprite.rotation*180/Math.PI,p=document.createElement("g");p.setAttribute("transform",`translate(${s.sprite.x},${s.sprite.y}) rotate(${h}) scale(${s.sprite.scale.x},${s.sprite.scale.y})`);const d=document.createElement("image");d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.canvas.toDataURL()),d.setAttribute("width",256),d.setAttribute("height",256),p.appendChild(d),u.appendChild(p),o.appendChild(u)}const a=this.exportColorBarSVG();return r.appendChild(a),[i,i]}}]),n}(hv);function uHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cHe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fHe(r.key),r)}}function hHe(e,t,n){return t&&cHe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fHe(e){var t=pHe(e,"string");return typeof t=="symbol"?t:String(t)}function pHe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function dHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JI(e,t)}function JI(e,t){return JI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},JI(e,t)}function mHe(e){var t=vHe();return function(){var n=hT(e),r;if(t){var i=hT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gHe(this,r)}}function gHe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yHe(e)}function yHe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hT(e){return hT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hT(e)}let wG=function(e){dHe(n,e);var t=mHe(n);function n(r,i){var o;return uHe(this,n),o=t.call(this,r,i),o.tilesetInfo={},o.errorTextText=`Unknown track type: ${i.type}`,o}return hHe(n,[{key:"zoomed",value:function(){this.draw()}}]),n}(Ai);function bHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,EHe(r.key),r)}}function THe(e,t,n){return t&&_He(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EHe(e){var t=SHe(e,"string");return typeof t=="symbol"?t:String(t)}function SHe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function wHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eC(e,t)}function eC(e,t){return eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},eC(e,t)}function AHe(e){var t=kHe();return function(){var n=fT(e),r;if(t){var i=fT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return OHe(this,r)}}function OHe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P$(e)}function P$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fT(e){return fT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fT(e)}let D$=function(e){wHe(n,e);var t=AHe(n);function n(r,i){var o;return bHe(this,n),o=t.call(this,r,i),o.axis=new uS(P$(o)),o.pBase.addChild(o.axis.pAxis),o}return THe(n,[{key:"initTile",value:function(r){this.scale.minRawValue=this.minVisibleValueInTiles(),this.scale.maxRawValue=this.minVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue,this.drawTile(r)}},{key:"drawTile",value:function(r){if(!r.graphics)return;const i=r.graphics,o=6,a=4;i.clear(),this.valueScale=eu().domain([this.minValue()+.01,this.maxValue()]).range([this.dimensions[1]-o/2,o/2]);const s=ct("black");i.lineStyle(1,s,.3),i.beginFill(s,.3),this.drawAxis(this.valueScale),r.tileData.forEach(u=>{const c=u.fields,l=+u.chrOffset,f=+c[1]+l,h=+c[2]+l,p=+c[3],d=this._xScale(f),m=this._xScale(h),g=Math.max(m-d,a),v=this.valueScale(p),b=(m+d)/2;i.drawRect(b-g/2,v-o/2,g,o)})}},{key:"minVisibleValueInTiles",value:function(){let r=this.visibleAndFetchedIds();return r.length===0&&(r=Object.keys(this.fetchedTiles)),Math.min.apply(null,r.map(i=>+Math.min(...this.fetchedTiles[i].tileData.filter(o=>!Number.isNaN(o.fields[3])).map(o=>+o.fields[3]))))}},{key:"maxVisibleValueInTiles",value:function(){let r=this.visibleAndFetchedIds();return r.length===0&&(r=Object.keys(this.fetchedTiles)),Math.max.apply(null,r.map(i=>+Math.max(...this.fetchedTiles[i].tileData.filter(o=>!Number.isNaN(o.fields[3])).map(o=>+o.fields[3]))))}}]),n}(Ed);function xHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IHe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PHe(r.key),r)}}function CHe(e,t,n){return t&&IHe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PHe(e){var t=DHe(e,"string");return typeof t=="symbol"?t:String(t)}function DHe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Uf(){return typeof Reflect<"u"&&Reflect.get?Uf=Reflect.get.bind():Uf=function(e,t,n){var r=RHe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Uf.apply(this,arguments)}function RHe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=zl(e),e!==null););return e}function NHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tC(e,t)}function tC(e,t){return tC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},tC(e,t)}function MHe(e){var t=jHe();return function(){var n=zl(e),r;if(t){var i=zl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return LHe(this,r)}}function LHe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rC(e)}function rC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zl(e){return zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zl(e)}let R$=function(e){NHe(n,e);var t=MHe(n);function n(r,i){var o;xHe(this,n),o=t.call(this,r,i);const{registerViewportChanged:a,removeViewportChanged:s,setDomainsCallback:u}=r,c=zt.nice();return o.uid=c,o.options=i,o.hasFromView=!r.projectionXDomain||!r.projectionYDomain,o.removeViewportChanged=s,o.setDomainsCallback=u,o.viewportXDomain=o.hasFromView?null:r.projectionXDomain,o.viewportYDomain=o.hasFromView?null:r.projectionYDomain,o.brush=gR().on("brush",o.brushed.bind(rC(o))),o.gBrush=o.gMain.append("g").attr("id",`brush-${o.uid}`).call(o.brush),o.gBrush.selectAll(".overlay").style("pointer-events","none"),o.gBrush.selectAll(".handle--n").style("pointer-events","none"),o.gBrush.selectAll(".handle--s").style("pointer-events","none"),o.gBrush.selectAll(".handle--w").style("pointer-events","none"),o.gBrush.selectAll(".handle--e").style("pointer-events","none"),a(c,o.viewportChanged.bind(rC(o))),o.rerender(),o.draw(),o}return CHe(n,[{key:"brushed",value:function(r){const i=r.selection;if(!this._xScale||!this._yScale)return;const o=[this._xScale.invert(i[0][0]),this._xScale.invert(i[1][0])],a=[this._yScale.invert(i[0][1]),this._yScale.invert(i[1][1])];this.hasFromView||(this.viewportXDomain=o,this.viewportYDomain=a),this.setDomainsCallback(o,a)}},{key:"viewportChanged",value:function(r,i){const o=r.domain(),a=i.domain();this.viewportXDomain=o,this.viewportYDomain=a,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),Uf(zl(n.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const r=this._xScale(this.viewportXDomain[0]),i=this._yScale(this.viewportYDomain[0]),o=this._xScale(this.viewportXDomain[1]),a=this._yScale(this.viewportYDomain[1]),s=[[r,i],[o,a]];this.brush.on("brush",null),this.gBrush.call(this.brush.move,s),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}},{key:"setPosition",value:function(r){Uf(zl(n.prototype),"setPosition",this).call(this,r),this.draw()}},{key:"setDimensions",value:function(r){Uf(zl(n.prototype),"setDimensions",this).call(this,r);const i=this._xScale.range(),o=this._yScale.range(),a=i[1]-i[0],s=o[1]-o[0];this.brush.extent([[i[0]-a,o[0]-s],[i[1]+a,o[1]+s]]),this.gBrush.call(this.brush),this.draw()}}]),n}(uh);function BHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FHe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HHe(r.key),r)}}function GHe(e,t,n){return t&&FHe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HHe(e){var t=UHe(e,"string");return typeof t=="symbol"?t:String(t)}function UHe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zf(){return typeof Reflect<"u"&&Reflect.get?zf=Reflect.get.bind():zf=function(e,t,n){var r=zHe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},zf.apply(this,arguments)}function zHe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Vl(e),e!==null););return e}function VHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nC(e,t)}function nC(e,t){return nC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},nC(e,t)}function YHe(e){var t=WHe();return function(){var n=Vl(e),r;if(t){var i=Vl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return XHe(this,r)}}function XHe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iC(e)}function iC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vl(e){return Vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vl(e)}let N$=function(e){VHe(n,e);var t=YHe(n);function n(r,i){var o;BHe(this,n),o=t.call(this,r,i);const{registerViewportChanged:a,removeViewportChanged:s,setDomainsCallback:u}=r,c=zt.nice();return o.uid=c,o.options=i,o.hasFromView=!r.projectionXDomain,o.removeViewportChanged=s,o.setDomainsCallback=u,o.viewportXDomain=o.hasFromView?null:r.projectionXDomain,o.viewportYDomain=o.hasFromView?null:[0,0],o.brush=g1().on("brush",o.brushed.bind(iC(o))),o.gBrush=o.gMain.append("g").attr("id",`brush-${o.uid}`).call(o.brush),o.gBrush.selectAll(".overlay").style("pointer-events","none"),o.gBrush.selectAll(".handle--ne").style("pointer-events","none"),o.gBrush.selectAll(".handle--nw").style("pointer-events","none"),o.gBrush.selectAll(".handle--sw").style("pointer-events","none"),o.gBrush.selectAll(".handle--se").style("pointer-events","none"),o.gBrush.selectAll(".handle--n").style("pointer-events","none"),o.gBrush.selectAll(".handle--s").style("pointer-events","none"),a(c,o.viewportChanged.bind(iC(o))),o.rerender(),o.draw(),o}return GHe(n,[{key:"brushed",value:function(r){const i=r.selection;if(!this._xScale||!this._yScale)return;const o=[this._xScale.invert(i[0]),this._xScale.invert(i[1])],a=this.viewportYDomain;this.hasFromView||(this.viewportXDomain=o),this.setDomainsCallback(o,a)}},{key:"viewportChanged",value:function(r,i,o=!0){const a=r.domain(),s=i.domain();this.viewportXDomain=a,this.viewportYDomain=s,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),zf(Vl(n.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const r=this._xScale(this.viewportXDomain[0]),i=this._xScale(this.viewportXDomain[1]),o=[r,i];this.brush.on("brush",null),this.gBrush.call(this.brush.move,o),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}},{key:"setPosition",value:function(r){zf(Vl(n.prototype),"setPosition",this).call(this,r),this.draw()}},{key:"setDimensions",value:function(r){zf(Vl(n.prototype),"setDimensions",this).call(this,r);const i=this._xScale.range(),o=this._yScale.range(),a=i[1]-i[0];this.brush.extent([[i[0]-a,o[0]],[i[1]+a,o[1]]]),this.gBrush.call(this.brush),this.draw()}}]),n}(uh);function qHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QHe(r.key),r)}}function KHe(e,t,n){return t&&$He(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function QHe(e){var t=ZHe(e,"string");return typeof t=="symbol"?t:String(t)}function ZHe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Vf(){return typeof Reflect<"u"&&Reflect.get?Vf=Reflect.get.bind():Vf=function(e,t,n){var r=JHe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Vf.apply(this,arguments)}function JHe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Yl(e),e!==null););return e}function eUe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oC(e,t)}function oC(e,t){return oC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},oC(e,t)}function tUe(e){var t=nUe();return function(){var n=Yl(e),r;if(t){var i=Yl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rUe(this,r)}}function rUe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aC(e)}function aC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nUe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yl(e){return Yl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yl(e)}let M$=function(e){eUe(n,e);var t=tUe(n);function n(r,i){var o;qHe(this,n),o=t.call(this,r,i);const{registerViewportChanged:a,removeViewportChanged:s,setDomainsCallback:u}=r,c=zt.nice();return o.uid=c,o.options=i,o.hasFromView=!r.projectionYDomain,o.removeViewportChanged=s,o.setDomainsCallback=u,o.viewportXDomain=o.hasFromView?null:[0,0],o.viewportYDomain=o.hasFromView?null:r.projectionYDomain,o.brush=Hy().on("brush",o.brushed.bind(aC(o))),o.gBrush=o.gMain.append("g").attr("id",`brush-${o.uid}`).call(o.brush),o.gBrush.selectAll(".overlay").style("pointer-events","none"),o.gBrush.selectAll(".handle--ne").style("pointer-events","none"),o.gBrush.selectAll(".handle--nw").style("pointer-events","none"),o.gBrush.selectAll(".handle--sw").style("pointer-events","none"),o.gBrush.selectAll(".handle--se").style("pointer-events","none"),o.gBrush.selectAll(".handle--e").style("pointer-events","none"),o.gBrush.selectAll(".handle--w").style("pointer-events","none"),a(c,o.viewportChanged.bind(aC(o))),o.rerender(),o.draw(),o}return KHe(n,[{key:"brushed",value:function(r){const i=r.selection;if(!this._xScale||!this._yScale)return;const o=this.viewportXDomain,a=[this._yScale.invert(i[0]),this._yScale.invert(i[1])];this.hasFromView||(this.viewportYDomain=a),this.setDomainsCallback(o,a)}},{key:"viewportChanged",value:function(r,i,o=!0){const a=r.domain(),s=i.domain();this.viewportXDomain=a,this.viewportYDomain=s,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),Vf(Yl(n.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const r=this._yScale(this.viewportYDomain[0]),i=this._yScale(this.viewportYDomain[1]),o=[r,i];this.brush.on("brush",null),this.gBrush.call(this.brush.move,o),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}},{key:"setPosition",value:function(r){Vf(Yl(n.prototype),"setPosition",this).call(this,r),this.draw()}},{key:"setDimensions",value:function(r){Vf(Yl(n.prototype),"setDimensions",this).call(this,r);const i=this._xScale.range(),o=this._yScale.range(),a=o[1]-o[0];this.brush.extent([[i[0],o[0]-a],[i[1],o[1]+a]]),this.gBrush.call(this.brush),this.draw()}}]),n}(uh);function AG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oUe(r.key),r)}}function OG(e,t,n){return t&&iUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oUe(e){var t=aUe(e,"string");return typeof t=="symbol"?t:String(t)}function aUe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}const sC="__mixwith_appliedMixin",lC="__mixwith_wrappedMixin",L$=e=>e[lC]||e,sUe=(e,t)=>{const n=t(e);return n.prototype[sC]=L$(t),n},lUe=(e,t)=>e.hasOwnProperty(sC)&&e[sC]===L$(t),uUe=(e,t)=>{for(;e!==null;){if(lUe(e,t))return!0;e=Object.getPrototypeOf(e)}return!1},u2=(e,t)=>(Object.setPrototypeOf(t,e),e[lC]||(e[lC]=e),t),yO="__mixwith_cachedApplications",cUe=e=>u2(e,t=>{let n=t[yO];n||(t[yO]=new Map,n=t[yO]);let r=n.get(e);return r||(r=e(t),n.set(e,r)),r}),hUe=e=>u2(e,t=>uUe(t.prototype,e)?t:e(t)),fUe=e=>u2(e,t=>sUe(t,e)),_S=e=>hUe(cUe(fUe(e)));let pUe=function(){function e(t){AG(this,e),this.superclass=t||function(){function n(){AG(this,n)}return OG(n)}()}return OG(e,[{key:"with",value:function(...t){return t.reduce((n,r)=>r(n),this.superclass)}}]),e}();const Sd=e=>new pUe(e);function dUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yUe(r.key),r)}}function gUe(e,t,n){return t&&mUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yUe(e){var t=vUe(e,"string");return typeof t=="symbol"?t:String(t)}function vUe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function xg(){return typeof Reflect<"u"&&Reflect.get?xg=Reflect.get.bind():xg=function(e,t,n){var r=bUe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},xg.apply(this,arguments)}function bUe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Mc(e),e!==null););return e}function _Ue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uC(e,t)}function uC(e,t){return uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},uC(e,t)}function TUe(e){var t=SUe();return function(){var n=Mc(e),r;if(t){var i=Mc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return EUe(this,r)}}function EUe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j$(e)}function j$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SUe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mc(e){return Mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mc(e)}const c2=_S(e=>function(t){_Ue(r,t);var n=TUe(r);function r(i,o){var a;dUe(this,r),a=n.call(this,i,o);const{animate:s}=i;return a.highlighted=!1,a.animate=s,a.MOUSEOVER_RADIUS=4,a.pubSub=i.pubSub,a.pubSubs.push(a.pubSub.subscribe("app.mouseMove",a.mouseMoveHandler.bind(j$(a)))),a}return gUe(r,[{key:"setPosition",value:function(i){xg(Mc(r.prototype),"setPosition",this).call(this,i),this.pMain.position.x=this.position[0],this.pMain.position.y=this.position[1]}},{key:"zoomed",value:function(i,o){xg(Mc(r.prototype),"zoomed",this).call(this,i,o),this.draw()}},{key:"respondsToPosition",value:function(){return this.highlighted}}]),r}(e));function Ig(){return typeof Reflect<"u"&&Reflect.get?Ig=Reflect.get.bind():Ig=function(e,t,n){var r=wUe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ig.apply(this,arguments)}function wUe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Lc(e),e!==null););return e}function B$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OUe(r.key),r)}}function F$(e,t,n){return t&&AUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OUe(e){var t=kUe(e,"string");return typeof t=="symbol"?t:String(t)}function kUe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function G$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cC(e,t)}function cC(e,t){return cC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},cC(e,t)}function H$(e){var t=CUe();return function(){var n=Lc(e),r;if(t){var i=Lc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xUe(this,r)}}function xUe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IUe(e)}function IUe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CUe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lc(e){return Lc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lc(e)}const PUe=_S(e=>function(t){G$(r,t);var n=H$(r);function r(){return B$(this,r),n.apply(this,arguments)}return F$(r,[{key:"drawHorizontalRule",value:function(i){let o=ct(this.options.color||"black");this.highlighted&&(o=ct("red")),i.lineStyle(this.strokeWidth,o,this.strokeOpacity);let a=0;for(;a<this.dimensions[0];)i.moveTo(a,this._yScale(this.yPosition)),i.lineTo(a+this.dashLength,this._yScale(this.yPosition)),a+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(i){return Math.abs(i.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}}]),r}(e));let U$=function(e){G$(n,e);var t=H$(n);function n(r,i){var o;return B$(this,n),o=t.call(this,r,i),o.yPosition=r.yPosition,o.strokeWidth=2,o.strokeOpacity=1,o.dashLength=5,o.dashGap=3,o}return F$(n,[{key:"mouseMoveHandler",value:function(r){if(this.isWithin(r.x,r.y)&&this.isMouseOverHorizontalLine(r)){this.highlighted=!0,this.draw();return}this.highlighted=!1,this.draw()}},{key:"draw",value:function(){const r=this.pMain;r.clear(),this.drawHorizontalRule(r),this.animate()}},{key:"exportSVG",value:function(){let r=null,i=null;Ig(Lc(n.prototype),"exportSVG",this)?[i,r]=Ig(Lc(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");o.setAttribute("class","horizontal-rule"),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);const a=this.options.color||"black",s=document.createElement("line");return s.setAttribute("stroke",a),s.setAttribute("stroke-width",this.strokeWidth),s.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),s.setAttribute("x1",0),s.setAttribute("y1",this._yScale(this.yPosition)),s.setAttribute("x2",this.dimensions[0]),s.setAttribute("y2",this._yScale(this.yPosition)),o.appendChild(s),[i,r]}}]),n}(Sd(Ai).with(c2,PUe));function Cg(){return typeof Reflect<"u"&&Reflect.get?Cg=Reflect.get.bind():Cg=function(e,t,n){var r=DUe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Cg.apply(this,arguments)}function DUe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=jc(e),e!==null););return e}function z$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NUe(r.key),r)}}function V$(e,t,n){return t&&RUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NUe(e){var t=MUe(e,"string");return typeof t=="symbol"?t:String(t)}function MUe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Y$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hC(e,t)}function hC(e,t){return hC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},hC(e,t)}function X$(e){var t=BUe();return function(){var n=jc(e),r;if(t){var i=jc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return LUe(this,r)}}function LUe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jUe(e)}function jUe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BUe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jc(e){return jc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jc(e)}const W$=_S(e=>function(t){Y$(r,t);var n=X$(r);function r(){return z$(this,r),n.apply(this,arguments)}return V$(r,[{key:"drawVerticalRule",value:function(i){let o=ct(this.options.color||"black");this.highlighted&&(o=ct("red")),i.lineStyle(this.strokeWidth,o,this.strokeOpacity);let a=0;for(;a<this.dimensions[1];)i.moveTo(this._xScale(this.xPosition),a),i.lineTo(this._xScale(this.xPosition),a+this.dashLength),a+=this.dashLength+this.dashGap}},{key:"isMouseOverVerticalLine",value:function(i){return Math.abs(i.x-this.position[0]-this._xScale(this.xPosition))<this.MOUSEOVER_RADIUS}}]),r}(e));let q$=function(e){Y$(n,e);var t=X$(n);function n(r,i){var o;return z$(this,n),o=t.call(this,r,i),o.xPosition=r.xPosition,o.strokeWidth=2,o.strokeOpacity=1,o.dashLength=5,o.dashGap=3,o}return V$(n,[{key:"draw",value:function(){const r=this.pMain;r.clear(),this.drawVerticalRule(r),this.animate()}},{key:"exportSVG",value:function(){let r=null,i=null;Cg(jc(n.prototype),"exportSVG",this)?[i,r]=Cg(jc(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");o.setAttribute("class","vertical-rule"),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);const a=this.options.color||"black",s=document.createElement("line");return s.setAttribute("stroke",a),s.setAttribute("stroke-width",this.strokeWidth),s.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),s.setAttribute("x1",this._xScale(this.xPosition)),s.setAttribute("y1",0),s.setAttribute("x2",this._xScale(this.xPosition)),s.setAttribute("y2",this.dimensions[1]),o.appendChild(s),[i,r]}},{key:"mouseMoveHandler",value:function(r){this.highlighted=this.isWithin(r.x,r.y)&&this.isMouseOverVerticalLine(r),this.draw()}}]),n}(Sd(Ai).with(c2,W$));function FUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UUe(r.key),r)}}function HUe(e,t,n){return t&&GUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UUe(e){var t=zUe(e,"string");return typeof t=="symbol"?t:String(t)}function zUe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Pg(){return typeof Reflect<"u"&&Reflect.get?Pg=Reflect.get.bind():Pg=function(e,t,n){var r=VUe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Pg.apply(this,arguments)}function VUe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Bc(e),e!==null););return e}function YUe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fC(e,t)}function fC(e,t){return fC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},fC(e,t)}function XUe(e){var t=$Ue();return function(){var n=Bc(e),r;if(t){var i=Bc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return WUe(this,r)}}function WUe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qUe(e)}function qUe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $Ue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bc(e){return Bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bc(e)}let K$=function(e){YUe(n,e);var t=XUe(n);function n(r,i){var o;FUe(this,n),o=t.call(this,r,i);const{x:a,y:s}=r;return o.xPosition=a,o.yPosition=s,o.strokeWidth=2,o.strokeOpacity=1,o.dashLength=5,o.dashGap=3,o}return HUe(n,[{key:"draw",value:function(){const r=this.pMain;r.clear(),this.drawHorizontalRule(r),this.drawVerticalRule(r)}},{key:"mouseMoveHandler",value:function(r){this.highlighted=this.isWithin(r.x,r.y)&&(this.isMouseOverHorizontalLine(r)||this.isMouseOverVerticalLine(r)),this.draw()}},{key:"drawHorizontalRule",value:function(r){let i=ct(this.options.color||"black");this.highlighted&&(i=ct("red")),r.lineStyle(this.strokeWidth,i,this.strokeOpacity);let o=0;for(;o<this.dimensions[0];)r.moveTo(o,this._yScale(this.yPosition)),r.lineTo(o+this.dashLength,this._yScale(this.yPosition)),o+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(r){return Math.abs(r.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}},{key:"exportSVG",value:function(){let r=null,i=null;Pg(Bc(n.prototype),"exportSVG",this)?[i,r]=Pg(Bc(n.prototype),"exportSVG",this).call(this):(i=document.createElement("g"),r=i);const o=document.createElement("g");o.setAttribute("class","cross-rule"),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);const a=this.options.color||"black",s=document.createElement("line");s.setAttribute("stroke",a),s.setAttribute("stroke-width",this.strokeWidth),s.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),s.setAttribute("x1",this._xScale(this.xPosition)),s.setAttribute("y1",0),s.setAttribute("x2",this._xScale(this.xPosition)),s.setAttribute("y2",this.dimensions[1]);const u=document.createElement("line");return u.setAttribute("stroke",a),u.setAttribute("stroke-width",this.strokeWidth),u.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),u.setAttribute("x1",0),u.setAttribute("y1",this._yScale(this.yPosition)),u.setAttribute("x2",this.dimensions[0]),u.setAttribute("y2",this._yScale(this.yPosition)),o.appendChild(s),o.appendChild(u),[i,r]}}]),n}(Sd(Ai).with(c2,W$));function KUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QUe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JUe(r.key),r)}}function ZUe(e,t,n){return t&&QUe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JUe(e){var t=e4e(e,"string");return typeof t=="symbol"?t:String(t)}function e4e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Il(){return typeof Reflect<"u"&&Reflect.get?Il=Reflect.get.bind():Il=function(e,t,n){var r=t4e(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Il.apply(this,arguments)}function t4e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Oa(e),e!==null););return e}function r4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pC(e,t)}function pC(e,t){return pC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},pC(e,t)}function n4e(e){var t=o4e();return function(){var n=Oa(e),r;if(t){var i=Oa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return i4e(this,r)}}function i4e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q$(e)}function Q$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oa(e){return Oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oa(e)}let pv=function(e){r4e(n,e);var t=n4e(n);function n(r,i){var o;KUe(this,n),o=t.call(this,r,i);const{animate:a}=r;return o.visibleTiles=new Set,o.visibleTileIds=new Set,o.fetching=new Set,o.fetchedTiles={},o.tileGraphics={},o.minX=typeof o.options.minPos<"u"&&!Number.isNaN(+o.options.minPos)?+o.options.minPos:-180,o.maxX=+o.options.maxPos||180,o.maxX=typeof o.options.maxPos<"u"&&!Number.isNaN(+o.options.maxPos)?+o.options.maxPos:180,o.minY=o.options.minY||o.minX,o.maxY=o.options.maxY||o.maxX,o.maxZoom=19,o.maxWidth=o.maxX-o.minX,o.animate=a,o.uuid=zt.nice(),o.refreshTilesDebounced=wR(o.refreshTiles.bind(Q$(o)),A_),o}return ZUe(n,[{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter(r=>this.visibleTileIds.has(r))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map(r=>this.fetchedTiles[r])}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(i=>({tileId:this.tileToLocalId(i),remoteId:this.tileToRemoteId(i),mirrored:i.mirrored})),this.visibleTileIds=new Set(this.visibleTiles.map(i=>i.tileId))}},{key:"removeAllTiles",value:function(){const r=new Set(Object.keys(this.fetchedTiles));this.removeTiles([...r])}},{key:"refreshTiles",value:function(){this.calculateVisibleTiles();const r=new Set(Object.keys(this.fetchedTiles)),i=[...this.visibleTiles].filter(a=>!this.fetching.has(a.remoteId)&&!r.has(a.tileId));for(let a=0;a<i.length;a++)this.fetching.add(i[a].remoteId);const o=[...r].filter(a=>!this.visibleTileIds.has(a));this.removeTiles(o),this.fetchNewTiles(i)}},{key:"removeTiles",value:function(r){r.length&&this.areAllVisibleTilesLoaded()&&(r.forEach(i=>{const o=i;this.destroyTile(this.fetchedTiles[o]),o in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[o]),delete this.tileGraphics[o]),delete this.fetchedTiles[o]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"tileToLocalId",value:function(r){return r.join(".")}},{key:"tileToRemoteId",value:function(r){return r.join(".")}},{key:"localToRemoteId",value:function(r){const i=r.split(".");return i.slice(0,i.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=et.calculateZoomLevel(this._xScale,this.minX,this.maxX),i=et.calculateZoomLevel(this._xScale,this.minY,this.maxY);let o=Math.min(Math.max(r,i),this.maxZoom);return this.options.maxZoom&&(this.options.maxZoom>=0?o=Math.min(this.options.maxZoom,o):console.error("Invalid maxZoom on track:",this)),o}},{key:"calculateVisibleTiles",value:function(){this.zoomLevel=this.calculateZoomLevel(),this.xTiles=et.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.maxZoom,this.maxWidth),this.yTiles=et.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.maxZoom,this.maxWidth);const r=this.xTiles,i=this.yTiles,o=this.zoomLevel,a=[];for(let s=0;s<r.length;s++)for(let u=0;u<i.length;u++){const c=[o,r[s],i[u]];a.push(c)}this.setVisibleTiles(a)}},{key:"zoomed",value:function(r,i,o,a,s){Il(Oa(n.prototype),"zoomed",this).call(this,r,i),this.xScale(r),this.yScale(i),this.pMain.position.x=a,this.pMain.position.y=s,this.pMain.scale.x=o,this.pMain.scale.y=o,this.refreshTilesDebounced(),this.draw()}},{key:"setPosition",value:function(r){Il(Oa(n.prototype),"setPosition",this).call(this,r)}},{key:"setDimensions",value:function(r){Il(Oa(n.prototype),"setDimensions",this).call(this,r)}},{key:"areAllVisibleTilesLoaded",value:function(){const r=new Set(Object.keys(this.fetchedTiles)),i=[...this.visibleTileIds];for(let o=0;o<i.length;o++)if(!r.has(i[o]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(r){return r&&(this.scale.minValue=r),this.scale.minValue}},{key:"maxValue",value:function(r){return r&&(this.scale.maxValue=r),this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"getTilePosAndDimensions",value:function(r,i){const o=this.maxWidth/2**r,a=o,s=this.minX+i[0]*o,u=this.minY+i[1]*a;return{tileX:s,tileY:u,tileWidth:o,tileHeight:a}}},{key:"setSpriteProperties",value:function(r,i,o){const{tileX:a,tileY:s,tileWidth:u,tileHeight:c}=this.getTilePosAndDimensions(i,o);r.x=this._refXScale(a),r.y=this._refYScale(s);const l=a+u,f=s+c;r.width=this._refXScale(l)-this._refXScale(a),r.height=this._refYScale(f)-this._refYScale(s)}},{key:"initTile",value:function(r){const i=new Ue.PIXI.Texture(new Ue.PIXI.BaseTexture(r.tileData.img)),o=new Ue.PIXI.Sprite(i),a=r.graphics;r.sprite=o,this.setSpriteProperties(r.sprite,r.tileData.zoomLevel,r.tileData.tilePos),a.removeChildren(),a.addChild(r.sprite)}},{key:"updateTile",value:function(r){}},{key:"destroyTile",value:function(r){}},{key:"addMissingGraphics",value:function(){const r=Object.keys(this.fetchedTiles);for(let i=0;i<r.length;i++)if(!(r[i]in this.tileGraphics)){const o=new Ue.PIXI.Graphics;this.pMain.addChild(o),this.fetchedTiles[r[i]].graphics=o,this.initTile(this.fetchedTiles[r[i]]),this.tileGraphics[r[i]]=o}}},{key:"updateExistingGraphics",value:function(){const r=Object.keys(this.fetchedTiles);for(let i=0;i<r.length;i++)this.updateTile(this.fetchedTiles[r[i]])}},{key:"synchronizeTilesAndGraphics",value:function(){this.addMissingGraphics(),this.updateExistingGraphics()}},{key:"loadTileData",value:function(r,i){let o=this.lruCache.get(r.tileId);return o||(o=i(r.data,r.type),this.lruCache.put(r.tileId,o)),o}},{key:"getTileUrl",value:function(r){const i=["a","b","c"],o=Math.floor(Math.random()*i.length);return`https://${i[o]}.tile.openstreetmap.org/${r[0]}/${r[1]}/${r[2]}.png`}},{key:"fetchNewTiles",value:function(r){if(r.length>0){const i=[...new Set(r.map(o=>o.remoteId))];for(const o of i){const a=o.split("."),s=this.getTileUrl(a),u=new Image;u.crossOrigin="Anonymous",u.src=s,u.onload=()=>{const c={};c[o]={tileId:o,img:u,zoomLevel:+a[0],tilePos:[+a[1],+a[2]],tileSrc:s},this.receivedTiles(c)}}}}},{key:"receivedTiles",value:function(r){for(let i=0;i<this.visibleTiles.length;i++){const o=this.visibleTiles[i].tileId;r[this.visibleTiles[i].remoteId]&&this.visibleTiles[i].remoteId in r&&(o in this.fetchedTiles||(this.fetchedTiles[o]=this.visibleTiles[i]),this.fetchedTiles[o].tileData=r[this.visibleTiles[i].remoteId])}for(const i in r)r[i]&&this.fetching.has(i)&&this.fetching.delete(i);this.synchronizeTilesAndGraphics(),this.refreshTiles(),this.draw(),this.animate()}},{key:"draw",value:function(){this.delayDrawing||Il(Oa(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(){}},{key:"refScalesChanged",value:function(r,i){Il(Oa(n.prototype),"refScalesChanged",this).call(this,r,i);for(const o in this.fetchedTiles){const a=this.fetchedTiles[o];a.sprite&&this.setSpriteProperties(a.sprite,a.tileData.zoomLevel,a.tileData.tilePos)}}}]),n}(Ai);function a4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s4e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u4e(r.key),r)}}function l4e(e,t,n){return t&&s4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function u4e(e){var t=c4e(e,"string");return typeof t=="symbol"?t:String(t)}function c4e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function D0(){return typeof Reflect<"u"&&Reflect.get?D0=Reflect.get.bind():D0=function(e,t,n){var r=h4e(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},D0.apply(this,arguments)}function h4e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Bp(e),e!==null););return e}function f4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dC(e,t)}function dC(e,t){return dC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},dC(e,t)}function p4e(e){var t=g4e();return function(){var n=Bp(e),r;if(t){var i=Bp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d4e(this,r)}}function d4e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m4e(e)}function m4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bp(e){return Bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bp(e)}let Z$=function(e){f4e(n,e);var t=p4e(n);function n(){return a4e(this,n),t.apply(this,arguments)}return l4e(n,[{key:"initTile",value:function(r){kq.bind(this)(r),this.drawTile(r)}},{key:"drawTile",value:function(r){Oq.bind(this)(r)}},{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"fetchNewTiles",value:function(r){r.forEach(i=>{const o=i.remoteId.split("."),a={zoomLevel:o[0],tilePos:o.slice(1,o.length).map(s=>+s)};this.fetchedTiles[i.tileId]=i,this.fetchedTiles[i.tileId].tileData=a,this.fetching.has(i.remoteId)&&this.fetching.delete(i.remoteId)}),this.synchronizeTilesAndGraphics(),this.draw(),this.animate()}},{key:"draw",value:function(){D0(Bp(n.prototype),"draw",this).call(this)}}]),n}(pv);function y4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v4e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_4e(r.key),r)}}function b4e(e,t,n){return t&&v4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _4e(e){var t=T4e(e,"string");return typeof t=="symbol"?t:String(t)}function T4e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function R0(){return typeof Reflect<"u"&&Reflect.get?R0=Reflect.get.bind():R0=function(e,t,n){var r=E4e(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},R0.apply(this,arguments)}function E4e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Fp(e),e!==null););return e}function S4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mC(e,t)}function mC(e,t){return mC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},mC(e,t)}function w4e(e){var t=k4e();return function(){var n=Fp(e),r;if(t){var i=Fp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return A4e(this,r)}}function A4e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O4e(e)}function O4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fp(e){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fp(e)}let J$=function(e){S4e(n,e);var t=w4e(n);function n(r,i){var o;return y4e(this,n),o=t.call(this,r,i),o.style=i.style,o.options.accessToken||(o.errorTextText="No access token provided in the viewconf's track options ('accessToken' option).",o.drawError()),o}return b4e(n,[{key:"rerender",value:function(r){R0(Fp(n.prototype),"rerender",this).call(this,r),r.style!==this.style&&(this.style=r.style,this.removeAllTiles(),this.refreshTiles())}},{key:"getTileUrl",value:function(r){const i=this.options&&this.options.style?this.options.style:"streets-v10",o=this.options&&+this.options.tileSize?+this.options.tileSize:256;return`https://api.mapbox.com/styles/v1/mapbox/${i}/tiles/${o}/${r[0]}/${r[1]}/${r[2]}?access_token=${this.options.accessToken}`}}]),n}(pv);function x4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I4e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P4e(r.key),r)}}function C4e(e,t,n){return t&&I4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function P4e(e){var t=D4e(e,"string");return typeof t=="symbol"?t:String(t)}function D4e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function R4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gC(e,t)}function gC(e,t){return gC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},gC(e,t)}function N4e(e){var t=j4e();return function(){var n=pT(e),r;if(t){var i=pT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return M4e(this,r)}}function M4e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L4e(e)}function L4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pT(e){return pT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pT(e)}let eK=function(e){R4e(n,e);var t=N4e(n);function n(r,i){var o;return x4e(this,n),o=t.call(this,r,i),o.style=i.style,o.options.tileSource||(o.errorTextText="No tile source string provided in the options. It should be in the form of http://a.com/{z}/{x}/{y}",o.drawError()),o}return C4e(n,[{key:"getTileUrl",value:function(r){let i=this.options.tileSource.replace("{z}",r[0]);return i=i.replace("{x}",r[1]),i=i.replace("{y}",r[2]),i}}]),n}(pv);const B4e=(e,t,n,r=rE)=>{const i=n[e.type];return i?new i.dataFetcher(r,e,t):e.type==="genbank"?new wq(e,t):e.type==="local-tiles"?new Aq(e,t):new hS(e,t)};var mt=1e-6,dT=1e-12,Ft=Math.PI,qr=Ft/2,mT=Ft/4,_i=Ft*2,Sr=180/Ft,pt=Ft/180,er=Math.abs,wd=Math.atan,Ti=Math.atan2,st=Math.cos,Ib=Math.ceil,tK=Math.exp,yC=Math.hypot,gT=Math.log,vO=Math.pow,tt=Math.sin,wo=Math.sign||function(e){return e>0?1:e<0?-1:0},On=Math.sqrt,h2=Math.tan;function rK(e){return e>1?0:e<-1?Ft:Math.acos(e)}function Ei(e){return e>1?qr:e<-1?-qr:Math.asin(e)}function kG(e){return(e=tt(e/2))*e}function Vr(){}function yT(e,t){e&&IG.hasOwnProperty(e.type)&&IG[e.type](e,t)}var xG={Feature:function(e,t){yT(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)yT(n[r].geometry,t)}},IG={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vC(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vC(n[r],t,0)},Polygon:function(e,t){CG(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)CG(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)yT(n[r],t)}};function vC(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function CG(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vC(e[n],t,1);t.polygonEnd()}function Uo(e,t){e&&xG.hasOwnProperty(e.type)?xG[e.type](e,t):yT(e,t)}var vT=new dn,bT=new dn,nK,iK,bC,_C,TC,Va={point:Vr,lineStart:Vr,lineEnd:Vr,polygonStart:function(){vT=new dn,Va.lineStart=F4e,Va.lineEnd=G4e},polygonEnd:function(){var e=+vT;bT.add(e<0?_i+e:e),this.lineStart=this.lineEnd=this.point=Vr},sphere:function(){bT.add(_i)}};function F4e(){Va.point=H4e}function G4e(){oK(nK,iK)}function H4e(e,t){Va.point=oK,nK=e,iK=t,e*=pt,t*=pt,bC=e,_C=st(t=t/2+mT),TC=tt(t)}function oK(e,t){e*=pt,t*=pt,t=t/2+mT;var n=e-bC,r=n>=0?1:-1,i=r*n,o=st(t),a=tt(t),s=TC*a,u=_C*o+s*st(i),c=s*r*tt(i);vT.add(Ti(c,u)),bC=e,_C=o,TC=a}function U4e(e){return bT=new dn,Uo(e,Va),bT*2}function _T(e){return[Ti(e[1],e[0]),Ei(e[2])]}function Fc(e){var t=e[0],n=e[1],r=st(n);return[r*st(t),r*tt(t),tt(n)]}function Cb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Gp(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function bO(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Pb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function TT(e){var t=On(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var zr,Li,Xr,Zi,Mu,aK,sK,Yf,Dg,Sl,Fs,fs={point:EC,lineStart:PG,lineEnd:DG,polygonStart:function(){fs.point=uK,fs.lineStart=z4e,fs.lineEnd=V4e,Dg=new dn,Va.polygonStart()},polygonEnd:function(){Va.polygonEnd(),fs.point=EC,fs.lineStart=PG,fs.lineEnd=DG,vT<0?(zr=-(Xr=180),Li=-(Zi=90)):Dg>mt?Zi=90:Dg<-1e-6&&(Li=-90),Fs[0]=zr,Fs[1]=Xr},sphere:function(){zr=-(Xr=180),Li=-(Zi=90)}};function EC(e,t){Sl.push(Fs=[zr=e,Xr=e]),t<Li&&(Li=t),t>Zi&&(Zi=t)}function lK(e,t){var n=Fc([e*pt,t*pt]);if(Yf){var r=Gp(Yf,n),i=[r[1],-r[0],0],o=Gp(i,r);TT(o),o=_T(o);var a=e-Mu,s=a>0?1:-1,u=o[0]*Sr*s,c,l=er(a)>180;l^(s*Mu<u&&u<s*e)?(c=o[1]*Sr,c>Zi&&(Zi=c)):(u=(u+360)%360-180,l^(s*Mu<u&&u<s*e)?(c=-o[1]*Sr,c<Li&&(Li=c)):(t<Li&&(Li=t),t>Zi&&(Zi=t))),l?e<Mu?$i(zr,e)>$i(zr,Xr)&&(Xr=e):$i(e,Xr)>$i(zr,Xr)&&(zr=e):Xr>=zr?(e<zr&&(zr=e),e>Xr&&(Xr=e)):e>Mu?$i(zr,e)>$i(zr,Xr)&&(Xr=e):$i(e,Xr)>$i(zr,Xr)&&(zr=e)}else Sl.push(Fs=[zr=e,Xr=e]);t<Li&&(Li=t),t>Zi&&(Zi=t),Yf=n,Mu=e}function PG(){fs.point=lK}function DG(){Fs[0]=zr,Fs[1]=Xr,fs.point=EC,Yf=null}function uK(e,t){if(Yf){var n=e-Mu;Dg.add(er(n)>180?n+(n>0?360:-360):n)}else aK=e,sK=t;Va.point(e,t),lK(e,t)}function z4e(){Va.lineStart()}function V4e(){uK(aK,sK),Va.lineEnd(),er(Dg)>mt&&(zr=-(Xr=180)),Fs[0]=zr,Fs[1]=Xr,Yf=null}function $i(e,t){return(t-=e)<0?t+360:t}function Y4e(e,t){return e[0]-t[0]}function RG(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function X4e(e){var t,n,r,i,o,a,s;if(Zi=Xr=-(zr=Li=1/0),Sl=[],Uo(e,fs),n=Sl.length){for(Sl.sort(Y4e),t=1,r=Sl[0],o=[r];t<n;++t)i=Sl[t],RG(r,i[0])||RG(r,i[1])?($i(r[0],i[1])>$i(r[0],r[1])&&(r[1]=i[1]),$i(i[0],r[1])>$i(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=$i(r[1],i[0]))>a&&(a=s,zr=i[0],Xr=r[1])}return Sl=Fs=null,zr===1/0||Li===1/0?[[NaN,NaN],[NaN,NaN]]:[[zr,Li],[Xr,Zi]]}var Lm,ET,ST,wT,AT,OT,kT,xT,SC,wC,AC,cK,hK,di,mi,gi,Xo={sphere:Vr,point:f2,lineStart:NG,lineEnd:MG,polygonStart:function(){Xo.lineStart=$4e,Xo.lineEnd=K4e},polygonEnd:function(){Xo.lineStart=NG,Xo.lineEnd=MG}};function f2(e,t){e*=pt,t*=pt;var n=st(t);dv(n*st(e),n*tt(e),tt(t))}function dv(e,t,n){++Lm,ST+=(e-ST)/Lm,wT+=(t-wT)/Lm,AT+=(n-AT)/Lm}function NG(){Xo.point=W4e}function W4e(e,t){e*=pt,t*=pt;var n=st(t);di=n*st(e),mi=n*tt(e),gi=tt(t),Xo.point=q4e,dv(di,mi,gi)}function q4e(e,t){e*=pt,t*=pt;var n=st(t),r=n*st(e),i=n*tt(e),o=tt(t),a=Ti(On((a=mi*o-gi*i)*a+(a=gi*r-di*o)*a+(a=di*i-mi*r)*a),di*r+mi*i+gi*o);ET+=a,OT+=a*(di+(di=r)),kT+=a*(mi+(mi=i)),xT+=a*(gi+(gi=o)),dv(di,mi,gi)}function MG(){Xo.point=f2}function $4e(){Xo.point=Q4e}function K4e(){fK(cK,hK),Xo.point=f2}function Q4e(e,t){cK=e,hK=t,e*=pt,t*=pt,Xo.point=fK;var n=st(t);di=n*st(e),mi=n*tt(e),gi=tt(t),dv(di,mi,gi)}function fK(e,t){e*=pt,t*=pt;var n=st(t),r=n*st(e),i=n*tt(e),o=tt(t),a=mi*o-gi*i,s=gi*r-di*o,u=di*i-mi*r,c=yC(a,s,u),l=Ei(c),f=c&&-l/c;SC.add(f*a),wC.add(f*s),AC.add(f*u),ET+=l,OT+=l*(di+(di=r)),kT+=l*(mi+(mi=i)),xT+=l*(gi+(gi=o)),dv(di,mi,gi)}function Z4e(e){Lm=ET=ST=wT=AT=OT=kT=xT=0,SC=new dn,wC=new dn,AC=new dn,Uo(e,Xo);var t=+SC,n=+wC,r=+AC,i=yC(t,n,r);return i<dT&&(t=OT,n=kT,r=xT,ET<mt&&(t=ST,n=wT,r=AT),i=yC(t,n,r),i<dT)?[NaN,NaN]:[Ti(n,t)*Sr,Ei(r/i)*Sr]}function Bh(e){return function(){return e}}function OC(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function kC(e,t){return[er(e)>Ft?e+Math.round(-e/_i)*_i:e,t]}kC.invert=kC;function p2(e,t,n){return(e%=_i)?t||n?OC(jG(e),BG(t,n)):jG(e):t||n?BG(t,n):kC}function LG(e){return function(t,n){return t+=e,[t>Ft?t-_i:t<-Ft?t+_i:t,n]}}function jG(e){var t=LG(e);return t.invert=LG(-e),t}function BG(e,t){var n=st(e),r=tt(e),i=st(t),o=tt(t);function a(s,u){var c=st(u),l=st(s)*c,f=tt(s)*c,h=tt(u),p=h*n+l*r;return[Ti(f*i-p*o,l*n-h*r),Ei(p*i+f*o)]}return a.invert=function(s,u){var c=st(u),l=st(s)*c,f=tt(s)*c,h=tt(u),p=h*i-f*o;return[Ti(f*i+h*o,l*n+p*r),Ei(p*n-l*r)]},a}function pK(e){e=p2(e[0]*pt,e[1]*pt,e.length>2?e[2]*pt:0);function t(n){return n=e(n[0]*pt,n[1]*pt),n[0]*=Sr,n[1]*=Sr,n}return t.invert=function(n){return n=e.invert(n[0]*pt,n[1]*pt),n[0]*=Sr,n[1]*=Sr,n},t}function dK(e,t,n,r,i,o){if(n){var a=st(t),s=tt(t),u=r*n;i==null?(i=t+r*_i,o=t-u/2):(i=FG(a,i),o=FG(a,o),(r>0?i<o:i>o)&&(i+=r*_i));for(var c,l=i;r>0?l>o:l<o;l-=u)c=_T([a,-s*st(l),-s*tt(l)]),e.point(c[0],c[1])}}function FG(e,t){t=Fc(t),t[0]-=e,TT(t);var n=rK(-t[1]);return((-t[2]<0?-n:n)+_i-mt)%_i}function J4e(){var e=Bh([0,0]),t=Bh(90),n=Bh(6),r,i,o={point:a};function a(u,c){r.push(u=i(u,c)),u[0]*=Sr,u[1]*=Sr}function s(){var u=e.apply(this,arguments),c=t.apply(this,arguments)*pt,l=n.apply(this,arguments)*pt;return r=[],i=p2(-u[0]*pt,-u[1]*pt,0).invert,dK(o,c,l,1),u={type:"Polygon",coordinates:[r]},r=i=null,u}return s.center=function(u){return arguments.length?(e=typeof u=="function"?u:Bh([+u[0],+u[1]]),s):e},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Bh(+u),s):t},s.precision=function(u){return arguments.length?(n=typeof u=="function"?u:Bh(+u),s):n},s}function mK(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Vr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function N0(e,t){return er(e[0]-t[0])<mt&&er(e[1]-t[1])<mt}function Db(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function gK(e,t,n,r,i){var o=[],a=[],s,u;if(e.forEach(function(d){if(!((m=d.length-1)<=0)){var m,g=d[0],v=d[m],b;if(N0(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),s=0;s<m;++s)i.point((g=d[s])[0],g[1]);i.lineEnd();return}v[0]+=2*mt}o.push(b=new Db(g,d,null,!0)),a.push(b.o=new Db(g,null,b,!1)),o.push(b=new Db(v,d,null,!1)),a.push(b.o=new Db(v,null,b,!0))}}),!!o.length){for(a.sort(t),GG(o),GG(a),s=0,u=a.length;s<u;++s)a[s].e=n=!n;for(var c=o[0],l,f;;){for(var h=c,p=!0;h.v;)if((h=h.n)===c)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(s=0,u=l.length;s<u;++s)i.point((f=l[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,s=l.length-1;s>=0;--s)i.point((f=l[s])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,p=!p}while(!h.v);i.lineEnd()}}}function GG(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function _O(e){return er(e[0])<=Ft?e[0]:wo(e[0])*((er(e[0])+Ft)%_i-Ft)}function yK(e,t){var n=_O(t),r=t[1],i=tt(r),o=[tt(n),-st(n),0],a=0,s=0,u=new dn;i===1?r=qr+mt:i===-1&&(r=-qr-mt);for(var c=0,l=e.length;c<l;++c)if(h=(f=e[c]).length)for(var f,h,p=f[h-1],d=_O(p),m=p[1]/2+mT,g=tt(m),v=st(m),b=0;b<h;++b,d=_,g=S,v=E,p=y){var y=f[b],_=_O(y),T=y[1]/2+mT,S=tt(T),E=st(T),I=_-d,x=I>=0?1:-1,C=x*I,w=C>Ft,B=g*S;if(u.add(Ti(B*x*tt(C),v*E+B*st(C))),a+=w?I+x*_i:I,w^d>=n^_>=n){var L=Gp(Fc(p),Fc(y));TT(L);var k=Gp(o,L);TT(k);var R=(w^I>=0?-1:1)*Ei(k[2]);(r>R||r===R&&(L[0]||L[1]))&&(s+=w^I>=0?1:-1)}}return(a<-1e-6||a<mt&&u<-1e-12)^s&1}function vK(e,t,n,r){return function(i){var o=t(i),a=mK(),s=t(a),u=!1,c,l,f,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=b,h.lineEnd=y,l=[],c=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=g,l=wD(l);var _=yK(c,r);l.length?(u||(i.polygonStart(),u=!0),gK(l,t6e,_,n,i)):_&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),l=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(_,T){e(_,T)&&i.point(_,T)}function d(_,T){o.point(_,T)}function m(){h.point=d,o.lineStart()}function g(){h.point=p,o.lineEnd()}function v(_,T){f.push([_,T]),s.point(_,T)}function b(){s.lineStart(),f=[]}function y(){v(f[0][0],f[0][1]),s.lineEnd();var _=s.clean(),T=a.result(),S,E=T.length,I,x,C;if(f.pop(),c.push(f),f=null,!!E){if(_&1){if(x=T[0],(I=x.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<I;++S)i.point((C=x[S])[0],C[1]);i.lineEnd()}return}E>1&&_&2&&T.push(T.pop().concat(T.shift())),l.push(T.filter(e6e))}}return h}}function e6e(e){return e.length>1}function t6e(e,t){return((e=e.x)[0]<0?e[1]-qr-mt:qr-e[1])-((t=t.x)[0]<0?t[1]-qr-mt:qr-t[1])}const xC=vK(function(){return!0},r6e,i6e,[-Ft,-qr]);function r6e(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?Ft:-Ft,u=er(o-t);er(u-Ft)<mt?(e.point(t,n=(n+a)/2>0?qr:-qr),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&u>=Ft&&(er(t-r)<mt&&(t-=r*mt),er(o-s)<mt&&(o-=s*mt),n=n6e(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function n6e(e,t,n,r){var i,o,a=tt(e-n);return er(a)>mt?wd((tt(t)*(o=st(r))*tt(n)-tt(r)*(i=st(t))*tt(e))/(i*o*a)):(t+r)/2}function i6e(e,t,n,r){var i;if(e==null)i=n*qr,r.point(-Ft,i),r.point(0,i),r.point(Ft,i),r.point(Ft,0),r.point(Ft,-i),r.point(0,-i),r.point(-Ft,-i),r.point(-Ft,0),r.point(-Ft,i);else if(er(e[0]-t[0])>mt){var o=e[0]<t[0]?Ft:-Ft;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function bK(e){var t=st(e),n=6*pt,r=t>0,i=er(t)>mt;function o(l,f,h,p){dK(p,e,n,h,l,f)}function a(l,f){return st(l)*st(f)>t}function s(l){var f,h,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(g,v){var b=[g,v],y,_=a(g,v),T=r?_?0:c(g,v):_?c(g+(g<0?Ft:-Ft),v):0;if(!f&&(d=p=_)&&l.lineStart(),_!==p&&(y=u(f,b),(!y||N0(f,y)||N0(b,y))&&(b[2]=1)),_!==p)m=0,_?(l.lineStart(),y=u(b,f),l.point(y[0],y[1])):(y=u(f,b),l.point(y[0],y[1],2),l.lineEnd()),f=y;else if(i&&f&&r^_){var S;!(T&h)&&(S=u(b,f,!0))&&(m=0,r?(l.lineStart(),l.point(S[0][0],S[0][1]),l.point(S[1][0],S[1][1]),l.lineEnd()):(l.point(S[1][0],S[1][1]),l.lineEnd(),l.lineStart(),l.point(S[0][0],S[0][1],3)))}_&&(!f||!N0(f,b))&&l.point(b[0],b[1]),f=b,p=_,h=T},lineEnd:function(){p&&l.lineEnd(),f=null},clean:function(){return m|(d&&p)<<1}}}function u(l,f,h){var p=Fc(l),d=Fc(f),m=[1,0,0],g=Gp(p,d),v=Cb(g,g),b=g[0],y=v-b*b;if(!y)return!h&&l;var _=t*v/y,T=-t*b/y,S=Gp(m,g),E=Pb(m,_),I=Pb(g,T);bO(E,I);var x=S,C=Cb(E,x),w=Cb(x,x),B=C*C-w*(Cb(E,E)-1);if(!(B<0)){var L=On(B),k=Pb(x,(-C-L)/w);if(bO(k,E),k=_T(k),!h)return k;var R=l[0],F=f[0],U=l[1],$=f[1],ie;F<R&&(ie=R,R=F,F=ie);var oe=F-R,me=er(oe-Ft)<mt,ae=me||oe<mt;if(!me&&$<U&&(ie=U,U=$,$=ie),ae?me?U+$>0^k[1]<(er(k[0]-R)<mt?U:$):U<=k[1]&&k[1]<=$:oe>Ft^(R<=k[0]&&k[0]<=F)){var X=Pb(x,(-C+L)/w);return bO(X,E),[k,_T(X)]}}}function c(l,f){var h=r?e:Ft-e,p=0;return l<-h?p|=1:l>h&&(p|=2),f<-h?p|=4:f>h&&(p|=8),p}return vK(a,s,o,r?[0,-e]:[-Ft,e-Ft])}function o6e(e,t,n,r,i,o){var a=e[0],s=e[1],u=t[0],c=t[1],l=0,f=1,h=u-a,p=c-s,d;if(d=n-a,!(!h&&d>0)){if(d/=h,h<0){if(d<l)return;d<f&&(f=d)}else if(h>0){if(d>f)return;d>l&&(l=d)}if(d=i-a,!(!h&&d<0)){if(d/=h,h<0){if(d>f)return;d>l&&(l=d)}else if(h>0){if(d<l)return;d<f&&(f=d)}if(d=r-s,!(!p&&d>0)){if(d/=p,p<0){if(d<l)return;d<f&&(f=d)}else if(p>0){if(d>f)return;d>l&&(l=d)}if(d=o-s,!(!p&&d<0)){if(d/=p,p<0){if(d>f)return;d>l&&(l=d)}else if(p>0){if(d<l)return;d<f&&(f=d)}return l>0&&(e[0]=a+l*h,e[1]=s+l*p),f<1&&(t[0]=a+f*h,t[1]=s+f*p),!0}}}}}var Rb=1e9,Nb=-1e9;function TS(e,t,n,r){function i(c,l){return e<=c&&c<=n&&t<=l&&l<=r}function o(c,l,f,h){var p=0,d=0;if(c==null||(p=a(c,f))!==(d=a(l,f))||u(c,l)<0^f>0)do h.point(p===0||p===3?e:n,p>1?r:t);while((p=(p+f+4)%4)!==d);else h.point(l[0],l[1])}function a(c,l){return er(c[0]-e)<mt?l>0?0:3:er(c[0]-n)<mt?l>0?2:1:er(c[1]-t)<mt?l>0?1:0:l>0?3:2}function s(c,l){return u(c.x,l.x)}function u(c,l){var f=a(c,1),h=a(l,1);return f!==h?f-h:f===0?l[1]-c[1]:f===1?c[0]-l[0]:f===2?c[1]-l[1]:l[0]-c[0]}return function(c){var l=c,f=mK(),h,p,d,m,g,v,b,y,_,T,S,E={point:I,lineStart:B,lineEnd:L,polygonStart:C,polygonEnd:w};function I(R,F){i(R,F)&&l.point(R,F)}function x(){for(var R=0,F=0,U=p.length;F<U;++F)for(var $=p[F],ie=1,oe=$.length,me=$[0],ae,X,ee=me[0],se=me[1];ie<oe;++ie)ae=ee,X=se,me=$[ie],ee=me[0],se=me[1],X<=r?se>r&&(ee-ae)*(r-X)>(se-X)*(e-ae)&&++R:se<=r&&(ee-ae)*(r-X)<(se-X)*(e-ae)&&--R;return R}function C(){l=f,h=[],p=[],S=!0}function w(){var R=x(),F=S&&R,U=(h=wD(h)).length;(F||U)&&(c.polygonStart(),F&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),U&&gK(h,s,R,o,c),c.polygonEnd()),l=c,h=p=d=null}function B(){E.point=k,p&&p.push(d=[]),T=!0,_=!1,b=y=NaN}function L(){h&&(k(m,g),v&&_&&f.rejoin(),h.push(f.result())),E.point=I,_&&l.lineEnd()}function k(R,F){var U=i(R,F);if(p&&d.push([R,F]),T)m=R,g=F,v=U,T=!1,U&&(l.lineStart(),l.point(R,F));else if(U&&_)l.point(R,F);else{var $=[b=Math.max(Nb,Math.min(Rb,b)),y=Math.max(Nb,Math.min(Rb,y))],ie=[R=Math.max(Nb,Math.min(Rb,R)),F=Math.max(Nb,Math.min(Rb,F))];o6e($,ie,e,t,n,r)?(_||(l.lineStart(),l.point($[0],$[1])),l.point(ie[0],ie[1]),U||l.lineEnd(),S=!1):U&&(l.lineStart(),l.point(R,F),S=!1)}b=R,y=F,_=U}return E}}function a6e(){var e=0,t=0,n=960,r=500,i,o,a;return a={stream:function(s){return i&&o===s?i:i=TS(e,t,n,r)(o=s)},extent:function(s){return arguments.length?(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1],i=o=null,a):[[e,t],[n,r]]}}}var IC,CC,M0,L0,Hp={sphere:Vr,point:Vr,lineStart:s6e,lineEnd:Vr,polygonStart:Vr,polygonEnd:Vr};function s6e(){Hp.point=u6e,Hp.lineEnd=l6e}function l6e(){Hp.point=Hp.lineEnd=Vr}function u6e(e,t){e*=pt,t*=pt,CC=e,M0=tt(t),L0=st(t),Hp.point=c6e}function c6e(e,t){e*=pt,t*=pt;var n=tt(t),r=st(t),i=er(e-CC),o=st(i),a=tt(i),s=r*a,u=L0*n-M0*r*o,c=M0*n+L0*r*o;IC.add(Ti(On(s*s+u*u),c)),CC=e,M0=n,L0=r}function _K(e){return IC=new dn,Uo(e,Hp),+IC}var PC=[null,null],h6e={type:"LineString",coordinates:PC};function IT(e,t){return PC[0]=e,PC[1]=t,_K(h6e)}var HG={Feature:function(e,t){return CT(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(CT(n[r].geometry,t))return!0;return!1}},UG={Sphere:function(){return!0},Point:function(e,t){return zG(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(zG(n[r],t))return!0;return!1},LineString:function(e,t){return VG(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(VG(n[r],t))return!0;return!1},Polygon:function(e,t){return YG(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(YG(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(CT(n[r],t))return!0;return!1}};function CT(e,t){return e&&UG.hasOwnProperty(e.type)?UG[e.type](e,t):!1}function zG(e,t){return IT(e,t)===0}function VG(e,t){for(var n,r,i,o=0,a=e.length;o<a;o++){if(r=IT(e[o],t),r===0||o>0&&(i=IT(e[o],e[o-1]),i>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<dT*i))return!0;n=r}return!1}function YG(e,t){return!!yK(e.map(f6e),TK(t))}function f6e(e){return e=e.map(TK),e.pop(),e}function TK(e){return[e[0]*pt,e[1]*pt]}function p6e(e,t){return(e&&HG.hasOwnProperty(e.type)?HG[e.type]:CT)(e,t)}function XG(e,t,n){var r=yi(e,t-mt,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function WG(e,t,n){var r=yi(e,t-mt,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function EK(){var e,t,n,r,i,o,a,s,u=10,c=u,l=90,f=360,h,p,d,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return yi(Ib(r/l)*l,n,l).map(d).concat(yi(Ib(s/f)*f,a,f).map(m)).concat(yi(Ib(t/u)*u,e,u).filter(function(y){return er(y%l)>mt}).map(h)).concat(yi(Ib(o/c)*c,i,c).filter(function(y){return er(y%f)>mt}).map(p))}return v.lines=function(){return b().map(function(y){return{type:"LineString",coordinates:y}})},v.outline=function(){return{type:"Polygon",coordinates:[d(r).concat(m(a).slice(1),d(n).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(y){return arguments.length?v.extentMajor(y).extentMinor(y):v.extentMinor()},v.extentMajor=function(y){return arguments.length?(r=+y[0][0],n=+y[1][0],s=+y[0][1],a=+y[1][1],r>n&&(y=r,r=n,n=y),s>a&&(y=s,s=a,a=y),v.precision(g)):[[r,s],[n,a]]},v.extentMinor=function(y){return arguments.length?(t=+y[0][0],e=+y[1][0],o=+y[0][1],i=+y[1][1],t>e&&(y=t,t=e,e=y),o>i&&(y=o,o=i,i=y),v.precision(g)):[[t,o],[e,i]]},v.step=function(y){return arguments.length?v.stepMajor(y).stepMinor(y):v.stepMinor()},v.stepMajor=function(y){return arguments.length?(l=+y[0],f=+y[1],v):[l,f]},v.stepMinor=function(y){return arguments.length?(u=+y[0],c=+y[1],v):[u,c]},v.precision=function(y){return arguments.length?(g=+y,h=XG(o,i,90),p=WG(t,e,g),d=XG(s,a,90),m=WG(r,n,g),v):g},v.extentMajor([[-180,-90+mt],[180,90-mt]]).extentMinor([[-180,-80-mt],[180,80+mt]])}function d6e(){return EK()()}function m6e(e,t){var n=e[0]*pt,r=e[1]*pt,i=t[0]*pt,o=t[1]*pt,a=st(r),s=tt(r),u=st(o),c=tt(o),l=a*st(n),f=a*tt(n),h=u*st(i),p=u*tt(i),d=2*Ei(On(kG(o-r)+a*u*kG(i-n))),m=tt(d),g=d?function(v){var b=tt(v*=d)/m,y=tt(d-v)/m,_=y*l+b*h,T=y*f+b*p,S=y*s+b*c;return[Ti(T,_)*Sr,Ti(S,On(_*_+T*T))*Sr]}:function(){return[n*Sr,r*Sr]};return g.distance=d,g}const vy=e=>e;var TO=new dn,DC=new dn,SK,wK,RC,NC,Cl={point:Vr,lineStart:Vr,lineEnd:Vr,polygonStart:function(){Cl.lineStart=g6e,Cl.lineEnd=v6e},polygonEnd:function(){Cl.lineStart=Cl.lineEnd=Cl.point=Vr,TO.add(er(DC)),DC=new dn},result:function(){var e=TO/2;return TO=new dn,e}};function g6e(){Cl.point=y6e}function y6e(e,t){Cl.point=AK,SK=RC=e,wK=NC=t}function AK(e,t){DC.add(NC*e-RC*t),RC=e,NC=t}function v6e(){AK(SK,wK)}const qG=Cl;var Up=1/0,PT=Up,by=-Up,DT=by,b6e={point:_6e,lineStart:Vr,lineEnd:Vr,polygonStart:Vr,polygonEnd:Vr,result:function(){var e=[[Up,PT],[by,DT]];return by=DT=-(PT=Up=1/0),e}};function _6e(e,t){e<Up&&(Up=e),e>by&&(by=e),t<PT&&(PT=t),t>DT&&(DT=t)}const RT=b6e;var MC=0,LC=0,jm=0,NT=0,MT=0,vf=0,jC=0,BC=0,Bm=0,OK,kK,ka,xa,zo={point:Gc,lineStart:$G,lineEnd:KG,polygonStart:function(){zo.lineStart=S6e,zo.lineEnd=w6e},polygonEnd:function(){zo.point=Gc,zo.lineStart=$G,zo.lineEnd=KG},result:function(){var e=Bm?[jC/Bm,BC/Bm]:vf?[NT/vf,MT/vf]:jm?[MC/jm,LC/jm]:[NaN,NaN];return MC=LC=jm=NT=MT=vf=jC=BC=Bm=0,e}};function Gc(e,t){MC+=e,LC+=t,++jm}function $G(){zo.point=T6e}function T6e(e,t){zo.point=E6e,Gc(ka=e,xa=t)}function E6e(e,t){var n=e-ka,r=t-xa,i=On(n*n+r*r);NT+=i*(ka+e)/2,MT+=i*(xa+t)/2,vf+=i,Gc(ka=e,xa=t)}function KG(){zo.point=Gc}function S6e(){zo.point=A6e}function w6e(){xK(OK,kK)}function A6e(e,t){zo.point=xK,Gc(OK=ka=e,kK=xa=t)}function xK(e,t){var n=e-ka,r=t-xa,i=On(n*n+r*r);NT+=i*(ka+e)/2,MT+=i*(xa+t)/2,vf+=i,i=xa*e-ka*t,jC+=i*(ka+e),BC+=i*(xa+t),Bm+=i*3,Gc(ka=e,xa=t)}const QG=zo;function IK(e){this._context=e}IK.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,_i);break}}},result:Vr};var FC=new dn,EO,CK,PK,Fm,Gm,LT={point:Vr,lineStart:function(){LT.point=O6e},lineEnd:function(){EO&&DK(CK,PK),LT.point=Vr},polygonStart:function(){EO=!0},polygonEnd:function(){EO=null},result:function(){var e=+FC;return FC=new dn,e}};function O6e(e,t){LT.point=DK,CK=Fm=e,PK=Gm=t}function DK(e,t){Fm-=e,Gm-=t,FC.add(On(Fm*Fm+Gm*Gm)),Fm=e,Gm=t}const ZG=LT;function RK(){this._string=[]}RK.prototype={_radius:4.5,_circle:JG(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=JG(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function JG(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function k6e(e,t){var n=4.5,r,i;function o(a){return a&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),Uo(a,r(i))),i.result()}return o.area=function(a){return Uo(a,r(qG)),qG.result()},o.measure=function(a){return Uo(a,r(ZG)),ZG.result()},o.bounds=function(a){return Uo(a,r(RT)),RT.result()},o.centroid=function(a){return Uo(a,r(QG)),QG.result()},o.projection=function(a){return arguments.length?(r=a==null?(e=null,vy):(e=a).stream,o):e},o.context=function(a){return arguments.length?(i=a==null?(t=null,new RK):new IK(t=a),typeof n!="function"&&i.pointRadius(n),o):t},o.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(i.pointRadius(+a),+a),o):n},o.projection(e).context(t)}function x6e(e){return{stream:mv(e)}}function mv(e){return function(t){var n=new GC;for(var r in e)n[r]=e[r];return n.stream=t,n}}function GC(){}GC.prototype={constructor:GC,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function d2(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Uo(n,e.stream(RT)),t(RT.result()),r!=null&&e.clipExtent(r),e}function ES(e,t,n){return d2(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,u])},n)}function m2(e,t,n){return ES(e,[[0,0],t],n)}function g2(e,t,n){return d2(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function y2(e,t,n){return d2(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var eH=16,I6e=st(30*pt);function tH(e,t){return+t?P6e(e,t):C6e(e)}function C6e(e){return mv({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function P6e(e,t){function n(r,i,o,a,s,u,c,l,f,h,p,d,m,g){var v=c-r,b=l-i,y=v*v+b*b;if(y>4*t&&m--){var _=a+h,T=s+p,S=u+d,E=On(_*_+T*T+S*S),I=Ei(S/=E),x=er(er(S)-1)<mt||er(o-f)<mt?(o+f)/2:Ti(T,_),C=e(x,I),w=C[0],B=C[1],L=w-r,k=B-i,R=b*L-v*k;(R*R/y>t||er((v*L+b*k)/y-.5)>.3||a*h+s*p+u*d<I6e)&&(n(r,i,o,a,s,u,w,B,x,_/=E,T/=E,S,m,g),g.point(w,B),n(w,B,x,_,T,S,c,l,f,h,p,d,m,g))}}return function(r){var i,o,a,s,u,c,l,f,h,p,d,m,g={point:v,lineStart:b,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=T},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function v(I,x){I=e(I,x),r.point(I[0],I[1])}function b(){f=NaN,g.point=y,r.lineStart()}function y(I,x){var C=Fc([I,x]),w=e(I,x);n(f,h,l,p,d,m,f=w[0],h=w[1],l=I,p=C[0],d=C[1],m=C[2],eH,r),r.point(f,h)}function _(){g.point=v,r.lineEnd()}function T(){b(),g.point=S,g.lineEnd=E}function S(I,x){y(i=I,x),o=f,a=h,s=p,u=d,c=m,g.point=y}function E(){n(f,h,l,p,d,m,o,a,i,s,u,c,eH,r),g.lineEnd=_,_()}return g}}var D6e=mv({point:function(e,t){this.stream.point(e*pt,t*pt)}});function R6e(e){return mv({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function N6e(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function rH(e,t,n,r,i,o){if(!o)return N6e(e,t,n,r,i);var a=st(o),s=tt(o),u=a*e,c=s*e,l=a/e,f=s/e,h=(s*n-a*t)/e,p=(s*t+a*n)/e;function d(m,g){return m*=r,g*=i,[u*m-c*g+t,n-c*m-u*g]}return d.invert=function(m,g){return[r*(l*m-f*g+h),i*(p-f*m-l*g)]},d}function Qa(e){return v2(function(){return e})()}function v2(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,u=0,c=0,l,f=0,h=1,p=1,d=null,m=xC,g=null,v,b,y,_=vy,T=.5,S,E,I,x,C;function w(R){return I(R[0]*pt,R[1]*pt)}function B(R){return R=I.invert(R[0],R[1]),R&&[R[0]*Sr,R[1]*Sr]}w.stream=function(R){return x&&C===R?x:x=D6e(R6e(l)(m(S(_(C=R)))))},w.preclip=function(R){return arguments.length?(m=R,d=void 0,k()):m},w.postclip=function(R){return arguments.length?(_=R,g=v=b=y=null,k()):_},w.clipAngle=function(R){return arguments.length?(m=+R?bK(d=R*pt):(d=null,xC),k()):d*Sr},w.clipExtent=function(R){return arguments.length?(_=R==null?(g=v=b=y=null,vy):TS(g=+R[0][0],v=+R[0][1],b=+R[1][0],y=+R[1][1]),k()):g==null?null:[[g,v],[b,y]]},w.scale=function(R){return arguments.length?(n=+R,L()):n},w.translate=function(R){return arguments.length?(r=+R[0],i=+R[1],L()):[r,i]},w.center=function(R){return arguments.length?(o=R[0]%360*pt,a=R[1]%360*pt,L()):[o*Sr,a*Sr]},w.rotate=function(R){return arguments.length?(s=R[0]%360*pt,u=R[1]%360*pt,c=R.length>2?R[2]%360*pt:0,L()):[s*Sr,u*Sr,c*Sr]},w.angle=function(R){return arguments.length?(f=R%360*pt,L()):f*Sr},w.reflectX=function(R){return arguments.length?(h=R?-1:1,L()):h<0},w.reflectY=function(R){return arguments.length?(p=R?-1:1,L()):p<0},w.precision=function(R){return arguments.length?(S=tH(E,T=R*R),k()):On(T)},w.fitExtent=function(R,F){return ES(w,R,F)},w.fitSize=function(R,F){return m2(w,R,F)},w.fitWidth=function(R,F){return g2(w,R,F)},w.fitHeight=function(R,F){return y2(w,R,F)};function L(){var R=rH(n,0,0,h,p,f).apply(null,t(o,a)),F=rH(n,r-R[0],i-R[1],h,p,f);return l=p2(s,u,c),E=OC(t,F),I=OC(l,E),S=tH(E,T),k()}function k(){return x=C=null,w}return function(){return t=e.apply(this,arguments),w.invert=t.invert&&B,L()}}function b2(e){var t=0,n=Ft/3,r=v2(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*pt,n=o[1]*pt):[t*Sr,n*Sr]},i}function M6e(e){var t=st(e);function n(r,i){return[r*t,tt(i)/t]}return n.invert=function(r,i){return[r/t,Ei(i*t)]},n}function NK(e,t){var n=tt(e),r=(n+tt(t))/2;if(er(r)<mt)return M6e(e);var i=1+n*(2*r-n),o=On(i)/r;function a(s,u){var c=On(i-2*r*tt(u))/r;return[c*tt(s*=r),o-c*st(s)]}return a.invert=function(s,u){var c=o-u,l=Ti(s,er(c))*wo(c);return c*r<0&&(l-=Ft*wo(s)*wo(c)),[l/r,Ei((i-(s*s+c*c)*r*r)/(2*r))]},a}function jT(){return b2(NK).scale(155.424).center([0,33.6442])}function MK(){return jT().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function L6e(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function j6e(){var e,t,n=MK(),r,i=jT().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=jT().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,u,c={point:function(h,p){u=[h,p]}};function l(h){var p=h[0],d=h[1];return u=null,r.point(p,d),u||(o.point(p,d),u)||(s.point(p,d),u)}l.invert=function(h){var p=n.scale(),d=n.translate(),m=(h[0]-d[0])/p,g=(h[1]-d[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(h)},l.stream=function(h){return e&&t===h?e:e=L6e([n.stream(t=h),i.stream(h),a.stream(h)])},l.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),a.precision(h),f()):n.precision()},l.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),a.scale(h),l.translate(n.translate())):n.scale()},l.translate=function(h){if(!arguments.length)return n.translate();var p=n.scale(),d=+h[0],m=+h[1];return r=n.translate(h).clipExtent([[d-.455*p,m-.238*p],[d+.455*p,m+.238*p]]).stream(c),o=i.translate([d-.307*p,m+.201*p]).clipExtent([[d-.425*p+mt,m+.12*p+mt],[d-.214*p-mt,m+.234*p-mt]]).stream(c),s=a.translate([d-.205*p,m+.212*p]).clipExtent([[d-.214*p+mt,m+.166*p+mt],[d-.115*p-mt,m+.234*p-mt]]).stream(c),f()},l.fitExtent=function(h,p){return ES(l,h,p)},l.fitSize=function(h,p){return m2(l,h,p)},l.fitWidth=function(h,p){return g2(l,h,p)},l.fitHeight=function(h,p){return y2(l,h,p)};function f(){return e=t=null,l}return l.scale(1070)}function LK(e){return function(t,n){var r=st(t),i=st(n),o=e(r*i);return o===1/0?[2,0]:[o*i*tt(t),o*tt(n)]}}function gv(e){return function(t,n){var r=On(t*t+n*n),i=e(r),o=tt(i),a=st(i);return[Ti(t*o,r*a),Ei(r&&n*o/r)]}}var _2=LK(function(e){return On(2/(1+e))});_2.invert=gv(function(e){return 2*Ei(e/2)});function B6e(){return Qa(_2).scale(124.75).clipAngle(180-.001)}var T2=LK(function(e){return(e=rK(e))&&e/tt(e)});T2.invert=gv(function(e){return e});function F6e(){return Qa(T2).scale(79.4188).clipAngle(180-.001)}function yv(e,t){return[e,gT(h2((qr+t)/2))]}yv.invert=function(e,t){return[e,2*wd(tK(t))-qr]};function G6e(){return jK(yv).scale(961/_i)}function jK(e){var t=Qa(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,u,c;t.scale=function(f){return arguments.length?(r(f),l()):r()},t.translate=function(f){return arguments.length?(i(f),l()):i()},t.center=function(f){return arguments.length?(n(f),l()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=u=c=null:(a=+f[0][0],s=+f[0][1],u=+f[1][0],c=+f[1][1]),l()):a==null?null:[[a,s],[u,c]]};function l(){var f=Ft*r(),h=t(pK(t.rotate()).invert([0,0]));return o(a==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===yv?[[Math.max(h[0]-f,a),s],[Math.min(h[0]+f,u),c]]:[[a,Math.max(h[1]-f,s)],[u,Math.min(h[1]+f,c)]])}return l()}function Mb(e){return h2((qr+e)/2)}function BK(e,t){var n=st(e),r=e===t?tt(e):gT(n/st(t))/gT(Mb(t)/Mb(e)),i=n*vO(Mb(e),r)/r;if(!r)return yv;function o(a,s){i>0?s<-qr+mt&&(s=-qr+mt):s>qr-mt&&(s=qr-mt);var u=i/vO(Mb(s),r);return[u*tt(r*a),i-u*st(r*a)]}return o.invert=function(a,s){var u=i-s,c=wo(r)*On(a*a+u*u),l=Ti(a,er(u))*wo(u);return u*r<0&&(l-=Ft*wo(a)*wo(u)),[l/r,2*wd(vO(i/c,1/r))-qr]},o}function H6e(){return b2(BK).scale(109.5).parallels([30,30])}function _y(e,t){return[e,t]}_y.invert=_y;function U6e(){return Qa(_y).scale(152.63)}function FK(e,t){var n=st(e),r=e===t?tt(e):(n-st(t))/(t-e),i=n/r+e;if(er(r)<mt)return _y;function o(a,s){var u=i-s,c=r*a;return[u*tt(c),i-u*st(c)]}return o.invert=function(a,s){var u=i-s,c=Ti(a,er(u))*wo(u);return u*r<0&&(c-=Ft*wo(a)*wo(u)),[c/r,i-wo(r)*On(a*a+u*u)]},o}function z6e(){return b2(FK).scale(131.154).center([0,13.9389])}var Rg=1.340264,Ng=-.081106,Mg=893e-6,Lg=.003796,BT=On(3)/2,V6e=12;function E2(e,t){var n=Ei(BT*tt(t)),r=n*n,i=r*r*r;return[e*st(n)/(BT*(Rg+3*Ng*r+i*(7*Mg+9*Lg*r))),n*(Rg+Ng*r+i*(Mg+Lg*r))]}E2.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,u;o<V6e&&(s=n*(Rg+Ng*r+i*(Mg+Lg*r))-t,u=Rg+3*Ng*r+i*(7*Mg+9*Lg*r),n-=a=s/u,r=n*n,i=r*r*r,!(er(a)<dT));++o);return[BT*e*(Rg+3*Ng*r+i*(7*Mg+9*Lg*r))/st(n),Ei(tt(n)/BT)]};function Y6e(){return Qa(E2).scale(177.158)}function S2(e,t){var n=st(t),r=st(e)*n;return[n*tt(e)/r,tt(t)/r]}S2.invert=gv(wd);function X6e(){return Qa(S2).scale(144.049).clipAngle(60)}function W6e(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,u=null,c,l,f,h=1,p=1,d=mv({point:function(_,T){var S=y([_,T]);this.stream.point(S[0],S[1])}}),m=vy,g,v;function b(){return h=e*r,p=e*i,g=v=null,y}function y(_){var T=_[0]*h,S=_[1]*p;if(o){var E=S*a-T*s;T=T*a+S*s,S=E}return[T+t,S+n]}return y.invert=function(_){var T=_[0]-t,S=_[1]-n;if(o){var E=S*a+T*s;T=T*a-S*s,S=E}return[T/h,S/p]},y.stream=function(_){return g&&v===_?g:g=d(m(v=_))},y.postclip=function(_){return arguments.length?(m=_,u=c=l=f=null,b()):m},y.clipExtent=function(_){return arguments.length?(m=_==null?(u=c=l=f=null,vy):TS(u=+_[0][0],c=+_[0][1],l=+_[1][0],f=+_[1][1]),b()):u==null?null:[[u,c],[l,f]]},y.scale=function(_){return arguments.length?(e=+_,b()):e},y.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],b()):[t,n]},y.angle=function(_){return arguments.length?(o=_%360*pt,s=tt(o),a=st(o),b()):o*Sr},y.reflectX=function(_){return arguments.length?(r=_?-1:1,b()):r<0},y.reflectY=function(_){return arguments.length?(i=_?-1:1,b()):i<0},y.fitExtent=function(_,T){return ES(y,_,T)},y.fitSize=function(_,T){return m2(y,_,T)},y.fitWidth=function(_,T){return g2(y,_,T)},y.fitHeight=function(_,T){return y2(y,_,T)},y}function w2(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}w2.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(er(i)>mt&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function q6e(){return Qa(w2).scale(175.295)}function A2(e,t){return[st(t)*tt(e),tt(t)]}A2.invert=gv(Ei);function $6e(){return Qa(A2).scale(249.5).clipAngle(90+mt)}function O2(e,t){var n=st(t),r=1+st(e)*n;return[n*tt(e)/r,tt(t)/r]}O2.invert=gv(function(e){return 2*wd(e)});function K6e(){return Qa(O2).scale(250).clipAngle(142)}function k2(e,t){return[gT(h2((qr+t)/2)),-e]}k2.invert=function(e,t){return[-t,2*wd(tK(e))-qr]};function Q6e(){var e=jK(k2),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}const Z6e=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:MK,geoAlbersUsa:j6e,geoArea:U4e,geoAzimuthalEqualArea:B6e,geoAzimuthalEqualAreaRaw:_2,geoAzimuthalEquidistant:F6e,geoAzimuthalEquidistantRaw:T2,geoBounds:X4e,geoCentroid:Z4e,geoCircle:J4e,geoClipAntimeridian:xC,geoClipCircle:bK,geoClipExtent:a6e,geoClipRectangle:TS,geoConicConformal:H6e,geoConicConformalRaw:BK,geoConicEqualArea:jT,geoConicEqualAreaRaw:NK,geoConicEquidistant:z6e,geoConicEquidistantRaw:FK,geoContains:p6e,geoDistance:IT,geoEqualEarth:Y6e,geoEqualEarthRaw:E2,geoEquirectangular:U6e,geoEquirectangularRaw:_y,geoGnomonic:X6e,geoGnomonicRaw:S2,geoGraticule:EK,geoGraticule10:d6e,geoIdentity:W6e,geoInterpolate:m6e,geoLength:_K,geoMercator:G6e,geoMercatorRaw:yv,geoNaturalEarth1:q6e,geoNaturalEarth1Raw:w2,geoOrthographic:$6e,geoOrthographicRaw:A2,geoPath:k6e,geoProjection:Qa,geoProjectionMutator:v2,geoRotation:pK,geoStereographic:K6e,geoStereographicRaw:O2,geoStream:Uo,geoTransform:x6e,geoTransverseMercator:Q6e,geoTransverseMercatorRaw:k2},Symbol.toStringTag,{value:"Module"}));var J6e=[].slice,eze={};function HC(e){this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}HC.prototype=HK.prototype={constructor:HC,defer:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(this._error!=null)return this;var t=J6e.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),GK(this),this},abort:function(){return this._error==null&&x2(this,new Error("abort")),this},await:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(t,n){e.apply(null,[t].concat(n))},FT(this),this},awaitAll:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=e,FT(this),this}};function GK(e){if(!e._start)try{tze(e)}catch(t){if(e._tasks[e._ended+e._active-1])x2(e,t);else if(!e._data)throw t}}function tze(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,n=e._tasks[t],r=n.length-1,i=n[r];n[r]=rze(e,t),--e._waiting,++e._active,n=i.apply(null,n),e._tasks[t]&&(e._tasks[t]=n||eze)}}function rze(e,t){return function(n,r){e._tasks[t]&&(--e._active,++e._ended,e._tasks[t]=null,e._error==null&&(n!=null?x2(e,n):(e._data[t]=r,e._waiting?GK(e):FT(e))))}}function x2(e,t){var n=e._tasks.length,r;for(e._error=t,e._data=void 0,e._waiting=NaN;--n>=0;)if((r=e._tasks[n])&&(e._tasks[n]=null,r.abort))try{r.abort()}catch{}e._active=NaN,FT(e)}function FT(e){if(!e._active&&e._call){var t=e._data;e._data=void 0,e._call(e._error,t)}}function HK(e){if(e==null)e=1/0;else if(!((e=+e)>=1))throw new Error("invalid concurrency");return new HC(e)}const nze=Object.freeze(Object.defineProperty({__proto__:null,queue:HK},Symbol.toStringTag,{value:"Module"}));var uo="$";function GT(){}GT.prototype=I2.prototype={constructor:GT,has:function(e){return uo+e in this},get:function(e){return this[uo+e]},set:function(e,t){return this[uo+e]=t,this},remove:function(e){var t=uo+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===uo&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===uo&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===uo&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===uo&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===uo&&++e;return e},empty:function(){for(var e in this)if(e[0]===uo)return!1;return!0},each:function(e){for(var t in this)t[0]===uo&&e(this[t],t.slice(1),this)}};function I2(e,t){var n=new GT;if(e instanceof GT)e.each(function(s,u){n.set(u,s)});else if(Array.isArray(e)){var r=-1,i=e.length,o;if(t==null)for(;++r<i;)n.set(r,e[r]);else for(;++r<i;)n.set(t(o=e[r],r,e),o)}else if(e)for(var a in e)n.set(a,e[a]);return n}function nH(){}var Ou=I2.prototype;nH.prototype={constructor:nH,has:Ou.has,add:function(e){return e+="",this[uo+e]=e,this},remove:Ou.remove,clear:Ou.clear,values:Ou.keys,size:Ou.size,empty:Ou.empty,each:Ou.each};var ize={value:function(){}};function UK(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new j0(n)}function j0(e){this._=e}function oze(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}j0.prototype=UK.prototype={constructor:j0,on:function(e,t){var n=this._,r=oze(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=aze(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=iH(n[i],e.name,t);else if(t==null)for(i in n)n[i]=iH(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new j0(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function aze(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function iH(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ize,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}function C2(e,t){var n,r=UK("beforesend","progress","load","error"),i,o=I2(),a=new XMLHttpRequest,s=null,u=null,c,l,f=0;typeof XDomainRequest<"u"&&!("withCredentials"in a)&&/^(http(s)?:)?\/\//.test(e)&&(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=a.ontimeout=h:a.onreadystatechange=function(p){a.readyState>3&&h(p)};function h(p){var d=a.status,m;if(!d&&lze(a)||d>=200&&d<300||d===304){if(c)try{m=c.call(n,a)}catch(g){r.call("error",n,g);return}else m=a;r.call("load",n,m)}else r.call("error",n,p)}if(a.onprogress=function(p){r.call("progress",n,p)},n={header:function(p,d){return p=(p+"").toLowerCase(),arguments.length<2?o.get(p):(d==null?o.remove(p):o.set(p,d+""),n)},mimeType:function(p){return arguments.length?(i=p==null?null:p+"",n):i},responseType:function(p){return arguments.length?(l=p,n):l},timeout:function(p){return arguments.length?(f=+p,n):f},user:function(p){return arguments.length<1?s:(s=p==null?null:p+"",n)},password:function(p){return arguments.length<1?u:(u=p==null?null:p+"",n)},response:function(p){return c=p,n},get:function(p,d){return n.send("GET",p,d)},post:function(p,d){return n.send("POST",p,d)},send:function(p,d,m){return a.open(p,e,!0,s,u),i!=null&&!o.has("accept")&&o.set("accept",i+",*/*"),a.setRequestHeader&&o.each(function(g,v){a.setRequestHeader(v,g)}),i!=null&&a.overrideMimeType&&a.overrideMimeType(i),l!=null&&(a.responseType=l),f>0&&(a.timeout=f),m==null&&typeof d=="function"&&(m=d,d=null),m!=null&&m.length===1&&(m=sze(m)),m!=null&&n.on("error",m).on("load",function(g){m(null,g)}),r.call("beforesend",n,a),a.send(d??null),n},abort:function(){return a.abort(),n},on:function(){var p=r.on.apply(r,arguments);return p===r?n:p}},t!=null){if(typeof t!="function")throw new Error("invalid callback: "+t);return n.get(t)}return n}function sze(e){return function(t,n){e(t==null?n:null)}}function lze(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function SS(e,t){return function(n,r){var i=C2(n).mimeType(e).response(t);if(r!=null){if(typeof r!="function")throw new Error("invalid callback: "+r);return i.get(r)}return i}}const uze=SS("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),cze=SS("application/json",function(e){return JSON.parse(e.responseText)}),hze=SS("text/plain",function(e){return e.responseText}),fze=SS("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t});var oH={},SO={},wO=34,lm=10,AO=13;function zK(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function pze(e,t){var n=zK(e);return function(r,i){return t(n(r),i,e)}}function aH(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Pi(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function dze(e){return e<0?"-"+Pi(-e,6):e>9999?"+"+Pi(e,6):Pi(e,4)}function mze(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":dze(e.getUTCFullYear())+"-"+Pi(e.getUTCMonth()+1,2)+"-"+Pi(e.getUTCDate(),2)+(i?"T"+Pi(t,2)+":"+Pi(n,2)+":"+Pi(r,2)+"."+Pi(i,3)+"Z":r?"T"+Pi(t,2)+":"+Pi(n,2)+":"+Pi(r,2)+"Z":n||t?"T"+Pi(t,2)+":"+Pi(n,2)+"Z":"")}function VK(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var p,d,m=i(f,function(g,v){if(p)return p(g,v-1);d=g,p=h?pze(g,h):zK(g)});return m.columns=d||[],m}function i(f,h){var p=[],d=f.length,m=0,g=0,v,b=d<=0,y=!1;f.charCodeAt(d-1)===lm&&--d,f.charCodeAt(d-1)===AO&&--d;function _(){if(b)return SO;if(y)return y=!1,oH;var S,E=m,I;if(f.charCodeAt(E)===wO){for(;m++<d&&f.charCodeAt(m)!==wO||f.charCodeAt(++m)===wO;);return(S=m)>=d?b=!0:(I=f.charCodeAt(m++))===lm?y=!0:I===AO&&(y=!0,f.charCodeAt(m)===lm&&++m),f.slice(E+1,S-1).replace(/""/g,'"')}for(;m<d;){if((I=f.charCodeAt(S=m++))===lm)y=!0;else if(I===AO)y=!0,f.charCodeAt(m)===lm&&++m;else if(I!==n)continue;return f.slice(E,S)}return b=!0,f.slice(E,d)}for(;(v=_())!==SO;){for(var T=[];v!==oH&&v!==SO;)T.push(v),v=_();h&&(T=h(T,g++))==null||p.push(T)}return p}function o(f,h){return f.map(function(p){return h.map(function(d){return l(p[d])}).join(e)})}function a(f,h){return h==null&&(h=aH(f)),[h.map(l).join(e)].concat(o(f,h)).join(`
`)}function s(f,h){return h==null&&(h=aH(f)),o(f,h).join(`
`)}function u(f){return f.map(c).join(`
`)}function c(f){return f.map(l).join(e)}function l(f){return f==null?"":f instanceof Date?mze(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:c,formatValue:l}}var gze=VK(","),yze=gze.parse,vze=VK("	"),bze=vze.parse;function YK(e,t){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=C2(n).mimeType(e);return o.row=function(a){return arguments.length?o.response(_ze(t,r=a)):r},o.row(r),i?o.get(i):o}}function _ze(e,t){return function(n){return e(n.responseText,t)}}const Tze=YK("text/csv",yze),Eze=YK("text/tab-separated-values",bze),Sze=Object.freeze(Object.defineProperty({__proto__:null,csv:Tze,html:uze,json:cze,request:C2,text:hze,tsv:Eze,xml:fze},Symbol.toStringTag,{value:"Module"}));function UC(){return UC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UC.apply(this,arguments)}function wze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kze(r.key),r)}}function Oze(e,t,n){return t&&Aze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kze(e){var t=xze(e,"string");return typeof t=="symbol"?t:String(t)}function xze(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ize(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zC(e,t)}function zC(e,t){return zC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},zC(e,t)}function Cze(e){var t=Rze();return function(){var n=HT(e),r;if(t){var i=HT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Pze(this,r)}}function Pze(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dze(e)}function Dze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function HT(e){return HT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HT(e)}let wS=function(e){Ize(n,e);var t=Cze(n);function n({items:r}){var i;return wze(this,n),i=t.call(this),i.state={items:r,isSorting:!1},i}return Oze(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(r){this.setState({items:r.items})}},{key:"onSortStart",value:function({node:r,index:i,collection:o},a){a.stopImmediatePropagation();const{onSortStart:s}=this.props;this.setState({isSorting:!0}),s&&s(this.ref),this.sortingIndex=i,this.sortStartTop=a.offsetTop,this.sortStartLeft=a.offsetLeft}},{key:"onSortMove",value:function(){}},{key:"onSortEnd",value:function({oldIndex:r,newIndex:i}){const{onSortEnd:o}=this.props,{items:a}=this.state;this.setState({items:yfe(a,r,i),isSorting:!1}),o&&o(this.state.items),this.sortingIndex=null}},{key:"render",value:function(){const r=this.props.component,{items:i,isSorting:o}=this.state,a={isSorting:o,items:i,onSortEnd:this.onSortEnd.bind(this),onSortStart:this.onSortStart.bind(this),onSortMove:this.onSortMove.bind(this)};return O.createElement(r,UC({},this.props,a,{ref:s=>{this.ref=s}}))}}]),n}(O.Component);wS.propTypes={axis:N.string,className:N.string,component:N.func,editable:N.bool,handleConfigTrack:N.func,handleResizeTrack:N.func,height:N.number,helperClass:N.string,itemClass:N.string,itemControlAlignLeft:N.bool,itemReactClass:N.func,items:N.array,onAddSeries:N.func,onCloseTrack:N.func,onCloseTrackMenuOpened:N.func,onConfigTrackMenuOpened:N.func,onSortEnd:N.func,onSortStart:N.func,referenceAncestor:N.string,resizeHandles:N.object,useDragHandle:N.bool,width:N.number};wS.defaultProps={className:"list stylizedList",itemClass:"item stylizedItem",width:400,height:600};const OO={"top-right-handle":"_top-right-handle_cizw2_1","bottom-right-handle":"_bottom-right-handle_cizw2_2","top-left-handle":"_top-left-handle_cizw2_7","bottom-left-handle":"_bottom-left-handle_cizw2_8","top-draggable-handle":"_top-draggable-handle_cizw2_13","bottom-draggable-handle":"_bottom-draggable-handle_cizw2_14","left-draggable-handle":"_left-draggable-handle_cizw2_15","right-draggable-handle":"_right-draggable-handle_cizw2_16","draggable-div":"_draggable-div_cizw2_22","top-draggable-handle-grabber":"_top-draggable-handle-grabber_cizw2_27","bottom-draggable-handle-grabber":"_bottom-draggable-handle-grabber_cizw2_28","left-draggable-handle-grabber":"_left-draggable-handle-grabber_cizw2_43","right-draggable-handle-grabber":"_right-draggable-handle-grabber_cizw2_44"};function Nze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jze(r.key),r)}}function Lze(e,t,n){return t&&Mze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jze(e){var t=Bze(e,"string");return typeof t=="symbol"?t:String(t)}function Bze(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Fze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VC(e,t)}function VC(e,t){return VC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},VC(e,t)}function Gze(e){var t=Uze();return function(){var n=UT(e),r;if(t){var i=UT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Hze(this,r)}}function Hze(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cn(e)}function Cn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function UT(e){return UT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UT(e)}let XK=function(e){Fze(n,e);var t=Gze(n);function n(r){var i;return Nze(this,n),i=t.call(this,r),i.dragTopRight=as().on("start",i.dragStart.bind(Cn(i))).on("drag",i.dragTopRightFunc.bind(Cn(i))),i.dragTopLeft=as().on("start",i.dragStart.bind(Cn(i))).on("drag",i.dragTopLeftFunc.bind(Cn(i))),i.dragBottomRight=as().on("start",i.dragStart.bind(Cn(i))).on("drag",i.dragBottomRightFunc.bind(Cn(i))),i.dragBottomLeft=as().on("start",i.dragStart.bind(Cn(i))).on("drag",i.dragBottomLeftFunc.bind(Cn(i))),i.dragBottom=as().on("start",i.dragStart.bind(Cn(i))).on("drag",i.dragBottomFunc.bind(Cn(i))),i.dragTop=as().on("start",i.dragStart.bind(Cn(i))).on("drag",i.dragTopFunc.bind(Cn(i))),i.dragLeft=as().on("start",i.dragStart.bind(Cn(i))).on("drag",i.dragLeftFunc.bind(Cn(i))),i.dragRight=as().on("start",i.dragStart.bind(Cn(i))).on("drag",i.dragRightFunc.bind(Cn(i))),i.minWidth=10,i.minHeight=10,i.bottomHandleWidth=20,i.state={uid:i.props.uid,width:i.props.width,height:i.props.height,top:i.props.top,left:i.props.left},i.domBody=Wt("body").node(),i}return Lze(n,[{key:"componentDidMount",value:function(){Wt(this.bottomHandle).call(this.dragBottom),Wt(this.topHandle).call(this.dragTop),Wt(this.leftHandle).call(this.dragLeft),Wt(this.rightHandle).call(this.dragRight)}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){"width"in r&&this.setState({width:r.width}),"height"in r&&this.setState({height:r.height})}},{key:"dragBottomFunc",value:function(r){const i=yr(r,this.domBody);let o=this.dragStartHeight+(i[1]-this.dragStartMousePos[1]);o=o>this.minHeight?o:this.minHeight,this.setState({height:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragLeftFunc",value:function(r){const i=yr(r,this.domBody);let o=this.dragStartWidth-(i[0]-this.dragStartMousePos[0]);o=o>this.minWidth?o:this.minWidth;let a=this.dragStartLeft+i[0]-this.dragStartMousePos[0];a=o>this.minWidth?a:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:a,width:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopFunc",value:function(r){const i=yr(r,this.domBody);let o=this.dragStartHeight-(i[1]-this.dragStartMousePos[1]);o=o>this.minHeight?o:this.minHeight;let a=this.dragStartTop+i[1]-this.dragStartMousePos[1];a=o>this.minHeight?a:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:a,height:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragRightFunc",value:function(r){const i=yr(r,this.domBody);let o=this.dragStartWidth+(i[0]-this.dragStartMousePos[0]);o=o>this.minWidth?o:this.minWidth,this.setState({width:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomLeftFunc",value:function(r){const i=yr(r,this.domBody);let o=this.dragStartHeight+(i[1]-this.dragStartMousePos[1]);o=o>this.minHeight?o:this.minHeight;let a=this.dragStartWidth-(i[0]-this.dragStartMousePos[0]);a=a>this.minWidth?a:this.minWidth;let s=this.dragStartLeft+i[0]-this.dragStartMousePos[0];s=a>this.minWidth?s:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:s,width:a,height:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomRightFunc",value:function(r){const i=yr(r,this.domBody);let o=this.dragStartWidth+(i[0]-this.dragStartMousePos[0]);o=o>this.minWidth?o:this.minWidth;let a=this.dragStartHeight+(i[1]-this.dragStartMousePos[1]);a=a>this.minHeight?a:this.minHeight,this.setState({width:o,height:a}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopRightFunc",value:function(r){const i=yr(r,this.domBody);let o=this.dragStartHeight-(i[1]-this.dragStartMousePos[1]);o=o>this.minHeight?o:this.minHeight;let a=this.dragStartTop+i[1]-this.dragStartMousePos[1];a=o>this.minHeight?a:this.dragStartTop+this.dragStartHeight-this.minHeight;let s=this.dragStartWidth+(i[0]-this.dragStartMousePos[0]);s=s>this.minWidth?s:this.minWidth,this.setState({top:a,width:s,height:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopLeftFunc",value:function(r){const i=yr(r,this.domBody);let o=this.dragStartWidth-(i[0]-this.dragStartMousePos[0]);o=o>this.minWidth?o:this.minWidth;let a=this.dragStartLeft+i[0]-this.dragStartMousePos[0];a=o>this.minWidth?a:this.dragStartLeft+this.dragStartWidth-this.minWidth;let s=this.dragStartHeight-(i[1]-this.dragStartMousePos[1]);s=s>this.minHeight?s:this.minHeight;let u=this.dragStartTop+i[1]-this.dragStartMousePos[1];u=s>this.minHeight?u:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:u,left:a,width:o,height:s}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragStart",value:function(r){this.dragStartMousePos=yr(r,this.domBody),this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,this.dragStartTop=this.state.top,this.dragStartLeft=this.state.left,r.sourceEvent.stopPropagation()}},{key:"sizeChanged",value:function(){this.props.sizeChanged&&this.props.sizeChanged(this.state)}},{key:"rotateClicked",value:function(){this.props.trackRotated(this.state.uid)}},{key:"closeClicked",value:function(){this.props.trackClosed(this.state.uid)}},{key:"render",value:function(){const r=this.props.theme===wr?"white":"black",i={top:this.state.top,left:this.state.left,width:this.state.width,height:this.state.height,opacity:this.props.opacity},o=24,a=24,s={left:this.state.width/2-o/2,width:o},u={top:this.state.height/2-a/2,height:a},c={bottom:{...s,bottom:1},top:{...s,top:1},left:{...u,left:1},right:{...u,right:1}},l=[...this.props.resizeHandles].map(f=>O.createElement("div",{key:f,ref:h=>{this[`${f}Handle`]=h},className:OO[`${f}-draggable-handle`],style:c[f],title:"Resize track"},O.createElement("div",{className:OO[`${f}-draggable-handle-grabber`],style:{borderColor:r}})));return O.createElement("div",{ref:f=>{this.divContainer=f},className:ir(this.props.className,OO["draggable-div"]),style:i},l)}}]),n}(O.Component);XK.propTypes={className:N.string,height:N.number,left:N.number,opacity:N.number,resizeHandles:N.object,sizeChanged:N.func,top:N.number,trackClosed:N.func,trackRotated:N.func,uid:N.string,width:N.number,theme:N.symbol};const zze=oh(XK);function Vze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wze(r.key),r)}}function Xze(e,t,n){return t&&Yze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wze(e){var t=qze(e,"string");return typeof t=="symbol"?t:String(t)}function qze(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $ze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YC(e,t)}function YC(e,t){return YC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},YC(e,t)}function Kze(e){var t=Jze();return function(){var n=zT(e),r;if(t){var i=zT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Qze(this,r)}}function Qze(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zze(e)}function Zze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zT(e){return zT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zT(e)}let WK=function(e){$ze(n,e);var t=Kze(n);function n(r){var i;return Vze(this,n),i=t.call(this,r),i.state={controlsVisible:!1},i}return Xze(n,[{key:"shouldComponentUpdate",value:function(){return!this.resizing}},{key:"handleMouseEnter",value:function(){this.setState({controlsVisible:!0})}},{key:"handleMouseLeave",value:function(){this.setState({controlsVisible:!1})}},{key:"handleMouseMove",value:function(){this.setState({controlsVisible:!0})}},{key:"getControls",value:function(){let r=null;return this.moveable?r=ox(()=>O.createElement("svg",{className:"no-zoom",height:"10px",onClick:()=>{},style:this.getMoveImgStyle(),width:"10px"},O.createElement("use",{xlinkHref:"#move"}))):r=ox(()=>O.createElement("div",null)),O.createElement("div",{style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.7)",right:"3px",top:"3px",pointerEvents:"none",paddingLeft:"5px",paddingRight:"5px",borderRadius:"5px",border:"1px solid #dddddd"}},O.createElement(r,null),O.createElement("svg",{ref:i=>{this.imgConfig=i},className:"no-zoom",height:"10px",onClick:()=>{const i=Fn.findDOMNode(this.imgConfig).getBoundingClientRect();this.props.onConfigTrackMenuOpened(this.props.uid,i)},style:this.getSettingsImgStyle(),width:"10px"},O.createElement("use",{xlinkHref:"#cog"})),O.createElement("svg",{ref:i=>{this.imgAdd=i},className:"no-zoom",height:"10px",onClick:()=>this.props.onAddSeries(this.props.uid),style:this.getAddImgStyle(),width:"10px"},O.createElement("use",{xlinkHref:"#plus"})),O.createElement("svg",{ref:i=>{this.imgClose=i},className:"no-zoom",height:"10px",onClick:()=>{const i=Fn.findDOMNode(this.imgClose).getBoundingClientRect();this.props.onCloseTrackMenuOpened(this.props.uid,i)},style:this.getCloseImgStyle(),width:"10px"},O.createElement("use",{xlinkHref:"#cross"})))}}]),n}(O.Component);WK.propTypes={configMenuOpen:N.bool,onConfigTrackMenuOpened:N.func,onCloseTrackMenuOpened:N.func,onAddSeries:N.func,uid:N.string};function e8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t8e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n8e(r.key),r)}}function r8e(e,t,n){return t&&t8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n8e(e){var t=i8e(e,"string");return typeof t=="symbol"?t:String(t)}function i8e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function o8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XC(e,t)}function XC(e,t){return XC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},XC(e,t)}function a8e(e){var t=u8e();return function(){var n=VT(e),r;if(t){var i=VT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s8e(this,r)}}function s8e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l8e(e)}function l8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function VT(e){return VT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VT(e)}let AS=function(e){o8e(n,e);var t=a8e(n);function n(r){var i;return e8e(this,n),i=t.call(this,r),i.moveable=!0,i}return r8e(n,[{key:"render",value:function(){return O.createElement("div",{ref:r=>{this.el=r},className:this.props.className,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:()=>{this.handleMouseLeave()},style:{height:this.props.height,width:this.props.width}},O.createElement(zze,{key:this.props.uid,height:this.props.height,resizeHandles:this.props.editable?this.props.resizeHandles:new Set,sizeChanged:r=>this.props.handleResizeTrack(this.props.uid,r.width,r.height),style:{background:"transparent"},uid:this.props.uid,width:this.props.width}),this.props.editable&&this.getControls(this.state.controlsVisible||this.props.item.configMenuVisible))}}]),n}(WK);AS.propTypes={className:N.string,uid:N.string,item:N.object,height:N.number,width:N.number};function c8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h8e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p8e(r.key),r)}}function f8e(e,t,n){return t&&h8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function p8e(e){var t=d8e(e,"string");return typeof t=="symbol"?t:String(t)}function d8e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function m8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WC(e,t)}function WC(e,t){return WC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},WC(e,t)}function g8e(e){var t=b8e();return function(){var n=YT(e),r;if(t){var i=YT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y8e(this,r)}}function y8e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v8e(e)}function v8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function YT(e){return YT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YT(e)}const Lb={pointerEvents:"all"};let qK=function(e){m8e(n,e);var t=g8e(n);function n(){return c8e(this,n),t.apply(this,arguments)}return f8e(n,[{key:"getControls",value:function(r){return O.createElement(cS,{configMenuVisible:this.props.item.configMenuVisible,imgStyleAdd:Lb,imgStyleClose:Lb,imgStyleMove:Lb,imgStyleSettings:Lb,isMoveable:this.moveable,isVisible:r,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),n}(AS);const _8e=n9(e=>O.createElement(qK,{className:e.className,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width}));function qC(){return qC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qC.apply(this,arguments)}const $K=Dfe(({className:e,items:t,itemClass:n,itemControlAlignLeft:r,sortingIndex:i,useDragHandle:o,sortableHandlers:a,height:s,width:u,onCloseTrack:c,onCloseTrackMenuOpened:l,onConfigTrackMenuOpened:f,onAddSeries:h,handleConfigTrack:p,editable:d,itemReactClass:m,handleResizeTrack:g,resizeHandles:v})=>{const b=t.map((y,_)=>O.createElement(m,{key:`sci-${y.uid}`,className:n,controlAlignLeft:r,sortingIndex:i,index:_,uid:y.uid,height:y.height,width:y.width,item:y,useDragHandle:o,onCloseTrack:c,onCloseTrackMenuOpened:l,onConfigTrackMenuOpened:f,onAddSeries:h,handleConfigTrack:p,editable:d,handleResizeTrack:g,resizeHandles:v}));return O.createElement("div",qC({className:e,style:{height:s,width:u,background:"transparent"}},a),b)}),T8e={"horizontal-tiled-plot":"_horizontal-tiled-plot_1bqkg_1"};function E8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S8e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A8e(r.key),r)}}function w8e(e,t,n){return t&&S8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function A8e(e){var t=O8e(e,"string");return typeof t=="symbol"?t:String(t)}function O8e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function k8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$C(e,t)}function $C(e,t){return $C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$C(e,t)}function x8e(e){var t=C8e();return function(){var n=XT(e),r;if(t){var i=XT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return I8e(this,r)}}function I8e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B0(e)}function B0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function XT(e){return XT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},XT(e)}function sH(e){return e&&e.sourceEvent}let WT=function(e){k8e(n,e);var t=x8e(n);function n(r){var i;return E8e(this,n),i=t.call(this,r),i.brushBehavior=g1().on("start",i.brushStarted.bind(B0(i))).on("brush",i.brushed.bind(B0(i))).on("end",i.brushedEnded.bind(B0(i))),i}return w8e(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(r,i){return this.rangeSelectionTriggered?(this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==r.rangeSelection&&this.moveBrush(r.rangeSelection[0]?r.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==i):this.props.rangeSelection!==r.rangeSelection?(this.moveBrush(r.rangeSelection[0]?r.rangeSelection[0]:null,r.rangeSelectionEnd),this.state!==i):!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,Cf(this.brushEl,Bo["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(r){const i=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!sH(r)||!this.props.onRangeSelection||i)&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(r.selection))}},{key:"brushStarted",value:function(r){!sH(r)||!r.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(r){if(!this.props.is1dRangeSelection)return;const i=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,r.selection&&r.sourceEvent&&this.props.onRangeSelection&&!i&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(r.selection)),r.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(r,i=!1){if(!this.brushEl)return;const o=r?[this.props.scale(r[0]),this.props.scale(r[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,i?this.brushEl.transition().call(this.brushBehavior.move,o):this.brushEl.call(this.brushBehavior.move,o)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const r=this.props.tracks.map(a=>a.height).reduce(wl,0),i=this.props.tracks.map(a=>rd(a)).reduce(Vy,!1),o=this.props.isRangeSelectionActive?Bo["track-range-selection-active"]:Bo["track-range-selection"];return O.createElement("div",{className:ir("horizontal-tiled-plot",T8e["horizontal-tiled-plot"])},i&&O.createElement("svg",{ref:a=>{this.brushEl=Wt(a)},className:o,style:{height:r,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"}),O.createElement(wS,{className:ir(Fo.list,Fo.stylizedList),component:$K,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:r,helperClass:Fo.stylizedHelper,itemClass:Fo.stylizedItem,itemReactClass:_8e,items:this.props.tracks.map(a=>({configMenuVisible:a.uid===this.props.configTrackMenuId,uid:a.uid||zt.nice(),width:this.props.width,height:a.height,value:a.value})),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:this.props.width}))}}]),n}(O.Component);WT.propTypes={configTrackMenuId:N.string,editable:N.bool,handleConfigTrack:N.func,handleResizeTrack:N.func,handleSortEnd:N.func,is1dRangeSelection:N.bool,isRangeSelectionActive:N.bool,onAddSeries:N.func,onCloseTrack:N.func,onCloseTrackMenuOpened:N.func,onConfigTrackMenuOpened:N.func,onRangeSelection:N.func,onRangeSelectionEnd:N.func,onRangeSelectionReset:N.func,onRangeSelectionStart:N.func,rangeSelection:N.array,rangeSelectionEnd:N.bool,referenceAncestor:N.func,resizeHandles:N.object,scale:N.func,tracks:N.array,width:N.number};function P8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D8e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N8e(r.key),r)}}function R8e(e,t,n){return t&&D8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function N8e(e){var t=M8e(e,"string");return typeof t=="symbol"?t:String(t)}function M8e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function L8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KC(e,t)}function KC(e,t){return KC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},KC(e,t)}function j8e(e){var t=G8e();return function(){var n=qT(e),r;if(t){var i=qT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return B8e(this,r)}}function B8e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F8e(e)}function F8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qT(e){return qT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qT(e)}const jb={pointerEvents:"all"};let KK=function(e){L8e(n,e);var t=j8e(n);function n(){return P8e(this,n),t.apply(this,arguments)}return R8e(n,[{key:"getControls",value:function(r){return O.createElement(cS,{imgStyleAdd:jb,imgStyleClose:jb,imgStyleMove:jb,imgStyleSettings:jb,isAlignLeft:this.props.controlAlignLeft,isMoveable:this.moveable,isVertical:!0,isVisible:r,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),n}(AS);function H8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U8e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V8e(r.key),r)}}function z8e(e,t,n){return t&&U8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function V8e(e){var t=Y8e(e,"string");return typeof t=="symbol"?t:String(t)}function Y8e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function F0(){return typeof Reflect<"u"&&Reflect.get?F0=Reflect.get.bind():F0=function(e,t,n){var r=X8e(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},F0.apply(this,arguments)}function X8e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=zp(e),e!==null););return e}function W8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QC(e,t)}function QC(e,t){return QC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},QC(e,t)}function q8e(e){var t=K8e();return function(){var n=zp(e),r;if(t){var i=zp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $8e(this,r)}}function $8e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QK(e)}function QK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zp(e)}let Q8e=function(e){W8e(n,e);var t=q8e(n);function n(r,i){var o;H8e(this,n),o=t.call(this,r,i);const{registerViewportChanged:a,removeViewportChanged:s}=r,u=zt.nice();return o.uid=u,o.removeViewportChanged=s,o.viewportXDomain=null,o.viewportYDomain=null,a(u,o.viewportChanged.bind(QK(o))),o}return z8e(n,[{key:"viewportChanged",value:function(r,i){const o=r.domain(),a=i.domain();this.viewportXDomain=o,this.viewportYDomain=a,this.draw()}},{key:"draw",value:function(){const r=this.pMain;if(!this.viewportXDomain||!this.viewportYDomain)return;r.clear(),r.lineStyle(1,255,1),r.beginFill(16740363,1);const i=this._xScale(this.viewportXDomain[0]),o=this._yScale(this.viewportYDomain[0]),a=this._xScale(this.viewportXDomain[1])-this._xScale(this.viewportXDomain[0]),s=this._yScale(this.viewportYDomain[1])-this._yScale(this.viewportYDomain[0]);this.pMain.drawRect(i,o,a,s)}},{key:"zoomed",value:function(r,i){this.xScale(r),this.yScale(i),this.draw()}},{key:"setPosition",value:function(r){F0(zp(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.draw()}}]),n}(Ai);function ZK(e){this.size=0,this.limit=e,this._keymap={}}function Z8e(e,t){const n={key:e,value:t};if(this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit)return this.shift();this.size+=1}function J8e(){const e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):(this.head=void 0,this.tail=void 0),e.newer=void 0,e.older=void 0,delete this._keymap[e.key],this.size-=1),e}function e9e(e,t){const n=this._keymap[e];if(n!==void 0)return n===this.tail||(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n),t?n:n.value}function t9e(e){return this._keymap[e]}function r9e(e,t){const n=this.get(e,!0);let r;return n?(r=n.value,n.value=t):(r=this.put(e,t),r&&(r=r.value)),r}function n9e(e){const t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):(this.head=void 0,this.tail=void 0),this.size-=1,t.value}function i9e(){this.head=void 0,this.tail=void 0,this.size=0,this._keymap={}}function o9e(){return Object.keys(this._keymap)}function a9e(e,t,n){let r;if(t===!0?(n=!0,t=void 0):typeof t!="object"&&(t=this),n)for(r=this.tail;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.head;r;)e.call(t,r.key,r.value,this),r=r.newer}function s9e(){const e=[];let t=this.head;for(;t;)e.push({key:t.key.toJSON(),value:t.value.toJSON()}),t=t.newer;return e}function l9e(){let e="",t=this.head;for(;t;)e+=`${String(t.key)}:${t.value}`,t=t.newer,t&&(e+=" < ");return e}Object.assign(ZK.prototype,{put:Z8e,get:e9e,find:t9e,keys:o9e,set:r9e,shift:J8e,remove:n9e,removeAll:i9e,forEach:a9e,toJSON:s9e,toString:l9e});const JK="1.13.4",u9e="_button_1wnjn_1",kO={button:u9e,"button-shortcut":"_button-shortcut_1wnjn_35"},Is=O.forwardRef((e,t)=>O.createElement("button",{ref:t,className:kO[e.styleName]??kO.button,disabled:e.disable,onBlur:e.onBlur,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseOut:e.onMouseOut,onMouseUp:e.onMouseUp,type:"button"},e.children,e.shortcut&&O.createElement("span",{className:kO["button-shortcut"]},e.shortcut)));Is.defaultProps={onClick:()=>{},styleName:"",type:"button"};Is.propTypes={children:N.any,disable:N.bool,onBlur:N.func,onClick:N.func,onMouseDown:N.func,onMouseOut:N.func,onMouseUp:N.func,shortcut:N.string,type:N.string,styleName:N.string};const c9e="_cross_2ke8w_1",h9e={cross:c9e};function eQ(){return O.createElement("div",{className:h9e.cross})}function ZC(){return ZC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZC.apply(this,arguments)}const{Provider:f9e,Consumer:p9e}=O.createContext({close:Yo,open:Yo}),OS=e=>O.forwardRef((t,n)=>O.createElement(p9e,null,r=>O.createElement(e,ZC({ref:n},t,{modal:r})))),Fh={"modal-background":"_modal-background_zzhoe_1","modal-hide":"_modal-hide_zzhoe_13","modal-wrap":"_modal-wrap_zzhoe_17","modal-window":"_modal-window_zzhoe_25","modal-window-max-height":"_modal-window-max-height_zzhoe_38","modal-content":"_modal-content_zzhoe_42"};function P2(e){const t=()=>{e.modal.close(),e.onClose&&e.onClose()};return O.createElement("div",{className:ir(Fh["modal-background"],{[Fh["modal-hide"]]:e.hide})},O.createElement("div",{className:Fh["modal-wrap"]},O.createElement("div",{className:ir(Fh["modal-window"],{[Fh["modal-window-max-height"]]:e.maxHeight})},e.closeButton&&O.createElement(Is,{onClick:t},O.createElement(eQ,null)),O.createElement("div",{className:Fh["modal-content"]},e.children))))}P2.defaultProps={closeButton:!0,hide:!1,maxHeight:!1};P2.propTypes={children:N.element.isRequired,closeButton:N.bool,hide:N.bool,maxHeight:N.bool,modal:N.object.isRequired,onClose:N.func};const d9e=OS(P2),xO={"dialog-header":"_dialog-header_wp50s_1","dialog-main-max-height":"_dialog-main-max-height_wp50s_20","dialog-footer":"_dialog-footer_wp50s_31","dialog-footer-max-height":"_dialog-footer-max-height_wp50s_31"};function D2(e){const t=()=>{e.modal.close(),e.onCancel&&e.onCancel()},n=()=>{e.modal.close(),e.onOkay&&e.onOkay()};return O.createElement(d9e,{closeButton:!1,hide:e.hide,maxHeight:e.maxHeight},O.createElement(O.Fragment,null,O.createElement("header",{className:xO["dialog-header"]},O.createElement("h3",null,e.title),O.createElement(Is,{onClick:t},O.createElement(eQ,null))),e.maxHeight?O.createElement("main",{className:ir(e.maxHeight&&xO["dialog-main-max-height"])},e.children):O.createElement("main",null,e.children),O.createElement("footer",{className:xO[e.maxHeight?"dialog-footer-max-height":"dialog-footer"]},e.okayOnly?O.createElement("div",null):O.createElement(Is,{onClick:t,shortcut:e.cancelShortcut},e.cancelTitle),O.createElement(Is,{onClick:n,shortcut:e.okayShortcut},e.okayTitle))))}D2.defaultProps={cancelTitle:"Cancel",hide:!1,maxHeight:!1,okayOnly:!1,okayTitle:"Ok"};D2.propTypes={cancelShortcut:N.string,cancelTitle:N.string,children:N.object,hide:N.bool,maxHeight:N.bool,modal:N.object.isRequired,okayShortcut:N.string,okayTitle:N.string,okayOnly:N.bool,onCancel:N.func.isRequired,onOkay:N.func.isRequired,title:N.string.isRequired};const vv=OS(D2);var bo={},bv={},m9e=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;const tQ=m9e;var g9e=typeof self=="object"&&self&&self.Object===Object&&self,y9e=tQ||g9e||Function("return this")();const la=y9e;var v9e=la.Symbol;const Ya=v9e;var rQ=Object.prototype,b9e=rQ.hasOwnProperty,_9e=rQ.toString,um=Ya?Ya.toStringTag:void 0;function T9e(e){var t=b9e.call(e,um),n=e[um];try{e[um]=void 0;var r=!0}catch{}var i=_9e.call(e);return r&&(t?e[um]=n:delete e[um]),i}var E9e=Object.prototype,S9e=E9e.toString;function w9e(e){return S9e.call(e)}var A9e="[object Null]",O9e="[object Undefined]",lH=Ya?Ya.toStringTag:void 0;function uu(e){return e==null?e===void 0?O9e:A9e:lH&&lH in Object(e)?T9e(e):w9e(e)}var k9e=Array.isArray;const Si=k9e;function ea(e){return e!=null&&typeof e=="object"}var x9e="[object String]";function I9e(e){return typeof e=="string"||!Si(e)&&ea(e)&&uu(e)==x9e}const C9e=Object.freeze(Object.defineProperty({__proto__:null,default:I9e},Symbol.toStringTag,{value:"Module"})),P9e=Us(C9e);function D9e(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[++i];if(n(o[u],u,o)===!1)break}return t}}var R9e=D9e();const nQ=R9e;function N9e(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var M9e="[object Arguments]";function uH(e){return ea(e)&&uu(e)==M9e}var iQ=Object.prototype,L9e=iQ.hasOwnProperty,j9e=iQ.propertyIsEnumerable,B9e=uH(function(){return arguments}())?uH:function(e){return ea(e)&&L9e.call(e,"callee")&&!j9e.call(e,"callee")};const $T=B9e;function F9e(){return!1}var oQ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cH=oQ&&typeof module=="object"&&module&&!module.nodeType&&module,G9e=cH&&cH.exports===oQ,hH=G9e?la.Buffer:void 0,H9e=hH?hH.isBuffer:void 0,U9e=H9e||F9e;const Ty=U9e;var z9e=9007199254740991,V9e=/^(?:0|[1-9]\d*)$/;function R2(e,t){var n=typeof e;return t=t??z9e,!!t&&(n=="number"||n!="symbol"&&V9e.test(e))&&e>-1&&e%1==0&&e<t}var Y9e=9007199254740991;function N2(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Y9e}var X9e="[object Arguments]",W9e="[object Array]",q9e="[object Boolean]",$9e="[object Date]",K9e="[object Error]",Q9e="[object Function]",Z9e="[object Map]",J9e="[object Number]",e7e="[object Object]",t7e="[object RegExp]",r7e="[object Set]",n7e="[object String]",i7e="[object WeakMap]",o7e="[object ArrayBuffer]",a7e="[object DataView]",s7e="[object Float32Array]",l7e="[object Float64Array]",u7e="[object Int8Array]",c7e="[object Int16Array]",h7e="[object Int32Array]",f7e="[object Uint8Array]",p7e="[object Uint8ClampedArray]",d7e="[object Uint16Array]",m7e="[object Uint32Array]",Dr={};Dr[s7e]=Dr[l7e]=Dr[u7e]=Dr[c7e]=Dr[h7e]=Dr[f7e]=Dr[p7e]=Dr[d7e]=Dr[m7e]=!0;Dr[X9e]=Dr[W9e]=Dr[o7e]=Dr[q9e]=Dr[a7e]=Dr[$9e]=Dr[K9e]=Dr[Q9e]=Dr[Z9e]=Dr[J9e]=Dr[e7e]=Dr[t7e]=Dr[r7e]=Dr[n7e]=Dr[i7e]=!1;function g7e(e){return ea(e)&&N2(e.length)&&!!Dr[uu(e)]}function M2(e){return function(t){return e(t)}}var aQ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jg=aQ&&typeof module=="object"&&module&&!module.nodeType&&module,y7e=jg&&jg.exports===aQ,IO=y7e&&tQ.process,v7e=function(){try{var e=jg&&jg.require&&jg.require("util").types;return e||IO&&IO.binding&&IO.binding("util")}catch{}}();const Vp=v7e;var fH=Vp&&Vp.isTypedArray,b7e=fH?M2(fH):g7e;const L2=b7e;var _7e=Object.prototype,T7e=_7e.hasOwnProperty;function sQ(e,t){var n=Si(e),r=!n&&$T(e),i=!n&&!r&&Ty(e),o=!n&&!r&&!i&&L2(e),a=n||r||i||o,s=a?N9e(e.length,String):[],u=s.length;for(var c in e)(t||T7e.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||R2(c,u)))&&s.push(c);return s}var E7e=Object.prototype;function j2(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||E7e;return e===n}function lQ(e,t){return function(n){return e(t(n))}}var S7e=lQ(Object.keys,Object);const w7e=S7e;var A7e=Object.prototype,O7e=A7e.hasOwnProperty;function k7e(e){if(!j2(e))return w7e(e);var t=[];for(var n in Object(e))O7e.call(e,n)&&n!="constructor"&&t.push(n);return t}function oo(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var x7e="[object AsyncFunction]",I7e="[object Function]",C7e="[object GeneratorFunction]",P7e="[object Proxy]";function B2(e){if(!oo(e))return!1;var t=uu(e);return t==I7e||t==C7e||t==x7e||t==P7e}function Ad(e){return e!=null&&N2(e.length)&&!B2(e)}function F2(e){return Ad(e)?sQ(e):k7e(e)}function uQ(e,t){return e&&nQ(e,t,F2)}function kS(e){return e}function cQ(e){return typeof e=="function"?e:kS}function D7e(e,t){return e&&uQ(e,cQ(t))}const R7e=Object.freeze(Object.defineProperty({__proto__:null,default:D7e},Symbol.toStringTag,{value:"Module"})),G2=Us(R7e);var N7e=lQ(Object.getPrototypeOf,Object);const hQ=N7e;var M7e="[object Object]",L7e=Function.prototype,j7e=Object.prototype,fQ=L7e.toString,B7e=j7e.hasOwnProperty,F7e=fQ.call(Object);function pQ(e){if(!ea(e)||uu(e)!=M7e)return!1;var t=hQ(e);if(t===null)return!0;var n=B7e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&fQ.call(n)==F7e}const G7e=Object.freeze(Object.defineProperty({__proto__:null,default:pQ},Symbol.toStringTag,{value:"Module"})),H7e=Us(G7e);function dQ(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function U7e(){this.__data__=[],this.size=0}function _v(e,t){return e===t||e!==e&&t!==t}function xS(e,t){for(var n=e.length;n--;)if(_v(e[n][0],t))return n;return-1}var z7e=Array.prototype,V7e=z7e.splice;function Y7e(e){var t=this.__data__,n=xS(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():V7e.call(t,n,1),--this.size,!0}function X7e(e){var t=this.__data__,n=xS(t,e);return n<0?void 0:t[n][1]}function W7e(e){return xS(this.__data__,e)>-1}function q7e(e,t){var n=this.__data__,r=xS(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Zs(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Zs.prototype.clear=U7e;Zs.prototype.delete=Y7e;Zs.prototype.get=X7e;Zs.prototype.has=W7e;Zs.prototype.set=q7e;function $7e(){this.__data__=new Zs,this.size=0}function K7e(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Q7e(e){return this.__data__.get(e)}function Z7e(e){return this.__data__.has(e)}var J7e=la["__core-js_shared__"];const CO=J7e;var pH=function(){var e=/[^.]+$/.exec(CO&&CO.keys&&CO.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function eVe(e){return!!pH&&pH in e}var tVe=Function.prototype,rVe=tVe.toString;function hh(e){if(e!=null){try{return rVe.call(e)}catch{}try{return e+""}catch{}}return""}var nVe=/[\\^$.*+?()[\]{}|]/g,iVe=/^\[object .+?Constructor\]$/,oVe=Function.prototype,aVe=Object.prototype,sVe=oVe.toString,lVe=aVe.hasOwnProperty,uVe=RegExp("^"+sVe.call(lVe).replace(nVe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cVe(e){if(!oo(e)||eVe(e))return!1;var t=B2(e)?uVe:iVe;return t.test(hh(e))}function hVe(e,t){return e==null?void 0:e[t]}function fh(e,t){var n=hVe(e,t);return cVe(n)?n:void 0}var fVe=fh(la,"Map");const Ey=fVe;var pVe=fh(Object,"create");const Sy=pVe;function dVe(){this.__data__=Sy?Sy(null):{},this.size=0}function mVe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gVe="__lodash_hash_undefined__",yVe=Object.prototype,vVe=yVe.hasOwnProperty;function bVe(e){var t=this.__data__;if(Sy){var n=t[e];return n===gVe?void 0:n}return vVe.call(t,e)?t[e]:void 0}var _Ve=Object.prototype,TVe=_Ve.hasOwnProperty;function EVe(e){var t=this.__data__;return Sy?t[e]!==void 0:TVe.call(t,e)}var SVe="__lodash_hash_undefined__";function wVe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Sy&&t===void 0?SVe:t,this}function Hc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hc.prototype.clear=dVe;Hc.prototype.delete=mVe;Hc.prototype.get=bVe;Hc.prototype.has=EVe;Hc.prototype.set=wVe;function AVe(){this.size=0,this.__data__={hash:new Hc,map:new(Ey||Zs),string:new Hc}}function OVe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function IS(e,t){var n=e.__data__;return OVe(t)?n[typeof t=="string"?"string":"hash"]:n.map}function kVe(e){var t=IS(this,e).delete(e);return this.size-=t?1:0,t}function xVe(e){return IS(this,e).get(e)}function IVe(e){return IS(this,e).has(e)}function CVe(e,t){var n=IS(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Js(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Js.prototype.clear=AVe;Js.prototype.delete=kVe;Js.prototype.get=xVe;Js.prototype.has=IVe;Js.prototype.set=CVe;var PVe=200;function DVe(e,t){var n=this.__data__;if(n instanceof Zs){var r=n.__data__;if(!Ey||r.length<PVe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Js(r)}return n.set(e,t),this.size=n.size,this}function Qo(e){var t=this.__data__=new Zs(e);this.size=t.size}Qo.prototype.clear=$7e;Qo.prototype.delete=K7e;Qo.prototype.get=Q7e;Qo.prototype.has=Z7e;Qo.prototype.set=DVe;var RVe="__lodash_hash_undefined__";function NVe(e){return this.__data__.set(e,RVe),this}function MVe(e){return this.__data__.has(e)}function KT(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Js;++t<n;)this.add(e[t])}KT.prototype.add=KT.prototype.push=NVe;KT.prototype.has=MVe;function LVe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function jVe(e,t){return e.has(t)}var BVe=1,FVe=2;function mQ(e,t,n,r,i,o){var a=n&BVe,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e),l=o.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,p=n&FVe?new KT:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var d=e[f],m=t[f];if(r)var g=a?r(m,d,f,t,e,o):r(d,m,f,e,t,o);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!LVe(t,function(v,b){if(!jVe(p,b)&&(d===v||i(d,v,n,r,o)))return p.push(b)})){h=!1;break}}else if(!(d===m||i(d,m,n,r,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var GVe=la.Uint8Array;const QT=GVe;function HVe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function UVe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var zVe=1,VVe=2,YVe="[object Boolean]",XVe="[object Date]",WVe="[object Error]",qVe="[object Map]",$Ve="[object Number]",KVe="[object RegExp]",QVe="[object Set]",ZVe="[object String]",JVe="[object Symbol]",eYe="[object ArrayBuffer]",tYe="[object DataView]",dH=Ya?Ya.prototype:void 0,PO=dH?dH.valueOf:void 0;function rYe(e,t,n,r,i,o,a){switch(n){case tYe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case eYe:return!(e.byteLength!=t.byteLength||!o(new QT(e),new QT(t)));case YVe:case XVe:case $Ve:return _v(+e,+t);case WVe:return e.name==t.name&&e.message==t.message;case KVe:case ZVe:return e==t+"";case qVe:var s=HVe;case QVe:var u=r&zVe;if(s||(s=UVe),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=VVe,a.set(e,t);var l=mQ(s(e),s(t),r,i,o,a);return a.delete(e),l;case JVe:if(PO)return PO.call(e)==PO.call(t)}return!1}function nYe(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function iYe(e,t,n){var r=t(e);return Si(e)?r:nYe(r,n(e))}function oYe(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function aYe(){return[]}var sYe=Object.prototype,lYe=sYe.propertyIsEnumerable,mH=Object.getOwnPropertySymbols,uYe=mH?function(e){return e==null?[]:(e=Object(e),oYe(mH(e),function(t){return lYe.call(e,t)}))}:aYe;const cYe=uYe;function JC(e){return iYe(e,F2,cYe)}var hYe=1,fYe=Object.prototype,pYe=fYe.hasOwnProperty;function dYe(e,t,n,r,i,o){var a=n&hYe,s=JC(e),u=s.length,c=JC(t),l=c.length;if(u!=l&&!a)return!1;for(var f=u;f--;){var h=s[f];if(!(a?h in t:pYe.call(t,h)))return!1}var p=o.get(e),d=o.get(t);if(p&&d)return p==t&&d==e;var m=!0;o.set(e,t),o.set(t,e);for(var g=a;++f<u;){h=s[f];var v=e[h],b=t[h];if(r)var y=a?r(b,v,h,t,e,o):r(v,b,h,e,t,o);if(!(y===void 0?v===b||i(v,b,n,r,o):y)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var _=e.constructor,T=t.constructor;_!=T&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof T=="function"&&T instanceof T)&&(m=!1)}return o.delete(e),o.delete(t),m}var mYe=fh(la,"DataView");const eP=mYe;var gYe=fh(la,"Promise");const tP=gYe;var yYe=fh(la,"Set");const rP=yYe;var vYe=fh(la,"WeakMap");const nP=vYe;var gH="[object Map]",bYe="[object Object]",yH="[object Promise]",vH="[object Set]",bH="[object WeakMap]",_H="[object DataView]",_Ye=hh(eP),TYe=hh(Ey),EYe=hh(tP),SYe=hh(rP),wYe=hh(nP),Lu=uu;(eP&&Lu(new eP(new ArrayBuffer(1)))!=_H||Ey&&Lu(new Ey)!=gH||tP&&Lu(tP.resolve())!=yH||rP&&Lu(new rP)!=vH||nP&&Lu(new nP)!=bH)&&(Lu=function(e){var t=uu(e),n=t==bYe?e.constructor:void 0,r=n?hh(n):"";if(r)switch(r){case _Ye:return _H;case TYe:return gH;case EYe:return yH;case SYe:return vH;case wYe:return bH}return t});const wy=Lu;var AYe=1,TH="[object Arguments]",EH="[object Array]",Bb="[object Object]",OYe=Object.prototype,SH=OYe.hasOwnProperty;function kYe(e,t,n,r,i,o){var a=Si(e),s=Si(t),u=a?EH:wy(e),c=s?EH:wy(t);u=u==TH?Bb:u,c=c==TH?Bb:c;var l=u==Bb,f=c==Bb,h=u==c;if(h&&Ty(e)){if(!Ty(t))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new Qo),a||L2(e)?mQ(e,t,n,r,i,o):rYe(e,t,u,n,r,i,o);if(!(n&AYe)){var p=l&&SH.call(e,"__wrapped__"),d=f&&SH.call(t,"__wrapped__");if(p||d){var m=p?e.value():e,g=d?t.value():t;return o||(o=new Qo),i(m,g,n,r,o)}}return h?(o||(o=new Qo),dYe(e,t,n,r,i,o)):!1}function H2(e,t,n,r,i){return e===t?!0:e==null||t==null||!ea(e)&&!ea(t)?e!==e&&t!==t:kYe(e,t,n,r,H2,i)}var xYe=1,IYe=2;function CYe(e,t,n,r){var i=n.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=n[i];var s=a[0],u=e[s],c=a[1];if(a[2]){if(u===void 0&&!(s in e))return!1}else{var l=new Qo,f;if(!(f===void 0?H2(c,u,xYe|IYe,r,l):f))return!1}}return!0}function gQ(e){return e===e&&!oo(e)}function PYe(e){for(var t=F2(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,gQ(i)]}return t}function yQ(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function DYe(e){var t=PYe(e);return t.length==1&&t[0][2]?yQ(t[0][0],t[0][1]):function(n){return n===e||CYe(n,e,t)}}var RYe="[object Symbol]";function CS(e){return typeof e=="symbol"||ea(e)&&uu(e)==RYe}var NYe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,MYe=/^\w*$/;function U2(e,t){if(Si(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||CS(e)?!0:MYe.test(e)||!NYe.test(e)||t!=null&&e in Object(t)}var LYe="Expected a function";function z2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(LYe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(z2.Cache||Js),n}z2.Cache=Js;var jYe=500;function BYe(e){var t=z2(e,function(r){return n.size===jYe&&n.clear(),r}),n=t.cache;return t}var FYe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,GYe=/\\(\\)?/g,HYe=BYe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(FYe,function(n,r,i,o){t.push(i?o.replace(GYe,"$1"):r||n)}),t});const UYe=HYe;var wH=Ya?Ya.prototype:void 0,AH=wH?wH.toString:void 0;function vQ(e){if(typeof e=="string")return e;if(Si(e))return dQ(e,vQ)+"";if(CS(e))return AH?AH.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function zYe(e){return e==null?"":vQ(e)}function bQ(e,t){return Si(e)?e:U2(e,t)?[e]:UYe(zYe(e))}function PS(e){if(typeof e=="string"||CS(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function _Q(e,t){t=bQ(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[PS(t[n++])];return n&&n==r?e:void 0}function VYe(e,t,n){var r=e==null?void 0:_Q(e,t);return r===void 0?n:r}function YYe(e,t){return e!=null&&t in Object(e)}function XYe(e,t,n){t=bQ(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=PS(t[r]);if(!(o=e!=null&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&N2(i)&&R2(a,i)&&(Si(e)||$T(e)))}function WYe(e,t){return e!=null&&XYe(e,t,YYe)}var qYe=1,$Ye=2;function KYe(e,t){return U2(e)&&gQ(t)?yQ(PS(e),t):function(n){var r=VYe(n,e);return r===void 0&&r===t?WYe(n,e):H2(t,r,qYe|$Ye)}}function QYe(e){return function(t){return t==null?void 0:t[e]}}function ZYe(e){return function(t){return _Q(t,e)}}function JYe(e){return U2(e)?QYe(PS(e)):ZYe(e)}function eXe(e){return typeof e=="function"?e:e==null?kS:typeof e=="object"?Si(e)?KYe(e[0],e[1]):DYe(e):JYe(e)}function tXe(e,t){return function(n,r){if(n==null)return n;if(!Ad(n))return e(n,r);for(var i=n.length,o=-1,a=Object(n);++o<i&&r(a[o],o,a)!==!1;);return n}}var rXe=tXe(uQ);const TQ=rXe;function nXe(e,t){var n=-1,r=Ad(e)?Array(e.length):[];return TQ(e,function(i,o,a){r[++n]=t(i,o,a)}),r}function cu(e,t){var n=Si(e)?dQ:nXe;return n(e,eXe(t))}const iXe=Object.freeze(Object.defineProperty({__proto__:null,default:cu},Symbol.toStringTag,{value:"Module"})),oXe=Us(iXe);Object.defineProperty(bv,"__esModule",{value:!0});bv.flattenNames=void 0;var aXe=P9e,sXe=DS(aXe),lXe=G2,uXe=DS(lXe),cXe=H7e,hXe=DS(cXe),fXe=oXe,pXe=DS(fXe);function DS(e){return e&&e.__esModule?e:{default:e}}var dXe=bv.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[];return(0,pXe.default)(t,function(r){Array.isArray(r)?e(r).map(function(i){return n.push(i)}):(0,hXe.default)(r)?(0,uXe.default)(r,function(i,o){i===!0&&n.push(o),n.push(o+"-"+i)}):(0,sXe.default)(r)&&n.push(r)}),n};bv.default=dXe;var Tv={};function EQ(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var mXe=function(){try{var e=fh(Object,"defineProperty");return e({},"",{}),e}catch{}}();const ZT=mXe;function V2(e,t,n){t=="__proto__"&&ZT?ZT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var gXe=Object.prototype,yXe=gXe.hasOwnProperty;function SQ(e,t,n){var r=e[t];(!(yXe.call(e,t)&&_v(r,n))||n===void 0&&!(t in e))&&V2(e,t,n)}function vXe(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=void 0;u===void 0&&(u=e[s]),i?V2(n,s,u):SQ(n,s,u)}return n}function bXe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var _Xe=Object.prototype,TXe=_Xe.hasOwnProperty;function EXe(e){if(!oo(e))return bXe(e);var t=j2(e),n=[];for(var r in e)r=="constructor"&&(t||!TXe.call(e,r))||n.push(r);return n}function wQ(e){return Ad(e)?sQ(e,!0):EXe(e)}var AQ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,OH=AQ&&typeof module=="object"&&module&&!module.nodeType&&module,SXe=OH&&OH.exports===AQ,kH=SXe?la.Buffer:void 0,xH=kH?kH.allocUnsafe:void 0;function OQ(e,t){if(t)return e.slice();var n=e.length,r=xH?xH(n):new e.constructor(n);return e.copy(r),r}function wXe(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var AXe=Object.prototype,OXe=AXe.hasOwnProperty;function kXe(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&OXe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Y2(e){var t=new e.constructor(e.byteLength);return new QT(t).set(new QT(e)),t}function xXe(e,t){var n=Y2(e.buffer);return new e.constructor(n,e.byteOffset,e.byteLength)}var IXe=/\w*$/;function CXe(e){var t=new e.constructor(e.source,IXe.exec(e));return t.lastIndex=e.lastIndex,t}var IH=Ya?Ya.prototype:void 0,CH=IH?IH.valueOf:void 0;function PXe(e){return CH?Object(CH.call(e)):{}}function kQ(e,t){var n=t?Y2(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var DXe="[object Boolean]",RXe="[object Date]",NXe="[object Map]",MXe="[object Number]",LXe="[object RegExp]",jXe="[object Set]",BXe="[object String]",FXe="[object Symbol]",GXe="[object ArrayBuffer]",HXe="[object DataView]",UXe="[object Float32Array]",zXe="[object Float64Array]",VXe="[object Int8Array]",YXe="[object Int16Array]",XXe="[object Int32Array]",WXe="[object Uint8Array]",qXe="[object Uint8ClampedArray]",$Xe="[object Uint16Array]",KXe="[object Uint32Array]";function QXe(e,t,n){var r=e.constructor;switch(t){case GXe:return Y2(e);case DXe:case RXe:return new r(+e);case HXe:return xXe(e);case UXe:case zXe:case VXe:case YXe:case XXe:case WXe:case qXe:case $Xe:case KXe:return kQ(e,n);case NXe:return new r;case MXe:case BXe:return new r(e);case LXe:return CXe(e);case jXe:return new r;case FXe:return PXe(e)}}var PH=Object.create,ZXe=function(){function e(){}return function(t){if(!oo(t))return{};if(PH)return PH(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const JXe=ZXe;function xQ(e){return typeof e.constructor=="function"&&!j2(e)?JXe(hQ(e)):{}}var eWe="[object Map]";function tWe(e){return ea(e)&&wy(e)==eWe}var DH=Vp&&Vp.isMap,rWe=DH?M2(DH):tWe;const nWe=rWe;var iWe="[object Set]";function oWe(e){return ea(e)&&wy(e)==iWe}var RH=Vp&&Vp.isSet,aWe=RH?M2(RH):oWe;const sWe=aWe;var lWe=1,IQ="[object Arguments]",uWe="[object Array]",cWe="[object Boolean]",hWe="[object Date]",fWe="[object Error]",CQ="[object Function]",pWe="[object GeneratorFunction]",dWe="[object Map]",mWe="[object Number]",PQ="[object Object]",gWe="[object RegExp]",yWe="[object Set]",vWe="[object String]",bWe="[object Symbol]",_We="[object WeakMap]",TWe="[object ArrayBuffer]",EWe="[object DataView]",SWe="[object Float32Array]",wWe="[object Float64Array]",AWe="[object Int8Array]",OWe="[object Int16Array]",kWe="[object Int32Array]",xWe="[object Uint8Array]",IWe="[object Uint8ClampedArray]",CWe="[object Uint16Array]",PWe="[object Uint32Array]",Or={};Or[IQ]=Or[uWe]=Or[TWe]=Or[EWe]=Or[cWe]=Or[hWe]=Or[SWe]=Or[wWe]=Or[AWe]=Or[OWe]=Or[kWe]=Or[dWe]=Or[mWe]=Or[PQ]=Or[gWe]=Or[yWe]=Or[vWe]=Or[bWe]=Or[xWe]=Or[IWe]=Or[CWe]=Or[PWe]=!0;Or[fWe]=Or[CQ]=Or[_We]=!1;function G0(e,t,n,r,i,o){var a,s=t&lWe;if(a!==void 0)return a;if(!oo(e))return e;var u=Si(e);if(u)a=kXe(e);else{var c=wy(e),l=c==CQ||c==pWe;if(Ty(e))return OQ(e,s);if(c==PQ||c==IQ||l&&!i)a=l?{}:xQ(e);else{if(!Or[c])return i?e:{};a=QXe(e,c,s)}}o||(o=new Qo);var f=o.get(e);if(f)return f;o.set(e,a),sWe(e)?e.forEach(function(d){a.add(G0(d,t,n,d,e,o))}):nWe(e)&&e.forEach(function(d,m){a.set(m,G0(d,t,n,m,e,o))});var h=JC,p=u?void 0:h(e);return EQ(p||e,function(d,m){p&&(m=d,d=e[m]),SQ(a,m,G0(d,t,n,m,e,o))}),a}var DWe=1,RWe=4;function NWe(e){return G0(e,DWe|RWe)}const MWe=Object.freeze(Object.defineProperty({__proto__:null,default:NWe},Symbol.toStringTag,{value:"Module"})),LWe=Us(MWe);Object.defineProperty(Tv,"__esModule",{value:!0});Tv.mergeClasses=void 0;var jWe=G2,BWe=DQ(jWe),FWe=LWe,GWe=DQ(FWe),HWe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function DQ(e){return e&&e.__esModule?e:{default:e}}var UWe=Tv.mergeClasses=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=e.default&&(0,GWe.default)(e.default)||{};return t.map(function(r){var i=e[r];return i&&(0,BWe.default)(i,function(o,a){n[a]||(n[a]={}),n[a]=HWe({},n[a],i[a])}),r}),n};Tv.default=UWe;var Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.autoprefix=void 0;var zWe=G2,NH=YWe(zWe),VWe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function YWe(e){return e&&e.__esModule?e:{default:e}}var XWe={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},WWe=Ev.autoprefix=function(e){var t={};return(0,NH.default)(e,function(n,r){var i={};(0,NH.default)(n,function(o,a){var s=XWe[a];s?i=VWe({},i,s(o)):i[a]=o}),t[r]=i}),t};Ev.default=WWe;var Sv={};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.hover=void 0;var qWe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$We=O,DO=KWe($We);function KWe(e){return e&&e.__esModule?e:{default:e}}function QWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MH(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ZWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var JWe=Sv.hover=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){ZWe(r,n);function r(){var i,o,a,s;QWe(this,r);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return s=(o=(a=MH(this,(i=r.__proto__||Object.getPrototypeOf(r)).call.apply(i,[this].concat(c))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return DO.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},DO.default.createElement(e,qWe({},a.props,a.state)))},o),MH(a,s)}return r}(DO.default.Component)};Sv.default=JWe;var wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.active=void 0;var eqe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tqe=O,RO=rqe(tqe);function rqe(e){return e&&e.__esModule?e:{default:e}}function nqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LH(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function iqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oqe=wv.active=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){iqe(r,n);function r(){var i,o,a,s;nqe(this,r);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return s=(o=(a=LH(this,(i=r.__proto__||Object.getPrototypeOf(r)).call.apply(i,[this].concat(c))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return RO.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},RO.default.createElement(e,eqe({},a.props,a.state)))},o),LH(a,s)}return r}(RO.default.Component)};wv.default=oqe;var X2={};Object.defineProperty(X2,"__esModule",{value:!0});var aqe=function(e,t){var n={},r=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n[i]=o};return e===0&&r("first-child"),e===t-1&&r("last-child"),(e===0||e%2===0)&&r("even"),Math.abs(e%2)===1&&r("odd"),r("nth-child",e),n};X2.default=aqe;Object.defineProperty(bo,"__esModule",{value:!0});bo.ReactCSS=bo.loop=bo.handleActive=W2=bo.handleHover=bo.hover=void 0;var sqe=bv,lqe=Od(sqe),uqe=Tv,cqe=Od(uqe),hqe=Ev,fqe=Od(hqe),pqe=Sv,RQ=Od(pqe),dqe=wv,mqe=Od(dqe),gqe=X2,yqe=Od(gqe);function Od(e){return e&&e.__esModule?e:{default:e}}bo.hover=RQ.default;var W2=bo.handleHover=RQ.default;bo.handleActive=mqe.default;bo.loop=yqe.default;var vqe=bo.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,lqe.default)(n),o=(0,cqe.default)(e,i);return(0,fqe.default)(o)},St=bo.default=vqe,bqe=function(e,t,n,r,i){var o=i.clientWidth,a=i.clientHeight,s=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,u=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),l=u-(i.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var f=void 0;if(l<0?f=0:l>a?f=1:f=Math.round(l*100/a)/100,t.a!==f)return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}else{var h=void 0;if(c<0?h=0:c>o?h=1:h=Math.round(c*100/o)/100,r!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}return null},NO={},_qe=function(e,t,n,r){if(typeof document>"u"&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=n*2,i.height=n*2;var o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null},Tqe=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(NO[i])return NO[i];var o=_qe(e,t,n,r);return NO[i]=o,o},jH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kd=function(e){var t=e.white,n=e.grey,r=e.size,i=e.renderers,o=e.borderRadius,a=e.boxShadow,s=e.children,u=St({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+Tqe(t,n,r,i.canvas)+") center left"}}});return Gn.isValidElement(s)?O.cloneElement(s,jH({},s.props,{style:jH({},s.props.style,u.grid)})):O.createElement("div",{style:u.grid})};kd.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var Eqe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sqe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function wqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BH(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Aqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var q2=function(e){Aqe(t,e);function t(){var n,r,i,o;wqe(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return o=(r=(i=BH(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(s))),i),i.handleChange=function(c){var l=bqe(c,i.props.hsl,i.props.direction,i.props.a,i.container);l&&typeof i.props.onChange=="function"&&i.props.onChange(l,c)},i.handleMouseDown=function(c){i.handleChange(c),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),BH(i,o)}return Sqe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,r=this.props.rgb,i=St({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:r.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)"},pointer:{left:0,top:r.a*100+"%"}},overwrite:Eqe({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return O.createElement("div",{style:i.alpha},O.createElement("div",{style:i.checkboard},O.createElement(kd,{renderers:this.props.renderers})),O.createElement("div",{style:i.gradient}),O.createElement("div",{style:i.container,ref:function(o){return n.container=o},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},O.createElement("div",{style:i.pointer},this.props.pointer?O.createElement(this.props.pointer,this.props):O.createElement("div",{style:i.slider}))))}}]),t}(Gn.PureComponent||Gn.Component),Oqe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function kqe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iqe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Pqe=1,NQ=38,Dqe=40,Rqe=[NQ,Dqe],Nqe=function(e){return Rqe.indexOf(e)>-1},Mqe=function(e){return Number(String(e).replace(/%/g,""))},Lqe=1,Jt=function(e){Cqe(t,e);function t(n){xqe(this,t);var r=Iqe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var o=Mqe(i.target.value);if(!isNaN(o)&&Nqe(i.keyCode)){var a=r.getArrowOffset(),s=i.keyCode===NQ?o+a:o-a;r.setUpdatedValue(s,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var o=Math.round(r.props.value+i.movementX);o>=0&&o<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(o),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},r.inputId="rc-editable-input-"+Lqe++,r}return Oqe(t,[{key:"componentDidUpdate",value:function(n,r){this.props.value!==this.state.value&&(n.value!==this.props.value||r.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return kqe({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Pqe}},{key:"setUpdatedValue",value:function(n,r){var i=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(i,r),this.setState({value:n})}},{key:"render",value:function(){var n=this,r=St({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return O.createElement("div",{style:r.wrap},O.createElement("input",{id:this.inputId,style:r.input,ref:function(i){return n.input=i},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?O.createElement("label",{htmlFor:this.inputId,style:r.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(Gn.PureComponent||Gn.Component),jqe=function(e,t,n,r){var i=r.clientWidth,o=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,s=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,u=a-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var l=void 0;if(c<0)l=359;else if(c>o)l=0;else{var f=-(c*100/o)+100;l=360*f/100}if(n.h!==l)return{h:l,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(u<0)h=0;else if(u>i)h=359;else{var p=u*100/i;h=360*p/100}if(n.h!==h)return{h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},Bqe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Fqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FH(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Gqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xd=function(e){Gqe(t,e);function t(){var n,r,i,o;Fqe(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return o=(r=(i=FH(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(s))),i),i.handleChange=function(c){var l=jqe(c,i.props.direction,i.props.hsl,i.container);l&&typeof i.props.onChange=="function"&&i.props.onChange(l,c)},i.handleMouseDown=function(c){i.handleChange(c),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),FH(i,o)}return Bqe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,r=this.props.direction,i=r===void 0?"horizontal":r,o=St({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:i==="vertical"});return O.createElement("div",{style:o.hue},O.createElement("div",{className:"hue-"+i,style:o.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},O.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),O.createElement("div",{style:o.pointer},this.props.pointer?O.createElement(this.props.pointer,this.props):O.createElement("div",{style:o.slider}))))}}]),t}(Gn.PureComponent||Gn.Component);function iP(e,t,n){(n!==void 0&&!_v(e[t],n)||n===void 0&&!(t in e))&&V2(e,t,n)}function Hqe(e){return ea(e)&&Ad(e)}function oP(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Uqe(e){return vXe(e,wQ(e))}function zqe(e,t,n,r,i,o,a){var s=oP(e,n),u=oP(t,n),c=a.get(u);if(c){iP(e,n,c);return}var l=o?o(s,u,n+"",e,t,a):void 0,f=l===void 0;if(f){var h=Si(u),p=!h&&Ty(u),d=!h&&!p&&L2(u);l=u,h||p||d?Si(s)?l=s:Hqe(s)?l=wXe(s):p?(f=!1,l=OQ(u,!0)):d?(f=!1,l=kQ(u,!0)):l=[]:pQ(u)||$T(u)?(l=s,$T(s)?l=Uqe(s):(!oo(s)||B2(s))&&(l=xQ(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),iP(e,n,l)}function MQ(e,t,n,r,i){e!==t&&nQ(t,function(o,a){if(i||(i=new Qo),oo(o))zqe(e,t,a,n,MQ,r,i);else{var s=r?r(oP(e,a),o,a+"",e,t,i):void 0;s===void 0&&(s=o),iP(e,a,s)}},wQ)}function Vqe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var GH=Math.max;function Yqe(e,t,n){return t=GH(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=GH(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Vqe(e,this,s)}}function Xqe(e){return function(){return e}}var Wqe=ZT?function(e,t){return ZT(e,"toString",{configurable:!0,enumerable:!1,value:Xqe(t),writable:!0})}:kS;const qqe=Wqe;var $qe=800,Kqe=16,Qqe=Date.now;function Zqe(e){var t=0,n=0;return function(){var r=Qqe(),i=Kqe-(r-n);if(n=r,i>0){if(++t>=$qe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Jqe=Zqe(qqe);const e$e=Jqe;function t$e(e,t){return e$e(Yqe(e,t,kS),e+"")}function r$e(e,t,n){if(!oo(n))return!1;var r=typeof t;return(r=="number"?Ad(n)&&R2(t,n.length):r=="string"&&t in n)?_v(n[t],e):!1}function n$e(e){return t$e(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&r$e(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}var i$e=n$e(function(e,t,n){MQ(e,t,n)});const Ui=i$e;var Av=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,o=e.styles,a=o===void 0?{}:o,s=St(Ui({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+t*4+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":t===1});return O.createElement("div",{style:s.wrap},O.createElement("div",{style:s.bg}),O.createElement("div",{style:s.content},i))};Av.propTypes={background:N.string,zDepth:N.oneOf([0,1,2,3,4,5]),radius:N.number,styles:N.object};Av.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var o$e=function(){return la.Date.now()};const MO=o$e;var a$e=/\s/;function s$e(e){for(var t=e.length;t--&&a$e.test(e.charAt(t)););return t}var l$e=/^\s+/;function u$e(e){return e&&e.slice(0,s$e(e)+1).replace(l$e,"")}var HH=NaN,c$e=/^[-+]0x[0-9a-f]+$/i,h$e=/^0b[01]+$/i,f$e=/^0o[0-7]+$/i,p$e=parseInt;function UH(e){if(typeof e=="number")return e;if(CS(e))return HH;if(oo(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=oo(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=u$e(e);var n=h$e.test(e);return n||f$e.test(e)?p$e(e.slice(2),n?2:8):c$e.test(e)?HH:+e}var d$e="Expected a function",m$e=Math.max,g$e=Math.min;function LQ(e,t,n){var r,i,o,a,s,u,c=0,l=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(d$e);t=UH(t)||0,oo(n)&&(l=!!n.leading,f="maxWait"in n,o=f?m$e(UH(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h);function p(S){var E=r,I=i;return r=i=void 0,c=S,a=e.apply(I,E),a}function d(S){return c=S,s=setTimeout(v,t),l?p(S):a}function m(S){var E=S-u,I=S-c,x=t-E;return f?g$e(x,o-I):x}function g(S){var E=S-u,I=S-c;return u===void 0||E>=t||E<0||f&&I>=o}function v(){var S=MO();if(g(S))return b(S);s=setTimeout(v,m(S))}function b(S){return s=void 0,h&&r?p(S):(r=i=void 0,a)}function y(){s!==void 0&&clearTimeout(s),c=0,r=u=i=s=void 0}function _(){return s===void 0?a:b(MO())}function T(){var S=MO(),E=g(S);if(r=arguments,i=this,u=S,E){if(s===void 0)return d(u);if(f)return clearTimeout(s),s=setTimeout(v,t),p(u)}return s===void 0&&(s=setTimeout(v,t)),a}return T.cancel=y,T.flush=_,T}var y$e="Expected a function";function v$e(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(y$e);return oo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),LQ(e,t,{leading:r,maxWait:t,trailing:i})}var b$e=function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,o=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,s=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,u=a-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);u<0?u=0:u>i&&(u=i),c<0?c=0:c>o&&(c=o);var l=u/i,f=1-c/o;return{h:t.h,s:l,v:f,a:t.a,source:"hsv"}},_$e=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function T$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E$e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function S$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var RS=function(e){S$e(t,e);function t(n){T$e(this,t);var r=E$e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,b$e(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var o=r.getContainerRenderWindow();o.addEventListener("mousemove",r.handleChange),o.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=v$e(function(i,o,a){i(o,a)},50),r}return _$e(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,r=window;!r.document.contains(n)&&r.parent!==r;)r=r.parent;return r}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,r=this.props.style||{},i=r.color,o=r.white,a=r.black,s=r.pointer,u=r.circle,c=St({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:i,white:o,black:a,pointer:s,circle:u}},{custom:!!this.props.style});return O.createElement("div",{style:c.color,ref:function(l){return n.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},O.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),O.createElement("div",{style:c.white,className:"saturation-white"},O.createElement("div",{style:c.black,className:"saturation-black"}),O.createElement("div",{style:c.pointer},this.props.pointer?O.createElement(this.props.pointer,this.props):O.createElement("div",{style:c.circle}))))}}]),t}(Gn.PureComponent||Gn.Component);function w$e(e,t){var n=Si(e)?EQ:TQ;return n(e,cQ(t))}function JT(e){"@babel/helpers - typeof";return JT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JT(e)}var A$e=/^\s+/,O$e=/\s+$/;function lt(e,t){if(e=e||"",t=t||{},e instanceof lt)return e;if(!(this instanceof lt))return new lt(e,t);var n=k$e(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}lt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,r,i,o,a;return t=e.r/255,n=e.g/255,r=e.b/255,t<=.03928?i=t/12.92:i=Math.pow((t+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),.2126*i+.7152*o+.0722*a},setAlpha:function(e){return this._a=jQ(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=VH(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=VH(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=zH(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=zH(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return YH(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return P$e(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Lr(this._r,255)*100)+"%",g:Math.round(Lr(this._g,255)*100)+"%",b:Math.round(Lr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Lr(this._r,255)*100)+"%, "+Math.round(Lr(this._g,255)*100)+"%, "+Math.round(Lr(this._b,255)*100)+"%)":"rgba("+Math.round(Lr(this._r,255)*100)+"%, "+Math.round(Lr(this._g,255)*100)+"%, "+Math.round(Lr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:z$e[YH(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+XH(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=lt(e);n="#"+XH(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return i?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return lt(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(M$e,arguments)},brighten:function(){return this._applyModification(L$e,arguments)},darken:function(){return this._applyModification(j$e,arguments)},desaturate:function(){return this._applyModification(D$e,arguments)},saturate:function(){return this._applyModification(R$e,arguments)},greyscale:function(){return this._applyModification(N$e,arguments)},spin:function(){return this._applyModification(B$e,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(H$e,arguments)},complement:function(){return this._applyCombination(F$e,arguments)},monochromatic:function(){return this._applyCombination(U$e,arguments)},splitcomplement:function(){return this._applyCombination(G$e,arguments)},triad:function(){return this._applyCombination(WH,[3])},tetrad:function(){return this._applyCombination(WH,[4])}};lt.fromRatio=function(e,t){if(JT(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=Hm(e[r]));e=n}return lt(e,t)};function k$e(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return typeof e=="string"&&(e=W$e(e)),JT(e)=="object"&&(os(e.r)&&os(e.g)&&os(e.b)?(t=x$e(e.r,e.g,e.b),a=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):os(e.h)&&os(e.s)&&os(e.v)?(r=Hm(e.s),i=Hm(e.v),t=C$e(e.h,r,i),a=!0,s="hsv"):os(e.h)&&os(e.s)&&os(e.l)&&(r=Hm(e.s),o=Hm(e.l),t=I$e(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=jQ(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function x$e(e,t,n){return{r:Lr(e,255)*255,g:Lr(t,255)*255,b:Lr(n,255)*255}}function zH(e,t,n){e=Lr(e,255),t=Lr(t,255),n=Lr(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,a,s=(r+i)/2;if(r==i)o=a=0;else{var u=r-i;switch(a=s>.5?u/(2-r-i):u/(r+i),r){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4;break}o/=6}return{h:o,s:a,l:s}}function I$e(e,t,n){var r,i,o;e=Lr(e,360),t=Lr(t,100),n=Lr(n,100);function a(c,l,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?c+(l-c)*6*f:f<1/2?l:f<2/3?c+(l-c)*(2/3-f)*6:c}if(t===0)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,u=2*n-s;r=a(u,s,e+1/3),i=a(u,s,e),o=a(u,s,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function VH(e,t,n){e=Lr(e,255),t=Lr(t,255),n=Lr(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,a,s=r,u=r-i;if(a=r===0?0:u/r,r==i)o=0;else{switch(r){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4;break}o/=6}return{h:o,s:a,v:s}}function C$e(e,t,n){e=Lr(e,360)*6,t=Lr(t,100),n=Lr(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),u=r%6,c=[n,a,o,o,s,n][u],l=[s,n,n,a,o,o][u],f=[o,o,s,n,n,a][u];return{r:c*255,g:l*255,b:f*255}}function YH(e,t,n,r){var i=[Wo(Math.round(e).toString(16)),Wo(Math.round(t).toString(16)),Wo(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function P$e(e,t,n,r,i){var o=[Wo(Math.round(e).toString(16)),Wo(Math.round(t).toString(16)),Wo(Math.round(n).toString(16)),Wo(BQ(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function XH(e,t,n,r){var i=[Wo(BQ(r)),Wo(Math.round(e).toString(16)),Wo(Math.round(t).toString(16)),Wo(Math.round(n).toString(16))];return i.join("")}lt.equals=function(e,t){return!e||!t?!1:lt(e).toRgbString()==lt(t).toRgbString()};lt.random=function(){return lt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function D$e(e,t){t=t===0?0:t||10;var n=lt(e).toHsl();return n.s-=t/100,n.s=NS(n.s),lt(n)}function R$e(e,t){t=t===0?0:t||10;var n=lt(e).toHsl();return n.s+=t/100,n.s=NS(n.s),lt(n)}function N$e(e){return lt(e).desaturate(100)}function M$e(e,t){t=t===0?0:t||10;var n=lt(e).toHsl();return n.l+=t/100,n.l=NS(n.l),lt(n)}function L$e(e,t){t=t===0?0:t||10;var n=lt(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),lt(n)}function j$e(e,t){t=t===0?0:t||10;var n=lt(e).toHsl();return n.l-=t/100,n.l=NS(n.l),lt(n)}function B$e(e,t){var n=lt(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,lt(n)}function F$e(e){var t=lt(e).toHsl();return t.h=(t.h+180)%360,lt(t)}function WH(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=lt(e).toHsl(),r=[lt(e)],i=360/t,o=1;o<t;o++)r.push(lt({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function G$e(e){var t=lt(e).toHsl(),n=t.h;return[lt(e),lt({h:(n+72)%360,s:t.s,l:t.l}),lt({h:(n+216)%360,s:t.s,l:t.l})]}function H$e(e,t,n){t=t||6,n=n||30;var r=lt(e).toHsl(),i=360/n,o=[lt(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(lt(r));return o}function U$e(e,t){t=t||6;for(var n=lt(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(lt({h:r,s:i,v:o})),o=(o+s)%1;return a}lt.mix=function(e,t,n){n=n===0?0:n||50;var r=lt(e).toRgb(),i=lt(t).toRgb(),o=n/100,a={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return lt(a)};lt.readability=function(e,t){var n=lt(e),r=lt(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};lt.isReadable=function(e,t,n){var r=lt.readability(e,t),i,o;switch(o=!1,i=q$e(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};lt.mostReadable=function(e,t,n){var r=null,i=0,o,a,s,u;n=n||{},a=n.includeFallbackColors,s=n.level,u=n.size;for(var c=0;c<t.length;c++)o=lt.readability(e,t[c]),o>i&&(i=o,r=lt(t[c]));return lt.isReadable(e,r,{level:s,size:u})||!a?r:(n.includeFallbackColors=!1,lt.mostReadable(e,["#fff","#000"],n))};var aP=lt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},z$e=lt.hexNames=V$e(aP);function V$e(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function jQ(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Lr(e,t){Y$e(e)&&(e="100%");var n=X$e(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function NS(e){return Math.min(1,Math.max(0,e))}function Wi(e){return parseInt(e,16)}function Y$e(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function X$e(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Wo(e){return e.length==1?"0"+e:""+e}function Hm(e){return e<=1&&(e=e*100+"%"),e}function BQ(e){return Math.round(parseFloat(e)*255).toString(16)}function qH(e){return Wi(e)/255}var No=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function os(e){return!!No.CSS_UNIT.exec(e)}function W$e(e){e=e.replace(A$e,"").replace(O$e,"").toLowerCase();var t=!1;if(aP[e])e=aP[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=No.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=No.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=No.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=No.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=No.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=No.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=No.hex8.exec(e))?{r:Wi(n[1]),g:Wi(n[2]),b:Wi(n[3]),a:qH(n[4]),format:t?"name":"hex8"}:(n=No.hex6.exec(e))?{r:Wi(n[1]),g:Wi(n[2]),b:Wi(n[3]),format:t?"name":"hex"}:(n=No.hex4.exec(e))?{r:Wi(n[1]+""+n[1]),g:Wi(n[2]+""+n[2]),b:Wi(n[3]+""+n[3]),a:qH(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=No.hex3.exec(e))?{r:Wi(n[1]+""+n[1]),g:Wi(n[2]+""+n[2]),b:Wi(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function q$e(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}var $H=function(e){var t=["r","g","b","a","h","s","l","v"],n=0,r=0;return w$e(t,function(i){if(e[i]&&(n+=1,isNaN(e[i])||(r+=1),i==="s"||i==="l")){var o=/^\d+%$/;o.test(e[i])&&(r+=1)}}),n===r?e:!1},Um=function(e,t){var n=e.hex?lt(e.hex):lt(e),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();r.s===0&&(r.h=t||0,i.h=t||0);var s=a==="000000"&&o.a===0;return{hsl:r,hex:s?"transparent":"#"+a,rgb:o,hsv:i,oldHue:e.h||t||r.h,source:e.source}},hu=function(e){if(e==="transparent")return!0;var t=String(e).charAt(0)==="#"?1:0;return e.length!==4+t&&e.length<7+t&&lt(e).isValid()},$2=function(e){if(!e)return"#fff";var t=Um(e);if(t.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(t.rgb.r*299+t.rgb.g*587+t.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},LO=function(e,t){var n=e.replace("°","");return lt(t+" ("+n+")")._ok},cm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$$e=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function K$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q$e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Z$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var zi=function(e){var t=function(n){Z$e(r,n);function r(i){K$e(this,r);var o=Q$e(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return o.handleChange=function(a,s){var u=$H(a);if(u){var c=Um(a,a.h||o.state.oldHue);o.setState(c),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,c,s),o.props.onChange&&o.props.onChange(c,s)}},o.handleSwatchHover=function(a,s){var u=$H(a);if(u){var c=Um(a,a.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(c,s)}},o.state=cm({},Um(i.color,0)),o.debounce=LQ(function(a,s,u){a(s,u)},100),o}return $$e(r,[{key:"render",value:function(){var i={};return this.props.onSwatchHover&&(i.onSwatchHover=this.handleSwatchHover),O.createElement(e,cm({},this.props,this.state,{onChange:this.handleChange},i))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return cm({},Um(i.color,o.oldHue))}}]),r}(Gn.PureComponent||Gn.Component);return t.propTypes=cm({},e.propTypes),t.defaultProps=cm({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},J$e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eKe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function tKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KH(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function rKe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var nKe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){rKe(r,n);function r(){var i,o,a,s;tKe(this,r);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return s=(o=(a=KH(this,(i=r.__proto__||Object.getPrototypeOf(r)).call.apply(i,[this].concat(c))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},o),KH(a,s)}return eKe(r,[{key:"render",value:function(){return O.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},O.createElement(e,J$e({},this.props,this.state)))}}]),r}(O.Component)},QH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iKe=13,oKe=function(e){var t=e.color,n=e.style,r=e.onClick,i=r===void 0?function(){}:r,o=e.onHover,a=e.title,s=a===void 0?t:a,u=e.children,c=e.focus,l=e.focusStyle,f=l===void 0?{}:l,h=t==="transparent",p=St({default:{swatch:QH({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?f:{})}}),d=function(b){return i(t,b)},m=function(b){return b.keyCode===iKe&&i(t,b)},g=function(b){return o(t,b)},v={};return o&&(v.onMouseOver=g),O.createElement("div",QH({style:p.swatch,onClick:d,title:s,tabIndex:0,onKeyDown:m},v),u,h&&O.createElement(kd,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const ph=nKe(oKe);var aKe=function(e){var t=e.direction,n=St({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return O.createElement("div",{style:n.picker})},sKe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FQ=function(e){var t=e.rgb,n=e.hsl,r=e.width,i=e.height,o=e.onChange,a=e.direction,s=e.style,u=e.renderers,c=e.pointer,l=e.className,f=l===void 0?"":l,h=St({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:s}}});return O.createElement("div",{style:h.picker,className:"alpha-picker "+f},O.createElement(q2,sKe({},h.alpha,{rgb:t,hsl:n,pointer:c,renderers:u,onChange:o,direction:a})))};FQ.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:aKe};zi(FQ);var lKe=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,i=St({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return O.createElement("div",{style:i.swatches},cu(t,function(o){return O.createElement(ph,{key:o,color:o,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+o}})}),O.createElement("div",{style:i.clear}))},K2=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,o=e.width,a=e.triangle,s=e.styles,u=s===void 0?{}:s,c=e.className,l=c===void 0?"":c,f=r==="transparent",h=function(d,m){hu(d)&&t({hex:d,source:"hex"},m)},p=St(Ui({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:$2(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},u),{"hide-triangle":a==="hide"});return O.createElement("div",{style:p.card,className:"block-picker "+l},O.createElement("div",{style:p.triangle}),O.createElement("div",{style:p.head},f&&O.createElement(kd,{borderRadius:"6px 6px 0 0"}),O.createElement("div",{style:p.label},r)),O.createElement("div",{style:p.body},O.createElement(lKe,{colors:i,onClick:h,onSwatchHover:n}),O.createElement(Jt,{style:{input:p.input},value:r,onChange:h})))};K2.propTypes={width:N.oneOfType([N.string,N.number]),colors:N.arrayOf(N.string),triangle:N.oneOf(["top","hide"]),styles:N.object};K2.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};zi(K2);var Xh={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},Wh={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},qh={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},$h={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Kh={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Qh={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Zh={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Jh={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},ef={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},zm={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},tf={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},rf={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},nf={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},of={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},af={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},sf={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},lf={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},uf={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},GQ=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,i=e.hover,o=e.active,a=e.circleSize,s=e.circleSpacing,u=St({default:{swatch:{width:a,height:a,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:o});return O.createElement("div",{style:u.swatch},O.createElement(ph,{style:u.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:u.Swatch.boxShadow+", 0 0 5px "+t}}))};GQ.defaultProps={circleSize:28,circleSpacing:14};const uKe=W2(GQ);var Q2=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,i=e.colors,o=e.hex,a=e.circleSize,s=e.styles,u=s===void 0?{}:s,c=e.circleSpacing,l=e.className,f=l===void 0?"":l,h=St(Ui({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},u)),p=function(d,m){return n({hex:d,source:"hex"},m)};return O.createElement("div",{style:h.card,className:"circle-picker "+f},cu(i,function(d){return O.createElement(uKe,{key:d,color:d,onClick:p,onSwatchHover:r,active:o===d.toLowerCase(),circleSize:a,circleSpacing:c})}))};Q2.propTypes={width:N.oneOfType([N.string,N.number]),circleSize:N.number,circleSpacing:N.number,styles:N.object};Q2.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Xh[500],Wh[500],qh[500],$h[500],Kh[500],Qh[500],Zh[500],Jh[500],ef[500],zm[500],tf[500],rf[500],nf[500],of[500],af[500],sf[500],lf[500],uf[500]],styles:{}};zi(Q2);function ZH(e){return e===void 0}var HQ={};Object.defineProperty(HQ,"__esModule",{value:!0});var JH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cKe=O,eU=hKe(cKe);function hKe(e){return e&&e.__esModule?e:{default:e}}function fKe(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Fb=24,pKe=HQ.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Fb:r,o=e.height,a=o===void 0?Fb:o,s=e.style,u=s===void 0?{}:s,c=fKe(e,["fill","width","height","style"]);return eU.default.createElement("svg",JH({viewBox:"0 0 "+Fb+" "+Fb,style:JH({fill:n,width:i,height:a},u)},c),eU.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},dKe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function mKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gKe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yKe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var UQ=function(e){yKe(t,e);function t(n){mKe(this,t);var r=gKe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,o){i.hex?hu(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(ZH(i.s)?r.props.hsl.s:i.s),l:Number(ZH(i.l)?r.props.hsl.l:i.l),source:"hsl"},o))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?r.state={view:"rgb"}:r.state={view:n.view},r}return dKe(t,[{key:"render",value:function(){var n=this,r=St({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),i=void 0;return this.state.view==="hex"?i=O.createElement("div",{style:r.fields,className:"flexbox-fix"},O.createElement("div",{style:r.field},O.createElement(Jt,{style:{input:r.input,label:r.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?i=O.createElement("div",{style:r.fields,className:"flexbox-fix"},O.createElement("div",{style:r.field},O.createElement(Jt,{style:{input:r.input,label:r.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),O.createElement("div",{style:r.field},O.createElement(Jt,{style:{input:r.input,label:r.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),O.createElement("div",{style:r.field},O.createElement(Jt,{style:{input:r.input,label:r.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),O.createElement("div",{style:r.alpha},O.createElement(Jt,{style:{input:r.input,label:r.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(i=O.createElement("div",{style:r.fields,className:"flexbox-fix"},O.createElement("div",{style:r.field},O.createElement(Jt,{style:{input:r.input,label:r.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),O.createElement("div",{style:r.field},O.createElement(Jt,{style:{input:r.input,label:r.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),O.createElement("div",{style:r.field},O.createElement(Jt,{style:{input:r.input,label:r.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),O.createElement("div",{style:r.alpha},O.createElement(Jt,{style:{input:r.input,label:r.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),O.createElement("div",{style:r.wrap,className:"flexbox-fix"},i,O.createElement("div",{style:r.toggle},O.createElement("div",{style:r.icon,onClick:this.toggleViews,ref:function(o){return n.icon=o}},O.createElement(pKe,{style:r.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.hsl.a!==1&&r.view==="hex"?{view:"rgb"}:null}}]),t}(O.Component);UQ.defaultProps={view:"hex"};var tU=function(){var e=St({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return O.createElement("div",{style:e.picker})},vKe=function(){var e=St({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return O.createElement("div",{style:e.picker})},Z2=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,i=e.rgb,o=e.hsl,a=e.hsv,s=e.hex,u=e.renderers,c=e.styles,l=c===void 0?{}:c,f=e.className,h=f===void 0?"":f,p=e.defaultView,d=St(Ui({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},l),{disableAlpha:r});return O.createElement("div",{style:d.picker,className:"chrome-picker "+h},O.createElement("div",{style:d.saturation},O.createElement(RS,{style:d.Saturation,hsl:o,hsv:a,pointer:vKe,onChange:n})),O.createElement("div",{style:d.body},O.createElement("div",{style:d.controls,className:"flexbox-fix"},O.createElement("div",{style:d.color},O.createElement("div",{style:d.swatch},O.createElement("div",{style:d.active}),O.createElement(kd,{renderers:u}))),O.createElement("div",{style:d.toggles},O.createElement("div",{style:d.hue},O.createElement(xd,{style:d.Hue,hsl:o,pointer:tU,onChange:n})),O.createElement("div",{style:d.alpha},O.createElement(q2,{style:d.Alpha,rgb:i,hsl:o,pointer:tU,renderers:u,onChange:n})))),O.createElement(UQ,{rgb:i,hsl:o,hex:s,view:p,onChange:n,disableAlpha:r})))};Z2.propTypes={width:N.oneOfType([N.string,N.number]),disableAlpha:N.bool,styles:N.object,defaultView:N.oneOf(["hex","rgb","hsl"])};Z2.defaultProps={width:225,disableAlpha:!1,styles:{}};zi(Z2);var bKe=function(e){var t=e.color,n=e.onClick,r=n===void 0?function(){}:n,i=e.onSwatchHover,o=e.active,a=St({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:$2(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return O.createElement(ph,{style:a.color,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},O.createElement("div",{style:a.dot}))},_Ke=function(e){var t=e.hex,n=e.rgb,r=e.onChange,i=St({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(a,s){a.r||a.g||a.b?r({r:a.r||n.r,g:a.g||n.g,b:a.b||n.b,source:"rgb"},s):r({hex:a.hex,source:"hex"},s)};return O.createElement("div",{style:i.fields,className:"flexbox-fix"},O.createElement("div",{style:i.active}),O.createElement(Jt,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:o}),O.createElement(Jt,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:o}),O.createElement(Jt,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:o}),O.createElement(Jt,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:o}))},J2=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,i=e.hex,o=e.rgb,a=e.styles,s=a===void 0?{}:a,u=e.className,c=u===void 0?"":u,l=St(Ui({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),f=function(h,p){h.hex?hu(h.hex)&&t({hex:h.hex,source:"hex"},p):t(h,p)};return O.createElement(Av,{style:l.Compact,styles:s},O.createElement("div",{style:l.compact,className:"compact-picker "+c},O.createElement("div",null,cu(r,function(h){return O.createElement(bKe,{key:h,color:h,active:h.toLowerCase()===i,onClick:f,onSwatchHover:n})}),O.createElement("div",{style:l.clear})),O.createElement(_Ke,{hex:i,rgb:o,onChange:f})))};J2.propTypes={colors:N.arrayOf(N.string),styles:N.object};J2.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};zi(J2);var TKe=function(e){var t=e.hover,n=e.color,r=e.onClick,i=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=St({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return O.createElement("div",{style:a.swatch},O.createElement(ph,{color:n,onClick:r,onHover:i,focusStyle:o}))};const EKe=W2(TKe);var eM=function(e){var t=e.width,n=e.colors,r=e.onChange,i=e.onSwatchHover,o=e.triangle,a=e.styles,s=a===void 0?{}:a,u=e.className,c=u===void 0?"":u,l=St(Ui({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),f=function(h,p){return r({hex:h,source:"hex"},p)};return O.createElement("div",{style:l.card,className:"github-picker "+c},O.createElement("div",{style:l.triangleShadow}),O.createElement("div",{style:l.triangle}),cu(n,function(h){return O.createElement(EKe,{color:h,key:h,onClick:f,onSwatchHover:i})}))};eM.propTypes={width:N.oneOfType([N.string,N.number]),colors:N.arrayOf(N.string),triangle:N.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:N.object};eM.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};zi(eM);var SKe=function(e){var t=e.direction,n=St({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return O.createElement("div",{style:n.picker})},wKe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tM=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.hsl,o=e.direction,a=e.pointer,s=e.styles,u=s===void 0?{}:s,c=e.className,l=c===void 0?"":c,f=St(Ui({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},u)),h=function(p){return r({a:1,h:p.h,l:.5,s:1})};return O.createElement("div",{style:f.picker,className:"hue-picker "+l},O.createElement(xd,wKe({},f.hue,{hsl:i,pointer:a,onChange:h,direction:o})))};tM.propTypes={styles:N.object};tM.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:SKe,styles:{}};zi(tM);var AKe=function(e){var t=e.onChange,n=e.hex,r=e.rgb,i=e.styles,o=i===void 0?{}:i,a=e.className,s=a===void 0?"":a,u=St(Ui({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),c=function(l,f){l.hex?hu(l.hex)&&t({hex:l.hex,source:"hex"},f):(l.r||l.g||l.b)&&t({r:l.r||r.r,g:l.g||r.g,b:l.b||r.b,source:"rgb"},f)};return O.createElement(Av,{styles:o},O.createElement("div",{style:u.material,className:"material-picker "+s},O.createElement(Jt,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:n,onChange:c}),O.createElement("div",{style:u.split,className:"flexbox-fix"},O.createElement("div",{style:u.third},O.createElement(Jt,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:r.r,onChange:c})),O.createElement("div",{style:u.third},O.createElement(Jt,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:r.g,onChange:c})),O.createElement("div",{style:u.third},O.createElement(Jt,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:r.b,onChange:c})))))};zi(AKe);var OKe=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,i=e.hex,o=St({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(s,u){s["#"]?hu(s["#"])&&t({hex:s["#"],source:"hex"},u):s.r||s.g||s.b?t({r:s.r||n.r,g:s.g||n.g,b:s.b||n.b,source:"rgb"},u):(s.h||s.s||s.v)&&t({h:s.h||r.h,s:s.s||r.s,v:s.v||r.v,source:"hsv"},u)};return O.createElement("div",{style:o.fields},O.createElement(Jt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(r.h),onChange:a}),O.createElement(Jt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(r.s*100),onChange:a}),O.createElement(Jt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(r.v*100),onChange:a}),O.createElement("div",{style:o.divider}),O.createElement(Jt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:a}),O.createElement(Jt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:a}),O.createElement(Jt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:a}),O.createElement("div",{style:o.divider}),O.createElement(Jt,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:i.replace("#",""),onChange:a}),O.createElement("div",{style:o.fieldSymbols},O.createElement("div",{style:o.symbol},"°"),O.createElement("div",{style:o.symbol},"%"),O.createElement("div",{style:o.symbol},"%")))},kKe=function(e){var t=e.hsl,n=St({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return O.createElement("div",{style:n.picker})},xKe=function(){var e=St({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return O.createElement("div",{style:e.pointer},O.createElement("div",{style:e.left},O.createElement("div",{style:e.leftInside})),O.createElement("div",{style:e.right},O.createElement("div",{style:e.rightInside})))},rU=function(e){var t=e.onClick,n=e.label,r=e.children,i=e.active,o=St({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return O.createElement("div",{style:o.button,onClick:t},n||r)},IKe=function(e){var t=e.rgb,n=e.currentColor,r=St({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return O.createElement("div",null,O.createElement("div",{style:r.label},"new"),O.createElement("div",{style:r.swatches},O.createElement("div",{style:r.new}),O.createElement("div",{style:r.current})),O.createElement("div",{style:r.label},"current"))},CKe=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function PKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DKe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function RKe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var rM=function(e){RKe(t,e);function t(n){PKe(this,t);var r=DKe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={currentColor:n.hex},r}return CKe(t,[{key:"render",value:function(){var n=this.props,r=n.styles,i=r===void 0?{}:r,o=n.className,a=o===void 0?"":o,s=St(Ui({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},i));return O.createElement("div",{style:s.picker,className:"photoshop-picker "+a},O.createElement("div",{style:s.head},this.props.header),O.createElement("div",{style:s.body,className:"flexbox-fix"},O.createElement("div",{style:s.saturation},O.createElement(RS,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:kKe,onChange:this.props.onChange})),O.createElement("div",{style:s.hue},O.createElement(xd,{direction:"vertical",hsl:this.props.hsl,pointer:xKe,onChange:this.props.onChange})),O.createElement("div",{style:s.controls},O.createElement("div",{style:s.top,className:"flexbox-fix"},O.createElement("div",{style:s.previews},O.createElement(IKe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),O.createElement("div",{style:s.actions},O.createElement(rU,{label:"OK",onClick:this.props.onAccept,active:!0}),O.createElement(rU,{label:"Cancel",onClick:this.props.onCancel}),O.createElement(OKe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(O.Component);rM.propTypes={header:N.string,styles:N.object};rM.defaultProps={header:"Color Picker",styles:{}};zi(rM);var NKe=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,o=e.disableAlpha,a=St({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),s=function(u,c){u.hex?hu(u.hex)&&t({hex:u.hex,source:"hex"},c):u.r||u.g||u.b?t({r:u.r||n.r,g:u.g||n.g,b:u.b||n.b,a:n.a,source:"rgb"},c):u.a&&(u.a<0?u.a=0:u.a>100&&(u.a=100),u.a/=100,t({h:r.h,s:r.s,l:r.l,a:u.a,source:"rgb"},c))};return O.createElement("div",{style:a.fields,className:"flexbox-fix"},O.createElement("div",{style:a.double},O.createElement(Jt,{style:{input:a.input,label:a.label},label:"hex",value:i.replace("#",""),onChange:s})),O.createElement("div",{style:a.single},O.createElement(Jt,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:s,dragLabel:"true",dragMax:"255"})),O.createElement("div",{style:a.single},O.createElement(Jt,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:s,dragLabel:"true",dragMax:"255"})),O.createElement("div",{style:a.single},O.createElement(Jt,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:s,dragLabel:"true",dragMax:"255"})),O.createElement("div",{style:a.alpha},O.createElement(Jt,{style:{input:a.input,label:a.label},label:"a",value:Math.round(n.a*100),onChange:s,dragLabel:"true",dragMax:"100"})))},MKe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zQ=function(e){var t=e.colors,n=e.onClick,r=n===void 0?function(){}:n,i=e.onSwatchHover,o=St({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(s,u){r({hex:s,source:"hex"},u)};return O.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map(function(s){var u=typeof s=="string"?{color:s}:s,c=""+u.color+(u.title||"");return O.createElement("div",{key:c,style:o.swatchWrap},O.createElement(ph,MKe({},u,{style:o.swatch,onClick:a,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+u.color}})))}))};zQ.propTypes={colors:N.arrayOf(N.oneOfType([N.string,N.shape({color:N.string,title:N.string})])).isRequired};var LKe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nM=function(e){var t=e.width,n=e.rgb,r=e.hex,i=e.hsv,o=e.hsl,a=e.onChange,s=e.onSwatchHover,u=e.disableAlpha,c=e.presetColors,l=e.renderers,f=e.styles,h=f===void 0?{}:f,p=e.className,d=p===void 0?"":p,m=St(Ui({default:LKe({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},h),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},h),{disableAlpha:u});return O.createElement("div",{style:m.picker,className:"sketch-picker "+d},O.createElement("div",{style:m.saturation},O.createElement(RS,{style:m.Saturation,hsl:o,hsv:i,onChange:a})),O.createElement("div",{style:m.controls,className:"flexbox-fix"},O.createElement("div",{style:m.sliders},O.createElement("div",{style:m.hue},O.createElement(xd,{style:m.Hue,hsl:o,onChange:a})),O.createElement("div",{style:m.alpha},O.createElement(q2,{style:m.Alpha,rgb:n,hsl:o,renderers:l,onChange:a}))),O.createElement("div",{style:m.color},O.createElement(kd,null),O.createElement("div",{style:m.activeColor}))),O.createElement(NKe,{rgb:n,hsl:o,hex:r,onChange:a,disableAlpha:u}),O.createElement(zQ,{colors:c,onClick:a,onSwatchHover:s}))};nM.propTypes={disableAlpha:N.bool,width:N.oneOfType([N.string,N.number]),styles:N.object};nM.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const jKe=zi(nM);var hm=function(e){var t=e.hsl,n=e.offset,r=e.onClick,i=r===void 0?function(){}:r,o=e.active,a=e.first,s=e.last,u=St({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:s}),c=function(l){return i({h:t.h,s:.5,l:n,source:"hsl"},l)};return O.createElement("div",{style:u.swatch,onClick:c})},BKe=function(e){var t=e.onClick,n=e.hsl,r=St({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return O.createElement("div",{style:r.swatches},O.createElement("div",{style:r.swatch},O.createElement(hm,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:t,first:!0})),O.createElement("div",{style:r.swatch},O.createElement(hm,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:t})),O.createElement("div",{style:r.swatch},O.createElement(hm,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:t})),O.createElement("div",{style:r.swatch},O.createElement(hm,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:t})),O.createElement("div",{style:r.swatch},O.createElement(hm,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:t,last:!0})),O.createElement("div",{style:r.clear}))},FKe=function(){var e=St({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return O.createElement("div",{style:e.picker})},iM=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,i=e.styles,o=i===void 0?{}:i,a=e.className,s=a===void 0?"":a,u=St(Ui({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return O.createElement("div",{style:u.wrap||{},className:"slider-picker "+s},O.createElement("div",{style:u.hue},O.createElement(xd,{style:u.Hue,hsl:t,pointer:r,onChange:n})),O.createElement("div",{style:u.swatches},O.createElement(BKe,{hsl:t,onClick:n})))};iM.propTypes={styles:N.object};iM.defaultProps={pointer:FKe,styles:{}};zi(iM);var VQ={};Object.defineProperty(VQ,"__esModule",{value:!0});var nU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GKe=O,iU=HKe(GKe);function HKe(e){return e&&e.__esModule?e:{default:e}}function UKe(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Gb=24,zKe=VQ.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Gb:r,o=e.height,a=o===void 0?Gb:o,s=e.style,u=s===void 0?{}:s,c=UKe(e,["fill","width","height","style"]);return iU.default.createElement("svg",nU({viewBox:"0 0 "+Gb+" "+Gb,style:nU({fill:n,width:i,height:a},u)},c),iU.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},VKe=function(e){var t=e.color,n=e.onClick,r=n===void 0?function(){}:n,i=e.onSwatchHover,o=e.first,a=e.last,s=e.active,u=St({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:$2(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:a,active:s,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return O.createElement(ph,{color:t,style:u.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},O.createElement("div",{style:u.check},O.createElement(zKe,null)))},YKe=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,i=e.active,o=St({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return O.createElement("div",{style:o.group},cu(r,function(a,s){return O.createElement(VKe,{key:a,color:a,active:a.toLowerCase()===i,first:s===0,last:s===r.length-1,onClick:t,onSwatchHover:n})}))},oM=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.onSwatchHover,o=e.colors,a=e.hex,s=e.styles,u=s===void 0?{}:s,c=e.className,l=c===void 0?"":c,f=St(Ui({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},u)),h=function(p,d){return r({hex:p,source:"hex"},d)};return O.createElement("div",{style:f.picker,className:"swatches-picker "+l},O.createElement(Av,null,O.createElement("div",{style:f.overflow},O.createElement("div",{style:f.body},cu(o,function(p){return O.createElement(YKe,{key:p.toString(),group:p,active:a,onClick:h,onSwatchHover:i})}),O.createElement("div",{style:f.clear})))))};oM.propTypes={width:N.oneOfType([N.string,N.number]),height:N.oneOfType([N.string,N.number]),colors:N.arrayOf(N.arrayOf(N.string)),styles:N.object};oM.defaultProps={width:320,height:240,colors:[[Xh[900],Xh[700],Xh[500],Xh[300],Xh[100]],[Wh[900],Wh[700],Wh[500],Wh[300],Wh[100]],[qh[900],qh[700],qh[500],qh[300],qh[100]],[$h[900],$h[700],$h[500],$h[300],$h[100]],[Kh[900],Kh[700],Kh[500],Kh[300],Kh[100]],[Qh[900],Qh[700],Qh[500],Qh[300],Qh[100]],[Zh[900],Zh[700],Zh[500],Zh[300],Zh[100]],[Jh[900],Jh[700],Jh[500],Jh[300],Jh[100]],[ef[900],ef[700],ef[500],ef[300],ef[100]],["#194D33",zm[700],zm[500],zm[300],zm[100]],[tf[900],tf[700],tf[500],tf[300],tf[100]],[rf[900],rf[700],rf[500],rf[300],rf[100]],[nf[900],nf[700],nf[500],nf[300],nf[100]],[of[900],of[700],of[500],of[300],of[100]],[af[900],af[700],af[500],af[300],af[100]],[sf[900],sf[700],sf[500],sf[300],sf[100]],[lf[900],lf[700],lf[500],lf[300],lf[100]],[uf[900],uf[700],uf[500],uf[300],uf[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};zi(oM);var aM=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,o=e.width,a=e.triangle,s=e.styles,u=s===void 0?{}:s,c=e.className,l=c===void 0?"":c,f=St(Ui({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},u),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),h=function(p,d){hu(p)&&t({hex:p,source:"hex"},d)};return O.createElement("div",{style:f.card,className:"twitter-picker "+l},O.createElement("div",{style:f.triangleShadow}),O.createElement("div",{style:f.triangle}),O.createElement("div",{style:f.body},cu(i,function(p,d){return O.createElement(ph,{key:d,color:p,hex:p,style:f.swatch,onClick:h,onHover:n,focusStyle:{boxShadow:"0 0 4px "+p}})}),O.createElement("div",{style:f.hash},"#"),O.createElement(Jt,{label:null,style:{input:f.input},value:r.replace("#",""),onChange:h}),O.createElement("div",{style:f.clear})))};aM.propTypes={width:N.oneOfType([N.string,N.number]),triangle:N.oneOf(["hide","top-left","top-right"]),colors:N.arrayOf(N.string),styles:N.object};aM.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};zi(aM);var sM=function(e){var t=St({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return O.createElement("div",{style:t.picker})};sM.propTypes={hsl:N.shape({h:N.number,s:N.number,l:N.number,a:N.number})};sM.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var lM=function(e){var t=St({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return O.createElement("div",{style:t.picker})};lM.propTypes={hsl:N.shape({h:N.number,s:N.number,l:N.number,a:N.number})};lM.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var XKe=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,o=e.hsv,a=function(f,h){if(f.hex)hu(f.hex)&&t({hex:f.hex,source:"hex"},h);else if(f.rgb){var p=f.rgb.split(",");LO(f.rgb,"rgb")&&t({r:p[0],g:p[1],b:p[2],a:1,source:"rgb"},h)}else if(f.hsv){var d=f.hsv.split(",");LO(f.hsv,"hsv")&&(d[2]=d[2].replace("%",""),d[1]=d[1].replace("%",""),d[0]=d[0].replace("°",""),d[1]==1?d[1]=.01:d[2]==1&&(d[2]=.01),t({h:Number(d[0]),s:Number(d[1]),v:Number(d[2]),source:"hsv"},h))}else if(f.hsl){var m=f.hsl.split(",");LO(f.hsl,"hsl")&&(m[2]=m[2].replace("%",""),m[1]=m[1].replace("%",""),m[0]=m[0].replace("°",""),l[1]==1?l[1]=.01:l[2]==1&&(l[2]=.01),t({h:Number(m[0]),s:Number(m[1]),v:Number(m[2]),source:"hsl"},h))}},s=St({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),u=n.r+", "+n.g+", "+n.b,c=Math.round(r.h)+"°, "+Math.round(r.s*100)+"%, "+Math.round(r.l*100)+"%",l=Math.round(o.h)+"°, "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return O.createElement("div",{style:s.wrap,className:"flexbox-fix"},O.createElement("div",{style:s.fields},O.createElement("div",{style:s.double},O.createElement(Jt,{style:{input:s.input,label:s.label},label:"hex",value:i,onChange:a})),O.createElement("div",{style:s.column},O.createElement("div",{style:s.single},O.createElement(Jt,{style:{input:s.input2,label:s.label2},label:"rgb",value:u,onChange:a})),O.createElement("div",{style:s.single},O.createElement(Jt,{style:{input:s.input2,label:s.label2},label:"hsv",value:l,onChange:a})),O.createElement("div",{style:s.single},O.createElement(Jt,{style:{input:s.input2,label:s.label2},label:"hsl",value:c,onChange:a})))))},uM=function(e){var t=e.width,n=e.onChange,r=e.rgb,i=e.hsl,o=e.hsv,a=e.hex,s=e.header,u=e.styles,c=u===void 0?{}:u,l=e.className,f=l===void 0?"":l,h=St(Ui({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return O.createElement("div",{style:h.picker,className:"google-picker "+f},O.createElement("div",{style:h.head},s),O.createElement("div",{style:h.swatch}),O.createElement("div",{style:h.saturation},O.createElement(RS,{hsl:i,hsv:o,pointer:sM,onChange:n})),O.createElement("div",{style:h.body},O.createElement("div",{style:h.controls,className:"flexbox-fix"},O.createElement("div",{style:h.hue},O.createElement(xd,{style:h.Hue,hsl:i,radius:"4px",pointer:lM,onChange:n}))),O.createElement(XKe,{rgb:r,hsl:i,hex:a,hsv:o,onChange:n})))};uM.propTypes={width:N.oneOfType([N.string,N.number]),styles:N.object,header:N.string};uM.defaultProps={width:652,styles:{},header:"Color picker"};zi(uM);function WKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qKe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KKe(r.key),r)}}function $Ke(e,t,n){return t&&qKe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function KKe(e){var t=QKe(e,"string");return typeof t=="symbol"?t:String(t)}function QKe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ZKe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sP(e,t)}function sP(e,t){return sP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},sP(e,t)}function JKe(e){var t=rQe();return function(){var n=eE(e),r;if(t){var i=eE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return eQe(this,r)}}function eQe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tQe(e)}function tQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rQe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function eE(e){return eE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eE(e)}let YQ=function(e){ZKe(n,e);var t=JKe(n);function n(r){var i;WKe(this,n),i=t.call(this,r);const o=np(r.color);return i.state={displayColorPicker:!1,color:{r:o.r,g:o.g,b:o.b,a:o.opacity}},i}return $Ke(n,[{key:"handleClick",value:function(){this.setState(r=>({displayColorPicker:!r.displayColorPicker}))}},{key:"handleClose",value:function(){this.setState({displayColorPicker:!1})}},{key:"handleChange",value:function(r){const i=r.rgb,o=`rgba(${i.r},${i.g},${i.b},${i.a})`;this.props.onChange(o),this.setState({color:r.rgb})}},{key:"render",value:function(){const r=St({default:{color:{width:"32px",height:"14px",borderRadius:"2px",background:`rgba(${this.state.color.r}, ${this.state.color.g}, ${this.state.color.b}, ${this.state.color.a})`},swatch:{padding:"5px",background:"#fff",cursor:"pointer",borderRadius:"1px"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return O.createElement("div",null,O.createElement("div",{onClick:this.handleClick.bind(this),style:r.swatch},O.createElement("div",{style:r.color})),this.state.displayColorPicker?O.createElement("div",{style:r.popover},O.createElement("div",{onClick:this.handleClose.bind(this),style:r.cover}),O.createElement(jKe,{color:this.state.color,onChange:this.handleChange.bind(this)})):null)}}]),n}(O.Component);YQ.propTypes={color:N.string,onChange:N.func};function nQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iQe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aQe(r.key),r)}}function oQe(e,t,n){return t&&iQe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aQe(e){var t=sQe(e,"string");return typeof t=="symbol"?t:String(t)}function sQe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function lQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lP(e,t)}function lP(e,t){return lP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},lP(e,t)}function uQe(e){var t=fQe();return function(){var n=tE(e),r;if(t){var i=tE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cQe(this,r)}}function cQe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hQe(e)}function hQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fQe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tE(e){return tE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tE(e)}let uP=function(e){lQe(n,e);var t=uQe(n);function n(r){var i;return nQe(this,n),i=t.call(this,r),i.state={colors:r.track.options.colorRange.slice()},i}return oQe(n,[{key:"handleColorsChanged",value:function(r){this.setState({colors:r})}},{key:"handleSubmit",value:function(){const r=this.props.track.options;r.colorRange=this.state.colors,this.props.onSubmit(this.props.track.options)}},{key:"handleAddColor",value:function(){this.setState(r=>({colors:r.colors.concat(r.colors[r.colors.length-1])}))}},{key:"handleRemoveColor",value:function(r){this.setState(i=>({colors:i.colors.slice(0,r).concat(i.colors.slice(r+1))}))}},{key:"render",value:function(){const r=JSON.parse(JSON.stringify(this.props.track)),i=Object.assign(r,{options:{colorRange:this.state.colors}}),o={editable:!1,zoomFixed:!0,views:[{uid:`hmo-${this.props.track.uid}`,initialXDomain:this.props.xScale?this.props.xScale.domain():[0,1],initialYDomain:this.props.yScale?this.props.yScale.domain():[0,1],tracks:{center:[i]},layout:{x:0,y:0,h:12,w:12,i:`hmo-${this.props.track.id}`}}]},a=this.state.colors.map((u,c)=>{const l=this.state.colors.length>2&&c===this.state.colors.length-1?O.createElement("div",{onClick:()=>this.handleRemoveColor(c),style:{background:"white",position:"absolute",top:0,right:0,opacity:1,width:14,height:14,borderRadius:2,cursor:"pointer"}},O.createElement("svg",{height:"10px",style:{position:"absolute",top:2,right:2,opacity:.5,width:10,height:10}},O.createElement("use",{xlinkHref:"#cross"}))):null;return O.createElement("div",{key:`l${c}`,style:{borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",position:"relative",outline:"none"}},l,O.createElement(YQ,{key:c,color:this.state.colors[c],onChange:f=>{this.setState(h=>{const p=h.colors.slice();return p[c]=f,{colors:p}},()=>{this.handleColorsChanged(this.state.colors)})}}))}).reverse(),s=this.state.colors.length<10?O.createElement("div",{onClick:this.handleAddColor.bind(this),style:{position:"relative",outline:"none",height:"25px",padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",cursor:"pointer"}},O.createElement("div",{style:{textAlign:"center",width:"32px",height:"14px"}},O.createElement("svg",{height:"100%",style:{opacity:.5,margin:"auto",display:"block"},width:"10px"},O.createElement("use",{xlinkHref:"#plus"})))):null;return O.createElement(vv,{okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmit.bind(this),title:"Custom Color Map"},O.createElement("table",{className:"table-track-options"},O.createElement("thead",null),O.createElement("tbody",{style:{verticalAlign:"top"}},O.createElement("tr",null,O.createElement("td",{className:"td-track-options"},O.createElement("table",null,O.createElement("tbody",null,O.createElement("tr",null,O.createElement("td",{className:"td-track-options"},"Preview")),O.createElement("tr",null,O.createElement("td",{className:"td-track-options"},O.createElement("div",{style:{width:200}},O.createElement(kv,{options:{bounded:!1},viewConfig:o}))))))),O.createElement("td",{className:"td-track-options"},O.createElement("table",null,O.createElement("tbody",null,O.createElement("tr",null,O.createElement("td",{className:"td-track-options"},"Colors")),O.createElement("tr",null,O.createElement("td",{className:"td-track-options"},s,O.createElement("div",{style:{position:"relative"}},a))))))))))}}]),n}(O.Component);uP.propTypes={handleCancel:N.func,onCancel:N.func,onSubmit:N.func,track:N.object,xScale:N.object,yScale:N.object};const oU=e=>{if(!e.header)return[];const t=e.header.split("	"),n=[];for(let r=0;r<t.length;r++)n.push({name:t[r],value:r+1});return n},Yp=(e,t="",n=1)=>e.reduce((r,i)=>(r[i]={name:`${i*n}${t}`,value:i},r),{}),Yi={yes:{name:"Yes",value:!0},no:{name:"No",value:!1}},Hr={black:{name:"Black",value:"black"},blue:{name:"Blue",value:"blue"},brown:{name:"Brown",value:"brown"},cyan:{name:"Cyan",value:"cyan"},green:{name:"Green",value:"green"},grey:{name:"Grey",value:"grey"},orange:{name:"Orange",value:"orange"},purple:{name:"Purple",value:"purple"},turquoise:{name:"Turquoise",value:"turquoise"},red:{name:"Red",value:"red"},white:{name:"White",value:"white"}},pQe={use_stroke:{name:"Glyph color",value:"[glyph-color]"}},Vm=Yp([1,2,3,5,8,13,21]),dQe=Object.assign(Vm,{none:{name:"none",value:"none"}}),Hb=Yp([0,2,4,8,16,32,64,128,256]),ul=Yp([0,.2,.4,.6,.8,1],"%",100),mQe=Yp([.2,.4,.6,.8,1],"%",100),Rn={axisLabelFormatting:{name:"Axis Label Formatting",inlineOptions:{normal:{name:"normal",value:"normal"},scientific:{name:"scientific",value:"scientific"}}},flipDiagonal:{name:"Flip Across Diagonal",inlineOptions:{none:{name:"No",value:"none"},yes:{name:"Yes",value:"yes"},copy:{name:"Copy",value:"copy"}}},heatmapValueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},valueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},extent:{name:"Extent",inlineOptions:{full:{name:"Full",value:"full"},upperRight:{name:"Upper Right",value:"upper-right"},lowerLeft:{name:"Lower Left",value:"lower-left"}}},labelLeftMargin:{name:"Label Left Margin",inlineOptions:Hb},labelRightMargin:{name:"Label Right Margin",inlineOptions:Hb},labelTopMargin:{name:"Label Top Margin",inlineOptions:Hb},labelBottomMargin:{name:"Label Bottom Margin",inlineOptions:Hb},labelShowResolution:{name:"Label Show Resolution",inlineOptions:Yi},labelShowAssembly:{name:"Label Show Assembly",inlineOptions:Yi},lineStrokeWidth:{name:"Stroke Width",inlineOptions:Vm},strokeWidth:{name:"Stroke Width",inlineOptions:Vm},trackBorderWidth:{name:"Track Border Width",inlineOptions:Vm},separatePlusMinusStrands:{name:"Separate +/- strands",inlineOptions:Yi},sortLargestOnTop:{name:"Sort Largest On Top",inlineOptions:Yi},showTexts:{name:"Show texts",inlineOptions:Yi},staggered:{name:"Staggered",inlineOptions:Yi},minSquareSize:{name:"Minimum size",inlineOptions:dQe},pointSize:{name:"Point Size",inlineOptions:Vm},pointColor:{name:"Point Color",inlineOptions:Hr},trackBorderColor:{name:"Track Border Color",inlineOptions:Hr},backgroundColor:{name:"Background Color",inlineOptions:{white:{name:"White",value:"white"},lightGrey:{name:"Light Grey",value:"#eeeeee"},grey:{name:"Grey",value:"#cccccc"},black:{name:"Black",value:"black"},transparent:{name:"Transparent",value:"transparent"}}},colorScale:{name:"Color Scale",inlineOptions:{epilogos:{name:"Epilogos",values:["#FF0000","#FF4500","#32CD32","#008000","#006400","#C2E105","#FFFF00","#66CDAA","#8A91D0","#CD5C5C","#E9967A","#BDB76B","#808080","#C0C0C0","#FFFFFF"]},category10:{name:"D3 Category10",values:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"]}}},minusStrandColor:{name:"- Strand Color",inlineOptions:Hr},plusStrandColor:{name:"+ Strand Color",inlineOptions:Hr},lineStrokeColor:{name:"Stroke color",inlineOptions:Hr},projectionStrokeColor:{name:"Stroke color",inlineOptions:Hr},projectionFillColor:{name:"Fill color",inlineOptions:Hr},stroke:{name:"Stroke Color",inlineOptions:Hr},strokeColor:{name:"Stroke color",inlineOptions:Hr},fill:{name:"Fill Color",inlineOptions:Hr},color:{name:"Color",inlineOptions:Hr},fontColor:{name:"Font color",inlineOptions:Hr},fillColor:{name:"Fill color",inlineOptions:Hr},barFillColor:{name:"Fill color",inlineOptions:Hr},barFillColorTop:{name:"Top Fill color",inlineOptions:Hr},barFillColorBottom:{name:"Bottom Fill color",inlineOptions:Hr},barOpacity:{name:"Bar opacity",inlineOptions:ul},zeroLineVisible:{name:"Zero line visible",inlineOptions:Yi},zeroLineColor:{name:"Zero line color",inlineOptions:Hr},zeroLineOpacity:{name:"Zero line opacity",inlineOptions:mQe},fillOpacity:{name:"Fill Opacity",inlineOptions:ul},strokeOpacity:{name:"Stroke Opacity",inlineOptions:ul},strokePos:{name:"Stroke Position",inlineOptions:{aroundInner:{name:"Around Inner",value:"around"},aroundCenter:{name:"Around Center",value:null},hidden:{name:"Hidden",value:"hidden"},top:{name:"Top",value:"top"},right:{name:"Right",value:"right"},bottom:{name:"Bottom",value:"bottom"},left:{name:"Left",value:"left"}}},barBorder:{name:"Bar border",inlineOptions:Yi},scaledHeight:{name:"Scaled height",inlineOptions:Yi},rectangleDomainStrokeColor:{name:"Stroke color",inlineOptions:Hr},rectangleDomainFillColor:{name:"Fill color",inlineOptions:Hr},rectangleDomainFillOpacity:{name:"Fill opacity",inlineOptions:ul},rectangleDomainOpacity:{name:"Opacity",inlineOptions:ul},mapboxStyle:{name:"Map style",inlineOptions:{streets:{name:"streets",value:"mapbox.streets"},light:{name:"light",value:"mapbox.light"},dark:{name:"dark",value:"mapbox.dark"},satellite:{name:"satellite",value:"mapbox.satellite"},"streets-satellite":{name:"streets-satellite",value:"mapbox.streets-satellite"},wheatpaste:{name:"wheatpaste",value:"mapbox.wheatpaste"},"streets-basic":{name:"streets-basic",value:"mapbox.streets-basic"},comic:{name:"comic",value:"mapbox.comic"},outdoors:{name:"outdoors",value:"mapbox.outdoors"},"run-bike-hike":{name:"run-bike-hike",value:"mapbox.run-bike-hike"},pencil:{name:"pencil",value:"mapbox.pencil"},pirates:{name:"pirates",value:"mapbox.pirates"},emerald:{name:"emerald",value:"mapbox.emerald"},"high-contrast":{name:"high-contrast",value:"mapbox.high-contrast"}}},oneDHeatmapFlipped:{name:"Flip Heatmap",inlineOptions:{yes:{name:"Yes",value:"yes"},no:{name:"No",value:null}}},showMousePosition:{name:"Show Mouse Position",inlineOptions:Yi},showTooltip:{name:"Show Tooltip",inlineOptions:Yi},fontSize:{name:"Font Size",inlineOptions:Yp([8,9,10,11,12,14,16,18,24],"px")},tickPositions:{name:"Tick Positions",inlineOptions:{even:{name:"Even",value:"even"},ends:{name:"Ends",value:"ends"}}},tickFormat:{name:"Tick Format",inlineOptions:{plain:{name:"Plain",value:"plain"},si:{name:"SI",value:"si"}}},colorEncoding:{name:"Color Encode Annotations",inlineOptions:{none:{name:"None",value:null},itemRgb:{name:"itemRgb",value:"itemRgb"}},generateOptions:oU},fontIsAligned:{name:"Left-Align Font",inlineOptions:Yi},axisPositionHorizontal:{name:"Axis Position",inlineOptions:{left:{name:"Left",value:"left"},outsideLeft:{name:"Outside left",value:"outsideLeft"},right:{name:"Right",value:"right"},outsideRight:{name:"Outside right",value:"outsideRight"},hidden:{name:"Hidden",value:null}}},axisPositionVertical:{name:"Axis Position",inlineOptions:{top:{name:"Top",value:"top"},outsideTop:{name:"Outside top",value:"outsideTop"},bottom:{name:"Bottom",value:"bottom"},outsideBottom:{name:"Outside bottom",value:"outsideBottom"},hidden:{name:"Hidden",value:null}}},axisMargin:{name:"Axis Margin",inlineOptions:Yp([0,10,20,30,40,50,100,200,400],"px")},colorbarPosition:{name:"Colorbar Position",inlineOptions:{topLeft:{name:"Top Left",value:"topLeft"},topRight:{name:"Top Right",value:"topRight"},bottomLeft:{name:"Bottom Left",value:"bottomLeft"},bottomRight:{name:"Bottom Right",value:"bottomRight"},hidden:{name:"Hidden",value:null}}},colorbarBackgroundColor:{name:"Colorbar Background Color",inlineOptions:Hr},colorbarBackgroundOpacity:{name:"Colorbar Background Opacity",inlineOptions:ul},colorbarLabelsPosition:{name:"Colorbar Labels Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},labelColor:{name:"Label Color",inlineOptions:{...Hr,...pQe}},labelPosition:{name:"Label Position",inlineOptions:{ol:{name:"Outer left",value:"outerLeft"},or:{name:"Outer right",value:"outerRight"},ot:{name:"Outer top",value:"outerTop"},ob:{name:"Outer bottom",value:"outerBottom"},tl:{name:"Top left",value:"topLeft"},tr:{name:"Top right",value:"topRight"},bl:{name:"Bottom left",value:"bottomLeft"},br:{name:"Bottom right",value:"bottomRight"},hidden:{name:"Hidden",value:"hidden"}}},labelTextOpacity:{name:"Label Text Opacity",inlineOptions:ul},geneAnnotationHeight:{name:"Gene Annotation Height",inlineOptions:{8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16}}},annotationHeight:{name:"Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},scaled:{name:"scaled",value:"scaled"}}},maxAnnotationHeight:{name:"Max Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},none:{name:"none",value:null}}},annotationStyle:{name:"Annotation Style",inlineOptions:{box:{name:"Box",value:"box"},segment:{name:"Segment",value:"segment"}}},geneLabelPosition:{name:"Gene Label Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},geneStrandSpacing:{name:"Gene Strand Spacing",inlineOptions:{2:{name:"2px",value:2},4:{name:"4px",value:4},8:{name:"8px",value:8}}},labelBackgroundColor:{name:"Label Background Color",inlineOptions:Hr},labelBackgroundOpacity:{name:"Label Background Opacity",inlineOptions:ul},viewResolution:{name:"View Resolution",inlineOptions:{high:{name:"High",value:384},medium:{name:"Medium",value:1024},low:{name:"Low",value:2048}}},colorRange:{name:"Color map",inlineOptions:{afmhot:{name:"afmhot",value:["rgba(0,0,0,1.0)","rgba(128,0,0,1.0)","rgba(256,129,1,1.0)","rgba(256,256,129,1.0)","rgba(256,256,256,1.0)"]},fall:{name:"fall",value:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"]},hot:{name:"hot",value:["rgba(10,0,0,1.0)","rgba(179,0,0,1.0)","rgba(256,91,0,1.0)","rgba(256,256,6,1.0)","rgba(256,256,256,1.0)"]},jet:{name:"jet",value:["rgba(0,0,128,1.0)","rgba(0,129,256,1.0)","rgba(125,256,122,1.0)","rgba(256,148,0,1.0)","rgba(128,0,0,1.0)"]},bwr:{name:"bwr",value:["rgba(0,0,256,1.0)","rgba(128,128,256,1.0)","rgba(256,254,254,1.0)","rgba(256,126,126,1.0)","rgba(256,0,0,1.0)"]},cubehelix:{name:"cubehelix",value:["rgba(0,0,0,1.0)","rgba(21,83,76,1.0)","rgba(162,121,74,1.0)","rgba(199,180,238,1.0)","rgba(256,256,256,1.0)"]},rainbow:{name:"rainbow",value:["rgba(128,0,256,1.0)","rgba(0,181,236,1.0)","rgba(129,255,180,1.0)","rgba(256,179,96,1.0)","rgba(256,0,0,1.0)"]},gray:{name:"greys",value:["rgba(255,255,255,1)","rgba(0,0,0,1)"]},red:{name:"White to red",value:["rgba(255,255,255,1)","rgba(255,0,0,1)"]},green:{name:"White to green",value:["rgba(255,255,255,1)","rgba(0,255,0,1)"]},blue:{name:"White to blue",value:["rgba(255,255,255,1)","rgba(0,0,255,1)"]},custard:{name:"custard",value:["#FFFFFF","#F8E71C","rgba(245,166,35,1)","rgba(0,0,0,1)"]},magma:{name:"magma",value:["rgba(0,0,3,1)","rgba(0,0,4,1)","rgba(0,0,6,1)","rgba(1,0,7,1)","rgba(1,1,9,1)","rgba(1,1,11,1)","rgba(2,2,13,1)","rgba(2,2,15,1)","rgba(3,3,17,1)","rgba(4,3,19,1)","rgba(4,4,21,1)","rgba(5,4,23,1)","rgba(6,5,25,1)","rgba(7,5,27,1)","rgba(8,6,29,1)","rgba(9,7,32,1)","rgba(10,7,34,1)","rgba(11,8,36,1)","rgba(12,9,38,1)","rgba(13,10,40,1)","rgba(14,10,42,1)","rgba(15,11,45,1)","rgba(16,12,47,1)","rgba(17,12,49,1)","rgba(19,13,51,1)","rgba(20,13,54,1)","rgba(21,14,56,1)","rgba(22,14,58,1)","rgba(23,15,61,1)","rgba(25,15,63,1)","rgba(26,16,66,1)","rgba(27,16,68,1)","rgba(28,16,70,1)","rgba(30,17,73,1)","rgba(31,17,75,1)","rgba(33,17,78,1)","rgba(34,17,80,1)","rgba(36,17,83,1)","rgba(37,17,85,1)","rgba(39,17,87,1)","rgba(40,17,90,1)","rgba(42,17,92,1)","rgba(43,17,94,1)","rgba(45,17,97,1)","rgba(47,16,99,1)","rgba(49,16,101,1)","rgba(50,16,103,1)","rgba(52,16,105,1)","rgba(54,15,107,1)","rgba(55,15,108,1)","rgba(57,15,110,1)","rgba(59,15,112,1)","rgba(61,15,113,1)","rgba(62,15,114,1)","rgba(64,15,116,1)","rgba(66,15,117,1)","rgba(67,15,118,1)","rgba(69,15,119,1)","rgba(71,15,120,1)","rgba(72,16,120,1)","rgba(74,16,121,1)","rgba(76,16,122,1)","rgba(77,17,123,1)","rgba(79,17,123,1)","rgba(81,18,124,1)","rgba(82,18,124,1)","rgba(84,19,125,1)","rgba(85,20,125,1)","rgba(87,20,126,1)","rgba(88,21,126,1)","rgba(90,21,126,1)","rgba(92,22,127,1)","rgba(93,23,127,1)","rgba(95,23,127,1)","rgba(96,24,128,1)","rgba(98,25,128,1)","rgba(99,25,128,1)","rgba(101,26,128,1)","rgba(103,26,128,1)","rgba(104,27,129,1)","rgba(106,28,129,1)","rgba(107,28,129,1)","rgba(109,29,129,1)","rgba(110,30,129,1)","rgba(112,30,129,1)","rgba(113,31,129,1)","rgba(115,32,129,1)","rgba(117,32,129,1)","rgba(118,33,129,1)","rgba(120,33,129,1)","rgba(121,34,130,1)","rgba(123,35,130,1)","rgba(124,35,130,1)","rgba(126,36,130,1)","rgba(128,36,130,1)","rgba(129,37,129,1)","rgba(131,37,129,1)","rgba(132,38,129,1)","rgba(134,39,129,1)","rgba(136,39,129,1)","rgba(137,40,129,1)","rgba(139,40,129,1)","rgba(140,41,129,1)","rgba(142,41,129,1)","rgba(144,42,129,1)","rgba(145,42,129,1)","rgba(147,43,128,1)","rgba(148,43,128,1)","rgba(150,44,128,1)","rgba(152,44,128,1)","rgba(153,45,128,1)","rgba(155,46,127,1)","rgba(157,46,127,1)","rgba(158,47,127,1)","rgba(160,47,127,1)","rgba(161,48,126,1)","rgba(163,48,126,1)","rgba(165,49,126,1)","rgba(166,49,125,1)","rgba(168,50,125,1)","rgba(170,50,125,1)","rgba(171,51,124,1)","rgba(173,51,124,1)","rgba(175,52,123,1)","rgba(176,52,123,1)","rgba(178,53,123,1)","rgba(180,53,122,1)","rgba(181,54,122,1)","rgba(183,55,121,1)","rgba(185,55,121,1)","rgba(186,56,120,1)","rgba(188,56,120,1)","rgba(189,57,119,1)","rgba(191,57,118,1)","rgba(193,58,118,1)","rgba(194,59,117,1)","rgba(196,59,117,1)","rgba(198,60,116,1)","rgba(199,61,115,1)","rgba(201,61,115,1)","rgba(202,62,114,1)","rgba(204,63,113,1)","rgba(206,63,113,1)","rgba(207,64,112,1)","rgba(209,65,111,1)","rgba(210,66,110,1)","rgba(212,67,110,1)","rgba(213,67,109,1)","rgba(215,68,108,1)","rgba(216,69,107,1)","rgba(218,70,107,1)","rgba(219,71,106,1)","rgba(221,72,105,1)","rgba(222,73,104,1)","rgba(223,74,103,1)","rgba(225,75,103,1)","rgba(226,76,102,1)","rgba(227,78,101,1)","rgba(229,79,100,1)","rgba(230,80,100,1)","rgba(231,81,99,1)","rgba(232,83,98,1)","rgba(233,84,97,1)","rgba(234,85,97,1)","rgba(236,87,96,1)","rgba(237,88,95,1)","rgba(238,90,95,1)","rgba(239,91,94,1)","rgba(239,93,94,1)","rgba(240,95,93,1)","rgba(241,96,93,1)","rgba(242,98,93,1)","rgba(243,100,92,1)","rgba(243,101,92,1)","rgba(244,103,92,1)","rgba(245,105,92,1)","rgba(246,107,92,1)","rgba(246,108,92,1)","rgba(247,110,92,1)","rgba(247,112,92,1)","rgba(248,114,92,1)","rgba(248,116,92,1)","rgba(249,118,92,1)","rgba(249,120,92,1)","rgba(250,121,93,1)","rgba(250,123,93,1)","rgba(250,125,94,1)","rgba(251,127,94,1)","rgba(251,129,95,1)","rgba(251,131,95,1)","rgba(252,133,96,1)","rgba(252,135,97,1)","rgba(252,137,97,1)","rgba(252,139,98,1)","rgba(253,140,99,1)","rgba(253,142,100,1)","rgba(253,144,101,1)","rgba(253,146,102,1)","rgba(253,148,103,1)","rgba(254,150,104,1)","rgba(254,152,105,1)","rgba(254,154,106,1)","rgba(254,156,107,1)","rgba(254,157,108,1)","rgba(254,159,109,1)","rgba(254,161,110,1)","rgba(254,163,111,1)","rgba(254,165,112,1)","rgba(255,167,114,1)","rgba(255,169,115,1)","rgba(255,171,116,1)","rgba(255,172,118,1)","rgba(255,174,119,1)","rgba(255,176,120,1)","rgba(255,178,122,1)","rgba(255,180,123,1)","rgba(255,182,124,1)","rgba(255,184,126,1)","rgba(255,185,127,1)","rgba(255,187,129,1)","rgba(255,189,130,1)","rgba(255,191,132,1)","rgba(255,193,133,1)","rgba(255,195,135,1)","rgba(255,197,136,1)","rgba(255,198,138,1)","rgba(255,200,140,1)","rgba(255,202,141,1)","rgba(255,204,143,1)","rgba(254,206,144,1)","rgba(254,208,146,1)","rgba(254,209,148,1)","rgba(254,211,149,1)","rgba(254,213,151,1)","rgba(254,215,153,1)","rgba(254,217,155,1)","rgba(254,219,156,1)","rgba(254,220,158,1)","rgba(254,222,160,1)","rgba(254,224,162,1)","rgba(254,226,163,1)","rgba(253,228,165,1)","rgba(253,230,167,1)","rgba(253,231,169,1)","rgba(253,233,171,1)","rgba(253,235,172,1)","rgba(253,237,174,1)","rgba(253,239,176,1)","rgba(253,241,178,1)","rgba(253,242,180,1)","rgba(253,244,182,1)","rgba(253,246,184,1)","rgba(252,248,186,1)","rgba(252,250,188,1)","rgba(252,251,189,1)","rgba(252,253,191,1)"]},viridis:{name:"viridis",value:["rgba(68,1,84,1)","rgba(68,2,85,1)","rgba(69,3,87,1)","rgba(69,5,88,1)","rgba(69,6,90,1)","rgba(70,8,91,1)","rgba(70,9,93,1)","rgba(70,11,94,1)","rgba(70,12,96,1)","rgba(71,14,97,1)","rgba(71,15,98,1)","rgba(71,17,100,1)","rgba(71,18,101,1)","rgba(71,20,102,1)","rgba(72,21,104,1)","rgba(72,22,105,1)","rgba(72,24,106,1)","rgba(72,25,108,1)","rgba(72,26,109,1)","rgba(72,28,110,1)","rgba(72,29,111,1)","rgba(72,30,112,1)","rgba(72,32,113,1)","rgba(72,33,115,1)","rgba(72,34,116,1)","rgba(72,36,117,1)","rgba(72,37,118,1)","rgba(72,38,119,1)","rgba(72,39,120,1)","rgba(71,41,121,1)","rgba(71,42,121,1)","rgba(71,43,122,1)","rgba(71,44,123,1)","rgba(71,46,124,1)","rgba(70,47,125,1)","rgba(70,48,126,1)","rgba(70,49,126,1)","rgba(70,51,127,1)","rgba(69,52,128,1)","rgba(69,53,129,1)","rgba(69,54,129,1)","rgba(68,56,130,1)","rgba(68,57,131,1)","rgba(68,58,131,1)","rgba(67,59,132,1)","rgba(67,60,132,1)","rgba(67,62,133,1)","rgba(66,63,133,1)","rgba(66,64,134,1)","rgba(65,65,134,1)","rgba(65,66,135,1)","rgba(65,67,135,1)","rgba(64,69,136,1)","rgba(64,70,136,1)","rgba(63,71,136,1)","rgba(63,72,137,1)","rgba(62,73,137,1)","rgba(62,74,137,1)","rgba(61,75,138,1)","rgba(61,77,138,1)","rgba(60,78,138,1)","rgba(60,79,138,1)","rgba(59,80,139,1)","rgba(59,81,139,1)","rgba(58,82,139,1)","rgba(58,83,139,1)","rgba(57,84,140,1)","rgba(57,85,140,1)","rgba(56,86,140,1)","rgba(56,87,140,1)","rgba(55,88,140,1)","rgba(55,89,140,1)","rgba(54,91,141,1)","rgba(54,92,141,1)","rgba(53,93,141,1)","rgba(53,94,141,1)","rgba(52,95,141,1)","rgba(52,96,141,1)","rgba(51,97,141,1)","rgba(51,98,141,1)","rgba(51,99,141,1)","rgba(50,100,142,1)","rgba(50,101,142,1)","rgba(49,102,142,1)","rgba(49,103,142,1)","rgba(48,104,142,1)","rgba(48,105,142,1)","rgba(47,106,142,1)","rgba(47,107,142,1)","rgba(47,108,142,1)","rgba(46,109,142,1)","rgba(46,110,142,1)","rgba(45,111,142,1)","rgba(45,112,142,1)","rgba(45,112,142,1)","rgba(44,113,142,1)","rgba(44,114,142,1)","rgba(43,115,142,1)","rgba(43,116,142,1)","rgba(43,117,142,1)","rgba(42,118,142,1)","rgba(42,119,142,1)","rgba(41,120,142,1)","rgba(41,121,142,1)","rgba(41,122,142,1)","rgba(40,123,142,1)","rgba(40,124,142,1)","rgba(40,125,142,1)","rgba(39,126,142,1)","rgba(39,127,142,1)","rgba(38,128,142,1)","rgba(38,129,142,1)","rgba(38,130,142,1)","rgba(37,131,142,1)","rgba(37,131,142,1)","rgba(37,132,142,1)","rgba(36,133,142,1)","rgba(36,134,142,1)","rgba(35,135,142,1)","rgba(35,136,142,1)","rgba(35,137,142,1)","rgba(34,138,141,1)","rgba(34,139,141,1)","rgba(34,140,141,1)","rgba(33,141,141,1)","rgba(33,142,141,1)","rgba(33,143,141,1)","rgba(32,144,141,1)","rgba(32,145,140,1)","rgba(32,146,140,1)","rgba(32,147,140,1)","rgba(31,147,140,1)","rgba(31,148,140,1)","rgba(31,149,139,1)","rgba(31,150,139,1)","rgba(31,151,139,1)","rgba(30,152,139,1)","rgba(30,153,138,1)","rgba(30,154,138,1)","rgba(30,155,138,1)","rgba(30,156,137,1)","rgba(30,157,137,1)","rgba(30,158,137,1)","rgba(30,159,136,1)","rgba(30,160,136,1)","rgba(31,161,136,1)","rgba(31,162,135,1)","rgba(31,163,135,1)","rgba(31,163,134,1)","rgba(32,164,134,1)","rgba(32,165,134,1)","rgba(33,166,133,1)","rgba(33,167,133,1)","rgba(34,168,132,1)","rgba(35,169,131,1)","rgba(35,170,131,1)","rgba(36,171,130,1)","rgba(37,172,130,1)","rgba(38,173,129,1)","rgba(39,174,129,1)","rgba(40,175,128,1)","rgba(41,175,127,1)","rgba(42,176,127,1)","rgba(43,177,126,1)","rgba(44,178,125,1)","rgba(46,179,124,1)","rgba(47,180,124,1)","rgba(48,181,123,1)","rgba(50,182,122,1)","rgba(51,183,121,1)","rgba(53,183,121,1)","rgba(54,184,120,1)","rgba(56,185,119,1)","rgba(57,186,118,1)","rgba(59,187,117,1)","rgba(61,188,116,1)","rgba(62,189,115,1)","rgba(64,190,114,1)","rgba(66,190,113,1)","rgba(68,191,112,1)","rgba(70,192,111,1)","rgba(72,193,110,1)","rgba(73,194,109,1)","rgba(75,194,108,1)","rgba(77,195,107,1)","rgba(79,196,106,1)","rgba(81,197,105,1)","rgba(83,198,104,1)","rgba(85,198,102,1)","rgba(88,199,101,1)","rgba(90,200,100,1)","rgba(92,201,99,1)","rgba(94,201,98,1)","rgba(96,202,96,1)","rgba(98,203,95,1)","rgba(101,204,94,1)","rgba(103,204,92,1)","rgba(105,205,91,1)","rgba(108,206,90,1)","rgba(110,206,88,1)","rgba(112,207,87,1)","rgba(115,208,85,1)","rgba(117,208,84,1)","rgba(119,209,82,1)","rgba(122,210,81,1)","rgba(124,210,79,1)","rgba(127,211,78,1)","rgba(129,212,76,1)","rgba(132,212,75,1)","rgba(134,213,73,1)","rgba(137,213,72,1)","rgba(139,214,70,1)","rgba(142,215,68,1)","rgba(144,215,67,1)","rgba(147,216,65,1)","rgba(149,216,63,1)","rgba(152,217,62,1)","rgba(155,217,60,1)","rgba(157,218,58,1)","rgba(160,218,57,1)","rgba(163,219,55,1)","rgba(165,219,53,1)","rgba(168,220,51,1)","rgba(171,220,50,1)","rgba(173,221,48,1)","rgba(176,221,46,1)","rgba(179,221,45,1)","rgba(181,222,43,1)","rgba(184,222,41,1)","rgba(187,223,39,1)","rgba(189,223,38,1)","rgba(192,223,36,1)","rgba(195,224,35,1)","rgba(197,224,33,1)","rgba(200,225,32,1)","rgba(203,225,30,1)","rgba(205,225,29,1)","rgba(208,226,28,1)","rgba(211,226,27,1)","rgba(213,226,26,1)","rgba(216,227,25,1)","rgba(219,227,24,1)","rgba(221,227,24,1)","rgba(224,228,24,1)","rgba(226,228,24,1)","rgba(229,228,24,1)","rgba(232,229,25,1)","rgba(234,229,25,1)","rgba(237,229,26,1)","rgba(239,230,27,1)","rgba(242,230,28,1)","rgba(244,230,30,1)","rgba(247,230,31,1)","rgba(249,231,33,1)","rgba(251,231,35,1)","rgba(254,231,36,1)"]},custom:{name:"Custom...",componentPickers:{heatmap:uP,"horizontal-heatmap":uP}}}},align:{name:"Align",inlineOptions:{white:{name:"Top",value:"top"},lightGrey:{name:"Bottom",value:"bottom"}}},colorRangeGradient:{name:"Color Gradient",inlineOptions:Yi},dataTransform:{name:"Transforms",inlineOptions:{default:{name:"Default",value:"default"},None:{name:"None",value:"None"}},generateOptions:e=>{const t=[];if(e.transforms)for(const n of e.transforms)t.push({name:n.name,value:n.value});return t}},aggregationMode:{name:"Aggregation Mode",inlineOptions:{},generateOptions:e=>{const t=[];return e.aggregationModes?Object.values(e.aggregationModes).forEach(({name:n,value:r})=>{t.push({name:n,value:r})}):t.push({name:"Default",value:"default"}),t}},maxZoom:{name:"Zoom limit",inlineOptions:{none:{name:"None",value:null}},generateOptions:e=>{if(e.maxZoom){const t=[];for(let n=0;n<=e.maxZoom;n++){const{maxWidth:r,binsPerDimension:i,maxZoom:o}=e;let a=1,s=1;if(e.resolutions){const l=e.resolutions.map(f=>+f).sort((f,h)=>h-f);[a]=l,s=l[n]}else s=e.maxWidth/(2**n*e.binsPerDimension),a=r/(2**o*i);const u=ed(a,s),c=Wc(`.${u}`,s)(s);t.push({name:c,value:n.toString()})}return t}return[]}},valueColumn:{name:"Value column",inlineOptions:{none:{name:"None",value:null}},generateOptions:oU},zeroValueColor:{name:"Zero Value Color",inlineOptions:Hr}},XQ={...vpe,IS_TRACK_RANGE_SELECTABLE:rd,OPTIONS_INFO:Rn},gQe={d3Array:aoe,d3Axis:FLe,d3Brush:nfe,d3Color:_oe,d3Drag:Mce,d3Dsv:Hpe,d3Format:qoe,d3Geo:Z6e,d3Queue:nze,d3Request:Sze,d3Scale:Sse,d3Selection:nie,d3Transition:qPe,d3Zoom:tDe,PIXI:XQ.GLOBALS.PIXI,mix:Sd,slugid:zt},yQe={Annotations1dTrack:YI,Annotations2dTrack:S$,ArrowheadDomainsTrack:T$,BarTrack:s2,BedLikeTrack:p$,CNVIntervalTrack:b$,Chromosome2DAnnotations:k$,Chromosome2DLabels:O$,ChromosomeGrid:Mm,CombinedTrack:DR,CrossRule:K$,DivergentBarTrack:y$,HeatmapTiledPixiTrack:hv,Horizontal1dHeatmapTrack:v$,Horizontal2DDomainsTrack:w$,HorizontalChromosomeLabels:I$,HorizontalGeneAnnotationsTrack:_$,HorizontalHeatmapTrack:C$,HorizontalLine1DPixiTrack:Ed,HorizontalMultivecTrack:g$,HorizontalPoint1DPixiTrack:m$,HorizontalRule:U$,HorizontalTiled1DPixiTrack:_d,HorizontalTiledPlot:WT,HorizontalTrack:qK,Id2DTiledPixiTrack:xq,IdHorizontal1DTiledPixiTrack:Cq,IdVertical1DTiledPixiTrack:Dq,LeftAxisTrack:Lq,MapboxTilesTrack:J$,MoveableTrack:AS,OSMTileIdsTrack:Z$,OSMTilesTrack:pv,OverlayTrack:d$,PixiTrack:Ai,RasterTilesTrack:eK,SVGTrack:uh,SquareMarkersTrack:A$,Tiled1DPixiTrack:ZN,TiledPixiTrack:lh,TopAxisTrack:Mq,Track:Nf,ValueIntervalTrack:D$,VerticalRule:q$,VerticalTiled1DPixiTrack:Pq,VerticalTrack:KK,ViewportTracker2D:R$,ViewportTracker2DPixi:Q8e,ViewportTrackerHorizontal:N$,ViewportTrackerVertical:M$},vQe={ContextMenuItem:It,DataFetcher:hS,LruCache:ZK},bQe={ChromosomeInfo:Bs,SearchField:Lp},_Qe={DataFetcher:hS,GBKDataFetcher:wq,LocalDataFetcher:Aq,getDataFetcher:B4e},rE={chromosomes:bQe,libraries:gQe,tracks:yQe,dataFetchers:_Qe,factories:vQe,services:_de,utils:vDe,configs:XQ,VERSION:JK},jO={"track-renderer":"_track-renderer_11dwb_1","track-renderer-element":"_track-renderer-element_11dwb_5","track-renderer-events":"_track-renderer-events_11dwb_6"};function TQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EQe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wQe(r.key),r)}}function SQe(e,t,n){return t&&EQe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wQe(e){var t=AQe(e,"string");return typeof t=="symbol"?t:String(t)}function AQe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function OQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cP(e,t)}function cP(e,t){return cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},cP(e,t)}function kQe(e){var t=IQe();return function(){var n=nE(e),r;if(t){var i=nE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xQe(this,r)}}function xQe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mo(e)}function Mo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IQe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nE(e){return nE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nE(e)}const{getDataFetcher:CQe}=rE.dataFetchers,PQe=100;let cM=function(e){OQe(n,e);var t=kQe(n);function n(r){var i;if(TQe(this,n),i=t.call(this,r),i.dragging=!1,i.element=null,i.eventTracker=null,i.eventTrackerOld=null,i.closing=!1,i.yPositionOffset=0,i.xPositionOffset=0,i.scrollTop=0,i.scrollTimeout=null,i.activeTransitions=0,i.zoomTransform=Tn,i.windowScrolledBound=i.windowScrolled.bind(Mo(i)),i.zoomStartedBound=i.zoomStarted.bind(Mo(i)),i.zoomedBound=i.zoomed.bind(Mo(i)),i.zoomEndedBound=i.zoomEnded.bind(Mo(i)),i.uid=zt.nice(),i.viewUid=i.props.uid,i.availableForPlugins={...rE,services:{...rE.services,pubSub:i.props.pubSub,pixiRenderer:i.props.pixiRenderer}},i.mounted=!1,i.emptyZoomBehavior=Zx(),i.currentProps=r,i.prevPropsStr="",i.zoomBehavior=Zx().filter(o=>!(o.target.classList.contains("no-zoom")||o.target.classList.contains("react-resizable-handle"))).on("start",i.zoomStartedBound).on("zoom",i.zoomedBound).on("end",i.zoomEndedBound),i.zoomTransform=Tn,i.prevZoomTransform=Tn,i.initialXDomain=[0,1],i.initialYDomain=[0,1],i.xDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],i.yDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],i.zoomLimits=[0,Number.MAX_SAFE_INTEGER],i.prevCenterX=i.currentProps.paddingLeft+i.currentProps.leftWidth+i.currentProps.centerWidth/2,i.prevCenterY=i.currentProps.paddingTop+i.currentProps.topHeight+i.currentProps.centerHeight/2,i.cumCenterXOffset=0,i.cumCenterYOffset=0,i.setUpInitialScales(i.currentProps.initialXDomain,i.currentProps.initialYDomain,i.currentProps.xDomainLimits,i.currentProps.yDomainLimits,i.currentProps.zoomLimits),i.setUpScales(),i.trackDefObjects={},i.metaTracks={},i.pubSubs=[],window.higlassTracksByType)for(const o in window.higlassTracksByType)Tr[o]=window.higlassTracksByType[o].config;return i.boundForwardEvent=i.forwardEvent.bind(Mo(i)),i.boundScrollEvent=i.scrollEvent.bind(Mo(i)),i.boundForwardContextMenu=i.forwardContextMenu.bind(Mo(i)),i.dispatchEventBound=i.dispatchEvent.bind(Mo(i)),i.zoomToDataPosHandlerBound=i.zoomToDataPosHandler.bind(Mo(i)),i.onScrollHandlerBound=i.onScrollHandler.bind(Mo(i)),i.elementPos={height:0,width:0,left:0,top:0},i.elementSelection=null,i}return SQe(n,[{key:"xScale",get:function(){if(!this._xScale)throw new Error("xScale is not defined");return this._xScale}},{key:"yScale",get:function(){if(!this._yScale)throw new Error("yScale is not defined");return this._yScale}},{key:"UNSAFE_componentWillMount",value:function(){this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("scroll",this.windowScrolledBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.event",this.dispatchEventBound)),this.pubSubs.push(this.props.pubSub.subscribe("zoomToDataPos",this.zoomToDataPosHandlerBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.scroll",this.onScrollHandlerBound))}},{key:"componentDidMount",value:function(){if(!this.element)throw new Error("Component did not mount, this.element is not defined.");if(this.elementPos=this.element.getBoundingClientRect(),this.elementSelection=Wt(this.element),this.pStage=new Ue.PIXI.Graphics,this.pMask=new Ue.PIXI.Graphics,this.pOutline=new Ue.PIXI.Graphics,this.pBackground=new Ue.PIXI.Graphics,this.pStage.addChild(this.pMask),this.pStage.addChild(this.pOutline),this.currentProps.pixiStage.addChild(this.pStage),this.pStage.mask=this.pMask,this.props.isRangeSelection||this.addZoom(),!this.currentProps.svgElement||!this.currentProps.canvasElement)return;this.svgElement=this.currentProps.svgElement,this.syncTrackObjects(this.currentProps.positionedTracks),this.syncMetaTracks(this.currentProps.metaTracks),this.currentProps.setCentersFunction(this.setCenter.bind(this)),this.currentProps.registerDraggingChangedListener(this.draggingChanged.bind(this)),this.draggingChanged(!0),this.addEventTracker();const r=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],i=this.svgElement.getBoundingClientRect(),o=[[Math.max(r[0][0],0),Math.max(r[0][1],0)],[Math.min(r[1][0],i.width),Math.min(r[1][1],i.height)]];this.zoomBehavior.extent(o).translateExtent(r).scaleExtent(this.zoomLimits)}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){if(!r.svgElement||!r.canvasElement)return;const i=this.updatablePropsToString(r);if(this.currentProps=r,this.prevPropsStr===i)return;this.setBackground();for(const u in this.trackDefObjects){const c=this.trackDefObjects[u].trackObject;c.delayDrawing=!0}this.prevPropsStr=i,this.setUpInitialScales(r.initialXDomain,r.initialYDomain,r.xDomainLimits,r.yDomainLimits,r.zoomLimits),this.setUpScales(r.width!==this.props.width||r.height!==this.props.height),this.svgElement=r.svgElement;const o=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],a=this.svgElement.getBoundingClientRect(),s=[[Math.max(o[0][0],0),Math.max(o[0][1],0)],[Math.min(o[1][0],a.width),Math.min(o[1][1],a.height)]];this.zoomBehavior.extent(s).translateExtent(o).scaleExtent(this.zoomLimits),this.syncTrackObjects(r.positionedTracks),this.syncMetaTracks(r.metaTracks);for(const u of r.positionedTracks){const c=u.track.options,l=this.trackDefObjects[u.track.uid].trackObject;if(l.rerender(c),i0(u.track)){const f={};for(const h of u.track.contents)f[h.uid]=h;for(const h in l.createdTracks)l.createdTracks[h].rerender(f[h].options)}}this.props.onNewTilesLoaded();for(const u in this.trackDefObjects){const c=this.trackDefObjects[u].trackObject;c.delayDrawing=!1,c.draw()}}},{key:"componentDidUpdate",value:function(r){(this.props.initialXDomain[0]!==r.initialXDomain[0]||this.props.initialXDomain[1]!==r.initialXDomain[1]||this.props.initialYDomain[0]!==r.initialYDomain[0]||this.props.initialYDomain[1]!==r.initialYDomain[1])&&this.element&&(this.element.__zoom=Tn),r.isRangeSelection!==this.props.isRangeSelection&&(this.props.isRangeSelection?this.removeZoom():this.addZoom()),r.zoomable!==this.props.zoomable&&(this.props.zoomable?this.addZoom():this.removeZoom()),this.addEventTracker()}},{key:"componentWillUnmount",value:function(){var r,i;this.mounted=!1,this.removeTracks(Object.keys(this.trackDefObjects)),this.removeMetaTracks(Object.keys(this.metaTracks)),this.currentProps.removeDraggingChangedListener(this.draggingChanged),this.pStage&&this.currentProps.pixiStage.removeChild(this.pStage),(r=this.pMask)==null||r.destroy(!0),(i=this.pStage)==null||i.destroy(!0),this.pubSubs.forEach(o=>this.props.pubSub.unsubscribe(o)),this.pubSubs=[],this.removeEventTracker()}},{key:"dispatchEvent",value:function(r){r.sourceUid===this.uid&&r.type!=="contextmenu"&&this.element&&I_(r,this.element)}},{key:"isWithin",value:function(r,i){const o=r>=this.elementPos.left&&r<=this.elementPos.width+this.elementPos.left,a=i>=this.elementPos.top&&i<=this.elementPos.height+this.elementPos.top;return o&&a}},{key:"zoomToDataPosHandler",value:function({pos:r,animateTime:i}){this.zoomToDataPos(...r,i)}},{key:"addZoom",value:function(){!this.elementSelection||!this.currentProps.zoomable||(this.elementSelection.call(this.zoomBehavior),this.zoomBehavior.transform(this.elementSelection,this.zoomTransform))}},{key:"removeZoom",value:function(){this.elementSelection&&(this.zoomEnded(),this.elementSelection.on(".zoom",null))}},{key:"setMask",value:function(){var r,i,o,a;(r=this.pMask)==null||r.clear(),(i=this.pMask)==null||i.beginFill(),(o=this.pMask)==null||o.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),(a=this.pMask)==null||a.endFill()}},{key:"setBackground",value:function(){var r,i,o,a,s;const u=this.props.theme===wr?"black":"white",c=ct(((r=this.currentProps.viewOptions)==null?void 0:r.backgroundColor)??u);(i=this.pBackground)==null||i.clear(),(o=this.pBackground)==null||o.beginFill(c),(a=this.pBackground)==null||a.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),(s=this.pBackground)==null||s.endFill()}},{key:"windowScrolled",value:function(){this.removeZoom(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.addZoom()},PQe)}},{key:"setUpInitialScales",value:function(r=[0,1],i=[0,1],o=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],a=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],s=[0,Number.MAX_SAFE_INTEGER]){s[0]=s[0]===null?0:s[0],s[1]=s[1]===null?1/0:s[1];const u=r[1]-r[0],c=(i[0]+i[1])/2;if(i[0]=c-u/2,i[1]=c+u/2,r[0]===this.initialXDomain[0]&&r[1]===this.initialXDomain[1]&&i[0]===this.initialYDomain[0]&&i[1]===this.initialYDomain[1]&&o[0]===this.xDomainLimits[0]&&o[1]===this.xDomainLimits[1]&&a[0]===this.yDomainLimits[0]&&a[1]===this.yDomainLimits[1]&&s[0]===this.zoomLimits[0]&&s[1]===this.zoomLimits[1])return;this.initialXDomain=r,this.initialYDomain=i,this.xDomainLimits=o,this.yDomainLimits=a,this.zoomLimits=s,this.zoomTransform=Tn,this.prevZoomTransform=Tn,this.cumCenterYOffset=0,this.cumCenterXOffset=0,this.drawableToDomainX=kt().domain([this.currentProps.paddingLeft+this.currentProps.leftWidth,this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth]).range([r[0],r[1]]);let l,f;this.currentProps.centerWidth===0?(l=this.currentProps.paddingTop+this.currentProps.topHeight,f=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight):(l=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2-this.currentProps.centerWidth/2,f=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2+this.currentProps.centerWidth/2),this.drawableToDomainY=kt().domain([l,f]).range([i[0],i[1]]),this.prevCenterX=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,this.prevCenterY=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2}},{key:"updatablePropsToString",value:function(r){return JSON.stringify({positionedTracks:r.positionedTracks,initialXDomain:r.initialXDomain,initialYDomain:r.initialYDomain,width:r.width,height:r.height,paddingLeft:r.paddingLeft,paddingTop:r.paddingTop,leftWidth:r.leftWidth,topHeight:r.topHeight,dragging:r.dragging,viewOptions:r.viewOptions})}},{key:"draggingChanged",value:function(r){this.dragging=r,this.timedUpdatePositionAndDimensions()}},{key:"setUpScales",value:function(r=!1){const i=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,o=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2;if(!this.drawableToDomainX||!this.drawableToDomainY)return;const a=(this.drawableToDomainX(i)-this.drawableToDomainX(this.prevCenterX))/this.zoomTransform.k,s=(this.drawableToDomainY(o)-this.drawableToDomainY(this.prevCenterY))/this.zoomTransform.k;this.cumCenterYOffset+=s,this.cumCenterXOffset+=a,this.prevCenterY=o,this.prevCenterX=i;const u=[this.drawableToDomainX(0)-this.cumCenterXOffset,this.drawableToDomainX(this.currentProps.width)-this.cumCenterXOffset],c=[this.drawableToDomainY(0)-this.cumCenterYOffset,this.drawableToDomainY(this.currentProps.height)-this.cumCenterYOffset];this._xScale=kt().domain(u).range([0,this.currentProps.width]),this._yScale=kt().domain(c).range([0,this.currentProps.height]);for(const l in this.trackDefObjects)this.trackDefObjects[l].trackObject.refScalesChanged(this.xScale,this.yScale);this.applyZoomTransform(r)}},{key:"getTrackDef",value:function(r){const i=po(this.trackDefObjects);for(const[,{trackDef:o,trackObject:a}]of i){if(a===r)return o.track;if(i0(o.track)){for(const s of o.track.contents)if(a.createdTracks[s.uid]===r)return s}}return null}},{key:"getTrackObject",value:function(r){const i=po(this.trackDefObjects);for(let o=0;o<i.length;o++){const a=i[o][0],s=i[o][1].trackObject;if(a===r)return s;if(s.createdTracks){const u=po(s.createdTracks);for(let c=0;c<u.length;c++){const l=u[c][0],f=u[c][1];if(l===r)return f}}}}},{key:"timedUpdatePositionAndDimensions",value:function(){this.closing||!this.element||(this.elementPos=this.element.getBoundingClientRect(),this.dragging&&(this.yPositionOffset=this.element.getBoundingClientRect().top-this.currentProps.canvasElement.getBoundingClientRect().top+this.scrollTop,this.xPositionOffset=this.element.getBoundingClientRect().left-this.currentProps.canvasElement.getBoundingClientRect().left,this.setMask(),this.setBackground(),this.updateTrackPositions()&&this.applyZoomTransform(!0),requestAnimationFrame(this.timedUpdatePositionAndDimensions.bind(this))))}},{key:"syncMetaTracks",value:function(r){const i=Object.keys(this.metaTracks),o=new Set(r.map(a=>a.uid));this.addMetaTracks(r.filter(a=>!this.metaTracks[a.uid])),this.updateMetaTracks(r.filter(a=>this.metaTracks[a.uid])),this.removeMetaTracks(i.filter(a=>!o.has(a)))}},{key:"syncTrackObjects",value:function(r){this.prevTrackDefinitions=JSON.stringify(r);const i={};for(let l=0;l<r.length;l++)i[r[l].track.uid]=r[l];const o=new Set(Object.keys(this.trackDefObjects)),a=new Set(Object.keys(i)),s=new Set([...a].filter(l=>!o.has(l))),u=new Set([...o].filter(l=>!a.has(l))),c=new Set([...a].filter(l=>o.has(l)));this.updateExistingTrackDefs([...c].map(l=>i[l])),this.addNewTracks([...s].map(l=>i[l])),this.updateExistingTrackDefs([...s].map(l=>i[l])),this.removeTracks([...u])}},{key:"addMetaTracks",value:function(r){r.filter(i=>!this.metaTracks[i.uid]).forEach(i=>{this.metaTracks[i.uid]={trackDef:i,trackObject:this.createMetaTrack(i)}})}},{key:"addNewTracks",value:function(r){if(this.currentProps.pixiStage){for(let i=0;i<r.length;i++){const o=r[i],a=this.createTrackObject(o.track);a.refScalesChanged(this.xScale,this.yScale),this.trackDefObjects[o.track.uid]={trackDef:o,trackObject:a};const s=this.zoomTransform.rescaleX(this.xScale),u=this.zoomTransform.rescaleY(this.yScale);a.setDimensions([o.width,o.height]),a.zoomed(s,u)}this.applyZoomTransform(!1)}}},{key:"updateMetaTracks",value:function(r){}},{key:"updateExistingTrackDefs",value:function(r){for(const i of r){const o=this.trackDefObjects[i.track.uid];o.trackDef=i,i0(i.track)&&o.trackObject.updateContents(i.track.contents,this.createTrackObject.bind(this)).refScalesChanged(this.xScale,this.yScale)}this.updateTrackPositions()&&this.applyZoomTransform(!1)}},{key:"updateTrackPositions",value:function(){let r=!1;for(const i in this.trackDefObjects){const o=this.trackDefObjects[i].trackDef,a=this.trackDefObjects[i].trackObject,s=a.position,u=a.dimensions,c=[this.xPositionOffset+o.left,this.yPositionOffset+o.top],l=[o.width,o.height];(!s||c[0]!==s[0]||c[1]!==s[1])&&(a.setPosition(c),r=!0),(!u||l[0]!==u[0]||l[1]!==u[1])&&(a.setDimensions(l),r=!0)}return r}},{key:"removeMetaTracks",value:function(r){r.forEach(i=>{this.metaTracks[i].trackObject.remove(),this.metaTracks[i]=void 0,delete this.metaTracks[i]})}},{key:"removeTracks",value:function(r){for(let i=0;i<r.length;i++)this.trackDefObjects[r[i]].trackObject.remove(),delete this.trackDefObjects[r[i]]}},{key:"setCenter",value:function(r,i,o,a=!1,s=0,u=this.xScale,c=this.yScale){const l=(this.xScale.invert(1)-this.xScale.invert(0))/o,f=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,h=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2,p=f-u(r)*l,d=h-c(i)*l;let m;const g=()=>{const v=Tn.translate(p,d).scale(l);this.zoomTransform=v,this.elementSelection&&this.emptyZoomBehavior.transform(this.elementSelection,v),m=this.applyZoomTransform(a)};if(s&&this.elementSelection){let v=this.elementSelection;this.activeTransitions+=1,document.hidden||(v=v.transition().duration(s)),v.call(this.zoomBehavior.transform,Tn.translate(p,d).scale(l)).on("end",()=>{g(),this.activeTransitions-=1})}else g();return m}},{key:"valueScaleMove",value:function(r){if(this.zoomStartPos){for(const i of this.getTracksAtPosition(...this.zoomStartPos))i.movedY(r);this.zoomStartTransform&&(this.zoomTransform=this.zoomStartTransform)}}},{key:"valueScaleZoom",value:function(r,i){if(!Ede(r.sourceEvent))return;const o=r.sourceEvent.deltaY,a=r.sourceEvent.deltaMode,s=((c,l)=>c*(l?120:1)/500)(o,a),u=yr(r.sourceEvent,this.props.canvasElement);for(const c of this.getTracksAtPosition(...u)){const l=i==="1d-horizontal"?u[1]-c.position[1]:u[0]-c.position[0];c.zoomedY(l,2**s)}this.zoomStartTransform&&(this.zoomTransform=this.zoomStartTransform)}},{key:"zoomed",value:function(r){var i;let o=null;if(this.zoomStartPos){const a=this.getTracksAtPosition(...this.zoomStartPos);if(a.length){const s=a[0],u=this.getTrackDef(s);if(!u)return;(i=Tr[u.type])!=null&&i.orientation&&(o=Tr[u.type].orientation),s instanceof gG&&(o="1d-vertical")}}if(o&&r.sourceEvent){if(r.shiftKey||this.valueScaleZooming){if(r.sourceEvent.deltaY!==void 0){this.valueScaleZoom(r,o);return}o==="1d-horizontal"?this.valueScaleMove(r.sourceEvent.movementY):o==="1d-vertical"&&this.valueScaleMove(r.sourceEvent.movementX)}o==="1d-horizontal"&&r.sourceEvent.movementY?this.valueScaleMove(r.sourceEvent.movementY):o==="1d-vertical"&&r.sourceEvent.movementX&&this.valueScaleMove(r.sourceEvent.movementX)}this.zoomTransform=this.currentProps.zoomable?r.transform:Tn,this.prevZoomTransform.k!==this.zoomTransform.k||(o==="1d-horizontal"?this.zoomTransform=Tn.translate(this.zoomTransform.x,this.prevZoomTransform.y).scale(this.zoomTransform.k):o==="1d-vertical"&&(this.zoomTransform=Tn.translate(this.prevZoomTransform.x,this.zoomTransform.y).scale(this.zoomTransform.k)),this.element&&(this.element.__zoom=this.zoomTransform)),this.applyZoomTransform(!0),this.prevZoomTransform=this.zoomTransform,this.props.pubSub.publish("app.zoom",r),r.sourceEvent&&(r.sourceEvent.stopPropagation(),r.sourceEvent.preventDefault())}},{key:"getTracksAtPosition",value:function(r,i){const o=[];let a=[];for(const s in this.trackDefObjects){const u=this.trackDefObjects[s].trackObject;u.childTracks?a=a.concat(u.childTracks):a.push(u)}for(const s of a){const u=s.position[0]<=r&&r<=s.position[0]+s.dimensions[0],c=s.position[1]<=i&&i<=s.position[1]+s.dimensions[1];u&&c&&o.push(s)}return o}},{key:"zoomStarted",value:function(r){this.zooming=!0,r&&r.sourceEvent&&(this.zoomStartPos=yr(r.sourceEvent,this.props.canvasElement),r.sourceEvent.shiftKey&&(this.valueScaleZooming=!0)),this.zoomStartTransform=this.zoomTransform,this.props.pubSub.publish("app.zoomStart")}},{key:"zoomEnded",value:function(){this.zooming=!1,this.zoomStartPos=null,this.valueScaleZooming&&(this.valueScaleZooming=!1,this.element&&(this.element.__zoom=this.zoomStartTransform)),this.props.pubSub.publish("app.zoomEnd")}},{key:"applyZoomTransform",value:function(r=!0){const i=this.currentProps,o=i.paddingLeft+i.leftWidth,a=i.paddingTop+i.topHeight;if(!this.xScale||!this.yScale)return;this.zoomedXScale=this.zoomTransform.rescaleX(this.xScale),this.zoomedYScale=this.zoomTransform.rescaleY(this.yScale);const s=kt().domain([o,o+i.centerWidth].map(this.zoomedXScale.invert)).range([0,i.centerWidth]),u=kt().domain([a,a+i.centerHeight].map(this.zoomedYScale.invert)).range([0,i.centerHeight]);for(const c in this.trackDefObjects){const l=this.trackDefObjects[c].trackObject,f=this.trackDefObjects[c].trackDef;let h="unknown";if(Tr[f.track.type]&&(h=Tr[f.track.type].orientation),h==="whole"){const p=kt().domain([i.paddingLeft,i.width-i.paddingLeft].map(this.zoomedXScale.invert)).range([0,i.width-2*i.paddingLeft]),d=kt().domain([i.paddingTop,i.height-i.paddingTop].map(this.zoomedYScale.invert)).range([0,i.height-2*i.paddingTop]);l.zoomed(p,d);continue}if(this.trackDefObjects[c].trackDef.track.position==="gallery"){const p=kt().domain([i.paddingLeft+i.leftWidthNoGallery,i.paddingLeft+i.leftWidth+i.centerWidth+i.galleryDim].map(this.zoomedXScale.invert)).range([0,i.centerWidth+2*i.galleryDim]),d=kt().domain([i.paddingTop+i.topHeightNoGallery,i.paddingTop+i.topHeight+i.centerHeight+i.galleryDim].map(this.zoomedYScale.invert)).range([0,i.centerHeight-2*i.galleryDim]);l.zoomed(p.copy(),d.copy(),this.zoomTransform.k);continue}l.zoomed(s.copy(),u.copy(),this.zoomTransform.k,this.zoomTransform.x+this.xPositionOffset,this.zoomTransform.y+this.yPositionOffset,i.paddingLeft+i.leftWidth,i.paddingTop+i.topHeight)}return this.currentXScale=s,this.currentYScale=u,r&&this.currentProps.onScalesChanged(s,u),[s,u]}},{key:"createMetaTrack",value:function(r){switch(r.type){default:{const i=this.props.pluginTracks[r.type];if(i!=null&&i.isMetaTrack){const o={getTrackObject:this.getTrackObject.bind(this),onNewTilesLoaded:()=>{this.currentProps.onNewTilesLoaded(r.uid)},definition:r};try{return new i.track(this.availableForPlugins,o,r.options)}catch(a){console.error("Plugin meta track",r.type,"failed to instantiate.",a)}}return console.warn(`Unknown meta track of type: ${r.type}`),new wG(this.pStage,{name:"Unknown Track Type",type:r.type})}}}},{key:"createTrackObject",value:function(r){const i=this.createLocationAgnosticTrackObject(r);return(r.position==="left"||r.position==="right")&&Tr[r.type].orientation==="1d-horizontal"?new gG(i):i}},{key:"createLocationAgnosticTrackObject",value:function(r){let i=r.data;i||(i={server:b1(r.server),tilesetUid:r.tilesetUid}),r.coordSystem&&(i.coordSystem=r.coordSystem);const o=CQe(i,this.props.pubSub,this.props.pluginDataFetchers,this.availableForPlugins);if(!this.pStage||!this.svgElement)throw new Error("No PIXI stage or svg element");const a={id:r.uid,trackUid:r.uid,trackType:r.type,viewUid:this.viewUid,pubSub:this.props.pubSub,scene:this.pStage,dataConfig:i,dataFetcher:o,getLockGroupExtrema:()=>this.currentProps.getLockGroupExtrema(r.uid),handleTilesetInfoReceived:s=>{this.currentProps.onTilesetInfoReceived(r.uid,s)},animate:()=>{this.currentProps.onNewTilesLoaded(r.uid)},svgElement:this.svgElement,isValueScaleLocked:()=>this.currentProps.isValueScaleLocked(r.uid),onValueScaleChanged:()=>{this.currentProps.onValueScaleChanged(r.uid)},onTrackOptionsChanged:s=>{this.currentProps.onTrackOptionsChanged(r.uid,s)},onMouseMoveZoom:this.props.onMouseMoveZoom,chromInfoPath:r.chromInfoPath,isShowGlobalMousePosition:()=>this.props.isShowGlobalMousePosition,getTheme:()=>this.props.theme};switch(r.y&&(a.yPosition=r.y),r.x&&(a.xPosition=r.x),r.projectionXDomain&&(a.projectionXDomain=r.projectionXDomain),r.projectionYDomain&&(a.projectionYDomain=r.projectionYDomain),r.type){case"left-axis":return new Lq(a,r.options);case"top-axis":return new Mq(a,r.options);case"heatmap":return new hv(a,r.options);case"multivec":case"vector-heatmap":case"horizontal-multivec":case"horizontal-vector-heatmap":case"vertical-multivec":case"vertical-vector-heatmap":return new g$(a,r.options);case"1d-heatmap":case"horizontal-1d-heatmap":case"vertical-1d-heatmap":return new v$(a,r.options);case"line":case"horizontal-line":case"vertical-line":return new Ed(a,r.options);case"point":case"horizontal-point":case"vertical-point":return new m$(a,r.options);case"bar":case"horizontal-bar":case"vertical-bar":return new s2(a,r.options);case"divergent-bar":case"horizontal-divergent-bar":case"vertical-divergent-bar":return new y$(a,r.options);case"horizontal-1d-tiles":return new Cq(a,r.options);case"vertical-1d-tiles":return new Dq(a,r.options);case"2d-tiles":return new xq(a,r.options);case"stacked-interval":case"top-stacked-interval":case"left-stacked-interval":return new b$(a,r.options);case"viewport-projection-center":return r.registerViewportChanged&&r.removeViewportChanged&&r.setDomainsCallback?(a.registerViewportChanged=r.registerViewportChanged,a.removeViewportChanged=r.removeViewportChanged,a.setDomainsCallback=r.setDomainsCallback,new R$(a,r.options)):new Nf(a,{});case"viewport-projection-horizontal":return r.registerViewportChanged&&r.removeViewportChanged&&r.setDomainsCallback?(a.registerViewportChanged=r.registerViewportChanged,a.removeViewportChanged=r.removeViewportChanged,a.setDomainsCallback=r.setDomainsCallback,new N$(a,r.options)):new Nf(a,{});case"viewport-projection-vertical":return r.registerViewportChanged&&r.removeViewportChanged&&r.setDomainsCallback?(a.registerViewportChanged=r.registerViewportChanged,a.removeViewportChanged=r.removeViewportChanged,a.setDomainsCallback=r.setDomainsCallback,new M$(a,r.options)):new Nf(a,{});case"gene-annotations":case"horizontal-gene-annotations":case"vertical-gene-annotations":return new _$(a,r.options);case"2d-rectangle-domains":case"arrowhead-domains":return new T$(a,r.options);case"horizontal-1d-annotations":return new YI(a,r.options);case"vertical-1d-annotations":return new YI(a,r.options,!0);case"2d-annotations":return new S$(a,r.options);case"linear-2d-rectangle-domains":case"horizontal-2d-rectangle-domains":case"vertical-2d-rectangle-domains":return new w$(a,r.options);case"square-markers":return new A$(a,r.options);case"combined":return a.tracks=r.contents,a.createTrackObject=this.createTrackObject.bind(this),new DR(a);case"2d-chromosome-labels":return new O$(a,r.options);case"horizontal-chromosome-grid":return a.orientation="1d-horizontal",new Mm(a,r.options);case"vertical-chromosome-grid":return a.orientation="1d-vertical",new Mm(a,r.options);case"2d-chromosome-grid":return new Mm(a,r.options);case"chromosome-labels":case"horizontal-chromosome-labels":case"vertical-chromosome-labels":return new I$(a,r.options);case"linear-heatmap":case"horizontal-heatmap":case"vertical-heatmap":return new C$(a,r.options);case"2d-chromosome-annotations":return new k$(a,r.options);case"1d-value-interval":case"horizontal-1d-value-interval":case"vertical-1d-value-interval":return new D$(a,r.options);case"osm":case"osm-tiles":return new pv(a,r.options);case"osm-2d-tile-ids":return new Z$(a,r.options);case"mapbox":case"mapbox-tiles":return new J$(a,r.options);case"raster-tiles":return new eK(a,r.options);case"bedlike":case"vertical-bedlike":return new p$(a,r.options);case"overlay-track":return new d$(a,r.options);case"overlay-chromosome-grid-track":return a.isOverlay=!0,new Mm(a,r.options);case"horizontal-rule":return new U$(a,r.options);case"vertical-rule":return new q$(a,r.options);case"cross-rule":return a.x=r.x,a.y=r.y,new K$(a,r.options);case"simple-svg":return new uh(a,r.options);case"empty":{const s=r.options;return new Ai(a,s)}default:{const s=this.props.pluginTracks[r.type];if(s&&!s.isMetaTrack){a.AVAILABLE_FOR_PLUGINS=this.availableForPlugins,a.baseEl=this.baseEl,a.definition=r,r.registerViewportChanged&&r.removeViewportChanged&&r.setDomainsCallback&&(a.registerViewportChanged=r.registerViewportChanged,a.removeViewportChanged=r.removeViewportChanged,a.setDomainsCallback=r.setDomainsCallback);try{return new s.track(this.availableForPlugins,a,r.options)}catch(u){console.error("Plugin track",r.type,"failed to instantiate.",u)}}return console.warn("Unknown track type:",r.type),new wG(a,{name:"Unknown Track Type",type:r.type})}}}},{key:"zoomToDataPos",value:function(r,i,o,a,s=3e3,u=null){const[c,l,f]=un(this.xScale.copy().domain([r,i]),this.yScale.copy().domain([o,a])),h=u?u(this.xScale,this.yScale):[this.xScale,this.yScale];this.setCenter(c,l,f,!1,s,h[0],h[1])}},{key:"forwardContextMenu",value:function(r){this.props.disableTrackMenu||r.altKey||(r.preventDefault(),setTimeout(()=>{this.props.pubSub.publish("contextmenu",r)},0))}},{key:"addEventTracker",value:function(){!this.eventTracker||this.eventTracker===this.eventTrackerOld||(this.eventTrackerOld||(this.eventTrackerOld=this.eventTracker),this.eventTracker=this.eventTrackerOld,this.eventTracker.addEventListener("click",this.boundForwardEvent),this.eventTracker.addEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.addEventListener("dblclick",this.boundForwardEvent),this.eventTracker.addEventListener("wheel",this.boundForwardEvent),this.eventTracker.addEventListener("dragstart",this.boundForwardEvent),this.eventTracker.addEventListener("selectstart",this.boundForwardEvent),this.eventTracker.addEventListener("mouseover",this.boundForwardEvent),this.eventTracker.addEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.addEventListener("mousedown",this.boundForwardEvent),this.eventTracker.addEventListener("mouseup",this.boundForwardEvent),this.eventTracker.addEventListener("mouseout",this.boundForwardEvent),this.eventTracker.addEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.addEventListener("touchstart",this.boundForwardEvent),this.eventTracker.addEventListener("touchend",this.boundForwardEvent),this.eventTracker.addEventListener("touchmove",this.boundForwardEvent),this.eventTracker.addEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerover",this.boundForwardEvent),this.eventTracker.addEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.addEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.addEventListener("pointerup",this.boundForwardEvent),this.eventTracker.addEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerout",this.boundForwardEvent),this.eventTracker.addEventListener("pointerleave",this.boundForwardEvent),window.addEventListener("scroll",this.boundScrollEvent))}},{key:"removeEventTracker",value:function(){this.eventTracker&&(this.eventTracker.removeEventListener("click",this.boundForwardEvent),this.eventTracker.removeEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.removeEventListener("dblclick",this.boundForwardEvent),this.eventTracker.removeEventListener("wheel",this.boundForwardEvent),this.eventTracker.removeEventListener("dragstart",this.boundForwardEvent),this.eventTracker.removeEventListener("selectstart",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseover",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.removeEventListener("mousedown",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseup",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseout",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.removeEventListener("touchstart",this.boundForwardEvent),this.eventTracker.removeEventListener("touchend",this.boundForwardEvent),this.eventTracker.removeEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerover",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerup",this.boundForwardEvent),this.eventTracker.removeEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerout",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerleave",this.boundForwardEvent),window.removeEventListener("scroll",this.boundScrollEvent))}},{key:"scrollEvent",value:function(){this.element&&(this.elementPos=this.element.getBoundingClientRect())}},{key:"forwardEvent",value:function(r){r.sourceUid=this.uid,r.forwarded=!0,this.props.pubSub.publish("app.event",r)}},{key:"onScrollHandler",value:function(r){this.scrollTop=r}},{key:"render",value:function(){return O.createElement("div",{ref:r=>{this.baseEl=r},className:ir("track-renderer-div",jO["track-renderer"]),style:{height:this.currentProps.height,width:this.currentProps.width}},O.createElement("div",{ref:r=>{this.element=r},className:ir("track-renderer-element",jO["track-renderer-element"])}),O.createElement("div",{ref:r=>{this.eventTracker=r},className:ir("track-renderer-events",jO["track-renderer-events"])},this.currentProps.children))}}]),n}(O.Component);cM.defaultProps={pluginDataFetchers:{},pluginTracks:{},canvasElement:null,centerHeight:0,centerWidth:0,children:[],galleryDim:0,height:0,initialXDomain:[],initialYDomain:[],isShowGlobalMousePosition:!1,isRangeSelection:!1,leftWidth:0,leftWidthNoGallery:0,paddingLeft:0,paddingTop:0,positionedTracks:[],topHeight:0,topHeightNoGallery:0,width:0,metaTracks:[]};cM.propTypes={canvasElement:N.object,centerHeight:N.number,centerWidth:N.number,children:N.array,disableTrackMenu:N.bool,galleryDim:N.number,height:N.number,initialXDomain:N.array,initialYDomain:N.array,isShowGlobalMousePosition:N.bool,isRangeSelection:N.bool,leftWidth:N.number,leftWidthNoGallery:N.number,paddingLeft:N.number,paddingTop:N.number,metaTracks:N.array,onMouseMoveZoom:N.func,onNewTilesLoaded:N.func.isRequired,onScalesChanged:N.func.isRequired,pixiRenderer:N.object.isRequired,pixiStage:N.object.isRequired,pluginDataFetchers:N.object,pluginTracks:N.object,positionedTracks:N.array,pubSub:N.object.isRequired,setCentersFunction:N.func,svgElement:N.object.isRequired,theme:N.symbol.isRequired,topHeight:N.number,topHeightNoGallery:N.number,viewOptions:N.object,width:N.number,xDomainLimits:N.array,yDomainLimits:N.array,valueScaleZoom:N.bool,zoomable:N.bool.isRequired,zoomDomain:N.array,uid:N.string,zoomLimits:N.array};const DQe=gd(oh(cM));var WQ={exports:{}};/*! react-checkbox-tree - v1.8.0 | 2022 */(function(e,t){/*! For license information please see index.browser.js.LICENSE.txt */(function(n,r){e.exports=r(O)})(self,n=>(()=>{var r={4184:(s,u)=>{var c;(function(){var l={}.hasOwnProperty;function f(){for(var h=[],p=0;p<arguments.length;p++){var d=arguments[p];if(d){var m=typeof d;if(m==="string"||m==="number")h.push(d);else if(Array.isArray(d)){if(d.length){var g=f.apply(null,d);g&&h.push(g)}}else if(m==="object")if(d.toString===Object.prototype.toString)for(var v in d)l.call(d,v)&&d[v]&&h.push(v);else h.push(d.toString())}}return h.join(" ")}s.exports?(f.default=f,s.exports=f):(c=(function(){return f}).apply(u,[]))===void 0||(s.exports=c)})()},8552:(s,u,c)=>{var l=c(852)(c(5639),"DataView");s.exports=l},1989:(s,u,c)=>{var l=c(1789),f=c(401),h=c(7667),p=c(1327),d=c(1866);function m(g){var v=-1,b=g==null?0:g.length;for(this.clear();++v<b;){var y=g[v];this.set(y[0],y[1])}}m.prototype.clear=l,m.prototype.delete=f,m.prototype.get=h,m.prototype.has=p,m.prototype.set=d,s.exports=m},8407:(s,u,c)=>{var l=c(7040),f=c(4125),h=c(2117),p=c(7518),d=c(4705);function m(g){var v=-1,b=g==null?0:g.length;for(this.clear();++v<b;){var y=g[v];this.set(y[0],y[1])}}m.prototype.clear=l,m.prototype.delete=f,m.prototype.get=h,m.prototype.has=p,m.prototype.set=d,s.exports=m},7071:(s,u,c)=>{var l=c(852)(c(5639),"Map");s.exports=l},3369:(s,u,c)=>{var l=c(4785),f=c(1285),h=c(6e3),p=c(9916),d=c(5265);function m(g){var v=-1,b=g==null?0:g.length;for(this.clear();++v<b;){var y=g[v];this.set(y[0],y[1])}}m.prototype.clear=l,m.prototype.delete=f,m.prototype.get=h,m.prototype.has=p,m.prototype.set=d,s.exports=m},3818:(s,u,c)=>{var l=c(852)(c(5639),"Promise");s.exports=l},8525:(s,u,c)=>{var l=c(852)(c(5639),"Set");s.exports=l},8668:(s,u,c)=>{var l=c(3369),f=c(619),h=c(2385);function p(d){var m=-1,g=d==null?0:d.length;for(this.__data__=new l;++m<g;)this.add(d[m])}p.prototype.add=p.prototype.push=f,p.prototype.has=h,s.exports=p},6384:(s,u,c)=>{var l=c(8407),f=c(7465),h=c(3779),p=c(7599),d=c(4758),m=c(4309);function g(v){var b=this.__data__=new l(v);this.size=b.size}g.prototype.clear=f,g.prototype.delete=h,g.prototype.get=p,g.prototype.has=d,g.prototype.set=m,s.exports=g},2705:(s,u,c)=>{var l=c(5639).Symbol;s.exports=l},1149:(s,u,c)=>{var l=c(5639).Uint8Array;s.exports=l},577:(s,u,c)=>{var l=c(852)(c(5639),"WeakMap");s.exports=l},4963:s=>{s.exports=function(u,c){for(var l=-1,f=u==null?0:u.length,h=0,p=[];++l<f;){var d=u[l];c(d,l,u)&&(p[h++]=d)}return p}},4636:(s,u,c)=>{var l=c(2545),f=c(5694),h=c(1469),p=c(4144),d=c(5776),m=c(6719),g=Object.prototype.hasOwnProperty;s.exports=function(v,b){var y=h(v),_=!y&&f(v),T=!y&&!_&&p(v),S=!y&&!_&&!T&&m(v),E=y||_||T||S,I=E?l(v.length,String):[],x=I.length;for(var C in v)!b&&!g.call(v,C)||E&&(C=="length"||T&&(C=="offset"||C=="parent")||S&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||d(C,x))||I.push(C);return I}},2488:s=>{s.exports=function(u,c){for(var l=-1,f=c.length,h=u.length;++l<f;)u[h+l]=c[l];return u}},2908:s=>{s.exports=function(u,c){for(var l=-1,f=u==null?0:u.length;++l<f;)if(c(u[l],l,u))return!0;return!1}},8470:(s,u,c)=>{var l=c(7813);s.exports=function(f,h){for(var p=f.length;p--;)if(l(f[p][0],h))return p;return-1}},8866:(s,u,c)=>{var l=c(2488),f=c(1469);s.exports=function(h,p,d){var m=p(h);return f(h)?m:l(m,d(h))}},4239:(s,u,c)=>{var l=c(2705),f=c(9607),h=c(2333),p=l?l.toStringTag:void 0;s.exports=function(d){return d==null?d===void 0?"[object Undefined]":"[object Null]":p&&p in Object(d)?f(d):h(d)}},9454:(s,u,c)=>{var l=c(4239),f=c(7005);s.exports=function(h){return f(h)&&l(h)=="[object Arguments]"}},939:(s,u,c)=>{var l=c(2492),f=c(7005);s.exports=function h(p,d,m,g,v){return p===d||(p==null||d==null||!f(p)&&!f(d)?p!=p&&d!=d:l(p,d,m,g,h,v))}},2492:(s,u,c)=>{var l=c(6384),f=c(7114),h=c(8351),p=c(6096),d=c(4160),m=c(1469),g=c(4144),v=c(6719),b="[object Arguments]",y="[object Array]",_="[object Object]",T=Object.prototype.hasOwnProperty;s.exports=function(S,E,I,x,C,w){var B=m(S),L=m(E),k=B?y:d(S),R=L?y:d(E),F=(k=k==b?_:k)==_,U=(R=R==b?_:R)==_,$=k==R;if($&&g(S)){if(!g(E))return!1;B=!0,F=!1}if($&&!F)return w||(w=new l),B||v(S)?f(S,E,I,x,C,w):h(S,E,k,I,x,C,w);if(!(1&I)){var ie=F&&T.call(S,"__wrapped__"),oe=U&&T.call(E,"__wrapped__");if(ie||oe){var me=ie?S.value():S,ae=oe?E.value():E;return w||(w=new l),C(me,ae,I,x,w)}}return!!$&&(w||(w=new l),p(S,E,I,x,C,w))}},8458:(s,u,c)=>{var l=c(3560),f=c(5346),h=c(3218),p=c(346),d=/^\[object .+?Constructor\]$/,m=Function.prototype,g=Object.prototype,v=m.toString,b=g.hasOwnProperty,y=RegExp("^"+v.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");s.exports=function(_){return!(!h(_)||f(_))&&(l(_)?y:d).test(p(_))}},8749:(s,u,c)=>{var l=c(4239),f=c(1780),h=c(7005),p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p["[object Arguments]"]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p["[object Function]"]=p["[object Map]"]=p["[object Number]"]=p["[object Object]"]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1,s.exports=function(d){return h(d)&&f(d.length)&&!!p[l(d)]}},280:(s,u,c)=>{var l=c(5726),f=c(6916),h=Object.prototype.hasOwnProperty;s.exports=function(p){if(!l(p))return f(p);var d=[];for(var m in Object(p))h.call(p,m)&&m!="constructor"&&d.push(m);return d}},2545:s=>{s.exports=function(u,c){for(var l=-1,f=Array(u);++l<u;)f[l]=c(l);return f}},1717:s=>{s.exports=function(u){return function(c){return u(c)}}},4757:s=>{s.exports=function(u,c){return u.has(c)}},4429:(s,u,c)=>{var l=c(5639)["__core-js_shared__"];s.exports=l},7114:(s,u,c)=>{var l=c(8668),f=c(2908),h=c(4757);s.exports=function(p,d,m,g,v,b){var y=1&m,_=p.length,T=d.length;if(_!=T&&!(y&&T>_))return!1;var S=b.get(p),E=b.get(d);if(S&&E)return S==d&&E==p;var I=-1,x=!0,C=2&m?new l:void 0;for(b.set(p,d),b.set(d,p);++I<_;){var w=p[I],B=d[I];if(g)var L=y?g(B,w,I,d,p,b):g(w,B,I,p,d,b);if(L!==void 0){if(L)continue;x=!1;break}if(C){if(!f(d,function(k,R){if(!h(C,R)&&(w===k||v(w,k,m,g,b)))return C.push(R)})){x=!1;break}}else if(w!==B&&!v(w,B,m,g,b)){x=!1;break}}return b.delete(p),b.delete(d),x}},8351:(s,u,c)=>{var l=c(2705),f=c(1149),h=c(7813),p=c(7114),d=c(8776),m=c(1814),g=l?l.prototype:void 0,v=g?g.valueOf:void 0;s.exports=function(b,y,_,T,S,E,I){switch(_){case"[object DataView]":if(b.byteLength!=y.byteLength||b.byteOffset!=y.byteOffset)return!1;b=b.buffer,y=y.buffer;case"[object ArrayBuffer]":return!(b.byteLength!=y.byteLength||!E(new f(b),new f(y)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+b,+y);case"[object Error]":return b.name==y.name&&b.message==y.message;case"[object RegExp]":case"[object String]":return b==y+"";case"[object Map]":var x=d;case"[object Set]":var C=1&T;if(x||(x=m),b.size!=y.size&&!C)return!1;var w=I.get(b);if(w)return w==y;T|=2,I.set(b,y);var B=p(x(b),x(y),T,S,E,I);return I.delete(b),B;case"[object Symbol]":if(v)return v.call(b)==v.call(y)}return!1}},6096:(s,u,c)=>{var l=c(8234),f=Object.prototype.hasOwnProperty;s.exports=function(h,p,d,m,g,v){var b=1&d,y=l(h),_=y.length;if(_!=l(p).length&&!b)return!1;for(var T=_;T--;){var S=y[T];if(!(b?S in p:f.call(p,S)))return!1}var E=v.get(h),I=v.get(p);if(E&&I)return E==p&&I==h;var x=!0;v.set(h,p),v.set(p,h);for(var C=b;++T<_;){var w=h[S=y[T]],B=p[S];if(m)var L=b?m(B,w,S,p,h,v):m(w,B,S,h,p,v);if(!(L===void 0?w===B||g(w,B,d,m,v):L)){x=!1;break}C||(C=S=="constructor")}if(x&&!C){var k=h.constructor,R=p.constructor;k==R||!("constructor"in h)||!("constructor"in p)||typeof k=="function"&&k instanceof k&&typeof R=="function"&&R instanceof R||(x=!1)}return v.delete(h),v.delete(p),x}},1957:(s,u,c)=>{var l=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g;s.exports=l},8234:(s,u,c)=>{var l=c(8866),f=c(9551),h=c(3674);s.exports=function(p){return l(p,h,f)}},5050:(s,u,c)=>{var l=c(7019);s.exports=function(f,h){var p=f.__data__;return l(h)?p[typeof h=="string"?"string":"hash"]:p.map}},852:(s,u,c)=>{var l=c(8458),f=c(7801);s.exports=function(h,p){var d=f(h,p);return l(d)?d:void 0}},9607:(s,u,c)=>{var l=c(2705),f=Object.prototype,h=f.hasOwnProperty,p=f.toString,d=l?l.toStringTag:void 0;s.exports=function(m){var g=h.call(m,d),v=m[d];try{m[d]=void 0;var b=!0}catch{}var y=p.call(m);return b&&(g?m[d]=v:delete m[d]),y}},9551:(s,u,c)=>{var l=c(4963),f=c(479),h=Object.prototype.propertyIsEnumerable,p=Object.getOwnPropertySymbols,d=p?function(m){return m==null?[]:(m=Object(m),l(p(m),function(g){return h.call(m,g)}))}:f;s.exports=d},4160:(s,u,c)=>{var l=c(8552),f=c(7071),h=c(3818),p=c(8525),d=c(577),m=c(4239),g=c(346),v="[object Map]",b="[object Promise]",y="[object Set]",_="[object WeakMap]",T="[object DataView]",S=g(l),E=g(f),I=g(h),x=g(p),C=g(d),w=m;(l&&w(new l(new ArrayBuffer(1)))!=T||f&&w(new f)!=v||h&&w(h.resolve())!=b||p&&w(new p)!=y||d&&w(new d)!=_)&&(w=function(B){var L=m(B),k=L=="[object Object]"?B.constructor:void 0,R=k?g(k):"";if(R)switch(R){case S:return T;case E:return v;case I:return b;case x:return y;case C:return _}return L}),s.exports=w},7801:s=>{s.exports=function(u,c){return u==null?void 0:u[c]}},1789:(s,u,c)=>{var l=c(4536);s.exports=function(){this.__data__=l?l(null):{},this.size=0}},401:s=>{s.exports=function(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}},7667:(s,u,c)=>{var l=c(4536),f=Object.prototype.hasOwnProperty;s.exports=function(h){var p=this.__data__;if(l){var d=p[h];return d==="__lodash_hash_undefined__"?void 0:d}return f.call(p,h)?p[h]:void 0}},1327:(s,u,c)=>{var l=c(4536),f=Object.prototype.hasOwnProperty;s.exports=function(h){var p=this.__data__;return l?p[h]!==void 0:f.call(p,h)}},1866:(s,u,c)=>{var l=c(4536);s.exports=function(f,h){var p=this.__data__;return this.size+=this.has(f)?0:1,p[f]=l&&h===void 0?"__lodash_hash_undefined__":h,this}},5776:s=>{var u=/^(?:0|[1-9]\d*)$/;s.exports=function(c,l){var f=typeof c;return!!(l=l??9007199254740991)&&(f=="number"||f!="symbol"&&u.test(c))&&c>-1&&c%1==0&&c<l}},7019:s=>{s.exports=function(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}},5346:(s,u,c)=>{var l,f=c(4429),h=(l=/[^.]+$/.exec(f&&f.keys&&f.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"";s.exports=function(p){return!!h&&h in p}},5726:s=>{var u=Object.prototype;s.exports=function(c){var l=c&&c.constructor;return c===(typeof l=="function"&&l.prototype||u)}},7040:s=>{s.exports=function(){this.__data__=[],this.size=0}},4125:(s,u,c)=>{var l=c(8470),f=Array.prototype.splice;s.exports=function(h){var p=this.__data__,d=l(p,h);return!(d<0||(d==p.length-1?p.pop():f.call(p,d,1),--this.size,0))}},2117:(s,u,c)=>{var l=c(8470);s.exports=function(f){var h=this.__data__,p=l(h,f);return p<0?void 0:h[p][1]}},7518:(s,u,c)=>{var l=c(8470);s.exports=function(f){return l(this.__data__,f)>-1}},4705:(s,u,c)=>{var l=c(8470);s.exports=function(f,h){var p=this.__data__,d=l(p,f);return d<0?(++this.size,p.push([f,h])):p[d][1]=h,this}},4785:(s,u,c)=>{var l=c(1989),f=c(8407),h=c(7071);s.exports=function(){this.size=0,this.__data__={hash:new l,map:new(h||f),string:new l}}},1285:(s,u,c)=>{var l=c(5050);s.exports=function(f){var h=l(this,f).delete(f);return this.size-=h?1:0,h}},6e3:(s,u,c)=>{var l=c(5050);s.exports=function(f){return l(this,f).get(f)}},9916:(s,u,c)=>{var l=c(5050);s.exports=function(f){return l(this,f).has(f)}},5265:(s,u,c)=>{var l=c(5050);s.exports=function(f,h){var p=l(this,f),d=p.size;return p.set(f,h),this.size+=p.size==d?0:1,this}},8776:s=>{s.exports=function(u){var c=-1,l=Array(u.size);return u.forEach(function(f,h){l[++c]=[h,f]}),l}},4536:(s,u,c)=>{var l=c(852)(Object,"create");s.exports=l},6916:(s,u,c)=>{var l=c(5569)(Object.keys,Object);s.exports=l},1167:(s,u,c)=>{s=c.nmd(s);var l=c(1957),f=u&&!u.nodeType&&u,h=f&&s&&!s.nodeType&&s,p=h&&h.exports===f&&l.process,d=function(){try{return h&&h.require&&h.require("util").types||p&&p.binding&&p.binding("util")}catch{}}();s.exports=d},2333:s=>{var u=Object.prototype.toString;s.exports=function(c){return u.call(c)}},5569:s=>{s.exports=function(u,c){return function(l){return u(c(l))}}},5639:(s,u,c)=>{var l=c(1957),f=typeof self=="object"&&self&&self.Object===Object&&self,h=l||f||Function("return this")();s.exports=h},619:s=>{s.exports=function(u){return this.__data__.set(u,"__lodash_hash_undefined__"),this}},2385:s=>{s.exports=function(u){return this.__data__.has(u)}},1814:s=>{s.exports=function(u){var c=-1,l=Array(u.size);return u.forEach(function(f){l[++c]=f}),l}},7465:(s,u,c)=>{var l=c(8407);s.exports=function(){this.__data__=new l,this.size=0}},3779:s=>{s.exports=function(u){var c=this.__data__,l=c.delete(u);return this.size=c.size,l}},7599:s=>{s.exports=function(u){return this.__data__.get(u)}},4758:s=>{s.exports=function(u){return this.__data__.has(u)}},4309:(s,u,c)=>{var l=c(8407),f=c(7071),h=c(3369);s.exports=function(p,d){var m=this.__data__;if(m instanceof l){var g=m.__data__;if(!f||g.length<199)return g.push([p,d]),this.size=++m.size,this;m=this.__data__=new h(g)}return m.set(p,d),this.size=m.size,this}},346:s=>{var u=Function.prototype.toString;s.exports=function(c){if(c!=null){try{return u.call(c)}catch{}try{return c+""}catch{}}return""}},7813:s=>{s.exports=function(u,c){return u===c||u!=u&&c!=c}},5694:(s,u,c)=>{var l=c(9454),f=c(7005),h=Object.prototype,p=h.hasOwnProperty,d=h.propertyIsEnumerable,m=l(function(){return arguments}())?l:function(g){return f(g)&&p.call(g,"callee")&&!d.call(g,"callee")};s.exports=m},1469:s=>{var u=Array.isArray;s.exports=u},8612:(s,u,c)=>{var l=c(3560),f=c(1780);s.exports=function(h){return h!=null&&f(h.length)&&!l(h)}},4144:(s,u,c)=>{s=c.nmd(s);var l=c(5639),f=c(5062),h=u&&!u.nodeType&&u,p=h&&s&&!s.nodeType&&s,d=p&&p.exports===h?l.Buffer:void 0,m=(d?d.isBuffer:void 0)||f;s.exports=m},8446:(s,u,c)=>{var l=c(939);s.exports=function(f,h){return l(f,h)}},3560:(s,u,c)=>{var l=c(4239),f=c(3218);s.exports=function(h){if(!f(h))return!1;var p=l(h);return p=="[object Function]"||p=="[object GeneratorFunction]"||p=="[object AsyncFunction]"||p=="[object Proxy]"}},1780:s=>{s.exports=function(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=9007199254740991}},3218:s=>{s.exports=function(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}},7005:s=>{s.exports=function(u){return u!=null&&typeof u=="object"}},6719:(s,u,c)=>{var l=c(8749),f=c(1717),h=c(1167),p=h&&h.isTypedArray,d=p?f(p):l;s.exports=d},3674:(s,u,c)=>{var l=c(4636),f=c(280),h=c(8612);s.exports=function(p){return h(p)?l(p):f(p)}},8306:(s,u,c)=>{var l=c(3369);function f(h,p){if(typeof h!="function"||p!=null&&typeof p!="function")throw new TypeError("Expected a function");var d=function(){var m=arguments,g=p?p.apply(this,m):m[0],v=d.cache;if(v.has(g))return v.get(g);var b=h.apply(this,m);return d.cache=v.set(g,b)||v,b};return d.cache=new(f.Cache||l),d}f.Cache=l,s.exports=f},479:s=>{s.exports=function(){return[]}},5062:s=>{s.exports=function(){return!1}},2703:(s,u,c)=>{var l=c(414);function f(){}function h(){}h.resetWarningCache=f,s.exports=function(){function p(g,v,b,y,_,T){if(T!==l){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}function d(){return p}p.isRequired=p;var m={array:p,bigint:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:d,element:p,elementType:p,instanceOf:d,node:p,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d,checkPropTypes:h,resetWarningCache:f};return m.PropTypes=m,m}},5697:(s,u,c)=>{s.exports=c(2703)()},414:s=>{s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9787:s=>{s.exports=n}},i={};function o(s){var u=i[s];if(u!==void 0)return u.exports;var c=i[s]={id:s,loaded:!1,exports:{}};return r[s](c,c.exports,o),c.loaded=!0,c.exports}o.n=s=>{var u=s&&s.__esModule?()=>s.default:()=>s;return o.d(u,{a:u}),u},o.d=(s,u)=>{for(var c in u)o.o(u,c)&&!o.o(s,c)&&Object.defineProperty(s,c,{enumerable:!0,get:u[c]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(s,u)=>Object.prototype.hasOwnProperty.call(s,u),o.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.nmd=s=>(s.paths=[],s.children||(s.children=[]),s);var a={};return(()=>{o.r(a),o.d(a,{default:()=>Te,expandNodesToLevel:()=>ue});var s=o(4184),u=o.n(s),c=o(8446),l=o.n(c),f=o(8306),h=o.n(f);let p=(J=21)=>crypto.getRandomValues(new Uint8Array(J)).reduce((j,z)=>j+((z&=63)<36?z.toString(36):z<62?(z-26).toString(36).toUpperCase():z>62?"-":"_"),"");var d=o(5697),m=o.n(d),g=o(9787),v=o.n(g);function b(J){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},b(J)}var y=["children","title"];function _(){return _=Object.assign?Object.assign.bind():function(J){for(var j=1;j<arguments.length;j++){var z=arguments[j];for(var W in z)Object.prototype.hasOwnProperty.call(z,W)&&(J[W]=z[W])}return J},_.apply(this,arguments)}function T(J,j){if(!(J instanceof j))throw new TypeError("Cannot call a class as a function")}function S(J,j){for(var z=0;z<j.length;z++){var W=j[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(J,W.key,W)}}function E(J,j){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,W){return z.__proto__=W,z},E(J,j)}function I(J,j){if(j&&(b(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}(J)}function x(J){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},x(J)}function C(J,j,z){return j in J?Object.defineProperty(J,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):J[j]=z,J}var w=function(J){(function(ke,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");ke.prototype=Object.create(pe&&pe.prototype,{constructor:{value:ke,writable:!0,configurable:!0}}),Object.defineProperty(ke,"prototype",{writable:!1}),pe&&E(ke,pe)})(De,J);var j,z,W,de,ge=(W=De,de=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ke,pe=x(W);if(de){var Ee=x(this).constructor;ke=Reflect.construct(pe,arguments,Ee)}else ke=pe.apply(this,arguments);return I(this,ke)});function De(){return T(this,De),ge.apply(this,arguments)}return j=De,(z=[{key:"render",value:function(){var ke=this.props,pe=ke.children,Ee=ke.title,G=function(q,re){if(q==null)return{};var Ae,xe,We=function(bt,Rt){if(bt==null)return{};var jt,_t,rr={},nr=Object.keys(bt);for(_t=0;_t<nr.length;_t++)jt=nr[_t],Rt.indexOf(jt)>=0||(rr[jt]=bt[jt]);return rr}(q,re);if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(q);for(xe=0;xe<Ze.length;xe++)Ae=Ze[xe],re.indexOf(Ae)>=0||Object.prototype.propertyIsEnumerable.call(q,Ae)&&(We[Ae]=q[Ae])}return We}(ke,y);return v().createElement("button",_({"aria-label":Ee,title:Ee,type:"button"},G),pe)}}])&&S(j.prototype,z),Object.defineProperty(j,"prototype",{writable:!1}),De}(v().PureComponent);C(w,"propTypes",{children:m().node.isRequired,title:m().string}),C(w,"defaultProps",{title:null});const B=w,L={ALL:"all",PARENT:"parent",LEAF:"leaf"};function k(J){this.message=J,this.stack=Error().stack}k.prototype=Object.create(Error.prototype),k.prototype.name="CheckboxTreeError";const R=k;function F(J,j){var z=Object.keys(J);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(J);j&&(W=W.filter(function(de){return Object.getOwnPropertyDescriptor(J,de).enumerable})),z.push.apply(z,W)}return z}function U(J,j,z){return j in J?Object.defineProperty(J,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):J[j]=z,J}function $(J,j){if(!(J instanceof j))throw new TypeError("Cannot call a class as a function")}function ie(J,j){for(var z=0;z<j.length;z++){var W=j[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(J,W.key,W)}}var oe=L;const me=function(){function J(W){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$(this,J),this.props=W,this.flatNodes=de}var j,z;return j=J,z=[{key:"setProps",value:function(W){this.props=W}},{key:"clone",value:function(){var W=this,de={};return Object.keys(this.flatNodes).forEach(function(ge){var De=W.flatNodes[ge];de[ge]=function(ke){for(var pe=1;pe<arguments.length;pe++){var Ee=arguments[pe]!=null?arguments[pe]:{};pe%2?F(Object(Ee),!0).forEach(function(G){U(ke,G,Ee[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ke,Object.getOwnPropertyDescriptors(Ee)):F(Object(Ee)).forEach(function(G){Object.defineProperty(ke,G,Object.getOwnPropertyDescriptor(Ee,G))})}return ke}({},De)}),new J(this.props,de)}},{key:"getNode",value:function(W){return this.flatNodes[W]}},{key:"reset",value:function(){this.flatNodes={}}},{key:"flattenNodes",value:function(W){var de=this,ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},De=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(Array.isArray(W)&&W.length!==0){var ke=this.props,pe=ke.disabled,Ee=ke.noCascade;W.forEach(function(G,q){var re=de.nodeHasChildren(G);if(de.flatNodes[G.value]!==void 0)throw new R("Duplicate value '".concat(G.value,"' detected. All node values must be unique."));de.flatNodes[G.value]={label:G.label,value:G.value,children:G.children,parent:ge,isChild:ge.value!==void 0,isParent:re,isLeaf:!re,showCheckbox:G.showCheckbox===void 0||G.showCheckbox,disabled:de.getDisabledState(G,ge,pe,Ee),treeDepth:De,index:q},de.flattenNodes(G.children,G,De+1)})}}},{key:"nodeHasChildren",value:function(W){return Array.isArray(W.children)}},{key:"getDisabledState",value:function(W,de,ge,De){return!!ge||!(De||!de.disabled)||!!W.disabled}},{key:"deserializeLists",value:function(W){var de=this,ge=["checked","expanded"];Object.keys(this.flatNodes).forEach(function(De){ge.forEach(function(ke){de.flatNodes[De][ke]=!1})}),ge.forEach(function(De){W[De].forEach(function(ke){de.flatNodes[ke]!==void 0&&(de.flatNodes[ke][De]=!0)})})}},{key:"serializeList",value:function(W){var de=this,ge=[];return Object.keys(this.flatNodes).forEach(function(De){de.flatNodes[De][W]&&ge.push(De)}),ge}},{key:"expandAllNodes",value:function(W){var de=this;return Object.keys(this.flatNodes).forEach(function(ge){de.flatNodes[ge].isParent&&(de.flatNodes[ge].expanded=W)}),this}},{key:"toggleChecked",value:function(W,de,ge,De){var ke=this,pe=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],Ee=this.flatNodes[W.value],G=[oe.PARENT,oe.ALL].indexOf(ge)>-1,q=[oe.LEAF,oe.ALL].indexOf(ge)>-1;if(Ee.isLeaf||De){if(W.disabled)return this;this.toggleNode(W.value,"checked",de)}else(G||Ee.children.length===0)&&this.toggleNode(W.value,"checked",de),q&&Ee.children.forEach(function(re){ke.toggleChecked(re,de,ge,De,!1)});return pe&&!De&&Ee.isChild&&G&&this.toggleParentStatus(Ee.parent,ge),this}},{key:"toggleParentStatus",value:function(W,de){var ge=this.flatNodes[W.value];ge.isChild?(de===oe.ALL&&this.toggleNode(W.value,"checked",this.isEveryChildChecked(ge)),this.toggleParentStatus(ge.parent,de)):this.toggleNode(W.value,"checked",this.isEveryChildChecked(ge))}},{key:"isEveryChildChecked",value:function(W){var de=this;return W.children.every(function(ge){return de.getNode(ge.value).checked})}},{key:"toggleNode",value:function(W,de,ge){return this.flatNodes[W][de]=ge,this}}],z&&ie(j.prototype,z),Object.defineProperty(j,"prototype",{writable:!1}),J}();function ae(J){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},ae(J)}function X(){return X=Object.assign?Object.assign.bind():function(J){for(var j=1;j<arguments.length;j++){var z=arguments[j];for(var W in z)Object.prototype.hasOwnProperty.call(z,W)&&(J[W]=z[W])}return J},X.apply(this,arguments)}function ee(J,j){var z=Object.keys(J);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(J);j&&(W=W.filter(function(de){return Object.getOwnPropertyDescriptor(J,de).enumerable})),z.push.apply(z,W)}return z}function se(J,j){if(!(J instanceof j))throw new TypeError("Cannot call a class as a function")}function _e(J,j){for(var z=0;z<j.length;z++){var W=j[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(J,W.key,W)}}function Oe(J,j){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,W){return z.__proto__=W,z},Oe(J,j)}function Re(J,j){if(j&&(ae(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}(J)}function ve(J){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},ve(J)}function Ne(J,j,z){return j in J?Object.defineProperty(J,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):J[j]=z,J}var He=function(J){(function(ke,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");ke.prototype=Object.create(pe&&pe.prototype,{constructor:{value:ke,writable:!0,configurable:!0}}),Object.defineProperty(ke,"prototype",{writable:!1}),pe&&Oe(ke,pe)})(De,J);var j,z,W,de,ge=(W=De,de=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ke,pe=ve(W);if(de){var Ee=ve(this).constructor;ke=Reflect.construct(pe,arguments,Ee)}else ke=pe.apply(this,arguments);return Re(this,ke)});function De(){return se(this,De),ge.apply(this,arguments)}return j=De,z=[{key:"componentDidMount",value:function(){this.updateDeterminateProperty()}},{key:"componentDidUpdate",value:function(){this.updateDeterminateProperty()}},{key:"updateDeterminateProperty",value:function(){var ke=this.props.indeterminate;this.checkbox.indeterminate=ke}},{key:"render",value:function(){var ke=this,pe=function(Ee){for(var G=1;G<arguments.length;G++){var q=arguments[G]!=null?arguments[G]:{};G%2?ee(Object(q),!0).forEach(function(re){Ne(Ee,re,q[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(q)):ee(Object(q)).forEach(function(re){Object.defineProperty(Ee,re,Object.getOwnPropertyDescriptor(q,re))})}return Ee}({},this.props);return delete pe.indeterminate,v().createElement("input",X({},pe,{ref:function(Ee){ke.checkbox=Ee},type:"checkbox"}))}}],z&&_e(j.prototype,z),Object.defineProperty(j,"prototype",{writable:!1}),De}(v().PureComponent);Ne(He,"propTypes",{indeterminate:m().bool}),Ne(He,"defaultProps",{indeterminate:!1});const be=He,je=m().shape({check:m().node,uncheck:m().node,halfCheck:m().node,expandClose:m().node,expandOpen:m().node,expandAll:m().node,collapseAll:m().node,parentClose:m().node,parentOpen:m().node,leaf:m().node}),qe=m().shape({collapseAll:m().string.isRequired,expandAll:m().string.isRequired,toggle:m().string.isRequired});function ot(J){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},ot(J)}function ut(J,j){for(var z=0;z<j.length;z++){var W=j[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(J,W.key,W)}}function Je(J,j){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,W){return z.__proto__=W,z},Je(J,j)}function at(J,j){if(j&&(ot(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ht(J)}function Ht(J){if(J===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function qt(J){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},qt(J)}function dr(J,j,z){return j in J?Object.defineProperty(J,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):J[j]=z,J}var tr=function(J){(function(ke,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");ke.prototype=Object.create(pe&&pe.prototype,{constructor:{value:ke,writable:!0,configurable:!0}}),Object.defineProperty(ke,"prototype",{writable:!1}),pe&&Je(ke,pe)})(De,J);var j,z,W,de,ge=(W=De,de=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ke,pe=qt(W);if(de){var Ee=qt(this).constructor;ke=Reflect.construct(pe,arguments,Ee)}else ke=pe.apply(this,arguments);return at(this,ke)});function De(ke){var pe;return function(Ee,G){if(!(Ee instanceof G))throw new TypeError("Cannot call a class as a function")}(this,De),(pe=ge.call(this,ke)).onCheck=pe.onCheck.bind(Ht(pe)),pe.onCheckboxKeyPress=pe.onCheckboxKeyPress.bind(Ht(pe)),pe.onCheckboxKeyUp=pe.onCheckboxKeyUp.bind(Ht(pe)),pe.onClick=pe.onClick.bind(Ht(pe)),pe.onExpand=pe.onExpand.bind(Ht(pe)),pe}return j=De,(z=[{key:"onCheck",value:function(){var ke=this.props,pe=ke.value;(0,ke.onCheck)({value:pe,checked:this.getCheckState({toggle:!0})})}},{key:"onCheckboxKeyPress",value:function(ke){ke.which===32&&ke.preventDefault()}},{key:"onCheckboxKeyUp",value:function(ke){var pe=ke.keyCode;[13,32].includes(pe)&&this.onCheck()}},{key:"onClick",value:function(){var ke=this.props,pe=ke.expandOnClick,Ee=ke.isParent,G=ke.value,q=ke.onClick;Ee&&pe&&this.onExpand(),q({value:G,checked:this.getCheckState({toggle:!1})})}},{key:"onExpand",value:function(){var ke=this.props,pe=ke.expanded,Ee=ke.value;(0,ke.onExpand)({value:Ee,expanded:!pe})}},{key:"getCheckState",value:function(ke){var pe=ke.toggle,Ee=this.props,G=Ee.checked,q=Ee.optimisticToggle;return!(G!==0||!pe)||G===1&&!pe||G===2&&q}},{key:"renderCollapseButton",value:function(){var ke=this.props,pe=ke.expandDisabled,Ee=ke.isLeaf,G=ke.lang;return Ee?v().createElement("span",{className:"rct-collapse"},v().createElement("span",{className:"rct-icon"})):v().createElement(B,{className:"rct-collapse rct-collapse-btn",disabled:pe,title:G.toggle,onClick:this.onExpand},this.renderCollapseIcon())}},{key:"renderCollapseIcon",value:function(){var ke=this.props,pe=ke.expanded,Ee=ke.icons,G=Ee.expandClose,q=Ee.expandOpen;return pe?q:G}},{key:"renderCheckboxIcon",value:function(){var ke=this.props,pe=ke.checked,Ee=ke.icons,G=Ee.uncheck,q=Ee.check,re=Ee.halfCheck;return pe===0?G:pe===1?q:re}},{key:"renderNodeIcon",value:function(){var ke=this.props,pe=ke.expanded,Ee=ke.icon,G=ke.icons,q=G.leaf,re=G.parentClose,Ae=G.parentOpen,xe=ke.isLeaf;return Ee!==null?Ee:xe?q:pe?Ae:re}},{key:"renderBareLabel",value:function(ke){var pe=this.props,Ee=pe.onClick,G=pe.title,q=Ee!==null;return v().createElement("span",{className:"rct-bare-label",title:G},q?v().createElement("span",{className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},ke):ke)}},{key:"renderCheckboxLabel",value:function(ke){var pe=this.props,Ee=pe.checked,G=pe.disabled,q=pe.title,re=pe.treeId,Ae=pe.value,xe=pe.onClick!==null,We="".concat(re,"-").concat(String(Ae).split(" ").join("_")),Ze=[v().createElement("label",{key:0,htmlFor:We,title:q},v().createElement(be,{checked:Ee===1,disabled:G,id:We,indeterminate:Ee===2,onClick:this.onCheck,onChange:function(){}}),v().createElement("span",{"aria-checked":Ee===1,"aria-disabled":G,className:"rct-checkbox",role:"checkbox",tabIndex:0,onKeyPress:this.onCheckboxKeyPress,onKeyUp:this.onCheckboxKeyUp},this.renderCheckboxIcon()),xe?null:ke)];return xe&&Ze.push(v().createElement("span",{key:1,className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"link",tabIndex:0},ke)),Ze}},{key:"renderLabel",value:function(){var ke=this.props,pe=ke.label,Ee=ke.showCheckbox,G=[ke.showNodeIcon?v().createElement("span",{key:0,className:"rct-node-icon"},this.renderNodeIcon()):null,v().createElement("span",{key:1,className:"rct-title"},pe)];return Ee?this.renderCheckboxLabel(G):this.renderBareLabel(G)}},{key:"renderChildren",value:function(){return this.props.expanded?this.props.children:null}},{key:"render",value:function(){var ke=this.props,pe=ke.className,Ee=ke.disabled,G=ke.expanded,q=ke.isLeaf,re=u()({"rct-node":!0,"rct-node-leaf":q,"rct-node-parent":!q,"rct-node-expanded":!q&&G,"rct-node-collapsed":!q&&!G,"rct-disabled":Ee},pe);return v().createElement("li",{className:re},v().createElement("span",{className:"rct-text"},this.renderCollapseButton(),this.renderLabel()),this.renderChildren())}}])&&ut(j.prototype,z),Object.defineProperty(j,"prototype",{writable:!1}),De}(v().PureComponent);dr(tr,"propTypes",{checked:m().number.isRequired,disabled:m().bool.isRequired,expandDisabled:m().bool.isRequired,expanded:m().bool.isRequired,icons:je.isRequired,isLeaf:m().bool.isRequired,isParent:m().bool.isRequired,label:m().node.isRequired,lang:qe.isRequired,optimisticToggle:m().bool.isRequired,showNodeIcon:m().bool.isRequired,treeId:m().string.isRequired,value:m().oneOfType([m().string,m().number]).isRequired,onCheck:m().func.isRequired,onExpand:m().func.isRequired,children:m().node,className:m().string,expandOnClick:m().bool,icon:m().node,showCheckbox:m().bool,title:m().string,onClick:m().func}),dr(tr,"defaultProps",{children:null,className:null,expandOnClick:!1,icon:null,showCheckbox:!0,title:null,onClick:function(){}});const Ie=tr,te=m().oneOfType([m().arrayOf(m().string),m().arrayOf(m().number)]);function le(J,j){var z=Object.keys(J);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(J);j&&(W=W.filter(function(de){return Object.getOwnPropertyDescriptor(J,de).enumerable})),z.push.apply(z,W)}return z}function ye(J){for(var j=1;j<arguments.length;j++){var z=arguments[j]!=null?arguments[j]:{};j%2?le(Object(z),!0).forEach(function(W){Z(J,W,z[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(z)):le(Object(z)).forEach(function(W){Object.defineProperty(J,W,Object.getOwnPropertyDescriptor(z,W))})}return J}function Z(J,j,z){return j in J?Object.defineProperty(J,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):J[j]=z,J}var fe={label:m().node.isRequired,value:m().oneOfType([m().string,m().number]).isRequired,disabled:m().bool,icon:m().node,showCheckbox:m().bool,title:m().string};const we=m().oneOfType([m().shape(fe),m().shape(ye(ye({},fe),{},{children:m().arrayOf(fe).isRequired}))]);function Ce(J){return Ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},Ce(J)}function Ve(J,j){var z=Object.keys(J);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(J);j&&(W=W.filter(function(de){return Object.getOwnPropertyDescriptor(J,de).enumerable})),z.push.apply(z,W)}return z}function Ye(J){for(var j=1;j<arguments.length;j++){var z=arguments[j]!=null?arguments[j]:{};j%2?Ve(Object(z),!0).forEach(function(W){pr(J,W,z[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(z)):Ve(Object(z)).forEach(function(W){Object.defineProperty(J,W,Object.getOwnPropertyDescriptor(z,W))})}return J}function $e(J,j){for(var z=0;z<j.length;z++){var W=j[z];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(J,W.key,W)}}function it(J,j){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(z,W){return z.__proto__=W,z},it(J,j)}function ht(J,j){if(j&&(Ce(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dt(J)}function Dt(J){if(J===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function dt(J){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},dt(J)}function pr(J,j,z){return j in J?Object.defineProperty(J,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):J[j]=z,J}var A=function(J){(function(pe,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function");pe.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:pe,writable:!0,configurable:!0}}),Object.defineProperty(pe,"prototype",{writable:!1}),Ee&&it(pe,Ee)})(ke,J);var j,z,W,de,ge,De=(de=ke,ge=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var pe,Ee=dt(de);if(ge){var G=dt(this).constructor;pe=Reflect.construct(Ee,arguments,G)}else pe=Ee.apply(this,arguments);return ht(this,pe)});function ke(pe){var Ee;(function(q,re){if(!(q instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ke),Ee=De.call(this,pe);var G=new me(pe);return G.flattenNodes(pe.nodes),G.deserializeLists({checked:pe.checked,expanded:pe.expanded}),Ee.state={id:pe.id||"rct-".concat(p()),model:G,prevProps:pe},Ee.onCheck=Ee.onCheck.bind(Dt(Ee)),Ee.onExpand=Ee.onExpand.bind(Dt(Ee)),Ee.onNodeClick=Ee.onNodeClick.bind(Dt(Ee)),Ee.onExpandAll=Ee.onExpandAll.bind(Dt(Ee)),Ee.onCollapseAll=Ee.onCollapseAll.bind(Dt(Ee)),Ee.combineMemorized=h()(function(q,re){return Ye(Ye({},q),re)}).bind(Dt(Ee)),Ee}return j=ke,z=[{key:"onCheck",value:function(pe){var Ee=this.props,G=Ee.checkModel,q=Ee.noCascade,re=Ee.onCheck,Ae=this.state.model.clone(),xe=Ae.getNode(pe.value);Ae.toggleChecked(pe,pe.checked,G,q),re(Ae.serializeList("checked"),Ye(Ye({},xe),pe))}},{key:"onExpand",value:function(pe){var Ee=this.props.onExpand,G=this.state.model.clone(),q=G.getNode(pe.value);G.toggleNode(pe.value,"expanded",pe.expanded),Ee(G.serializeList("expanded"),Ye(Ye({},q),pe))}},{key:"onNodeClick",value:function(pe){(0,this.props.onClick)(Ye(Ye({},this.state.model.getNode(pe.value)),pe))}},{key:"onExpandAll",value:function(){this.expandAllNodes()}},{key:"onCollapseAll",value:function(){this.expandAllNodes(!1)}},{key:"expandAllNodes",value:function(){var pe=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Ee=this.props.onExpand;Ee(this.state.model.clone().expandAllNodes(pe).serializeList("expanded"))}},{key:"determineShallowCheckState",value:function(pe,Ee){var G=this.state.model.getNode(pe.value);return G.isLeaf||Ee||pe.children.length===0?G.checked?1:0:this.isEveryChildChecked(pe)?1:this.isSomeChildChecked(pe)?2:0}},{key:"isEveryChildChecked",value:function(pe){var Ee=this;return pe.children.every(function(G){return Ee.state.model.getNode(G.value).checkState===1})}},{key:"isSomeChildChecked",value:function(pe){var Ee=this;return pe.children.some(function(G){return Ee.state.model.getNode(G.value).checkState>0})}},{key:"renderTreeNodes",value:function(pe){var Ee=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=this.props,re=q.expandDisabled,Ae=q.expandOnClick,xe=q.icons,We=q.lang,Ze=q.noCascade,bt=q.onClick,Rt=q.onlyLeafCheckboxes,jt=q.optimisticToggle,_t=q.showNodeTitle,rr=q.showNodeIcon,nr=this.state,vt=nr.id,Bt=nr.model,ar=ke.defaultProps.icons,vn=pe.map(function(Fr){var Xe=Fr.value,Ke=Bt.getNode(Fr.value),Ot=Ke.isParent?Ee.renderTreeNodes(Fr.children,Fr):null;Ke.checkState=Ee.determineShallowCheckState(Fr,Ze);var Ct=Rt?Ke.isLeaf:Ke.showCheckbox;return!G.value||Bt.getNode(G.value).expanded?v().createElement(Ie,{key:Xe,checked:Ke.checkState,className:Fr.className,disabled:Ke.disabled,expandDisabled:re,expandOnClick:Ae,expanded:Ke.expanded,icon:Fr.icon,icons:Ee.combineMemorized(ar,xe),label:Fr.label,lang:We,optimisticToggle:jt,isLeaf:Ke.isLeaf,isParent:Ke.isParent,showCheckbox:Ct,showNodeIcon:rr,title:_t?Fr.title||Fr.label:Fr.title,treeId:vt,value:Fr.value,onCheck:Ee.onCheck,onClick:bt&&Ee.onNodeClick,onExpand:Ee.onExpand},Ot):null});return v().createElement("ol",null,vn)}},{key:"renderExpandAll",value:function(){var pe=this.props,Ee=pe.icons,G=Ee.expandAll,q=Ee.collapseAll,re=pe.lang;return pe.showExpandAll?v().createElement("div",{className:"rct-options"},v().createElement(B,{className:"rct-option rct-option-expand-all",title:re.expandAll,onClick:this.onExpandAll},G),v().createElement(B,{className:"rct-option rct-option-collapse-all",title:re.collapseAll,onClick:this.onCollapseAll},q)):null}},{key:"renderHiddenInput",value:function(){var pe=this.props,Ee=pe.name,G=pe.nameAsArray;return Ee===void 0?null:G?this.renderArrayHiddenInput():this.renderJoinedHiddenInput()}},{key:"renderArrayHiddenInput",value:function(){var pe=this.props,Ee=pe.checked,G=pe.name;return Ee.map(function(q){var re="".concat(G,"[]");return v().createElement("input",{key:q,name:re,type:"hidden",value:q})})}},{key:"renderJoinedHiddenInput",value:function(){var pe=this.props,Ee=pe.checked,G=pe.name,q=Ee.join(",");return v().createElement("input",{name:G,type:"hidden",value:q})}},{key:"render",value:function(){var pe,Ee=this.props,G=Ee.direction,q=Ee.disabled,re=Ee.iconsClass,Ae=Ee.nodes,xe=Ee.nativeCheckboxes,We=this.state.id,Ze=this.renderTreeNodes(Ae),bt=u()((pr(pe={"react-checkbox-tree":!0,"rct-disabled":q},"rct-icons-".concat(re),!0),pr(pe,"rct-native-display",xe),pr(pe,"rct-direction-rtl",G==="rtl"),pe));return v().createElement("div",{className:bt,id:We},this.renderExpandAll(),this.renderHiddenInput(),Ze)}}],W=[{key:"getDerivedStateFromProps",value:function(pe,Ee){var G=Ee.model,q=Ee.prevProps,re=pe.disabled,Ae=pe.id,xe=pe.nodes,We=Ye(Ye({},Ee),{},{prevProps:pe});return G.setProps(pe),l()(q.nodes,xe)&&q.disabled===re||(G.reset(),G.flattenNodes(xe)),Ae!==null&&(We=Ye(Ye({},We),{},{id:Ae})),G.deserializeLists({checked:pe.checked,expanded:pe.expanded}),We}}],z&&$e(j.prototype,z),W&&$e(j,W),Object.defineProperty(j,"prototype",{writable:!1}),ke}(v().Component);function M(J){return function(j){if(Array.isArray(j))return H(j)}(J)||function(j){if(typeof Symbol<"u"&&j[Symbol.iterator]!=null||j["@@iterator"]!=null)return Array.from(j)}(J)||function(j,z){if(j){if(typeof j=="string")return H(j,z);var W=Object.prototype.toString.call(j).slice(8,-1);return W==="Object"&&j.constructor&&(W=j.constructor.name),W==="Map"||W==="Set"?Array.from(j):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?H(j,z):void 0}}(J)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function H(J,j){(j==null||j>J.length)&&(j=J.length);for(var z=0,W=new Array(j);z<j;z++)W[z]=J[z];return W}function ue(J,j){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(z>j)return[];var W=[];return J.forEach(function(de){de.children&&(W=[].concat(M(W),[de.value],M(ue(de.children,j,z+1))))}),W}pr(A,"propTypes",{nodes:m().arrayOf(we).isRequired,checkModel:m().oneOf([L.LEAF,L.ALL]),checked:te,direction:m().string,disabled:m().bool,expandDisabled:m().bool,expandOnClick:m().bool,expanded:te,icons:je,iconsClass:m().string,id:m().string,lang:qe,name:m().string,nameAsArray:m().bool,nativeCheckboxes:m().bool,noCascade:m().bool,onlyLeafCheckboxes:m().bool,optimisticToggle:m().bool,showExpandAll:m().bool,showNodeIcon:m().bool,showNodeTitle:m().bool,onCheck:m().func,onClick:m().func,onExpand:m().func}),pr(A,"defaultProps",{checkModel:L.LEAF,checked:[],direction:"ltr",disabled:!1,expandDisabled:!1,expandOnClick:!1,expanded:[],icons:{check:v().createElement("span",{className:"rct-icon rct-icon-check"}),uncheck:v().createElement("span",{className:"rct-icon rct-icon-uncheck"}),halfCheck:v().createElement("span",{className:"rct-icon rct-icon-half-check"}),expandClose:v().createElement("span",{className:"rct-icon rct-icon-expand-close"}),expandOpen:v().createElement("span",{className:"rct-icon rct-icon-expand-open"}),expandAll:v().createElement("span",{className:"rct-icon rct-icon-expand-all"}),collapseAll:v().createElement("span",{className:"rct-icon rct-icon-collapse-all"}),parentClose:v().createElement("span",{className:"rct-icon rct-icon-parent-close"}),parentOpen:v().createElement("span",{className:"rct-icon rct-icon-parent-open"}),leaf:v().createElement("span",{className:"rct-icon rct-icon-leaf"})},iconsClass:"fa4",id:null,lang:{collapseAll:"Collapse all",expandAll:"Expand all",toggle:"Toggle"},name:void 0,nameAsArray:!1,nativeCheckboxes:!1,noCascade:!1,onlyLeafCheckboxes:!1,optimisticToggle:!0,showExpandAll:!1,showNodeIcon:!0,showNodeTitle:!1,onCheck:function(){},onClick:null,onExpand:function(){}});const Te=A})(),a})())})(WQ);var RQe=WQ.exports;const NQe=Gi(RQe);function MQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LQe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BQe(r.key),r)}}function jQe(e,t,n){return t&&LQe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BQe(e){var t=FQe(e,"string");return typeof t=="symbol"?t:String(t)}function FQe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function GQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hP(e,t)}function hP(e,t){return hP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},hP(e,t)}function HQe(e){var t=VQe();return function(){var n=iE(e),r;if(t){var i=iE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return UQe(this,r)}}function UQe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zQe(e)}function zQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VQe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iE(e){return iE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iE(e)}let qQ=function(e){GQe(n,e);var t=HQe(n);function n(r){var i;MQe(this,n),i=t.call(this,r),i.localTracks=mc.filter(u=>u.local&&!u.hidden).map(u=>{const c={...u};return c.datatype=u.datatype[0],c}),i.augmentedTracksInfo=mc,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(u=>{i.augmentedTracksInfo.push(window.higlassTracksByType[u].config)}),r.datatype?i.localTracks=i.localTracks.filter(u=>u.datatype[0]===r.datatype):i.localTracks=i.localTracks.filter(u=>u.orientation===i.props.orientation),i.localTracks.forEach(u=>{u.uuid=zt.nice()});const o=i.prepareNewEntries("",i.localTracks,{}),a=Object.keys(o),s=a.length?[a[0]]:null;return i.mounted=!1,i.state={selectedUuid:s,options:o,filter:"",checked:[],expanded:[]},i.requestTilesetLists(),i}return jQe(n,[{key:"componentDidMount",value:function(){this.mounted=!0,this.requestTilesetLists(),this.searchBox.focus()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"prepareNewEntries",value:function(r,i,o){const a=o;return i.map(s=>({...s,server:r,tilesetUid:s.uuid,serverUidKey:this.serverUidKey(r,s.uuid),datatype:s.datatype,name:s.name,uid:zt.nice()})).forEach(s=>{a[s.serverUidKey]=s}),a}},{key:"serverUidKey",value:function(r,i){return`${r}/${i}`}},{key:"requestTilesetLists",value:function(){let r=null;if(this.props.datatype?r=`dt=${this.props.datatype}`:r=[...new Set([].concat(...this.augmentedTracksInfo.filter(i=>i.datatype).filter(i=>i.orientation===this.props.orientation||this.props.orientation==="1d-vertical"&&i.orientation==="1d-horizontal").map(i=>i.datatype)))].map(i=>`dt=${i}`).join("&"),!this.props.trackSourceServers){console.warn("No track source servers specified in the viewconf");return}this.props.trackSourceServers.forEach(i=>{et.json(`${i}/tilesets/?limit=10000&${r}`,(o,a)=>{if(o)console.error("ERROR:",o);else{const s=this.prepareNewEntries(i,a.results,this.state.options),u=Object.keys(s);let{selectedUuid:c}=this.state;if(!c){c=u.length?[u[0]]:null;const l=this.state.options[c[0]];this.props.selectedTilesetChanged([l])}this.mounted&&this.setState({selectedUuid:c,options:s})}},this.props.pubSub)})}},{key:"handleOptionDoubleClick",value:function(r){const i=this.state.options[r.target.value];this.props.onDoubleClick(i)}},{key:"handleSelectedOptions",value:function(r){const i=[],o=[];for(let a=0;a<r.length;a++)i.push(r[a]),o.push(this.state.options[r[a]]);this.props.selectedTilesetChanged(o),this.setState({selectedUuid:i})}},{key:"handleSelect",value:function(){const{selectedOptions:r}=this.multiSelect,i=[];for(let o=0;o<r.length;o++){const a=r[o];i.push(a.value)}this.handleSelectedOptions(i)}},{key:"handleSearchChange",value:function(){const r=this.searchBox;this.setState({filter:r.value})}},{key:"partitionByGroup",value:function(r,i){const o={"":{name:"",value:"",children:[]}};for(const s of Object.keys(r)){const u=r[s];if(u.name.toLowerCase().includes(i))if("project_name"in u){const c=u.project_name;c in o||(o[c]={value:c,label:c,children:[]}),o[c].children.push({label:u.name,value:s})}else o[""].children.push({label:u.name,value:s})}const a=o[""].children;for(const s of Object.keys(o))s!==""&&(o[s].children.sort((u,c)=>u.label.toLowerCase().localeCompare(c.label.toLowerCase(),"en")),a.push(o[s]));return a.sort((s,u)=>s.label.toLowerCase().localeCompare(u.label.toLowerCase(),"en")),a}},{key:"handleChecked",value:function(r){this.handleSelectedOptions(r),this.setState({checked:r})}},{key:"handleExpanded",value:function(r){this.setState({expanded:r})}},{key:"render",value:function(){const r=[];for(const u in this.state.options)r.push(this.state.options[u]);const i=this.partitionByGroup(this.state.options,this.state.filter),o={width:15,height:15,top:2,right:2,position:"relative"},a=JSON.parse(JSON.stringify(o));a.opacity=.5;const s=O.createElement("form",{onSubmit:u=>{u.preventDefault()}},O.createElement("div",{className:"tileset-finder-search-bar"},O.createElement("span",{className:"tileset-finder-label"},"Select tileset:"),O.createElement("input",{ref:u=>{this.searchBox=u},className:"tileset-finder-search-box",onChange:this.handleSearchChange.bind(this),placeholder:"Search Term",type:"text"})),O.createElement("div",{className:"tileset-finder-checkbox-tree"},O.createElement(NQe,{checked:this.state.checked,expanded:this.state.expanded,icons:{uncheck:O.createElement("svg",{style:o},O.createElement("use",{xlinkHref:"#square_o"})),check:O.createElement("svg",{style:o},O.createElement("use",{xlinkHref:"#check_square_o"})),halfCheck:O.createElement("svg",{style:a},O.createElement("use",{xlinkHref:"#check_square_o"})),leaf:O.createElement("svg",{style:o},O.createElement("use",{xlinkHref:"#file_o"})),expandClose:O.createElement("svg",{style:o},O.createElement("use",{xlinkHref:"#chevron_right"})),expandOpen:O.createElement("svg",{style:o},O.createElement("use",{xlinkHref:"#chevron_down"})),parentClose:O.createElement("svg",{style:o},O.createElement("use",{xlinkHref:"#folder_o"})),parentOpen:O.createElement("svg",{style:o},O.createElement("use",{xlinkHref:"#folder_open_o"}))},nodes:i,onCheck:this.handleChecked.bind(this),onExpand:this.handleExpanded.bind(this)})));return O.createElement("div",null,s)}}]),n}(O.Component);qQ.propTypes={datatype:N.string,orientation:N.string,onDoubleClick:N.func,pubSub:N.object.isRequired,selectedTilesetChanged:N.func,trackSourceServers:N.array};const YQe=gd(qQ);function XQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WQe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$Qe(r.key),r)}}function qQe(e,t,n){return t&&WQe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $Qe(e){var t=KQe(e,"string");return typeof t=="symbol"?t:String(t)}function KQe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function QQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fP(e,t)}function fP(e,t){return fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},fP(e,t)}function ZQe(e){var t=tZe();return function(){var n=oE(e),r;if(t){var i=oE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return JQe(this,r)}}function JQe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eZe(e)}function eZe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tZe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oE(e){return oE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oE(e)}let $Q=function(e){QQe(n,e);var t=ZQe(n);function n(r){var i;return XQe(this,n),i=t.call(this,r),i.DATATYPE_TO_TRACK_TYPE=ER(i.props.orientation),i.AVAILABLE_TRACK_TYPES=k_(i.props.datatypes,i.props.orientation),i.state={selectedPlotType:i.AVAILABLE_TRACK_TYPES[0]},i}return qQe(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(r){if(this.AVAILABLE_TRACK_TYPES=k_(r.datatypes,this.props.orientation),!!this.AVAILABLE_TRACK_TYPES&&r.allTracksSameDatatype&&this.AVAILABLE_TRACK_TYPES.length>0&&!this.AVAILABLE_TRACK_TYPES.includes(this.state.selectedPlotType)){const i=AR(r.datatypes[0][0],this.props.position,this.AVAILABLE_TRACK_TYPES);this.handlePlotTypeSelected(i)}}},{key:"handlePlotTypeSelected",value:function(r){this.setState({selectedPlotType:r}),this.props.onPlotTypeSelected(r.type)}},{key:"render",value:function(){let r="No plot types available for track";const i={};return mc.forEach(o=>{i[o.type]=o}),this.AVAILABLE_TRACK_TYPES&&(r=this.AVAILABLE_TRACK_TYPES.sort((o,a)=>o.type<a.type).map(o=>{const a=i[o.type].thumbnail,s=this.state.selectedPlotType.type===o.type?"plot-type-item plot-type-selected":"plot-type-item",u=i[o.type].thumbnail?O.createElement("div",{className:"track-thumbnail",dangerouslySetInnerHTML:{__html:a.outerHTML}}):O.createElement("div",{className:"track-thumbnail"},O.createElement("svg",{height:20,width:30}));return O.createElement("li",{key:o.type,className:s,onClick:c=>{this.setState({selectedPlotType:o}),this.props.onPlotTypeSelected(o.type)},style:{listStyle:"none",paddingLeft:5,paddingBottom:0}},u,O.createElement("span",{style:{verticalAlign:"middle"}},o.type))})),O.createElement("div",null,r.length>0&&this.props.allTracksSameDatatype&&O.createElement("div",{className:"plot-type-container"},r),!this.props.allTracksSameDatatype&&O.createElement("div",{className:"plot-type-container-empty"},"Datasets with multiple datatypes chosen. They will be added with their default track types."))}}]),n}(O.Component);$Q.propTypes={allTracksSameDatatype:N.bool,datatypes:N.array,orientation:N.string,onPlotTypeSelected:N.func,position:N.string};function rZe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nZe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oZe(r.key),r)}}function iZe(e,t,n){return t&&nZe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oZe(e){var t=aZe(e,"string");return typeof t=="symbol"?t:String(t)}function aZe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function sZe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pP(e,t)}function pP(e,t){return pP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},pP(e,t)}function lZe(e){var t=cZe();return function(){var n=aE(e),r;if(t){var i=aE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uZe(this,r)}}function uZe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H0(e)}function H0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cZe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function aE(e){return aE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aE(e)}let sE=function(e){sZe(n,e);var t=lZe(n);function n(r){var i;return rZe(this,n),i=t.call(this,r),i.options={},i.state={selectedTilesets:[{datatype:"none"}],allTracksSameDatatype:!0},i.handleSubmitBound=i.handleSubmit.bind(H0(i)),i.handleTilesetPickerDoubleClickBound=i.handleTilesetPickerDoubleClick.bind(H0(i)),i.selectedTilesetsChangedBound=i.selectedTilesetsChanged.bind(H0(i)),i}return iZe(n,[{key:"getOrientation",value:function(r){let i=null;return r==="top"||r==="bottom"?i="1d-horizontal":r==="left"||r==="right"?i="1d-vertical":i="2d",i}},{key:"handleSubmit",value:function(r){r&&r.preventDefault(),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host)}},{key:"handleTilesetPickerDoubleClick",value:function(r){this.selectedTilesetsChanged([r]),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host)}},{key:"handleOptionsChanged",value:function(r){this.options=r}},{key:"handlePlotTypeSelected",value:function(r){const{selectedTilesets:i}=this.state;for(const o of i)o.type=r;this.selectedPlotType=r,this.setState({selectedTilesets:i})}},{key:"selectedTilesetsChanged",value:function(r){let i=null;r.length===0?i=[{datatype:"none"}]:i=r;let o=!0;const a=i[0].datatype;for(const s of i)s.datatype!==a&&(o=!1);if(o)for(const s of i)s.type=this.selectedPlotType;else for(const s of i){let u=[s.datatype];const c=this.getOrientation(this.props.position);s.filetype==="cooler"&&(u=[s.datatype,"chromsizes"]);const l=k_([u],c),f=AR(u[0],this.props.position,l);s.type=f.type}this.setState({selectedTilesets:i,allTracksSameDatatype:o})}},{key:"render",value:function(){const r=this.getOrientation(this.props.position),i=O.createElement("div",null,O.createElement(YQe,{ref:o=>{this.tilesetFinder=o},datatype:this.props.datatype,onDoubleClick:this.handleTilesetPickerDoubleClick.bind(this),onTracksChosen:o=>this.props.onTracksChosen(o,this.props.position),orientation:r,selectedTilesetChanged:this.selectedTilesetsChanged.bind(this),trackSourceServers:this.props.trackSourceServers}));return O.createElement(vv,{maxHeight:!0,okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Add Track"},O.createElement(O.Fragment,null,i,O.createElement($Q,{ref:o=>{this.plotTypeChooser=o},allTracksSameDatatype:this.state.allTracksSameDatatype,datatypes:this.state.selectedTilesets.map(o=>o.filetype==="cooler"?[o.datatype,"chromsizes"]:[o.datatype]),onPlotTypeSelected:this.handlePlotTypeSelected.bind(this),orientation:r,position:this.props.position})))}}]),n}(O.Component);sE.defaultProps={position:"top"};sE.propTypes={datatype:N.string,host:N.string,onCancel:N.func.isRequired,onTracksChosen:N.func.isRequired,position:N.string,trackSourceServers:N.array.isRequired};function dP(){return dP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dP.apply(this,arguments)}function hZe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fZe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dZe(r.key),r)}}function pZe(e,t,n){return t&&fZe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dZe(e){var t=mZe(e,"string");return typeof t=="symbol"?t:String(t)}function mZe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function gZe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mP(e,t)}function mP(e,t){return mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},mP(e,t)}function yZe(e){var t=_Ze();return function(){var n=lE(e),r;if(t){var i=lE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vZe(this,r)}}function vZe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bZe(e)}function bZe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _Ze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lE(e){return lE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lE(e)}let hM=function(e){gZe(n,e);var t=yZe(n);function n(){return hZe(this,n),t.apply(this,arguments)}return pZe(n,[{key:"render",value:function(){const r=[];return this.props.children.forEach((i,o)=>{const a=`customTrackDialog_${o}`;r.push(O.createElement(i,dP({key:a},this.props.bodyProps[o])))}),O.createElement(vv,{maxHeight:!0,okayOnly:!0,okayTitle:"Close",onCancel:this.props.onCancel,onOkay:this.props.onCancel,title:this.props.title},r)}}]),n}(O.PureComponent);hM.defaultProps={};hM.propTypes={onCancel:N.func.isRequired,title:N.string,bodyProps:N.array,children:N.array};function TZe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EZe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wZe(r.key),r)}}function SZe(e,t,n){return t&&EZe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wZe(e){var t=AZe(e,"string");return typeof t=="symbol"?t:String(t)}function AZe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function OZe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gP(e,t)}function gP(e,t){return gP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},gP(e,t)}function kZe(e){var t=CZe();return function(){var n=uE(e),r;if(t){var i=uE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xZe(this,r)}}function xZe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IZe(e)}function IZe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CZe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uE(e){return uE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uE(e)}const aU=20;let fu=function(e){OZe(n,e);var t=kZe(n);function n(r){var i;return TZe(this,n),i=t.call(this,r),i.adjusted=!1,i.state={orientation:i.props.orientation?i.props.orientation:"right",left:i.props.position.left,top:i.props.position.top,submenuShown:null},i}return SZe(n,[{key:"componentDidMount",value:function(){this.updateOrientation()}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){this.adjusted=!1,this.setState({left:r.position.left,top:r.position.top})}},{key:"componentDidUpdate",value:function(){this.updateOrientation()}},{key:"handleItemMouseEnterWithRect",value:function(r,i){this.setState({submenuShown:i,submenuSourceBbox:r})}},{key:"handleItemMouseEnter",value:function(r,i){this.handleItemMouseEnterWithRect(r.currentTarget.getBoundingClientRect(),i)}},{key:"handleMouseLeave",value:function(){}},{key:"handleOtherMouseEnter",value:function(){this.setState({submenuShown:null})}},{key:"updateOrientation",value:function(){if(this.adjusted)return;this.adjusted=!0,this.divDom=Fn.findDOMNode(this.div);const r=this.divDom.getBoundingClientRect(),i=this.props.parentBbox?this.props.parentBbox:{top:this.props.position.top,left:this.props.position.left,width:0};let o=this.state.orientation,a=i.top;if(i.top+r.height>window.innerHeight&&(i.top-r.height>0?a=i.top-r.height+aU:(a=i.top-r.height+aU,a-=a+r.height-window.innerHeight)),this.state.orientation==="left"){let s=i.left-r.width;s<0&&(i.left+i.width+r.width>window.innerWidth?s=0:(s=i.left+i.width,o="right")),this.setState({left:s,top:a,orientation:o})}else{let s=i.left+i.width;i.left+i.width+r.width>window.innerWidth&&(i.left-r.width<0?(s=0,o="right"):(s=i.left-r.width,o="left")),this.setState({left:s,top:a,orientation:o})}}},{key:"render",value:function(){const r=this.state.left?{left:this.state.left}:{right:this.state.right},i={top:this.state.top},o=Object.assign(r,i);return O.createElement("div",{ref:a=>{this.div=a},className:ir("context-menu-item",Tt["context-menu"],{[Tt["context-menu-dark"]]:this.props.theme===wr}),style:o},this.props.children)}}]),n}(O.Component);fu.propTypes={children:N.node,orientation:N.string,parentBbox:N.object,position:N.object,theme:N.symbol.isRequired};function PZe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DZe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NZe(r.key),r)}}function RZe(e,t,n){return t&&DZe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NZe(e){var t=MZe(e,"string");return typeof t=="symbol"?t:String(t)}function MZe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function LZe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yP(e,t)}function yP(e,t){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},yP(e,t)}function jZe(e){var t=GZe();return function(){var n=cE(e),r;if(t){var i=cE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return BZe(this,r)}}function BZe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FZe(e)}function FZe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GZe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cE(e){return cE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cE(e)}let vP=function(e){LZe(n,e);var t=jZe(n);function n(){return PZe(this,n),t.apply(this,arguments)}return RZe(n,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const r=this.state.submenuSourceBbox,i=this.state.orientation==="left"?{left:this.state.left,top:r.top}:{left:this.state.left+r.width+7,top:r.top},o=this.state.submenuShown;return O.createElement(n,{menuItems:o.children,orientation:this.state.orientation,parentBbox:r,position:i,theme:this.props.theme})}return O.createElement("div",null)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){const r=[];for(const i in this.props.menuItems){const o=this.props.menuItems[i];r.push(O.createElement(It,{key:i,onClick:o.handler?o.handler:()=>null,onMouseEnter:o.children?a=>this.handleItemMouseEnter(a,o):this.handleOtherMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave},o.name,o.children&&O.createElement("svg",{className:Tt["play-icon"]},O.createElement("use",{xlinkHref:"#play"}))))}return O.createElement("div",{ref:i=>{this.div=i},className:ir(Tt["context-menu"],{[Tt["context-menu-dark"]]:this.props.theme===wr}),style:{left:this.state.left,top:this.state.top}},r,this.getSubmenu())}}]),n}(fu);function HZe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UZe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VZe(r.key),r)}}function zZe(e,t,n){return t&&UZe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VZe(e){var t=YZe(e,"string");return typeof t=="symbol"?t:String(t)}function YZe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function XZe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bP(e,t)}function bP(e,t){return bP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bP(e,t)}function WZe(e){var t=KZe();return function(){var n=hE(e),r;if(t){var i=hE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qZe(this,r)}}function qZe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Ze(e)}function $Ze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KZe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hE(e){return hE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hE(e)}let QZe=function(e){XZe(n,e);var t=WZe(n);function n(){return HZe(this,n),t.apply(this,arguments)}return zZe(n,[{key:"getConfigureSeriesMenu",value:function(r,i,o){const a={},s=window.higlassTracksByType&&window.higlassTracksByType[o.type]&&window.higlassTracksByType[o.type].config&&window.higlassTracksByType[o.type].config.optionsInfo;if(s)for(const u of Object.keys(s))Rn[u]=s[u];if(!Tr[o.type]||!Tr[o.type].availableOptions)return null;for(const u of Tr[o.type].availableOptions)if(u in Rn){if(a[u]={name:Rn[u].name},Rn[u].generateOptions){const c=Rn[u].generateOptions(o);a[u].children||(a[u].children={});for(const l of c){const f={name:l.name,value:l.value,handler:()=>{o.options[u]=l.value,this.props.onTrackOptionsChanged(o.uid,o.options),this.props.closeMenu()}};a[u].children[l.value]=f}}if(Rn[u].inlineOptions)for(const c in Rn[u].inlineOptions){const l=Rn[u].inlineOptions[c];a[u].children||(a[u].children={});const f={name:l.name,value:l.value};l.componentPickers&&l.componentPickers[o.type]?f.handler=()=>{this.props.onConfigureTrack(o,l.componentPickers[o.type]),this.props.closeMenu()}:f.handler=()=>{o.options[u]=l.value,this.props.onTrackOptionsChanged(o.uid,o.options),this.props.closeMenu()},a[u].children[c]=f}else Rn[u].componentPickers&&Rn[u].componentPickers[o.type]&&(a[u].handler=()=>{this.props.onConfigureTrack(o,Rn[u].componentPickers[o.type]),this.props.closeMenu()})}return O.createElement(vP,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:a,orientation:this.state.orientation,parentBbox:i,position:r,theme:this.props.theme})}},{key:"getTrackTypeItems",value:function(r,i,o){window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(l=>{Tr[l]=window.higlassTracksByType[l].config});let{datatype:a}=o,s=null;o.type in Tr&&(a||(a=Tr[o.type].datatype[0]),{orientation:s}=Tr[o.type]);const u=Object.values(Tr).filter(l=>l.datatype).filter(l=>l.orientation).filter(l=>l.datatype.includes(a)).filter(l=>l.orientation===s).map(l=>l.type),c={};for(let l=0;l<u.length;l++)c[u[l]]={value:u[l],name:u[l],handler:()=>{this.props.onChangeTrackType(o.uid,u[l])}};return O.createElement(vP,{key:"track-type-items",closeMenu:this.props.closeMenu,menuItems:c,orientation:this.state.orientation,parentBbox:i,position:r,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const r=this.state.submenuSourceBbox,i=this.state.orientation==="left"?{left:this.state.left,top:r.top}:{left:this.state.left+r.width+7,top:r.top},o=this.state.submenuShown,a=o.value;return o.option==="track-type"?this.getTrackTypeItems(i,r,a):this.getConfigureSeriesMenu(i,r,a)}return O.createElement("div",null)}},{key:"getDivideByMenuItem",value:function(){if(this.props.series.data&&this.props.series.data.type==="divided"){const r={tilesetUid:this.props.series.data.children[0].tilesetUid,server:this.props.series.data.children[0].server};return O.createElement(It,{className:Tt["context-menu-item"],onClick:()=>this.props.onChangeTrackData(this.props.series.uid,r),onMouseEnter:i=>this.handleOtherMouseEnter(i)},O.createElement("span",{className:Tt["context-menu-span"]},"Remove divisor"))}return O.createElement(It,{className:Tt["context-menu-item"],onClick:()=>this.props.onAddDivisor(this.props.series),onMouseEnter:r=>this.handleOtherMouseEnter(r)},O.createElement("span",{className:Tt["context-menu-span"]},"Divide by"))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){let r=null;Tr[this.props.series.type]&&Tr[this.props.series.type].exportable&&(r=O.createElement(It,{className:Tt["context-menu-item"],onClick:()=>this.props.onExportData(this.props.hostTrack.uid,this.props.track.uid),onMouseEnter:o=>this.handleOtherMouseEnter(o)},O.createElement("span",{className:Tt["context-menu-span"]},"Export Data")));const i=this.props.onAddSeries?O.createElement(It,{className:Tt["context-menu-item"],onClick:()=>{this.props.onCloseTrack(this.props.series.uid),this.props.onAddSeries(this.props.hostTrack.uid)},onMouseEnter:o=>this.handleOtherMouseEnter(o)},O.createElement("span",{className:Tt["context-menu-span"]},"Replace Series")):null;return O.createElement("div",{ref:o=>{this.div=o},className:ir(Tt["context-menu"],{[Tt["context-menu-dark"]]:this.props.theme===wr}),"data-menu-type":"SeriesListMenu",onMouseLeave:this.props.handleMouseLeave,style:{left:this.state.left,top:this.state.top}},O.createElement(It,{onClick:()=>{},onMouseEnter:o=>this.handleItemMouseEnter(o,{option:"configure-series",value:this.props.track}),onMouseLeave:o=>this.handleMouseLeave(o)},"Configure Series",O.createElement("svg",{className:Tt["play-icon"]},O.createElement("use",{xlinkHref:"#play"}))),O.createElement(It,{className:Tt["context-menu-item"],onClick:()=>{},onMouseEnter:o=>this.handleItemMouseEnter(o,{option:"track-type",value:this.props.track}),onMouseLeave:o=>this.handleMouseLeave(o)},O.createElement("span",{className:Tt["context-menu-span"]},"Track Type",O.createElement("svg",{className:Tt["play-icon"]},O.createElement("use",{xlinkHref:"#play"})))),r,this.getDivideByMenuItem(),O.createElement(It,{className:Tt["context-menu-item"],onClick:this.props.onCloseTrack,onMouseEnter:o=>this.handleOtherMouseEnter(o)},O.createElement("span",{className:Tt["context-menu-span"]},"Close Series")),i,this.getSubmenu())}}]),n}(fu);const KQ=e=>{let t=[];for(const n of e)n.contents?t=t.concat(n.contents):t.push(n);return t},fM=(e,t,n,r)=>e?(window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(i=>{Tr[i]=window.higlassTracksByType[i].config}),KQ(e).map(i=>{const o=Tr[i.type]?Tr[i.type].thumbnail:null,a=o?O.createElement("div",{className:Tt["context-menu-icon"],dangerouslySetInnerHTML:{__html:o.outerHTML}}):O.createElement("div",{className:Tt["context-menu-icon"]},O.createElement("svg",null));return O.createElement(It,{key:i.uid,className:Tt["context-menu-item"],onClick:()=>{r&&r(i.uid)},onMouseEnter:s=>{t&&t(s,i)},onMouseLeave:s=>{n&&n(s)}},a,O.createElement("span",{className:Tt["context-menu-span"]},i.options&&i.options.name&&i.options.name.length?i.options.name:i.type,t&&n?O.createElement("svg",{className:Tt["play-icon"]},O.createElement("use",{xlinkHref:"#play"})):null))})):null;function ZZe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JZe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tJe(r.key),r)}}function eJe(e,t,n){return t&&JZe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tJe(e){var t=rJe(e,"string");return typeof t=="symbol"?t:String(t)}function rJe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_P(e,t)}function _P(e,t){return _P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},_P(e,t)}function iJe(e){var t=sJe();return function(){var n=fE(e),r;if(t){var i=fE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return oJe(this,r)}}function oJe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aJe(e)}function aJe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sJe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fE(e){return fE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fE(e)}const QQ=_S(e=>function(t){nJe(r,t);var n=iJe(r);function r(){return ZZe(this,r),n.apply(this,arguments)}return eJe(r,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const i=this.state.submenuSourceBbox;let o=null;this.state.orientation==="left"?o={left:this.state.left,top:i.top}:o={left:this.state.left+i.width+7,top:i.top};const a=KQ(this.props.tracks).filter(u=>u.uid===this.state.submenuShown.uid)[0],s=a&&a.position!=="whole";return O.createElement(QZe,{key:`series-list-menu-${a.uid}`,ref:u=>{this.seriesListMenu=u},closeMenu:this.props.closeMenu,hostTrack:this.props.tracks[0],onAddDivisor:this.props.onAddDivisor,onAddSeries:s?this.props.onAddSeries:null,onChangeTrackData:this.props.onChangeTrackData,onChangeTrackType:this.props.onChangeTrackType,onCloseTrack:()=>this.props.onCloseTrack(this.state.submenuShown.uid),onConfigureTrack:this.props.onConfigureTrack,onDivideSeries:this.props.onDivideSeries,onExportData:this.props.onExportData,onLockScales:this.props.onLockScales,onTrackOptionsChanged:this.props.onTrackOptionsChanged,orientation:this.state.orientation,parentBbox:i,position:o,series:this.state.submenuShown,theme:this.props.theme,track:a,trackOrientation:this.props.trackOrientation,trackSourceServers:this.props.trackSourceServers})}return O.createElement("div",null)}}]),r}(e));function lJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uJe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hJe(r.key),r)}}function cJe(e,t,n){return t&&uJe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hJe(e){var t=fJe(e,"string");return typeof t=="symbol"?t:String(t)}function fJe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function U0(){return typeof Reflect<"u"&&Reflect.get?U0=Reflect.get.bind():U0=function(e,t,n){var r=pJe(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},U0.apply(this,arguments)}function pJe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Xp(e),e!==null););return e}function dJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TP(e,t)}function TP(e,t){return TP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},TP(e,t)}function mJe(e){var t=vJe();return function(){var n=Xp(e),r;if(t){var i=Xp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gJe(this,r)}}function gJe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yJe(e)}function yJe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vJe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xp(e){return Xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xp(e)}let bJe=function(e){dJe(n,e);var t=mJe(n);function n(r){var i;return lJe(this,n),i=t.call(this,r),i.seriesRefs={},i.seriesListMenu=null,i}return cJe(n,[{key:"componentDidMount",value:function(){U0(Xp(n.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){return O.createElement("div",{ref:r=>{this.div=r},className:ir(Tt["context-menu"],{[Tt["context-menu-dark"]]:this.props.theme===wr}),"data-menu-type":"ConfigTrackMenu",style:{left:this.state.left,top:this.state.top}},fM(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this),null),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{contextMenu:this,onClick:()=>this.props.onLockValueScale(this.props.tracks[0].uid),onMouseEnter:r=>this.handleOtherMouseEnter(r)},"Lock Value Scale With"),O.createElement(It,{contextMenu:this,onClick:()=>this.props.onUnlockValueScale(this.props.tracks[0].uid),onMouseEnter:r=>this.handleOtherMouseEnter(r)},"Unlock Value Scale"),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{contextMenu:this,onClick:()=>this.props.onAddSeries(this.props.tracks[0].uid),onMouseEnter:r=>this.handleOtherMouseEnter(r)},"Add Series"),O.createElement(It,{onClick:()=>this.props.onCloseTrack(this.props.tracks[0].uid)},"Close Track"),O.createElement(It,{onClick:()=>{this.props.onReplaceTrack(this.props.tracks[0].uid,this.props.trackOrientation)}},"Replace Track"),this.getSubmenu())}}]),n}(Sd(fu).with(QQ));function ZQ(e){return O.createElement("div",null,fM(e.tracks,null,null,e.onCloseTrack),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:()=>e.onCloseTrack(e.tracks[0].uid)},"Close all series"))}ZQ.propTypes={onCloseTrack:N.func.isRequired,tracks:N.array.isRequired};function _Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TJe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SJe(r.key),r)}}function EJe(e,t,n){return t&&TJe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SJe(e){var t=wJe(e,"string");return typeof t=="symbol"?t:String(t)}function wJe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function AJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EP(e,t)}function EP(e,t){return EP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},EP(e,t)}function OJe(e){var t=xJe();return function(){var n=pE(e),r;if(t){var i=pE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kJe(this,r)}}function kJe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z0(e)}function z0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xJe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pE(e){return pE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pE(e)}let Xl=function(e){AJe(n,e);var t=OJe(n);function n(r){var i;return _Je(this,n),i=t.call(this,r),i.clickHandlerBound=i.clickHandler.bind(z0(i)),i.contextMenuHandlerBound=i.contextMenuHandler.bind(z0(i)),i.resizeHandlerBound=i.resizeHandler.bind(z0(i)),i}return EJe(n,[{key:"componentDidMount",value:function(){this.popup=document.createElement("div"),document.body.appendChild(this.popup),this.popup.style.zIndex=99,this.popup.style.position="absolute",this.popup.className="hg-popup",document.addEventListener("click",this.clickHandlerBound,!0),document.addEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.addEventListener("resize",this.resizeHandlerBound,!0),this._renderLayer()}},{key:"componentDidUpdate",value:function(){this._renderLayer()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickHandlerBound,!0),document.removeEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.removeEventListener("resize",this.resizeHandlerBound,!0),Fn.unmountComponentAtNode(this.popup),document.body.removeChild(this.popup)}},{key:"_renderLayer",value:function(){Fn.render(this.props.children,this.popup)}},{key:"clickHandler",value:function(r){this.popup.contains(r.target)||this.props.onMenuClosed&&this.props.onMenuClosed(r)}},{key:"contextMenuHandler",value:function(r){r.altKey||(r.preventDefault(),this.clickHandler(r))}},{key:"resizeHandler",value:function(){this.props.onMenuClosed(null)}},{key:"render",value:function(){return O.createElement("div",null)}}]),n}(O.Component);Xl.defaultProps={onMenuClosed:L9};Xl.propTypes={children:N.node.isRequired,onMenuClosed:N.func};const IJe=n9(e=>O.createElement(KK,{className:e.className,controlAlignLeft:e.controlAlignLeft,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width})),CJe={"vertical-tiled-plot":"_vertical-tiled-plot_f3ho8_1"};function PJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DJe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NJe(r.key),r)}}function RJe(e,t,n){return t&&DJe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NJe(e){var t=MJe(e,"string");return typeof t=="symbol"?t:String(t)}function MJe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function LJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SP(e,t)}function SP(e,t){return SP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},SP(e,t)}function jJe(e){var t=FJe();return function(){var n=dE(e),r;if(t){var i=dE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return BJe(this,r)}}function BJe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V0(e)}function V0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FJe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dE(e){return dE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dE(e)}function sU(e){return e&&e.sourceEvent}let wP=function(e){LJe(n,e);var t=jJe(n);function n(r){var i;return PJe(this,n),i=t.call(this,r),i.brushBehavior=Hy().on("start",i.brushStarted.bind(V0(i))).on("brush",i.brushed.bind(V0(i))).on("end",i.brushedEnded.bind(V0(i))),i}return RJe(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(r,i){if(this.rangeSelectionTriggered)return this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==r.rangeSelection&&this.moveBrush(r.rangeSelection[0]?r.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==i;if(this.props.rangeSelection!==r.rangeSelection){const o=this.props.is1dRangeSelection?0:1;return this.moveBrush(r.rangeSelection[o]?r.rangeSelection[o]:null,r.rangeSelectionEnd),this.state!==i}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,Cf(this.brushEl,Bo["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(r){const i=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!sU(r)||!this.props.onRangeSelection||i)&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(r.selection))}},{key:"brushStarted",value:function(r){!sU(r)||!r.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(r){if(!this.props.is1dRangeSelection)return;const i=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,r.selection&&r.sourceEvent&&this.props.onRangeSelection&&!i&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(r.selection)),r.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(r,i=!1){if(!this.brushEl)return;const o=r?[this.props.scale(r[0]),this.props.scale(r[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,i?this.brushEl.transition().call(this.brushBehavior.move,o):this.brushEl.call(this.brushBehavior.move,o)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const r=this.props.tracks.map(a=>a.width).reduce(wl,0),i=this.props.tracks.map(a=>rd(a)).reduce(Vy,!1),o=Bo[this.props.isRangeSelectionActive?"track-range-selection-active":"track-range-selection"];return O.createElement("div",{className:CJe["vertical-tiled-plot"]},i&&O.createElement("svg",{ref:a=>{this.brushEl=Wt(a)},className:o,style:{height:this.props.height,width:r},xmlns:"http://www.w3.org/2000/svg"}),O.createElement(wS,{axis:"x",className:ir(Fo.list,Fo.stylizedList,Fo.horizontalList),component:$K,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:this.props.height,helperClass:Fo.stylizedHelper,itemClass:ir(Fo.stylizedItem,Fo.horizontalItem),itemControlAlignLeft:this.props.tracksControlAlignLeft,itemReactClass:IJe,items:this.props.tracks.map(a=>({configMenuVisible:a.uid===this.props.configTrackMenuId,uid:a.uid||zt.nice(),height:this.props.height,width:a.width,value:a.value})),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:r}))}}]),n}(O.Component);wP.propTypes={configTrackMenuId:N.string,editable:N.bool,handleConfigTrack:N.func,handleResizeTrack:N.func,handleSortEnd:N.func,is1dRangeSelection:N.bool,isRangeSelectionActive:N.bool,height:N.number,onAddSeries:N.func,onCloseTrack:N.func,onCloseTrackMenuOpened:N.func,onConfigTrackMenuOpened:N.func,onRangeSelection:N.func,onRangeSelectionEnd:N.func,onRangeSelectionReset:N.func,onRangeSelectionStart:N.func,rangeSelection:N.array,rangeSelectionEnd:N.bool,referenceAncestor:N.func,resizeHandles:N.object,scale:N.func,tracks:N.array,tracksControlAlignLeft:N.bool};function GJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HJe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zJe(r.key),r)}}function UJe(e,t,n){return t&&HJe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zJe(e){var t=VJe(e,"string");return typeof t=="symbol"?t:String(t)}function VJe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function YJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AP(e,t)}function AP(e,t){return AP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},AP(e,t)}function XJe(e){var t=$Je();return function(){var n=mE(e),r;if(t){var i=mE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return WJe(this,r)}}function WJe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qJe(e)}function qJe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $Je(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mE(e){return mE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mE(e)}let JQ=function(e){YJe(n,e);var t=XJe(n);function n(){return GJe(this,n),t.apply(this,arguments)}return UJe(n,[{key:"render",value:function(){const r=fM(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this)),i=this.props.customItems?O.Children.map(this.props.customItems,o=>O.cloneElement(o,{onMouseEnter:a=>{this.handleOtherMouseEnter(a)}})):null;return O.createElement("div",{ref:o=>{this.div=o},className:ir(Tt["context-menu"],{[Tt["context-menu-dark"]]:this.props.theme===wr}),"data-menu-type":"ViewContextMenu",style:{left:this.state.left,top:this.state.top}},i,i&&O.createElement("hr",{className:Tt["context-menu-hr"]}),r,r&&O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:()=>this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Horizontal Rule"),O.createElement(It,{onClick:()=>this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Vertical Rule"),O.createElement(It,{onClick:()=>this.props.onAddTrack({type:"cross-rule",x:this.props.coords[0],y:this.props.coords[1],position:"whole"}),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Cross Rule"),O.createElement("hr",{className:Tt["context-menu-hr"]}),this.hasMatrixTrack(this.props.tracks)&&O.createElement(It,{onClick:this.handleAddHorizontalSection.bind(this),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Horizontal Cross Section"),this.hasMatrixTrack(this.props.tracks)&&O.createElement(It,{onClick:this.handleAddVerticalSection.bind(this),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Vertical Cross Section"),this.getSubmenu())}},{key:"hasMatrixTrack",value:function(r){return o0(this.props.tracks).filter(i=>i.type==="heatmap").length>0}},{key:"handleAddHorizontalSection",value:function(){const r=o0(this.props.tracks).filter(i=>i.type==="heatmap")[0];this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),this.props.onAddTrack({data:{type:"horizontal-section",server:r.server,tilesetUid:r.tilesetUid,slicePos:this.props.coords[1]},options:{valueScaling:"log"},type:"horizontal-bar",height:30,position:"top"})}},{key:"handleAddVerticalSection",value:function(){const r=o0(this.props.tracks).filter(i=>i.type==="heatmap")[0];this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),this.props.onAddTrack({data:{type:"vertical-section",server:r.server,tilesetUid:r.tilesetUid,slicePos:this.props.coords[0]},options:{valueScaling:"log"},type:"vertical-bar",height:30,position:"left"})}}]),n}(Sd(fu).with(QQ));JQ.propTypes={coords:N.array,customItems:N.array};function KJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QJe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JJe(r.key),r)}}function ZJe(e,t,n){return t&&QJe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JJe(e){var t=eet(e,"string");return typeof t=="symbol"?t:String(t)}function eet(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function tet(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OP(e,t)}function OP(e,t){return OP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},OP(e,t)}function ret(e){var t=iet();return function(){var n=gE(e),r;if(t){var i=gE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return net(this,r)}}function net(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pn(e)}function Pn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iet(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gE(e){return gE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gE(e)}let pM=function(e){tet(n,e);var t=ret(n);function n(r){var i;KJe(this,n),i=t.call(this,r),i.closing=!1;const{tracks:o}=i.props;return i.canvasElement=null,i.tracksByUidInit={},[...i.props.tracks.top||[],...i.props.tracks.right||[],...i.props.tracks.bottom||[],...i.props.tracks.left||[],...i.props.tracks.gallery||[],...i.props.tracks.center||[]].forEach(a=>{a.type==="combined"?a.contents.forEach(s=>{i.tracksByUidInit[s.uid]=!1}):i.tracksByUidInit[a.uid]=!1}),i.xScale=null,i.yScale=null,i.addUidsToTracks(o),i.trackToReplace=null,i.trackRenderer=null,i.configTrackMenu=null,i.state={sizeMeasured:!1,height:10,width:10,tracks:o,init:!1,addTrackPosition:null,customDialog:null,mouseOverOverlayUid:null,forceUpdate:0,rangeSelection:[null,null],rangeSelectionEnd:!1,chromInfo:null,defaultChromSizes:null,contextMenuCustomItems:null,contextMenuPosition:null,addDivisorDialog:null},i.reset=!0,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(a=>{Tr[a]=window.higlassTracksByType[a].config}),i.topHeight=0,i.bottomHeight=0,i.leftWidth=0,i.rightWidth=0,i.centerHeight=0,i.centerWidth=0,i.dragTimeout=null,i.previousPropsStr="",i.contextMenuHandlerBound=i.contextMenuHandler.bind(Pn(i)),i.handleNoTrackAddedBound=i.handleNoTrackAdded.bind(Pn(i)),i.handleTracksAddedBound=i.handleTracksAdded.bind(Pn(i)),i.closeMenusBound=i.closeMenus.bind(Pn(i)),i.handleAddDivisorBound=i.handleAddDivisor.bind(Pn(i)),i.handleAddSeriesBound=i.handleAddSeries.bind(Pn(i)),i.handleChangeTrackDataBound=i.handleChangeTrackData.bind(Pn(i)),i.handleChangeTrackTypeBound=i.handleChangeTrackType.bind(Pn(i)),i.handleCloseTrackBound=i.handleCloseTrack.bind(Pn(i)),i.handleConfigureTrackBound=i.handleConfigureTrack.bind(Pn(i)),i.handleExportTrackDataBound=i.handleExportTrackData.bind(Pn(i)),i.handleLockValueScaleBound=i.handleLockValueScale.bind(Pn(i)),i.handleReplaceTrackBound=i.handleReplaceTrack.bind(Pn(i)),i.handleTrackOptionsChangedBound=i.handleTrackOptionsChanged.bind(Pn(i)),i.handleUnlockValueScaleBound=i.handleUnlockValueScale.bind(Pn(i)),i.onAddTrack=i.handleAddTrack.bind(Pn(i)),i}return ZJe(n,[{key:"waitForDOMAttachment",value:function(r){if(!this.mounted)return;const i=Fn.findDOMNode(this);document.body.contains(i)?r():requestAnimationFrame(()=>this.waitForDOMAttachment(r))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=Fn.findDOMNode(this),this.canvasElement=Fn.findDOMNode(this.props.canvasElement),this.waitForDOMAttachment(()=>{v_.ElementQueries.listen(),this.resizeSensor=new v_.ResizeSensor(this.element.parentNode,this.measureSize.bind(this)),this.measureSize()}),this.addEventListeners(),this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("contextmenu",this.contextMenuHandlerBound))}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){this.addUidsToTracks(r.tracks),this.setState({tracks:r.tracks})}},{key:"shouldComponentUpdate",value:function(r,i){const o=this.previousPropsStr,a=this.updatablePropsToString(r),s=JSON.stringify(this.state),u=JSON.stringify(i),c=o!==a||s!==u||this.props.chooseTrackHandler!==r.chooseTrackHandler||this.props.customDialog!==r.customDialog;c&&(this.previousPropsStr=a);const l=this.numTracks;return this.numTracks=0,ls(this.props.tracks,()=>this.numTracks++),this.reset=this.reset||l===0&&this.numTracks>0,this.numTracks||(this.tracksByUidInit={}),c}},{key:"UNSAFE_componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(r,i){if(i.rangeSelection!==this.state.rangeSelection){let o=[null,null];this.state.defaultChromSizes&&this.state.rangeSelection.every(a=>a&&a.length)&&(o=this.state.rangeSelection.map(a=>x_(...a,this.state.defaultChromSizes))),this.props.onRangeSelection({dataRange:this.state.rangeSelection,genomicRange:o})}if(this.state.customDialog||this.props.customDialog){const o=this.state.customDialog||this.props.customDialog;if(o.length>0){const a=[],s=[];o.forEach(u=>{a.push(u.bodyComponent),s.push(u.bodyProps)}),this.props.modal.open(O.createElement(hM,{children:a,bodyProps:s,onCancel:this.props.closeCustomDialog,title:o[0].title}))}}if(r.tracks.center,this.props.tracks.center,(this.state.addTrackPosition||this.props.addTrackPosition)&&this.props.modal.open(O.createElement(sE,{host:this.state.addTrackHost,onCancel:this.handleNoTrackAddedBound,onTracksChosen:this.handleTracksAddedBound,position:this.state.addTrackPosition||this.props.addTrackPosition,trackSourceServers:this.props.trackSourceServers})),this.state.addDivisorDialog){const o=this.state.addDivisorDialog;this.props.modal.open(O.createElement(sE,{datatype:Tr[o.type].datatype[0],host:this.state.addTrackHost,onCancel:()=>{this.setState({addDivisorDialog:null})},onTracksChosen:a=>{this.handleDivisorChosen(o,a)},trackSourceServers:this.props.trackSourceServers}))}}},{key:"componentWillUnmount",value:function(){this.closing=!0,this.removeEventListeners(),this.pubSubs.forEach(r=>this.props.pubSub.unsubscribe(r))}},{key:"addUidsToTracks",value:function(r){Object.keys(r).forEach(i=>{r[i].forEach(o=>{o.uid=o.uid||zt.nice()})})}},{key:"contextMenuHandler",value:function(r){if(!this.divTiledPlot)return;const i=this.divTiledPlot.getBoundingClientRect();if(!RR(r.clientX,r.clientY,i.left,i.left+i.width,i.top,i.top+i.height))return;const o=[r.clientX,r.clientY],a=yr(r,this.divTiledPlot),s=this.trackRenderer.zoomedXScale.invert(a[0]),u=this.trackRenderer.zoomedYScale.invert(a[1]);let c=null;r.hgCustomItems&&(c=r.hgCustomItems.map(l=>O.createElement(It,{key:l.key,onClick:l.onClick},l.text))),this.setState({contextMenuCustomItems:c,contextMenuPosition:{left:o[0],top:o[1],canvasLeft:a[0]+this.trackRenderer.xPositionOffset,canvasTop:a[1]+this.trackRenderer.yPositionOffset},contextMenuDataX:s,contextMenuDataY:u})}},{key:"measureSize",value:function(){this.element.clientWidth>0&&this.element.clientHeight>0&&this.setState({sizeMeasured:!0,width:this.element.clientWidth,height:this.element.clientHeight})}},{key:"handleTrackOptionsChanged",value:function(r,i){return this.props.onTrackOptionsChanged(r,i)}},{key:"handleScalesChanged",value:function(r,i){this.xScale=r,this.yScale=i,this.props.onScalesChanged(r,i)}},{key:"handleTilesetInfoReceived",value:function(r,i){const o=Ki(this.props.tracks,r);if(!o){console.warn("Strange, track not found:",r);return}this.tracksByUidInit[o.uid]=!0,this.checkAllTilesetInfoReceived(),o.options||(o.options={}),o.name=i.name,o.maxWidth=i.max_width,o.transforms=i.transforms,o.aggregationModes=i.aggregation_modes,o.header=i.header,o.binsPerDimension=i.bins_per_dimension,i.resolutions?(o.maxZoom=i.resolutions.length-1,o.resolutions=i.resolutions):o.maxZoom=i.max_zoom,o.coordSystem=i.coordSystem,o.datatype=i.datatype}},{key:"checkAllTilesetInfoReceived",value:function(){if(this.state.init&&!this.reset||!this.trackRenderer||!this.props.zoomToDataExtentOnInit())return;const r=Object.keys(this.trackRenderer.trackDefObjects).map(o=>{const a=this.trackRenderer.trackDefObjects[o].trackObject;return a.childTracks?a.childTracks:a}).reduce((o,a)=>o.concat(a),[]).filter(({tilesetInfo:o})=>typeof o<"u"&&o!==!0),i=Object.values(this.tracksByUidInit).filter(o=>o).length;r.length===i&&(this.setState({init:!0}),this.reset=!1,this.handleZoomToData())}},{key:"handleOverlayMouseEnter",value:function(r){this.setState({mouseOverOverlayUid:r})}},{key:"handleOverlayMouseLeave",value:function(r){r===this.state.mouseOverOverlayUid&&this.setState({mouseOverOverlayUid:null})}},{key:"handleTrackPositionChosen",value:function(r){this.setState({mouseOverOverlayUid:null}),this.props.chooseTrackHandler(r.track.uid)}},{key:"handleNoTrackAdded",value:function(){this.trackToReplace=null,this.props.onNoTrackAdded(),this.setState({addTrackPosition:null,addTrackHost:null})}},{key:"handleAddDivisor",value:function(r){this.setState({addDivisorDialog:r})}},{key:"handleDivisorChosen",value:function(r,i){this.setState({addDivisorDialog:null});const o=r.data?{server:r.data.server,tilesetUid:r.data.tilesetUid}:{server:r.server,tilesetUid:r.tilesetUid},a={server:i[0].server,tilesetUid:i[0].uuid};this.handleChangeTrackData(r.uid,{type:"divided",children:[o,a]})}},{key:"handleDivideSeries",value:function(r){}},{key:"handleAddSeries",value:function(r){const i=Km(this.props.tracks,r),o=Ki(this.props.tracks,r);this.setState({addTrackPosition:i,addTrackHost:o})}},{key:"handleReplaceTrack",value:function(r,i){this.trackToReplace=r,this.handleAddTrack(i)}},{key:"handleAddTrack",value:function(r){this.setState({addTrackPosition:r,addTrackHost:null})}},{key:"handleResizeTrack",value:function(r,i,o){const{tracks:a}=this.state;for(const s in a){const u=a[s].filter(c=>c.uid===r);u.length>0&&(u[0].width=i,u[0].height=o)}this.setState({tracks:a,forceUpdate:Math.random()}),this.props.onResizeTrack()}},{key:"closeMenus",value:function(){this.setState({closeTrackMenuId:null,configTrackMenuId:null,contextMenuPosition:null,contextMenuCustomItems:null})}},{key:"handleLockValueScale",value:function(r){this.closeMenus(),this.props.onLockValueScale(r)}},{key:"handleUnlockValueScale",value:function(r){this.closeMenus(),this.props.onUnlockValueScale(r)}},{key:"handleCloseTrack",value:function(r){this.closeMenus(),this.props.onCloseTrack(r)}},{key:"handleChangeTrackType",value:function(r,i){this.closeMenus(),this.props.onChangeTrackType(r,i)}},{key:"handleChangeTrackData",value:function(r,i){this.closeMenus(),this.props.onChangeTrackData(r,i)}},{key:"handleTracksAdded",value:function(r,i,o){return this.trackToReplace&&(this.handleCloseTrack(this.trackToReplace),this.trackToReplace=null),this.props.onTracksAdded(r,i,o),this.setState({addTrackPosition:null,addTrackHost:null}),r}},{key:"handleCloseTrackMenuOpened",value:function(r,i){this.setState({closeTrackMenuId:r,closeTrackMenuLocation:i})}},{key:"handleCloseContextMenu",value:function(){this.setState({contextMenuCustomItems:null,contextMenuPosition:null,contextMenuDataX:null,contextMenuDataY:null})}},{key:"handleCloseTrackMenuClosed",value:function(){this.setState({closeTrackMenuId:null})}},{key:"handleConfigTrackMenuOpened",value:function(r,i){this.closeMenus(),this.setState({configTrackMenuId:r,configTrackMenuLocation:i})}},{key:"handleConfigureTrack",value:function(r,i){this.setState({configTrackMenuId:null,trackOptions:{track:r,configComponent:i}}),this.closeMenus()}},{key:"handleSortEnd",value:function(r){this.setState(i=>{const o=i.tracks,a={};for(let s=0;s<r.length;s++)a[r[s].uid]=s;for(const s in o){const u=o[s];if(u.length&&u[0].uid in a){const c=new Array(u.length);for(let l=0;l<u.length;l++)c[a[u[l].uid]]=u[l];o[s]=c}}return{tracks:o,forceUpdate:Math.random()}})}},{key:"createTracksAndLocations",value:function(){const r=[],{tracks:i}=this.state;return lx.forEach(o=>{i[o]&&i[o].forEach(a=>{a.contents&&a.contents.forEach(s=>{s.position=o}),a.position=o,r.push({track:a,location:o})})}),r}},{key:"calculateTrackPosition",value:function(r,i){let o=this.props.paddingTop,a=this.props.paddingBottom,s=this.props.paddingLeft,u=this.props.paddingRight,c=this.centerWidth,l=r.height,f=0,h=0;switch(i){case"top":s+=this.leftWidth;for(let p=0;p<this.state.tracks.top.length&&this.state.tracks.top[p].uid!==r.uid;p++)o+=this.state.tracks.top[p].height;break;case"bottom":s+=this.leftWidth,o+=this.topHeight+this.centerHeight+this.galleryDim;for(let p=0;p<this.state.tracks.bottom.length&&this.state.tracks.bottom[p].uid!==r.uid;p++)o+=this.state.tracks.bottom[p].height;break;case"left":o+=this.topHeight,c=r.width,l=this.centerHeight;for(let p=0;p<this.state.tracks.left.length&&this.state.tracks.left[p].uid!==r.uid;p++)s+=this.state.tracks.left[p].width;break;case"right":s+=this.leftWidth+this.centerWidth+this.galleryDim,o+=this.topHeight,c=r.width,l=this.centerHeight;for(let p=0;p<this.state.tracks.right.length&&this.state.tracks.right[p].uid!==r.uid;p++)s+=this.state.tracks.right[p].width;break;case"center":s+=this.leftWidth,o+=this.topHeight,l=this.centerHeight;break;case"gallery":s+=this.leftWidthNoGallery,o+=this.topHeightNoGallery,c=this.state.width-this.leftWidthNoGallery-this.rightWidthNoGallery-this.props.paddingLeft,l=this.state.height-this.topHeightNoGallery-this.bottomHeightNoGallery-this.props.paddingTop,f=this.galleryDim,h=this.galleryDim;for(let p=0;p<this.state.tracks.gallery.length&&this.state.tracks.gallery[p].uid!==r.uid;p++)c-=2*this.state.tracks.gallery[p].height,l-=2*this.state.tracks.gallery[p].height,s+=this.state.tracks.gallery[p].height,o+=this.state.tracks.gallery[p].height,f-=this.state.tracks.gallery[p].height,h-=this.state.tracks.gallery[p].height;for(let p=0;p<this.state.tracks.right.length;p++)u+=this.state.tracks.right[p].width;for(let p=0;p<this.state.tracks.bottom.length;p++)a+=this.state.tracks.bottom[p].height;r.offsetX=f,r.offsetY=h,r.offsetTop=o,r.offsetRight=u,r.offsetBottom=a,r.offsetLeft=s;break;case"whole":default:c=this.leftWidth+this.centerWidth+this.rightWidth,l=this.topHeight+this.centerHeight+this.bottomHeight}return lx.indexOf(i)===-1&&console.warn("Track with unknown position present:",i,r),{left:s,top:o,width:c,height:l,track:r}}},{key:"findCentralHeatmapTrack",value:function(r){for(let i=0;i<r.length;i++){if(r[i].type==="combined")return this.findCentralHeatmapTrack(r[i].contents);if(r[i].type==="heatmap")return r[i]}}},{key:"trackUuidToOrientation",value:function(r){}},{key:"overlayTracks",value:function(r){return this.props.overlays?this.props.overlays.filter(i=>i.includes&&i.includes.length).map(i=>{const o=i.type?`overlay-${i.type}-track`:"overlay-track",a={...i,uid:i.uid||zt.nice(),includes:i.includes,type:o,options:Object.assign(i.options,{orientationsAndPositions:i.includes.map(s=>{const u=Ki(this.props.tracks,s);if(!u)return console.warn(`OverlayTrack included uid (${s}) not found in the track list`),null;const c=Km(this.props.tracks,u.uid);let l;if((c==="top"||c==="bottom")&&(l="1d-horizontal"),(c==="left"||c==="right")&&(l="1d-vertical"),c==="center"&&(l="2d"),!l)return console.warn("Only top, bottom, left, right, or center tracks can be overlaid at the moment"),null;const f=r.filter(p=>p.track.uid===s);if(!f.length)return null;const h={left:f[0].left-this.props.paddingLeft,top:f[0].top-this.props.paddingTop,width:f[0].width,height:f[0].height};return{orientation:l,position:h}}).filter(s=>s)})};return{top:this.props.paddingTop,left:this.props.paddingLeft,width:this.leftWidth+this.centerWidth+this.rightWidth,height:this.topHeight+this.centerHeight+this.bottomHeight+this.props.marginTop+this.props.marginBottom,track:a}}):[]}},{key:"positionedTracks",value:function(){return this.createTracksAndLocations().map(({track:r,location:i})=>this.calculateTrackPosition(r,i))}},{key:"createTrackPositionTexts",value:function(){const r=this.positionedTracks();return this.createTracksAndLocations(),r.map(i=>{const{track:o}=i;return O.createElement("div",{key:o.uid,style:{left:i.left,top:i.top,width:i.width,height:i.height,position:"absolute"}},o.uid.slice(0,2))})}},{key:"handleExportTrackData",value:function(r,i){const o=Ki(this.props.tracks,i);let a=null;r!==i?a=this.trackRenderer.trackDefObjects[r].trackObject.createdTracks[o.uid]:{trackObject:a}=this.trackRenderer.trackDefObjects[r],a.exportData(),this.closeMenus()}},{key:"listTracksAtPosition",value:function(r,i,o=!1){const a=[];if(!this.trackRenderer)return[];for(const s in this.trackRenderer.trackDefObjects){const u=this.trackRenderer.trackDefObjects[s].trackObject;if(u.respondsToPosition(r,i))if(o){if(this.props.tracks.center)if(this.props.tracks.center.contents)for(let c=0;c<this.props.tracks.center.contents.length;c++)this.props.tracks.center.contents[c].uid===s&&(u.is2d=!0);else this.props.tracks.center&&this.props.tracks.center.length&&this.props.tracks.center[0].uid===s&&(u.is2d=!0);a.push(u)}else a.push(this.trackRenderer.trackDefObjects[s].trackDef.track)}return a}},{key:"listAllTrackObjects",value:function(){const r=[];for(const i in this.trackRenderer.trackDefObjects){const o=this.trackRenderer.trackDefObjects[i];if(o.trackObject.createdTracks)for(const a in o.trackObject.createdTracks){const s=o.trackObject.createdTracks[a];r.push(s)}else r.push(o.trackObject)}return r}},{key:"handleZoomToData",value:function(){const r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=[r,r],a=[i,i],s=this.listAllTrackObjects();for(const h of s)if(h.tilesetInfo&&h.tilesetInfo.min_pos)for(let p=0;p<h.tilesetInfo.min_pos.length;p++)h.tilesetInfo.min_pos[p]<o[p]&&(o[p]=h.tilesetInfo.min_pos[p]),h.tilesetInfo.max_pos[p]>a[p]&&(a[p]=h.tilesetInfo.max_pos[p]);const u=this.trackRenderer.currentProps.paddingLeft+this.trackRenderer.currentProps.leftWidth;let c=[u,u+this.trackRenderer.currentProps.centerWidth].map(this.trackRenderer.zoomTransform.rescaleX(this.trackRenderer.xScale).invert);const l=this.trackRenderer.currentProps.paddingTop+this.trackRenderer.currentProps.topHeight;let f=[l,l+this.trackRenderer.currentProps.centerHeight].map(this.trackRenderer.zoomTransform.rescaleY(this.trackRenderer.yScale).invert);this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),o[0]<Number.MAX_SAFE_INTEGER&&a[0]>Number.MIN_SAFE_INTEGER&&(c=[o[0],a[0]]),o[1]<Number.MAX_SAFE_INTEGER&&a[1]>Number.MIN_SAFE_INTEGER&&(f=[o[1],a[1]]),this.props.onDataDomainChanged(c,f)}},{key:"resetViewport",value:function(){this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),this.props.onDataDomainChanged(this.props.initialXDomain,this.props.initialYDomain)}},{key:"updatablePropsToString",value:function(r){return JSON.stringify({tracks:r.tracks,overlays:r.overlays,viewOptions:r.viewOptions,uid:r.uid,addTrackPosition:r.addTrackPosition,editable:r.editable,marginTop:r.marginTop,marginBottom:r.marginBottom,marginLeft:r.marginLeft,marginRight:r.marginRight,paddingTop:r.paddingTop,paddingBottom:r.paddingBottom,paddingLeft:r.paddingLeft,paddingRight:r.paddingRight,mouseTool:r.mouseTool,initialXDomain:r.initialXDomain,initialYDomain:r.initialYDomain,trackSourceServers:r.trackSourceServers,zoomable:r.zoomable,draggingHappening:r.draggingHappening})}},{key:"getXYScales",value:function(){this.trackRenderer&&(this.xScale=this.trackRenderer.currentXScale,this.yScale=this.trackRenderer.currentYScale)}},{key:"rangeViewToDataLoci",value:function(r,i){return i?[parseInt(i.invert(r[0]),10),parseInt(i.invert(r[1]),10)]:[null,null]}},{key:"rangeSelectionResetHandler",value:function(){this.state.rangeSelectionMaster&&this.setState({is1dRangeSelection:null,rangeSelection:[null,null],rangeSelectionMaster:null,rangeSelectionEnd:!1})}},{key:"rangeSelection1dEndHandler",value:function(r){(!this.xScale||!this.yScale)&&this.getXYScales();const i=r==="x"?this.xScale:this.yScale;return o=>{this.setState(a=>{const s=a.is1dRangeSelection?[null,null]:a.rangeSelection.slice(),u=!this.state.is1dRangeSelection&&r==="y"?1:0;let c=this.rangeViewToDataLoci(o,i);const l=c[1]-c[0];if(this.props.rangeSelection1dSize[0]>l){const f=c[0]+l/2;c=[f-this.props.rangeSelection1dSize[0]/2,f+this.props.rangeSelection1dSize[0]/2]}else if(this.props.rangeSelection1dSize[1]<l){const f=c[0]+l/2;c=[f-this.props.rangeSelection1dSize[1]/2,f+this.props.rangeSelection1dSize[1]/2]}return s[u]=c,this.props.rangeSelectionToInt&&(s[u]=s[u].map(f=>Math.round(f))),{rangeSelection:s,rangeSelectionEnd:!0}})}}},{key:"rangeSelection1dHandler",value:function(r){(!this.xScale||!this.yScale)&&this.getXYScales();const i=r==="x"?this.xScale:this.yScale;return o=>{this.setState(a=>{const s=a.is1dRangeSelection?[null,null]:a.rangeSelection.slice(),u=!a.is1dRangeSelection&&r==="y"?1:0;return s[u]=this.rangeViewToDataLoci(o,i),{rangeSelection:s,rangeSelectionEnd:!1}})}}},{key:"rangeSelection1dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!0,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dHandler",value:function(r){(!this.xScale||!this.yScale)&&this.getXYScales(),this.setState({rangeSelection:[this.rangeViewToDataLoci(r[0],this.xScale),this.rangeViewToDataLoci(r[1],this.yScale)],rangeSelectionEnd:!1})}},{key:"rangeSelection2dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!1,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dEndHandler",value:function(r){(!this.xScale||!this.yScale)&&this.getXYScales();const i=this.rangeViewToDataLoci(r[0],this.xScale),o=this.rangeViewToDataLoci(r[1],this.yScale);let a=[i,o];const s=i[1]-i[0],u=o[1]-o[0],c=[s,u];a.forEach((l,f)=>{if(this.props.rangeSelection1dSize[0]>c[f]){const h=l[0]+Math.round(c[f]/2);l[0]=h-this.props.rangeSelection1dSize[0]/2,l[1]=h+this.props.rangeSelection1dSize[0]/2}else if(this.props.rangeSelection1dSize[1]<c[f]){const h=l[0]+Math.round(c[f]/2);l[0]=h-this.props.rangeSelection1dSize[1]/2,l[1]=h+this.props.rangeSelection1dSize[1]/2}}),this.props.rangeSelectionToInt&&(a=a.map(l=>l.map(f=>Math.round(f)))),this.setState({rangeSelection:a,rangeSelectionEnd:!0})}},{key:"getContextMenu",value:function(){if(this.state.contextMenuPosition){const r=this.listTracksAtPosition(this.state.contextMenuPosition.canvasLeft,this.state.contextMenuPosition.canvasTop);return O.createElement(Xl,{onMenuClosed:this.closeMenusBound},O.createElement(JQ,{closeMenu:this.closeMenusBound,coords:[this.state.contextMenuDataX,this.state.contextMenuDataY],customItems:this.state.contextMenuCustomItems,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:i=>{this.props.onTracksAdded([i],i.position,null),this.handleCloseContextMenu()},onChangeTrackData:this.handleChangeTrackDataBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,orientation:"right",position:this.state.contextMenuPosition,theme:this.props.theme,tracks:r,trackSourceServers:this.props.trackSourceServers}))}return null}},{key:"getIdealizedTrackPositionsOverlay",value:function(){const r=this.props.draggingHappening;if(typeof r=="boolean")return;const i=r.datatype;if(!(i in ey)&&!r.defaultTracks){console.warn("unknown data type:",r.higlassTrack);return}const o={"1d-horizontal":["top","bottom","left","right"],"2d":["center"],"1d-vertical":["left","right"]},a=ey[i]||{};if(r.defaultTracks)for(const C of r.defaultTracks)if(!Tr[C])console.warn("unknown track type",C);else for(const w of o[Tr[C].orientation])a[w]=C;const s=new Set(["top","left","right","center","bottom"].filter(C=>C in this.state.tracks&&this.state.tracks[C].length)),u="top"in a,c="left"in a,l="right"in a,f="bottom"in a,h="center"in a,p="center"in a||s.has("left")||s.has("right")||s.has("center"),d="top"in a,m="bottom"in a&&p,g="left"in a&&p,v="right"in a&&p,b=Object.keys(a).length&&("center"in a||p),y=O.createElement("div",{style:{flexGrow:1}}),_=O.cloneElement(y),T=O.createElement("div",{style:{display:"flex",flexGrow:1}},d&&(b||g)?y:null,O.createElement(vb,{defaultTrackType:a.top,draggingHappening:this.props.draggingHappening,enabled:u,onTrackDropped:C=>this.handleTracksAdded([C],"top"),style:{border:"1px solid black",flexGrow:1}}),d&&(b||g)?_:null),S=O.createElement("div",{style:{display:"flex",flexGrow:1}},d&&(b||g)?y:null,O.createElement(vb,{defaultTrackType:a.bottom,draggingHappening:this.props.draggingHappening,enabled:f,onTrackDropped:C=>this.handleTracksAdded([C],"bottom"),style:{border:"1px solid black",flexGrow:1}}),d&&(b||g)?_:null),E=O.createElement(vb,{defaultTrackType:a.left,draggingHappening:this.props.draggingHappening,enabled:c,onTrackDropped:C=>this.handleTracksAdded([C],"left"),style:{border:"1px solid black",flexGrow:1}}),I=O.createElement(vb,{defaultTrackType:a.center,draggingHappening:this.props.draggingHappening,enabled:h,onTrackDropped:C=>this.handleTracksAdded([C],"center"),position:"center",style:{border:"1px solid black",flexGrow:1}}),x=O.cloneElement(E,{defaultTrackType:a.right,enabled:l,onTrackDropped:C=>this.handleTracksAdded([C],"right")});return O.createElement("div",{style:{position:"absolute",left:"0px",top:"0px",width:this.state.width,height:this.state.height}},O.createElement("div",{style:{position:"absolute",width:this.state.width,height:this.state.height,background:"white",opacity:.4}}),O.createElement("div",{style:{width:this.state.width,height:this.state.height,position:"absolute",display:"flex",flexDirection:"column"}},d?T:null,p&&O.createElement("div",{style:{display:"flex",height:d||m?"40%":"100%",width:"100%"}},g?E:null,b?I:null,v?x:null),m?S:null))}},{key:"render",value:function(){this.galleryDim=this.props.tracks.gallery?this.props.tracks.gallery.map(b=>b.height).reduce(wl,0):0,this.topHeightNoGallery=this.props.tracks.top.map(b=>b.height).reduce(wl,0),this.topHeight=this.topHeightNoGallery+this.galleryDim,this.bottomHeightNoGallery=this.props.tracks.bottom.map(b=>b.height).reduce(wl,0),this.bottomHeight=this.bottomHeightNoGallery+this.galleryDim,this.leftWidthNoGallery=this.props.tracks.left.map(b=>b.width).reduce(wl,0),this.leftWidth=this.leftWidthNoGallery+this.galleryDim,this.rightWidthNoGallery=this.props.tracks.right.map(b=>b.width).reduce(wl,0),this.rightWidth=this.rightWidthNoGallery+this.galleryDim;const r=this.props.paddingTop+this.props.paddingBottom,i=this.props.paddingLeft+this.props.paddingRight;this.centerHeight=Math.max(0,this.state.height-this.topHeight-this.bottomHeight-r),this.centerWidth=Math.max(0,this.state.width-this.leftWidth-this.rightWidth-i);const o="none",a=O.createElement("div",{className:"top-track-container",style:{left:this.leftWidth+this.props.paddingLeft,top:this.props.paddingTop,width:this.centerWidth,height:this.topHeightNoGallery,outline:o,position:"absolute"}},O.createElement(WT,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===vo,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["bottom"]),scale:this.xScale,tracks:this.props.tracks.top,width:this.centerWidth})),s=O.createElement("div",{className:"left-track-container",style:{left:this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.leftWidthNoGallery,height:this.centerHeight,outline:o,position:"absolute"}},O.createElement(wP,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===vo,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["right"]),scale:this.yScale,tracks:this.props.tracks.left})),u=O.createElement("div",{className:"right-track-container",style:{right:this.props.paddingRight,top:this.topHeight+this.props.paddingTop,width:this.rightWidthNoGallery,height:this.centerHeight,outline:o,position:"absolute"}},O.createElement(wP,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===vo,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["left"]),scale:this.yScale,tracks:this.props.tracks.right,tracksControlAlignLeft:!0})),c=O.createElement("div",{className:"bottom-track-container",style:{left:this.leftWidth+this.props.paddingLeft,bottom:this.props.paddingBottom,width:this.centerWidth,height:this.bottomHeightNoGallery,outline:o,position:"absolute"}},O.createElement(WT,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===vo,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["top"]),scale:this.xScale,tracks:this.props.tracks.bottom,width:this.centerWidth})),l=O.createElement("div",{key:"galleryTracksDiv",className:"gallery-track-container",style:{left:this.leftWidthNoGallery+this.props.paddingLeft,top:this.topHeightNoGallery+this.props.paddingTop,width:this.centerWidth+2*this.galleryDim,height:this.centerHeight+2*this.galleryDim,outline:o,position:"absolute"}},O.createElement(MW,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight+2*this.galleryDim,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),tracks:this.props.tracks.gallery,width:this.centerWidth+2*this.galleryDim}));let f=O.createElement("div",{className:["center-track-container",eI["center-track-container"]].join(" "),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.bottomHeight,outline:o}});this.props.tracks.center.length&&(f=O.createElement("div",{className:["center-track-container",eI["center-track-container"]].join(" "),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.centerHeight,outline:o}},O.createElement(UN,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===vo,onAddSeries:this.handleAddSeries.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection2dStartHandler.bind(this),onRangeSelectionX:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionXEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionXY:this.rangeSelection2dHandler.bind(this),onRangeSelectionXYEnd:this.rangeSelection2dEndHandler.bind(this),onRangeSelectionY:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionYEnd:this.rangeSelection1dEndHandler("y").bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,scaleX:this.xScale,scaleY:this.yScale,tracks:this.props.tracks.center,uid:this.props.tracks.center[0].uid,width:this.centerWidth}))),this.createTrackPositionTexts();let h=this.positionedTracks();h=h.concat(this.overlayTracks(h));let p=null;this.state.sizeMeasured&&(p=O.createElement(DQe,{ref:b=>{this.trackRenderer=b,this.checkAllTilesetInfoReceived()},canvasElement:this.canvasElement,centerHeight:this.centerHeight,centerWidth:this.centerWidth,disableTrackMenu:this.props.disableTrackMenu,dragging:this.props.dragging,galleryDim:this.galleryDim,getLockGroupExtrema:this.props.getLockGroupExtrema,height:this.state.height,initialXDomain:this.props.initialXDomain,initialYDomain:this.props.initialYDomain,isRangeSelection:this.props.mouseTool===vo,isShowGlobalMousePosition:this.props.isShowGlobalMousePosition,isValueScaleLocked:this.props.isValueScaleLocked,leftWidth:this.leftWidth,leftWidthNoGallery:this.leftWidthNoGallery,metaTracks:this.props.metaTracks,onMouseMoveZoom:this.props.onMouseMoveZoom,onNewTilesLoaded:this.props.onNewTilesLoaded,onScalesChanged:this.handleScalesChanged.bind(this),onTilesetInfoReceived:this.handleTilesetInfoReceived.bind(this),onTrackOptionsChanged:this.handleTrackOptionsChanged.bind(this),onValueScaleChanged:this.props.onValueScaleChanged,paddingLeft:this.props.paddingLeft,paddingTop:this.props.paddingTop,pixiRenderer:this.props.pixiRenderer,pixiStage:this.props.pixiStage,pluginDataFetchers:this.props.pluginDataFetchers,pluginTracks:this.props.pluginTracks,positionedTracks:h,registerDraggingChangedListener:this.props.registerDraggingChangedListener,removeDraggingChangedListener:this.props.removeDraggingChangedListener,setCentersFunction:this.props.setCentersFunction,svgElement:this.props.svgElement,topHeight:this.topHeight,topHeightNoGallery:this.topHeightNoGallery,uid:this.props.uid,viewOptions:this.props.viewOptions,width:this.state.width,xDomainLimits:this.props.xDomainLimits,yDomainLimits:this.props.yDomainLimits,zoomable:this.props.zoomable,zoomLimits:this.props.zoomLimits},a,s,u,c,l,f));let d=null,m=null;this.state.configTrackMenuId&&(d=O.createElement(Xl,{onMenuClosed:this.closeMenusBound},O.createElement(bJe,{ref:b=>{this.configTrackMenu=b},closeMenu:this.closeMenusBound,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:this.handleAddTrackBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,position:this.state.configTrackMenuLocation,theme:this.props.theme,trackOrientation:Km(this.props.tracks,this.state.configTrackMenuId),tracks:[Ki(this.props.tracks,this.state.configTrackMenuId)]}))),this.state.closeTrackMenuId&&(m=O.createElement(Xl,{onMenuClosed:this.handleCloseTrackMenuClosed.bind(this)},O.createElement(fu,{position:this.state.closeTrackMenuLocation,theme:this.props.theme},O.createElement(ZQ,{onCloseTrack:this.handleCloseTrack.bind(this),tracks:[Ki(this.props.tracks,this.state.closeTrackMenuId)]}))));let g=null;this.props.chooseTrackHandler&&(g=h.filter(b=>b.track.position!=="whole").map(b=>{let y="transparent",_="none";return this.state.mouseOverOverlayUid===b.track.uid&&(y="yellow",_="1px solid black"),O.createElement("div",{key:b.track.uid,className:"tiled-plot-track-overlay",onClick:()=>this.handleTrackPositionChosen(b),onDragEnter:T=>{this.handleOverlayMouseEnter(b.track.uid),T.preventDefault()},onDragLeave:()=>this.handleOverlayMouseLeave(b.track.uid),onDragOver:T=>T.preventDefault(),onDrop:()=>this.handleTrackPositionChosen(b),onMouseEnter:()=>this.handleOverlayMouseEnter(b.track.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(b.track.uid),style:{position:"absolute",left:b.left,top:b.top,width:b.width,height:b.height,background:y,opacity:.4,border:_,zIndex:1}})}));let v=null;if(this.xScale&&this.yScale&&this.props.editable&&this.state.trackOptions){const b=this.state.trackOptions.configComponent,y=this.state.trackOptions.track;v=O.createElement(b,{track:y,xScale:this.xScale,yScale:this.yScale,onCancel:()=>{this.setState({trackOptions:null})},onTrackOptionsChanged:_=>_,onSubmit:_=>{this.handleTrackOptionsChanged(this.state.trackOptions.track.uid,_),this.setState({trackOptions:null})}})}return O.createElement("div",{ref:b=>{this.divTiledPlot=b},className:["tiled-plot-div",Fo["tiled-plot"]].join(" "),style:{marginBottom:this.props.marginBottom,marginLeft:this.props.marginLeft,marginRight:this.props.marginRight,marginTop:this.props.marginTop}},p,g,d,m,v,this.getContextMenu(),this.props.draggingHappening&&this.getIdealizedTrackPositionsOverlay())}},{key:"addEventListeners",value:function(){this.eventListeners=[],this.eventListeners.forEach(r=>document.addEventListener(r.name,r.callback,!1))}},{key:"removeEventListeners",value:function(){this.eventListeners.forEach(r=>document.removeEventListener(r.name,r.callback))}}]),n}(O.Component);pM.defaultProps={isShowGlobalMousePosition:!1,pluginDataFetchers:{},pluginTracks:{},metaTracks:[],zoomable:!0};pM.propTypes={addTrackPosition:N.string,canvasElement:N.object,chooseTrackHandler:N.func,chromInfoPath:N.string,customDialog:N.array,closeCustomDialog:N.func,disableTrackMenu:N.bool,dragging:N.bool,draggingHappening:N.bool,editable:N.bool,getLockGroupExtrema:N.func,initialXDomain:N.array,initialYDomain:N.array,isShowGlobalMousePosition:N.bool,isValueScaleLocked:N.func,marginBottom:N.number.isRequired,marginLeft:N.number.isRequired,marginRight:N.number.isRequired,marginTop:N.number.isRequired,paddingBottom:N.number.isRequired,paddingLeft:N.number.isRequired,paddingRight:N.number.isRequired,paddingTop:N.number.isRequired,metaTracks:N.array,modal:N.object,mouseTool:N.string,onCloseTrack:N.func,onChangeTrackData:N.func,onChangeTrackType:N.func,onDataDomainChanged:N.func,onLockValueScale:N.func,onMouseMoveZoom:N.func,onNewTilesLoaded:N.func,onNoTrackAdded:N.func,onRangeSelection:N.func.isRequired,onScalesChanged:N.func,onTrackOptionsChanged:N.func,onTrackPositionChosen:N.func,onTracksAdded:N.func,onUnlockValueScale:N.func,onValueScaleChanged:N.func,onResizeTrack:N.func,overlays:N.array,openModal:N.func,pixiRenderer:N.object,pixiStage:N.object,pluginDataFetchers:N.object,pluginTracks:N.object,pubSub:N.object.isRequired,rangeSelection1dSize:N.array,rangeSelectionToInt:N.bool,registerDraggingChangedListener:N.func,removeDraggingChangedListener:N.func,setCentersFunction:N.func,svgElement:N.object,theme:N.symbol.isRequired,tracks:N.object,trackSourceServers:N.array,uid:N.string,viewOptions:N.object,xDomainLimits:N.array,yDomainLimits:N.array,zoomable:N.bool,zoomLimits:N.array,zoomToDataExtentOnInit:N.func};const oet=gd(OS(oh(pM)));var aet=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},set=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol?"symbol":typeof e},uet=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function cet(e){var t=void 0,n=void 0,r=void 0,i=e.ownerDocument,o=i.body,a=i&&i.documentElement;return t=e.getBoundingClientRect(),n=t.left,r=t.top,n-=a.clientLeft||o.clientLeft||0,r-=a.clientTop||o.clientTop||0,{left:n,top:r}}function eZ(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],r="scroll"+(t?"Top":"Left");if(typeof n!="number"){var i=e.document;n=i.documentElement[r],typeof n!="number"&&(n=i.body[r])}return n}function kP(e){return eZ(e)}function xP(e){return eZ(e,!0)}function tZ(e){var t=cet(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=kP(r),t.top+=xP(r),t}function het(e,t,n){var r="",i=e.ownerDocument,o=n||i.defaultView.getComputedStyle(e,null);return o&&(r=o.getPropertyValue(t)||o[t]),r}var fet=new RegExp("^("+uet+")(?!px)[a-z%]+$","i"),pet=/^(top|right|bottom|left)$/,BO="currentStyle",FO="runtimeStyle",ku="left",det="px";function met(e,t){var n=e[BO]&&e[BO][t];if(fet.test(n)&&!pet.test(t)){var r=e.style,i=r[ku],o=e[FO][ku];e[FO][ku]=e[BO][ku],r[ku]=t==="fontSize"?"1em":n||0,n=r.pixelLeft+det,r[ku]=i,e[FO][ku]=o}return n===""?"auto":n}var Uc=void 0;typeof window<"u"&&(Uc=window.getComputedStyle?het:met);function dM(e,t){for(var n=0;n<e.length;n++)t(e[n])}function rZ(e){return Uc(e,"boxSizing")==="border-box"}var get=["margin","border","padding"],IP=-1,yet=2,CP=1,vet=0;function bet(e,t,n){var r={},i=e.style,o=void 0;for(o in t)t.hasOwnProperty(o)&&(r[o]=i[o],i[o]=t[o]);n.call(e);for(o in t)t.hasOwnProperty(o)&&(i[o]=r[o])}function Ym(e,t,n){var r=0,i=void 0,o=void 0,a=void 0;for(o=0;o<t.length;o++)if(i=t[o],i)for(a=0;a<n.length;a++){var s=void 0;i==="border"?s=i+n[a]+"Width":s=i+n[a],r+=parseFloat(Uc(e,s))||0}return r}function Y0(e){return e!=null&&e==e.window}var Ra={};dM(["Width","Height"],function(e){Ra["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],Ra["viewport"+e](n))},Ra["viewport"+e]=function(t){var n="client"+e,r=t.document,i=r.body,o=r.documentElement,a=o[n];return r.compatMode==="CSS1Compat"&&a||i&&i[n]||a}});function lU(e,t,n){if(Y0(e))return t==="width"?Ra.viewportWidth(e):Ra.viewportHeight(e);if(e.nodeType===9)return t==="width"?Ra.docWidth(e):Ra.docHeight(e);var r=t==="width"?["Left","Right"]:["Top","Bottom"],i=t==="width"?e.offsetWidth:e.offsetHeight;Uc(e);var o=rZ(e),a=0;(i==null||i<=0)&&(i=void 0,a=Uc(e,t),(a==null||Number(a)<0)&&(a=e.style[t]||0),a=parseFloat(a)||0),n===void 0&&(n=o?CP:IP);var s=i!==void 0||o,u=i||a;if(n===IP)return s?u-Ym(e,["border","padding"],r):a;if(s){var c=n===yet?-Ym(e,["border"],r):Ym(e,["margin"],r);return u+(n===CP?0:c)}return a+Ym(e,get.slice(n),r)}var _et={position:"absolute",visibility:"hidden",display:"block"};function uU(e){var t=void 0,n=arguments;return e.offsetWidth!==0?t=lU.apply(void 0,n):bet(e,_et,function(){t=lU.apply(void 0,n)}),t}function Xf(e,t,n){var r=n;if((typeof t>"u"?"undefined":set(t))==="object"){for(var i in t)t.hasOwnProperty(i)&&Xf(e,i,t[i]);return}if(typeof r<"u"){typeof r=="number"&&(r+="px"),e.style[t]=r;return}return Uc(e,t)}dM(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Ra["outer"+t]=function(r,i){return r&&uU(r,e,i?vet:CP)};var n=e==="width"?["Left","Right"]:["Top","Bottom"];Ra[e]=function(r,i){if(i!==void 0){if(r){Uc(r);var o=rZ(r);return o&&(i+=Ym(r,["padding","border"],n)),Xf(r,e,i)}return}return r&&uU(r,e,IP)}});function Tet(e,t){Xf(e,"position")==="static"&&(e.style.position="relative");var n=tZ(e),r={},i=void 0,o=void 0;for(o in t)t.hasOwnProperty(o)&&(i=parseFloat(Xf(e,o))||0,r[o]=i+t[o]-n[o]);Xf(e,r)}var Eet=aet({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(typeof t<"u")Tet(e,t);else return tZ(e)},isWindow:Y0,each:dM,css:Xf,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var r=e.overflow;if(r)for(var n in e)e.hasOwnProperty(n)&&(t.overflow[n]=e.overflow[n]);return t},scrollLeft:function(e,t){if(Y0(e)){if(t===void 0)return kP(e);window.scrollTo(t,xP(e))}else{if(t===void 0)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(Y0(e)){if(t===void 0)return xP(e);window.scrollTo(kP(e),t)}else{if(t===void 0)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},Ra),Ar=Eet;function wet(e,t,n){n=n||{},t.nodeType===9&&(t=Ar.getWindow(t));var r=n.allowHorizontalScroll,i=n.onlyScrollIfNeeded,o=n.alignWithTop,a=n.alignWithLeft,s=n.offsetTop||0,u=n.offsetLeft||0,c=n.offsetBottom||0,l=n.offsetRight||0;r=r===void 0?!0:r;var f=Ar.isWindow(t),h=Ar.offset(e),p=Ar.outerHeight(e),d=Ar.outerWidth(e),m=void 0,g=void 0,v=void 0,b=void 0,y=void 0,_=void 0,T=void 0,S=void 0,E=void 0,I=void 0;f?(T=t,I=Ar.height(T),E=Ar.width(T),S={left:Ar.scrollLeft(T),top:Ar.scrollTop(T)},y={left:h.left-S.left-u,top:h.top-S.top-s},_={left:h.left+d-(S.left+E)+l,top:h.top+p-(S.top+I)+c},b=S):(m=Ar.offset(t),g=t.clientHeight,v=t.clientWidth,b={left:t.scrollLeft,top:t.scrollTop},y={left:h.left-(m.left+(parseFloat(Ar.css(t,"borderLeftWidth"))||0))-u,top:h.top-(m.top+(parseFloat(Ar.css(t,"borderTopWidth"))||0))-s},_={left:h.left+d-(m.left+v+(parseFloat(Ar.css(t,"borderRightWidth"))||0))+l,top:h.top+p-(m.top+g+(parseFloat(Ar.css(t,"borderBottomWidth"))||0))+c}),y.top<0||_.top>0?o===!0?Ar.scrollTop(t,b.top+y.top):o===!1?Ar.scrollTop(t,b.top+_.top):y.top<0?Ar.scrollTop(t,b.top+y.top):Ar.scrollTop(t,b.top+_.top):i||(o=o===void 0?!0:!!o,o?Ar.scrollTop(t,b.top+y.top):Ar.scrollTop(t,b.top+_.top)),r&&(y.left<0||_.left>0?a===!0?Ar.scrollLeft(t,b.left+y.left):a===!1?Ar.scrollLeft(t,b.left+_.left):y.left<0?Ar.scrollLeft(t,b.left+y.left):Ar.scrollLeft(t,b.left+_.left):i||(a=a===void 0?!0:!!a,a?Ar.scrollLeft(t,b.left+y.left):Ar.scrollLeft(t,b.left+_.left)))}var Aet=wet,Oet=Aet;const ket=Gi(Oet);function yE(){return yE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yE.apply(this,arguments)}function xet(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iet(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pet(r.key),r)}}function Cet(e,t,n){return t&&Iet(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pet(e){var t=Det(e,"string");return typeof t=="symbol"?t:String(t)}function Det(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ret(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PP(e,t)}function PP(e,t){return PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},PP(e,t)}function Net(e){var t=jet();return function(){var n=vE(e),r;if(t){var i=vE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Met(this,r)}}function Met(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Let(e)}function Let(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jet(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vE(e){return vE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vE(e)}const fm=[];let mM=function(e){Ret(n,e);var t=Net(n);function n(r){var i;return xet(this,n),i=t.call(this,r),i.state={highlightedIndex:null,menuTop:0,menuLeft:0,menuWidth:0,isOpen:!1},i.keyDownHandlers={ArrowDown(o){o.preventDefault();const a=this.getFilteredItems().length;if(!a)return;const{highlightedIndex:s}=this.state,u=s===null||s===a-1?0:s+1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:u,isOpen:!0})},ArrowUp(o){o.preventDefault();const a=this.getFilteredItems().length;if(!a)return;const{highlightedIndex:s}=this.state,u=s===0||s===null?a-1:s-1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:u,isOpen:!0})},Enter(o){if(this.state.isOpen!==!1)if(this.state.highlightedIndex===null)this.setState({isOpen:!1},()=>{this.inputEl.select()});else{o.preventDefault();const a=this.getFilteredItems()[this.state.highlightedIndex],s=this.props.getItemValue(a);this.setState({isOpen:!1,highlightedIndex:null},()=>{this.inputEl.setSelectionRange(s.length,s.length),this.props.onSelect(s,a)})}},Escape(){this.setState({highlightedIndex:null,isOpen:!1})}},i}return Cet(n,[{key:"getInitialState",value:function(){return{isOpen:!1,highlightedIndex:null}}},{key:"UNSAFE_componentWillMount",value:function(){this._ignoreBlur=!1,this._performAutoCompleteOnUpdate=!1,this._performAutoCompleteOnKeyUp=!1}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){this._performAutoCompleteOnUpdate=!0,(this.props.items!==r.items||this.state.highlightedIndex>=r.items.length)&&this.setState({highlightedIndex:null})}},{key:"componentDidUpdate",value:function(r,i){this.state.isOpen===!0&&i.isOpen===!1&&this.setMenuPositions(),this.state.isOpen&&this._performAutoCompleteOnUpdate&&(this._performAutoCompleteOnUpdate=!1,this.maybeAutoCompleteText()),this.maybeScrollItemIntoView(),i.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen,this.inputEl)}},{key:"maybeScrollItemIntoView",value:function(){if(this.state.isOpen===!0&&this.state.highlightedIndex!==null){const r=this.refs[`item-${this.state.highlightedIndex}`],i=this.refs.menu;r&&ket(Bg.findDOMNode(r),Bg.findDOMNode(i),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(r){this.keyDownHandlers[r.key]?this.keyDownHandlers[r.key].call(this,r):this.setState({highlightedIndex:null,isOpen:!0})}},{key:"handleChange",value:function(r){this._performAutoCompleteOnKeyUp=!0,this.props.onChange(r,r.target.value)}},{key:"handleKeyUp",value:function(){this._performAutoCompleteOnKeyUp&&(this._performAutoCompleteOnKeyUp=!1,this.maybeAutoCompleteText())}},{key:"getFilteredItems",value:function(){let r=this.props.items;return this.props.shouldItemRender&&(r=r.filter(i=>this.props.shouldItemRender(i,this.props.value))),this.props.sortItems&&r.sort((i,o)=>this.props.sortItems(i,o,this.props.value)),r}},{key:"maybeAutoCompleteText",value:function(){if(!this.props.autoHighlight||this.props.value==="")return;const{highlightedIndex:r}=this.state,i=this.getFilteredItems();if(i.length===0)return;const o=r!==null?i[r]:i[0];this.props.getItemValue(o).toLowerCase().indexOf(this.props.value.toLowerCase())===0&&r===null&&this.setState({highlightedIndex:0})}},{key:"setMenuPositions",value:function(){const r=this.inputEl,i=r.getBoundingClientRect(),o=globalThis.window.getComputedStyle(r),a=parseInt(o.marginBottom,10)||0,s=parseInt(o.marginLeft,10)||0,u=parseInt(o.marginRight,10)||0;this.setState({menuTop:i.bottom+a,menuLeft:i.left+s,menuWidth:i.width+s+u})}},{key:"highlightItemFromMouse",value:function(r){this.setState({highlightedIndex:r})}},{key:"selectItemFromMouse",value:function(r){const i=this.props.getItemValue(r);this.setState({isOpen:!1,highlightedIndex:null},()=>{this.props.onSelect(i,r),this.inputEl.focus()})}},{key:"setIgnoreBlur",value:function(r){this._ignoreBlur=r}},{key:"renderMenu",value:function(){const r=this.getFilteredItems().map((a,s)=>{const u=this.props.renderItem(a,this.state.highlightedIndex===s,{cursor:"default"});return O.cloneElement(u,{onMouseDown:()=>this.setIgnoreBlur(!0),onMouseEnter:()=>this.highlightItemFromMouse(s),onClick:()=>this.selectItemFromMouse(a),ref:`item-${s}`})}),i={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth};if(!r.length)return null;const o=this.props.renderMenu(r,this.props.value,i);return O.cloneElement(o,{ref:"menu"})}},{key:"handleInputBlur",value:function(){this.props.onFocus&&this.props.onFocus(),!this._ignoreBlur&&this.setState({isOpen:!1,highlightedIndex:null})}},{key:"handleInputFocus",value:function(){if(this.props.onFocus&&this.props.onFocus(!0),this._ignoreBlur){this.setIgnoreBlur(!1);return}this._ignoreClick=!0,this.setState({isOpen:!0})}},{key:"isInputFocused",value:function(){return this.inputEl.ownerDocument&&this.inputEl===this.inputEl.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&this.state.isOpen===!1?this.setState({isOpen:!0}):this.state.highlightedIndex!==null&&!this._ignoreClick&&this.selectItemFromMouse(this.getFilteredItems()[this.state.highlightedIndex]),this._ignoreClick=!1}},{key:"composeEventHandlers",value:function(r,i){return i?o=>{r(o),i(o)}:r}},{key:"render",value:function(){this.props.debug&&fm.push({id:fm.length,state:this.state});const{inputProps:r}=this.props;return O.createElement("div",yE({style:{...this.props.wrapperStyle}},this.props.wrapperProps),O.createElement("input",yE({},r,{ref:i=>{this.inputEl=i},"aria-autocomplete":"list",autoComplete:"off",onBlur:this.composeEventHandlers(this.handleInputBlur.bind(this),r.onBlur&&r.onBlur.bind(this)),onChange:this.handleChange.bind(this),onClick:this.composeEventHandlers(this.handleInputClick.bind(this),r.onClick&&r.onClick.bind(this)),onFocus:this.composeEventHandlers(this.handleInputFocus.bind(this),r.onFocus&&r.onFocus.bind(this)),onKeyDown:this.composeEventHandlers(this.handleKeyDown.bind(this),r.onKeyDown&&r.onKeyDown.bind(this)),onKeyUp:this.composeEventHandlers(this.handleKeyUp.bind(this),r.onKeyUp&&r.onKeyUp.bind(this)),role:"combobox",value:this.props.value})),("open"in this.props?this.props.open:this.state.isOpen)&&this.renderMenu(),this.props.debug&&O.createElement("pre",{style:{marginLeft:300}},JSON.stringify(fm.slice(fm.length-5,fm.length),null,2)))}}]),n}(O.Component);mM.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},onChange(){},onSelect(){},renderMenu(e,t,n){return O.createElement("div",{style:{...n,...this.menuStyle}},e)},shouldItemRender(){return!0},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,onMenuVisibilityChange(){}};mM.propTypes={autoHighlight:N.bool,debug:N.bool,getItemValue:N.func.isRequired,inputProps:N.object,items:N.array,menuStyle:N.object,onChange:N.func,onFocus:N.func,onMenuVisibilityChange:N.func,onSelect:N.func,open:N.bool,renderItem:N.func.isRequired,renderMenu:N.func,shouldItemRender:N.func,sortItems:N.func,value:N.any,wrapperProps:N.object,wrapperStyle:N.object};const Gh={"genome-position-search":"_genome-position-search_1l2sx_1","genome-position-search-focus":"_genome-position-search-focus_1l2sx_2","genome-position-search-bar":"_genome-position-search-bar_1l2sx_16","genome-position-search-dark":"_genome-position-search-dark_1l2sx_34","genome-position-search-bar-button":"_genome-position-search-bar-button_1l2sx_38","genome-position-search-bar-suggestions":"_genome-position-search-bar-suggestions_1l2sx_83"};function Bet(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fet(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Het(r.key),r)}}function Get(e,t,n){return t&&Fet(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Het(e){var t=Uet(e,"string");return typeof t=="symbol"?t:String(t)}function Uet(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zet(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DP(e,t)}function DP(e,t){return DP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},DP(e,t)}function Vet(e){var t=Xet();return function(){var n=bE(e),r;if(t){var i=bE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Yet(this,r)}}function Yet(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nZ(e)}function nZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xet(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bE(e){return bE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bE(e)}let iZ=function(e){zet(n,e);var t=Vet(n);function n(r){var i;return Bet(this,n),i=t.call(this,r),i.mounted=!1,i.uid=zt.nice(),i.chromInfo=null,i.searchField=null,i.autocompleteMenu=null,i.xScale=null,i.yScale=null,i.prevParts=[],i.props.registerViewportChangedListener(i.scalesChanged.bind(nZ(i))),i.menuPosition={left:0,top:0},i.positionText="chr4:190,998,876-191,000,255",i.state={genes:[],isFocused:!1,autocompleteServer:i.props.autocompleteServer,autocompleteId:i.props.autocompleteId,availableAssemblies:[],selectedAssembly:null},i.styles={item:{padding:"2px 6px",cursor:"default"},highlightedItem:{color:"white",background:"hsl(200, 50%, 50%)",padding:"2px 6px",cursor:"default"},menu:{border:"solid 1px #ccc"}},i.availableAutocompletes={},i.props.autocompleteId&&(i.availableAutocompletes[i.props.chromInfoId]=new Set([{server:i.props.autocompleteServer,acId:i.props.autocompleteId}])),i.availableChromSizes={},i}return Get(n,[{key:"componentDidMount",value:function(){this.mounted=!0,Wt(this.autocompleteMenu.inputEl).on("keypress",this.autocompleteKeyPress.bind(this)),this.findAvailableAutocompleteSources(),this.findAvailableChromSizes(),this.props.chromInfoPath&&(this.searchPosition=!0,Bs(this.props.chromInfoPath,r=>{if(!r){this.searchPosition=null;return}this.chromInfo=r,this.searchField=new Lp(this.chromInfo),this.setPositionText()})),this.setPositionText()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.removeViewportChangedListener()}},{key:"onAutocompleteChange",value:function(r,i){this.positionText=i,this.setState({value:i,loading:!0}),this.changedPart=null;const o=i.split(/ /);let a=0;const s=[];let u=!1;for(let c=0;c<o.length;c++){const l=o[c].split(/-/);for(let f=0;f<l.length;f++){if(a+=1,s.push(l[f]),f===0?u=!0:u=!1,f===this.prevParts.length){this.changedPart=a-1;break}if(l[f]!==this.prevParts[f]){this.changedPart=a-1;break}}}if(this.prevParts=s,!!(this.state.autocompleteServer&&this.state.autocompleteId)&&this.changedPart!==null){this.setState({loading:!0});let c=`${this.state.autocompleteServer}/suggest/`;c+=`?d=${this.state.autocompleteId}&ac=${s[this.changedPart].toLowerCase()}`,et.json(c,(l,f)=>{if(l)this.setState({loading:!1,genes:[]});else if(this.changedPart>0&&!u){const h=`${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${s[this.changedPart-1].toLowerCase()}-${s[this.changedPart].toLowerCase()}`;et.json(h,(p,d)=>{p?this.setState({loading:!1,genes:f}):this.setState({loading:!1,genes:d.concat(f)})},this.props.pubSub)}else this.setState({loading:!1,genes:f})},this.props.pubSub)}}},{key:"setAvailableAssemblies",value:function(){const r=new Set(ho(this.availableChromSizes)),i=new Set([...r]);this.gpsbForm&&this.setState({availableAssemblies:[...i]})}},{key:"setSelectedAssembly",value:function(r){if(!this.mounted||!this.availableChromSizes[r])return;const i=[...this.availableChromSizes[r]][0];this.setState({autocompleteServer:i.server});const{server:o}=i;if(this.availableAutocompletes[r]){const a=[...this.availableAutocompletes[r]][0].acId;this.props.onSelectedAssemblyChanged(r,a,o),this.gpsbForm&&this.setState({autocompleteId:a})}else this.props.onSelectedAssemblyChanged(r,null,o),this.gpsbForm&&this.setState({autocompleteId:null});this.fetchChromInfo(i.uuid,i.server)}},{key:"setPositionText",value:function(){if(!this.mounted||!this.searchField)return;const r=this.searchField.scalesToPositionText(this.xScale,this.yScale,this.props.twoD);this.prevParts=r.split(/[ -]/),this.gpsbForm&&(this.positionText=r,this.origPositionText=r,this.autocompleteMenu.inputEl.value=r)}},{key:"scalesChanged",value:function(r,i){this.xScale=r,this.yScale=i,this.setPositionText()}},{key:"findAvailableChromSizes",value:function(){this.props.trackSourceServers&&this.props.trackSourceServers.forEach(r=>{et.json(`${r}/available-chrom-sizes/`,(i,o)=>{i?console.error(i):(o.results.forEach(a=>{a.coordSystem in this.availableChromSizes||(this.availableChromSizes[a.coordSystem]=new Set),this.availableChromSizes[a.coordSystem].add({server:r,uuid:a.uuid}),this.setAvailableAssemblies()}),this.searchField||this.fetchChromInfo(this.props.chromInfoId in this.availableChromSizes?[...this.availableChromSizes[this.props.chromInfoId]][0].uuid:this.props.chromInfoId,this.props.chromInfoId in this.availableChromSizes?[...this.availableChromSizes[this.props.chromInfoId]][0].server:this.props.chromInfoServer))},this.props.pubSub)})}},{key:"findAvailableAutocompleteSources",value:function(){this.props.trackSourceServers&&this.props.trackSourceServers.forEach(r=>{et.json(`${r}/tilesets/?limit=100&dt=gene-annotation`,(i,o)=>{i?console.error(i):(o.results.forEach(a=>{a.coordSystem in this.availableAutocompletes||(this.availableAutocompletes[a.coordSystem]=new Set),this.availableAutocompletes[a.coordSystem].add({server:r,acId:a.uuid}),this.setAvailableAssemblies()}),this.state.autocompleteId||this.gpsbForm&&this.availableAutocompletes[this.props.chromInfoId]&&this.setState({autocompleteId:[...this.availableAutocompletes[this.props.chromInfoId]][0].acId}))},this.props.pubSub)})}},{key:"fetchChromInfo",value:function(r,i){Bs(`${i}/chrom-sizes/?id=${r}`,o=>{o&&(et.json(`${i}/tileset_info/?d=${r}`,(a,s)=>{a||this.gpsbForm&&this.setState({selectedAssembly:s[r].coordSystem})},this.props.pubSub),this.chromInfo=o,this.searchField=new Lp(this.chromInfo),this.setPositionText())},this.props.pubSub)}},{key:"autocompleteKeyPress",value:function(r){r.keyCode===13&&this.buttonClick()}},{key:"genePositionToSearchBarText",value:function(r){}},{key:"replaceGenesWithLoadedPositions",value:function(r){const i=this.positionText,o=i.split(" ");let a=!1;for(let u=0;u<o.length;u++){const c=o[u].split("-");let l=0,f=0,h="";for(;l<c.length;){for(f=c.length;f>l;){const p=c.slice(l,f).join("-");if(r[p.toLowerCase()]){const d=r[p.toLowerCase()],m=Math.floor((d.txEnd-d.txStart)/4);l===0&&f<c.length?h=`${d.chr}:${d.txStart-m}`:l===0&&f===c.length?h=`${d.chr}:${d.txStart-m}-${d.txEnd+m}`:h+=`- ${d.chr}:${d.txEnd+m}`,a=!0;break}else f===l+1&&(h.length&&(h+="-"),h+=p);f-=1}l=f+1}o[u]=h}const s=o.join(" ");return this.prevParts=s.split(/[ -]/),this.positionText=s,this.setState({value:s}),a?i:null}},{key:"replaceGenesWithPositions",value:function(r){const i=this.positionText.split(/[ -]/),o=[];for(let a=0;a<i.length;a++){if(i[a].length===0)continue;const s=this.searchField.parsePosition(i[a])[2];if(s===null||Number.isNaN(+s)){const u=`${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${i[a].toLowerCase()}`;o.push(et.json(u,Yo,this.props.pubSub))}}Promise.all(o).then(a=>{if(a){const s={};for(let c=0;c<a.length;c++)if(a[c][0])for(let l=0;l<a[c].length;l++)s[a[c][l].geneName.toLowerCase()]=a[c][l];const u=this.replaceGenesWithLoadedPositions(s);r(u)}}).catch(a=>console.error(a))}},{key:"buttonClick",value:function(){this.setState({genes:[]}),this.replaceGenesWithPositions(r=>{const i=this.positionText;if(this.searchField!==null){const o=this.searchField.searchPosition(i),a=o[0];let s=o[1];if(!a){this.setPositionText();return}if(a&&(Number.isNaN(+a[0])||Number.isNaN(+a[1]))||s&&(Number.isNaN(+s[0])||Number.isNaN(+s[1])))return;s||(s=a);const u=this.xScale.copy().domain(a),c=this.yScale.copy().domain(s),[l,f,h]=un(u,c);r&&this.props.onGeneSearch({geneSymbol:r,range:a,centerX:l,centerY:f}),this.props.setCenters(l,f,h,f9)}})}},{key:"searchFieldSubmit",value:function(){this.buttonClick()}},{key:"pathJoin",value:function(r,i){const o=i||"/",a=new RegExp(`${o}{1,}`,"g");return r.join(o).replace(a,o)}},{key:"geneSelected",value:function(r,i){const o=this.positionText.split(" ");let a=this.changedPart;for(let s=0;s<o.length;s++){const u=o[s].split("-"),c=i.geneName.split("-");if(a>u.length-1)a-=u.length;else{if(u[a]=i.geneName,c.length===2&&a>0&&u[a-1].toLowerCase()===c[0].toLowerCase()){const l=u.slice(0,a-1);l.push(c.join("-")),a<u.length-1&&l.push(u.slice(a+1)),o[s]=l.join("-")}else o[s]=u.join("-");break}}this.prevParts=o.join(" ").split(/[ -]/),this.positionText=o.join(" "),this.setState({value:o.join(" "),genes:[]})}},{key:"handleMenuVisibilityChange",value:function(r,i){const o=i.getBoundingClientRect();this.menuPosition={left:o.left,top:o.top+o.height},this.setState({menuOpened:r})}},{key:"handleRenderMenu",value:function(r){return O.createElement(Xl,null,O.createElement("div",{className:Gh["genome-position-search-bar-suggestions"],style:{left:this.menuPosition.left,top:this.menuPosition.top}},r))}},{key:"handleAssemblySelectEvt",value:function(r){this.handleAssemblySelect(r.target.value)}},{key:"handleAssemblySelect",value:function(r){this.setSelectedAssembly(r),this.setState({selectedAssembly:r})}},{key:"focusHandler",value:function(r){this.setState({isFocused:r})}},{key:"render",value:function(){const r=this.state.availableAssemblies.map(i=>O.createElement("option",{key:i,value:i},i));return O.createElement("div",{ref:i=>{this.gpsbForm=i},className:ir({[Gh["genome-position-search-focus"]]:this.state.isFocused,[Gh["genome-position-search"]]:!this.state.isFocused,[Gh["genome-position-search-dark"]]:this.props.theme===wr})},!this.props.hideAvailableAssemblies&&O.createElement("select",{ref:i=>{this.assemblyPickButton=i},className:Gh["genome-position-search-bar-button"],id:this.uid,onChange:this.handleAssemblySelectEvt.bind(this),value:this.state.selectedAssembly||void 0},r),O.createElement(mM,{ref:i=>{this.autocompleteMenu=i},getItemValue:i=>i.geneName,inputProps:{className:Gh["genome-position-search-bar"],title:"Current location: enter a symbol or location to change the position of the current view"},items:this.state.genes,menuStyle:{position:"absolute",left:this.menuPosition.left,top:this.menuPosition.top,border:"1px solid black"},onChange:this.onAutocompleteChange.bind(this),onFocus:this.focusHandler.bind(this),onMenuVisibilityChange:this.handleMenuVisibilityChange.bind(this),onSelect:(i,o)=>this.geneSelected(i,o),onSubmit:this.searchFieldSubmit.bind(this),renderItem:(i,o)=>O.createElement("div",{key:i.refseqid,id:i.refseqid,style:o?this.styles.highlightedItem:this.styles.item},i.geneName),renderMenu:this.handleRenderMenu.bind(this),value:this.state.selectedAssembly?this.positionText:"No valid assembly selected",wrapperStyle:{width:"100%"}}),O.createElement(b9,{onClick:this.buttonClick.bind(this),theStyle:"multitrack-header-icon"}))}}]),n}(O.Component);iZ.propTypes={autocompleteId:N.string,autocompleteServer:N.string,chromInfoId:N.string,chromInfoServer:N.string,chromInfoPath:N.string,hideAvailableAssemblies:N.bool,isFocused:N.bool,pubSub:N.object,onFocus:N.func,onGeneSearch:N.func,onSelectedAssemblyChanged:N.func,registerViewportChangedListener:N.func,removeViewportChangedListener:N.func,setCenters:N.func,theme:N.symbol.isRequired,trackSourceServers:N.array,twoD:N.bool};const Wet=gd(oh(iZ)),qet={"export-link-dialog-wrapper":"_export-link-dialog-wrapper_p9gxw_1"};function $et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ket(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zet(r.key),r)}}function Qet(e,t,n){return t&&Ket(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zet(e){var t=Jet(e,"string");return typeof t=="symbol"?t:String(t)}function Jet(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ett(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RP(e,t)}function RP(e,t){return RP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},RP(e,t)}function ttt(e){var t=itt();return function(){var n=_E(e),r;if(t){var i=_E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rtt(this,r)}}function rtt(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ntt(e)}function ntt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function itt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _E(e){return _E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_E(e)}let gM=function(e){ett(n,e);var t=ttt(n);function n(){return $et(this,n),t.apply(this,arguments)}return Qet(n,[{key:"render",value:function(){return O.createElement(vv,{okayOnly:!0,okayTitle:"Done",onOkay:this.props.onDone,title:"Share view link"},O.createElement("div",{className:qet["export-link-dialog-wrapper"]},O.createElement("input",{ref:r=>{r&&(this.input=r,r.focus(),r.select())},onClick:r=>{r.target.select()},placeholder:"Generating the link...",readOnly:!0,value:this.props.url}),O.createElement(Is,{onClick:r=>{this.input.select(),document.execCommand("copy")}},"Copy")))}}]),n}(O.Component);gM.defaultProps={onDone:()=>{},url:""};gM.propTypes={onDone:N.func,url:N.string};function ott(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function att(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ltt(r.key),r)}}function stt(e,t,n){return t&&att(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ltt(e){var t=utt(e,"string");return typeof t=="symbol"?t:String(t)}function utt(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ctt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NP(e,t)}function NP(e,t){return NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},NP(e,t)}function htt(e){var t=dtt();return function(){var n=TE(e),r;if(t){var i=TE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ftt(this,r)}}function ftt(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ptt(e)}function ptt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dtt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function TE(e){return TE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},TE(e)}let oZ=function(e){ctt(n,e);var t=htt(n);function n(r){var i;return ott(this,n),i=t.call(this,r),i.state={submenuShown:!1},i}return stt(n,[{key:"getConfigureViewMenu",value:function(r,i){const o=["backgroundColor"],a={},s={};for(const u of o)if(u in Object.keys(Rn)&&(a[u]={name:Rn[u].name},Rn[u].inlineOptions))for(const c in Rn[u].inlineOptions){const l=Rn[u].inlineOptions[c];a[u].children||(a[u].children={});const f={name:l.name,value:l.value};f.handler=()=>{s[u]=l.value,this.props.onOptionsChanged(s)},a[u].children[c]=f}return O.createElement(vP,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:a,orientation:this.state.orientation,parentBbox:i,position:r,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const r=this.state.submenuSourceBbox,i=this.state.orientation==="left"?{left:this.state.left,top:r.top}:{left:this.state.left+r.width+7,top:r.top};return this.state.submenuShown.option==="options"?this.getConfigureViewMenu(i,r):O.createElement("div",null)}return O.createElement("div",null)}},{key:"render",value:function(){return O.createElement("div",{ref:r=>{this.div=r},className:ir(Tt["context-menu"],{[Tt["context-menu-dark"]]:this.props.theme===wr}),"data-menu-type":"ConfigViewMenu",style:{left:this.state.left,top:this.state.top}},O.createElement(It,{onClick:r=>this.props.onTogglePositionSearchBox(r)},"Toggle position search box"),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:r=>this.props.onZoomToData(r)},"Zoom to data extent"),O.createElement(It,{onClick:r=>this.props.onClearView(r)},"Clear View"),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:r=>this.props.onYankZoom(r)},"Take zoom from"),O.createElement(It,{onClick:r=>this.props.onYankLocation(r)},"Take location from"),O.createElement(It,{onClick:r=>this.props.onYankZoomAndLocation(r)},"Take zoom and location from"),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:this.props.onLockZoom},"Lock zoom with"),O.createElement(It,{onClick:this.props.onLockLocation},"Lock location with"),O.createElement(It,{onClick:this.props.onLockZoomAndLocation},"Lock zoom and location with"),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:this.props.onTakeAndLockZoomAndLocation},"Take and lock zoom and location with"),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:r=>this.props.onUnlockZoom(r)},"Unlock zoom"),O.createElement(It,{onClick:r=>this.props.onUnlockLocation(r)},"Unlock location"),O.createElement(It,{onClick:r=>this.props.onUnlockZoomAndLocation(r)},"Unlock zoom and location"),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:r=>this.props.onProjectViewport(r)},"Show this viewport on"),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:r=>this.props.onEditViewConfig(r)},"Edit view config"),O.createElement("hr",{className:Tt["context-menu-hr"]}),O.createElement(It,{onClick:()=>this.props.onExportSVG()},"Export views as SVG"),O.createElement(It,{onClick:()=>this.props.onExportPNG()},"Export views as PNG"),O.createElement(It,{onClick:()=>this.props.onExportViewAsJSON()},"Export views as JSON"),O.createElement(It,{onClick:()=>this.props.onExportViewAsLink()},"Export views as Link"),this.getSubmenu())}}]),n}(fu);oZ.propTypes={onEditViewConfig:N.func.isRequired,onExportSVG:N.func,onExportPNG:N.func,onExportViewAsJSON:N.func,onExportViewAsLink:N.func,onLockLocation:N.func,onLockZoom:N.func,onLockZoomAndLocation:N.func,onProjectViewport:N.func,onTakeAndLockZoomAndLocation:N.func,onTogglePositionSearchBox:N.func,onUnlockLocation:N.func,onUnlockZoom:N.func,onUnlockZoomAndLocation:N.func,onYankLocation:N.func,onYankZoom:N.func,onYankZoomAndLocation:N.func,onZoomToData:N.func,theme:N.symbol};const lo={"add-track-position-table":"_add-track-position-table_wdy5w_1","add-track-position-table-dark":"_add-track-position-table-dark_wdy5w_7","add-track-position-other":"_add-track-position-other_wdy5w_11","add-track-position-top-center":"_add-track-position-top-center_wdy5w_15","add-track-position-middle-left":"_add-track-position-middle-left_wdy5w_30","add-track-position-middle-right":"_add-track-position-middle-right_wdy5w_45","add-track-position-middle-middle":"_add-track-position-middle-middle_wdy5w_60","add-track-position-bottom-middle":"_add-track-position-bottom-middle_wdy5w_71","add-track-position-span":"_add-track-position-span_wdy5w_86"};function aZ(e){return O.createElement("div",null,O.createElement("div",{className:lo["add-track-position-span"]},"Add Track..."),O.createElement("table",{className:ir(lo["add-track-position-table"],{[lo["add-track-position-table-dark"]]:e.theme===wr})},O.createElement("tbody",null,O.createElement("tr",{style:{height:"30px"}},O.createElement("td",{"aria-hidden":"true",className:lo["add-track-position-other"]}),O.createElement("td",{className:lo["add-track-position-top-center"],onClick:()=>e.onTrackPositionChosen("top")},"top"),O.createElement("td",{"aria-hidden":"true",className:lo["add-track-position-other"]})),O.createElement("tr",{style:{height:"80px"}},O.createElement("td",{className:lo["add-track-position-middle-left"],onClick:()=>e.onTrackPositionChosen("left")},"left"),O.createElement("td",{className:lo["add-track-position-middle-middle"],onClick:()=>e.onTrackPositionChosen("center")},"center"),O.createElement("td",{className:lo["add-track-position-middle-right"],onClick:()=>e.onTrackPositionChosen("right")},"right")),O.createElement("tr",{style:{height:"30px"}},O.createElement("td",{"aria-hidden":"true",className:lo["add-track-position-other"]}),O.createElement("td",{className:lo["add-track-position-bottom-middle"],onClick:()=>e.onTrackPositionChosen("bottom")},"bottom"),O.createElement("td",{"aria-hidden":"true",className:lo["add-track-position-other"]})))))}aZ.propTypes={onTrackPositionChosen:N.func.isRequired,theme:N.symbol.isRequired};const mtt=oh(aZ);function gtt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ytt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,btt(r.key),r)}}function vtt(e,t,n){return t&&ytt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function btt(e){var t=_tt(e,"string");return typeof t=="symbol"?t:String(t)}function _tt(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ttt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MP(e,t)}function MP(e,t){return MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},MP(e,t)}function Ett(e){var t=wtt();return function(){var n=EE(e),r;if(t){var i=EE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Stt(this,r)}}function Stt(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sZ(e)}function sZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wtt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function EE(e){return EE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},EE(e)}let yM=function(e){Ttt(n,e);var t=Ett(n);function n(r){var i;return gtt(this,n),i=t.call(this,r),i.configImg=null,i.plusImg=null,i.state={addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null,configMenuUid:null,configMenuPosition:null,isFocused:!1,width:-1},i.handleTrackPositionChosenBound=i.handleTrackPositionChosen.bind(sZ(i)),i}return vtt(n,[{key:"componentDidMount",value:function(){this.setState({width:this.el.clientWidth})}},{key:"checkWidth",value:function(){const r=this.el.clientWidth;r!==this.state.width&&this.setState({width:r})}},{key:"handleConfigMenuOpened",value:function(r){this.setState({configMenuUid:r,configMenuPosition:this.configImg.getBoundingClientRect()})}},{key:"handleAddTrackPositionMenuOpened",value:function(r){this.setState({addTrackPositionMenuUid:r,addTrackPositionMenuPosition:this.plusImg.getBoundingClientRect()})}},{key:"handleTrackPositionChosen",value:function(r){this.props.onTrackPositionChosen(r),this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},{key:"render",value:function(){let r=null,i=null;this.state.addTrackPositionMenuPosition&&(i=O.createElement(Xl,{onMenuClosed:()=>{this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},O.createElement(fu,{orientation:"left",position:this.state.addTrackPositionMenuPosition,theme:this.props.theme},O.createElement(mtt,{onTrackPositionChosen:this.handleTrackPositionChosenBound})))),this.state.configMenuUid&&(r=O.createElement(Xl,{onMenuClosed:()=>this.setState({configMenuUid:null})},O.createElement(oZ,{onClearView:()=>{this.setState({configMenuUid:null}),this.props.onClearView()},onEditViewConfig:()=>{this.setState({configMenuUid:null}),this.props.onEditViewConfig(this.state.configMenuUid)},onExportPNG:()=>{this.setState({configMenuUid:null}),this.props.onExportPNG()},onExportSVG:()=>{this.setState({configMenuUid:null}),this.props.onExportSVG()},onExportViewAsJSON:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsJSON()},onExportViewAsLink:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsLink()},onLockLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockLocation(this.state.configMenuUid)},onLockZoom:()=>{this.setState({configMenuUid:null}),this.props.onLockZoom(this.state.configMenuUid)},onLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockZoomAndLocation(this.state.configMenuUid)},onOptionsChanged:u=>{this.props.onViewOptionsChanged(u),this.setState({configMenuUid:null})},onProjectViewport:()=>{this.setState({configMenuUid:null}),this.props.onProjectViewport(this.state.configMenuUid)},onTakeAndLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onTakeAndLockZoomAndLocation(this.state.configMenuUid)},onTogglePositionSearchBox:()=>{this.setState({configMenuUid:null}),this.props.onTogglePositionSearchBox(this.state.configMenuUid)},onUnlockLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockLocation(this.state.configMenuUid)},onUnlockZoom:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoom(this.state.configMenuUid)},onUnlockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoomAndLocation(this.state.configMenuUid)},onYankLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankLocation(this.state.configMenuUid)},onYankZoom:()=>{this.setState({configMenuUid:null}),this.props.onYankZoom(this.state.configMenuUid)},onYankZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankZoomAndLocation(this.state.configMenuUid)},onZoomToData:()=>{this.setState({configMenuUid:null}),this.props.onZoomToData(this.state.configMenuUid)},orientation:"left",position:this.state.configMenuPosition,theme:this.props.theme})));const o=this.props.getGenomePositionSearchBox(this.state.isFocused,u=>{this.setState({isFocused:u})}),a=ir(this.state.isFocused?co["multitrack-header-focus"]:co["multitrack-header"],{[co["multitrack-header-dark"]]:this.props.theme===wr}),s=this.state.width<=p9?co["multitrack-header-icon-squeazed"]:co["multitrack-header-icon"];return O.createElement("div",{ref:u=>{this.el=u},className:a},O.createElement("div",{className:co["multitrack-header-left"]},this.props.mouseTool===vo&&O.createElement("svg",{className:ir(co["mouse-tool-selection"],s),title:"Selection tool active"},O.createElement("use",{xlinkHref:"#select"})),O.createElement("div",{className:co["multitrack-header-grabber"],title:"Drag to move the view"},O.createElement("div",null),O.createElement("div",null),O.createElement("div",null)),this.state.width>d9&&O.createElement("div",{className:co["multitrack-header-search"]},this.props.isGenomePositionSearchBoxVisible&&o)),O.createElement("nav",{className:co["multitrack-header-nav-list"]},O.createElement("svg",{className:s,onClick:this.props.onAddView},O.createElement("title",null,"Add new view (clone this view)"),O.createElement("use",{xlinkHref:"#copy"})),O.createElement("svg",{ref:u=>{this.configImg=u},className:s,onClick:()=>this.handleConfigMenuOpened(this.props.viewUid)},O.createElement("title",null,"Configure this view"),O.createElement("use",{xlinkHref:"#cog"})),O.createElement("svg",{ref:u=>{this.plusImg=u},className:s,onClick:()=>this.handleAddTrackPositionMenuOpened(this.props.viewUid)},O.createElement("title",null,"Add Track"),O.createElement("use",{xlinkHref:"#plus"})),O.createElement("svg",{className:s,onClick:this.props.onCloseView},O.createElement("title",null,"Close View"),O.createElement("use",{xlinkHref:"#cross"}))),r,i)}}]),n}(O.Component);yM.defaultProps={isGenomePositionSearchBoxVisible:!1};yM.propTypes={getGenomePositionSearchBox:N.func.isRequired,isGenomePositionSearchBoxVisible:N.bool,mouseTool:N.string.isRequired,onAddView:N.func.isRequired,onClearView:N.func.isRequired,onCloseView:N.func.isRequired,onEditViewConfig:N.func.isRequired,onExportSVG:N.func.isRequired,onExportPNG:N.func.isRequired,onExportViewsAsJSON:N.func.isRequired,onExportViewsAsLink:N.func.isRequired,onLockLocation:N.func.isRequired,onLockZoom:N.func.isRequired,onLockZoomAndLocation:N.func.isRequired,onProjectViewport:N.func.isRequired,onTakeAndLockZoomAndLocation:N.func.isRequired,onTogglePositionSearchBox:N.func.isRequired,onTrackPositionChosen:N.func.isRequired,onUnlockLocation:N.func.isRequired,onUnlockZoom:N.func.isRequired,onUnlockZoomAndLocation:N.func.isRequired,onViewOptionsChanged:N.func.isRequired,onYankLocation:N.func.isRequired,onYankZoom:N.func.isRequired,onYankZoomAndLocation:N.func.isRequired,onZoomToData:N.func.isRequired,theme:N.symbol.isRequired,viewUid:N.string.isRequired};const Att=oh(yM);var lZ={};Object.defineProperty(lZ,"__esModule",{value:!0});var cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ott=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ktt=O,pm=xtt(ktt);function xtt(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Itt(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function Ctt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cU(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ptt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Dtt=13,Rtt=9,Ntt=8,Mtt=89,Ub=90,Ltt=77,hU=57,fU=219,pU=222,dU=192,jtt=27,mU=100,Btt=3e3,Ftt="navigator"in globalThis&&/Win/i.test(navigator.platform),GO="navigator"in globalThis&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),X0="npm__react-simple-code-editor__textarea",Gtt=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`+X0+`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`+X0+` {
    color: transparent !important;
  }

  .`+X0+`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`,uZ=function(e){Ptt(t,e);function t(){var n,r,i,o;Ctt(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return o=(r=(i=cU(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(s))),i),i.state={capture:!0},i._recordCurrentState=function(){var c=i._input;if(c){var l=c.value,f=c.selectionStart,h=c.selectionEnd;i._recordChange({value:l,selectionStart:f,selectionEnd:h})}},i._getLines=function(c,l){return c.substring(0,l).split(`
`)},i._recordChange=function(c){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=i._history,h=f.stack,p=f.offset;if(h.length&&p>-1){i._history.stack=h.slice(0,p+1);var d=i._history.stack.length;if(d>mU){var m=d-mU;i._history.stack=h.slice(m,d),i._history.offset=Math.max(i._history.offset-m,0)}}var g=Date.now();if(l){var v=i._history.stack[i._history.offset];if(v&&g-v.timestamp<Btt){var b=/[^a-z0-9]([a-z0-9]+)$/i,y=i._getLines(v.value,v.selectionStart).pop().match(b),_=i._getLines(c.value,c.selectionStart).pop().match(b);if(y&&_&&_[1].startsWith(y[1])){i._history.stack[i._history.offset]=cl({},c,{timestamp:g});return}}}i._history.stack.push(cl({},c,{timestamp:g})),i._history.offset++},i._updateInput=function(c){var l=i._input;l&&(l.value=c.value,l.selectionStart=c.selectionStart,l.selectionEnd=c.selectionEnd,i.props.onValueChange(c.value))},i._applyEdits=function(c){var l=i._input,f=i._history.stack[i._history.offset];f&&l&&(i._history.stack[i._history.offset]=cl({},f,{selectionStart:l.selectionStart,selectionEnd:l.selectionEnd})),i._recordChange(c),i._updateInput(c)},i._undoEdit=function(){var c=i._history,l=c.stack,f=c.offset,h=l[f-1];h&&(i._updateInput(h),i._history.offset=Math.max(f-1,0))},i._redoEdit=function(){var c=i._history,l=c.stack,f=c.offset,h=l[f+1];h&&(i._updateInput(h),i._history.offset=Math.min(f+1,l.length-1))},i._handleKeyDown=function(c){var l=i.props,f=l.tabSize,h=l.insertSpaces,p=l.ignoreTabKey,d=l.onKeyDown;if(!(d&&(d(c),c.defaultPrevented))){c.keyCode===jtt&&c.target.blur();var m=c.target,g=m.value,v=m.selectionStart,b=m.selectionEnd,y=(h?" ":"	").repeat(f);if(c.keyCode===Rtt&&!p&&i.state.capture)if(c.preventDefault(),c.shiftKey){var _=i._getLines(g,v),T=_.length-1,S=i._getLines(g,b).length-1,E=g.split(`
`).map(function(ae,X){return X>=T&&X<=S&&ae.startsWith(y)?ae.substring(y.length):ae}).join(`
`);if(g!==E){var I=_[T];i._applyEdits({value:E,selectionStart:I.startsWith(y)?v-y.length:v,selectionEnd:b-(g.length-E.length)})}}else if(v!==b){var x=i._getLines(g,v),C=x.length-1,w=i._getLines(g,b).length-1,B=x[C];i._applyEdits({value:g.split(`
`).map(function(ae,X){return X>=C&&X<=w?y+ae:ae}).join(`
`),selectionStart:/\S/.test(B)?v+y.length:v,selectionEnd:b+y.length*(w-C+1)})}else{var L=v+y.length;i._applyEdits({value:g.substring(0,v)+y+g.substring(b),selectionStart:L,selectionEnd:L})}else if(c.keyCode===Ntt){var k=v!==b,R=g.substring(0,v);if(R.endsWith(y)&&!k){c.preventDefault();var F=v-y.length;i._applyEdits({value:g.substring(0,v-y.length)+g.substring(b),selectionStart:F,selectionEnd:F})}}else if(c.keyCode===Dtt){if(v===b){var U=i._getLines(g,v).pop(),$=U.match(/^\s+/);if($&&$[0]){c.preventDefault();var ie=`
`+$[0],oe=v+ie.length;i._applyEdits({value:g.substring(0,v)+ie+g.substring(b),selectionStart:oe,selectionEnd:oe})}}}else if(c.keyCode===hU||c.keyCode===fU||c.keyCode===pU||c.keyCode===dU){var me=void 0;c.keyCode===hU&&c.shiftKey?me=["(",")"]:c.keyCode===fU?c.shiftKey?me=["{","}"]:me=["[","]"]:c.keyCode===pU?c.shiftKey?me=['"','"']:me=["'","'"]:c.keyCode===dU&&!c.shiftKey&&(me=["`","`"]),v!==b&&me&&(c.preventDefault(),i._applyEdits({value:g.substring(0,v)+me[0]+g.substring(v,b)+me[1]+g.substring(b),selectionStart:v,selectionEnd:b+2}))}else(GO?c.metaKey&&c.keyCode===Ub:c.ctrlKey&&c.keyCode===Ub)&&!c.shiftKey&&!c.altKey?(c.preventDefault(),i._undoEdit()):(GO?c.metaKey&&c.keyCode===Ub&&c.shiftKey:Ftt?c.ctrlKey&&c.keyCode===Mtt:c.ctrlKey&&c.keyCode===Ub&&c.shiftKey)&&!c.altKey?(c.preventDefault(),i._redoEdit()):c.keyCode===Ltt&&c.ctrlKey&&(!GO||c.shiftKey)&&(c.preventDefault(),i.setState(function(ae){return{capture:!ae.capture}}))}},i._handleChange=function(c){var l=c.target,f=l.value,h=l.selectionStart,p=l.selectionEnd;i._recordChange({value:f,selectionStart:h,selectionEnd:p},!0),i.props.onValueChange(f)},i._history={stack:[],offset:-1},r),cU(i,o)}return Ott(t,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var n=this,r=this.props,i=r.value,o=r.style,a=r.padding,s=r.highlight,u=r.textareaId,c=r.autoFocus,l=r.disabled,f=r.form,h=r.maxLength,p=r.minLength,d=r.name,m=r.placeholder,g=r.readOnly,v=r.required,b=r.onClick,y=r.onFocus,_=r.onBlur,T=r.onKeyUp;r.onKeyDown,r.onValueChange,r.tabSize,r.insertSpaces,r.ignoreTabKey;var S=Itt(r,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"]),E={paddingTop:a,paddingRight:a,paddingBottom:a,paddingLeft:a},I=s(i);return pm.createElement("div",cl({},S,{style:cl({},dm.container,o)}),pm.createElement("textarea",{ref:function(x){return n._input=x},style:cl({},dm.editor,dm.textarea,E),className:X0,id:u,value:i,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:b,onKeyUp:T,onFocus:y,onBlur:_,disabled:l,form:f,maxLength:h,minLength:p,name:d,placeholder:m,readOnly:g,required:v,autoFocus:c,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),pm.createElement("pre",cl({"aria-hidden":"true",style:cl({},dm.editor,dm.highlight,E)},typeof I=="string"?{dangerouslySetInnerHTML:{__html:I+"<br />"}}:{children:I})),pm.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:Gtt}}))}},{key:"session",get:function(){return{history:this._history}},set:function(n){this._history=n.history}}]),t}(pm.Component);uZ.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0};var Htt=lZ.default=uZ,dm={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},cZ={exports:{}};(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,o=0,a={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function b(y){return y instanceof u?new u(y.type,b(y.content),y.alias):Array.isArray(y)?y.map(b):y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).slice(8,-1)},objId:function(b){return b.__id||Object.defineProperty(b,"__id",{value:++o}),b.__id},clone:function b(y,_){_=_||{};var T,S;switch(s.util.type(y)){case"Object":if(S=s.util.objId(y),_[S])return _[S];T={},_[S]=T;for(var E in y)y.hasOwnProperty(E)&&(T[E]=b(y[E],_));return T;case"Array":return S=s.util.objId(y),_[S]?_[S]:(T=[],_[S]=T,y.forEach(function(I,x){T[x]=b(I,_)}),T);default:return y}},getLanguage:function(b){for(;b;){var y=i.exec(b.className);if(y)return y[1].toLowerCase();b=b.parentElement}return"none"},setLanguage:function(b,y){b.className=b.className.replace(RegExp(i,"gi"),""),b.classList.add("language-"+y)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(T){var b=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack)||[])[1];if(b){var y=document.getElementsByTagName("script");for(var _ in y)if(y[_].src==b)return y[_]}return null}},isActive:function(b,y,_){for(var T="no-"+y;b;){var S=b.classList;if(S.contains(y))return!0;if(S.contains(T))return!1;b=b.parentElement}return!!_}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(b,y){var _=s.util.clone(s.languages[b]);for(var T in y)_[T]=y[T];return _},insertBefore:function(b,y,_,T){T=T||s.languages;var S=T[b],E={};for(var I in S)if(S.hasOwnProperty(I)){if(I==y)for(var x in _)_.hasOwnProperty(x)&&(E[x]=_[x]);_.hasOwnProperty(I)||(E[I]=S[I])}var C=T[b];return T[b]=E,s.languages.DFS(s.languages,function(w,B){B===C&&w!=b&&(this[w]=E)}),E},DFS:function b(y,_,T,S){S=S||{};var E=s.util.objId;for(var I in y)if(y.hasOwnProperty(I)){_.call(y,I,y[I],T||I);var x=y[I],C=s.util.type(x);C==="Object"&&!S[E(x)]?(S[E(x)]=!0,b(x,_,null,S)):C==="Array"&&!S[E(x)]&&(S[E(x)]=!0,b(x,_,I,S))}}},plugins:{},highlightAll:function(b,y){s.highlightAllUnder(document,b,y)},highlightAllUnder:function(b,y,_){var T={callback:_,container:b,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",T),T.elements=Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)),s.hooks.run("before-all-elements-highlight",T);for(var S=0,E;E=T.elements[S++];)s.highlightElement(E,y===!0,T.callback)},highlightElement:function(b,y,_){var T=s.util.getLanguage(b),S=s.languages[T];s.util.setLanguage(b,T);var E=b.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(E,T);var I=b.textContent,x={element:b,language:T,grammar:S,code:I};function C(B){x.highlightedCode=B,s.hooks.run("before-insert",x),x.element.innerHTML=x.highlightedCode,s.hooks.run("after-highlight",x),s.hooks.run("complete",x),_&&_.call(x.element)}if(s.hooks.run("before-sanity-check",x),E=x.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!x.code){s.hooks.run("complete",x),_&&_.call(x.element);return}if(s.hooks.run("before-highlight",x),!x.grammar){C(s.util.encode(x.code));return}if(y&&r.Worker){var w=new Worker(s.filename);w.onmessage=function(B){C(B.data)},w.postMessage(JSON.stringify({language:x.language,code:x.code,immediateClose:!0}))}else C(s.highlight(x.code,x.grammar,x.language))},highlight:function(b,y,_){var T={code:b,grammar:y,language:_};if(s.hooks.run("before-tokenize",T),!T.grammar)throw new Error('The language "'+T.language+'" has no grammar.');return T.tokens=s.tokenize(T.code,T.grammar),s.hooks.run("after-tokenize",T),u.stringify(s.util.encode(T.tokens),T.language)},tokenize:function(b,y){var _=y.rest;if(_){for(var T in _)y[T]=_[T];delete y.rest}var S=new f;return h(S,S.head,b),l(b,S,y,S.head,0),d(S)},hooks:{all:{},add:function(b,y){var _=s.hooks.all;_[b]=_[b]||[],_[b].push(y)},run:function(b,y){var _=s.hooks.all[b];if(!(!_||!_.length))for(var T=0,S;S=_[T++];)S(y)}},Token:u};r.Prism=s;function u(b,y,_,T){this.type=b,this.content=y,this.alias=_,this.length=(T||"").length|0}u.stringify=function b(y,_){if(typeof y=="string")return y;if(Array.isArray(y)){var T="";return y.forEach(function(C){T+=b(C,_)}),T}var S={type:y.type,content:b(y.content,_),tag:"span",classes:["token",y.type],attributes:{},language:_},E=y.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(S.classes,E):S.classes.push(E)),s.hooks.run("wrap",S);var I="";for(var x in S.attributes)I+=" "+x+'="'+(S.attributes[x]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+I+">"+S.content+"</"+S.tag+">"};function c(b,y,_,T){b.lastIndex=y;var S=b.exec(_);if(S&&T&&S[1]){var E=S[1].length;S.index+=E,S[0]=S[0].slice(E)}return S}function l(b,y,_,T,S,E){for(var I in _)if(!(!_.hasOwnProperty(I)||!_[I])){var x=_[I];x=Array.isArray(x)?x:[x];for(var C=0;C<x.length;++C){if(E&&E.cause==I+","+C)return;var w=x[C],B=w.inside,L=!!w.lookbehind,k=!!w.greedy,R=w.alias;if(k&&!w.pattern.global){var F=w.pattern.toString().match(/[imsuy]*$/)[0];w.pattern=RegExp(w.pattern.source,F+"g")}for(var U=w.pattern||w,$=T.next,ie=S;$!==y.tail&&!(E&&ie>=E.reach);ie+=$.value.length,$=$.next){var oe=$.value;if(y.length>b.length)return;if(!(oe instanceof u)){var me=1,ae;if(k){if(ae=c(U,ie,b,L),!ae||ae.index>=b.length)break;var _e=ae.index,X=ae.index+ae[0].length,ee=ie;for(ee+=$.value.length;_e>=ee;)$=$.next,ee+=$.value.length;if(ee-=$.value.length,ie=ee,$.value instanceof u)continue;for(var se=$;se!==y.tail&&(ee<X||typeof se.value=="string");se=se.next)me++,ee+=se.value.length;me--,oe=b.slice(ie,ee),ae.index-=ie}else if(ae=c(U,0,oe,L),!ae)continue;var _e=ae.index,Oe=ae[0],Re=oe.slice(0,_e),ve=oe.slice(_e+Oe.length),Ne=ie+oe.length;E&&Ne>E.reach&&(E.reach=Ne);var He=$.prev;Re&&(He=h(y,He,Re),ie+=Re.length),p(y,He,me);var be=new u(I,B?s.tokenize(Oe,B):Oe,R,Oe);if($=h(y,He,be),ve&&h(y,$,ve),me>1){var je={cause:I+","+C,reach:Ne};l(b,y,_,$.prev,ie,je),E&&je.reach>E.reach&&(E.reach=je.reach)}}}}}}function f(){var b={value:null,prev:null,next:null},y={value:null,prev:b,next:null};b.next=y,this.head=b,this.tail=y,this.length=0}function h(b,y,_){var T=y.next,S={value:_,prev:y,next:T};return y.next=S,T.prev=S,b.length++,S}function p(b,y,_){for(var T=y.next,S=0;S<_&&T!==b.tail;S++)T=T.next;y.next=T,T.prev=y,b.length-=S}function d(b){for(var y=[],_=b.head.next;_!==b.tail;)y.push(_.value),_=_.next;return y}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(b){var y=JSON.parse(b.data),_=y.language,T=y.code,S=y.immediateClose;r.postMessage(s.highlight(T,s.languages[_],_)),S&&r.close()},!1)),s;var m=s.util.currentScript();m&&(s.filename=m.src,m.hasAttribute("data-manual")&&(s.manual=!0));function g(){s.manual||s.highlightAll()}if(!s.manual){var v=document.readyState;v==="loading"||v==="interactive"&&m&&m.defer?document.addEventListener("DOMContentLoaded",g):window.requestAnimationFrame?window.requestAnimationFrame(g):window.setTimeout(g,16)}return s}(t);e.exports&&(e.exports=n),typeof globalThis<"u"&&(globalThis.Prism=n)})(cZ);var gU=cZ.exports;Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;var LP={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Pe,function(n){function r(){for(var G=arguments.length,q=Array(G),re=0;re<G;re++)q[re]=arguments[re];if(q.length>1){q[0]=q[0].slice(0,-1);for(var Ae=q.length-1,xe=1;xe<Ae;++xe)q[xe]=q[xe].slice(1,-1);return q[Ae]=q[Ae].slice(1),q.join("")}else return q[0]}function i(G){return"(?:"+G+")"}function o(G){return G===void 0?"undefined":G===null?"null":Object.prototype.toString.call(G).split(" ").pop().split("]").shift().toLowerCase()}function a(G){return G.toUpperCase()}function s(G){return G!=null?G instanceof Array?G:typeof G.length!="number"||G.split||G.setInterval||G.call?[G]:Array.prototype.slice.call(G):[]}function u(G,q){var re=G;if(q)for(var Ae in q)re[Ae]=q[Ae];return re}function c(G){var q="[A-Za-z]",re="[0-9]",Ae=r(re,"[A-Fa-f]"),xe=i(i("%[EFef]"+Ae+"%"+Ae+Ae+"%"+Ae+Ae)+"|"+i("%[89A-Fa-f]"+Ae+"%"+Ae+Ae)+"|"+i("%"+Ae+Ae)),We="[\\:\\/\\?\\#\\[\\]\\@]",Ze="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",bt=r(We,Ze),Rt=G?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",jt=G?"[\\uE000-\\uF8FF]":"[]",_t=r(q,re,"[\\-\\.\\_\\~]",Rt);i(q+r(q,re,"[\\+\\-\\.]")+"*"),i(i(xe+"|"+r(_t,Ze,"[\\:]"))+"*");var rr=i(i("25[0-5]")+"|"+i("2[0-4]"+re)+"|"+i("1"+re+re)+"|"+i("0?[1-9]"+re)+"|0?0?"+re),nr=i(rr+"\\."+rr+"\\."+rr+"\\."+rr),vt=i(Ae+"{1,4}"),Bt=i(i(vt+"\\:"+vt)+"|"+nr),ar=i(i(vt+"\\:")+"{6}"+Bt),vn=i("\\:\\:"+i(vt+"\\:")+"{5}"+Bt),Fr=i(i(vt)+"?\\:\\:"+i(vt+"\\:")+"{4}"+Bt),Xe=i(i(i(vt+"\\:")+"{0,1}"+vt)+"?\\:\\:"+i(vt+"\\:")+"{3}"+Bt),Ke=i(i(i(vt+"\\:")+"{0,2}"+vt)+"?\\:\\:"+i(vt+"\\:")+"{2}"+Bt),Ot=i(i(i(vt+"\\:")+"{0,3}"+vt)+"?\\:\\:"+vt+"\\:"+Bt),Ct=i(i(i(vt+"\\:")+"{0,4}"+vt)+"?\\:\\:"+Bt),Et=i(i(i(vt+"\\:")+"{0,5}"+vt)+"?\\:\\:"+vt),wt=i(i(i(vt+"\\:")+"{0,6}"+vt)+"?\\:\\:"),Nt=i([ar,vn,Fr,Xe,Ke,Ot,Ct,Et,wt].join("|")),At=i(i(_t+"|"+xe)+"+");i("[vV]"+Ae+"+\\."+r(_t,Ze,"[\\:]")+"+"),i(i(xe+"|"+r(_t,Ze))+"*");var Vt=i(xe+"|"+r(_t,Ze,"[\\:\\@]"));return i(i(xe+"|"+r(_t,Ze,"[\\@]"))+"+"),i(i(Vt+"|"+r("[\\/\\?]",jt))+"*"),{NOT_SCHEME:new RegExp(r("[^]",q,re,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",_t,Ze),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",_t,Ze),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",_t,Ze),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",_t,Ze),"g"),NOT_QUERY:new RegExp(r("[^\\%]",_t,Ze,"[\\:\\@\\/\\?]",jt),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",_t,Ze,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",_t,Ze),"g"),UNRESERVED:new RegExp(_t,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",_t,bt),"g"),PCT_ENCODED:new RegExp(xe,"g"),IPV4ADDRESS:new RegExp("^("+nr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Nt+")"+i(i("\\%25|\\%(?!"+Ae+"{2})")+"("+At+")")+"?\\]?$")}}var l=c(!1),f=c(!0),h=function(){function G(q,re){var Ae=[],xe=!0,We=!1,Ze=void 0;try{for(var bt=q[Symbol.iterator](),Rt;!(xe=(Rt=bt.next()).done)&&(Ae.push(Rt.value),!(re&&Ae.length===re));xe=!0);}catch(jt){We=!0,Ze=jt}finally{try{!xe&&bt.return&&bt.return()}finally{if(We)throw Ze}}return Ae}return function(q,re){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return G(q,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(G){if(Array.isArray(G)){for(var q=0,re=Array(G.length);q<G.length;q++)re[q]=G[q];return re}else return Array.from(G)},d=2147483647,m=36,g=1,v=26,b=38,y=700,_=72,T=128,S="-",E=/^xn--/,I=/[^\0-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=m-g,B=Math.floor,L=String.fromCharCode;function k(G){throw new RangeError(C[G])}function R(G,q){for(var re=[],Ae=G.length;Ae--;)re[Ae]=q(G[Ae]);return re}function F(G,q){var re=G.split("@"),Ae="";re.length>1&&(Ae=re[0]+"@",G=re[1]),G=G.replace(x,".");var xe=G.split("."),We=R(xe,q).join(".");return Ae+We}function U(G){for(var q=[],re=0,Ae=G.length;re<Ae;){var xe=G.charCodeAt(re++);if(xe>=55296&&xe<=56319&&re<Ae){var We=G.charCodeAt(re++);(We&64512)==56320?q.push(((xe&1023)<<10)+(We&1023)+65536):(q.push(xe),re--)}else q.push(xe)}return q}var $=function(G){return String.fromCodePoint.apply(String,p(G))},ie=function(G){return G-48<10?G-22:G-65<26?G-65:G-97<26?G-97:m},oe=function(G,q){return G+22+75*(G<26)-((q!=0)<<5)},me=function(G,q,re){var Ae=0;for(G=re?B(G/y):G>>1,G+=B(G/q);G>w*v>>1;Ae+=m)G=B(G/w);return B(Ae+(w+1)*G/(G+b))},ae=function(G){var q=[],re=G.length,Ae=0,xe=T,We=_,Ze=G.lastIndexOf(S);Ze<0&&(Ze=0);for(var bt=0;bt<Ze;++bt)G.charCodeAt(bt)>=128&&k("not-basic"),q.push(G.charCodeAt(bt));for(var Rt=Ze>0?Ze+1:0;Rt<re;){for(var jt=Ae,_t=1,rr=m;;rr+=m){Rt>=re&&k("invalid-input");var nr=ie(G.charCodeAt(Rt++));(nr>=m||nr>B((d-Ae)/_t))&&k("overflow"),Ae+=nr*_t;var vt=rr<=We?g:rr>=We+v?v:rr-We;if(nr<vt)break;var Bt=m-vt;_t>B(d/Bt)&&k("overflow"),_t*=Bt}var ar=q.length+1;We=me(Ae-jt,ar,jt==0),B(Ae/ar)>d-xe&&k("overflow"),xe+=B(Ae/ar),Ae%=ar,q.splice(Ae++,0,xe)}return String.fromCodePoint.apply(String,q)},X=function(G){var q=[];G=U(G);var re=G.length,Ae=T,xe=0,We=_,Ze=!0,bt=!1,Rt=void 0;try{for(var jt=G[Symbol.iterator](),_t;!(Ze=(_t=jt.next()).done);Ze=!0){var rr=_t.value;rr<128&&q.push(L(rr))}}catch(tl){bt=!0,Rt=tl}finally{try{!Ze&&jt.return&&jt.return()}finally{if(bt)throw Rt}}var nr=q.length,vt=nr;for(nr&&q.push(S);vt<re;){var Bt=d,ar=!0,vn=!1,Fr=void 0;try{for(var Xe=G[Symbol.iterator](),Ke;!(ar=(Ke=Xe.next()).done);ar=!0){var Ot=Ke.value;Ot>=Ae&&Ot<Bt&&(Bt=Ot)}}catch(tl){vn=!0,Fr=tl}finally{try{!ar&&Xe.return&&Xe.return()}finally{if(vn)throw Fr}}var Ct=vt+1;Bt-Ae>B((d-xe)/Ct)&&k("overflow"),xe+=(Bt-Ae)*Ct,Ae=Bt;var Et=!0,wt=!1,Nt=void 0;try{for(var At=G[Symbol.iterator](),Vt;!(Et=(Vt=At.next()).done);Et=!0){var ur=Vt.value;if(ur<Ae&&++xe>d&&k("overflow"),ur==Ae){for(var cr=xe,Oi=m;;Oi+=m){var oi=Oi<=We?g:Oi>=We+v?v:Oi-We;if(cr<oi)break;var xv=cr-oi,el=m-oi;q.push(L(oe(oi+xv%el,0))),cr=B(xv/el)}q.push(L(oe(cr,0))),We=me(xe,Ct,vt==nr),xe=0,++vt}}}catch(tl){wt=!0,Nt=tl}finally{try{!Et&&At.return&&At.return()}finally{if(wt)throw Nt}}++xe,++Ae}return q.join("")},ee=function(G){return F(G,function(q){return E.test(q)?ae(q.slice(4).toLowerCase()):q})},se=function(G){return F(G,function(q){return I.test(q)?"xn--"+X(q):q})},_e={version:"2.1.0",ucs2:{decode:U,encode:$},decode:ae,encode:X,toASCII:se,toUnicode:ee},Oe={};function Re(G){var q=G.charCodeAt(0),re=void 0;return q<16?re="%0"+q.toString(16).toUpperCase():q<128?re="%"+q.toString(16).toUpperCase():q<2048?re="%"+(q>>6|192).toString(16).toUpperCase()+"%"+(q&63|128).toString(16).toUpperCase():re="%"+(q>>12|224).toString(16).toUpperCase()+"%"+(q>>6&63|128).toString(16).toUpperCase()+"%"+(q&63|128).toString(16).toUpperCase(),re}function ve(G){for(var q="",re=0,Ae=G.length;re<Ae;){var xe=parseInt(G.substr(re+1,2),16);if(xe<128)q+=String.fromCharCode(xe),re+=3;else if(xe>=194&&xe<224){if(Ae-re>=6){var We=parseInt(G.substr(re+4,2),16);q+=String.fromCharCode((xe&31)<<6|We&63)}else q+=G.substr(re,6);re+=6}else if(xe>=224){if(Ae-re>=9){var Ze=parseInt(G.substr(re+4,2),16),bt=parseInt(G.substr(re+7,2),16);q+=String.fromCharCode((xe&15)<<12|(Ze&63)<<6|bt&63)}else q+=G.substr(re,9);re+=9}else q+=G.substr(re,3),re+=3}return q}function Ne(G,q){function re(Ae){var xe=ve(Ae);return xe.match(q.UNRESERVED)?xe:Ae}return G.scheme&&(G.scheme=String(G.scheme).replace(q.PCT_ENCODED,re).toLowerCase().replace(q.NOT_SCHEME,"")),G.userinfo!==void 0&&(G.userinfo=String(G.userinfo).replace(q.PCT_ENCODED,re).replace(q.NOT_USERINFO,Re).replace(q.PCT_ENCODED,a)),G.host!==void 0&&(G.host=String(G.host).replace(q.PCT_ENCODED,re).toLowerCase().replace(q.NOT_HOST,Re).replace(q.PCT_ENCODED,a)),G.path!==void 0&&(G.path=String(G.path).replace(q.PCT_ENCODED,re).replace(G.scheme?q.NOT_PATH:q.NOT_PATH_NOSCHEME,Re).replace(q.PCT_ENCODED,a)),G.query!==void 0&&(G.query=String(G.query).replace(q.PCT_ENCODED,re).replace(q.NOT_QUERY,Re).replace(q.PCT_ENCODED,a)),G.fragment!==void 0&&(G.fragment=String(G.fragment).replace(q.PCT_ENCODED,re).replace(q.NOT_FRAGMENT,Re).replace(q.PCT_ENCODED,a)),G}function He(G){return G.replace(/^0*(.*)/,"$1")||"0"}function be(G,q){var re=G.match(q.IPV4ADDRESS)||[],Ae=h(re,2),xe=Ae[1];return xe?xe.split(".").map(He).join("."):G}function je(G,q){var re=G.match(q.IPV6ADDRESS)||[],Ae=h(re,3),xe=Ae[1],We=Ae[2];if(xe){for(var Ze=xe.toLowerCase().split("::").reverse(),bt=h(Ze,2),Rt=bt[0],jt=bt[1],_t=jt?jt.split(":").map(He):[],rr=Rt.split(":").map(He),nr=q.IPV4ADDRESS.test(rr[rr.length-1]),vt=nr?7:8,Bt=rr.length-vt,ar=Array(vt),vn=0;vn<vt;++vn)ar[vn]=_t[vn]||rr[Bt+vn]||"";nr&&(ar[vt-1]=be(ar[vt-1],q));var Fr=ar.reduce(function(Et,wt,Nt){if(!wt||wt==="0"){var At=Et[Et.length-1];At&&At.index+At.length===Nt?At.length++:Et.push({index:Nt,length:1})}return Et},[]),Xe=Fr.sort(function(Et,wt){return wt.length-Et.length})[0],Ke=void 0;if(Xe&&Xe.length>1){var Ot=ar.slice(0,Xe.index),Ct=ar.slice(Xe.index+Xe.length);Ke=Ot.join(":")+"::"+Ct.join(":")}else Ke=ar.join(":");return We&&(Ke+="%"+We),Ke}else return G}var qe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ot="".match(/(){0}/)[1]===void 0;function ut(G){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re={},Ae=q.iri!==!1?f:l;q.reference==="suffix"&&(G=(q.scheme?q.scheme+":":"")+"//"+G);var xe=G.match(qe);if(xe){ot?(re.scheme=xe[1],re.userinfo=xe[3],re.host=xe[4],re.port=parseInt(xe[5],10),re.path=xe[6]||"",re.query=xe[7],re.fragment=xe[8],isNaN(re.port)&&(re.port=xe[5])):(re.scheme=xe[1]||void 0,re.userinfo=G.indexOf("@")!==-1?xe[3]:void 0,re.host=G.indexOf("//")!==-1?xe[4]:void 0,re.port=parseInt(xe[5],10),re.path=xe[6]||"",re.query=G.indexOf("?")!==-1?xe[7]:void 0,re.fragment=G.indexOf("#")!==-1?xe[8]:void 0,isNaN(re.port)&&(re.port=G.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?xe[4]:void 0)),re.host&&(re.host=je(be(re.host,Ae),Ae)),re.scheme===void 0&&re.userinfo===void 0&&re.host===void 0&&re.port===void 0&&!re.path&&re.query===void 0?re.reference="same-document":re.scheme===void 0?re.reference="relative":re.fragment===void 0?re.reference="absolute":re.reference="uri",q.reference&&q.reference!=="suffix"&&q.reference!==re.reference&&(re.error=re.error||"URI is not a "+q.reference+" reference.");var We=Oe[(q.scheme||re.scheme||"").toLowerCase()];if(!q.unicodeSupport&&(!We||!We.unicodeSupport)){if(re.host&&(q.domainHost||We&&We.domainHost))try{re.host=_e.toASCII(re.host.replace(Ae.PCT_ENCODED,ve).toLowerCase())}catch(Ze){re.error=re.error||"Host's domain name can not be converted to ASCII via punycode: "+Ze}Ne(re,l)}else Ne(re,Ae);We&&We.parse&&We.parse(re,q)}else re.error=re.error||"URI can not be parsed.";return re}function Je(G,q){var re=q.iri!==!1?f:l,Ae=[];return G.userinfo!==void 0&&(Ae.push(G.userinfo),Ae.push("@")),G.host!==void 0&&Ae.push(je(be(String(G.host),re),re).replace(re.IPV6ADDRESS,function(xe,We,Ze){return"["+We+(Ze?"%25"+Ze:"")+"]"})),(typeof G.port=="number"||typeof G.port=="string")&&(Ae.push(":"),Ae.push(String(G.port))),Ae.length?Ae.join(""):void 0}var at=/^\.\.?\//,Ht=/^\/\.(\/|$)/,qt=/^\/\.\.(\/|$)/,dr=/^\/?(?:.|\n)*?(?=\/|$)/;function tr(G){for(var q=[];G.length;)if(G.match(at))G=G.replace(at,"");else if(G.match(Ht))G=G.replace(Ht,"/");else if(G.match(qt))G=G.replace(qt,"/"),q.pop();else if(G==="."||G==="..")G="";else{var re=G.match(dr);if(re){var Ae=re[0];G=G.slice(Ae.length),q.push(Ae)}else throw new Error("Unexpected dot segment condition")}return q.join("")}function Ie(G){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=q.iri?f:l,Ae=[],xe=Oe[(q.scheme||G.scheme||"").toLowerCase()];if(xe&&xe.serialize&&xe.serialize(G,q),G.host&&!re.IPV6ADDRESS.test(G.host)&&(q.domainHost||xe&&xe.domainHost))try{G.host=q.iri?_e.toUnicode(G.host):_e.toASCII(G.host.replace(re.PCT_ENCODED,ve).toLowerCase())}catch(bt){G.error=G.error||"Host's domain name can not be converted to "+(q.iri?"Unicode":"ASCII")+" via punycode: "+bt}Ne(G,re),q.reference!=="suffix"&&G.scheme&&(Ae.push(G.scheme),Ae.push(":"));var We=Je(G,q);if(We!==void 0&&(q.reference!=="suffix"&&Ae.push("//"),Ae.push(We),G.path&&G.path.charAt(0)!=="/"&&Ae.push("/")),G.path!==void 0){var Ze=G.path;!q.absolutePath&&(!xe||!xe.absolutePath)&&(Ze=tr(Ze)),We===void 0&&(Ze=Ze.replace(/^\/\//,"/%2F")),Ae.push(Ze)}return G.query!==void 0&&(Ae.push("?"),Ae.push(G.query)),G.fragment!==void 0&&(Ae.push("#"),Ae.push(G.fragment)),Ae.join("")}function te(G,q){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=arguments[3],xe={};return Ae||(G=ut(Ie(G,re),re),q=ut(Ie(q,re),re)),re=re||{},!re.tolerant&&q.scheme?(xe.scheme=q.scheme,xe.userinfo=q.userinfo,xe.host=q.host,xe.port=q.port,xe.path=tr(q.path||""),xe.query=q.query):(q.userinfo!==void 0||q.host!==void 0||q.port!==void 0?(xe.userinfo=q.userinfo,xe.host=q.host,xe.port=q.port,xe.path=tr(q.path||""),xe.query=q.query):(q.path?(q.path.charAt(0)==="/"?xe.path=tr(q.path):((G.userinfo!==void 0||G.host!==void 0||G.port!==void 0)&&!G.path?xe.path="/"+q.path:G.path?xe.path=G.path.slice(0,G.path.lastIndexOf("/")+1)+q.path:xe.path=q.path,xe.path=tr(xe.path)),xe.query=q.query):(xe.path=G.path,q.query!==void 0?xe.query=q.query:xe.query=G.query),xe.userinfo=G.userinfo,xe.host=G.host,xe.port=G.port),xe.scheme=G.scheme),xe.fragment=q.fragment,xe}function le(G,q,re){var Ae=u({scheme:"null"},re);return Ie(te(ut(G,Ae),ut(q,Ae),Ae,!0),Ae)}function ye(G,q){return typeof G=="string"?G=Ie(ut(G,q),q):o(G)==="object"&&(G=ut(Ie(G,q),q)),G}function Z(G,q,re){return typeof G=="string"?G=Ie(ut(G,re),re):o(G)==="object"&&(G=Ie(G,re)),typeof q=="string"?q=Ie(ut(q,re),re):o(q)==="object"&&(q=Ie(q,re)),G===q}function fe(G,q){return G&&G.toString().replace(!q||!q.iri?l.ESCAPE:f.ESCAPE,Re)}function we(G,q){return G&&G.toString().replace(!q||!q.iri?l.PCT_ENCODED:f.PCT_ENCODED,ve)}var Ce={scheme:"http",domainHost:!0,parse:function(G,q){return G.host||(G.error=G.error||"HTTP URIs must have a host."),G},serialize:function(G,q){var re=String(G.scheme).toLowerCase()==="https";return(G.port===(re?443:80)||G.port==="")&&(G.port=void 0),G.path||(G.path="/"),G}},Ve={scheme:"https",domainHost:Ce.domainHost,parse:Ce.parse,serialize:Ce.serialize};function Ye(G){return typeof G.secure=="boolean"?G.secure:String(G.scheme).toLowerCase()==="wss"}var $e={scheme:"ws",domainHost:!0,parse:function(G,q){var re=G;return re.secure=Ye(re),re.resourceName=(re.path||"/")+(re.query?"?"+re.query:""),re.path=void 0,re.query=void 0,re},serialize:function(G,q){if((G.port===(Ye(G)?443:80)||G.port==="")&&(G.port=void 0),typeof G.secure=="boolean"&&(G.scheme=G.secure?"wss":"ws",G.secure=void 0),G.resourceName){var re=G.resourceName.split("?"),Ae=h(re,2),xe=Ae[0],We=Ae[1];G.path=xe&&xe!=="/"?xe:void 0,G.query=We,G.resourceName=void 0}return G.fragment=void 0,G}},it={scheme:"wss",domainHost:$e.domainHost,parse:$e.parse,serialize:$e.serialize},ht={},Dt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",dt="[0-9A-Fa-f]",pr=i(i("%[EFef]"+dt+"%"+dt+dt+"%"+dt+dt)+"|"+i("%[89A-Fa-f]"+dt+"%"+dt+dt)+"|"+i("%"+dt+dt)),A="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",M="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",H=r(M,'[\\"\\\\]'),ue="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Te=new RegExp(Dt,"g"),J=new RegExp(pr,"g"),j=new RegExp(r("[^]",A,"[\\.]",'[\\"]',H),"g"),z=new RegExp(r("[^]",Dt,ue),"g"),W=z;function de(G){var q=ve(G);return q.match(Te)?q:G}var ge={scheme:"mailto",parse:function(G,q){var re=G,Ae=re.to=re.path?re.path.split(","):[];if(re.path=void 0,re.query){for(var xe=!1,We={},Ze=re.query.split("&"),bt=0,Rt=Ze.length;bt<Rt;++bt){var jt=Ze[bt].split("=");switch(jt[0]){case"to":for(var _t=jt[1].split(","),rr=0,nr=_t.length;rr<nr;++rr)Ae.push(_t[rr]);break;case"subject":re.subject=we(jt[1],q);break;case"body":re.body=we(jt[1],q);break;default:xe=!0,We[we(jt[0],q)]=we(jt[1],q);break}}xe&&(re.headers=We)}re.query=void 0;for(var vt=0,Bt=Ae.length;vt<Bt;++vt){var ar=Ae[vt].split("@");if(ar[0]=we(ar[0]),q.unicodeSupport)ar[1]=we(ar[1],q).toLowerCase();else try{ar[1]=_e.toASCII(we(ar[1],q).toLowerCase())}catch(vn){re.error=re.error||"Email address's domain name can not be converted to ASCII via punycode: "+vn}Ae[vt]=ar.join("@")}return re},serialize:function(G,q){var re=G,Ae=s(G.to);if(Ae){for(var xe=0,We=Ae.length;xe<We;++xe){var Ze=String(Ae[xe]),bt=Ze.lastIndexOf("@"),Rt=Ze.slice(0,bt).replace(J,de).replace(J,a).replace(j,Re),jt=Ze.slice(bt+1);try{jt=q.iri?_e.toUnicode(jt):_e.toASCII(we(jt,q).toLowerCase())}catch(vt){re.error=re.error||"Email address's domain name can not be converted to "+(q.iri?"Unicode":"ASCII")+" via punycode: "+vt}Ae[xe]=Rt+"@"+jt}re.path=Ae.join(",")}var _t=G.headers=G.headers||{};G.subject&&(_t.subject=G.subject),G.body&&(_t.body=G.body);var rr=[];for(var nr in _t)_t[nr]!==ht[nr]&&rr.push(nr.replace(J,de).replace(J,a).replace(z,Re)+"="+_t[nr].replace(J,de).replace(J,a).replace(W,Re));return rr.length&&(re.query=rr.join("&")),re}},De=/^([^\:]+)\:(.*)/,ke={scheme:"urn",parse:function(G,q){var re=G.path&&G.path.match(De),Ae=G;if(re){var xe=q.scheme||Ae.scheme||"urn",We=re[1].toLowerCase(),Ze=re[2],bt=xe+":"+(q.nid||We),Rt=Oe[bt];Ae.nid=We,Ae.nss=Ze,Ae.path=void 0,Rt&&(Ae=Rt.parse(Ae,q))}else Ae.error=Ae.error||"URN can not be parsed.";return Ae},serialize:function(G,q){var re=q.scheme||G.scheme||"urn",Ae=G.nid,xe=re+":"+(q.nid||Ae),We=Oe[xe];We&&(G=We.serialize(G,q));var Ze=G,bt=G.nss;return Ze.path=(Ae||q.nid)+":"+bt,Ze}},pe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ee={scheme:"urn:uuid",parse:function(G,q){var re=G;return re.uuid=re.nss,re.nss=void 0,!q.tolerant&&(!re.uuid||!re.uuid.match(pe))&&(re.error=re.error||"UUID is not valid."),re},serialize:function(G,q){var re=G;return re.nss=(G.uuid||"").toLowerCase(),re}};Oe[Ce.scheme]=Ce,Oe[Ve.scheme]=Ve,Oe[$e.scheme]=$e,Oe[it.scheme]=it,Oe[ge.scheme]=ge,Oe[ke.scheme]=ke,Oe[Ee.scheme]=Ee,n.SCHEMES=Oe,n.pctEncChar=Re,n.pctDecChars=ve,n.parse=ut,n.removeDotSegments=tr,n.serialize=Ie,n.resolveComponents=te,n.resolve=le,n.normalize=ye,n.equal=Z,n.escapeComponent=fe,n.unescapeComponent=we,Object.defineProperty(n,"__esModule",{value:!0})})})(LP,LP.exports);var Utt=LP.exports,vM=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},ztt=function(e){for(var t=0,n=e.length,r=0,i;r<n;)t++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<n&&(i=e.charCodeAt(r),(i&64512)==56320&&r++);return t},Id={copy:Vtt,checkDataType:jP,checkDataTypes:Ytt,coerceToTypes:Xtt,toHash:bM,getProperty:_M,escapeQuotes:TM,equal:vM,ucs2length:ztt,varOccurences:$tt,varReplace:Ktt,schemaHasRules:Qtt,schemaHasRulesExcept:Ztt,schemaUnknownRules:Jtt,toQuotedString:hZ,getPathExpr:ert,getPath:trt,getData:irt,unescapeFragment:ort,unescapeJsonPointer:SM,escapeFragment:art,escapeJsonPointer:EM};function Vtt(e,t){t=t||{};for(var n in e)t[n]=e[n];return t}function jP(e,t,n,r){var i=r?" !== ":" === ",o=r?" || ":" && ",a=r?"!":"",s=r?"":"!";switch(e){case"null":return t+i+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+o+"typeof "+t+i+'"object"'+o+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+o+s+"("+t+" % 1)"+o+t+i+t+(n?o+a+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(n?o+a+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}function Ytt(e,t,n){switch(e.length){case 1:return jP(e[0],t,n,!0);default:var r="",i=bM(e);i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer;for(var o in i)r+=(r?" && ":"")+jP(o,t,n,!0);return r}}var yU=bM(["string","number","integer","boolean","null"]);function Xtt(e,t){if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++){var i=t[r];(yU[i]||e==="array"&&i==="array")&&(n[n.length]=i)}if(n.length)return n}else{if(yU[t])return[t];if(e==="array"&&t==="array")return["array"]}}function bM(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var Wtt=/^[a-z$_][a-z$_0-9]*$/i,qtt=/'|\\/g;function _M(e){return typeof e=="number"?"["+e+"]":Wtt.test(e)?"."+e:"['"+TM(e)+"']"}function TM(e){return e.replace(qtt,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function $tt(e,t){t+="[^0-9]";var n=e.match(new RegExp(t,"g"));return n?n.length:0}function Ktt(e,t,n){return t+="([^0-9])",n=n.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),n+"$1")}function Qtt(e,t){if(typeof e=="boolean")return!e;for(var n in e)if(t[n])return!0}function Ztt(e,t,n){if(typeof e=="boolean")return!e&&n!="not";for(var r in e)if(r!=n&&t[r])return!0}function Jtt(e,t){if(typeof e!="boolean"){for(var n in e)if(!t[n])return n}}function hZ(e){return"'"+TM(e)+"'"}function ert(e,t,n,r){var i=n?"'/' + "+t+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'";return fZ(e,i)}function trt(e,t,n){var r=hZ(n?"/"+EM(t):_M(t));return fZ(e,r)}var rrt=/^\/(?:[^~]|~0|~1)*$/,nrt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function irt(e,t,n){var r,i,o,a;if(e==="")return"rootData";if(e[0]=="/"){if(!rrt.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(a=e.match(nrt),!a)throw new Error("Invalid JSON-pointer: "+e);if(r=+a[1],i=a[2],i=="#"){if(r>=t)throw new Error("Cannot access property/index "+r+" levels up, current level is "+t);return n[t-r]}if(r>t)throw new Error("Cannot access data "+r+" levels up, current level is "+t);if(o="data"+(t-r||""),!i)return o}for(var s=o,u=i.split("/"),c=0;c<u.length;c++){var l=u[c];l&&(o+=_M(SM(l)),s+=" && "+o)}return s}function fZ(e,t){return e=='""'?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function ort(e){return SM(decodeURIComponent(e))}function art(e){return encodeURIComponent(EM(e))}function EM(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function SM(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var srt=Id,pZ=lrt;function lrt(e){srt.copy(e,this)}var dZ={exports:{}},jl=dZ.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};W0(t,r,i,e,"",e)};jl.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};jl.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};jl.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};jl.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function W0(e,t,n,r,i,o,a,s,u,c){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,o,a,s,u,c);for(var l in r){var f=r[l];if(Array.isArray(f)){if(l in jl.arrayKeywords)for(var h=0;h<f.length;h++)W0(e,t,n,f[h],i+"/"+l+"/"+h,o,i,l,r,h)}else if(l in jl.propsKeywords){if(f&&typeof f=="object")for(var p in f)W0(e,t,n,f[p],i+"/"+l+"/"+urt(p),o,i,l,r,p)}else(l in jl.keywords||e.allKeys&&!(l in jl.skipKeywords))&&W0(e,t,n,f,i+"/"+l,o,i,l,r)}n(r,i,o,a,s,u,c)}}function urt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var crt=dZ.exports,Ov=Utt,vU=vM,MS=Id,SE=pZ,hrt=crt,wM=pu;pu.normalizeId=Wl;pu.fullPath=wE;pu.url=AE;pu.ids=grt;pu.inlineRef=BP;pu.schema=LS;function pu(e,t,n){var r=this._refs[n];if(typeof r=="string")if(this._refs[r])r=this._refs[r];else return pu.call(this,e,t,r);if(r=r||this._schemas[n],r instanceof SE)return BP(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var i=LS.call(this,t,n),o,a,s;return i&&(o=i.schema,t=i.root,s=i.baseId),o instanceof SE?a=o.validate||e.call(this,o.schema,t,void 0,s):o!==void 0&&(a=BP(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,s)),a}function LS(e,t){var n=Ov.parse(t),r=gZ(n),i=wE(this._getId(e.schema));if(Object.keys(e.schema).length===0||r!==i){var o=Wl(r),a=this._refs[o];if(typeof a=="string")return frt.call(this,e,a,n);if(a instanceof SE)a.validate||this._compile(a),e=a;else if(a=this._schemas[o],a instanceof SE){if(a.validate||this._compile(a),o==Wl(t))return{schema:a,root:e,baseId:i};e=a}else return;if(!e.schema)return;i=wE(this._getId(e.schema))}return mZ.call(this,n,i,e.schema,e)}function frt(e,t,n){var r=LS.call(this,e,t);if(r){var i=r.schema,o=r.baseId;e=r.root;var a=this._getId(i);return a&&(o=AE(o,a)),mZ.call(this,n,o,i,e)}}var prt=MS.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function mZ(e,t,n,r){if(e.fragment=e.fragment||"",e.fragment.slice(0,1)=="/"){for(var i=e.fragment.split("/"),o=1;o<i.length;o++){var a=i[o];if(a){if(a=MS.unescapeFragment(a),n=n[a],n===void 0)break;var s;if(!prt[a]&&(s=this._getId(n),s&&(t=AE(t,s)),n.$ref)){var u=AE(t,n.$ref),c=LS.call(this,r,u);c&&(n=c.schema,r=c.root,t=c.baseId)}}}if(n!==void 0&&n!==r.schema)return{schema:n,root:r,baseId:t}}}var drt=MS.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function BP(e,t){if(t===!1)return!1;if(t===void 0||t===!0)return FP(e);if(t)return GP(e)<=t}function FP(e){var t;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(t=e[n],typeof t=="object"&&!FP(t))return!1}else for(var r in e)if(r=="$ref"||(t=e[r],typeof t=="object"&&!FP(t)))return!1;return!0}function GP(e){var t=0,n;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(n=e[r],typeof n=="object"&&(t+=GP(n)),t==1/0)return 1/0}else for(var i in e){if(i=="$ref")return 1/0;if(drt[i])t++;else if(n=e[i],typeof n=="object"&&(t+=GP(n)+1),t==1/0)return 1/0}return t}function wE(e,t){t!==!1&&(e=Wl(e));var n=Ov.parse(e);return gZ(n)}function gZ(e){return Ov.serialize(e).split("#")[0]+"#"}var mrt=/#\/?$/;function Wl(e){return e?e.replace(mrt,""):""}function AE(e,t){return t=Wl(t),Ov.resolve(e,t)}function grt(e){var t=Wl(this._getId(e)),n={"":t},r={"":wE(t,!1)},i={},o=this;return hrt(e,{allKeys:!0},function(a,s,u,c,l,f,h){if(s!==""){var p=o._getId(a),d=n[c],m=r[c]+"/"+l;if(h!==void 0&&(m+="/"+(typeof h=="number"?h:MS.escapeFragment(h))),typeof p=="string"){p=d=Wl(d?Ov.resolve(d,p):p);var g=o._refs[p];if(typeof g=="string"&&(g=o._refs[g]),g&&g.schema){if(!vU(a,g.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=Wl(m))if(p[0]=="#"){if(i[p]&&!vU(a,i[p]))throw new Error('id "'+p+'" resolves to more than one schema');i[p]=a}else o._refs[p]=m}n[s]=d,r[s]=m}}),i}var HO=wM,AM={Validation:bU(yrt),MissingRef:bU(OM)};function yrt(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}OM.message=function(e,t){return"can't resolve reference "+t+" from id "+e};function OM(e,t,n){this.message=n||OM.message(e,t),this.missingRef=HO.url(e,t),this.missingSchema=HO.normalizeId(HO.fullPath(this.missingRef))}function bU(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var yZ=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(o){return function(a){return function(s,u){var c={key:s,value:a[s]},l={key:u,value:a[u]};return o(c,l)}}}(t.cmp),i=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var s,u;if(Array.isArray(a)){for(u="[",s=0;s<a.length;s++)s&&(u+=","),u+=o(a[s])||"null";return u+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=i.push(a)-1,l=Object.keys(a).sort(r&&r(a));for(u="",s=0;s<l.length;s++){var f=l[s],h=o(a[f]);h&&(u&&(u+=","),u+=JSON.stringify(f)+":"+h)}return i.splice(c,1),"{"+u+"}"}}(e)},vZ=function(e,t,n){var r="",i=e.schema.$async===!0,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var u="unknown keyword: "+s;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(r+=" var validate = ",i&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+a+" */")+" ")),typeof e.schema=="boolean"||!(o||e.schema.$ref)){var t="false schema",c=e.level,l=e.dataLevel,f=e.schema[t],h=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,_=!e.opts.allErrors,E,d="data"+(l||""),y="valid"+c;if(e.schema===!1){e.isTop?_=!0:r+=" var "+y+" = false; ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var g=r;r=m.pop(),!e.compositeRule&&_?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?i?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+y+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var v=e.isTop,c=e.level=0,l=e.dataLevel=0,d="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(b);else throw new Error(b)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var c=e.level,l=e.dataLevel,d="data"+(l||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),i&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+c+" = errors;"}var y="valid"+c,_=!e.opts.allErrors,T="",S="",E,I=e.schema.type,x=Array.isArray(I);if(I&&e.opts.nullable&&e.schema.nullable===!0&&(x?I.indexOf("null")==-1&&(I=I.concat("null")):I!="null"&&(I=[I,"null"],x=!0)),x&&I.length==1&&(I=I[0],x=!1),e.schema.$ref&&o){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),I){if(e.opts.coerceTypes)var C=e.util.coerceToTypes(e.opts.coerceTypes,I);var w=e.RULES.types[I];if(C||x||w===!0||w&&!at(w)){var h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type",B=x?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[B](I,d,e.opts.strictNumbers,!0)+") { ",C){var L="dataType"+c,k="coerced"+c;r+=" var "+L+" = typeof "+d+"; var "+k+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+L+" == 'object' && Array.isArray("+d+") && "+d+".length == 1) { "+d+" = "+d+"[0]; "+L+" = typeof "+d+"; if ("+e.util.checkDataType(e.schema.type,d,e.opts.strictNumbers)+") "+k+" = "+d+"; } "),r+=" if ("+k+" !== undefined) ; ";var R=C;if(R)for(var F,U=-1,$=R.length-1;U<$;)F=R[U+=1],F=="string"?r+=" else if ("+L+" == 'number' || "+L+" == 'boolean') "+k+" = '' + "+d+"; else if ("+d+" === null) "+k+" = ''; ":F=="number"||F=="integer"?(r+=" else if ("+L+" == 'boolean' || "+d+" === null || ("+L+" == 'string' && "+d+" && "+d+" == +"+d+" ",F=="integer"&&(r+=" && !("+d+" % 1)"),r+=")) "+k+" = +"+d+"; "):F=="boolean"?r+=" else if ("+d+" === 'false' || "+d+" === 0 || "+d+" === null) "+k+" = false; else if ("+d+" === 'true' || "+d+" === 1) "+k+" = true; ":F=="null"?r+=" else if ("+d+" === '' || "+d+" === 0 || "+d+" === false) "+k+" = null; ":e.opts.coerceTypes=="array"&&F=="array"&&(r+=" else if ("+L+" == 'string' || "+L+" == 'number' || "+L+" == 'boolean' || "+d+" == null) "+k+" = ["+d+"]; ");r+=" else {   ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",x?r+=""+I.join(","):r+=""+I,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",x?r+=""+I.join(","):r+=""+I,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var g=r;r=m.pop(),!e.compositeRule&&_?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+k+" !== undefined) {  ";var ie=l?"data"+(l-1||""):"parentData",oe=l?e.dataPathArr[l]:"parentDataProperty";r+=" "+d+" = "+k+"; ",l||(r+="if ("+ie+" !== undefined)"),r+=" "+ie+"["+oe+"] = "+k+"; } "}else{var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",x?r+=""+I.join(","):r+=""+I,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",x?r+=""+I.join(","):r+=""+I,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var g=r;r=m.pop(),!e.compositeRule&&_?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!o)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",_&&(r+=" } if (errors === ",v?r+="0":r+="errs_"+c,r+=") { ",S+="}");else{var me=e.RULES;if(me){for(var w,ae=-1,X=me.length-1;ae<X;)if(w=me[ae+=1],at(w)){if(w.type&&(r+=" if ("+e.util.checkDataType(w.type,d,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(w.type=="object"&&e.schema.properties){var f=e.schema.properties,ee=Object.keys(f),se=ee;if(se)for(var _e,Oe=-1,Re=se.length-1;Oe<Re;){_e=se[Oe+=1];var ve=f[_e];if(ve.default!==void 0){var Ne=d+e.util.getProperty(_e);if(e.compositeRule){if(e.opts.strictDefaults){var b="default is ignored for: "+Ne;if(e.opts.strictDefaults==="log")e.logger.warn(b);else throw new Error(b)}}else r+=" if ("+Ne+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ne+" === null || "+Ne+" === '' "),r+=" ) "+Ne+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ve.default)+" ":r+=" "+JSON.stringify(ve.default)+" ",r+="; "}}}else if(w.type=="array"&&Array.isArray(e.schema.items)){var He=e.schema.items;if(He){for(var ve,U=-1,be=He.length-1;U<be;)if(ve=He[U+=1],ve.default!==void 0){var Ne=d+"["+U+"]";if(e.compositeRule){if(e.opts.strictDefaults){var b="default is ignored for: "+Ne;if(e.opts.strictDefaults==="log")e.logger.warn(b);else throw new Error(b)}}else r+=" if ("+Ne+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ne+" === null || "+Ne+" === '' "),r+=" ) "+Ne+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(ve.default)+" ":r+=" "+JSON.stringify(ve.default)+" ",r+="; "}}}}var je=w.rules;if(je){for(var qe,ot=-1,ut=je.length-1;ot<ut;)if(qe=je[ot+=1],Ht(qe)){var Je=qe.code(e,qe.keyword,w.type);Je&&(r+=" "+Je+" ",_&&(T+="}"))}}if(_&&(r+=" "+T+" ",T=""),w.type&&(r+=" } ",I&&I===w.type&&!C)){r+=" else { ";var h=e.schemaPath+".type",p=e.errSchemaPath+"/type",m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",x?r+=""+I.join(","):r+=""+I,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",x?r+=""+I.join(","):r+=""+I,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var g=r;r=m.pop(),!e.compositeRule&&_?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}_&&(r+=" if (errors === ",v?r+="0":r+="errs_"+c,r+=") { ",S+="}")}}}_&&(r+=" "+S+" "),v?(i?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+y+" = errors === errs_"+c+";";function at(dr){for(var tr=dr.rules,Ie=0;Ie<tr.length;Ie++)if(Ht(tr[Ie]))return!0}function Ht(dr){return e.schema[dr.keyword]!==void 0||dr.implements&&qt(dr)}function qt(dr){for(var tr=dr.implements,Ie=0;Ie<tr.length;Ie++)if(e.schema[tr[Ie]]!==void 0)return!0}return r},zb=wM,OE=Id,bZ=AM,vrt=yZ,_U=vZ,brt=OE.ucs2length,_rt=vM,Trt=bZ.Validation,Ert=HP;function HP(e,t,n,r){var i=this,o=this._opts,a=[void 0],s={},u=[],c={},l=[],f={},h=[];t=t||{schema:e,refVal:a,refs:s};var p=Srt.call(this,e,t,r),d=this._compilations[p.index];if(p.compiling)return d.callValidate=y;var m=this._formats,g=this.RULES;try{var v=_(e,t,n,r);d.validate=v;var b=d.callValidate;return b&&(b.schema=v.schema,b.errors=null,b.refs=v.refs,b.refVal=v.refVal,b.root=v.root,b.$async=v.$async,o.sourceCode&&(b.source=v.source)),v}finally{wrt.call(this,e,t,r)}function y(){var L=d.validate,k=L.apply(this,arguments);return y.errors=L.errors,k}function _(L,k,R,F){var U=!k||k&&k.schema==L;if(k.schema!=t.schema)return HP.call(i,L,k,R,F);var $=L.$async===!0,ie=_U({isTop:!0,schema:L,isRoot:U,baseId:F,root:k,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:bZ.MissingRef,RULES:g,validate:_U,util:OE,resolve:zb,resolveRef:T,usePattern:C,useDefault:w,useCustomRule:B,opts:o,formats:m,logger:i.logger,self:i});ie=Vb(a,krt)+Vb(u,Art)+Vb(l,Ort)+Vb(h,xrt)+ie,o.processCode&&(ie=o.processCode(ie,L));var oe;try{var me=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ie);oe=me(i,g,m,t,a,l,h,_rt,brt,Trt),a[0]=oe}catch(ae){throw i.logger.error("Error compiling schema, function code:",ie),ae}return oe.schema=L,oe.errors=null,oe.refs=s,oe.refVal=a,oe.root=U?oe:k,$&&(oe.$async=!0),o.sourceCode===!0&&(oe.source={code:ie,patterns:u,defaults:l}),oe}function T(L,k,R){k=zb.url(L,k);var F=s[k],U,$;if(F!==void 0)return U=a[F],$="refVal["+F+"]",x(U,$);if(!R&&t.refs){var ie=t.refs[k];if(ie!==void 0)return U=t.refVal[ie],$=S(k,U),x(U,$)}$=S(k);var oe=zb.call(i,_,t,k);if(oe===void 0){var me=n&&n[k];me&&(oe=zb.inlineRef(me,o.inlineRefs)?me:HP.call(i,me,t,n,L))}if(oe===void 0)E(k);else return I(k,oe),x(oe,$)}function S(L,k){var R=a.length;return a[R]=k,s[L]=R,"refVal"+R}function E(L){delete s[L]}function I(L,k){var R=s[L];a[R]=k}function x(L,k){return typeof L=="object"||typeof L=="boolean"?{code:k,schema:L,inline:!0}:{code:k,$async:L&&!!L.$async}}function C(L){var k=c[L];return k===void 0&&(k=c[L]=u.length,u[k]=L),"pattern"+k}function w(L){switch(typeof L){case"boolean":case"number":return""+L;case"string":return OE.toQuotedString(L);case"object":if(L===null)return"null";var k=vrt(L),R=f[k];return R===void 0&&(R=f[k]=l.length,l[R]=L),"default"+R}}function B(L,k,R,F){if(i._opts.validateSchema!==!1){var U=L.definition.dependencies;if(U&&!U.every(function(_e){return Object.prototype.hasOwnProperty.call(R,_e)}))throw new Error("parent schema must have all required keywords: "+U.join(","));var $=L.definition.validateSchema;if($){var ie=$(k);if(!ie){var oe="keyword schema is invalid: "+i.errorsText($.errors);if(i._opts.validateSchema=="log")i.logger.error(oe);else throw new Error(oe)}}}var me=L.definition.compile,ae=L.definition.inline,X=L.definition.macro,ee;if(me)ee=me.call(i,k,R,F);else if(X)ee=X.call(i,k,R,F),o.validateSchema!==!1&&i.validateSchema(ee,!0);else if(ae)ee=ae.call(i,F,L.keyword,k,R);else if(ee=L.definition.validate,!ee)return;if(ee===void 0)throw new Error('custom keyword "'+L.keyword+'"failed to compile');var se=h.length;return h[se]=ee,{code:"customRule"+se,validate:ee}}}function Srt(e,t,n){var r=_Z.call(this,e,t,n);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:e,root:t,baseId:n},{index:r,compiling:!1})}function wrt(e,t,n){var r=_Z.call(this,e,t,n);r>=0&&this._compilations.splice(r,1)}function _Z(e,t,n){for(var r=0;r<this._compilations.length;r++){var i=this._compilations[r];if(i.schema==e&&i.root==t&&i.baseId==n)return r}return-1}function Art(e,t){return"var pattern"+e+" = new RegExp("+OE.toQuotedString(t[e])+");"}function Ort(e){return"var default"+e+" = defaults["+e+"];"}function krt(e,t){return t[e]===void 0?"":"var refVal"+e+" = refVal["+e+"];"}function xrt(e){return"var customRule"+e+" = customRules["+e+"];"}function Vb(e,t){if(!e.length)return"";for(var n="",r=0;r<e.length;r++)n+=t(r,e);return n}var TZ={exports:{}},jS=TZ.exports=function(){this._cache={}};jS.prototype.put=function(e,t){this._cache[e]=t};jS.prototype.get=function(e){return this._cache[e]};jS.prototype.del=function(e){delete this._cache[e]};jS.prototype.clear=function(){this._cache={}};var Irt=TZ.exports,Crt=Id,Prt=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Drt=[0,31,28,31,30,31,30,31,31,30,31,30,31],Rrt=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,EZ=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Nrt=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Mrt=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,SZ=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,wZ=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,AZ=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,OZ=/^(?:\/(?:[^~/]|~0|~1)*)*$/,kZ=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,xZ=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Lrt=BS;function BS(e){return e=e=="full"?"full":"fast",Crt.copy(BS[e])}BS.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":SZ,url:wZ,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:EZ,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:PZ,uuid:AZ,"json-pointer":OZ,"json-pointer-uri-fragment":kZ,"relative-json-pointer":xZ};BS.full={date:IZ,time:CZ,"date-time":Frt,uri:Hrt,"uri-reference":Mrt,"uri-template":SZ,url:wZ,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:EZ,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:PZ,uuid:AZ,"json-pointer":OZ,"json-pointer-uri-fragment":kZ,"relative-json-pointer":xZ};function jrt(e){return e%4===0&&(e%100!==0||e%400===0)}function IZ(e){var t=e.match(Prt);if(!t)return!1;var n=+t[1],r=+t[2],i=+t[3];return r>=1&&r<=12&&i>=1&&i<=(r==2&&jrt(n)?29:Drt[r])}function CZ(e,t){var n=e.match(Rrt);if(!n)return!1;var r=n[1],i=n[2],o=n[3],a=n[5];return(r<=23&&i<=59&&o<=59||r==23&&i==59&&o==60)&&(!t||a)}var Brt=/t|\s/i;function Frt(e){var t=e.split(Brt);return t.length==2&&IZ(t[0])&&CZ(t[1],!0)}var Grt=/\/|:/;function Hrt(e){return Grt.test(e)&&Nrt.test(e)}var Urt=/[^\\]\\Z/;function PZ(e){if(Urt.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}var zrt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c="data"+(o||""),l="valid"+i,f,h;if(a=="#"||a=="#/")e.isRoot?(f=e.async,h="validate"):(f=e.root.schema.$async===!0,h="root.refVal[0]");else{var p=e.resolveRef(e.baseId,a,e.isRoot);if(p===void 0){var d=e.MissingRefError.message(e.baseId,a);if(e.opts.missingRefs=="fail"){e.logger.error(d);var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { ref: '"+e.util.escapeQuotes(a)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(a)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(a)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var g=r;r=m.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(d),u&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,a,d)}else if(p.inline){var v=e.util.copy(e);v.level++;var b="valid"+v.level;v.schema=p.schema,v.schemaPath="",v.errSchemaPath=a;var y=e.validate(v).replace(/validate\.schema/g,p.code);r+=" "+y+" ",u&&(r+=" if ("+b+") { ")}else f=p.$async===!0||e.async&&p.$async!==!1,h=p.code}if(h){var m=m||[];m.push(r),r="",e.opts.passContext?r+=" "+h+".call(this, ":r+=" "+h+"( ",r+=" "+c+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var _=o?"data"+(o-1||""):"parentData",T=o?e.dataPathArr[o]:"parentDataProperty";r+=" , "+_+" , "+T+", rootData)  ";var S=r;if(r=m.pop(),f){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(r+=" var "+l+"; "),r+=" try { await "+S+"; ",u&&(r+=" "+l+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(r+=" "+l+" = false; "),r+=" } ",u&&(r+=" if ("+l+") { ")}else r+=" if (!"+S+") { if (vErrors === null) vErrors = "+h+".errors; else vErrors = vErrors.concat("+h+".errors); errors = vErrors.length; } ",u&&(r+=" else { ")}return r},Vrt=function(e,t,n){var r=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,u=e.util.copy(e),c="";u.level++;var l="valid"+u.level,f=u.baseId,h=!0,p=i;if(p)for(var d,m=-1,g=p.length-1;m<g;)d=p[m+=1],(e.opts.strictKeywords?typeof d=="object"&&Object.keys(d).length>0||d===!1:e.util.schemaHasRules(d,e.RULES.all))&&(h=!1,u.schema=d,u.schemaPath=o+"["+m+"]",u.errSchemaPath=a+"/"+m,r+="  "+e.validate(u)+" ",u.baseId=f,s&&(r+=" if ("+l+") { ",c+="}"));return s&&(h?r+=" if (true) { ":r+=" "+c.slice(0,-1)+" "),r},Yrt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="valid"+i,h="errs__"+i,p=e.util.copy(e),d="";p.level++;var m="valid"+p.level,g=a.every(function(E){return e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all)});if(g){var v=p.baseId;r+=" var "+h+" = errors; var "+f+" = false;  ";var b=e.compositeRule;e.compositeRule=p.compositeRule=!0;var y=a;if(y)for(var _,T=-1,S=y.length-1;T<S;)_=y[T+=1],p.schema=_,p.schemaPath=s+"["+T+"]",p.errSchemaPath=u+"/"+T,r+="  "+e.validate(p)+" ",p.baseId=v,r+=" "+f+" = "+f+" || "+m+"; if (!"+f+") { ",d+="}";e.compositeRule=p.compositeRule=b,r+=" "+d+" if (!"+f+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else c&&(r+=" if (true) { ");return r},Xrt=function(e,t,n){var r=" ",i=e.schema[t],o=e.errSchemaPath+"/"+t;e.opts.allErrors;var a=e.util.toQuotedString(i);return e.opts.$comment===!0?r+=" console.log("+a+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+a+", "+e.util.toQuotedString(o)+", validate.root.schema);"),r},Wrt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; "),h||(r+=" var schema"+i+" = validate.schema"+s+";"),r+="var "+f+" = equal("+l+", schema"+i+"); if (!"+f+") {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+i+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var d=r;return r=p.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",c&&(r+=" else { "),r},qrt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="valid"+i,h="errs__"+i,p=e.util.copy(e),d="";p.level++;var m="valid"+p.level,g="i"+i,v=p.dataLevel=e.dataLevel+1,b="data"+v,y=e.baseId,_=e.opts.strictKeywords?typeof a=="object"&&Object.keys(a).length>0||a===!1:e.util.schemaHasRules(a,e.RULES.all);if(r+="var "+h+" = errors;var "+f+";",_){var T=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=a,p.schemaPath=s,p.errSchemaPath=u,r+=" var "+m+" = false; for (var "+g+" = 0; "+g+" < "+l+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var S=l+"["+g+"]";p.dataPathArr[v]=g;var E=e.validate(p);p.baseId=y,e.util.varOccurences(E,b)<2?r+=" "+e.util.varReplace(E,b,S)+" ":r+=" var "+b+" = "+S+"; "+E+" ",r+=" if ("+m+") break; }  ",e.compositeRule=p.compositeRule=T,r+=" "+d+" if (!"+m+") {"}else r+=" if ("+l+".length == 0) {";var I=I||[];I.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var x=r;return r=I.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+x+"]); ":r+=" validate.errors = ["+x+"]; return false; ":r+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",_&&(r+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r},$rt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="errs__"+i,h=e.util.copy(e),p="";h.level++;var d="valid"+h.level,m={},g={},v=e.opts.ownProperties;for(T in a)if(T!="__proto__"){var b=a[T],y=Array.isArray(b)?g:m;y[T]=b}r+="var "+f+" = errors;";var _=e.errorPath;r+="var missing"+i+";";for(var T in g)if(y=g[T],y.length){if(r+=" if ( "+l+e.util.getProperty(T)+" !== undefined ",v&&(r+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(T)+"') "),c){r+=" && ( ";var S=y;if(S)for(var E,I=-1,x=S.length-1;I<x;){E=S[I+=1],I&&(r+=" || ");var C=e.util.getProperty(E),w=l+C;r+=" ( ( "+w+" === undefined ",v&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(E)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?E:C)+") ) "}r+=")) {  ";var B="missing"+i,L="' + "+B+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,B,!0):_+" + "+B);var k=k||[];k.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(T)+"', missingProperty: '"+L+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(y.length==1?y[0]:y.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",y.length==1?r+="property "+e.util.escapeQuotes(y[0]):r+="properties "+e.util.escapeQuotes(y.join(", ")),r+=" when property "+e.util.escapeQuotes(T)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var R=r;r=k.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var F=y;if(F)for(var E,U=-1,$=F.length-1;U<$;){E=F[U+=1];var C=e.util.getProperty(E),L=e.util.escapeQuotes(E),w=l+C;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,E,e.opts.jsonPointers)),r+=" if ( "+w+" === undefined ",v&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(E)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(T)+"', missingProperty: '"+L+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(y.length==1?y[0]:y.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",y.length==1?r+="property "+e.util.escapeQuotes(y[0]):r+="properties "+e.util.escapeQuotes(y.join(", ")),r+=" when property "+e.util.escapeQuotes(T)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",c&&(p+="}",r+=" else { ")}e.errorPath=_;var ie=h.baseId;for(var T in m){var b=m[T];(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all))&&(r+=" "+d+" = true; if ( "+l+e.util.getProperty(T)+" !== undefined ",v&&(r+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(T)+"') "),r+=") { ",h.schema=b,h.schemaPath=s+e.util.getProperty(T),h.errSchemaPath=u+"/"+e.util.escapeFragment(T),r+="  "+e.validate(h)+" ",h.baseId=ie,r+=" }  ",c&&(r+=" if ("+d+") { ",p+="}"))}return c&&(r+="   "+p+" if ("+f+" == errors) {"),r},Krt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var p="i"+i,d="schema"+i;h||(r+=" var "+d+" = validate.schema"+s+";"),r+="var "+f+";",h&&(r+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),r+=""+f+" = false;for (var "+p+"=0; "+p+"<"+d+".length; "+p+"++) if (equal("+l+", "+d+"["+p+"])) { "+f+" = true; break; }",h&&(r+="  }  "),r+=" if (!"+f+") {   ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+i+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",c&&(r+=" else { "),r},Qrt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||"");if(e.opts.format===!1)return c&&(r+=" if (true) { "),r;var f=e.opts.$data&&a&&a.$data,h;f?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a;var p=e.opts.unknownFormats,d=Array.isArray(p);if(f){var m="format"+i,g="isObject"+i,v="formatType"+i;r+=" var "+m+" = formats["+h+"]; var "+g+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+v+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(r+=" var async"+i+" = "+m+".async; "),r+=" "+m+" = "+m+".validate; } if (  ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),r+=" (",p!="ignore"&&(r+=" ("+h+" && !"+m+" ",d&&(r+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),r+=") || "),r+=" ("+m+" && "+v+" == '"+n+"' && !(typeof "+m+" == 'function' ? ",e.async?r+=" (async"+i+" ? await "+m+"("+l+") : "+m+"("+l+")) ":r+=" "+m+"("+l+") ",r+=" : "+m+".test("+l+"))))) {"}else{var m=e.formats[a];if(!m){if(p=="ignore")return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(r+=" if (true) { "),r;if(d&&p.indexOf(a)>=0)return c&&(r+=" if (true) { "),r;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var g=typeof m=="object"&&!(m instanceof RegExp)&&m.validate,v=g&&m.type||"string";if(g){var b=m.async===!0;m=m.validate}if(v!=n)return c&&(r+=" if (true) { "),r;if(b){if(!e.async)throw new Error("async format in sync schema");var y="formats"+e.util.getProperty(a)+".validate";r+=" if (!(await "+y+"("+l+"))) { "}else{r+=" if (! ";var y="formats"+e.util.getProperty(a);g&&(y+=".validate"),typeof m=="function"?r+=" "+y+"("+l+") ":r+=" "+y+".test("+l+") ",r+=") { "}}var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",f?r+=""+h:r+=""+e.util.toQuotedString(a),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,f?r+="' + "+h+" + '":r+=""+e.util.escapeQuotes(a),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+s:r+=""+e.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var T=r;return r=_.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c&&(r+=" else { "),r},Zrt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="valid"+i,h="errs__"+i,p=e.util.copy(e);p.level++;var d="valid"+p.level,m=e.schema.then,g=e.schema.else,v=m!==void 0&&(e.opts.strictKeywords?typeof m=="object"&&Object.keys(m).length>0||m===!1:e.util.schemaHasRules(m,e.RULES.all)),b=g!==void 0&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all)),y=p.baseId;if(v||b){var _;p.createErrors=!1,p.schema=a,p.schemaPath=s,p.errSchemaPath=u,r+=" var "+h+" = errors; var "+f+" = true;  ";var T=e.compositeRule;e.compositeRule=p.compositeRule=!0,r+="  "+e.validate(p)+" ",p.baseId=y,p.createErrors=!0,r+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=T,v?(r+=" if ("+d+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(p)+" ",p.baseId=y,r+=" "+f+" = "+d+"; ",v&&b?(_="ifClause"+i,r+=" var "+_+" = 'then'; "):_="'then'",r+=" } ",b&&(r+=" else { ")):r+=" if (!"+d+") { ",b&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(p)+" ",p.baseId=y,r+=" "+f+" = "+d+"; ",v&&b?(_="ifClause"+i,r+=" var "+_+" = 'else'; "):_="'else'",r+=" } "),r+=" if (!"+f+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+_+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+_+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",c&&(r+=" else { ")}else c&&(r+=" if (true) { ");return r},Jrt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="valid"+i,h="errs__"+i,p=e.util.copy(e),d="";p.level++;var m="valid"+p.level,g="i"+i,v=p.dataLevel=e.dataLevel+1,b="data"+v,y=e.baseId;if(r+="var "+h+" = errors;var "+f+";",Array.isArray(a)){var _=e.schema.additionalItems;if(_===!1){r+=" "+f+" = "+l+".length <= "+a.length+"; ";var T=u;u=e.errSchemaPath+"/additionalItems",r+="  if (!"+f+") {   ";var S=S||[];S.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+a.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var E=r;r=S.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u=T,c&&(d+="}",r+=" else { ")}var I=a;if(I){for(var x,C=-1,w=I.length-1;C<w;)if(x=I[C+=1],e.opts.strictKeywords?typeof x=="object"&&Object.keys(x).length>0||x===!1:e.util.schemaHasRules(x,e.RULES.all)){r+=" "+m+" = true; if ("+l+".length > "+C+") { ";var B=l+"["+C+"]";p.schema=x,p.schemaPath=s+"["+C+"]",p.errSchemaPath=u+"/"+C,p.errorPath=e.util.getPathExpr(e.errorPath,C,e.opts.jsonPointers,!0),p.dataPathArr[v]=C;var L=e.validate(p);p.baseId=y,e.util.varOccurences(L,b)<2?r+=" "+e.util.varReplace(L,b,B)+" ":r+=" var "+b+" = "+B+"; "+L+" ",r+=" }  ",c&&(r+=" if ("+m+") { ",d+="}")}}if(typeof _=="object"&&(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))){p.schema=_,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+m+" = true; if ("+l+".length > "+a.length+") {  for (var "+g+" = "+a.length+"; "+g+" < "+l+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var B=l+"["+g+"]";p.dataPathArr[v]=g;var L=e.validate(p);p.baseId=y,e.util.varOccurences(L,b)<2?r+=" "+e.util.varReplace(L,b,B)+" ":r+=" var "+b+" = "+B+"; "+L+" ",c&&(r+=" if (!"+m+") break; "),r+=" } }  ",c&&(r+=" if ("+m+") { ",d+="}")}}else if(e.opts.strictKeywords?typeof a=="object"&&Object.keys(a).length>0||a===!1:e.util.schemaHasRules(a,e.RULES.all)){p.schema=a,p.schemaPath=s,p.errSchemaPath=u,r+="  for (var "+g+" = 0; "+g+" < "+l+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var B=l+"["+g+"]";p.dataPathArr[v]=g;var L=e.validate(p);p.baseId=y,e.util.varOccurences(L,b)<2?r+=" "+e.util.varReplace(L,b,B)+" ":r+=" var "+b+" = "+B+"; "+L+" ",c&&(r+=" if (!"+m+") break; "),r+=" }"}return c&&(r+=" "+d+" if ("+h+" == errors) {"),r},TU=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,y,l="data"+(o||""),f=e.opts.$data&&a&&a.$data,h;f?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a;var p=t=="maximum",d=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[d],g=e.opts.$data&&m&&m.$data,v=p?"<":">",b=p?">":"<",y=void 0;if(!(f||typeof a=="number"||a===void 0))throw new Error(t+" must be number");if(!(g||m===void 0||typeof m=="number"||typeof m=="boolean"))throw new Error(d+" must be number or boolean");if(g){var _=e.util.getData(m.$data,o,e.dataPathArr),T="exclusive"+i,S="exclType"+i,E="exclIsNumber"+i,I="op"+i,x="' + "+I+" + '";r+=" var schemaExcl"+i+" = "+_+"; ",_="schemaExcl"+i,r+=" var "+T+"; var "+S+" = typeof "+_+"; if ("+S+" != 'boolean' && "+S+" != 'undefined' && "+S+" != 'number') { ";var y=d,C=C||[];C.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(y||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+d+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var w=r;r=C.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),r+=" "+S+" == 'number' ? ( ("+T+" = "+h+" === undefined || "+_+" "+v+"= "+h+") ? "+l+" "+b+"= "+_+" : "+l+" "+b+" "+h+" ) : ( ("+T+" = "+_+" === true) ? "+l+" "+b+"= "+h+" : "+l+" "+b+" "+h+" ) || "+l+" !== "+l+") { var op"+i+" = "+T+" ? '"+v+"' : '"+v+"='; ",a===void 0&&(y=d,u=e.errSchemaPath+"/"+d,h=_,f=g)}else{var E=typeof m=="number",x=v;if(E&&f){var I="'"+x+"'";r+=" if ( ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),r+=" ( "+h+" === undefined || "+m+" "+v+"= "+h+" ? "+l+" "+b+"= "+m+" : "+l+" "+b+" "+h+" ) || "+l+" !== "+l+") { "}else{E&&a===void 0?(T=!0,y=d,u=e.errSchemaPath+"/"+d,h=m,b+="="):(E&&(h=Math[p?"min":"max"](m,a)),m===(E?h:!0)?(T=!0,y=d,u=e.errSchemaPath+"/"+d,b+="="):(T=!1,x+="="));var I="'"+x+"'";r+=" if ( ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),r+=" "+l+" "+b+" "+h+" || "+l+" !== "+l+") { "}}y=y||t;var C=C||[];C.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(y||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+I+", limit: "+h+", exclusive: "+T+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+x+" ",f?r+="' + "+h:r+=""+h+"'"),e.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+s:r+=""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var w=r;return r=C.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c&&(r+=" else { "),r},EU=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d,l="data"+(o||""),f=e.opts.$data&&a&&a.$data,h;if(f?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a,!(f||typeof a=="number"))throw new Error(t+" must be number");var p=t=="maxItems"?">":"<";r+="if ( ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),r+=" "+l+".length "+p+" "+h+") { ";var d=t,m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",f?r+="' + "+h+" + '":r+=""+a,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+s:r+=""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",c&&(r+=" else { "),r},SU=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d,l="data"+(o||""),f=e.opts.$data&&a&&a.$data,h;if(f?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a,!(f||typeof a=="number"))throw new Error(t+" must be number");var p=t=="maxLength"?">":"<";r+="if ( ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),e.opts.unicode===!1?r+=" "+l+".length ":r+=" ucs2length("+l+") ",r+=" "+p+" "+h+") { ";var d=t,m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(d||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",f?r+="' + "+h+" + '":r+=""+a,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+s:r+=""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",c&&(r+=" else { "),r},wU=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,d,l="data"+(o||""),f=e.opts.$data&&a&&a.$data,h;if(f?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a,!(f||typeof a=="number"))throw new Error(t+" must be number");var p=t=="maxProperties"?">":"<";r+="if ( ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'number') || "),r+=" Object.keys("+l+").length "+p+" "+h+") { ";var d=t,m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+h+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",f?r+="' + "+h+" + '":r+=""+a,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+s:r+=""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",c&&(r+=" else { "),r},ent=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f=e.opts.$data&&a&&a.$data,h;if(f?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a,!(f||typeof a=="number"))throw new Error(t+" must be number");r+="var division"+i+";if (",f&&(r+=" "+h+" !== undefined && ( typeof "+h+" != 'number' || "),r+=" (division"+i+" = "+l+" / "+h+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+i+" !== parseInt(division"+i+") ",r+=" ) ",f&&(r+="  )  "),r+=" ) {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+h+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",f?r+="' + "+h:r+=""+h+"'"),e.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+s:r+=""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var d=r;return r=p.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",c&&(r+=" else { "),r},tnt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="errs__"+i,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?typeof a=="object"&&Object.keys(a).length>0||a===!1:e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=s,h.errSchemaPath=u,r+=" var "+f+" = errors;  ";var d=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1;var m;h.opts.allErrors&&(m=h.opts.allErrors,h.opts.allErrors=!1),r+=" "+e.validate(h)+" ",h.createErrors=!0,m&&(h.opts.allErrors=m),e.compositeRule=h.compositeRule=d,r+=" if ("+p+") {   ";var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(r+=" if (false) { ");return r},rnt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="valid"+i,h="errs__"+i,p=e.util.copy(e),d="";p.level++;var m="valid"+p.level,g=p.baseId,v="prevValid"+i,b="passingSchemas"+i;r+="var "+h+" = errors , "+v+" = false , "+f+" = false , "+b+" = null; ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var _=a;if(_)for(var T,S=-1,E=_.length-1;S<E;)T=_[S+=1],(e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all))?(p.schema=T,p.schemaPath=s+"["+S+"]",p.errSchemaPath=u+"/"+S,r+="  "+e.validate(p)+" ",p.baseId=g):r+=" var "+m+" = true; ",S&&(r+=" if ("+m+" && "+v+") { "+f+" = false; "+b+" = ["+b+", "+S+"]; } else { ",d+="}"),r+=" if ("+m+") { "+f+" = "+v+" = true; "+b+" = "+S+"; }";return e.compositeRule=p.compositeRule=y,r+=""+d+"if (!"+f+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+b+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r},nnt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f=e.opts.$data&&a&&a.$data,h;f?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a;var p=f?"(new RegExp("+h+"))":e.usePattern(a);r+="if ( ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),r+=" !"+p+".test("+l+") ) {   ";var d=d||[];d.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",f?r+=""+h:r+=""+e.util.toQuotedString(a),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,f?r+="' + "+h+" + '":r+=""+e.util.escapeQuotes(a),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",f?r+="validate.schema"+s:r+=""+e.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var m=r;return r=d.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",c&&(r+=" else { "),r},int=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="errs__"+i,h=e.util.copy(e),p="";h.level++;var d="valid"+h.level,m="key"+i,g="idx"+i,v=h.dataLevel=e.dataLevel+1,b="data"+v,y="dataProperties"+i,_=Object.keys(a||{}).filter(U),T=e.schema.patternProperties||{},S=Object.keys(T).filter(U),E=e.schema.additionalProperties,I=_.length||S.length,x=E===!1,C=typeof E=="object"&&Object.keys(E).length,w=e.opts.removeAdditional,B=x||C||w,L=e.opts.ownProperties,k=e.baseId,R=e.schema.required;if(R&&!(e.opts.$data&&R.$data)&&R.length<e.opts.loopRequired)var F=e.util.toHash(R);function U(ye){return ye!=="__proto__"}if(r+="var "+f+" = errors;var "+d+" = true;",L&&(r+=" var "+y+" = undefined;"),B){if(L?r+=" "+y+" = "+y+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+y+".length; "+g+"++) { var "+m+" = "+y+"["+g+"]; ":r+=" for (var "+m+" in "+l+") { ",I){if(r+=" var isAdditional"+i+" = !(false ",_.length)if(_.length>8)r+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else{var $=_;if($)for(var ie,oe=-1,me=$.length-1;oe<me;)ie=$[oe+=1],r+=" || "+m+" == "+e.util.toQuotedString(ie)+" "}if(S.length){var ae=S;if(ae)for(var X,ee=-1,se=ae.length-1;ee<se;)X=ae[ee+=1],r+=" || "+e.usePattern(X)+".test("+m+") "}r+=" ); if (isAdditional"+i+") { "}if(w=="all")r+=" delete "+l+"["+m+"]; ";else{var _e=e.errorPath,Oe="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),x)if(w)r+=" delete "+l+"["+m+"]; ";else{r+=" "+d+" = false; ";var Re=u;u=e.errSchemaPath+"/additionalProperties";var ve=ve||[];ve.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+Oe+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var Ne=r;r=ve.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+Ne+"]); ":r+=" validate.errors = ["+Ne+"]; return false; ":r+=" var err = "+Ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=Re,c&&(r+=" break; ")}else if(C)if(w=="failing"){r+=" var "+f+" = errors;  ";var He=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var be=l+"["+m+"]";h.dataPathArr[v]=m;var je=e.validate(h);h.baseId=k,e.util.varOccurences(je,b)<2?r+=" "+e.util.varReplace(je,b,be)+" ":r+=" var "+b+" = "+be+"; "+je+" ",r+=" if (!"+d+") { errors = "+f+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+m+"]; }  ",e.compositeRule=h.compositeRule=He}else{h.schema=E,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var be=l+"["+m+"]";h.dataPathArr[v]=m;var je=e.validate(h);h.baseId=k,e.util.varOccurences(je,b)<2?r+=" "+e.util.varReplace(je,b,be)+" ":r+=" var "+b+" = "+be+"; "+je+" ",c&&(r+=" if (!"+d+") break; ")}e.errorPath=_e}I&&(r+=" } "),r+=" }  ",c&&(r+=" if ("+d+") { ",p+="}")}var qe=e.opts.useDefaults&&!e.compositeRule;if(_.length){var ot=_;if(ot)for(var ie,ut=-1,Je=ot.length-1;ut<Je;){ie=ot[ut+=1];var at=a[ie];if(e.opts.strictKeywords?typeof at=="object"&&Object.keys(at).length>0||at===!1:e.util.schemaHasRules(at,e.RULES.all)){var Ht=e.util.getProperty(ie),be=l+Ht,qt=qe&&at.default!==void 0;h.schema=at,h.schemaPath=s+Ht,h.errSchemaPath=u+"/"+e.util.escapeFragment(ie),h.errorPath=e.util.getPath(e.errorPath,ie,e.opts.jsonPointers),h.dataPathArr[v]=e.util.toQuotedString(ie);var je=e.validate(h);if(h.baseId=k,e.util.varOccurences(je,b)<2){je=e.util.varReplace(je,b,be);var dr=be}else{var dr=b;r+=" var "+b+" = "+be+"; "}if(qt)r+=" "+je+" ";else{if(F&&F[ie]){r+=" if ( "+dr+" === undefined ",L&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(ie)+"') "),r+=") { "+d+" = false; ";var _e=e.errorPath,Re=u,tr=e.util.escapeQuotes(ie);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_e,ie,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var ve=ve||[];ve.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+tr+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+tr+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var Ne=r;r=ve.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+Ne+"]); ":r+=" validate.errors = ["+Ne+"]; return false; ":r+=" var err = "+Ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=Re,e.errorPath=_e,r+=" } else { "}else c?(r+=" if ( "+dr+" === undefined ",L&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(ie)+"') "),r+=") { "+d+" = true; } else { "):(r+=" if ("+dr+" !== undefined ",L&&(r+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(ie)+"') "),r+=" ) { ");r+=" "+je+" } "}}c&&(r+=" if ("+d+") { ",p+="}")}}if(S.length){var Ie=S;if(Ie)for(var X,te=-1,le=Ie.length-1;te<le;){X=Ie[te+=1];var at=T[X];if(e.opts.strictKeywords?typeof at=="object"&&Object.keys(at).length>0||at===!1:e.util.schemaHasRules(at,e.RULES.all)){h.schema=at,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(X),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(X),L?r+=" "+y+" = "+y+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+y+".length; "+g+"++) { var "+m+" = "+y+"["+g+"]; ":r+=" for (var "+m+" in "+l+") { ",r+=" if ("+e.usePattern(X)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var be=l+"["+m+"]";h.dataPathArr[v]=m;var je=e.validate(h);h.baseId=k,e.util.varOccurences(je,b)<2?r+=" "+e.util.varReplace(je,b,be)+" ":r+=" var "+b+" = "+be+"; "+je+" ",c&&(r+=" if (!"+d+") break; "),r+=" } ",c&&(r+=" else "+d+" = true; "),r+=" }  ",c&&(r+=" if ("+d+") { ",p+="}")}}}return c&&(r+=" "+p+" if ("+f+" == errors) {"),r},ont=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="errs__"+i,h=e.util.copy(e),p="";h.level++;var d="valid"+h.level;if(r+="var "+f+" = errors;",e.opts.strictKeywords?typeof a=="object"&&Object.keys(a).length>0||a===!1:e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=s,h.errSchemaPath=u;var m="key"+i,g="idx"+i,v="i"+i,b="' + "+m+" + '",y=h.dataLevel=e.dataLevel+1,_="data"+y,T="dataProperties"+i,S=e.opts.ownProperties,E=e.baseId;S&&(r+=" var "+T+" = undefined; "),S?r+=" "+T+" = "+T+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+T+".length; "+g+"++) { var "+m+" = "+T+"["+g+"]; ":r+=" for (var "+m+" in "+l+") { ",r+=" var startErrs"+i+" = errors; ";var I=m,x=e.compositeRule;e.compositeRule=h.compositeRule=!0;var C=e.validate(h);h.baseId=E,e.util.varOccurences(C,_)<2?r+=" "+e.util.varReplace(C,_,I)+" ":r+=" var "+_+" = "+I+"; "+C+" ",e.compositeRule=h.compositeRule=x,r+=" if (!"+d+") { for (var "+v+"=startErrs"+i+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+m+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+b+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+b+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),c&&(r+=" break; "),r+=" } }"}return c&&(r+=" "+p+" if ("+f+" == errors) {"),r},ant=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="valid"+i,h=e.opts.$data&&a&&a.$data;h&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var p="schema"+i;if(!h)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var y=[],d=a;if(d)for(var m,g=-1,v=d.length-1;g<v;){m=d[g+=1];var b=e.schema.properties[m];b&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all))||(y[y.length]=m)}}else var y=a;if(h||y.length){var _=e.errorPath,T=h||y.length>=e.opts.loopRequired,S=e.opts.ownProperties;if(c)if(r+=" var missing"+i+"; ",T){h||(r+=" var "+p+" = validate.schema"+s+"; ");var E="i"+i,I="schema"+i+"["+E+"]",x="' + "+I+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,I,e.opts.jsonPointers)),r+=" var "+f+" = true; ",h&&(r+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),r+=" for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { "+f+" = "+l+"["+p+"["+E+"]] !== undefined ",S&&(r+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+p+"["+E+"]) "),r+="; if (!"+f+") break; } ",h&&(r+="  }  "),r+="  if (!"+f+") {   ";var C=C||[];C.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var w=r;r=C.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var B=y;if(B)for(var L,E=-1,k=B.length-1;E<k;){L=B[E+=1],E&&(r+=" || ");var R=e.util.getProperty(L),F=l+R;r+=" ( ( "+F+" === undefined ",S&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(L)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?L:R)+") ) "}r+=") {  ";var I="missing"+i,x="' + "+I+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,I,!0):_+" + "+I);var C=C||[];C.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var w=r;r=C.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(T){h||(r+=" var "+p+" = validate.schema"+s+"; ");var E="i"+i,I="schema"+i+"["+E+"]",x="' + "+I+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,I,e.opts.jsonPointers)),h&&(r+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),r+=" for (var "+E+" = 0; "+E+" < "+p+".length; "+E+"++) { if ("+l+"["+p+"["+E+"]] === undefined ",S&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+p+"["+E+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(r+="  }  ")}else{var U=y;if(U)for(var L,$=-1,ie=U.length-1;$<ie;){L=U[$+=1];var R=e.util.getProperty(L),x=e.util.escapeQuotes(L),F=l+R;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,L,e.opts.jsonPointers)),r+=" if ( "+F+" === undefined ",S&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(L)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+x+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else c&&(r+=" if (true) {");return r},snt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),f="valid"+i,h=e.opts.$data&&a&&a.$data,p;if(h?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",p="schema"+i):p=a,(a||h)&&e.opts.uniqueItems!==!1){h&&(r+=" var "+f+"; if ("+p+" === false || "+p+" === undefined) "+f+" = true; else if (typeof "+p+" != 'boolean') "+f+" = false; else { "),r+=" var i = "+l+".length , "+f+" = true , j; if (i > 1) { ";var d=e.schema.items&&e.schema.items.type,m=Array.isArray(d);if(!d||d=="object"||d=="array"||m&&(d.indexOf("object")>=0||d.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+l+"[i], "+l+"[j])) { "+f+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+l+"[i]; ";var g="checkDataType"+(m?"s":"");r+=" if ("+e.util[g](d,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",h&&(r+="  }  "),r+=" if (!"+f+") {   ";var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+s:r+=""+a,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var b=r;r=v.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c&&(r+=" else { ")}else c&&(r+=" if (true) { ");return r},lnt={$ref:zrt,allOf:Vrt,anyOf:Yrt,$comment:Xrt,const:Wrt,contains:qrt,dependencies:$rt,enum:Krt,format:Qrt,if:Zrt,items:Jrt,maximum:TU,minimum:TU,maxItems:EU,minItems:EU,maxLength:SU,minLength:SU,maxProperties:wU,minProperties:wU,multipleOf:ent,not:tnt,oneOf:rnt,pattern:nnt,properties:int,propertyNames:ont,required:ant,uniqueItems:snt,validate:vZ},AU=lnt,UO=Id.toHash,unt=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=UO(t),e.types=UO(r),e.forEach(function(i){i.rules=i.rules.map(function(o){var a;if(typeof o=="object"){var s=Object.keys(o)[0];a=o[s],o=s,a.forEach(function(c){t.push(c),e.all[c]=!0})}t.push(o);var u=e.all[o]={keyword:o,code:AU[o],implements:a};return u}),e.all.$comment={keyword:"$comment",code:AU.$comment},i.type&&(e.types[i.type]=i)}),e.keywords=UO(t.concat(n)),e.custom={},e},OU=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],cnt=function(e,t){for(var n=0;n<t.length;n++){e=JSON.parse(JSON.stringify(e));var r=t[n].split("/"),i=e,o;for(o=1;o<r.length;o++)i=i[r[o]];for(o=0;o<OU.length;o++){var a=OU[o],s=i[a];s&&(i[a]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},hnt=AM.MissingRef,fnt=DZ;function DZ(e,t,n){var r=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof t=="function"&&(n=t,t=void 0);var i=o(e).then(function(){var s=r._addSchema(e,void 0,t);return s.validate||a(s)});return n&&i.then(function(s){n(null,s)},n),i;function o(s){var u=s.$schema;return u&&!r.getSchema(u)?DZ.call(r,{$ref:u},!0):Promise.resolve()}function a(s){try{return r._compile(s)}catch(c){if(c instanceof hnt)return u(c);throw c}function u(c){var l=c.missingSchema;if(p(l))throw new Error("Schema "+l+" is loaded but "+c.missingRef+" cannot be resolved");var f=r._loadingSchemas[l];return f||(f=r._loadingSchemas[l]=r._opts.loadSchema(l),f.then(h,h)),f.then(function(d){if(!p(l))return o(d).then(function(){p(l)||r.addSchema(d,l,void 0,t)})}).then(function(){return a(s)});function h(){delete r._loadingSchemas[l]}function p(d){return r._refs[d]||r._schemas[d]}}}}var pnt=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l,f="data"+(o||""),h="valid"+i,p="errs__"+i,d=e.opts.$data&&a&&a.$data,m;d?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",m="schema"+i):m=a;var g=this,v="definition"+i,b=g.definition,y="",_,T,S,E,I;if(d&&b.$data){I="keywordValidate"+i;var x=b.validateSchema;r+=" var "+v+" = RULES.custom['"+t+"'].definition; var "+I+" = "+v+".validate;"}else{if(E=e.useCustomRule(g,a,e.schema,e),!E)return;m="validate.schema"+s,I=E.code,_=b.compile,T=b.inline,S=b.macro}var C=I+".errors",w="i"+i,B="ruleErr"+i,L=b.async;if(L&&!e.async)throw new Error("async keyword in sync schema");if(T||S||(r+=""+C+" = null;"),r+="var "+p+" = errors;var "+h+";",d&&b.$data&&(y+="}",r+=" if ("+m+" === undefined) { "+h+" = true; } else { ",x&&(y+="}",r+=" "+h+" = "+v+".validateSchema("+m+"); if ("+h+") { ")),T)b.statements?r+=" "+E.validate+" ":r+=" "+h+" = "+E.validate+"; ";else if(S){var k=e.util.copy(e),y="";k.level++;var R="valid"+k.level;k.schema=E.validate,k.schemaPath="";var F=e.compositeRule;e.compositeRule=k.compositeRule=!0;var U=e.validate(k).replace(/validate\.schema/g,I);e.compositeRule=k.compositeRule=F,r+=" "+U}else{var $=$||[];$.push(r),r="",r+="  "+I+".call( ",e.opts.passContext?r+="this":r+="self",_||b.schema===!1?r+=" , "+f+" ":r+=" , "+m+" , "+f+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var ie=o?"data"+(o-1||""):"parentData",oe=o?e.dataPathArr[o]:"parentDataProperty";r+=" , "+ie+" , "+oe+" , rootData )  ";var me=r;r=$.pop(),b.errors===!1?(r+=" "+h+" = ",L&&(r+="await "),r+=""+me+"; "):L?(C="customErrors"+i,r+=" var "+C+" = null; try { "+h+" = await "+me+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+C+" = e.errors; else throw e; } "):r+=" "+C+" = null; "+h+" = "+me+"; "}if(b.modifying&&(r+=" if ("+ie+") "+f+" = "+ie+"["+oe+"];"),r+=""+y,b.valid)c&&(r+=" if (true) { ");else{r+=" if ( ",b.valid===void 0?(r+=" !",S?r+=""+R:r+=""+h):r+=" "+!b.valid+" ",r+=") { ",l=g.keyword;var $=$||[];$.push(r),r="";var $=$||[];$.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(l||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+g.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+g.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var ae=r;r=$.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+ae+"]); ":r+=" validate.errors = ["+ae+"]; return false; ":r+=" var err = "+ae+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var X=r;r=$.pop(),T?b.errors?b.errors!="full"&&(r+="  for (var "+w+"="+p+"; "+w+"<errors; "+w+"++) { var "+B+" = vErrors["+w+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+B+".schemaPath === undefined) { "+B+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+B+".schema = "+m+"; "+B+".data = "+f+"; "),r+=" } "):b.errors===!1?r+=" "+X+" ":(r+=" if ("+p+" == errors) { "+X+" } else {  for (var "+w+"="+p+"; "+w+"<errors; "+w+"++) { var "+B+" = vErrors["+w+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+B+".schemaPath === undefined) { "+B+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+B+".schema = "+m+"; "+B+".data = "+f+"; "),r+=" } } "):S?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(l||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+g.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+g.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):b.errors===!1?r+=" "+X+" ":(r+=" if (Array.isArray("+C+")) { if (vErrors === null) vErrors = "+C+"; else vErrors = vErrors.concat("+C+"); errors = vErrors.length;  for (var "+w+"="+p+"; "+w+"<errors; "+w+"++) { var "+B+" = vErrors["+w+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+e.errorPath+";  "+B+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(r+=" "+B+".schema = "+m+"; "+B+".data = "+f+"; "),r+=" } } else { "+X+" } "),r+=" } ",c&&(r+=" else { ")}return r};const dnt="http://json-schema.org/draft-07/schema#",mnt="http://json-schema.org/draft-07/schema#",gnt="Core schema meta-schema",ynt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},vnt=["object","boolean"],bnt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},RZ={$schema:dnt,$id:mnt,title:gnt,definitions:ynt,type:vnt,properties:bnt,default:!0};var kU=RZ,_nt={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:kU.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:kU.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Tnt=/^[a-z_$][a-z0-9_$-]*$/i,Ent=pnt,Snt=_nt,wnt={add:Ant,get:Ont,remove:knt,validate:UP};function Ant(e,t){var n=this.RULES;if(n.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!Tnt.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var r=t.type;if(Array.isArray(r))for(var i=0;i<r.length;i++)a(e,r[i],t);else a(e,r,t);var o=t.metaSchema;o&&(t.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(o,!0))}n.keywords[e]=n.all[e]=!0;function a(s,u,c){for(var l,f=0;f<n.length;f++){var h=n[f];if(h.type==u){l=h;break}}l||(l={type:u,rules:[]},n.push(l));var p={keyword:s,definition:c,custom:!0,code:Ent,implements:c.implements};l.rules.push(p),n.custom[s]=p}return this}function Ont(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1}function knt(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var n=0;n<t.length;n++)for(var r=t[n].rules,i=0;i<r.length;i++)if(r[i].keyword==e){r.splice(i,1);break}return this}function UP(e,t){UP.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(Snt,!0);if(n(e))return!0;if(UP.errors=n.errors,t)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}const xnt="http://json-schema.org/draft-07/schema#",Int="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Cnt="Meta-schema for $data reference (JSON Schema extension proposal)",Pnt="object",Dnt=["$data"],Rnt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Nnt=!1,Mnt={$schema:xnt,$id:Int,description:Cnt,type:Pnt,required:Dnt,properties:Rnt,additionalProperties:Nnt};var NZ=Ert,ic=wM,Lnt=Irt,MZ=pZ,jnt=yZ,Bnt=Lrt,Fnt=unt,LZ=cnt,jZ=Id,Gnt=$r;$r.prototype.validate=Unt;$r.prototype.compile=znt;$r.prototype.addSchema=Vnt;$r.prototype.addMetaSchema=Ynt;$r.prototype.validateSchema=Xnt;$r.prototype.getSchema=qnt;$r.prototype.removeSchema=Knt;$r.prototype.addFormat=iit;$r.prototype.errorsText=nit;$r.prototype._addSchema=Qnt;$r.prototype._compile=Znt;$r.prototype.compileAsync=fnt;var FS=wnt;$r.prototype.addKeyword=FS.add;$r.prototype.getKeyword=FS.get;$r.prototype.removeKeyword=FS.remove;$r.prototype.validateKeyword=FS.validate;var BZ=AM;$r.ValidationError=BZ.Validation;$r.MissingRefError=BZ.MissingRef;$r.$dataMetaSchema=LZ;var kE="http://json-schema.org/draft-07/schema",xU=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Hnt=["/properties"];function $r(e){if(!(this instanceof $r))return new $r(e);e=this._opts=jZ.copy(e)||{},cit(this),this._schemas={},this._refs={},this._fragments={},this._formats=Bnt(e.format),this._cache=e.cache||new Lnt,this._loadingSchemas={},this._compilations=[],this.RULES=Fnt(),this._getId=Jnt(e),e.loopRequired=e.loopRequired||1/0,e.errorDataPath=="property"&&(e._errorDataPathProperty=!0),e.serialize===void 0&&(e.serialize=jnt),this._metaOpts=uit(this),e.formats&&sit(this),e.keywords&&lit(this),oit(this),typeof e.meta=="object"&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),ait(this)}function Unt(e,t){var n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error('no schema with key or ref "'+e+'"')}else{var r=this._addSchema(e);n=r.validate||this._compile(r)}var i=n(t);return n.$async!==!0&&(this.errors=n.errors),i}function znt(e,t){var n=this._addSchema(e,void 0,t);return n.validate||this._compile(n)}function Vnt(e,t,n,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,n,r);return this}var o=this._getId(e);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return t=ic.normalizeId(t||o),GZ(this,t),this._schemas[t]=this._addSchema(e,n,r,!0),this}function Ynt(e,t,n){return this.addSchema(e,t,n,!0),this}function Xnt(e,t){var n=e.$schema;if(n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this._opts.defaultMeta||Wnt(this),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(n,e);if(!r&&t){var i="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(i);else throw new Error(i)}return r}function Wnt(e){var t=e._opts.meta;return e._opts.defaultMeta=typeof t=="object"?e._getId(t)||t:e.getSchema(kE)?kE:void 0,e._opts.defaultMeta}function qnt(e){var t=FZ(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return $nt(this,e)}}function $nt(e,t){var n=ic.schema.call(e,{schema:{}},t);if(n){var r=n.schema,i=n.root,o=n.baseId,a=NZ.call(e,r,i,void 0,o);return e._fragments[t]=new MZ({ref:t,fragment:!0,schema:r,root:i,baseId:o,validate:a}),a}}function FZ(e,t){return t=ic.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function Knt(e){if(e instanceof RegExp)return Yb(this,this._schemas,e),Yb(this,this._refs,e),this;switch(typeof e){case"undefined":return Yb(this,this._schemas),Yb(this,this._refs),this._cache.clear(),this;case"string":var t=FZ(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var n=this._opts.serialize,r=n?n(e):e;this._cache.del(r);var i=this._getId(e);i&&(i=ic.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this}function Yb(e,t,n){for(var r in t){var i=t[r];!i.meta&&(!n||n.test(r))&&(e._cache.del(i.cacheKey),delete t[r])}}function Qnt(e,t,n,r){if(typeof e!="object"&&typeof e!="boolean")throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(e):e,a=this._cache.get(o);if(a)return a;r=r||this._opts.addUsedSchema!==!1;var s=ic.normalizeId(this._getId(e));s&&r&&GZ(this,s);var u=this._opts.validateSchema!==!1&&!t,c;u&&!(c=s&&s==ic.normalizeId(e.$schema))&&this.validateSchema(e,!0);var l=ic.ids.call(this,e),f=new MZ({id:s,schema:e,localRefs:l,cacheKey:o,meta:n});return s[0]!="#"&&r&&(this._refs[s]=f),this._cache.put(o,f),u&&c&&this.validateSchema(e,!0),f}function Znt(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,e.schema.$async===!0&&(i.$async=!0),i;e.compiling=!0;var n;e.meta&&(n=this._opts,this._opts=this._metaOpts);var r;try{r=NZ.call(this,e.schema,t,e.localRefs)}catch(o){throw delete e.validate,o}finally{e.compiling=!1,e.meta&&(this._opts=n)}return e.validate=r,e.refs=r.refs,e.refVal=r.refVal,e.root=r.root,r;function i(){var o=e.validate,a=o.apply(this,arguments);return i.errors=o.errors,a}}function Jnt(e){switch(e.schemaId){case"auto":return rit;case"id":return eit;default:return tit}}function eit(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function tit(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function rit(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function nit(e,t){if(e=e||this.errors,!e)return"No errors";t=t||{};for(var n=t.separator===void 0?", ":t.separator,r=t.dataVar===void 0?"data":t.dataVar,i="",o=0;o<e.length;o++){var a=e[o];a&&(i+=r+a.dataPath+" "+a.message+n)}return i.slice(0,-n.length)}function iit(e,t){return typeof t=="string"&&(t=new RegExp(t)),this._formats[e]=t,this}function oit(e){var t;if(e._opts.$data&&(t=Mnt,e.addMetaSchema(t,t.$id,!0)),e._opts.meta!==!1){var n=RZ;e._opts.$data&&(n=LZ(n,Hnt)),e.addMetaSchema(n,kE,!0),e._refs["http://json-schema.org/schema"]=kE}}function ait(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var n in t)e.addSchema(t[n],n)}function sit(e){for(var t in e._opts.formats){var n=e._opts.formats[t];e.addFormat(t,n)}}function lit(e){for(var t in e._opts.keywords){var n=e._opts.keywords[t];e.addKeyword(t,n)}}function GZ(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function uit(e){for(var t=jZ.copy(e._opts),n=0;n<xU.length;n++)delete t[xU[n]];return t}function cit(e){var t=e._opts.logger;if(t===!1)e.logger={log:zO,warn:zO,error:zO};else{if(t===void 0&&(t=console),!(typeof t=="object"&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}function zO(){}const HZ=Gi(Gnt),hit="http://json-schema.org/draft-07/schema#",fit="https://higlass.io/#viewconf",pit="HiGlass viewconf",dit="object",mit=!1,git=[],yit={editable:{type:"boolean",default:!0},viewEditable:{type:"boolean",default:!0},tracksEditable:{type:"boolean",default:!0},zoomFixed:{type:"boolean"},compactLayout:{type:"boolean"},exportViewUrl:{type:"string"},trackSourceServers:{type:"array",items:{type:"string"},minLength:1},zoomLocks:{$ref:"#/definitions/locks/zoomLocks"},locationLocks:{$ref:"#/definitions/locks/locationLocks"},valueScaleLocks:{$ref:"#/definitions/locks/valueScaleLocks"},views:{type:"array",items:{$ref:"#/definitions/view"},minLength:1},chromInfoPath:{type:"string"}},vit={data:{type:"object",properties:{url:{type:"string"},server:{type:"string"},filetype:{type:"string"},type:{type:"string"},tilesetInfo:{type:"object"},children:{type:"array"},tiles:{type:"object"}}},locks:{slug:{type:"string"},locksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{$ref:"#/definitions/locks/slug"}}},axisSpecificLocks:{additionalProperties:!1,properties:{axis:{enum:["x","y"],type:"string"},lock:{type:"string"}},required:["lock","axis"],type:"object"},locationLocksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{anyOf:[{type:"string"},{additionalProperties:!1,properties:{x:{$ref:"#/definitions/locks/axisSpecificLocks"},y:{$ref:"#/definitions/locks/axisSpecificLocks"}},type:"object"}]}}},zoomLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},locationLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locationLocksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},valueScaleLocks:{type:"object",additionalProperties:!1,required:["locksByViewUid","locksDict"],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"},ignoreOffScreenValues:{type:"boolean"}},patternProperties:{"^(?!(uid|ignoreOffScreenValues)).":{type:"object",additionalProperties:!1,required:["view","track"],properties:{view:{type:"string"},track:{$ref:"#/definitions/locks/slug"}}}}}}}}}},view:{type:"object",additionalProperties:!1,required:["tracks","layout"],properties:{autocompleteSource:{type:"string"},chromInfoPath:{type:"string"},genomePositionSearchBox:{$ref:"#/definitions/viewProperties/genomePositionSearchBox"},genomePositionSearchBoxVisible:{type:"boolean"},initialXDomain:{$ref:"#/definitions/viewProperties/domain"},initialYDomain:{$ref:"#/definitions/viewProperties/domain"},layout:{$ref:"#/definitions/viewProperties/layout"},overlays:{type:"array",items:{$ref:"#/definitions/viewProperties/overlay"}},selectionView:{type:"boolean"},tracks:{$ref:"#/definitions/viewProperties/tracks_object"},uid:{type:"string"},zoomFixed:{type:"boolean"},zoomLimits:{type:"array",minLength:2,maxLength:2,default:[1,null]}}},viewProperties:{genomePositionSearchBox:{type:"object",title:"The Genome Position Search Box Schema",required:["chromInfoServer","chromInfoId"],properties:{autocompleteServer:{type:"string",title:"The Autocomplete Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},autocompleteId:{type:"string",title:"The Autocomplete ID",default:"",examples:["OHJakQICQD6gTD7skx4EWA"],pattern:"^(.*)$"},chromInfoServer:{type:"string",title:"The Chrominfo Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},chromInfoId:{type:"string",title:"The Chromosome Info ID",default:"",examples:["hg19"],pattern:"^(.*)$"},visible:{type:"boolean",title:"The Visible Schema",default:!1}}},overlay:{type:"object",additionalProperties:!1,properties:{chromInfoPath:{type:"string"},includes:{type:"array"},options:{type:"object",properties:{extent:{type:"array"},minWidth:{type:"number"},fill:{type:"string"},fillOpacity:{type:"number"},stroke:{type:"string"},strokeOpacity:{type:"number"},strokeWidth:{type:"number"},strokePos:{type:["string","array"]},outline:{type:"string"},outlineOpacity:{type:"number"},outlineWidth:{type:"number"},outlinePos:{type:["string","array"]}}},type:{type:"string"},uid:{type:"string"}}},layout:{type:"object",additionalProperties:!1,required:["w","h","x","y"],properties:{x:{type:"integer",title:"The X Position",default:0},y:{type:"integer",title:"The Y Position",default:0},w:{type:"integer",title:"Width",default:12},h:{type:"integer",title:"Height",default:12},moved:{type:"boolean"},static:{type:"boolean"}}},tracks_object:{type:"object",additionalProperties:!1,properties:{left:{$ref:"#/definitions/viewProperties/tracks_array"},right:{$ref:"#/definitions/viewProperties/tracks_array"},top:{$ref:"#/definitions/viewProperties/tracks_array"},bottom:{$ref:"#/definitions/viewProperties/tracks_array"},center:{$ref:"#/definitions/viewProperties/tracks_array"},whole:{$ref:"#/definitions/viewProperties/tracks_array"},gallery:{$ref:"#/definitions/viewProperties/tracks_array"}}},tracks_array:{type:"array",items:{oneOf:[{$ref:"#/definitions/tracks/enum_track"},{$ref:"#/definitions/tracks/combined_track"},{$ref:"#/definitions/tracks/heatmap_track"},{$ref:"#/definitions/tracks/independent_viewport_projection_track"}]}},domain:{type:"array",items:{type:"number"},maxItems:2,minItems:2}},tracks:{heatmap_track:{type:"object",additionalProperties:!1,required:[],properties:{uid:{type:"string"},type:{const:"heatmap"},data:{$ref:"#/definitions/data"},height:{type:"number"},options:{type:"object"},position:{type:"string"},server:{type:"string"},tilesetUid:{type:"string"},width:{type:"number"},transforms:{type:"array"}}},combined_track:{type:"object",additionalProperties:!1,required:["contents"],properties:{contents:{$ref:"#/definitions/viewProperties/tracks_array"},height:{type:"number"},options:{},position:{type:"string"},type:{const:"combined"},uid:{type:"string"},width:{type:"number"}}},enum_track:{type:"object",additionalProperties:!1,required:["type"],properties:{server:{type:"string"},tilesetUid:{type:"string"},data:{$ref:"#/definitions/data"},uid:{type:"string"},type:{enum:["multivec","1d-heatmap","line","point","bar","divergent-bar","stacked-interval","gene-annotations","linear-2d-rectangle-domains","chromosome-labels","linear-heatmap","1d-value-interval","2d-annotations","2d-chromosome-annotations","2d-chromosome-grid","2d-chromosome-labels","2d-rectangle-domains","2d-tiles","arrowhead-domains","bedlike","cross-rule","dummy","horizontal-1d-annotations","horizontal-1d-heatmap","horizontal-1d-tiles","horizontal-1d-value-interval","horizontal-2d-rectangle-domains","horizontal-bar","horizontal-chromosome-grid","horizontal-chromosome-labels","horizontal-divergent-bar","horizontal-gene-annotations","horizontal-heatmap","horizontal-line","horizontal-multivec","horizontal-point","horizontal-rule","horizontal-vector-heatmap","image-tiles","left-axis","left-stacked-interval","mapbox-tiles","osm-2d-tile-ids","osm-tiles","raster-tiles","simple-svg","square-markers","top-axis","top-stacked-interval","vertical-1d-annotations","vertical-1d-heatmap","vertical-1d-tiles","vertical-1d-value-interval","vertical-2d-rectangle-domains","vertical-bar","vertical-bedlike","vertical-chromosome-grid","vertical-chromosome-labels","vertical-gene-annotations","vertical-heatmap","vertical-line","vertical-multivec","vertical-point","vertical-rule","vertical-vector-heatmap","viewport-projection-center","viewport-projection-horizontal","viewport-projection-vertical"]},chromInfoPath:{type:"string"},fromViewUid:{type:"string"},height:{type:"number"},options:{type:"object"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}},independent_viewport_projection_track:{type:"object",additionalProperties:!1,properties:{uid:{type:"string"},type:{enum:["viewport-projection-horizontal","viewport-projection-vertical","viewport-projection-center"]},fromViewUid:{type:"null"},projectionXDomain:{$ref:"#/definitions/viewProperties/domain"},projectionYDomain:{$ref:"#/definitions/viewProperties/domain"},options:{type:"object"},transforms:{type:"array"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}}}},UZ={$schema:hit,$id:fit,title:pit,type:dit,additionalProperties:mit,required:git,properties:yit,definitions:vit},bit="_title_1hlm6_70",_it="_Warning_1hlm6_76",Tit="_Success_1hlm6_79",xu={"view-config-editor-header":"_view-config-editor-header_1hlm6_1","view-config-editor":"_view-config-editor_1hlm6_1","view-config-log":"_view-config-log_1hlm6_34","view-config-log-header":"_view-config-log-header_1hlm6_46","view-config-log-msg":"_view-config-log-msg_1hlm6_60",title:bit,Warning:_it,Success:Tit,Error:"_Error_1hlm6_82"};function Eit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sit(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ait(r.key),r)}}function wit(e,t,n){return t&&Sit(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ait(e){var t=Oit(e,"string");return typeof t=="symbol"?t:String(t)}function Oit(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kit(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zP(e,t)}function zP(e,t){return zP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},zP(e,t)}function xit(e){var t=Cit();return function(){var n=xE(e),r;if(t){var i=xE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Iit(this,r)}}function Iit(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bl(e)}function bl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cit(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xE(e){return xE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xE(e)}let zZ=function(e){kit(n,e);var t=xit(n);function n(r){var i;return Eit(this,n),i=t.call(this,r),i.state={code:r.viewConfig,hide:!1,showLog:!1,logMsgs:i.getLogMsgs(r.viewConfig)},i.handleChangeBound=i.handleChange.bind(bl(i)),i.handleKeyDownBound=i.handleKeyDown.bind(bl(i)),i.handleKeyUpBound=i.handleKeyUp.bind(bl(i)),i.handleSubmitBound=i.handleSubmit.bind(bl(i)),i.hideBound=i.hide.bind(bl(i)),i.showBound=i.show.bind(bl(i)),i.toggleLogBound=i.toggleLog.bind(bl(i)),i.pubSubs=[],i.pubSubs.push(i.props.pubSub.subscribe("keydown",i.handleKeyDownBound)),i.pubSubs.push(i.props.pubSub.subscribe("keyup",i.handleKeyUpBound)),i}return wit(n,[{key:"componentDidMount",value:async function(){this.editor&&(this.editor._input.focus(),this.editor._input.setSelectionRange(0,0),await NR(0),this.editorWrap&&(this.editorWrap.scrollTop=0))}},{key:"componentWillUnmount",value:function(){this.pubSubs.forEach(r=>this.props.pubSub.unsubscribe(r)),this.pubSubs=[]}},{key:"handleChange",value:function(r){const i=this.getLogMsgs(r);this.setState({code:r,logMsgs:i})}},{key:"handleKeyDown",value:function(r){r.key==="s"&&(r.ctrlKey||r.metaKey)&&(r.preventDefault(),this.props.onChange(this.state.code)),r.key==="Enter"&&(r.ctrlKey||r.metaKey)&&(r.preventDefault(),this.props.onChange(this.state.code),this.props.modal.close())}},{key:"handleKeyUp",value:function(r){this.setState({hide:!1}),r.key==="Escape"&&(r.preventDefault(),this.props.modal.close(),this.props.onCancel())}},{key:"handleSubmit",value:function(r){r&&r.preventDefault(),this.props.onSave(this.state.code)}},{key:"getLogMsgs",value:function(r){const i=[];let o;try{o=JSON.parse(r)}catch(s){return console.warn(s),i.push({type:"Error",msg:s.toString()}),i}const a=new HZ().compile(UZ);return a(o)||(console.warn("Invalid viewconf"),i.push({type:"Warning",msg:"Invalid viewconf"})),a.errors&&(console.warn(JSON.stringify(a.errors,null,2)),a.errors.forEach(s=>{i.push({type:"Warning",msg:JSON.stringify(s,null,2)})})),i.length===0&&i.push({type:"Success",msg:"No error or warnings"}),i}},{key:"hide",value:function(){this.setState({hide:!0})}},{key:"show",value:function(){this.setState({hide:!1})}},{key:"hideLog",value:function(){this.setState({showLog:!1})}},{key:"showLog",value:function(){this.setState({showLog:!0})}},{key:"toggleLog",value:function(){this.state.showLog?this.hideLog():this.showLog()}},{key:"render",value:function(){const r=this.state.logMsgs.map((i,o)=>{const a=`${o}-${i.msg}`;return O.createElement("tr",{key:a},O.createElement("td",{className:ir(xu.title,xu[i.type])},`[${o}] ${i.type}`),O.createElement("td",null,O.createElement("pre",null,i.msg)))});return O.createElement(vv,{cancelShortcut:"ESC",cancelTitle:"Discard Changes",hide:this.state.hide,maxHeight:!0,okayShortcut:"⌘+Enter",okayTitle:"Save and Close",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Edit View Config"},O.createElement(O.Fragment,null,O.createElement("header",{className:xu["view-config-editor-header"]},O.createElement(Is,{onBlur:this.showBound,onMouseDown:this.hideBound,onMouseOut:this.showBound,onMouseUp:this.showBound},"Hide While Mousedown"),O.createElement(Is,{onClick:()=>{this.props.onChange(this.state.code)},shortcut:"⌘+S"},"Save")),O.createElement("div",{ref:i=>{this.editorWrap=i},className:xu["view-config-editor"]},O.createElement(Htt,{ref:i=>{this.editor=i},highlight:i=>gU.highlight(i,gU.languages.json),onValueChange:this.handleChangeBound,padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:"inherit"},value:this.state.code})),O.createElement("div",{className:xu["view-config-log"],style:{height:this.state.showLog?"50%":"30px"}},O.createElement("div",{className:xu["view-config-log-header"],onClick:()=>this.toggleLogBound()},`Log Messages (${this.state.logMsgs.filter(i=>i.type!=="Success").length})`),O.createElement("div",{className:xu["view-config-log-msg"],style:{padding:this.state.showLog?"10px":0}},O.createElement("table",null,O.createElement("tbody",null,r))))))}}]),n}(O.Component);zZ.propTypes={modal:N.object.isRequired,onCancel:N.func.isRequired,onChange:N.func.isRequired,onSave:N.func.isRequired,pubSub:N.object.isRequired,viewConfig:N.string.isRequired};const Pit=gd(OS(zZ));function Dit(e,t,n,r){const i=e.append("symbol").attr("id",t).attr("viewBox",r);n.forEach(o=>i.append("path").attr("d",o).attr("fill","currentColor"))}const Rit=e=>{e.setState(e.state)},Nit=function(e,t){const n=e;let r=[];const i=h1(),o=()=>{r.forEach(a=>t.unsubscribe(a)),r=[]};return{destroy:o,publish:i.publish,stack:i.stack,public:{get version(){return JK},setBroadcastMousePositionGlobally(a=!1){n.setBroadcastMousePositionGlobally(a)},setShowGlobalMousePosition(a=!1){n.setShowGlobalMousePosition(a)},setGlobalMousePosition(a=!1){n.setBroadcastMousePositionGlobally(a),n.setShowGlobalMousePosition(a)},setAuthHeader(a){ry(a),n.reload()},getAuthHeader(){return ry()},getComponent(){return n},reload(a){let s;a?s=a.flatMap(u=>typeof u=="string"?n.iterateOverTracksInView(u):u):s=n.iterateOverTracks();for(const{viewId:u,trackId:c}of s){const l=n.getTrackObject(u,c);for(const f of l.childTracks||[l])f.fetchedTiles&&(f.removeTiles(Object.keys(f.fetchedTiles)),f.fetching.clear(),f.refreshTiles()),f.rerender(f.options,!0)}},destroy(){o(),Fn.unmountComponentAtNode(n.topDiv.parentNode)},setRangeSelectionToInt(){n.setState({rangeSelectionToInt:!0})},setRangeSelectionToFloat(){n.setState({rangeSelectionToInt:!1})},setRangeSelection1dSize(a=0,s=1/0){n.setState({rangeSelection1dSize:[a,s]})},setViewConfig(a,s=!1){const u=n.processViewConfig(a);return new Promise(c=>{this.requestsInFlight=0,r.push(t.subscribe("requestSent",()=>{this.requestsInFlight+=1})),r.push(t.subscribe("requestReceived",()=>{this.requestsInFlight-=1,this.requestsInFlight===0&&c()})),n.setState({viewConfig:a,views:u},()=>{s&&c()})})},getViewConfig(){return n.getViewsAsJson()},validateViewConfig(a,{verbose:s=!1}={}){const u=new HZ().compile(UZ),c=u(a);return s&&u.errors&&console.warn(JSON.stringify(u.errors,null,2)),c},getMinMaxValue(a,s,u=!1,c=!1){return n.getMinMaxValue(a,s,u,c)},shareViewConfigAsLink(a){return n.handleExportViewsAsLink(a,!0)},showAvailableTrackPositions(a){n.setState({draggingHappening:a})},hideAvailableTrackPositions(){n.setState({draggingHappening:null})},showTrackChooser(a){n.setState({chooseTrackHandler:(...s)=>{n.setState({chooseTrackHandler:null}),a(...s)}})},hideTrackChooser(){this.setState({chooseTrackHandler:null})},setTrackValueScaleLimits(a,s,u,c){n.setTrackValueScaleLimits(a,s,u,c)},setDarkTheme(a){console.warn('`setDarkTheme(true)` is deprecated. Please use `setTheme("dark")`.');const s=a?"dark":"light";n.setTheme(s)},setTheme(a){console.warn("Please note that theming is still in beta!"),n.setTheme(a)},zoomTo(a,s,u,c,l,f=0){n.zoomTo(a,s,u,c,l,f)},zoomToGene(a,s,u=0,c=0){n.zoomToGene(a,s,u,c)},suggestGene(a,s,u){return n.suggestGene(a,s,u)},zoomToDataExtent(a){n.handleZoomToData(a)},resetViewport(a){n.resetViewport(a)},activateTool(a){switch(a){case"select":n.setMouseTool(vo);break;default:n.setMouseTool(w_);break}},exportAsPngBlobPromise(){return n.createPNGBlobPromise()},exportAsSvg(){return n.createSVGString()},exportAsViewConfString(){return n.getViewsAsString()},getRangeSelection(){return n.rangeSelection},getLocation(a){const s=a?n.xScales[a]&&n.yScales[a]&&a:Object.values(n.tiledPlots)[0]&&Object.values(n.tiledPlots)[0].props.uid;return s?{xDomain:n.xScales[s].domain(),yDomain:n.yScales[s].domain(),xRange:n.xScales[s].range(),yRange:n.yScales[s].range()}:"Please provide a valid view UUID sweetheart 😙"},getTrackObject(a,s){let u=a,c=s;return s||(u=Object.values(n.state.views)[0].uid,c=a),BR(n,u,c)},option(a,s){if(typeof s>"u")return n.props.options[a];switch(a){case"sizeMode":n.props.options[a]=s,Rit(n);break;default:console.warn(`This option "${a}" is either unknown or not settable.`)}},off(a,s,u){const c=typeof s=="object"?s.callback:s;switch(a){case"click":i.unsubscribe("click",c);break;case"cursorLocation":i.unsubscribe("cursorLocation",c);break;case"location":n.offLocationChange(u,s);break;case"mouseMoveZoom":i.unsubscribe("mouseMoveZoom",c);break;case"wheel":i.unsubscribe("wheel",c);break;case"rangeSelection":i.unsubscribe("rangeSelection",c);break;case"viewConfig":n.offViewChange(s);break;case"createSVG":n.offPostCreateSVG();break;case"geneSearch":i.unsubscribe("geneSearch",c);break}},on(a,s,u,c){switch(a){case"click":return i.subscribe("click",s);case"cursorLocation":return i.subscribe("cursorLocation",s);case"location":return n.onLocationChange(u,s,c);case"mouseMoveZoom":return i.subscribe("mouseMoveZoom",s);case"wheel":return i.subscribe("wheel",s);case"rangeSelection":return i.subscribe("rangeSelection",s);case"viewConfig":return n.onViewChange(s);case"createSVG":return n.onPostCreateSVG(s);case"geneSearch":return i.subscribe("geneSearch",s);default:return}}}}},Hh={"higlass-canvas":"_higlass-canvas_1uoq8_28","higlass-drawing-surface":"_higlass-drawing-surface_1uoq8_34","higlass-svg":"_higlass-svg_1uoq8_38","tiled-area":"_tiled-area_1uoq8_47","track-mouseover-menu":"_track-mouseover-menu_1uoq8_52"};function Mit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lit(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bit(r.key),r)}}function jit(e,t,n){return t&&Lit(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bit(e){var t=Fit(e,"string");return typeof t=="symbol"?t:String(t)}function Fit(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Git(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VP(e,t)}function VP(e,t){return VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},VP(e,t)}function Hit(e){var t=zit();return function(){var n=IE(e),r;if(t){var i=IE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Uit(this,r)}}function Uit(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Er(e)}function Er(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zit(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function IE(e){return IE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},IE(e)}const IU=12,Vit=12,Yit=20,Xit="default",CU="bounded",PU="overflow",mm="scroll";let kv=function(e){Git(n,e);var t=Hit(n);function n(r){var i;Mit(this,n),i=t.call(this,r),z9(O.version)<15.6&&console.warn("HiGlass requires React v15.6 or higher. Current version: ",O.version),i.pubSub=h1(),i.domEvent=O9(i.pubSub),i.pubSubs=[],i.minHorizontalHeight=20,i.minVerticalWidth=20,i.resizeSensor=null,i.uid=zt.nice(),i.tiledPlots={},i.genomePositionSearchBoxes={},i.xScales={},i.yScales={},i.projectionXDomains={},i.projectionYDomains={},i.topDiv=null,i.zoomToDataExtentOnInit=new Set,i.viewTrackUidsToCombinedUid={},i.combinedUidToViewTrack={},i.scalesChangedListeners={},i.draggingChangedListeners={},i.valueScalesChangedListeners={},i.zoomLocks={},i.locationLocks={},i.locationLocksAxisWise={x:{},y:{}},i.valueScaleLocks={},i.prevAuthToken=r.options.authToken,i.setCenters={},i.plusImg={},i.configImg={},Ue.PIXI=r.options&&r.options.PIXI||b6,i.viewMarginTop=+r.options.viewMarginTop>=0?+r.options.viewMarginTop:_m,i.viewMarginBottom=+r.options.viewMarginBottom>=0?+r.options.viewMarginBottom:_m,i.viewMarginLeft=+r.options.viewMarginLeft>=0?+r.options.viewMarginLeft:_m,i.viewMarginRight=+r.options.viewMarginRight>=0?+r.options.viewMarginRight:_m,i.viewPaddingTop=+r.options.viewPaddingTop>=0?+r.options.viewPaddingTop:Tm,i.viewPaddingBottom=+r.options.viewPaddingBottom>=0?+r.options.viewPaddingBottom:Tm,i.viewPaddingLeft=+r.options.viewPaddingLeft>=0?+r.options.viewPaddingLeft:Tm,i.viewPaddingRight=+r.options.viewPaddingRight>=0?+r.options.viewPaddingRight:Tm,i.genomePositionSearchBox=null,i.viewHeaders={},i.boundRefreshView=()=>{i.refreshView(Em)},i.unsetOnLocationChange=[],i.setTheme(r.options.theme,r.options.isDarkTheme),i.viewconfLoaded=!1;const{viewConfig:o}=i.props,a=i.loadIfRemoteViewConfig(i.props.viewConfig);r.options.authToken&&ry(r.options.authToken),i.pixiRoot=new Ue.PIXI.Container,i.pixiRoot.interactive=!0,i.pixiStage=new Ue.PIXI.Container,i.pixiStage.interactive=!0,i.pixiRoot.addChild(i.pixiStage),i.pixiMask=new Ue.PIXI.Graphics,i.pixiRoot.addChild(i.pixiMask),i.pixiStage.mask=i.pixiMask,i.element=null,i.scrollTop=0;let s=w_;if(i.props.options)switch(i.props.options.mouseTool){case vo:s=vo;break}i.props.options.pluginTracks&&(window.higlassTracksByType=Object.assign(window.higlassTracksByType||{},i.props.options.pluginTracks));const u={};try{window.higlassTracksByType&&Object.entries(window.higlassTracksByType).forEach(([m,g])=>{u[m]=g})}catch{console.warn("Broken config of a plugin track")}i.props.options.pluginDataFetchers&&(window.higlassDataFetchersByType=Object.assign(window.higlassDataFetchersByType||{},i.props.options.pluginDataFetchers));const c=window.higlassDataFetchersByType,l=i.props.options.pixelPreciseMarginPadding?1:30;i.mounted=!1,i.pluginTracks=u,i.pluginDataFetchers=c,i.state={currentBreakpoint:"lg",width:0,height:0,rowHeight:l,svgElement:null,canvasElement:null,customDialog:null,views:a,viewConfig:o,addTrackPositionMenuPosition:null,typedEditable:void 0,mouseOverOverlayUid:null,mouseTool:s,isDarkTheme:!1,rangeSelection1dSize:[0,1/0],rangeSelectionToInt:!1,modal:null},i.attachedToDOM=!1;const{public:f,destroy:h,publish:p,stack:d}=Nit(Er(i),i.pubSub);return i.api=f,i.apiDestroy=h,i.apiPublish=p,i.apiStack=d,i.viewChangeListener=[],i.triggerViewChangeDb=wR(i.triggerViewChange.bind(Er(i)),250),i.pubSubs=[],i.rangeSelection=[null,null],i.prevMouseHoverTrack=null,i.zooming=!1,i.appClickHandlerBound=i.appClickHandler.bind(Er(i)),i.canvasClickHandlerBound=i.canvasClickHandler.bind(Er(i)),i.keyDownHandlerBound=i.keyDownHandler.bind(Er(i)),i.keyUpHandlerBound=i.keyUpHandler.bind(Er(i)),i.resizeHandlerBound=i.resizeHandler.bind(Er(i)),i.resizeHandlerBound=i.resizeHandler.bind(Er(i)),i.dispatchEventBound=i.dispatchEvent.bind(Er(i)),i.animateOnMouseMoveHandlerBound=i.animateOnMouseMoveHandler.bind(Er(i)),i.zoomStartHandlerBound=i.zoomStartHandler.bind(Er(i)),i.zoomEndHandlerBound=i.zoomEndHandler.bind(Er(i)),i.zoomHandlerBound=i.zoomHandler.bind(Er(i)),i.trackDroppedHandlerBound=i.trackDroppedHandler.bind(Er(i)),i.trackDimensionsModifiedHandlerBound=i.trackDimensionsModifiedHandler.bind(Er(i)),i.animateBound=i.animate.bind(Er(i)),i.animateOnGlobalEventBound=i.animateOnGlobalEvent.bind(Er(i)),i.requestReceivedHandlerBound=i.requestReceivedHandler.bind(Er(i)),i.wheelHandlerBound=i.wheelHandler.bind(Er(i)),i.mouseMoveHandlerBound=i.mouseMoveHandler.bind(Er(i)),i.onMouseLeaveHandlerBound=i.onMouseLeaveHandler.bind(Er(i)),i.onBlurHandlerBound=i.onBlurHandler.bind(Er(i)),i.openModalBound=i.openModal.bind(Er(i)),i.closeModalBound=i.closeModal.bind(Er(i)),i.handleEditViewConfigBound=i.handleEditViewConfig.bind(Er(i)),i.onScrollHandlerBound=i.onScrollHandler.bind(Er(i)),i.typedText="",i.typedTextTimeout=null,i.modal={open:i.openModalBound,close:i.closeModalBound},i.setBroadcastMousePositionGlobally(i.props.options.broadcastMousePositionGlobally||i.props.options.globalMousePosition),i.setShowGlobalMousePosition(i.props.options.showGlobalMousePosition||i.props.options.globalMousePosition),i}return jit(n,[{key:"UNSAFE_componentWillMount",value:function(){this.domEvent.register("keydown",document),this.domEvent.register("keyup",document),this.domEvent.register("scroll",document),this.domEvent.register("resize",window),this.domEvent.register("orientationchange",window),this.domEvent.register("wheel",window),this.domEvent.register("mousedown",window,!0),this.domEvent.register("mouseup",window,!0),this.domEvent.register("click",window,!0),this.domEvent.register("mousemove",window),this.domEvent.register("touchmove",window),this.domEvent.register("touchstart",window),this.domEvent.register("touchend",window),this.domEvent.register("touchcancel",window),this.domEvent.register("blur",window),this.pubSubs.push(this.pubSub.subscribe("app.click",this.appClickHandlerBound),this.pubSub.subscribe("blur",this.onBlurHandlerBound),this.pubSub.subscribe("keydown",this.keyDownHandlerBound),this.pubSub.subscribe("keyup",this.keyUpHandlerBound),this.pubSub.subscribe("resize",this.resizeHandlerBound),this.pubSub.subscribe("wheel",this.wheelHandlerBound),this.pubSub.subscribe("orientationchange",this.resizeHandlerBound),this.pubSub.subscribe("app.event",this.dispatchEventBound),this.pubSub.subscribe("app.animateOnMouseMove",this.animateOnMouseMoveHandlerBound),this.pubSub.subscribe("trackDropped",this.trackDroppedHandlerBound),this.pubSub.subscribe("trackDimensionsModified",this.trackDimensionsModifiedHandlerBound),this.pubSub.subscribe("app.zoomStart",this.zoomStartHandlerBound),this.pubSub.subscribe("app.zoomEnd",this.zoomEndHandlerBound),this.pubSub.subscribe("app.zoom",this.zoomHandlerBound),this.pubSub.subscribe("requestReceived",this.requestReceivedHandlerBound)),this.props.getApi&&this.props.getApi(this.api)}},{key:"sizeMode",get:function(){return typeof this.props.options.sizeMode>"u"?this.props.options.bounded?"bounded":Xit:this.props.options.sizeMode}},{key:"setBroadcastMousePositionGlobally",value:function(r=!1){this.isBroadcastMousePositionGlobally=r}},{key:"setShowGlobalMousePosition",value:function(r=!1){if(this.isShowGlobalMousePosition=r,this.isShowGlobalMousePosition&&!this.globalMousePositionListener&&(this.globalMousePositionListener=qm.subscribe("higlass.mouseMove",this.animateOnGlobalEventBound),this.pubSubs.push(this.globalMousePositionListener)),this.isShowGlobalMousePosition&&!this.globalMousePositionListener){const i=this.pubSubs.findIndex(o=>o===this.globalMousePositionListener);qm.unsubscribe(this.globalMousePositionListener),i>=0&&this.pubSubs.splice(i,1),this.globalMousePositionListener=void 0}}},{key:"zoomStartHandler",value:function(){this.hideHoverMenu(),this.zooming=!0}},{key:"zoomEndHandler",value:function(){this.zooming=!1}},{key:"zoomHandler",value:function(r){r.sourceEvent&&this.mouseMoveHandler(r.sourceEvent)}},{key:"waitForDOMAttachment",value:function(r){if(!this.mounted)return;const i=Fn.findDOMNode(this);document.body.contains(i)?r():requestAnimationFrame(()=>this.waitForDOMAttachment(r))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=Fn.findDOMNode(this),window.addEventListener("focus",this.boundRefreshView),Object.values(this.state.views).forEach(a=>{this.adjustLayoutToTrackSizes(a),a.layout?a.layout.i=a.uid:a.layout=this.generateViewLayout(a)});const r={width:this.state.width,height:this.state.height,view:this.canvasElement,antialias:!0,transparent:!0,resolution:2,autoResize:!0},i=parseInt(v6[0],10);i===4?(console.warn("Deprecation warning: please update Pixi.js to version 5 or above!"),this.props.options.renderer==="canvas"?this.pixiRenderer=new Ue.PIXI.CanvasRenderer(r):this.pixiRenderer=new Ue.PIXI.WebGLRenderer(r)):(i<4&&console.warn("Deprecation warning: please update Pixi.js to version 5 or above! This version of Pixi.js is unsupported. Good luck 🤞"),this.props.options.renderer==="canvas"?this.pixiRenderer=new Ue.PIXI.CanvasRenderer(r):this.pixiRenderer=new Ue.PIXI.Renderer(r)),this.fitPixiToParentContainer(),this.setState({svgElement:this.svgElement,canvasElement:this.canvasElement}),this.waitForDOMAttachment(()=>{v_.ElementQueries.listen(),this.resizeSensor=new v_.ResizeSensor(this.element.parentNode,this.updateAfterResize.bind(this)),this.updateAfterResize()}),this.handleDragStart(),this.handleDragStop(),this.animate();const o=Wt(this.element).append("svg").style("display","none");rpe.forEach(a=>Dit(o,a.id,a.paths,a.viewBox))}},{key:"getTrackObject",value:function(r,i){return this.tiledPlots[r].trackRenderer.getTrackObject(i)}},{key:"getTrackRenderer",value:function(r){return this.tiledPlots[r].trackRenderer}},{key:"loadIfRemoteViewConfig",value:function(r){let i={};return typeof r=="string"?et.json(r,(o,a)=>{r=a,this.setState({views:this.processViewConfig(JSON.parse(JSON.stringify(a))),viewConfig:a}),this.unsetOnLocationChange.forEach(({viewId:s,callback:u,callbackId:c})=>{this.onLocationChange(s,u,c)})},this.pubSub):(i=this.processViewConfig(JSON.parse(JSON.stringify(r))),this.mounted&&this.setState({viewConfig:r})),i}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){const i=this.loadIfRemoteViewConfig(r.viewConfig);if(r.options.authToken!==this.prevAuthToken){ry(r.options.authToken);for(const o of this.iterateOverViews()){const a=this.getTrackRenderer(o),s=JSON.parse(a.prevTrackDefinitions);a.syncTrackObjects([]),a.syncTrackObjects(s)}this.prevAuthToken=r.options.authToken}for(const o of mr(i))this.adjustLayoutToTrackSizes(o);this.setState({views:i})}},{key:"UNSAFE_componentWillUpdate",value:function(){this.pixiRenderer.render(this.pixiRoot)}},{key:"componentDidUpdate",value:function(){this.setTheme(this.props.options.theme,this.props.options.isDarkTheme),this.animate(),this.triggerViewChangeDb()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.pixiStage.destroy(!1),this.pixiStage=null,this.pixiRenderer.destroy(!0),this.pixiRenderer=null,window.removeEventListener("focus",this.boundRefreshView),this.resizeSensor&&this.resizeSensor.detach(),this.domEvent.unregister("keydown",document),this.domEvent.unregister("keyup",document),this.domEvent.unregister("scroll",document),this.domEvent.unregister("wheel",window),this.domEvent.unregister("mousedown",window),this.domEvent.unregister("mouseup",window),this.domEvent.unregister("click",window),this.domEvent.unregister("mousemove",window),this.domEvent.unregister("touchmove",window),this.domEvent.unregister("touchstart",window),this.domEvent.unregister("touchend",window),this.domEvent.unregister("touchcancel",window),this.pubSubs.forEach(r=>this.pubSub.unsubscribe(r)),this.pubSubs=[],this.apiDestroy()}},{key:"setTheme",value:function(r=this.props.options.theme,i=this.props.options.isDarkTheme){if(typeof i<"u")console.warn("The option `isDarkTheme` is deprecated. Please use `theme` instead."),this.theme=i?"dark":"light";else switch(r){case"dark":this.theme=wr;break;case"light":case void 0:this.theme=O_;break;default:console.warn(`Unknown theme "${r}". Using light theme.`),this.theme=O_;break}}},{key:"dispatchEvent",value:function(r){this.canvasElement&&I_(r,this.canvasElement)}},{key:"trackDroppedHandler",value:function(){this.setState({draggingHappening:null})}},{key:"requestReceivedHandler",value:function(){!this.viewconfLoaded&&ty===0&&(this.viewconfLoaded=!0,this.props.options.onViewConfLoaded&&this.props.options.onViewConfLoaded())}},{key:"animateOnMouseMoveHandler",value:function(r){r&&!this.animateOnMouseMove&&this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.animateBound)),this.animateOnMouseMove=r}},{key:"fitPixiToParentContainer",value:function(){if(!this.element||!this.element.parentNode){console.warn("No parentNode:",this.element);return}const r=this.element.parentNode.clientWidth,i=this.element.parentNode.clientHeight;this.pixiMask.beginFill(16777215).drawRect(0,0,r,i).endFill(),this.pixiRenderer.resize(r,i),this.pixiRenderer.view.style.width=`${r}px`,this.pixiRenderer.view.style.height=`${i}px`,this.pixiRenderer.render(this.pixiRoot)}},{key:"addDefaultTrackOptions",value:function(r){const i=this.getTrackInfo(r.type);if(!i)return;typeof r.options>"u"&&(r.options={});const o=r.options?r.options:{};if(this.props.options.defaultTrackOptions){if(this.props.options.defaultTrackOptions.trackSpecific&&this.props.options.defaultTrackOptions.trackSpecific[r.type]){const a=this.props.options.defaultTrackOptions.trackSpecific[r.type];for(const s in a)r.options[s]=typeof r.options[s]<"u"?r.options[s]:JSON.parse(JSON.stringify(a[s]))}if(this.props.options.defaultTrackOptions.all){const a=this.props.options.defaultTrackOptions.all;for(const s in a)r.options[s]=typeof r.options[s]<"u"?r.options[s]:JSON.parse(JSON.stringify(a[s]))}}if(i.defaultOptions){const a=i.defaultOptionsByTheme&&i.defaultOptionsByTheme[this.theme]?i.defaultOptionsByTheme[this.theme]:{},s={...i.defaultOptions,...a};if(!r.options)r.options=JSON.parse(JSON.stringify(s));else for(const u in s)r.options[u]=typeof r.options[u]<"u"?r.options[u]:JSON.parse(JSON.stringify(s[u]))}else r.options=o}},{key:"toggleTypedEditable",value:function(){this.setState({typedEditable:!this.isEditable()})}},{key:"typedTextHandler",value:function(r){if(!this.props.options.cheatCodesEnabled)return;this.typedText=this.typedText.concat(r.key),this.typedText.endsWith("hgedit")&&(this.toggleTypedEditable(),this.typedText="");const i=750;this.typedTextTimeout&&clearTimeout(this.typedTextTimeout),this.typedTextTimeout=setTimeout(()=>{this.typedText=""},i)}},{key:"keyDownHandler",value:function(r){this.typedTextHandler(r),this.props.options.rangeSelectionOnAlt&&r.key==="Alt"&&this.setState({mouseTool:vo})}},{key:"keyUpHandler",value:function(r){this.props.options.rangeSelectionOnAlt&&r.key==="Alt"&&this.setState({mouseTool:w_})}},{key:"openModal",value:function(r){this.setState({modal:O.cloneElement(r,{ref:i=>{this.modalRef=i}})})}},{key:"closeModal",value:function(){this.modalRef=null,this.setState({modal:null})}},{key:"handleEditViewConfig",value:function(){const{viewConfig:r}=this.state;this.setState({viewConfigTmp:r}),this.openModal(O.createElement(Pit,{onCancel:()=>{const{viewConfigTmp:i}=this.state,o=this.processViewConfig(i);for(const a of mr(o))this.adjustLayoutToTrackSizes(a);this.setState({views:o,viewConfig:i,viewConfigTmp:null})},onChange:i=>{const o=JSON.parse(i),a=this.processViewConfig(o);for(const s of mr(a))this.adjustLayoutToTrackSizes(s);this.setState({views:a,viewConfig:o})},onSave:i=>{const o=JSON.parse(i),a=this.processViewConfig(o);for(const s of mr(a))this.adjustLayoutToTrackSizes(s);this.setState({views:a,viewConfig:o,viewConfigTmp:null})},viewConfig:this.getViewsAsString()}))}},{key:"animate",value:function(){this.isRequestingAnimationFrame||(this.isRequestingAnimationFrame=!0,requestAnimationFrame(()=>{this.pixiRenderer&&(this.pixiRenderer.render(this.pixiRoot),this.isRequestingAnimationFrame=!1)}))}},{key:"animateOnGlobalEvent",value:function({sourceUid:r}={}){r!==this.uid&&this.animateOnMouseMove&&this.animate()}},{key:"measureSize",value:function(){const[r,i]=C9(this.element);r>0&&i>0&&this.setState({sizeMeasured:!0,width:r,height:i})}},{key:"updateAfterResize",value:function(){this.measureSize(),this.updateRowHeight(),this.fitPixiToParentContainer(),this.refreshView(Em),this.resizeHandler()}},{key:"onBreakpointChange",value:function(r){this.setState({currentBreakpoint:r})}},{key:"handleOverlayMouseEnter",value:function(r){this.setState({mouseOverOverlayUid:r})}},{key:"handleOverlayMouseLeave",value:function(){this.setState({mouseOverOverlayUid:null})}},{key:"handleLockLocation",value:function(r){this.setState({chooseViewHandler:i=>this.handleLocationLockChosen(r,i),mouseOverOverlayUid:r})}},{key:"isEditable",value:function(){return this.state.typedEditable!==void 0?this.state.typedEditable:!this.props.options||!("editable"in this.props.options)?this.state.viewConfig.editable:this.props.options.editable&&this.state.viewConfig.editable}},{key:"isTrackMenuDisabled",value:function(){return this.props.options&&(this.props.options.editable===!1||this.props.options.tracksEditable===!1)?!0:this.state.viewConfig&&(this.state.viewConfig.tracksEditable===!1||this.state.viewConfig.editable===!1)}},{key:"isViewHeaderDisabled",value:function(){return this.props.options&&(this.props.options.editable===!1||this.props.options.viewEditable===!1)?!0:this.state.viewConfig&&(this.state.viewConfig.viewEditable===!1||this.state.viewConfig.editable===!1)}},{key:"iterateOverViews",value:function(){const r=[];for(const i in Object.keys(this.state.views))r.push(i);return r}},{key:"iterateOverTracksInView",value:function(r){const i=[],{tracks:o}=this.state.views[r];for(const a in o)for(const s of o[a])if(s.type==="combined"&&s.contents)for(const u of s.contents)i.push({viewId:r,trackId:u.uid,track:u});else i.push({viewId:r,trackId:s.uid,track:s});return i}},{key:"iterateOverTracks",value:function(){const r=[];for(const i in this.state.views){const{tracks:o}=this.state.views[i];for(const a in o)for(const s of o[a])if(s.type==="combined"&&s.contents)for(const u of s.contents)r.push({viewId:i,trackId:u.uid,track:u});else r.push({viewId:i,trackId:s.uid,track:s})}return r}},{key:"setMouseTool",value:function(r){this.setState({mouseTool:r})}},{key:"isValueScaleLocked",value:function(r,i){const o=this.combineViewAndTrackUid(r,i);return this.state.views[r]?!!this.valueScaleLocks[o]:!1}},{key:"getLockGroupExtrema",value:function(r,i){const o=this.combineViewAndTrackUid(r,i);if(!this.state.views[r]||!this.valueScaleLocks[o])return null;const a=this.valueScaleLocks[o],s=Object.values(a).filter(h=>this.tiledPlots[h.view]).map(h=>this.tiledPlots[h.view].trackRenderer.getTrackObject(h.track)).filter(h=>h).map(h=>h.originalTrack===void 0?h:h.originalTrack),u=s.filter(h=>h.minRawValue&&h.maxRawValue).map(h=>a.ignoreOffScreenValues?h.minVisibleValue(!0):h.minVisibleValueInTiles(!0)),c=s.filter(h=>h.minRawValue&&h.maxRawValue).map(h=>a.ignoreOffScreenValues?h.maxVisibleValue(!0):h.maxVisibleValueInTiles(!0));if(u.length===0||u.filter(h=>h===null||h===1/0).length>0||c.length===0||c.filter(h=>h===null||h===-1/0).length>0)return null;const l=Math.min(...u),f=Math.max(...c);return[l,f]}},{key:"syncValueScales",value:function(r,i){const o=this.combineViewAndTrackUid(r,i);if(!this.state.views[r])return;const a=Ki(this.state.views[r].tracks,i);if(this.valueScaleLocks[o]){const s=this.valueScaleLocks[o],u=Object.values(s).filter(p=>this.tiledPlots[p.view]).map(p=>this.tiledPlots[p.view].trackRenderer.getTrackObject(p.track)).filter(p=>p).map(p=>p.originalTrack===void 0?p:p.originalTrack),c=this.getLockGroupExtrema(r,i);if(c===null)return;const l=c[0],f=c[1],h=1e-6;for(const p of u){if(p.minValue&&p.minValue(l),p.maxValue&&p.maxValue(f),!p.valueScale)continue;const d=Math.abs(p.minValue()-p.valueScale.domain()[0])>h||Math.abs(p.maxValue()-p.valueScale.domain()[1])>h,m=a.options&&p.options&&typeof a.options.scaleStartPercent<"u"&&typeof a.options.scaleEndPercent<"u"&&(Math.abs(p.options.scaleStartPercent-a.options.scaleStartPercent)>h||Math.abs(p.options.scaleEndPercent-a.options.scaleEndPercent)>h);p.continuousScaling&&!d&&!m||(p.valueScale.domain([l,f]),p.prevValueScale=p.valueScale.copy(),m&&(p.options.scaleStartPercent=a.options.scaleStartPercent,p.options.scaleEndPercent=a.options.scaleEndPercent),p.rerender(p.options,!0))}}}},{key:"handleNewTilesLoaded",value:function(r,i){this.animate()}},{key:"notifyDragChangedListeners",value:function(r){mr(this.draggingChangedListeners).forEach(i=>{mr(i).forEach(o=>o(r))})}},{key:"addDraggingChangedListener",value:function(r,i,o){this.draggingChangedListeners.hasOwnProperty(r)||(this.draggingChangedListeners[r]={}),this.draggingChangedListeners[r][i]=o,o(!0),o(!1)}},{key:"removeDraggingChangedListener",value:function(r,i){if(this.draggingChangedListeners.hasOwnProperty(r)){const o=this.draggingChangedListeners[r];o.hasOwnProperty(i)&&(o[i](!1),delete o[i])}}},{key:"addScalesChangedListener",value:function(r,i,o){this.scalesChangedListeners[r]||(this.scalesChangedListeners[r]={}),this.scalesChangedListeners[r][i]=o,!(!this.xScales[r]||!this.yScales[r])&&o(this.xScales[r],this.yScales[r])}},{key:"removeScalesChangedListener",value:function(r,i){if(this.scalesChangedListeners[r]){const o=this.scalesChangedListeners[r];o[i]&&delete o[i]}}},{key:"createSVG",value:function(){const r=document.createElement("svg");r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("version","1.1");for(const i of mr(this.tiledPlots))if(i){for(const o of mr(i.trackRenderer.trackDefObjects))if(o.trackObject.exportSVG){const a=o.trackObject.exportSVG();a&&r.appendChild(a[0])}}return r.setAttribute("width",this.canvasElement.style.width),r.setAttribute("height",this.canvasElement.style.height),this.postCreateSVGCallback?this.postCreateSVGCallback(r):r}},{key:"createSVGString",value:function(){const r=this.createSVG();let i=pce.xml(new window.XMLSerializer().serializeToString(r));return i=i.replace(/<a0:/g,"<"),i=i.replace(/<\/a0:/g,"</"),i=i.replace(/(<svg[\n\r])(\s+xmlns="http:\/\/www\.w3\.org\/1999\/xhtml"[\n\r])/gm,"$1"),i=i.replace(/(\s+<clipPath[\n\r]\s+)(xmlns="http:\/\/www\.w3\.org\/2000\/svg")/gm,"$1"),`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
${i}`}},{key:"handleExportSVG",value:function(){$m("export.svg",new Blob([this.createSVGString()],{type:"image/svg+xml"}))}},{key:"offPostCreateSVG",value:function(){this.postCreateSVGCallback=null}},{key:"onPostCreateSVG",value:function(r){this.postCreateSVGCallback=r}},{key:"createPNGBlobPromise",value:function(){return new Promise(r=>{const i=this.createSVGString(),o=new Image(this.canvasElement.width,this.canvasElement.height);o.src=`data:image/svg+xml;base64,${btoa(i)}`,o.onload=()=>{const a=document.createElement("canvas");a.width=this.canvasElement.width/2,a.height=this.canvasElement.height/2,a.getContext("2d").drawImage(o,0,0),a.toBlob(s=>{r(s)})}})}},{key:"handleExportPNG",value:function(){this.createPNGBlobPromise().then(r=>{$m("export.png",r)})}},{key:"handleScalesChanged",value:function(r,i,o,a=!0){if(this.xScales[r]=i,this.yScales[r]=o,a&&r in this.scalesChangedListeners&&mr(this.scalesChangedListeners[r]).forEach(s=>{s(i,o)}),this.zoomLocks[r]){const s=this.zoomLocks[r],u=po(s),[c,l,f]=un(this.xScales[r],this.yScales[r]);for(let h=0;h<u.length;h++){const p=u[h][0],d=u[h][1];if(!this.xScales[p]||!this.yScales[p]||p===r)continue;const[m,g,v]=un(this.xScales[p],this.yScales[p]),b=d[2]/s[r][2],y=f*b;if(!this.setCenters[p])continue;const[_,T]=this.setCenters[p](m,g,y,!1);this.xScales[p]=_,this.yScales[p]=T,this.scalesChangedListeners.hasOwnProperty(p)&&mr(this.scalesChangedListeners[p]).forEach(S=>{S(_,T)})}}if(this.locationLocks[r]){const s=this.locationLocks[r],u=po(s),[c,l,f]=un(this.xScales[r],this.yScales[r]);for(let h=0;h<u.length;h++){const p=u[h][0],d=u[h][1];if(!this.xScales[p]||!this.yScales[p])continue;const[m,g,v]=un(this.xScales[p],this.yScales[p]);if(p===r)continue;const b=d[0]-s[r][0],y=d[1]-s[r][1],_=c+b,T=l+y;if(!this.setCenters[p])continue;const[S,E]=this.setCenters[p](_,T,v,!1);this.xScales[p]=S,this.yScales[p]=E,this.scalesChangedListeners.hasOwnProperty(p)&&mr(this.scalesChangedListeners[p]).forEach(I=>{I(S,E)})}}if(this.locationLocksAxisWise.x[r]){const s=this.locationLocksAxisWise.x[r].lock,u=po(s),c=this.locationLocksAxisWise.x[r].axis!=="x",[l,f,h]=un(this.xScales[r],this.yScales[r]);for(let p=0;p<u.length;p++){const d=u[p][0],m=u[p][1];if(!this.xScales[d]||!this.yScales[d])continue;const[g,v,b]=un(this.xScales[d],this.yScales[d]);if(d===r)continue;const y=m[0]-s[r][0],_=l+y;if(!this.setCenters[d])continue;const[T,S]=this.setCenters[d](c?g:_,c?_:v,b,!1);this.xScales[d]=T,this.yScales[d]=S,this.scalesChangedListeners.hasOwnProperty(d)&&mr(this.scalesChangedListeners[d]).forEach(E=>{E(T,S)})}}if(this.locationLocksAxisWise.y[r]){const s=this.locationLocksAxisWise.y[r].lock,u=po(s),c=this.locationLocksAxisWise.y[r].axis!=="y",[l,f,h]=un(this.xScales[r],this.yScales[r]);for(let p=0;p<u.length;p++){const d=u[p][0],m=u[p][1];if(!this.xScales[d]||!this.yScales[d])continue;const[g,v,b]=un(this.xScales[d],this.yScales[d]);if(d===r)continue;const y=m[1]-s[r][1],_=f+y;if(!this.setCenters[d])continue;const[T,S]=this.setCenters[d](c?_:g,c?v:_,b,!1);this.xScales[d]=T,this.yScales[d]=S,this.scalesChangedListeners.hasOwnProperty(d)&&mr(this.scalesChangedListeners[d]).forEach(E=>{E(T,S)})}}this.animate(),this.triggerViewChangeDb()}},{key:"handleProjectViewport",value:function(r){this.setState({chooseTrackHandler:(i,o)=>this.handleViewportProjected(r,i,o)})}},{key:"handleZoomToData",value:function(r){if(r&&!this.tiledPlots[r])throw new Error(`View uid ${r} does not exist in the current viewConfig`);r?this.tiledPlots[r].handleZoomToData():Object.values(this.tiledPlots).forEach(i=>i.handleZoomToData())}},{key:"resetViewport",value:function(r){if(r&&!this.tiledPlots[r])throw new Error(`View uid ${r} does not exist in the current viewConfig`);r?this.tiledPlots[r].resetViewport():Object.values(this.tiledPlots).forEach(i=>i.resetViewport())}},{key:"handleYankFunction",value:function(r,i){this.setState({chooseViewHandler:o=>i(r,o),mouseOverOverlayUid:r})}},{key:"handleUnlock",value:function(r,i){const o=i[r],a=ho(o);if(a.length===2){delete i[a[0]],delete i[a[1]];return}i[r]&&i[r][r]&&delete i[r][r],i[r]&&delete i[r]}},{key:"viewScalesLockData",value:function(r){return!this.xScales[r]||!this.yScales[r]?(console.warn("View scale lock doesn't correspond to existing uid: ",r),null):un(this.xScales[r],this.yScales[r])}},{key:"addLock",value:function(r,i,o,a){let s=[],u=[];o[r]?s=po(o[r]).filter(f=>a(f[0])).map(f=>[f[0],a(f[0])]):s=[[r,a.bind(this)(r)]],o[i]?u=po(o[i]).filter(f=>a.bind(this)(f[0])).map(f=>[f[0],a.bind(this)(f[0])]):u=[[i,a.bind(this)(i)]];const c=s.concat(u),l=E9(c);c.forEach(f=>{o[f[0]]=l})}},{key:"handleLocationLockChosen",value:function(r,i){if(r===i){this.setState({chooseViewHandler:null});return}this.addLock(r,i,this.locationLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})}},{key:"handleZoomLockChosen",value:function(r,i){if(r===i){this.setState({chooseViewHandler:null});return}this.addLock(r,i,this.zoomLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})}},{key:"handleViewportProjected",value:function(r,i,o){let a=null;if(r===i)console.warn("A view can not show its own viewport.");else{const s=Ki(this.state.views[i].tracks,o),u=Km(this.state.views[i].tracks,o);a=zt.nice();const c={uid:a,type:`viewport-projection-${{top:"horizontal",bottom:"horizontal",center:"center",left:"vertical",right:"vertical"}[u]}`,fromViewUid:r};this.addCallbacks(i,c),this.handleTrackAdded(i,c,u,s)}return this.setState({chooseTrackHandler:null}),a}},{key:"handleLocationYanked",value:function(r,i){const o=this.xScales[i],a=this.yScales[i],s=this.xScales[r],u=this.yScales[r],[c,l,f]=un(s,u),[h,p,d]=un(o,a);this.setCenters[r](h,p,f,!0),this.setState({chooseViewHandler:null})}},{key:"handleZoomYanked",value:function(r,i){const o=this.xScales[i],a=this.yScales[i],s=this.xScales[r],u=this.yScales[r],[c,l,f]=un(s,u),[h,p,d]=un(o,a);this.setCenters[r](c,l,d,!0),this.setState({chooseViewHandler:null})}},{key:"handleTrackPositionChosen",value:function(r,i){this.setState({addTrackPosition:i,addTrackPositionView:r})}},{key:"updateRowHeight",value:function(){if(!this.props.options||this.sizeMode!==CU||this.props.options.pixelPreciseMarginPadding)return;const r=this.element.parentNode.clientHeight;let i=0;for(const u of mr(this.state.views))i=Math.max(i,u.layout.y+u.layout.h);this.handleDragStart(),this.handleDragStop();const o=(this.isEditable()?10:0)*i-1,a=(r-o)/i,s=Math.floor(a);this.setState({rowHeight:s})}},{key:"handleLayoutChange",value:function(r){this.element&&(r.forEach(i=>{const o=this.state.views[i.i];o&&(o.layout.x=i.x,o.layout.y=i.y,o.layout.w=i.w,o.layout.h=i.h,o.layout.i=i.i)}),this.updateRowHeight(),this.refreshView(Em))}},{key:"clearDragTimeout",value:function(){this.dragTimeout&&(clearTimeout(this.dragTimeout),this.dragTimeout=null)}},{key:"getTrackInfo",value:function(r){if(Tr[r])return Tr[r];if(this.pluginTracks&&this.pluginTracks[r])return this.pluginTracks[r].config;if(window.higlassTracksByType&&window.higlassTracksByType[r])return window.higlassTracksByType[r].config;console.warn("Track type not found:",r,"(check app/scripts/config/ for a list of defined track types)")}},{key:"forceRefreshView",value:function(){this.setState(this.state)}},{key:"refreshView",value:function(r=h9){this.clearDragTimeout(),this.notifyDragChangedListeners(!0),this.clearDragTimeout(),this.dragTimeout=setTimeout(()=>{this.notifyDragChangedListeners(!1)},r)}},{key:"handleDragStart",value:function(){this.clearDragTimeout(),this.notifyDragChangedListeners(!0)}},{key:"handleDragStop",value:function(){this.clearDragTimeout(),this.dragTimeout=setTimeout(()=>{this.notifyDragChangedListeners(!1)},Em)}},{key:"resizeHandler",value:function(){y1(this.viewHeaders).filter(r=>r).forEach(r=>r.checkWidth())}},{key:"calculateViewDimensions",value:function(r){let i=this.viewMarginTop+this.viewMarginBottom+this.viewPaddingTop+this.viewPaddingBottom,o=this.viewMarginLeft+this.viewMarginRight+this.viewPaddingLeft+this.viewPaddingRight,a=0;a+=10;const s=20;if(r.tracks.top)for(let v=0;v<r.tracks.top.length;v++){const b=r.tracks.top[v];i+=b.height?b.height:20,a+=b.height?b.height:20}if(r.tracks.bottom)for(let v=0;v<r.tracks.bottom.length;v++){const b=r.tracks.bottom[v];i+=b.height?b.height:20,a+=b.height?b.height:20}(r.tracks.left&&r.tracks.left.length>0||r.tracks.right&&r.tracks.right.length>0||r.tracks.center&&r.tracks.center.length>0)&&(a+=s);let u=0;if(r.tracks.left)for(let v=0;v<r.tracks.left.length;v++){const b=r.tracks.left[v],y=b.height?b.height:100;o+=b.width?b.width:0,u=Math.max(u,y)}let c=0;if(r.tracks.right)for(let v=0;v<r.tracks.right.length;v++){const b=r.tracks.right[v],y=b.height?b.height:100;o+=b.width?b.width:0,c=Math.max(c,y)}const l=Math.max(u,c);let f=0,h=0;if(r.tracks.center&&mr(r.tracks.center).length>0){if(!r.tracks.center[0].contents||r.tracks.center[0].contents.length>0){let v=null,b=null;if(r.tracks.center[0].contents)for(const y of r.tracks.center[0].contents)v=Math.max(v,y.height?y.height:100),b=Math.max(b,y.width?y.width:100);else v=r.tracks.center[0].height?r.tracks.center[0].height:100,b=r.tracks.center[0].width?r.tracks.center[0].width:100;i+=v,o+=b}}else(r.tracks.top&&mr(r.tracks.top).length>1||r.tracks.bottom&&mr(r.tracks.bottom).length>1)&&(r.tracks.left&&mr(r.tracks.left).length||r.tracks.right&&mr(r.tracks.right).length)&&(h=100,f=100);l>f?i+=l:i+=f;let p=0,d=0,m=0,g=0;return"top"in r.tracks&&(p=r.tracks.top.map(v=>v.height?v.height:20).reduce((v,b)=>v+b,0)),"bottom"in r.tracks&&(d=r.tracks.bottom.map(v=>v.height?v.height:20).reduce((v,b)=>v+b,0)),"left"in r.tracks&&(m=r.tracks.left.map(v=>v.width?v.width:0).reduce((v,b)=>v+b,0)),"right"in r.tracks&&(g=r.tracks.right.map(v=>v.width?v.width:0).reduce((v,b)=>v+b,0)),{totalWidth:o,totalHeight:i,topHeight:p,bottomHeight:d,leftWidth:m,rightWidth:g,centerWidth:h,centerHeight:f,minNecessaryHeight:a}}},{key:"calculateZoomLimits",value:function(r,i){const o=[0,1/0],a=r.zoomLimits||[1,null],s=i[1]-i[0];if(a.length!==2)return o;if(a[0]!==null&&a[0]>0){const u=s/a[0];o[1]=Math.max(u,1),u<1&&console.warn(`Invalid zoom limits. Lower limit set to ${s}`)}if(a[1]!==null&&a[1]>a[0]){const u=s/a[1];o[0]=Math.min(u,1),u>1&&console.warn(`Invalid zoom limits. Upper limit set to ${s}`)}return o}},{key:"generateViewLayout",value:function(r){let i=null;return"layout"in r?{layout:i}=r.layout:i={x:0,y:0,w:IU,h:Vit},i}},{key:"handleClearView",value:function(r){const{views:i}=this.state;i[r].tracks.top=[],i[r].tracks.bottom=[],i[r].tracks.center=[],i[r].tracks.left=[],i[r].tracks.right=[],i[r].tracks.whole=[],this.setState({views:i})}},{key:"handleCloseView",value:function(r){mr(this.state.views).length!==1&&(this.handleUnlock(r,this.zoomLocks),this.setState(i=>(delete i.views[r],{views:this.removeInvalidTracks(i.views)})))}},{key:"handleSeriesAdded",value:function(r,i,o,a){const{tracks:s}=this.state.views[r];if(a.type==="combined")a.contents.push(i),i.type==="heatmap"&&this.compatibilityfyStackedHeatmaps(i,a);else{const u={type:"combined",uid:zt.nice(),height:a.height,width:a.width,contents:[a,i]},c=s[o];for(let l=0;l<c.length;l++)c[l].uid===a.uid&&(c[l]=u)}this.setState(u=>({views:u.views}))}},{key:"handleNoTrackAdded",value:function(){this.state.addTrackPosition&&this.setState({addTrackPosition:null})}},{key:"handleTracksAdded",value:function(r,i,o,a){this.storeTrackSizes(r);for(const s of i)this.handleTrackAdded(r,s,o,a)}},{key:"handleChangeTrackType",value:function(r,i,o){const a=this.state.views[r],s=Ki(a.tracks,i),u=s.uid;s.uid=zt.nice(),s.type=o;const c=s.uid;this.updateTrackLocks(r,u,c),this.setState(l=>({views:l.views}))}},{key:"handleChangeTrackData",value:function(r,i,o){const a=this.state.views[r],s=Ki(a.tracks,i);s.uid=zt.nice(),s.data=o,this.setState(u=>({views:u.views}))}},{key:"handleTrackAdded",value:function(r,i,o,a=null){if(this.addDefaultTrackOptions(i),i.uid||(i.uid=zt.nice()),i.contents)for(const l of i.contents)this.addDefaultTrackOptions(l);if(this.state.addTrackPosition&&this.setState({addTrackPosition:null}),a)return this.handleSeriesAdded(r,i,o,a),null;i.position=o;const s=this.getTrackInfo(i.type);i.width=s.defaultWidth||s.defaultOptions&&s.defaultOptions.minWidth||this.minVerticalWidth,i.height=s.defaultHeight||s.defaultOptions&&s.defaultOptions.minHeight||this.minHorizontalHeight;const{tracks:u}=this.state.views[r];let c=0;if(ls(u,()=>c++),o==="left"||o==="top")u[o].unshift(i);else if(o==="center")if(u.center.length===0){const l={uid:zt.nice(),type:"combined",contents:[i]};u.center=[l]}else if(u.center[0].type==="combined")u.center[0].contents.push(i),i.type==="heatmap"&&this.compatibilityfyStackedHeatmaps(i,u.center[0]);else{const l={uid:zt.nice(),type:"combined",contents:[u.center[0],i]};u.center=[l],i.type==="heatmap"&&this.compatibilityfyStackedHeatmaps(i,l)}else u[o]||(u[o]=[]),u[o].push(i);return this.adjustLayoutToTrackSizes(this.state.views[r]),Object.keys(this.state.views).length===1&&c===0&&(this.handleZoomToData(r),this.zoomToDataExtentOnInit.add(r)),i}},{key:"compatibilityfyStackedHeatmaps",value:function(r,i){let o;i.contents.some(a=>(o=a,a.type==="heatmap"))&&(r.options.backgroundColor="transparent",r.options.showTooltip=o.options.showTooltip,r.options.showMousePosition=o.options.showMousePosition,r.options.mousePositionColor=o.options.mousePositionColor)}},{key:"storeTrackSizes",value:function(r){ls(this.state.views[r].tracks,i=>{const o=this.tiledPlots[r].trackRenderer.getTrackObject(i.uid);o&&([i.width,i.height]=o.dimensions)})}},{key:"adjustLayoutToTrackSizes",value:function(r){if(!r.layout)return;const i=this.isEditable();let o=0;i&&(o+=Yit);const{totalHeight:a}=this.calculateViewDimensions(r);o+=a;const s=this.isEditable()?10:0;o+=s;const u=this.state.rowHeight+s;this.sizeMode!==CU&&(r.layout.h=Math.ceil(o/u))}},{key:"handleCloseTrack",value:function(r,i){const{tracks:o}=this.state.views[r];this.handleUnlockValueScale(r,i);for(const a in o){const s=o[a],u=s.filter(c=>c.uid!==i);u.length===s.length?u.filter(c=>c.type==="combined").forEach(c=>{c.contents=c.contents.filter(l=>l.uid!==i)}):o[a]=u}return this.storeTrackSizes(r),this.adjustLayoutToTrackSizes(this.state.views[r]),this.setState(a=>({views:a.views})),this.state.views}},{key:"handleLockValueScale",value:function(r,i){this.setState({chooseTrackHandler:(o,a)=>this.handleValueScaleLocked(r,i,o,a)})}},{key:"combineViewAndTrackUid",value:function(r,i){const o=`${r}.${i}`;if(this.combinedUidToViewTrack[o]={view:r,track:i},this.viewTrackUidsToCombinedUid[r]){if(this.viewTrackUidsToCombinedUid[i])return this.viewTrackUidsToCombinedUid[r][i];this.viewTrackUidsToCombinedUid[r][i]=o}else this.viewTrackUidsToCombinedUid[r]={},this.viewTrackUidsToCombinedUid[r][i]=o;return o}},{key:"updateTrackLocks",value:function(r,i,o){const a=this.combineViewAndTrackUid(r,i),s=this.combineViewAndTrackUid(r,o);if(this.valueScaleLocks[a]){const u=this.valueScaleLocks[a];this.valueScaleLocks[s]=u,delete this.valueScaleLocks[a]}for(const u in this.valueScaleLocks)if(this.valueScaleLocks[u][a]){const c=this.valueScaleLocks[u][a];this.valueScaleLocks[u][s]=c,c.track=o,delete this.valueScaleLocks[u][a]}}},{key:"handleUnlockValueScale",value:function(r,i){if(this.tiledPlots[r].trackRenderer.getTrackObject(i).createdTracks){const o=ho(this.tiledPlots[r].trackRenderer.getTrackObject(i).createdTracks);for(const a of o)this.handleUnlock(this.combineViewAndTrackUid(r,a),this.valueScaleLocks)}else this.handleUnlock(this.combineViewAndTrackUid(r,i),this.valueScaleLocks)}},{key:"handleValueScaleLocked",value:function(r,i,o,a){if(this.tiledPlots[r].trackRenderer.getTrackObject(i).createdTracks){const c=ho(this.tiledPlots[r].trackRenderer.getTrackObject(i).createdTracks);for(const l of c)this.handleValueScaleLocked(r,l,o,a);return}if(this.tiledPlots[o].trackRenderer.getTrackObject(a).createdTracks){const c=ho(this.tiledPlots[o].trackRenderer.getTrackObject(a).createdTracks);for(const l of c)this.handleValueScaleLocked(r,i,o,l);return}const s=this.combineViewAndTrackUid(r,i),u=this.combineViewAndTrackUid(o,a);this.addLock(s,u,this.valueScaleLocks,c=>this.combinedUidToViewTrack[c]),this.syncValueScales(r,i),this.setState({chooseTrackHandler:null})}},{key:"addCallbacks",value:function(r,i){const o=this.getTrackInfo(i.type);if(i.type==="viewport-projection-center"||i.type==="viewport-projection-horizontal"||i.type==="viewport-projection-vertical"||o&&o.projection){const a=i.fromViewUid;i.registerViewportChanged=(s,u)=>this.addScalesChangedListener(a,s,u),i.removeViewportChanged=s=>this.removeScalesChangedListener(a,s),i.setDomainsCallback=(s,u)=>{if(!a){this.projectionXDomains[r]||(this.projectionXDomains[r]={}),this.projectionYDomains[r]||(this.projectionYDomains[r]={}),(i.type==="viewport-projection-horizontal"||i.type==="viewport-projection-center")&&(this.projectionXDomains[r][i.uid]=s),(i.type==="viewport-projection-vertical"||i.type==="viewport-projection-center")&&(this.projectionYDomains[r][i.uid]=u),this.triggerViewChangeDb();return}const c=kt().domain(s).range(this.xScales[a].range()),l=kt().domain(u).range(this.yScales[a].range()),[f,h,p]=un(c,l);this.setCenters[a](f,h,p,!1);let d=!1,m=!1;r in this.zoomLocks&&(d=a in this.zoomLocks[r]),d&&this.handleUnlock(r,this.zoomLocks),r in this.locationLocks&&(m=a in this.locationLocks[r]),m&&this.handleUnlock(r,this.locationLocks),this.handleScalesChanged(a,c,l,!0),d&&this.addLock(r,a,this.zoomLocks,this.viewScalesLockData),m&&this.addLock(r,a,this.locationLocks,this.viewScalesLockData)}}}},{key:"validateLocks",value:function(r){const i=[];for(const o of ho(r))(!r[o]||!r[o][o])&&i.push(o);for(const o of i)r[o]&&(console.warn(`View ${o} not present in lock group. Removing...`),this.handleUnlock(o,r),delete r[o])}},{key:"deserializeLocationLocks",value:function(r){if(this.locationLocks={},r.locationLocks)for(const i of ho(r.locationLocks.locksByViewUid))if(typeof r.locationLocks.locksByViewUid[i]!="object")this.locationLocks[i]=r.locationLocks.locksDict[r.locationLocks.locksByViewUid[i]];else{if("x"in r.locationLocks.locksByViewUid[i]){const o=r.locationLocks.locksDict[r.locationLocks.locksByViewUid[i].x.lock];this.locationLocksAxisWise.x[i]={lock:o,axis:r.locationLocks.locksByViewUid[i].x.axis}}if("y"in r.locationLocks.locksByViewUid[i]){const o=r.locationLocks.locksDict[r.locationLocks.locksByViewUid[i].y.lock];this.locationLocksAxisWise.y[i]={lock:o,axis:r.locationLocks.locksByViewUid[i].y.axis}}}this.validateLocks(this.locationLocks)}},{key:"deserializeZoomLocks",value:function(r){if(this.zoomLocks={},r.zoomLocks)for(const i of ho(r.zoomLocks.locksByViewUid))this.zoomLocks[i]=r.zoomLocks.locksDict[r.zoomLocks.locksByViewUid[i]];this.validateLocks(this.zoomLocks)}},{key:"deserializeValueScaleLocks",value:function(r){if(this.valueScaleLocks={},r.valueScaleLocks)for(const i of ho(r.valueScaleLocks.locksByViewUid))this.valueScaleLocks[i]=r.valueScaleLocks.locksDict[r.valueScaleLocks.locksByViewUid[i]]}},{key:"serializeLocks",value:function(r){const i={},o={};for(const a of ho(r)){let s=r[a]&&r[a].uid;s||(s=zt.nice()),r[a].uid=s,i[s]=r[a],o[a]=r[a].uid}return{locksByViewUid:o,locksDict:i}}},{key:"getViewsAsJson",value:function(){const r=JSON.parse(JSON.stringify(this.state.viewConfig));return r.views=Object.values(this.state.views).map(i=>{const o=JSON.parse(JSON.stringify(i));return ls(o.tracks,a=>{if(a.server){const s=kce(a.server,{});if(!s.hostname.length){const u=window.location.host,{protocol:c}=window.location,l=`${c}//${u}${s.pathname}`;a.server=l}}(a.type==="viewport-projection-center"||a.type==="viewport-projection-horizontal")&&this.projectionXDomains[i.uid]&&this.projectionXDomains[i.uid][a.uid]&&(a.projectionXDomain=this.projectionXDomains[i.uid][a.uid]),(a.type==="viewport-projection-center"||a.type==="viewport-projection-vertical")&&this.projectionYDomains[i.uid]&&this.projectionYDomains[i.uid][a.uid]&&(a.projectionYDomain=this.projectionYDomains[i.uid][a.uid]),delete a.name,delete a.position,delete a.header,delete a.description,delete a.created,delete a.project,delete a.project_name,delete a.serverUidKey,delete a.uuid,delete a.private,delete a.maxZoom,delete a.coordSystem,delete a.coordSystem2,delete a.datatype,delete a.maxWidth,delete a.datafile,delete a.binsPerDimension,delete a.resolutions,delete a.aggregationModes}),o.uid=i.uid,o.initialXDomain=this.xScales[i.uid].domain(),o.initialYDomain=this.yScales[i.uid].domain(),delete o.layout.i,o}),r.zoomLocks=this.serializeLocks(this.zoomLocks),r.locationLocks=this.serializeLocks(this.locationLocks),r.valueScaleLocks=this.serializeLocks(this.valueScaleLocks),r}},{key:"getViewsAsString",value:function(){return JSON.stringify(this.getViewsAsJson(),null,2)}},{key:"handleExportViewAsJSON",value:function(){const r=this.getViewsAsString();$m("viewconf.json",r)}},{key:"handleExportViewsAsLink",value:function(r=this.state.viewConfig.exportViewUrl,i=!1){const o=new URL(r,window.location.origin),a=fetch(r,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:`{"viewconf":${this.getViewsAsString()}}`,credentials:"same-origin"}).then(s=>{if(!s.ok)throw s;return s.json()}).catch(s=>{console.warn("err:",s)}).then(s=>({id:s.uid,url:`${o.origin}/l/?d=${s.uid}`}));return i||a.then(s=>{this.openModal(O.createElement(gM,{onDone:()=>{this.closeModalBound()},url:s.url}))}).catch(s=>console.error("Exporting view config as link failed:",s)),a}},{key:"handleDataDomainChanged",value:function(r,i,o){const{views:a}=this.state;if(a[r].initialXDomain=i,a[r].initialYDomain=o,this.xScales[r]=kt().domain(i),this.yScales[r]=kt().domain(o),this.zoomLocks[r]){const s=this.zoomLocks[r],u=po(s);for(let c=0;c<u.length;c++){const l=u[c][0];l in this.locationLocks&&(a[l].initialXDomain=i,a[l].initialYDomain=o,this.xScales[l]=kt().domain(i),this.yScales[l]=kt().domain(o))}}this.setState({views:a})}},{key:"viewPositionAvailable",value:function(r,i,o,a){const s=r+o,u=i+a;if(r+o>IU)return!1;const c=mr(this.state.views);for(let l=0;l<c.length;l++){const f=c[l].layout.x,h=c[l].layout.y,p=f+c[l].layout.w,d=h+c[l].layout.h;if(r<p&&s>f&&i<d&&u>h)return!1}return!0}},{key:"handleAddView",value:function(r){const i=mr(this.state.views),o=r,a=[];r.layout.w===12&&(r.layout.w=6);for(let c=0;c<i.length;c++){let l=i[c].layout.x+i[c].layout.w,f=i[c].layout.y;this.viewPositionAvailable(l,f,r.layout.w,r.layout.h)&&a.push([l,f]),l=i[c].layout.x,f=i[c].layout.y+i[c].layout.h,this.viewPositionAvailable(l,f,r.layout.w,r.layout.h)&&a.push([l,f])}a.sort((c,l)=>{const f=c[1]-l[1];return f===0?c[0]-l[0]:f});const s=JSON.stringify(o),u=JSON.parse(s);u.initialXDomain=this.xScales[u.uid].domain(),u.initialYDomain=this.yScales[u.uid].domain(),[[u.layout.x,u.layout.y]]=a,u.uid=zt.nice(),u.layout.i=u.uid,ls(u.tracks,c=>{this.addCallbacks(u.uid,c)}),this.setState(c=>{const l=JSON.parse(JSON.stringify(c.views));return l[u.uid]=u,{views:l}})}},{key:"handleSelectedAssemblyChanged",value:function(r,i,o,a){const{views:s}=this.state;s[r].genomePositionSearchBox.chromInfoId=i,s[r].genomePositionSearchBox.autocompleteId=o,s[r].genomePositionSearchBox.autocompleteServer=a}},{key:"createGenomePostionSearchBoxEntry",value:function(r,i){let o=r;const a={autocompleteServer:sx,chromInfoServer:sx,visible:!1};return o||(o=JSON.parse(JSON.stringify(a))),o.autocompleteServer||(o.autocompleteServer=a.autocompleteServer),o.chromInfoId||(o.chromInfoId=i),o.chromInfoServer||(o.chromInfoServer=a.chromInfoServer),o.visible||(o.visible=!1),o}},{key:"handleTogglePositionSearchBox",value:function(r){const i=this.state.views[r];i.genomePositionSearchBoxVisible=!i.genomePositionSearchBoxVisible;const o={};ls(i.tracks,u=>{u.coordSystem&&(o[u.coordSystem]||(o[u.coordSystem]=0),o[u.coordSystem]+=1)});const a=po(o).sort((u,c)=>c[1]-u[1]);let s="hg19";a.length&&(s=a[0][0]),i.genomePositionSearchBox=this.createGenomePostionSearchBoxEntry(i.genomePositionSearchBox,s),i.genomePositionSearchBox.visible=!i.genomePositionSearchBox.visible,this.refreshView(),this.setState({configMenuUid:null})}},{key:"handleTrackOptionsChanged",value:function(r,i,o){const a=this.state.views[r],s=Ki(a.tracks,i);s&&(s.options=Object.assign(s.options,o),this.mounted&&(this.setState(u=>({views:u.views})),this.adjustSplitHeatmapTrackOptions(s,o,a.tracks,r)))}},{key:"adjustSplitHeatmapTrackOptions",value:function(r,i,o,a){r.type==="heatmap"&&(i.extent==="upper-right"&&o.center[0].type==="combined"&&o.center[0].contents.length>1&&o.center[0].contents.some(s=>{if(s.type==="heatmap"&&s.uid!==r.uid&&s.options.extent!=="lower-left"){const u={...s.options,extent:"lower-left",labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"},c={...i,labelPosition:"topRight",colorbarPosition:"topRight"};return this.handleTrackOptionsChanged(a,s.uid,u),this.handleTrackOptionsChanged(a,r.uid,c),!0}return!1}),i.extent==="lower-left"&&i.extent==="lower-left"&&o.center[0].type==="combined"&&o.center[0].contents.length>1&&o.center[0].contents.some(s=>{if(s.type==="heatmap"&&s.uid!==r.uid&&s.options.extent!=="upper-right"){const u={...s.options,extent:"upper-right",labelPosition:"topRight",colorbarPosition:"topRight"},c={...i,labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"};return this.handleTrackOptionsChanged(a,s.uid,u),this.handleTrackOptionsChanged(a,r.uid,c),!0}return!1}))}},{key:"handleViewOptionsChanged",value:function(r,i){const o=this.state.views[r];o&&(o.options=Object.assign(o.options||{},i),this.mounted&&this.setState(a=>({views:a.views})))}},{key:"isTrackValid",value:function(r,i){return!(r.type==="viewport-projection-center"&&!i.has(r.fromViewUid))}},{key:"removeInvalidTracks",value:function(r){const i=new Set(ho(r));for(const o of mr(r))for(const a of["left","top","center","right","bottom"])o.tracks&&o.tracks.hasOwnProperty(a)&&(o.tracks[a]=o.tracks[a].filter(s=>this.isTrackValid(s,i)),o.tracks[a].forEach(s=>{s.type==="combined"&&(s.contents=s.contents.filter(u=>this.isTrackValid(u,i)))}));return r}},{key:"processViewConfig",value:function(r){let{views:i}=r,o={};return(!r.views||r.views.length===0)&&(console.warn("No views provided in viewConfig"),i=[{editable:!0,tracks:{}}]),i.forEach(a=>{a.tracks&&S9(a.tracks),a.uid||(a.uid=zt.nice()),o[a.uid]=a,this.zoomToDataExtentOnInit.has(a.uid)&&this.zoomToDataExtentOnInit.delete(a.uid),a.initialXDomain?(a.initialXDomain[0]=+a.initialXDomain[0],a.initialXDomain[1]=+a.initialXDomain[1]):(a.initialXDomain=[0,100],this.zoomToDataExtentOnInit.add(a.uid)),a.initialYDomain?(a.initialXDomain[0]=+a.initialXDomain[0],a.initialXDomain[1]=+a.initialXDomain[1]):a.initialYDomain=[a.initialXDomain[0],a.initialXDomain[1]],this.xScales[a.uid]||(this.xScales[a.uid]=kt().domain(a.initialXDomain)),this.yScales[a.uid]||(this.yScales[a.uid]=kt().domain(a.initialYDomain)),ls(a.tracks,s=>{if(s.uid||(s.uid=zt.nice()),this.addCallbacks(a.uid,s),this.addDefaultTrackOptions(s),s.contents)for(const u of s.contents)this.addDefaultTrackOptions(u)}),a.layout?a.layout.i=a.uid:a.layout=this.generateViewLayout(a)}),this.deserializeZoomLocks(r),this.deserializeLocationLocks(r),this.deserializeValueScaleLocks(r),o=this.removeInvalidTracks(o),o}},{key:"handleWindowFocused",value:function(){}},{key:"rangeSelectionHandler",value:function(r){this.rangeSelection=r,this.apiPublish("rangeSelection",r)}},{key:"offViewChange",value:function(r){this.viewChangeListener.splice(r,1)}},{key:"onViewChange",value:function(r){return this.viewChangeListener.push(r)-1}},{key:"triggerViewChange",value:function(){this.viewChangeListener.forEach(r=>r(this.getViewsAsString()))}},{key:"getGenomeLocation",value:function(r){return xR.get(this.state.views[r].chromInfoPath).then(i=>V9(this.xScales[r],this.yScales[r],i))}},{key:"offLocationChange",value:function(r,i){this.removeScalesChangedListener(r,i)}},{key:"zoomTo",value:function(r,i,o,a,s,u){if(!(r in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(Number.isNaN(+i)||Number.isNaN(+o)){const h=[i,o].join(", ");console.warn([`Invalid coordinates (${h}). All coordinates need to be numbers
        and should represent absolute coordinates (not chromosome
        coordinates).`].join(" "));return}(Number.isNaN(+a)||Number.isNaN(+s)||a===null||s===null)&&(a=i,s=o);const[c,l,f]=un(this.xScales[r].copy().domain([i,o]),this.yScales[r].copy().domain([a,s]));this.setCenters[r](c,l,f,!1,u)}},{key:"zoomToGene",value:function(r,i,o,a){if(!(r in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(!this.state.views[r].genomePositionSearchBox||!this.state.views[r].genomePositionSearchBox.autocompleteServer||!this.state.views[r].genomePositionSearchBox.autocompleteId||!this.state.views[r].chromInfoPath){console.warn("Please set chromInfoPath, autocompleteServer, and autocompleteId to use the zoomToGene API");return}this.suggestGene(r,i,s=>{if(s){const u=s.find(c=>c.geneName.toLowerCase()===i.toLowerCase());if(u){const{chr:c,txStart:l,txEnd:f}=u;Bs(this.state.views[r].chromInfoPath,h=>{const p=h.chrToAbs([c,l])-o,d=h.chrToAbs([c,f])+o,[m,g,v]=un(this.xScales[r].copy().domain([p,d]),this.yScales[r].copy().domain([p,d]));this.setCenters[r](m,g,v,!1,a)},this.pubSub)}else console.warn(`Couldn't find the gene symbol: ${i}`)}})}},{key:"suggestGene",value:function(r,i,o){if(!(r in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(!this.state.views[r].genomePositionSearchBox||!this.state.views[r].genomePositionSearchBox.autocompleteServer||!this.state.views[r].genomePositionSearchBox.autocompleteId){console.warn("Please set autocompleteServer and autocompleteId to use the suggestGene API");return}const a=this.state.views[r].genomePositionSearchBox.autocompleteServer,s=this.state.views[r].genomePositionSearchBox.autocompleteId,u=`${a}/suggest/?d=${s}&ac=${i.toLowerCase()}`;et.json(u,Yo,this.pubSub).then(c=>{o(c)}).catch(c=>console.error(c))}},{key:"onLocationChange",value:function(r,i,o){const a=Object.keys(this.state.views);if(!a.length)return this.unsetOnLocationChange.push({viewId:r,callback:i,callbackId:o}),null;if(r=typeof r>"u"&&a.length===1?a[0]:r,typeof r>"u"||a.indexOf(r)===-1)return console.error("onLocationChange either missing a viewId or passed an invalid viewId: ",r),null;const s=this.state.views[r],u=(l,f)=>{i({xDomain:l.domain(),yDomain:f.domain(),xRange:l.range(),yRange:f.range()})};let c=1;return this.scalesChangedListeners[s.uid]&&(c=Object.keys(this.scalesChangedListeners[s.uid]).filter(l=>l.indexOf(Sm)===0).map(l=>parseInt(l.slice(Sm.length+1),10)).reduce((l,f)=>Math.max(l,f),0)+1),this.addScalesChangedListener(s.uid,`${Sm}.${c}`,u),o&&o(`${Sm}.${c}`),c}},{key:"getTiledPlotAtPosition",value:function(r,i){let o;const a=mr(this.state.views);for(let s=0;s<a.length;s++){const u=this.tiledPlots[a[s].uid],c=this.tiledAreasDivs[a[s].uid].getBoundingClientRect(),{top:l,left:f}=c,h=l+c.height,p=f+c.width,d=r>=f&&r<=p,m=i>=l&&i<=h;if(d&&m){o=u;break}}return o}},{key:"mouseMoveHandler",value:function(r){if(!this.topDiv||this.state.modal)return;const i=r.clientX,o=r.clientY,a=yr(r,this.topDiv);a[1]+=this.scrollTop;const s=this.getTiledPlotAtPosition(i,o),u=s?s.listTracksAtPosition(a[0],a[1],!0).map(d=>d.originalTrack||d):[],c=u.find(d=>!d.isAugmentationTrack),l=c?[a[0]-c.position[0],a[1]-c.position[1]]:a;let f=-1,h=-1;c&&(f=c.flipText?c._xScale.invert(l[1]):c._xScale.invert(l[0]),h=c.is2d?c._yScale.invert(l[1]):f);const p={x:a[0],y:a[1],relTrackX:c&&c.flipText?l[1]:l[0],relTrackY:c&&c.flipText?l[0]:l[1],dataX:f,dataY:h,isFrom2dTrack:!!(c&&c.is2d),isFromVerticalTrack:!!(c&&c.flipText),track:c,origEvt:r,sourceUid:this.uid,hoveredTracks:u,noHoveredTracks:u.length===0};if(this.pubSub.publish("app.mouseMove",p),this.isBroadcastMousePositionGlobally){const d={...p};d.origEvt=void 0,d.track=void 0,d.hoveredTracks=void 0,delete d.origEvt,delete d.track,delete d.hoveredTracks,qm.publish("higlass.mouseMove",d)}this.apiPublish("cursorLocation",{absX:i,absY:o,relX:p.x,relY:p.y,relTrackX:p.relTrackX,relTrackY:p.relTrackY,dataX:p.dataX,dataY:p.dataY,isFrom2dTrack:p.isFrom2dTrack,isFromVerticalTrack:p.isFromVerticalTrack}),this.showHoverMenu(p)}},{key:"getMinMaxValue",value:function(r,i,o,a){const s=wm(this.tiledPlots,r,i);if(!s){console.warn(`Track with ID: ${i} not found!`);return}if(!s.minVisibleValueInTiles||!s.maxVisibleValueInTiles){console.warn(`Track ${i} doesn't support the retrieval of min or max values.`);return}return o&&s.getAggregatedVisibleValue?[s.getAggregatedVisibleValue("min"),s.getAggregatedVisibleValue("max")]:[s.minVisibleValueInTiles(a),s.maxVisibleValueInTiles(a)]}},{key:"showHoverMenu",value:function(r){const i=r.track&&r.track.getMouseOverHtml?r.track.getMouseOverHtml(r.relTrackX,r.relTrackY):"";if(r.track!==this.prevMouseHoverTrack&&this.prevMouseHoverTrack&&this.prevMouseHoverTrack.stopHover&&this.prevMouseHoverTrack.stopHover(),this.prevMouseHoverTrack=r.track,this.zooming)return;const o=i&&i.length?[1]:[];let a=Wt("body").selectAll(".track-mouseover-menu").data(o);a.exit().remove(),a.enter().append("div").classed("track-mouseover-menu",!0).classed(Hh["track-mouseover-menu"],!0),a=Wt("body").selectAll(".track-mouseover-menu");const s=yr(r.origEvt,Wt("body").node()),u=[s[0]-window.scrollX,s[1]-window.scrollY];if(a.style("left",`${u[0]}px`).style("top",`${u[1]}px`),!a.node())return;const c=a.node().getBoundingClientRect();c.x+c.width>window.innerWidth&&a.style("left",`${u[0]-c.width}px`),c.y+c.height>window.innerHeight&&a.style("top",`${u[1]-c.height}px`),a.html(i)}},{key:"hideHoverMenu",value:function(){Wt("body").selectAll(".track-mouseover-menu").remove()}},{key:"closeCustomDialog",value:function(){this.setState(r=>({customDialog:null}))}},{key:"appClickHandler",value:function(r){this.apiPublish("click",r)}},{key:"canvasClickHandler",value:function(r){const i=r.nativeEvent||r,o=i.clientX,a=i.clientY,s=this.getTiledPlotAtPosition(o,a),u=yr(i,this.topDiv);u[1]+=this.scrollTop;const c=s?s.listTracksAtPosition(u[0],u[1],!0).map(g=>g.originalTrack||g):[],l=c.find(g=>!g.isAugmentationTrack),f=l?[u[0]-l.position[0],u[1]-l.position[1]]:u,h=l&&l.flipText?f[1]:f[0],p=l&&l.flipText?f[0]:f[1];for(const g of this.iterateOverTracks()){const v=wm(this.tiledPlots,g.viewId,g.trackId);v.respondsToPosition(u[0],u[1])||v.clickOutside()}const d=[];for(const g of c)if(g.childTracks){for(const v of g.childTracks)d.push({trackUid:v.context.trackUid,viewUid:v.context.viewUid,trackType:v.context.trackType,data:v.click(h,p,r)});d.push({trackUid:g.context.trackUid,viewUid:g.context.viewUid,trackType:g.context.trackType,data:{type:"generic",event:r}})}else d.push({trackUid:g.context.trackUid,viewUid:g.context.viewUid,trackType:g.context.trackType,data:g.click(h,p,r)});const m=[];d.forEach((g,v)=>{const b=wm(this.tiledPlots,g.viewUid,g.trackUid);if(typeof b.clickDialog=="function"){const y=b.clickDialog();y&&m.push(y)}}),m.length>0&&this.setState(g=>({customDialog:m})),this.pubSub.publish("app.click",d)}},{key:"mouseMoveZoomHandler",value:function(r){this.apiPublish("mouseMoveZoom",r)}},{key:"geneSearchHandler",value:function(r){this.apiPublish("geneSearch",r)}},{key:"mouseDownHandler",value:function(r){}},{key:"onScrollHandler",value:function(){this.props.options.sizeMode===mm&&(this.scrollTop=this.scrollContainer.scrollTop,this.pixiStage.y=-this.scrollTop,this.pubSub.publish("app.scroll",this.scrollTop),this.animate())}},{key:"setTrackValueScaleLimits",value:function(r,i,o,a){const s=wm(this.tiledPlots,r,i);if(!s){console.warn(`Could't find track: ${i}`);return}s.setFixedValueScaleMin&&s.setFixedValueScaleMax?(s.setFixedValueScaleMin(o),s.setFixedValueScaleMax(a),s.rerender(s.options,!0),s.animate()):console.warn("Track doesn't support fixed value scales.")}},{key:"setChromInfo",value:function(r,i){Bs(r,o=>{this.chromInfo=o,i()},this.pubSub)}},{key:"onMouseLeaveHandler",value:function(){this.pubSub.publish("app.mouseLeave"),this.hideHoverMenu(),this.animate()}},{key:"onBlurHandler",value:function(){this.animate()}},{key:"isZoomFixed",value:function(r){return this.props.zoomFixed||this.props.options.zoomFixed||this.state.viewConfig.zoomFixed||this.props.options.sizeMode===mm||r&&r.zoomFixed}},{key:"trackDimensionsModifiedHandler",value:function(r){const i=this.state.views[r.viewId];if(!i)return;const o=Ki(i.tracks,r.trackId);o&&(r.height!==void 0&&(o.height=r.height),r.width!==void 0&&(o.width=r.width),this.adjustLayoutToTrackSizes(i),this.setState(a=>({views:a.views})))}},{key:"wheelHandler",value:function(r){if(this.state.modal||this.props.options.sizeMode===mm)return;const i=r.nativeEvent||r,o=r.target===this.canvasElement;if(!N9(i.target,this.topDiv)||this.isZoomFixed())return;const a=i.clientX,s=i.clientY,u=this.getTiledPlotAtPosition(a,s);if(this.apiStack.wheel&&this.apiStack.wheel.length>0){const c=yr(i,this.topDiv);c[1]+=this.scrollTop;const l=u?u.listTracksAtPosition(c[0],c[1],!0).map(d=>d.originalTrack||d):[],f=l.find(d=>!d.isAugmentationTrack),h=f?[c[0]-f.position[0],c[1]-f.position[1]]:c,p={x:c[0],y:c[1],relTrackX:f&&f.flipText?h[1]:h[0],relTrackY:f&&f.flipText?h[0]:h[1],track:f,origEvt:i,sourceUid:this.uid,hoveredTracks:l,noHoveredTracks:l.length===0};this.apiPublish("wheel",p)}if(i.forwarded||o){r.stopPropagation(),r.preventDefault();return}if(r.preventDefault(),u){const{trackRenderer:c}=u;i.forwarded=!0,i&&(I_(i,c.eventTracker),i.preventDefault())}}},{key:"render",value:function(){this.tiledAreasDivs={},this.tiledAreas=O.createElement("div",{className:Hh["tiled-area"]}),this.mounted&&(this.tiledAreas=mr(this.state.views).map(c=>{const l=c.uid===this.state.addTrackPositionMenuUid?this.state.addTrackPositionMenuPosition:null;let f=null;if(this.state.chooseViewHandler){let m="transparent";this.state.mouseOverOverlayUid===c.uid&&(m="green"),f=O.createElement("div",{className:"tiled-plot-overlay",onClick:()=>this.state.chooseViewHandler(c.uid),onMouseEnter:()=>this.handleOverlayMouseEnter(c.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(c.uid),onMouseMove:()=>this.handleOverlayMouseEnter(c.uid),style:{position:"absolute",width:"100%",height:"100%",background:m,opacity:.3,zIndex:1}})}const h=O.createElement(oet,{key:`tp${c.uid}`,ref:m=>{this.tiledPlots[c.uid]=m},addTrackPosition:this.state.addTrackPositionView===c.uid?this.state.addTrackPosition:null,addTrackPositionMenuPosition:l,canvasElement:this.state.canvasElement,chooseTrackHandler:this.state.chooseTrackHandler?m=>this.state.chooseTrackHandler(c.uid,m):null,customDialog:this.state.customDialog,closeCustomDialog:()=>this.closeCustomDialog(),chromInfoPath:c.chromInfoPath,disableTrackMenu:this.isTrackMenuDisabled(),draggingHappening:this.state.draggingHappening!==null,editable:this.isEditable(),getLockGroupExtrema:m=>this.getLockGroupExtrema(c.uid,m),initialXDomain:c.initialXDomain,initialYDomain:c.initialYDomain,isShowGlobalMousePosition:this.isShowGlobalMousePosition,isValueScaleLocked:m=>this.isValueScaleLocked(c.uid,m),marginBottom:this.viewMarginBottom,marginLeft:this.viewMarginLeft,marginRight:this.viewMarginRight,marginTop:this.viewMarginTop,metaTracks:c.metaTracks,mouseTool:this.state.mouseTool,onChangeTrackData:(m,g)=>this.handleChangeTrackData(c.uid,m,g),onChangeTrackType:(m,g)=>this.handleChangeTrackType(c.uid,m,g),onCloseTrack:m=>this.handleCloseTrack(c.uid,m),onDataDomainChanged:(m,g)=>this.handleDataDomainChanged(c.uid,m,g),onLockValueScale:m=>this.handleLockValueScale(c.uid,m),onMouseMoveZoom:this.mouseMoveZoomHandler.bind(this),onNewTilesLoaded:m=>this.handleNewTilesLoaded(c.uid,m),onNoTrackAdded:this.handleNoTrackAdded.bind(this),onRangeSelection:this.rangeSelectionHandler.bind(this),onResizeTrack:this.triggerViewChangeDb,onScalesChanged:(m,g)=>this.handleScalesChanged(c.uid,m,g),onTrackOptionsChanged:(m,g)=>this.handleTrackOptionsChanged(c.uid,m,g),onTrackPositionChosen:this.handleTrackPositionChosen.bind(this),onTracksAdded:(m,g,v)=>this.handleTracksAdded(c.uid,m,g,v),onUnlockValueScale:m=>this.handleUnlockValueScale(c.uid,m),onValueScaleChanged:m=>this.syncValueScales(c.uid,m),overlays:c.overlays,paddingBottom:this.viewPaddingBottom,paddingLeft:this.viewPaddingLeft,paddingRight:this.viewPaddingRight,paddingTop:this.viewPaddingTop,pixiRenderer:this.pixiRenderer,pixiStage:this.pixiStage,pluginDataFetchers:this.pluginDataFetchers,pluginTracks:this.pluginTracks,rangeSelection1dSize:this.state.rangeSelection1dSize,rangeSelectionToInt:this.state.rangeSelectionToInt,registerDraggingChangedListener:m=>this.addDraggingChangedListener(c.uid,c.uid,m),removeDraggingChangedListener:m=>this.removeDraggingChangedListener(c.uid,c.uid,m),setCentersFunction:m=>{this.setCenters[c.uid]=m},svgElement:this.state.svgElement,tracks:c.tracks,trackSourceServers:this.state.viewConfig.trackSourceServers,uid:c.uid,verticalMargin:this.verticalMargin,viewOptions:c.options,xDomainLimits:c.xDomainLimits,yDomainLimits:c.yDomainLimits,zoomable:!this.isZoomFixed(c),zoomLimits:this.calculateZoomLimits(c,c.initialXDomain),zoomToDataExtentOnInit:()=>this.zoomToDataExtentOnInit.has(c.uid)}),p=(m,g)=>c.genomePositionSearchBox?O.createElement(Wet,{key:`gpsb${c.uid}`,ref:v=>{this.genomePositionSearchBoxes[c.uid]=v},autocompleteId:c.genomePositionSearchBox.autocompleteId,autocompleteServer:c.genomePositionSearchBox.autocompleteServer,chromInfoId:c.genomePositionSearchBox.chromInfoId,chromInfoPath:c.genomePositionSearchBox.chromInfoPath,chromInfoServer:c.genomePositionSearchBox.chromInfoServer,hideAvailableAssemblies:c.genomePositionSearchBox.hideAvailableAssemblies,isFocused:m,onFocus:g,onGeneSearch:this.geneSearchHandler.bind(this),onSelectedAssemblyChanged:(v,b,y)=>this.handleSelectedAssemblyChanged(c.uid,v,b,y),registerViewportChangedListener:v=>this.addScalesChangedListener(c.uid,c.uid,v),removeViewportChangedListener:()=>this.removeScalesChangedListener(c.uid,c.uid),setCenters:(v,b,y,_)=>this.setCenters[c.uid](v,b,y,!1,_),trackSourceServers:this.state.viewConfig.trackSourceServers,twoD:!!(c.tracks.left.length||c.tracks.right.length||c.tracks.center.length)}):null,d=this.isEditable()&&!this.isViewHeaderDisabled()&&!this.state.viewConfig.hideHeader?O.createElement(Att,{ref:m=>{this.viewHeaders[c.uid]=m},getGenomePositionSearchBox:p,isGenomePositionSearchBoxVisible:c.genomePositionSearchBox&&c.genomePositionSearchBox.visible,mouseTool:this.state.mouseTool,onAddView:()=>this.handleAddView(c),onClearView:()=>this.handleClearView(c.uid),onCloseView:()=>this.handleCloseView(c.uid),onEditViewConfig:this.handleEditViewConfigBound,onExportPNG:this.handleExportPNG.bind(this),onExportSVG:this.handleExportSVG.bind(this),onExportViewsAsJSON:this.handleExportViewAsJSON.bind(this),onExportViewsAsLink:this.handleExportViewsAsLink.bind(this),onLockLocation:m=>this.handleYankFunction(m,this.handleLocationLockChosen.bind(this)),onLockZoom:m=>this.handleYankFunction(m,this.handleZoomLockChosen.bind(this)),onLockZoomAndLocation:m=>this.handleYankFunction(m,(g,v)=>{this.handleZoomLockChosen(g,v),this.handleLocationLockChosen(g,v)}),onProjectViewport:this.handleProjectViewport.bind(this),onTakeAndLockZoomAndLocation:m=>{this.handleYankFunction(m,(g,v)=>{this.handleZoomYanked(g,v),this.handleLocationYanked(g,v),this.handleZoomLockChosen(g,v),this.handleLocationLockChosen(g,v)})},onTogglePositionSearchBox:this.handleTogglePositionSearchBox.bind(this),onTrackPositionChosen:m=>this.handleTrackPositionChosen(c.uid,m),onUnlockLocation:m=>this.handleUnlock(m,this.locationLocks),onUnlockZoom:m=>this.handleUnlock(m,this.zoomLocks),onUnlockZoomAndLocation:m=>{this.handleUnlock(m,this.zoomLocks),this.handleUnlock(m,this.locationLocks)},onViewOptionsChanged:m=>this.handleViewOptionsChanged(c.uid,m),onYankLocation:m=>this.handleYankFunction(m,this.handleLocationYanked.bind(this)),onYankZoom:m=>this.handleYankFunction(m,this.handleZoomYanked.bind(this)),onYankZoomAndLocation:m=>this.handleYankFunction(m,(g,v)=>{this.handleZoomYanked(g,v),this.handleLocationYanked(g,v)}),onZoomToData:m=>this.handleZoomToData(m),viewUid:c.uid}):null;return O.createElement("div",{key:c.uid,ref:m=>{this.tiledAreasDivs[c.uid]=m},className:Hh["tiled-area"]},d,h,f)}));let r=this.mounted?Object.values(this.state.views).filter(c=>c.layout).map(c=>c.layout):[];r=JSON.parse(JSON.stringify(r));const i=this.isEditable()?l9:0,o=this.isEditable()?u9:0,a=+this.props.options.containerPaddingX>=0?+this.props.options.containerPaddingX:i,s=+this.props.options.containerPaddingY>=0?+this.props.options.containerPaddingY:o,u=O.createElement(lce,{ref:c=>{this.gridLayout=c},cols:12,containerPadding:[a,s],draggableHandle:`.${co["multitrack-header-grabber"]}`,isDraggable:this.isEditable(),isResizable:this.isEditable(),layout:r,margin:this.isEditable()?[10,10]:[0,0],measureBeforeMount:!1,onBreakpointChange:this.onBreakpointChange.bind(this),onDragStart:this.handleDragStart.bind(this),onDragStop:this.handleDragStop.bind(this),onLayoutChange:this.handleLayoutChange.bind(this),onResize:this.resizeHandler.bind(this),rowHeight:this.state.rowHeight,useCSSTransforms:this.mounted,verticalCompact:this.state.viewConfig.compactLayout,width:this.state.width},this.tiledAreas);return O.createElement("div",{key:this.uid,ref:c=>{this.topDiv=c},className:ir("higlass",{"higlass-dark-theme":this.theme===wr,"higlass-container-overflow":this.props.options.sizeMode===PU||this.props.options.sizeMode===mm}),onMouseLeave:this.onMouseLeaveHandlerBound,onMouseMove:this.mouseMoveHandlerBound},O.createElement(PDe,{value:this.pubSub},O.createElement(f9e,{value:this.modal},O.createElement(bDe,{value:this.theme},this.state.modal,O.createElement("canvas",{key:this.uid,ref:c=>{this.canvasElement=c},onClick:this.canvasClickHandlerBound,className:Hh["higlass-canvas"]}),O.createElement("div",{ref:c=>{this.scrollContainer=c},className:ir("higlass-scroll-container",{"higlass-scroll-container-overflow":this.props.options.sizeMode===PU,"higlass-scroll-container-scroll":this.props.options.sizeMode===mm}),onScroll:this.onScrollHandlerBound},O.createElement("div",{ref:c=>{this.divDrawingSurface=c},className:ir("higlass-drawing-surface",Hh["higlass-drawing-surface"])},u),O.createElement("svg",{ref:c=>{this.svgElement=c},className:Hh["higlass-svg"],style:{position:"absolute",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none"}}))))))}}]),n}(O.Component);kv.defaultProps={options:{},zoomFixed:!1,compactLayout:!0};kv.propTypes={getApi:N.func,options:N.object,viewConfig:N.oneOfType([N.string,N.object]).isRequired,zoomFixed:N.bool,compactLayout:N.bool};function Wit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qit(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kit(r.key),r)}}function $it(e,t,n){return t&&qit(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kit(e){var t=Qit(e,"string");return typeof t=="symbol"?t:String(t)}function Qit(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Zit(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YP(e,t)}function YP(e,t){return YP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},YP(e,t)}function Jit(e){var t=rot();return function(){var n=CE(e),r;if(t){var i=CE(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return eot(this,r)}}function eot(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tot(e)}function tot(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rot(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function CE(e){return CE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},CE(e)}const not=(e,[t,n,r,i],o)=>{o.options.colorbarPosition||(o.options.colorbarPosition="hidden"),o.options.labelPosition||(o.options.labelPosition="hidden");const a="arbitary-id",s=aot(e,{editable:!1,zoomFixed:!1,views:[{uid:a,initialXDomain:[t,n],initialYDomain:[r,i],tracks:{center:[o]},layout:{w:12,h:12,x:0,y:0,moved:!1,static:!1}}]},{sizeMode:"bounded"});return{id:a,hgApi:s}};let iot=function(e){Zit(n,e);var t=Jit(n);function n(r){var i;return Wit(this,n),i=t.call(this,r),i.id=`id-${Math.random()}`,i}return $it(n,[{key:"componentDidMount",value:function(){this.initTrackViewer()}},{key:"shouldComponentUpdate",value:function(r){const{x:i,y:o,width:a,height:s}=r;return this.zoomTo(i,o,a,s),!1}},{key:"initTrackViewer",value:function(){const{trackConfig:r,x:i,y:o,width:a,height:s}=this.props,u=document.getElementById(this.id),{id:c,hgApi:l}=not(u,[i,i+a,o,o+s],r);this.viewUid=c,this.viewer=l}},{key:"zoomTo",value:function(r,i,o,a){this.viewer.zoomTo(this.viewUid,r,r+o,i,i+a)}},{key:"render",value:function(){return O.createElement("div",{id:this.id,style:{height:"100%",width:"100%"}})}}]),n}(O.Component);iot.propTypes={trackConfig:N.object,width:N.number,height:N.number,x:N.number,y:N.number};const oot=(e,t,n)=>{const r=O.createRef();return Fn.render(O.createElement(kv,{ref:r,options:n||{},viewConfig:t}),e),r.current},aot=(e,t,n)=>oot(e,t,n).api;export{Bs as ChromosomeInfo,kv as HiGlassComponent,iot as HiGlassTrackComponent,BR as getTrackObjectFromHGC,EW as mountHGComponent,UZ as schema,not as trackViewer,JK as version,aot as viewer,BN as waitForJsonComplete,$_ as waitForTilesLoaded,TW as waitForTransitionsFinished};
